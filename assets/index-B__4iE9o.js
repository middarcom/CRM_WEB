var Qv=t=>{throw TypeError(t)};var kh=(t,e,r)=>e.has(t)||Qv("Cannot "+r);var D=(t,e,r)=>(kh(t,e,"read from private field"),r?r.call(t):e.get(t)),je=(t,e,r)=>e.has(t)?Qv("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),de=(t,e,r,n)=>(kh(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Ie=(t,e,r)=>(kh(t,e,"access private method"),r);var Oc=(t,e,r,n)=>({set _(s){de(t,e,s,r)},get _(){return D(t,e,n)}});function x0(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();function w0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _0(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var b0={exports:{}},Ed={},j0={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nc=Symbol.for("react.element"),yE=Symbol.for("react.portal"),xE=Symbol.for("react.fragment"),wE=Symbol.for("react.strict_mode"),_E=Symbol.for("react.profiler"),bE=Symbol.for("react.provider"),jE=Symbol.for("react.context"),SE=Symbol.for("react.forward_ref"),NE=Symbol.for("react.suspense"),kE=Symbol.for("react.memo"),CE=Symbol.for("react.lazy"),Jv=Symbol.iterator;function EE(t){return t===null||typeof t!="object"?null:(t=Jv&&t[Jv]||t["@@iterator"],typeof t=="function"?t:null)}var S0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N0=Object.assign,k0={};function Pi(t,e,r){this.props=t,this.context=e,this.refs=k0,this.updater=r||S0}Pi.prototype.isReactComponent={};Pi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Pi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function C0(){}C0.prototype=Pi.prototype;function jp(t,e,r){this.props=t,this.context=e,this.refs=k0,this.updater=r||S0}var Sp=jp.prototype=new C0;Sp.constructor=jp;N0(Sp,Pi.prototype);Sp.isPureReactComponent=!0;var Xv=Array.isArray,E0=Object.prototype.hasOwnProperty,Np={current:null},P0={key:!0,ref:!0,__self:!0,__source:!0};function T0(t,e,r){var n,s={},a=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(a=""+e.key),e)E0.call(e,n)&&!P0.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:nc,type:t,key:a,ref:i,props:s,_owner:Np.current}}function PE(t,e){return{$$typeof:nc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function kp(t){return typeof t=="object"&&t!==null&&t.$$typeof===nc}function TE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Zv=/\/+/g;function Ch(t,e){return typeof t=="object"&&t!==null&&t.key!=null?TE(""+t.key):e.toString(36)}function fu(t,e,r,n,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case nc:case yE:i=!0}}if(i)return i=t,s=s(i),t=n===""?"."+Ch(i,0):n,Xv(s)?(r="",t!=null&&(r=t.replace(Zv,"$&/")+"/"),fu(s,e,r,"",function(u){return u})):s!=null&&(kp(s)&&(s=PE(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Zv,"$&/")+"/")+t)),e.push(s)),1;if(i=0,n=n===""?".":n+":",Xv(t))for(var l=0;l<t.length;l++){a=t[l];var c=n+Ch(a,l);i+=fu(a,e,r,c,s)}else if(c=EE(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=n+Ch(a,l++),i+=fu(a,e,r,c,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Dc(t,e,r){if(t==null)return t;var n=[],s=0;return fu(t,n,"","",function(a){return e.call(r,a,s++)}),n}function RE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var nr={current:null},mu={transition:null},OE={ReactCurrentDispatcher:nr,ReactCurrentBatchConfig:mu,ReactCurrentOwner:Np};function R0(){throw Error("act(...) is not supported in production builds of React.")}Me.Children={map:Dc,forEach:function(t,e,r){Dc(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Dc(t,function(){e++}),e},toArray:function(t){return Dc(t,function(e){return e})||[]},only:function(t){if(!kp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Me.Component=Pi;Me.Fragment=xE;Me.Profiler=_E;Me.PureComponent=jp;Me.StrictMode=wE;Me.Suspense=NE;Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OE;Me.act=R0;Me.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=N0({},t.props),s=t.key,a=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,i=Np.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)E0.call(e,c)&&!P0.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:nc,type:t.type,key:s,ref:a,props:n,_owner:i}};Me.createContext=function(t){return t={$$typeof:jE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bE,_context:t},t.Consumer=t};Me.createElement=T0;Me.createFactory=function(t){var e=T0.bind(null,t);return e.type=t,e};Me.createRef=function(){return{current:null}};Me.forwardRef=function(t){return{$$typeof:SE,render:t}};Me.isValidElement=kp;Me.lazy=function(t){return{$$typeof:CE,_payload:{_status:-1,_result:t},_init:RE}};Me.memo=function(t,e){return{$$typeof:kE,type:t,compare:e===void 0?null:e}};Me.startTransition=function(t){var e=mu.transition;mu.transition={};try{t()}finally{mu.transition=e}};Me.unstable_act=R0;Me.useCallback=function(t,e){return nr.current.useCallback(t,e)};Me.useContext=function(t){return nr.current.useContext(t)};Me.useDebugValue=function(){};Me.useDeferredValue=function(t){return nr.current.useDeferredValue(t)};Me.useEffect=function(t,e){return nr.current.useEffect(t,e)};Me.useId=function(){return nr.current.useId()};Me.useImperativeHandle=function(t,e,r){return nr.current.useImperativeHandle(t,e,r)};Me.useInsertionEffect=function(t,e){return nr.current.useInsertionEffect(t,e)};Me.useLayoutEffect=function(t,e){return nr.current.useLayoutEffect(t,e)};Me.useMemo=function(t,e){return nr.current.useMemo(t,e)};Me.useReducer=function(t,e,r){return nr.current.useReducer(t,e,r)};Me.useRef=function(t){return nr.current.useRef(t)};Me.useState=function(t){return nr.current.useState(t)};Me.useSyncExternalStore=function(t,e,r){return nr.current.useSyncExternalStore(t,e,r)};Me.useTransition=function(){return nr.current.useTransition()};Me.version="18.3.1";j0.exports=Me;var f=j0.exports;const fs=w0(f),Cp=x0({__proto__:null,default:fs},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DE=f,AE=Symbol.for("react.element"),ME=Symbol.for("react.fragment"),IE=Object.prototype.hasOwnProperty,LE=DE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FE={key:!0,ref:!0,__self:!0,__source:!0};function O0(t,e,r){var n,s={},a=null,i=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)IE.call(e,n)&&!FE.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:AE,type:t,key:a,ref:i,props:s,_owner:LE.current}}Ed.Fragment=ME;Ed.jsx=O0;Ed.jsxs=O0;b0.exports=Ed;var o=b0.exports,D0={exports:{}},Pr={},A0={exports:{}},M0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(T,B){var K=T.length;T.push(B);e:for(;0<K;){var L=K-1>>>1,ee=T[L];if(0<s(ee,B))T[L]=B,T[K]=ee,K=L;else break e}}function r(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var B=T[0],K=T.pop();if(K!==B){T[0]=K;e:for(var L=0,ee=T.length,ge=ee>>>1;L<ge;){var we=2*(L+1)-1,Re=T[we],Ce=we+1,ie=T[Ce];if(0>s(Re,K))Ce<ee&&0>s(ie,Re)?(T[L]=ie,T[Ce]=K,L=Ce):(T[L]=Re,T[we]=K,L=we);else if(Ce<ee&&0>s(ie,K))T[L]=ie,T[Ce]=K,L=Ce;else break e}}return B}function s(T,B){var K=T.sortIndex-B.sortIndex;return K!==0?K:T.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,h=null,m=3,p=!1,v=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(T){for(var B=r(u);B!==null;){if(B.callback===null)n(u);else if(B.startTime<=T)n(u),B.sortIndex=B.expirationTime,e(c,B);else break;B=r(u)}}function b(T){if(g=!1,_(T),!v)if(r(c)!==null)v=!0,I(j);else{var B=r(u);B!==null&&F(b,B.startTime-T)}}function j(T,B){v=!1,g&&(g=!1,x(k),k=-1),p=!0;var K=m;try{for(_(B),h=r(c);h!==null&&(!(h.expirationTime>B)||T&&!M());){var L=h.callback;if(typeof L=="function"){h.callback=null,m=h.priorityLevel;var ee=L(h.expirationTime<=B);B=t.unstable_now(),typeof ee=="function"?h.callback=ee:h===r(c)&&n(c),_(B)}else n(c);h=r(c)}if(h!==null)var ge=!0;else{var we=r(u);we!==null&&F(b,we.startTime-B),ge=!1}return ge}finally{h=null,m=K,p=!1}}var P=!1,S=null,k=-1,C=5,E=-1;function M(){return!(t.unstable_now()-E<C)}function R(){if(S!==null){var T=t.unstable_now();E=T;var B=!0;try{B=S(!0,T)}finally{B?X():(P=!1,S=null)}}else P=!1}var X;if(typeof y=="function")X=function(){y(R)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,se=O.port2;O.port1.onmessage=R,X=function(){se.postMessage(null)}}else X=function(){w(R,0)};function I(T){S=T,P||(P=!0,X())}function F(T,B){k=w(function(){T(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(T){T.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,I(j))},t.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<T?Math.floor(1e3/T):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(T){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var K=m;m=B;try{return T()}finally{m=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(T,B){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var K=m;m=T;try{return B()}finally{m=K}},t.unstable_scheduleCallback=function(T,B,K){var L=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?L+K:L):K=L,T){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=K+ee,T={id:d++,callback:B,priorityLevel:T,startTime:K,expirationTime:ee,sortIndex:-1},K>L?(T.sortIndex=K,e(u,T),r(c)===null&&T===r(u)&&(g?(x(k),k=-1):g=!0,F(b,K-L))):(T.sortIndex=ee,e(c,T),v||p||(v=!0,I(j))),T},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(T){var B=m;return function(){var K=m;m=B;try{return T.apply(this,arguments)}finally{m=K}}}})(M0);A0.exports=M0;var $E=A0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UE=f,Cr=$E;function re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var I0=new Set,bl={};function no(t,e){fi(t,e),fi(t+"Capture",e)}function fi(t,e){for(bl[t]=e,t=0;t<e.length;t++)I0.add(e[t])}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Df=Object.prototype.hasOwnProperty,BE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ey={},ty={};function zE(t){return Df.call(ty,t)?!0:Df.call(ey,t)?!1:BE.test(t)?ty[t]=!0:(ey[t]=!0,!1)}function WE(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function VE(t,e,r,n){if(e===null||typeof e>"u"||WE(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sr(t,e,r,n,s,a,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=i}var Ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ut[t]=new sr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ut[e]=new sr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ut[t]=new sr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ut[t]=new sr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ut[t]=new sr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ut[t]=new sr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ut[t]=new sr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ut[t]=new sr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ut[t]=new sr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ep=/[\-:]([a-z])/g;function Pp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ep,Pp);Ut[e]=new sr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ep,Pp);Ut[e]=new sr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ep,Pp);Ut[e]=new sr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ut[t]=new sr(t,1,!1,t.toLowerCase(),null,!1,!1)});Ut.xlinkHref=new sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ut[t]=new sr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Tp(t,e,r,n){var s=Ut.hasOwnProperty(e)?Ut[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(VE(e,r,s,n)&&(r=null),n||s===null?zE(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var ss=UE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ac=Symbol.for("react.element"),Eo=Symbol.for("react.portal"),Po=Symbol.for("react.fragment"),Rp=Symbol.for("react.strict_mode"),Af=Symbol.for("react.profiler"),L0=Symbol.for("react.provider"),F0=Symbol.for("react.context"),Op=Symbol.for("react.forward_ref"),Mf=Symbol.for("react.suspense"),If=Symbol.for("react.suspense_list"),Dp=Symbol.for("react.memo"),gs=Symbol.for("react.lazy"),$0=Symbol.for("react.offscreen"),ry=Symbol.iterator;function zi(t){return t===null||typeof t!="object"?null:(t=ry&&t[ry]||t["@@iterator"],typeof t=="function"?t:null)}var ft=Object.assign,Eh;function Zi(t){if(Eh===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Eh=e&&e[1]||""}return`
`+Eh+t}var Ph=!1;function Th(t,e){if(!t||Ph)return"";Ph=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=n.stack.split(`
`),i=s.length-1,l=a.length-1;1<=i&&0<=l&&s[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==a[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==a[l]){var c=`
`+s[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=l);break}}}finally{Ph=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Zi(t):""}function HE(t){switch(t.tag){case 5:return Zi(t.type);case 16:return Zi("Lazy");case 13:return Zi("Suspense");case 19:return Zi("SuspenseList");case 0:case 2:case 15:return t=Th(t.type,!1),t;case 11:return t=Th(t.type.render,!1),t;case 1:return t=Th(t.type,!0),t;default:return""}}function Lf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Po:return"Fragment";case Eo:return"Portal";case Af:return"Profiler";case Rp:return"StrictMode";case Mf:return"Suspense";case If:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case F0:return(t.displayName||"Context")+".Consumer";case L0:return(t._context.displayName||"Context")+".Provider";case Op:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Dp:return e=t.displayName||null,e!==null?e:Lf(t.type)||"Memo";case gs:e=t._payload,t=t._init;try{return Lf(t(e))}catch{}}return null}function qE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lf(e);case 8:return e===Rp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function U0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function KE(t){var e=U0(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,a.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Mc(t){t._valueTracker||(t._valueTracker=KE(t))}function B0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=U0(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Tu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ff(t,e){var r=e.checked;return ft({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function ny(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=qs(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function z0(t,e){e=e.checked,e!=null&&Tp(t,"checked",e,!1)}function $f(t,e){z0(t,e);var r=qs(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Uf(t,e.type,r):e.hasOwnProperty("defaultValue")&&Uf(t,e.type,qs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sy(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Uf(t,e,r){(e!=="number"||Tu(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var el=Array.isArray;function zo(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+qs(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Bf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(re(91));return ft({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ay(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(re(92));if(el(r)){if(1<r.length)throw Error(re(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:qs(r)}}function W0(t,e){var r=qs(e.value),n=qs(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function oy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function V0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?V0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ic,H0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ic=Ic||document.createElement("div"),Ic.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ic.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function jl(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var il={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GE=["Webkit","ms","Moz","O"];Object.keys(il).forEach(function(t){GE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),il[e]=il[t]})});function q0(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||il.hasOwnProperty(t)&&il[t]?(""+e).trim():e+"px"}function K0(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=q0(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var YE=ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wf(t,e){if(e){if(YE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(re(62))}}function Vf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hf=null;function Ap(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qf=null,Wo=null,Vo=null;function iy(t){if(t=oc(t)){if(typeof qf!="function")throw Error(re(280));var e=t.stateNode;e&&(e=Dd(e),qf(t.stateNode,t.type,e))}}function G0(t){Wo?Vo?Vo.push(t):Vo=[t]:Wo=t}function Y0(){if(Wo){var t=Wo,e=Vo;if(Vo=Wo=null,iy(t),e)for(t=0;t<e.length;t++)iy(e[t])}}function Q0(t,e){return t(e)}function J0(){}var Rh=!1;function X0(t,e,r){if(Rh)return t(e,r);Rh=!0;try{return Q0(t,e,r)}finally{Rh=!1,(Wo!==null||Vo!==null)&&(J0(),Y0())}}function Sl(t,e){var r=t.stateNode;if(r===null)return null;var n=Dd(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(re(231,e,typeof r));return r}var Kf=!1;if(Xn)try{var Wi={};Object.defineProperty(Wi,"passive",{get:function(){Kf=!0}}),window.addEventListener("test",Wi,Wi),window.removeEventListener("test",Wi,Wi)}catch{Kf=!1}function QE(t,e,r,n,s,a,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var ll=!1,Ru=null,Ou=!1,Gf=null,JE={onError:function(t){ll=!0,Ru=t}};function XE(t,e,r,n,s,a,i,l,c){ll=!1,Ru=null,QE.apply(JE,arguments)}function ZE(t,e,r,n,s,a,i,l,c){if(XE.apply(this,arguments),ll){if(ll){var u=Ru;ll=!1,Ru=null}else throw Error(re(198));Ou||(Ou=!0,Gf=u)}}function so(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Z0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ly(t){if(so(t)!==t)throw Error(re(188))}function eP(t){var e=t.alternate;if(!e){if(e=so(t),e===null)throw Error(re(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return ly(s),t;if(a===n)return ly(s),e;a=a.sibling}throw Error(re(188))}if(r.return!==n.return)r=s,n=a;else{for(var i=!1,l=s.child;l;){if(l===r){i=!0,r=s,n=a;break}if(l===n){i=!0,n=s,r=a;break}l=l.sibling}if(!i){for(l=a.child;l;){if(l===r){i=!0,r=a,n=s;break}if(l===n){i=!0,n=a,r=s;break}l=l.sibling}if(!i)throw Error(re(189))}}if(r.alternate!==n)throw Error(re(190))}if(r.tag!==3)throw Error(re(188));return r.stateNode.current===r?t:e}function e_(t){return t=eP(t),t!==null?t_(t):null}function t_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=t_(t);if(e!==null)return e;t=t.sibling}return null}var r_=Cr.unstable_scheduleCallback,cy=Cr.unstable_cancelCallback,tP=Cr.unstable_shouldYield,rP=Cr.unstable_requestPaint,yt=Cr.unstable_now,nP=Cr.unstable_getCurrentPriorityLevel,Mp=Cr.unstable_ImmediatePriority,n_=Cr.unstable_UserBlockingPriority,Du=Cr.unstable_NormalPriority,sP=Cr.unstable_LowPriority,s_=Cr.unstable_IdlePriority,Pd=null,En=null;function aP(t){if(En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(Pd,t,void 0,(t.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:lP,oP=Math.log,iP=Math.LN2;function lP(t){return t>>>=0,t===0?32:31-(oP(t)/iP|0)|0}var Lc=64,Fc=4194304;function tl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Au(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,a=t.pingedLanes,i=r&268435455;if(i!==0){var l=i&~s;l!==0?n=tl(l):(a&=i,a!==0&&(n=tl(a)))}else i=r&~s,i!==0?n=tl(i):a!==0&&(n=tl(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-rn(e),s=1<<r,n|=t[r],e&=~s;return n}function cP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uP(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var i=31-rn(a),l=1<<i,c=s[i];c===-1?(!(l&r)||l&n)&&(s[i]=cP(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function Yf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function a_(){var t=Lc;return Lc<<=1,!(Lc&4194240)&&(Lc=64),t}function Oh(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function sc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rn(e),t[e]=r}function dP(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-rn(r),a=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~a}}function Ip(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-rn(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Ye=0;function o_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var i_,Lp,l_,c_,u_,Qf=!1,$c=[],As=null,Ms=null,Is=null,Nl=new Map,kl=new Map,ys=[],hP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uy(t,e){switch(t){case"focusin":case"focusout":As=null;break;case"dragenter":case"dragleave":Ms=null;break;case"mouseover":case"mouseout":Is=null;break;case"pointerover":case"pointerout":Nl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":kl.delete(e.pointerId)}}function Vi(t,e,r,n,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},e!==null&&(e=oc(e),e!==null&&Lp(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function fP(t,e,r,n,s){switch(e){case"focusin":return As=Vi(As,t,e,r,n,s),!0;case"dragenter":return Ms=Vi(Ms,t,e,r,n,s),!0;case"mouseover":return Is=Vi(Is,t,e,r,n,s),!0;case"pointerover":var a=s.pointerId;return Nl.set(a,Vi(Nl.get(a)||null,t,e,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,kl.set(a,Vi(kl.get(a)||null,t,e,r,n,s)),!0}return!1}function d_(t){var e=ka(t.target);if(e!==null){var r=so(e);if(r!==null){if(e=r.tag,e===13){if(e=Z0(r),e!==null){t.blockedOn=e,u_(t.priority,function(){l_(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Jf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Hf=n,r.target.dispatchEvent(n),Hf=null}else return e=oc(r),e!==null&&Lp(e),t.blockedOn=r,!1;e.shift()}return!0}function dy(t,e,r){pu(t)&&r.delete(e)}function mP(){Qf=!1,As!==null&&pu(As)&&(As=null),Ms!==null&&pu(Ms)&&(Ms=null),Is!==null&&pu(Is)&&(Is=null),Nl.forEach(dy),kl.forEach(dy)}function Hi(t,e){t.blockedOn===e&&(t.blockedOn=null,Qf||(Qf=!0,Cr.unstable_scheduleCallback(Cr.unstable_NormalPriority,mP)))}function Cl(t){function e(s){return Hi(s,t)}if(0<$c.length){Hi($c[0],t);for(var r=1;r<$c.length;r++){var n=$c[r];n.blockedOn===t&&(n.blockedOn=null)}}for(As!==null&&Hi(As,t),Ms!==null&&Hi(Ms,t),Is!==null&&Hi(Is,t),Nl.forEach(e),kl.forEach(e),r=0;r<ys.length;r++)n=ys[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<ys.length&&(r=ys[0],r.blockedOn===null);)d_(r),r.blockedOn===null&&ys.shift()}var Ho=ss.ReactCurrentBatchConfig,Mu=!0;function pP(t,e,r,n){var s=Ye,a=Ho.transition;Ho.transition=null;try{Ye=1,Fp(t,e,r,n)}finally{Ye=s,Ho.transition=a}}function gP(t,e,r,n){var s=Ye,a=Ho.transition;Ho.transition=null;try{Ye=4,Fp(t,e,r,n)}finally{Ye=s,Ho.transition=a}}function Fp(t,e,r,n){if(Mu){var s=Jf(t,e,r,n);if(s===null)zh(t,e,n,Iu,r),uy(t,n);else if(fP(s,t,e,r,n))n.stopPropagation();else if(uy(t,n),e&4&&-1<hP.indexOf(t)){for(;s!==null;){var a=oc(s);if(a!==null&&i_(a),a=Jf(t,e,r,n),a===null&&zh(t,e,n,Iu,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else zh(t,e,n,null,r)}}var Iu=null;function Jf(t,e,r,n){if(Iu=null,t=Ap(n),t=ka(t),t!==null)if(e=so(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Z0(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Iu=t,null}function h_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nP()){case Mp:return 1;case n_:return 4;case Du:case sP:return 16;case s_:return 536870912;default:return 16}default:return 16}}var Ps=null,$p=null,gu=null;function f_(){if(gu)return gu;var t,e=$p,r=e.length,n,s="value"in Ps?Ps.value:Ps.textContent,a=s.length;for(t=0;t<r&&e[t]===s[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===s[a-n];n++);return gu=s.slice(t,1<n?1-n:void 0)}function vu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Uc(){return!0}function hy(){return!1}function Tr(t){function e(r,n,s,a,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Uc:hy,this.isPropagationStopped=hy,this}return ft(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Uc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Uc)},persist:function(){},isPersistent:Uc}),e}var Ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Up=Tr(Ti),ac=ft({},Ti,{view:0,detail:0}),vP=Tr(ac),Dh,Ah,qi,Td=ft({},ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qi&&(qi&&t.type==="mousemove"?(Dh=t.screenX-qi.screenX,Ah=t.screenY-qi.screenY):Ah=Dh=0,qi=t),Dh)},movementY:function(t){return"movementY"in t?t.movementY:Ah}}),fy=Tr(Td),yP=ft({},Td,{dataTransfer:0}),xP=Tr(yP),wP=ft({},ac,{relatedTarget:0}),Mh=Tr(wP),_P=ft({},Ti,{animationName:0,elapsedTime:0,pseudoElement:0}),bP=Tr(_P),jP=ft({},Ti,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),SP=Tr(jP),NP=ft({},Ti,{data:0}),my=Tr(NP),kP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=EP[t])?!!e[t]:!1}function Bp(){return PP}var TP=ft({},ac,{key:function(t){if(t.key){var e=kP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?CP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bp,charCode:function(t){return t.type==="keypress"?vu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),RP=Tr(TP),OP=ft({},Td,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),py=Tr(OP),DP=ft({},ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bp}),AP=Tr(DP),MP=ft({},Ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),IP=Tr(MP),LP=ft({},Td,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),FP=Tr(LP),$P=[9,13,27,32],zp=Xn&&"CompositionEvent"in window,cl=null;Xn&&"documentMode"in document&&(cl=document.documentMode);var UP=Xn&&"TextEvent"in window&&!cl,m_=Xn&&(!zp||cl&&8<cl&&11>=cl),gy=" ",vy=!1;function p_(t,e){switch(t){case"keyup":return $P.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function g_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var To=!1;function BP(t,e){switch(t){case"compositionend":return g_(e);case"keypress":return e.which!==32?null:(vy=!0,gy);case"textInput":return t=e.data,t===gy&&vy?null:t;default:return null}}function zP(t,e){if(To)return t==="compositionend"||!zp&&p_(t,e)?(t=f_(),gu=$p=Ps=null,To=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return m_&&e.locale!=="ko"?null:e.data;default:return null}}var WP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!WP[t.type]:e==="textarea"}function v_(t,e,r,n){G0(n),e=Lu(e,"onChange"),0<e.length&&(r=new Up("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var ul=null,El=null;function VP(t){E_(t,0)}function Rd(t){var e=Do(t);if(B0(e))return t}function HP(t,e){if(t==="change")return e}var y_=!1;if(Xn){var Ih;if(Xn){var Lh="oninput"in document;if(!Lh){var xy=document.createElement("div");xy.setAttribute("oninput","return;"),Lh=typeof xy.oninput=="function"}Ih=Lh}else Ih=!1;y_=Ih&&(!document.documentMode||9<document.documentMode)}function wy(){ul&&(ul.detachEvent("onpropertychange",x_),El=ul=null)}function x_(t){if(t.propertyName==="value"&&Rd(El)){var e=[];v_(e,El,t,Ap(t)),X0(VP,e)}}function qP(t,e,r){t==="focusin"?(wy(),ul=e,El=r,ul.attachEvent("onpropertychange",x_)):t==="focusout"&&wy()}function KP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Rd(El)}function GP(t,e){if(t==="click")return Rd(e)}function YP(t,e){if(t==="input"||t==="change")return Rd(e)}function QP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ln=typeof Object.is=="function"?Object.is:QP;function Pl(t,e){if(ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Df.call(e,s)||!ln(t[s],e[s]))return!1}return!0}function _y(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function by(t,e){var r=_y(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=_y(r)}}function w_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?w_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function __(){for(var t=window,e=Tu();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Tu(t.document)}return e}function Wp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function JP(t){var e=__(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&w_(r.ownerDocument.documentElement,r)){if(n!==null&&Wp(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!t.extend&&a>n&&(s=n,n=a,a=s),s=by(r,a);var i=by(r,n);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var XP=Xn&&"documentMode"in document&&11>=document.documentMode,Ro=null,Xf=null,dl=null,Zf=!1;function jy(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Zf||Ro==null||Ro!==Tu(n)||(n=Ro,"selectionStart"in n&&Wp(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),dl&&Pl(dl,n)||(dl=n,n=Lu(Xf,"onSelect"),0<n.length&&(e=new Up("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Ro)))}function Bc(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Oo={animationend:Bc("Animation","AnimationEnd"),animationiteration:Bc("Animation","AnimationIteration"),animationstart:Bc("Animation","AnimationStart"),transitionend:Bc("Transition","TransitionEnd")},Fh={},b_={};Xn&&(b_=document.createElement("div").style,"AnimationEvent"in window||(delete Oo.animationend.animation,delete Oo.animationiteration.animation,delete Oo.animationstart.animation),"TransitionEvent"in window||delete Oo.transitionend.transition);function Od(t){if(Fh[t])return Fh[t];if(!Oo[t])return t;var e=Oo[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in b_)return Fh[t]=e[r];return t}var j_=Od("animationend"),S_=Od("animationiteration"),N_=Od("animationstart"),k_=Od("transitionend"),C_=new Map,Sy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ea(t,e){C_.set(t,e),no(e,[t])}for(var $h=0;$h<Sy.length;$h++){var Uh=Sy[$h],ZP=Uh.toLowerCase(),e2=Uh[0].toUpperCase()+Uh.slice(1);ea(ZP,"on"+e2)}ea(j_,"onAnimationEnd");ea(S_,"onAnimationIteration");ea(N_,"onAnimationStart");ea("dblclick","onDoubleClick");ea("focusin","onFocus");ea("focusout","onBlur");ea(k_,"onTransitionEnd");fi("onMouseEnter",["mouseout","mouseover"]);fi("onMouseLeave",["mouseout","mouseover"]);fi("onPointerEnter",["pointerout","pointerover"]);fi("onPointerLeave",["pointerout","pointerover"]);no("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));no("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));no("onBeforeInput",["compositionend","keypress","textInput","paste"]);no("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));no("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));no("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),t2=new Set("cancel close invalid load scroll toggle".split(" ").concat(rl));function Ny(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,ZE(n,e,void 0,t),t.currentTarget=null}function E_(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;Ny(s,l,u),a=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;Ny(s,l,u),a=c}}}if(Ou)throw t=Gf,Ou=!1,Gf=null,t}function st(t,e){var r=e[sm];r===void 0&&(r=e[sm]=new Set);var n=t+"__bubble";r.has(n)||(P_(e,t,2,!1),r.add(n))}function Bh(t,e,r){var n=0;e&&(n|=4),P_(r,t,n,e)}var zc="_reactListening"+Math.random().toString(36).slice(2);function Tl(t){if(!t[zc]){t[zc]=!0,I0.forEach(function(r){r!=="selectionchange"&&(t2.has(r)||Bh(r,!1,t),Bh(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zc]||(e[zc]=!0,Bh("selectionchange",!1,e))}}function P_(t,e,r,n){switch(h_(e)){case 1:var s=pP;break;case 4:s=gP;break;default:s=Fp}r=s.bind(null,e,r,t),s=void 0,!Kf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function zh(t,e,r,n,s){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;l!==null;){if(i=ka(l),i===null)return;if(c=i.tag,c===5||c===6){n=a=i;continue e}l=l.parentNode}}n=n.return}X0(function(){var u=a,d=Ap(r),h=[];e:{var m=C_.get(t);if(m!==void 0){var p=Up,v=t;switch(t){case"keypress":if(vu(r)===0)break e;case"keydown":case"keyup":p=RP;break;case"focusin":v="focus",p=Mh;break;case"focusout":v="blur",p=Mh;break;case"beforeblur":case"afterblur":p=Mh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=fy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=xP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=AP;break;case j_:case S_:case N_:p=bP;break;case k_:p=IP;break;case"scroll":p=vP;break;case"wheel":p=FP;break;case"copy":case"cut":case"paste":p=SP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=py}var g=(e&4)!==0,w=!g&&t==="scroll",x=g?m!==null?m+"Capture":null:m;g=[];for(var y=u,_;y!==null;){_=y;var b=_.stateNode;if(_.tag===5&&b!==null&&(_=b,x!==null&&(b=Sl(y,x),b!=null&&g.push(Rl(y,b,_)))),w)break;y=y.return}0<g.length&&(m=new p(m,v,null,r,d),h.push({event:m,listeners:g}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&r!==Hf&&(v=r.relatedTarget||r.fromElement)&&(ka(v)||v[Zn]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(v=r.relatedTarget||r.toElement,p=u,v=v?ka(v):null,v!==null&&(w=so(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(g=fy,b="onMouseLeave",x="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=py,b="onPointerLeave",x="onPointerEnter",y="pointer"),w=p==null?m:Do(p),_=v==null?m:Do(v),m=new g(b,y+"leave",p,r,d),m.target=w,m.relatedTarget=_,b=null,ka(d)===u&&(g=new g(x,y+"enter",v,r,d),g.target=_,g.relatedTarget=w,b=g),w=b,p&&v)t:{for(g=p,x=v,y=0,_=g;_;_=mo(_))y++;for(_=0,b=x;b;b=mo(b))_++;for(;0<y-_;)g=mo(g),y--;for(;0<_-y;)x=mo(x),_--;for(;y--;){if(g===x||x!==null&&g===x.alternate)break t;g=mo(g),x=mo(x)}g=null}else g=null;p!==null&&ky(h,m,p,g,!1),v!==null&&w!==null&&ky(h,w,v,g,!0)}}e:{if(m=u?Do(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var j=HP;else if(yy(m))if(y_)j=YP;else{j=KP;var P=qP}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=GP);if(j&&(j=j(t,u))){v_(h,j,r,d);break e}P&&P(t,m,u),t==="focusout"&&(P=m._wrapperState)&&P.controlled&&m.type==="number"&&Uf(m,"number",m.value)}switch(P=u?Do(u):window,t){case"focusin":(yy(P)||P.contentEditable==="true")&&(Ro=P,Xf=u,dl=null);break;case"focusout":dl=Xf=Ro=null;break;case"mousedown":Zf=!0;break;case"contextmenu":case"mouseup":case"dragend":Zf=!1,jy(h,r,d);break;case"selectionchange":if(XP)break;case"keydown":case"keyup":jy(h,r,d)}var S;if(zp)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else To?p_(t,r)&&(k="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(m_&&r.locale!=="ko"&&(To||k!=="onCompositionStart"?k==="onCompositionEnd"&&To&&(S=f_()):(Ps=d,$p="value"in Ps?Ps.value:Ps.textContent,To=!0)),P=Lu(u,k),0<P.length&&(k=new my(k,t,null,r,d),h.push({event:k,listeners:P}),S?k.data=S:(S=g_(r),S!==null&&(k.data=S)))),(S=UP?BP(t,r):zP(t,r))&&(u=Lu(u,"onBeforeInput"),0<u.length&&(d=new my("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=S))}E_(h,e)})}function Rl(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Lu(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Sl(t,r),a!=null&&n.unshift(Rl(t,a,s)),a=Sl(t,e),a!=null&&n.push(Rl(t,a,s))),t=t.return}return n}function mo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ky(t,e,r,n,s){for(var a=e._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Sl(r,a),c!=null&&i.unshift(Rl(r,c,l))):s||(c=Sl(r,a),c!=null&&i.push(Rl(r,c,l)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var r2=/\r\n?/g,n2=/\u0000|\uFFFD/g;function Cy(t){return(typeof t=="string"?t:""+t).replace(r2,`
`).replace(n2,"")}function Wc(t,e,r){if(e=Cy(e),Cy(t)!==e&&r)throw Error(re(425))}function Fu(){}var em=null,tm=null;function rm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nm=typeof setTimeout=="function"?setTimeout:void 0,s2=typeof clearTimeout=="function"?clearTimeout:void 0,Ey=typeof Promise=="function"?Promise:void 0,a2=typeof queueMicrotask=="function"?queueMicrotask:typeof Ey<"u"?function(t){return Ey.resolve(null).then(t).catch(o2)}:nm;function o2(t){setTimeout(function(){throw t})}function Wh(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Cl(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Cl(e)}function Ls(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Py(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ri=Math.random().toString(36).slice(2),_n="__reactFiber$"+Ri,Ol="__reactProps$"+Ri,Zn="__reactContainer$"+Ri,sm="__reactEvents$"+Ri,i2="__reactListeners$"+Ri,l2="__reactHandles$"+Ri;function ka(t){var e=t[_n];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Zn]||r[_n]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Py(t);t!==null;){if(r=t[_n])return r;t=Py(t)}return e}t=r,r=t.parentNode}return null}function oc(t){return t=t[_n]||t[Zn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Do(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(re(33))}function Dd(t){return t[Ol]||null}var am=[],Ao=-1;function ta(t){return{current:t}}function at(t){0>Ao||(t.current=am[Ao],am[Ao]=null,Ao--)}function et(t,e){Ao++,am[Ao]=t.current,t.current=e}var Ks={},Gt=ta(Ks),mr=ta(!1),Va=Ks;function mi(t,e){var r=t.type.contextTypes;if(!r)return Ks;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function pr(t){return t=t.childContextTypes,t!=null}function $u(){at(mr),at(Gt)}function Ty(t,e,r){if(Gt.current!==Ks)throw Error(re(168));et(Gt,e),et(mr,r)}function T_(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(re(108,qE(t)||"Unknown",s));return ft({},r,n)}function Uu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ks,Va=Gt.current,et(Gt,t),et(mr,mr.current),!0}function Ry(t,e,r){var n=t.stateNode;if(!n)throw Error(re(169));r?(t=T_(t,e,Va),n.__reactInternalMemoizedMergedChildContext=t,at(mr),at(Gt),et(Gt,t)):at(mr),et(mr,r)}var Vn=null,Ad=!1,Vh=!1;function R_(t){Vn===null?Vn=[t]:Vn.push(t)}function c2(t){Ad=!0,R_(t)}function ra(){if(!Vh&&Vn!==null){Vh=!0;var t=0,e=Ye;try{var r=Vn;for(Ye=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Vn=null,Ad=!1}catch(s){throw Vn!==null&&(Vn=Vn.slice(t+1)),r_(Mp,ra),s}finally{Ye=e,Vh=!1}}return null}var Mo=[],Io=0,Bu=null,zu=0,Dr=[],Ar=0,Ha=null,Kn=1,Gn="";function xa(t,e){Mo[Io++]=zu,Mo[Io++]=Bu,Bu=t,zu=e}function O_(t,e,r){Dr[Ar++]=Kn,Dr[Ar++]=Gn,Dr[Ar++]=Ha,Ha=t;var n=Kn;t=Gn;var s=32-rn(n)-1;n&=~(1<<s),r+=1;var a=32-rn(e)+s;if(30<a){var i=s-s%5;a=(n&(1<<i)-1).toString(32),n>>=i,s-=i,Kn=1<<32-rn(e)+s|r<<s|n,Gn=a+t}else Kn=1<<a|r<<s|n,Gn=t}function Vp(t){t.return!==null&&(xa(t,1),O_(t,1,0))}function Hp(t){for(;t===Bu;)Bu=Mo[--Io],Mo[Io]=null,zu=Mo[--Io],Mo[Io]=null;for(;t===Ha;)Ha=Dr[--Ar],Dr[Ar]=null,Gn=Dr[--Ar],Dr[Ar]=null,Kn=Dr[--Ar],Dr[Ar]=null}var Sr=null,jr=null,ot=!1,tn=null;function D_(t,e){var r=Ir(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Oy(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Sr=t,jr=Ls(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Sr=t,jr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ha!==null?{id:Kn,overflow:Gn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ir(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Sr=t,jr=null,!0):!1;default:return!1}}function om(t){return(t.mode&1)!==0&&(t.flags&128)===0}function im(t){if(ot){var e=jr;if(e){var r=e;if(!Oy(t,e)){if(om(t))throw Error(re(418));e=Ls(r.nextSibling);var n=Sr;e&&Oy(t,e)?D_(n,r):(t.flags=t.flags&-4097|2,ot=!1,Sr=t)}}else{if(om(t))throw Error(re(418));t.flags=t.flags&-4097|2,ot=!1,Sr=t}}}function Dy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Sr=t}function Vc(t){if(t!==Sr)return!1;if(!ot)return Dy(t),ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rm(t.type,t.memoizedProps)),e&&(e=jr)){if(om(t))throw A_(),Error(re(418));for(;e;)D_(t,e),e=Ls(e.nextSibling)}if(Dy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){jr=Ls(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}jr=null}}else jr=Sr?Ls(t.stateNode.nextSibling):null;return!0}function A_(){for(var t=jr;t;)t=Ls(t.nextSibling)}function pi(){jr=Sr=null,ot=!1}function qp(t){tn===null?tn=[t]:tn.push(t)}var u2=ss.ReactCurrentBatchConfig;function Ki(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(re(309));var n=r.stateNode}if(!n)throw Error(re(147,t));var s=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(i){var l=s.refs;i===null?delete l[a]:l[a]=i},e._stringRef=a,e)}if(typeof t!="string")throw Error(re(284));if(!r._owner)throw Error(re(290,t))}return t}function Hc(t,e){throw t=Object.prototype.toString.call(e),Error(re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ay(t){var e=t._init;return e(t._payload)}function M_(t){function e(x,y){if(t){var _=x.deletions;_===null?(x.deletions=[y],x.flags|=16):_.push(y)}}function r(x,y){if(!t)return null;for(;y!==null;)e(x,y),y=y.sibling;return null}function n(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function s(x,y){return x=Bs(x,y),x.index=0,x.sibling=null,x}function a(x,y,_){return x.index=_,t?(_=x.alternate,_!==null?(_=_.index,_<y?(x.flags|=2,y):_):(x.flags|=2,y)):(x.flags|=1048576,y)}function i(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,y,_,b){return y===null||y.tag!==6?(y=Jh(_,x.mode,b),y.return=x,y):(y=s(y,_),y.return=x,y)}function c(x,y,_,b){var j=_.type;return j===Po?d(x,y,_.props.children,b,_.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===gs&&Ay(j)===y.type)?(b=s(y,_.props),b.ref=Ki(x,y,_),b.return=x,b):(b=Su(_.type,_.key,_.props,null,x.mode,b),b.ref=Ki(x,y,_),b.return=x,b)}function u(x,y,_,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=Xh(_,x.mode,b),y.return=x,y):(y=s(y,_.children||[]),y.return=x,y)}function d(x,y,_,b,j){return y===null||y.tag!==7?(y=Ua(_,x.mode,b,j),y.return=x,y):(y=s(y,_),y.return=x,y)}function h(x,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Jh(""+y,x.mode,_),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ac:return _=Su(y.type,y.key,y.props,null,x.mode,_),_.ref=Ki(x,null,y),_.return=x,_;case Eo:return y=Xh(y,x.mode,_),y.return=x,y;case gs:var b=y._init;return h(x,b(y._payload),_)}if(el(y)||zi(y))return y=Ua(y,x.mode,_,null),y.return=x,y;Hc(x,y)}return null}function m(x,y,_,b){var j=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return j!==null?null:l(x,y,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ac:return _.key===j?c(x,y,_,b):null;case Eo:return _.key===j?u(x,y,_,b):null;case gs:return j=_._init,m(x,y,j(_._payload),b)}if(el(_)||zi(_))return j!==null?null:d(x,y,_,b,null);Hc(x,_)}return null}function p(x,y,_,b,j){if(typeof b=="string"&&b!==""||typeof b=="number")return x=x.get(_)||null,l(y,x,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ac:return x=x.get(b.key===null?_:b.key)||null,c(y,x,b,j);case Eo:return x=x.get(b.key===null?_:b.key)||null,u(y,x,b,j);case gs:var P=b._init;return p(x,y,_,P(b._payload),j)}if(el(b)||zi(b))return x=x.get(_)||null,d(y,x,b,j,null);Hc(y,b)}return null}function v(x,y,_,b){for(var j=null,P=null,S=y,k=y=0,C=null;S!==null&&k<_.length;k++){S.index>k?(C=S,S=null):C=S.sibling;var E=m(x,S,_[k],b);if(E===null){S===null&&(S=C);break}t&&S&&E.alternate===null&&e(x,S),y=a(E,y,k),P===null?j=E:P.sibling=E,P=E,S=C}if(k===_.length)return r(x,S),ot&&xa(x,k),j;if(S===null){for(;k<_.length;k++)S=h(x,_[k],b),S!==null&&(y=a(S,y,k),P===null?j=S:P.sibling=S,P=S);return ot&&xa(x,k),j}for(S=n(x,S);k<_.length;k++)C=p(S,x,k,_[k],b),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?k:C.key),y=a(C,y,k),P===null?j=C:P.sibling=C,P=C);return t&&S.forEach(function(M){return e(x,M)}),ot&&xa(x,k),j}function g(x,y,_,b){var j=zi(_);if(typeof j!="function")throw Error(re(150));if(_=j.call(_),_==null)throw Error(re(151));for(var P=j=null,S=y,k=y=0,C=null,E=_.next();S!==null&&!E.done;k++,E=_.next()){S.index>k?(C=S,S=null):C=S.sibling;var M=m(x,S,E.value,b);if(M===null){S===null&&(S=C);break}t&&S&&M.alternate===null&&e(x,S),y=a(M,y,k),P===null?j=M:P.sibling=M,P=M,S=C}if(E.done)return r(x,S),ot&&xa(x,k),j;if(S===null){for(;!E.done;k++,E=_.next())E=h(x,E.value,b),E!==null&&(y=a(E,y,k),P===null?j=E:P.sibling=E,P=E);return ot&&xa(x,k),j}for(S=n(x,S);!E.done;k++,E=_.next())E=p(S,x,k,E.value,b),E!==null&&(t&&E.alternate!==null&&S.delete(E.key===null?k:E.key),y=a(E,y,k),P===null?j=E:P.sibling=E,P=E);return t&&S.forEach(function(R){return e(x,R)}),ot&&xa(x,k),j}function w(x,y,_,b){if(typeof _=="object"&&_!==null&&_.type===Po&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Ac:e:{for(var j=_.key,P=y;P!==null;){if(P.key===j){if(j=_.type,j===Po){if(P.tag===7){r(x,P.sibling),y=s(P,_.props.children),y.return=x,x=y;break e}}else if(P.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===gs&&Ay(j)===P.type){r(x,P.sibling),y=s(P,_.props),y.ref=Ki(x,P,_),y.return=x,x=y;break e}r(x,P);break}else e(x,P);P=P.sibling}_.type===Po?(y=Ua(_.props.children,x.mode,b,_.key),y.return=x,x=y):(b=Su(_.type,_.key,_.props,null,x.mode,b),b.ref=Ki(x,y,_),b.return=x,x=b)}return i(x);case Eo:e:{for(P=_.key;y!==null;){if(y.key===P)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){r(x,y.sibling),y=s(y,_.children||[]),y.return=x,x=y;break e}else{r(x,y);break}else e(x,y);y=y.sibling}y=Xh(_,x.mode,b),y.return=x,x=y}return i(x);case gs:return P=_._init,w(x,y,P(_._payload),b)}if(el(_))return v(x,y,_,b);if(zi(_))return g(x,y,_,b);Hc(x,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,y!==null&&y.tag===6?(r(x,y.sibling),y=s(y,_),y.return=x,x=y):(r(x,y),y=Jh(_,x.mode,b),y.return=x,x=y),i(x)):r(x,y)}return w}var gi=M_(!0),I_=M_(!1),Wu=ta(null),Vu=null,Lo=null,Kp=null;function Gp(){Kp=Lo=Vu=null}function Yp(t){var e=Wu.current;at(Wu),t._currentValue=e}function lm(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function qo(t,e){Vu=t,Kp=Lo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(hr=!0),t.firstContext=null)}function Br(t){var e=t._currentValue;if(Kp!==t)if(t={context:t,memoizedValue:e,next:null},Lo===null){if(Vu===null)throw Error(re(308));Lo=t,Vu.dependencies={lanes:0,firstContext:t}}else Lo=Lo.next=t;return e}var Ca=null;function Qp(t){Ca===null?Ca=[t]:Ca.push(t)}function L_(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Qp(e)):(r.next=s.next,s.next=r),e.interleaved=r,es(t,n)}function es(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var vs=!1;function Jp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function F_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fs(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ve&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,es(t,r)}return s=n.interleaved,s===null?(e.next=e,Qp(n)):(e.next=s.next,s.next=e),n.interleaved=e,es(t,r)}function yu(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Ip(t,r)}}function My(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=i:a=a.next=i,r=r.next}while(r!==null);a===null?s=a=e:a=a.next=e}else s=a=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Hu(t,e,r,n){var s=t.updateQueue;vs=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?a=u:i.next=u,i=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var h=s.baseState;i=0,d=u=c=null,l=a;do{var m=l.lane,p=l.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,g=l;switch(m=e,p=r,g.tag){case 1:if(v=g.payload,typeof v=="function"){h=v.call(p,h,m);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=g.payload,m=typeof v=="function"?v.call(p,h,m):v,m==null)break e;h=ft({},h,m);break e;case 2:vs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,i|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);Ka|=i,t.lanes=i,t.memoizedState=h}}function Iy(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(re(191,s));s.call(n)}}}var ic={},Pn=ta(ic),Dl=ta(ic),Al=ta(ic);function Ea(t){if(t===ic)throw Error(re(174));return t}function Xp(t,e){switch(et(Al,e),et(Dl,t),et(Pn,ic),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zf(e,t)}at(Pn),et(Pn,e)}function vi(){at(Pn),at(Dl),at(Al)}function $_(t){Ea(Al.current);var e=Ea(Pn.current),r=zf(e,t.type);e!==r&&(et(Dl,t),et(Pn,r))}function Zp(t){Dl.current===t&&(at(Pn),at(Dl))}var ct=ta(0);function qu(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hh=[];function eg(){for(var t=0;t<Hh.length;t++)Hh[t]._workInProgressVersionPrimary=null;Hh.length=0}var xu=ss.ReactCurrentDispatcher,qh=ss.ReactCurrentBatchConfig,qa=0,ht=null,kt=null,Ot=null,Ku=!1,hl=!1,Ml=0,d2=0;function zt(){throw Error(re(321))}function tg(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ln(t[r],e[r]))return!1;return!0}function rg(t,e,r,n,s,a){if(qa=a,ht=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xu.current=t===null||t.memoizedState===null?p2:g2,t=r(n,s),hl){a=0;do{if(hl=!1,Ml=0,25<=a)throw Error(re(301));a+=1,Ot=kt=null,e.updateQueue=null,xu.current=v2,t=r(n,s)}while(hl)}if(xu.current=Gu,e=kt!==null&&kt.next!==null,qa=0,Ot=kt=ht=null,Ku=!1,e)throw Error(re(300));return t}function ng(){var t=Ml!==0;return Ml=0,t}function gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?ht.memoizedState=Ot=t:Ot=Ot.next=t,Ot}function zr(){if(kt===null){var t=ht.alternate;t=t!==null?t.memoizedState:null}else t=kt.next;var e=Ot===null?ht.memoizedState:Ot.next;if(e!==null)Ot=e,kt=t;else{if(t===null)throw Error(re(310));kt=t,t={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Ot===null?ht.memoizedState=Ot=t:Ot=Ot.next=t}return Ot}function Il(t,e){return typeof e=="function"?e(t):e}function Kh(t){var e=zr(),r=e.queue;if(r===null)throw Error(re(311));r.lastRenderedReducer=t;var n=kt,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var i=s.next;s.next=a.next,a.next=i}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var l=i=null,c=null,u=a;do{var d=u.lane;if((qa&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,i=n):c=c.next=h,ht.lanes|=d,Ka|=d}u=u.next}while(u!==null&&u!==a);c===null?i=n:c.next=l,ln(n,e.memoizedState)||(hr=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do a=s.lane,ht.lanes|=a,Ka|=a,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Gh(t){var e=zr(),r=e.queue;if(r===null)throw Error(re(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,a=e.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do a=t(a,i.action),i=i.next;while(i!==s);ln(a,e.memoizedState)||(hr=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function U_(){}function B_(t,e){var r=ht,n=zr(),s=e(),a=!ln(n.memoizedState,s);if(a&&(n.memoizedState=s,hr=!0),n=n.queue,sg(V_.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||Ot!==null&&Ot.memoizedState.tag&1){if(r.flags|=2048,Ll(9,W_.bind(null,r,n,s,e),void 0,null),Mt===null)throw Error(re(349));qa&30||z_(r,e,s)}return s}function z_(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function W_(t,e,r,n){e.value=r,e.getSnapshot=n,H_(e)&&q_(t)}function V_(t,e,r){return r(function(){H_(e)&&q_(t)})}function H_(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ln(t,r)}catch{return!0}}function q_(t){var e=es(t,1);e!==null&&nn(e,t,1,-1)}function Ly(t){var e=gn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:t},e.queue=t,t=t.dispatch=m2.bind(null,ht,t),[e.memoizedState,t]}function Ll(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function K_(){return zr().memoizedState}function wu(t,e,r,n){var s=gn();ht.flags|=t,s.memoizedState=Ll(1|e,r,void 0,n===void 0?null:n)}function Md(t,e,r,n){var s=zr();n=n===void 0?null:n;var a=void 0;if(kt!==null){var i=kt.memoizedState;if(a=i.destroy,n!==null&&tg(n,i.deps)){s.memoizedState=Ll(e,r,a,n);return}}ht.flags|=t,s.memoizedState=Ll(1|e,r,a,n)}function Fy(t,e){return wu(8390656,8,t,e)}function sg(t,e){return Md(2048,8,t,e)}function G_(t,e){return Md(4,2,t,e)}function Y_(t,e){return Md(4,4,t,e)}function Q_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function J_(t,e,r){return r=r!=null?r.concat([t]):null,Md(4,4,Q_.bind(null,e,t),r)}function ag(){}function X_(t,e){var r=zr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&tg(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Z_(t,e){var r=zr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&tg(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function eb(t,e,r){return qa&21?(ln(r,e)||(r=a_(),ht.lanes|=r,Ka|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,hr=!0),t.memoizedState=r)}function h2(t,e){var r=Ye;Ye=r!==0&&4>r?r:4,t(!0);var n=qh.transition;qh.transition={};try{t(!1),e()}finally{Ye=r,qh.transition=n}}function tb(){return zr().memoizedState}function f2(t,e,r){var n=Us(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},rb(t))nb(e,r);else if(r=L_(t,e,r,n),r!==null){var s=tr();nn(r,t,n,s),sb(r,e,n)}}function m2(t,e,r){var n=Us(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(rb(t))nb(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var i=e.lastRenderedState,l=a(i,r);if(s.hasEagerState=!0,s.eagerState=l,ln(l,i)){var c=e.interleaved;c===null?(s.next=s,Qp(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=L_(t,e,s,n),r!==null&&(s=tr(),nn(r,t,n,s),sb(r,e,n))}}function rb(t){var e=t.alternate;return t===ht||e!==null&&e===ht}function nb(t,e){hl=Ku=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function sb(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Ip(t,r)}}var Gu={readContext:Br,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},p2={readContext:Br,useCallback:function(t,e){return gn().memoizedState=[t,e===void 0?null:e],t},useContext:Br,useEffect:Fy,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,wu(4194308,4,Q_.bind(null,e,t),r)},useLayoutEffect:function(t,e){return wu(4194308,4,t,e)},useInsertionEffect:function(t,e){return wu(4,2,t,e)},useMemo:function(t,e){var r=gn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=gn();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=f2.bind(null,ht,t),[n.memoizedState,t]},useRef:function(t){var e=gn();return t={current:t},e.memoizedState=t},useState:Ly,useDebugValue:ag,useDeferredValue:function(t){return gn().memoizedState=t},useTransition:function(){var t=Ly(!1),e=t[0];return t=h2.bind(null,t[1]),gn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ht,s=gn();if(ot){if(r===void 0)throw Error(re(407));r=r()}else{if(r=e(),Mt===null)throw Error(re(349));qa&30||z_(n,e,r)}s.memoizedState=r;var a={value:r,getSnapshot:e};return s.queue=a,Fy(V_.bind(null,n,a,t),[t]),n.flags|=2048,Ll(9,W_.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=gn(),e=Mt.identifierPrefix;if(ot){var r=Gn,n=Kn;r=(n&~(1<<32-rn(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ml++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=d2++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},g2={readContext:Br,useCallback:X_,useContext:Br,useEffect:sg,useImperativeHandle:J_,useInsertionEffect:G_,useLayoutEffect:Y_,useMemo:Z_,useReducer:Kh,useRef:K_,useState:function(){return Kh(Il)},useDebugValue:ag,useDeferredValue:function(t){var e=zr();return eb(e,kt.memoizedState,t)},useTransition:function(){var t=Kh(Il)[0],e=zr().memoizedState;return[t,e]},useMutableSource:U_,useSyncExternalStore:B_,useId:tb,unstable_isNewReconciler:!1},v2={readContext:Br,useCallback:X_,useContext:Br,useEffect:sg,useImperativeHandle:J_,useInsertionEffect:G_,useLayoutEffect:Y_,useMemo:Z_,useReducer:Gh,useRef:K_,useState:function(){return Gh(Il)},useDebugValue:ag,useDeferredValue:function(t){var e=zr();return kt===null?e.memoizedState=t:eb(e,kt.memoizedState,t)},useTransition:function(){var t=Gh(Il)[0],e=zr().memoizedState;return[t,e]},useMutableSource:U_,useSyncExternalStore:B_,useId:tb,unstable_isNewReconciler:!1};function Yr(t,e){if(t&&t.defaultProps){e=ft({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function cm(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ft({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Id={isMounted:function(t){return(t=t._reactInternals)?so(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=tr(),s=Us(t),a=Yn(n,s);a.payload=e,r!=null&&(a.callback=r),e=Fs(t,a,s),e!==null&&(nn(e,t,s,n),yu(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=tr(),s=Us(t),a=Yn(n,s);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=Fs(t,a,s),e!==null&&(nn(e,t,s,n),yu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=tr(),n=Us(t),s=Yn(r,n);s.tag=2,e!=null&&(s.callback=e),e=Fs(t,s,n),e!==null&&(nn(e,t,n,r),yu(e,t,n))}};function $y(t,e,r,n,s,a,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,i):e.prototype&&e.prototype.isPureReactComponent?!Pl(r,n)||!Pl(s,a):!0}function ab(t,e,r){var n=!1,s=Ks,a=e.contextType;return typeof a=="object"&&a!==null?a=Br(a):(s=pr(e)?Va:Gt.current,n=e.contextTypes,a=(n=n!=null)?mi(t,s):Ks),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Id,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function Uy(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Id.enqueueReplaceState(e,e.state,null)}function um(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Jp(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=Br(a):(a=pr(e)?Va:Gt.current,s.context=mi(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(cm(t,e,a,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Id.enqueueReplaceState(s,s.state,null),Hu(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function yi(t,e){try{var r="",n=e;do r+=HE(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function Yh(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function dm(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var y2=typeof WeakMap=="function"?WeakMap:Map;function ob(t,e,r){r=Yn(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Qu||(Qu=!0,_m=n),dm(t,e)},r}function ib(t,e,r){r=Yn(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){dm(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){dm(t,e),typeof n!="function"&&($s===null?$s=new Set([this]):$s.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function By(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new y2;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=O2.bind(null,t,e,r),e.then(t,t))}function zy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Wy(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Yn(-1,1),e.tag=2,Fs(r,e,1))),r.lanes|=1),t)}var x2=ss.ReactCurrentOwner,hr=!1;function Xt(t,e,r,n){e.child=t===null?I_(e,null,r,n):gi(e,t.child,r,n)}function Vy(t,e,r,n,s){r=r.render;var a=e.ref;return qo(e,s),n=rg(t,e,r,n,a,s),r=ng(),t!==null&&!hr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ts(t,e,s)):(ot&&r&&Vp(e),e.flags|=1,Xt(t,e,n,s),e.child)}function Hy(t,e,r,n,s){if(t===null){var a=r.type;return typeof a=="function"&&!fg(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,lb(t,e,a,n,s)):(t=Su(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var i=a.memoizedProps;if(r=r.compare,r=r!==null?r:Pl,r(i,n)&&t.ref===e.ref)return ts(t,e,s)}return e.flags|=1,t=Bs(a,n),t.ref=e.ref,t.return=e,e.child=t}function lb(t,e,r,n,s){if(t!==null){var a=t.memoizedProps;if(Pl(a,n)&&t.ref===e.ref)if(hr=!1,e.pendingProps=n=a,(t.lanes&s)!==0)t.flags&131072&&(hr=!0);else return e.lanes=t.lanes,ts(t,e,s)}return hm(t,e,r,n,s)}function cb(t,e,r){var n=e.pendingProps,s=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},et($o,xr),xr|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,et($o,xr),xr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,et($o,xr),xr|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,et($o,xr),xr|=n;return Xt(t,e,s,r),e.child}function ub(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function hm(t,e,r,n,s){var a=pr(r)?Va:Gt.current;return a=mi(e,a),qo(e,s),r=rg(t,e,r,n,a,s),n=ng(),t!==null&&!hr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ts(t,e,s)):(ot&&n&&Vp(e),e.flags|=1,Xt(t,e,r,s),e.child)}function qy(t,e,r,n,s){if(pr(r)){var a=!0;Uu(e)}else a=!1;if(qo(e,s),e.stateNode===null)_u(t,e),ab(e,r,n),um(e,r,n,s),n=!0;else if(t===null){var i=e.stateNode,l=e.memoizedProps;i.props=l;var c=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=Br(u):(u=pr(r)?Va:Gt.current,u=mi(e,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Uy(e,i,n,u),vs=!1;var m=e.memoizedState;i.state=m,Hu(e,n,i,s),c=e.memoizedState,l!==n||m!==c||mr.current||vs?(typeof d=="function"&&(cm(e,r,d,n),c=e.memoizedState),(l=vs||$y(e,r,l,n,m,c,u))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),i.props=n,i.state=c,i.context=u,n=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,F_(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Yr(e.type,l),i.props=u,h=e.pendingProps,m=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=Br(c):(c=pr(r)?Va:Gt.current,c=mi(e,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==h||m!==c)&&Uy(e,i,n,c),vs=!1,m=e.memoizedState,i.state=m,Hu(e,n,i,s);var v=e.memoizedState;l!==h||m!==v||mr.current||vs?(typeof p=="function"&&(cm(e,r,p,n),v=e.memoizedState),(u=vs||$y(e,r,u,n,m,v,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,v,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,v,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),i.props=n,i.state=v,i.context=c,n=u):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return fm(t,e,r,n,a,s)}function fm(t,e,r,n,s,a){ub(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return s&&Ry(e,r,!1),ts(t,e,a);n=e.stateNode,x2.current=e;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=gi(e,t.child,null,a),e.child=gi(e,null,l,a)):Xt(t,e,l,a),e.memoizedState=n.state,s&&Ry(e,r,!0),e.child}function db(t){var e=t.stateNode;e.pendingContext?Ty(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ty(t,e.context,!1),Xp(t,e.containerInfo)}function Ky(t,e,r,n,s){return pi(),qp(s),e.flags|=256,Xt(t,e,r,n),e.child}var mm={dehydrated:null,treeContext:null,retryLane:0};function pm(t){return{baseLanes:t,cachePool:null,transitions:null}}function hb(t,e,r){var n=e.pendingProps,s=ct.current,a=!1,i=(e.flags&128)!==0,l;if((l=i)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),et(ct,s&1),t===null)return im(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,a?(n=e.mode,a=e.child,i={mode:"hidden",children:i},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=$d(i,n,0,null),t=Ua(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=pm(r),e.memoizedState=mm,t):og(e,i));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return w2(t,e,i,n,l,s,r);if(a){a=n.fallback,i=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Bs(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Bs(l,a):(a=Ua(a,i,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,i=t.child.memoizedState,i=i===null?pm(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=t.childLanes&~r,e.memoizedState=mm,n}return a=t.child,t=a.sibling,n=Bs(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function og(t,e){return e=$d({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qc(t,e,r,n){return n!==null&&qp(n),gi(e,t.child,null,r),t=og(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function w2(t,e,r,n,s,a,i){if(r)return e.flags&256?(e.flags&=-257,n=Yh(Error(re(422))),qc(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,s=e.mode,n=$d({mode:"visible",children:n.children},s,0,null),a=Ua(a,s,i,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&gi(e,t.child,null,i),e.child.memoizedState=pm(i),e.memoizedState=mm,a);if(!(e.mode&1))return qc(t,e,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(re(419)),n=Yh(a,n,void 0),qc(t,e,i,n)}if(l=(i&t.childLanes)!==0,hr||l){if(n=Mt,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,es(t,s),nn(n,t,s,-1))}return hg(),n=Yh(Error(re(421))),qc(t,e,i,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=D2.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,jr=Ls(s.nextSibling),Sr=e,ot=!0,tn=null,t!==null&&(Dr[Ar++]=Kn,Dr[Ar++]=Gn,Dr[Ar++]=Ha,Kn=t.id,Gn=t.overflow,Ha=e),e=og(e,n.children),e.flags|=4096,e)}function Gy(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),lm(t.return,e,r)}function Qh(t,e,r,n,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function fb(t,e,r){var n=e.pendingProps,s=n.revealOrder,a=n.tail;if(Xt(t,e,n.children,r),n=ct.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Gy(t,r,e);else if(t.tag===19)Gy(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(et(ct,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&qu(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Qh(e,!1,s,r,a);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&qu(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Qh(e,!0,r,null,a);break;case"together":Qh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _u(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ts(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ka|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(re(153));if(e.child!==null){for(t=e.child,r=Bs(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Bs(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function _2(t,e,r){switch(e.tag){case 3:db(e),pi();break;case 5:$_(e);break;case 1:pr(e.type)&&Uu(e);break;case 4:Xp(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;et(Wu,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(et(ct,ct.current&1),e.flags|=128,null):r&e.child.childLanes?hb(t,e,r):(et(ct,ct.current&1),t=ts(t,e,r),t!==null?t.sibling:null);et(ct,ct.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return fb(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),et(ct,ct.current),n)break;return null;case 22:case 23:return e.lanes=0,cb(t,e,r)}return ts(t,e,r)}var mb,gm,pb,gb;mb=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};gm=function(){};pb=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Ea(Pn.current);var a=null;switch(r){case"input":s=Ff(t,s),n=Ff(t,n),a=[];break;case"select":s=ft({},s,{value:void 0}),n=ft({},n,{value:void 0}),a=[];break;case"textarea":s=Bf(t,s),n=Bf(t,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Fu)}Wf(r,n);var i;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(bl.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(bl.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&st("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};gb=function(t,e,r,n){r!==n&&(e.flags|=4)};function Gi(t,e){if(!ot)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function b2(t,e,r){var n=e.pendingProps;switch(Hp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(e),null;case 1:return pr(e.type)&&$u(),Wt(e),null;case 3:return n=e.stateNode,vi(),at(mr),at(Gt),eg(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Vc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tn!==null&&(Sm(tn),tn=null))),gm(t,e),Wt(e),null;case 5:Zp(e);var s=Ea(Al.current);if(r=e.type,t!==null&&e.stateNode!=null)pb(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(re(166));return Wt(e),null}if(t=Ea(Pn.current),Vc(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[_n]=e,n[Ol]=a,t=(e.mode&1)!==0,r){case"dialog":st("cancel",n),st("close",n);break;case"iframe":case"object":case"embed":st("load",n);break;case"video":case"audio":for(s=0;s<rl.length;s++)st(rl[s],n);break;case"source":st("error",n);break;case"img":case"image":case"link":st("error",n),st("load",n);break;case"details":st("toggle",n);break;case"input":ny(n,a),st("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},st("invalid",n);break;case"textarea":ay(n,a),st("invalid",n)}Wf(r,a),s=null;for(var i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&Wc(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Wc(n.textContent,l,t),s=["children",""+l]):bl.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&st("scroll",n)}switch(r){case"input":Mc(n),sy(n,a,!0);break;case"textarea":Mc(n),oy(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Fu)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=V0(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[_n]=e,t[Ol]=n,mb(t,e,!1,!1),e.stateNode=t;e:{switch(i=Vf(r,n),r){case"dialog":st("cancel",t),st("close",t),s=n;break;case"iframe":case"object":case"embed":st("load",t),s=n;break;case"video":case"audio":for(s=0;s<rl.length;s++)st(rl[s],t);s=n;break;case"source":st("error",t),s=n;break;case"img":case"image":case"link":st("error",t),st("load",t),s=n;break;case"details":st("toggle",t),s=n;break;case"input":ny(t,n),s=Ff(t,n),st("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=ft({},n,{value:void 0}),st("invalid",t);break;case"textarea":ay(t,n),s=Bf(t,n),st("invalid",t);break;default:s=n}Wf(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?K0(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&H0(t,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&jl(t,c):typeof c=="number"&&jl(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(bl.hasOwnProperty(a)?c!=null&&a==="onScroll"&&st("scroll",t):c!=null&&Tp(t,a,c,i))}switch(r){case"input":Mc(t),sy(t,n,!1);break;case"textarea":Mc(t),oy(t);break;case"option":n.value!=null&&t.setAttribute("value",""+qs(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?zo(t,!!n.multiple,a,!1):n.defaultValue!=null&&zo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Fu)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wt(e),null;case 6:if(t&&e.stateNode!=null)gb(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(re(166));if(r=Ea(Al.current),Ea(Pn.current),Vc(e)){if(n=e.stateNode,r=e.memoizedProps,n[_n]=e,(a=n.nodeValue!==r)&&(t=Sr,t!==null))switch(t.tag){case 3:Wc(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wc(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[_n]=e,e.stateNode=n}return Wt(e),null;case 13:if(at(ct),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ot&&jr!==null&&e.mode&1&&!(e.flags&128))A_(),pi(),e.flags|=98560,a=!1;else if(a=Vc(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(re(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(re(317));a[_n]=e}else pi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wt(e),a=!1}else tn!==null&&(Sm(tn),tn=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ct.current&1?Ct===0&&(Ct=3):hg())),e.updateQueue!==null&&(e.flags|=4),Wt(e),null);case 4:return vi(),gm(t,e),t===null&&Tl(e.stateNode.containerInfo),Wt(e),null;case 10:return Yp(e.type._context),Wt(e),null;case 17:return pr(e.type)&&$u(),Wt(e),null;case 19:if(at(ct),a=e.memoizedState,a===null)return Wt(e),null;if(n=(e.flags&128)!==0,i=a.rendering,i===null)if(n)Gi(a,!1);else{if(Ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=qu(t),i!==null){for(e.flags|=128,Gi(a,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,t=i.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return et(ct,ct.current&1|2),e.child}t=t.sibling}a.tail!==null&&yt()>xi&&(e.flags|=128,n=!0,Gi(a,!1),e.lanes=4194304)}else{if(!n)if(t=qu(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Gi(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!ot)return Wt(e),null}else 2*yt()-a.renderingStartTime>xi&&r!==1073741824&&(e.flags|=128,n=!0,Gi(a,!1),e.lanes=4194304);a.isBackwards?(i.sibling=e.child,e.child=i):(r=a.last,r!==null?r.sibling=i:e.child=i,a.last=i)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=yt(),e.sibling=null,r=ct.current,et(ct,n?r&1|2:r&1),e):(Wt(e),null);case 22:case 23:return dg(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?xr&1073741824&&(Wt(e),e.subtreeFlags&6&&(e.flags|=8192)):Wt(e),null;case 24:return null;case 25:return null}throw Error(re(156,e.tag))}function j2(t,e){switch(Hp(e),e.tag){case 1:return pr(e.type)&&$u(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return vi(),at(mr),at(Gt),eg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Zp(e),null;case 13:if(at(ct),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(re(340));pi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return at(ct),null;case 4:return vi(),null;case 10:return Yp(e.type._context),null;case 22:case 23:return dg(),null;case 24:return null;default:return null}}var Kc=!1,qt=!1,S2=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Fo(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){pt(t,e,n)}else r.current=null}function vm(t,e,r){try{r()}catch(n){pt(t,e,n)}}var Yy=!1;function N2(t,e){if(em=Mu,t=__(),Wp(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,u=0,d=0,h=t,m=null;t:for(;;){for(var p;h!==r||s!==0&&h.nodeType!==3||(l=i+s),h!==a||n!==0&&h.nodeType!==3||(c=i+n),h.nodeType===3&&(i+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===t)break t;if(m===r&&++u===s&&(l=i),m===a&&++d===n&&(c=i),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(tm={focusedElem:t,selectionRange:r},Mu=!1,ue=e;ue!==null;)if(e=ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ue=t;else for(;ue!==null;){e=ue;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var g=v.memoizedProps,w=v.memoizedState,x=e.stateNode,y=x.getSnapshotBeforeUpdate(e.elementType===e.type?g:Yr(e.type,g),w);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(b){pt(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,ue=t;break}ue=e.return}return v=Yy,Yy=!1,v}function fl(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&vm(e,r,a)}s=s.next}while(s!==n)}}function Ld(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function ym(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function vb(t){var e=t.alternate;e!==null&&(t.alternate=null,vb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_n],delete e[Ol],delete e[sm],delete e[i2],delete e[l2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function yb(t){return t.tag===5||t.tag===3||t.tag===4}function Qy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Fu));else if(n!==4&&(t=t.child,t!==null))for(xm(t,e,r),t=t.sibling;t!==null;)xm(t,e,r),t=t.sibling}function wm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(wm(t,e,r),t=t.sibling;t!==null;)wm(t,e,r),t=t.sibling}var Lt=null,Zr=!1;function ls(t,e,r){for(r=r.child;r!==null;)xb(t,e,r),r=r.sibling}function xb(t,e,r){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(Pd,r)}catch{}switch(r.tag){case 5:qt||Fo(r,e);case 6:var n=Lt,s=Zr;Lt=null,ls(t,e,r),Lt=n,Zr=s,Lt!==null&&(Zr?(t=Lt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Lt.removeChild(r.stateNode));break;case 18:Lt!==null&&(Zr?(t=Lt,r=r.stateNode,t.nodeType===8?Wh(t.parentNode,r):t.nodeType===1&&Wh(t,r),Cl(t)):Wh(Lt,r.stateNode));break;case 4:n=Lt,s=Zr,Lt=r.stateNode.containerInfo,Zr=!0,ls(t,e,r),Lt=n,Zr=s;break;case 0:case 11:case 14:case 15:if(!qt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&vm(r,e,i),s=s.next}while(s!==n)}ls(t,e,r);break;case 1:if(!qt&&(Fo(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){pt(r,e,l)}ls(t,e,r);break;case 21:ls(t,e,r);break;case 22:r.mode&1?(qt=(n=qt)||r.memoizedState!==null,ls(t,e,r),qt=n):ls(t,e,r);break;default:ls(t,e,r)}}function Jy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new S2),e.forEach(function(n){var s=A2.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Hr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=t,i=e,l=i;e:for(;l!==null;){switch(l.tag){case 5:Lt=l.stateNode,Zr=!1;break e;case 3:Lt=l.stateNode.containerInfo,Zr=!0;break e;case 4:Lt=l.stateNode.containerInfo,Zr=!0;break e}l=l.return}if(Lt===null)throw Error(re(160));xb(a,i,s),Lt=null,Zr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){pt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)wb(e,t),e=e.sibling}function wb(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hr(e,t),pn(t),n&4){try{fl(3,t,t.return),Ld(3,t)}catch(g){pt(t,t.return,g)}try{fl(5,t,t.return)}catch(g){pt(t,t.return,g)}}break;case 1:Hr(e,t),pn(t),n&512&&r!==null&&Fo(r,r.return);break;case 5:if(Hr(e,t),pn(t),n&512&&r!==null&&Fo(r,r.return),t.flags&32){var s=t.stateNode;try{jl(s,"")}catch(g){pt(t,t.return,g)}}if(n&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,i=r!==null?r.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&z0(s,a),Vf(l,i);var u=Vf(l,a);for(i=0;i<c.length;i+=2){var d=c[i],h=c[i+1];d==="style"?K0(s,h):d==="dangerouslySetInnerHTML"?H0(s,h):d==="children"?jl(s,h):Tp(s,d,h,u)}switch(l){case"input":$f(s,a);break;case"textarea":W0(s,a);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?zo(s,!!a.multiple,p,!1):m!==!!a.multiple&&(a.defaultValue!=null?zo(s,!!a.multiple,a.defaultValue,!0):zo(s,!!a.multiple,a.multiple?[]:"",!1))}s[Ol]=a}catch(g){pt(t,t.return,g)}}break;case 6:if(Hr(e,t),pn(t),n&4){if(t.stateNode===null)throw Error(re(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(g){pt(t,t.return,g)}}break;case 3:if(Hr(e,t),pn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Cl(e.containerInfo)}catch(g){pt(t,t.return,g)}break;case 4:Hr(e,t),pn(t);break;case 13:Hr(e,t),pn(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(cg=yt())),n&4&&Jy(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(qt=(u=qt)||d,Hr(e,t),qt=u):Hr(e,t),pn(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(ue=t,d=t.child;d!==null;){for(h=ue=d;ue!==null;){switch(m=ue,p=m.child,m.tag){case 0:case 11:case 14:case 15:fl(4,m,m.return);break;case 1:Fo(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(g){pt(n,r,g)}}break;case 5:Fo(m,m.return);break;case 22:if(m.memoizedState!==null){Zy(h);continue}}p!==null?(p.return=m,ue=p):Zy(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=q0("display",i))}catch(g){pt(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){pt(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Hr(e,t),pn(t),n&4&&Jy(t);break;case 21:break;default:Hr(e,t),pn(t)}}function pn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(yb(r)){var n=r;break e}r=r.return}throw Error(re(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(jl(s,""),n.flags&=-33);var a=Qy(t);wm(t,a,s);break;case 3:case 4:var i=n.stateNode.containerInfo,l=Qy(t);xm(t,l,i);break;default:throw Error(re(161))}}catch(c){pt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function k2(t,e,r){ue=t,_b(t)}function _b(t,e,r){for(var n=(t.mode&1)!==0;ue!==null;){var s=ue,a=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||Kc;if(!i){var l=s.alternate,c=l!==null&&l.memoizedState!==null||qt;l=Kc;var u=qt;if(Kc=i,(qt=c)&&!u)for(ue=s;ue!==null;)i=ue,c=i.child,i.tag===22&&i.memoizedState!==null?ex(s):c!==null?(c.return=i,ue=c):ex(s);for(;a!==null;)ue=a,_b(a),a=a.sibling;ue=s,Kc=l,qt=u}Xy(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,ue=a):Xy(t)}}function Xy(t){for(;ue!==null;){var e=ue;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:qt||Ld(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!qt)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Yr(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Iy(e,a,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Iy(e,i,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Cl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}qt||e.flags&512&&ym(e)}catch(m){pt(e,e.return,m)}}if(e===t){ue=null;break}if(r=e.sibling,r!==null){r.return=e.return,ue=r;break}ue=e.return}}function Zy(t){for(;ue!==null;){var e=ue;if(e===t){ue=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ue=r;break}ue=e.return}}function ex(t){for(;ue!==null;){var e=ue;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Ld(4,e)}catch(c){pt(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){pt(e,s,c)}}var a=e.return;try{ym(e)}catch(c){pt(e,a,c)}break;case 5:var i=e.return;try{ym(e)}catch(c){pt(e,i,c)}}}catch(c){pt(e,e.return,c)}if(e===t){ue=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ue=l;break}ue=e.return}}var C2=Math.ceil,Yu=ss.ReactCurrentDispatcher,ig=ss.ReactCurrentOwner,Lr=ss.ReactCurrentBatchConfig,Ve=0,Mt=null,bt=null,$t=0,xr=0,$o=ta(0),Ct=0,Fl=null,Ka=0,Fd=0,lg=0,ml=null,dr=null,cg=0,xi=1/0,zn=null,Qu=!1,_m=null,$s=null,Gc=!1,Ts=null,Ju=0,pl=0,bm=null,bu=-1,ju=0;function tr(){return Ve&6?yt():bu!==-1?bu:bu=yt()}function Us(t){return t.mode&1?Ve&2&&$t!==0?$t&-$t:u2.transition!==null?(ju===0&&(ju=a_()),ju):(t=Ye,t!==0||(t=window.event,t=t===void 0?16:h_(t.type)),t):1}function nn(t,e,r,n){if(50<pl)throw pl=0,bm=null,Error(re(185));sc(t,r,n),(!(Ve&2)||t!==Mt)&&(t===Mt&&(!(Ve&2)&&(Fd|=r),Ct===4&&xs(t,$t)),gr(t,n),r===1&&Ve===0&&!(e.mode&1)&&(xi=yt()+500,Ad&&ra()))}function gr(t,e){var r=t.callbackNode;uP(t,e);var n=Au(t,t===Mt?$t:0);if(n===0)r!==null&&cy(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&cy(r),e===1)t.tag===0?c2(tx.bind(null,t)):R_(tx.bind(null,t)),a2(function(){!(Ve&6)&&ra()}),r=null;else{switch(o_(n)){case 1:r=Mp;break;case 4:r=n_;break;case 16:r=Du;break;case 536870912:r=s_;break;default:r=Du}r=Pb(r,bb.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function bb(t,e){if(bu=-1,ju=0,Ve&6)throw Error(re(327));var r=t.callbackNode;if(Ko()&&t.callbackNode!==r)return null;var n=Au(t,t===Mt?$t:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Xu(t,n);else{e=n;var s=Ve;Ve|=2;var a=Sb();(Mt!==t||$t!==e)&&(zn=null,xi=yt()+500,$a(t,e));do try{T2();break}catch(l){jb(t,l)}while(!0);Gp(),Yu.current=a,Ve=s,bt!==null?e=0:(Mt=null,$t=0,e=Ct)}if(e!==0){if(e===2&&(s=Yf(t),s!==0&&(n=s,e=jm(t,s))),e===1)throw r=Fl,$a(t,0),xs(t,n),gr(t,yt()),r;if(e===6)xs(t,n);else{if(s=t.current.alternate,!(n&30)&&!E2(s)&&(e=Xu(t,n),e===2&&(a=Yf(t),a!==0&&(n=a,e=jm(t,a))),e===1))throw r=Fl,$a(t,0),xs(t,n),gr(t,yt()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(re(345));case 2:wa(t,dr,zn);break;case 3:if(xs(t,n),(n&130023424)===n&&(e=cg+500-yt(),10<e)){if(Au(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){tr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=nm(wa.bind(null,t,dr,zn),e);break}wa(t,dr,zn);break;case 4:if(xs(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var i=31-rn(n);a=1<<i,i=e[i],i>s&&(s=i),n&=~a}if(n=s,n=yt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*C2(n/1960))-n,10<n){t.timeoutHandle=nm(wa.bind(null,t,dr,zn),n);break}wa(t,dr,zn);break;case 5:wa(t,dr,zn);break;default:throw Error(re(329))}}}return gr(t,yt()),t.callbackNode===r?bb.bind(null,t):null}function jm(t,e){var r=ml;return t.current.memoizedState.isDehydrated&&($a(t,e).flags|=256),t=Xu(t,e),t!==2&&(e=dr,dr=r,e!==null&&Sm(e)),t}function Sm(t){dr===null?dr=t:dr.push.apply(dr,t)}function E2(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!ln(a(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xs(t,e){for(e&=~lg,e&=~Fd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-rn(e),n=1<<r;t[r]=-1,e&=~n}}function tx(t){if(Ve&6)throw Error(re(327));Ko();var e=Au(t,0);if(!(e&1))return gr(t,yt()),null;var r=Xu(t,e);if(t.tag!==0&&r===2){var n=Yf(t);n!==0&&(e=n,r=jm(t,n))}if(r===1)throw r=Fl,$a(t,0),xs(t,e),gr(t,yt()),r;if(r===6)throw Error(re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wa(t,dr,zn),gr(t,yt()),null}function ug(t,e){var r=Ve;Ve|=1;try{return t(e)}finally{Ve=r,Ve===0&&(xi=yt()+500,Ad&&ra())}}function Ga(t){Ts!==null&&Ts.tag===0&&!(Ve&6)&&Ko();var e=Ve;Ve|=1;var r=Lr.transition,n=Ye;try{if(Lr.transition=null,Ye=1,t)return t()}finally{Ye=n,Lr.transition=r,Ve=e,!(Ve&6)&&ra()}}function dg(){xr=$o.current,at($o)}function $a(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,s2(r)),bt!==null)for(r=bt.return;r!==null;){var n=r;switch(Hp(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&$u();break;case 3:vi(),at(mr),at(Gt),eg();break;case 5:Zp(n);break;case 4:vi();break;case 13:at(ct);break;case 19:at(ct);break;case 10:Yp(n.type._context);break;case 22:case 23:dg()}r=r.return}if(Mt=t,bt=t=Bs(t.current,null),$t=xr=e,Ct=0,Fl=null,lg=Fd=Ka=0,dr=ml=null,Ca!==null){for(e=0;e<Ca.length;e++)if(r=Ca[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var i=a.next;a.next=s,n.next=i}r.pending=n}Ca=null}return t}function jb(t,e){do{var r=bt;try{if(Gp(),xu.current=Gu,Ku){for(var n=ht.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ku=!1}if(qa=0,Ot=kt=ht=null,hl=!1,Ml=0,ig.current=null,r===null||r.return===null){Ct=1,Fl=e,bt=null;break}e:{var a=t,i=r.return,l=r,c=e;if(e=$t,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=zy(i);if(p!==null){p.flags&=-257,Wy(p,i,l,a,e),p.mode&1&&By(a,u,e),e=p,c=u;var v=e.updateQueue;if(v===null){var g=new Set;g.add(c),e.updateQueue=g}else v.add(c);break e}else{if(!(e&1)){By(a,u,e),hg();break e}c=Error(re(426))}}else if(ot&&l.mode&1){var w=zy(i);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Wy(w,i,l,a,e),qp(yi(c,l));break e}}a=c=yi(c,l),Ct!==4&&(Ct=2),ml===null?ml=[a]:ml.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var x=ob(a,c,e);My(a,x);break e;case 1:l=c;var y=a.type,_=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&($s===null||!$s.has(_)))){a.flags|=65536,e&=-e,a.lanes|=e;var b=ib(a,l,e);My(a,b);break e}}a=a.return}while(a!==null)}kb(r)}catch(j){e=j,bt===r&&r!==null&&(bt=r=r.return);continue}break}while(!0)}function Sb(){var t=Yu.current;return Yu.current=Gu,t===null?Gu:t}function hg(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),Mt===null||!(Ka&268435455)&&!(Fd&268435455)||xs(Mt,$t)}function Xu(t,e){var r=Ve;Ve|=2;var n=Sb();(Mt!==t||$t!==e)&&(zn=null,$a(t,e));do try{P2();break}catch(s){jb(t,s)}while(!0);if(Gp(),Ve=r,Yu.current=n,bt!==null)throw Error(re(261));return Mt=null,$t=0,Ct}function P2(){for(;bt!==null;)Nb(bt)}function T2(){for(;bt!==null&&!tP();)Nb(bt)}function Nb(t){var e=Eb(t.alternate,t,xr);t.memoizedProps=t.pendingProps,e===null?kb(t):bt=e,ig.current=null}function kb(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=j2(r,e),r!==null){r.flags&=32767,bt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ct=6,bt=null;return}}else if(r=b2(r,e,xr),r!==null){bt=r;return}if(e=e.sibling,e!==null){bt=e;return}bt=e=t}while(e!==null);Ct===0&&(Ct=5)}function wa(t,e,r){var n=Ye,s=Lr.transition;try{Lr.transition=null,Ye=1,R2(t,e,r,n)}finally{Lr.transition=s,Ye=n}return null}function R2(t,e,r,n){do Ko();while(Ts!==null);if(Ve&6)throw Error(re(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(re(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(dP(t,a),t===Mt&&(bt=Mt=null,$t=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Gc||(Gc=!0,Pb(Du,function(){return Ko(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Lr.transition,Lr.transition=null;var i=Ye;Ye=1;var l=Ve;Ve|=4,ig.current=null,N2(t,r),wb(r,t),JP(tm),Mu=!!em,tm=em=null,t.current=r,k2(r),rP(),Ve=l,Ye=i,Lr.transition=a}else t.current=r;if(Gc&&(Gc=!1,Ts=t,Ju=s),a=t.pendingLanes,a===0&&($s=null),aP(r.stateNode),gr(t,yt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Qu)throw Qu=!1,t=_m,_m=null,t;return Ju&1&&t.tag!==0&&Ko(),a=t.pendingLanes,a&1?t===bm?pl++:(pl=0,bm=t):pl=0,ra(),null}function Ko(){if(Ts!==null){var t=o_(Ju),e=Lr.transition,r=Ye;try{if(Lr.transition=null,Ye=16>t?16:t,Ts===null)var n=!1;else{if(t=Ts,Ts=null,Ju=0,Ve&6)throw Error(re(331));var s=Ve;for(Ve|=4,ue=t.current;ue!==null;){var a=ue,i=a.child;if(ue.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ue=u;ue!==null;){var d=ue;switch(d.tag){case 0:case 11:case 15:fl(8,d,a)}var h=d.child;if(h!==null)h.return=d,ue=h;else for(;ue!==null;){d=ue;var m=d.sibling,p=d.return;if(vb(d),d===u){ue=null;break}if(m!==null){m.return=p,ue=m;break}ue=p}}}var v=a.alternate;if(v!==null){var g=v.child;if(g!==null){v.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}ue=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,ue=i;else e:for(;ue!==null;){if(a=ue,a.flags&2048)switch(a.tag){case 0:case 11:case 15:fl(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,ue=x;break e}ue=a.return}}var y=t.current;for(ue=y;ue!==null;){i=ue;var _=i.child;if(i.subtreeFlags&2064&&_!==null)_.return=i,ue=_;else e:for(i=y;ue!==null;){if(l=ue,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ld(9,l)}}catch(j){pt(l,l.return,j)}if(l===i){ue=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,ue=b;break e}ue=l.return}}if(Ve=s,ra(),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(Pd,t)}catch{}n=!0}return n}finally{Ye=r,Lr.transition=e}}return!1}function rx(t,e,r){e=yi(r,e),e=ob(t,e,1),t=Fs(t,e,1),e=tr(),t!==null&&(sc(t,1,e),gr(t,e))}function pt(t,e,r){if(t.tag===3)rx(t,t,r);else for(;e!==null;){if(e.tag===3){rx(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&($s===null||!$s.has(n))){t=yi(r,t),t=ib(e,t,1),e=Fs(e,t,1),t=tr(),e!==null&&(sc(e,1,t),gr(e,t));break}}e=e.return}}function O2(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=tr(),t.pingedLanes|=t.suspendedLanes&r,Mt===t&&($t&r)===r&&(Ct===4||Ct===3&&($t&130023424)===$t&&500>yt()-cg?$a(t,0):lg|=r),gr(t,e)}function Cb(t,e){e===0&&(t.mode&1?(e=Fc,Fc<<=1,!(Fc&130023424)&&(Fc=4194304)):e=1);var r=tr();t=es(t,e),t!==null&&(sc(t,e,r),gr(t,r))}function D2(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Cb(t,r)}function A2(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(re(314))}n!==null&&n.delete(e),Cb(t,r)}var Eb;Eb=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||mr.current)hr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return hr=!1,_2(t,e,r);hr=!!(t.flags&131072)}else hr=!1,ot&&e.flags&1048576&&O_(e,zu,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;_u(t,e),t=e.pendingProps;var s=mi(e,Gt.current);qo(e,r),s=rg(null,e,n,t,s,r);var a=ng();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pr(n)?(a=!0,Uu(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Jp(e),s.updater=Id,e.stateNode=s,s._reactInternals=e,um(e,n,t,r),e=fm(null,e,n,!0,a,r)):(e.tag=0,ot&&a&&Vp(e),Xt(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(_u(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=I2(n),t=Yr(n,t),s){case 0:e=hm(null,e,n,t,r);break e;case 1:e=qy(null,e,n,t,r);break e;case 11:e=Vy(null,e,n,t,r);break e;case 14:e=Hy(null,e,n,Yr(n.type,t),r);break e}throw Error(re(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Yr(n,s),hm(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Yr(n,s),qy(t,e,n,s,r);case 3:e:{if(db(e),t===null)throw Error(re(387));n=e.pendingProps,a=e.memoizedState,s=a.element,F_(t,e),Hu(e,n,null,r);var i=e.memoizedState;if(n=i.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=yi(Error(re(423)),e),e=Ky(t,e,n,r,s);break e}else if(n!==s){s=yi(Error(re(424)),e),e=Ky(t,e,n,r,s);break e}else for(jr=Ls(e.stateNode.containerInfo.firstChild),Sr=e,ot=!0,tn=null,r=I_(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(pi(),n===s){e=ts(t,e,r);break e}Xt(t,e,n,r)}e=e.child}return e;case 5:return $_(e),t===null&&im(e),n=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,i=s.children,rm(n,s)?i=null:a!==null&&rm(n,a)&&(e.flags|=32),ub(t,e),Xt(t,e,i,r),e.child;case 6:return t===null&&im(e),null;case 13:return hb(t,e,r);case 4:return Xp(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=gi(e,null,n,r):Xt(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Yr(n,s),Vy(t,e,n,s,r);case 7:return Xt(t,e,e.pendingProps,r),e.child;case 8:return Xt(t,e,e.pendingProps.children,r),e.child;case 12:return Xt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,a=e.memoizedProps,i=s.value,et(Wu,n._currentValue),n._currentValue=i,a!==null)if(ln(a.value,i)){if(a.children===s.children&&!mr.current){e=ts(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){i=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=Yn(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),lm(a.return,r,e),l.lanes|=r;break}c=c.next}}else if(a.tag===10)i=a.type===e.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(re(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),lm(i,r,e),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===e){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}Xt(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,qo(e,r),s=Br(s),n=n(s),e.flags|=1,Xt(t,e,n,r),e.child;case 14:return n=e.type,s=Yr(n,e.pendingProps),s=Yr(n.type,s),Hy(t,e,n,s,r);case 15:return lb(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Yr(n,s),_u(t,e),e.tag=1,pr(n)?(t=!0,Uu(e)):t=!1,qo(e,r),ab(e,n,s),um(e,n,s,r),fm(null,e,n,!0,t,r);case 19:return fb(t,e,r);case 22:return cb(t,e,r)}throw Error(re(156,e.tag))};function Pb(t,e){return r_(t,e)}function M2(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ir(t,e,r,n){return new M2(t,e,r,n)}function fg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function I2(t){if(typeof t=="function")return fg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Op)return 11;if(t===Dp)return 14}return 2}function Bs(t,e){var r=t.alternate;return r===null?(r=Ir(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Su(t,e,r,n,s,a){var i=2;if(n=t,typeof t=="function")fg(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Po:return Ua(r.children,s,a,e);case Rp:i=8,s|=8;break;case Af:return t=Ir(12,r,e,s|2),t.elementType=Af,t.lanes=a,t;case Mf:return t=Ir(13,r,e,s),t.elementType=Mf,t.lanes=a,t;case If:return t=Ir(19,r,e,s),t.elementType=If,t.lanes=a,t;case $0:return $d(r,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case L0:i=10;break e;case F0:i=9;break e;case Op:i=11;break e;case Dp:i=14;break e;case gs:i=16,n=null;break e}throw Error(re(130,t==null?t:typeof t,""))}return e=Ir(i,r,e,s),e.elementType=t,e.type=n,e.lanes=a,e}function Ua(t,e,r,n){return t=Ir(7,t,n,e),t.lanes=r,t}function $d(t,e,r,n){return t=Ir(22,t,n,e),t.elementType=$0,t.lanes=r,t.stateNode={isHidden:!1},t}function Jh(t,e,r){return t=Ir(6,t,null,e),t.lanes=r,t}function Xh(t,e,r){return e=Ir(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function L2(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oh(0),this.expirationTimes=Oh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oh(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function mg(t,e,r,n,s,a,i,l,c){return t=new L2(t,e,r,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Ir(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jp(a),t}function F2(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Eo,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Tb(t){if(!t)return Ks;t=t._reactInternals;e:{if(so(t)!==t||t.tag!==1)throw Error(re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(re(171))}if(t.tag===1){var r=t.type;if(pr(r))return T_(t,r,e)}return e}function Rb(t,e,r,n,s,a,i,l,c){return t=mg(r,n,!0,t,s,a,i,l,c),t.context=Tb(null),r=t.current,n=tr(),s=Us(r),a=Yn(n,s),a.callback=e??null,Fs(r,a,s),t.current.lanes=s,sc(t,s,n),gr(t,n),t}function Ud(t,e,r,n){var s=e.current,a=tr(),i=Us(s);return r=Tb(r),e.context===null?e.context=r:e.pendingContext=r,e=Yn(a,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Fs(s,e,i),t!==null&&(nn(t,s,i,a),yu(t,s,i)),i}function Zu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function nx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function pg(t,e){nx(t,e),(t=t.alternate)&&nx(t,e)}function $2(){return null}var Ob=typeof reportError=="function"?reportError:function(t){console.error(t)};function gg(t){this._internalRoot=t}Bd.prototype.render=gg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(re(409));Ud(t,e,null,null)};Bd.prototype.unmount=gg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ga(function(){Ud(null,t,null,null)}),e[Zn]=null}};function Bd(t){this._internalRoot=t}Bd.prototype.unstable_scheduleHydration=function(t){if(t){var e=c_();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ys.length&&e!==0&&e<ys[r].priority;r++);ys.splice(r,0,t),r===0&&d_(t)}};function vg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sx(){}function U2(t,e,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var u=Zu(i);a.call(u)}}var i=Rb(e,n,t,0,null,!1,!1,"",sx);return t._reactRootContainer=i,t[Zn]=i.current,Tl(t.nodeType===8?t.parentNode:t),Ga(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Zu(c);l.call(u)}}var c=mg(t,0,!1,null,null,!1,!1,"",sx);return t._reactRootContainer=c,t[Zn]=c.current,Tl(t.nodeType===8?t.parentNode:t),Ga(function(){Ud(e,c,r,n)}),c}function Wd(t,e,r,n,s){var a=r._reactRootContainer;if(a){var i=a;if(typeof s=="function"){var l=s;s=function(){var c=Zu(i);l.call(c)}}Ud(e,i,t,s)}else i=U2(r,e,t,s,n);return Zu(i)}i_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=tl(e.pendingLanes);r!==0&&(Ip(e,r|1),gr(e,yt()),!(Ve&6)&&(xi=yt()+500,ra()))}break;case 13:Ga(function(){var n=es(t,1);if(n!==null){var s=tr();nn(n,t,1,s)}}),pg(t,1)}};Lp=function(t){if(t.tag===13){var e=es(t,134217728);if(e!==null){var r=tr();nn(e,t,134217728,r)}pg(t,134217728)}};l_=function(t){if(t.tag===13){var e=Us(t),r=es(t,e);if(r!==null){var n=tr();nn(r,t,e,n)}pg(t,e)}};c_=function(){return Ye};u_=function(t,e){var r=Ye;try{return Ye=t,e()}finally{Ye=r}};qf=function(t,e,r){switch(e){case"input":if($f(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Dd(n);if(!s)throw Error(re(90));B0(n),$f(n,s)}}}break;case"textarea":W0(t,r);break;case"select":e=r.value,e!=null&&zo(t,!!r.multiple,e,!1)}};Q0=ug;J0=Ga;var B2={usingClientEntryPoint:!1,Events:[oc,Do,Dd,G0,Y0,ug]},Yi={findFiberByHostInstance:ka,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},z2={bundleType:Yi.bundleType,version:Yi.version,rendererPackageName:Yi.rendererPackageName,rendererConfig:Yi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ss.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=e_(t),t===null?null:t.stateNode},findFiberByHostInstance:Yi.findFiberByHostInstance||$2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yc.isDisabled&&Yc.supportsFiber)try{Pd=Yc.inject(z2),En=Yc}catch{}}Pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B2;Pr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vg(e))throw Error(re(200));return F2(t,e,null,r)};Pr.createRoot=function(t,e){if(!vg(t))throw Error(re(299));var r=!1,n="",s=Ob;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=mg(t,1,!1,null,null,r,!1,n,s),t[Zn]=e.current,Tl(t.nodeType===8?t.parentNode:t),new gg(e)};Pr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(re(188)):(t=Object.keys(t).join(","),Error(re(268,t)));return t=e_(e),t=t===null?null:t.stateNode,t};Pr.flushSync=function(t){return Ga(t)};Pr.hydrate=function(t,e,r){if(!zd(e))throw Error(re(200));return Wd(null,t,e,!0,r)};Pr.hydrateRoot=function(t,e,r){if(!vg(t))throw Error(re(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",i=Ob;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=Rb(e,null,t,1,r??null,s,!1,a,i),t[Zn]=e.current,Tl(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Bd(e)};Pr.render=function(t,e,r){if(!zd(e))throw Error(re(200));return Wd(null,t,e,!1,r)};Pr.unmountComponentAtNode=function(t){if(!zd(t))throw Error(re(40));return t._reactRootContainer?(Ga(function(){Wd(null,null,t,!1,function(){t._reactRootContainer=null,t[Zn]=null})}),!0):!1};Pr.unstable_batchedUpdates=ug;Pr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!zd(r))throw Error(re(200));if(t==null||t._reactInternals===void 0)throw Error(re(38));return Wd(t,e,r,!1,n)};Pr.version="18.3.1-next-f1338f8080-20240426";function Db(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Db)}catch(t){console.error(t)}}Db(),D0.exports=Pr;var Oi=D0.exports;const W2=w0(Oi);var Ab,ax=Oi;Ab=ax.createRoot,ax.hydrateRoot;var lc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ya=typeof window>"u"||"Deno"in globalThis;function ur(){}function V2(t,e){return typeof t=="function"?t(e):t}function Nm(t){return typeof t=="number"&&t>=0&&t!==1/0}function Mb(t,e){return Math.max(t+(e||0)-Date.now(),0)}function zs(t,e){return typeof t=="function"?t(e):t}function Or(t,e){return typeof t=="function"?t(e):t}function ox(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:a,queryKey:i,stale:l}=t;if(i){if(n){if(e.queryHash!==yg(i,e.options))return!1}else if(!Ul(e.queryKey,i))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||a&&!a(e))}function ix(t,e){const{exact:r,status:n,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(r){if($l(e.options.mutationKey)!==$l(a))return!1}else if(!Ul(e.options.mutationKey,a))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function yg(t,e){return((e==null?void 0:e.queryKeyHashFn)||$l)(t)}function $l(t){return JSON.stringify(t,(e,r)=>Cm(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Ul(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>Ul(t[r],e[r])):!1}function Ib(t,e){if(t===e)return t;const r=lx(t)&&lx(e);if(r||Cm(t)&&Cm(e)){const n=r?t:Object.keys(t),s=n.length,a=r?e:Object.keys(e),i=a.length,l=r?[]:{},c=new Set(n);let u=0;for(let d=0;d<i;d++){const h=r?d:a[d];(!r&&c.has(h)||r)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,u++):(l[h]=Ib(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&u++)}return s===i&&u===s?t:l}return e}function km(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function lx(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Cm(t){if(!cx(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!cx(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function cx(t){return Object.prototype.toString.call(t)==="[object Object]"}function H2(t){return new Promise(e=>{setTimeout(e,t)})}function Em(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?Ib(t,e):e}function q2(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function K2(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var xg=Symbol();function Lb(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===xg?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function G2(t,e){return typeof t=="function"?t(...e):!!t}var Ta,_s,ti,u0,Y2=(u0=class extends lc{constructor(){super();je(this,Ta);je(this,_s);je(this,ti);de(this,ti,e=>{if(!Ya&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){D(this,_s)||this.setEventListener(D(this,ti))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,_s))==null||e.call(this),de(this,_s,void 0))}setEventListener(e){var r;de(this,ti,e),(r=D(this,_s))==null||r.call(this),de(this,_s,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){D(this,Ta)!==e&&(de(this,Ta,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof D(this,Ta)=="boolean"?D(this,Ta):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ta=new WeakMap,_s=new WeakMap,ti=new WeakMap,u0),wg=new Y2,ri,bs,ni,d0,Q2=(d0=class extends lc{constructor(){super();je(this,ri,!0);je(this,bs);je(this,ni);de(this,ni,e=>{if(!Ya&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){D(this,bs)||this.setEventListener(D(this,ni))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,bs))==null||e.call(this),de(this,bs,void 0))}setEventListener(e){var r;de(this,ni,e),(r=D(this,bs))==null||r.call(this),de(this,bs,e(this.setOnline.bind(this)))}setOnline(e){D(this,ri)!==e&&(de(this,ri,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return D(this,ri)}},ri=new WeakMap,bs=new WeakMap,ni=new WeakMap,d0),ed=new Q2;function Pm(){let t,e;const r=new Promise((s,a)=>{t=s,e=a});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),t(s)},r.reject=s=>{n({status:"rejected",reason:s}),e(s)},r}function J2(t){return Math.min(1e3*2**t,3e4)}function Fb(t){return(t??"online")==="online"?ed.isOnline():!0}var $b=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Zh(t){return t instanceof $b}function Ub(t){let e=!1,r=0,n=!1,s;const a=Pm(),i=g=>{var w;n||(m(new $b(g)),(w=t.abort)==null||w.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>wg.isFocused()&&(t.networkMode==="always"||ed.isOnline())&&t.canRun(),d=()=>Fb(t.networkMode)&&t.canRun(),h=g=>{var w;n||(n=!0,(w=t.onSuccess)==null||w.call(t,g),s==null||s(),a.resolve(g))},m=g=>{var w;n||(n=!0,(w=t.onError)==null||w.call(t,g),s==null||s(),a.reject(g))},p=()=>new Promise(g=>{var w;s=x=>{(n||u())&&g(x)},(w=t.onPause)==null||w.call(t)}).then(()=>{var g;s=void 0,n||(g=t.onContinue)==null||g.call(t)}),v=()=>{if(n)return;let g;const w=r===0?t.initialPromise:void 0;try{g=w??t.fn()}catch(x){g=Promise.reject(x)}Promise.resolve(g).then(h).catch(x=>{var P;if(n)return;const y=t.retry??(Ya?0:3),_=t.retryDelay??J2,b=typeof _=="function"?_(r,x):_,j=y===!0||typeof y=="number"&&r<y||typeof y=="function"&&y(r,x);if(e||!j){m(x);return}r++,(P=t.onFail)==null||P.call(t,r,x),H2(b).then(()=>u()?void 0:p()).then(()=>{e?m(x):v()})})};return{promise:a,cancel:i,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?v():p().then(v),a)}}var X2=t=>setTimeout(t,0);function Z2(){let t=[],e=0,r=l=>{l()},n=l=>{l()},s=X2;const a=l=>{e?t.push(l):s(()=>{r(l)})},i=()=>{const l=t;t=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||i()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var Ft=Z2(),Ra,h0,Bb=(h0=class{constructor(){je(this,Ra)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Nm(this.gcTime)&&de(this,Ra,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ya?1/0:5*60*1e3))}clearGcTimeout(){D(this,Ra)&&(clearTimeout(D(this,Ra)),de(this,Ra,void 0))}},Ra=new WeakMap,h0),si,Oa,Rr,Da,Ht,Zl,Aa,Jr,Bn,f0,eT=(f0=class extends Bb{constructor(e){super();je(this,Jr);je(this,si);je(this,Oa);je(this,Rr);je(this,Da);je(this,Ht);je(this,Zl);je(this,Aa);de(this,Aa,!1),de(this,Zl,e.defaultOptions),this.setOptions(e.options),this.observers=[],de(this,Da,e.client),de(this,Rr,D(this,Da).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,de(this,si,tT(this.options)),this.state=e.state??D(this,si),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=D(this,Ht))==null?void 0:e.promise}setOptions(e){this.options={...D(this,Zl),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&D(this,Rr).remove(this)}setData(e,r){const n=Em(this.state.data,e,this.options);return Ie(this,Jr,Bn).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){Ie(this,Jr,Bn).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,s;const r=(n=D(this,Ht))==null?void 0:n.promise;return(s=D(this,Ht))==null||s.cancel(e),r?r.then(ur).catch(ur):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(D(this,si))}isActive(){return this.observers.some(e=>Or(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===xg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>zs(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Mb(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=D(this,Ht))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=D(this,Ht))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),D(this,Rr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(D(this,Ht)&&(D(this,Aa)?D(this,Ht).cancel({revert:!0}):D(this,Ht).cancelRetry()),this.scheduleGc()),D(this,Rr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ie(this,Jr,Bn).call(this,{type:"invalidate"})}fetch(e,r){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(D(this,Ht))return D(this,Ht).continueRetry(),D(this,Ht).promise}if(e&&this.setOptions(e),!this.options.queryFn){const m=this.observers.find(p=>p.options.queryFn);m&&this.setOptions(m.options)}const n=new AbortController,s=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(de(this,Aa,!0),n.signal)})},a=()=>{const m=Lb(this.options,r),v=(()=>{const g={client:D(this,Da),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return de(this,Aa,!1),this.options.persister?this.options.persister(m,v,this):m(v)},l=(()=>{const m={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:D(this,Da),state:this.state,fetchFn:a};return s(m),m})();(u=this.options.behavior)==null||u.onFetch(l,this),de(this,Oa,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&Ie(this,Jr,Bn).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=m=>{var p,v,g,w;Zh(m)&&m.silent||Ie(this,Jr,Bn).call(this,{type:"error",error:m}),Zh(m)||((v=(p=D(this,Rr).config).onError)==null||v.call(p,m,this),(w=(g=D(this,Rr).config).onSettled)==null||w.call(g,this.state.data,m,this)),this.scheduleGc()};return de(this,Ht,Ub({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:m=>{var p,v,g,w;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(x){c(x);return}(v=(p=D(this,Rr).config).onSuccess)==null||v.call(p,m,this),(w=(g=D(this,Rr).config).onSettled)==null||w.call(g,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,p)=>{Ie(this,Jr,Bn).call(this,{type:"failed",failureCount:m,error:p})},onPause:()=>{Ie(this,Jr,Bn).call(this,{type:"pause"})},onContinue:()=>{Ie(this,Jr,Bn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),D(this,Ht).start()}},si=new WeakMap,Oa=new WeakMap,Rr=new WeakMap,Da=new WeakMap,Ht=new WeakMap,Zl=new WeakMap,Aa=new WeakMap,Jr=new WeakSet,Bn=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...zb(n.data,this.options),fetchMeta:e.meta??null};case"success":return de(this,Oa,void 0),{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Zh(s)&&s.revert&&D(this,Oa)?{...D(this,Oa),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),Ft.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),D(this,Rr).notify({query:this,type:"updated",action:e})})},f0);function zb(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Fb(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function tT(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var vn,m0,rT=(m0=class extends lc{constructor(e={}){super();je(this,vn);this.config=e,de(this,vn,new Map)}build(e,r,n){const s=r.queryKey,a=r.queryHash??yg(s,r);let i=this.get(a);return i||(i=new eT({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(i)),i}add(e){D(this,vn).has(e.queryHash)||(D(this,vn).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=D(this,vn).get(e.queryHash);r&&(e.destroy(),r===e&&D(this,vn).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ft.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return D(this,vn).get(e)}getAll(){return[...D(this,vn).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>ox(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>ox(e,n)):r}notify(e){Ft.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){Ft.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ft.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},vn=new WeakMap,m0),yn,Qt,Ma,xn,ms,p0,nT=(p0=class extends Bb{constructor(e){super();je(this,xn);je(this,yn);je(this,Qt);je(this,Ma);this.mutationId=e.mutationId,de(this,Qt,e.mutationCache),de(this,yn,[]),this.state=e.state||sT(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){D(this,yn).includes(e)||(D(this,yn).push(e),this.clearGcTimeout(),D(this,Qt).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){de(this,yn,D(this,yn).filter(r=>r!==e)),this.scheduleGc(),D(this,Qt).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){D(this,yn).length||(this.state.status==="pending"?this.scheduleGc():D(this,Qt).remove(this))}continue(){var e;return((e=D(this,Ma))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,i,l,c,u,d,h,m,p,v,g,w,x,y,_,b,j,P,S,k;const r=()=>{Ie(this,xn,ms).call(this,{type:"continue"})};de(this,Ma,Ub({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(C,E)=>{Ie(this,xn,ms).call(this,{type:"failed",failureCount:C,error:E})},onPause:()=>{Ie(this,xn,ms).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>D(this,Qt).canRun(this)}));const n=this.state.status==="pending",s=!D(this,Ma).canStart();try{if(n)r();else{Ie(this,xn,ms).call(this,{type:"pending",variables:e,isPaused:s}),await((i=(a=D(this,Qt).config).onMutate)==null?void 0:i.call(a,e,this));const E=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e));E!==this.state.context&&Ie(this,xn,ms).call(this,{type:"pending",context:E,variables:e,isPaused:s})}const C=await D(this,Ma).start();return await((d=(u=D(this,Qt).config).onSuccess)==null?void 0:d.call(u,C,e,this.state.context,this)),await((m=(h=this.options).onSuccess)==null?void 0:m.call(h,C,e,this.state.context)),await((v=(p=D(this,Qt).config).onSettled)==null?void 0:v.call(p,C,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,C,null,e,this.state.context)),Ie(this,xn,ms).call(this,{type:"success",data:C}),C}catch(C){try{throw await((y=(x=D(this,Qt).config).onError)==null?void 0:y.call(x,C,e,this.state.context,this)),await((b=(_=this.options).onError)==null?void 0:b.call(_,C,e,this.state.context)),await((P=(j=D(this,Qt).config).onSettled)==null?void 0:P.call(j,void 0,C,this.state.variables,this.state.context,this)),await((k=(S=this.options).onSettled)==null?void 0:k.call(S,void 0,C,e,this.state.context)),C}finally{Ie(this,xn,ms).call(this,{type:"error",error:C})}}finally{D(this,Qt).runNext(this)}}},yn=new WeakMap,Qt=new WeakMap,Ma=new WeakMap,xn=new WeakSet,ms=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Ft.batch(()=>{D(this,yn).forEach(n=>{n.onMutationUpdate(e)}),D(this,Qt).notify({mutation:this,type:"updated",action:e})})},p0);function sT(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Hn,Xr,ec,g0,aT=(g0=class extends lc{constructor(e={}){super();je(this,Hn);je(this,Xr);je(this,ec);this.config=e,de(this,Hn,new Set),de(this,Xr,new Map),de(this,ec,0)}build(e,r,n){const s=new nT({mutationCache:this,mutationId:++Oc(this,ec)._,options:e.defaultMutationOptions(r),state:n});return this.add(s),s}add(e){D(this,Hn).add(e);const r=Qc(e);if(typeof r=="string"){const n=D(this,Xr).get(r);n?n.push(e):D(this,Xr).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(D(this,Hn).delete(e)){const r=Qc(e);if(typeof r=="string"){const n=D(this,Xr).get(r);if(n)if(n.length>1){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}else n[0]===e&&D(this,Xr).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=Qc(e);if(typeof r=="string"){const n=D(this,Xr).get(r),s=n==null?void 0:n.find(a=>a.state.status==="pending");return!s||s===e}else return!0}runNext(e){var n;const r=Qc(e);if(typeof r=="string"){const s=(n=D(this,Xr).get(r))==null?void 0:n.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ft.batch(()=>{D(this,Hn).forEach(e=>{this.notify({type:"removed",mutation:e})}),D(this,Hn).clear(),D(this,Xr).clear()})}getAll(){return Array.from(D(this,Hn))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>ix(r,n))}findAll(e={}){return this.getAll().filter(r=>ix(e,r))}notify(e){Ft.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return Ft.batch(()=>Promise.all(e.map(r=>r.continue().catch(ur))))}},Hn=new WeakMap,Xr=new WeakMap,ec=new WeakMap,g0);function Qc(t){var e;return(e=t.options.scope)==null?void 0:e.id}function ux(t){return{onFetch:(e,r)=>{var d,h,m,p,v;const n=e.options,s=(m=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,a=((p=e.state.data)==null?void 0:p.pages)||[],i=((v=e.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const w=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},x=Lb(e.options,e.fetchOptions),y=async(_,b,j)=>{if(g)return Promise.reject();if(b==null&&_.pages.length)return Promise.resolve(_);const S=(()=>{const M={client:e.client,queryKey:e.queryKey,pageParam:b,direction:j?"backward":"forward",meta:e.options.meta};return w(M),M})(),k=await x(S),{maxPages:C}=e.options,E=j?K2:q2;return{pages:E(_.pages,k,C),pageParams:E(_.pageParams,b,C)}};if(s&&a.length){const _=s==="backward",b=_?oT:dx,j={pages:a,pageParams:i},P=b(n,j);l=await y(j,P,_)}else{const _=t??a.length;do{const b=c===0?i[0]??n.initialPageParam:dx(n,l);if(c>0&&b==null)break;l=await y(l,b),c++}while(c<_)}return l};e.options.persister?e.fetchFn=()=>{var g,w;return(w=(g=e.options).persister)==null?void 0:w.call(g,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function dx(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function oT(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var mt,js,Ss,ai,oi,Ns,ii,li,v0,iT=(v0=class{constructor(t={}){je(this,mt);je(this,js);je(this,Ss);je(this,ai);je(this,oi);je(this,Ns);je(this,ii);je(this,li);de(this,mt,t.queryCache||new rT),de(this,js,t.mutationCache||new aT),de(this,Ss,t.defaultOptions||{}),de(this,ai,new Map),de(this,oi,new Map),de(this,Ns,0)}mount(){Oc(this,Ns)._++,D(this,Ns)===1&&(de(this,ii,wg.subscribe(async t=>{t&&(await this.resumePausedMutations(),D(this,mt).onFocus())})),de(this,li,ed.subscribe(async t=>{t&&(await this.resumePausedMutations(),D(this,mt).onOnline())})))}unmount(){var t,e;Oc(this,Ns)._--,D(this,Ns)===0&&((t=D(this,ii))==null||t.call(this),de(this,ii,void 0),(e=D(this,li))==null||e.call(this),de(this,li,void 0))}isFetching(t){return D(this,mt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return D(this,js).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=D(this,mt).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=D(this,mt).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(zs(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return D(this,mt).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),s=D(this,mt).get(n.queryHash),a=s==null?void 0:s.state.data,i=V2(e,a);if(i!==void 0)return D(this,mt).build(this,n).setData(i,{...r,manual:!0})}setQueriesData(t,e,r){return Ft.batch(()=>D(this,mt).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=D(this,mt).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=D(this,mt);Ft.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=D(this,mt);return Ft.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=Ft.batch(()=>D(this,mt).findAll(t).map(s=>s.cancel(r)));return Promise.all(n).then(ur).catch(ur)}invalidateQueries(t,e={}){return Ft.batch(()=>(D(this,mt).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=Ft.batch(()=>D(this,mt).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,r);return r.throwOnError||(a=a.catch(ur)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(ur)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=D(this,mt).build(this,e);return r.isStaleByTime(zs(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ur).catch(ur)}fetchInfiniteQuery(t){return t.behavior=ux(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ur).catch(ur)}ensureInfiniteQueryData(t){return t.behavior=ux(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ed.isOnline()?D(this,js).resumePausedMutations():Promise.resolve()}getQueryCache(){return D(this,mt)}getMutationCache(){return D(this,js)}getDefaultOptions(){return D(this,Ss)}setDefaultOptions(t){de(this,Ss,t)}setQueryDefaults(t,e){D(this,ai).set($l(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...D(this,ai).values()],r={};return e.forEach(n=>{Ul(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){D(this,oi).set($l(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...D(this,oi).values()],r={};return e.forEach(n=>{Ul(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...D(this,Ss).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=yg(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===xg&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...D(this,Ss).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){D(this,mt).clear(),D(this,js).clear()}},mt=new WeakMap,js=new WeakMap,Ss=new WeakMap,ai=new WeakMap,oi=new WeakMap,Ns=new WeakMap,ii=new WeakMap,li=new WeakMap,v0),lr,Le,tc,Jt,Ia,ci,ks,Cs,rc,ui,di,La,Fa,Es,hi,Ke,nl,Tm,Rm,Om,Dm,Am,Mm,Im,Wb,y0,lT=(y0=class extends lc{constructor(e,r){super();je(this,Ke);je(this,lr);je(this,Le);je(this,tc);je(this,Jt);je(this,Ia);je(this,ci);je(this,ks);je(this,Cs);je(this,rc);je(this,ui);je(this,di);je(this,La);je(this,Fa);je(this,Es);je(this,hi,new Set);this.options=r,de(this,lr,e),de(this,Cs,null),de(this,ks,Pm()),this.options.experimental_prefetchInRender||D(this,ks).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(D(this,Le).addObserver(this),hx(D(this,Le),this.options)?Ie(this,Ke,nl).call(this):this.updateResult(),Ie(this,Ke,Dm).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Lm(D(this,Le),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Lm(D(this,Le),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ie(this,Ke,Am).call(this),Ie(this,Ke,Mm).call(this),D(this,Le).removeObserver(this)}setOptions(e){const r=this.options,n=D(this,Le);if(this.options=D(this,lr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Or(this.options.enabled,D(this,Le))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ie(this,Ke,Im).call(this),D(this,Le).setOptions(this.options),r._defaulted&&!km(this.options,r)&&D(this,lr).getQueryCache().notify({type:"observerOptionsUpdated",query:D(this,Le),observer:this});const s=this.hasListeners();s&&fx(D(this,Le),n,this.options,r)&&Ie(this,Ke,nl).call(this),this.updateResult(),s&&(D(this,Le)!==n||Or(this.options.enabled,D(this,Le))!==Or(r.enabled,D(this,Le))||zs(this.options.staleTime,D(this,Le))!==zs(r.staleTime,D(this,Le)))&&Ie(this,Ke,Tm).call(this);const a=Ie(this,Ke,Rm).call(this);s&&(D(this,Le)!==n||Or(this.options.enabled,D(this,Le))!==Or(r.enabled,D(this,Le))||a!==D(this,Es))&&Ie(this,Ke,Om).call(this,a)}getOptimisticResult(e){const r=D(this,lr).getQueryCache().build(D(this,lr),e),n=this.createResult(r,e);return uT(this,n)&&(de(this,Jt,n),de(this,ci,this.options),de(this,Ia,D(this,Le).state)),n}getCurrentResult(){return D(this,Jt)}trackResult(e,r){return new Proxy(e,{get:(n,s)=>(this.trackProp(s),r==null||r(s),Reflect.get(n,s))})}trackProp(e){D(this,hi).add(e)}getCurrentQuery(){return D(this,Le)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=D(this,lr).defaultQueryOptions(e),n=D(this,lr).getQueryCache().build(D(this,lr),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(e){return Ie(this,Ke,nl).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),D(this,Jt)))}createResult(e,r){var C;const n=D(this,Le),s=this.options,a=D(this,Jt),i=D(this,Ia),l=D(this,ci),u=e!==n?e.state:D(this,tc),{state:d}=e;let h={...d},m=!1,p;if(r._optimisticResults){const E=this.hasListeners(),M=!E&&hx(e,r),R=E&&fx(e,n,r,s);(M||R)&&(h={...h,...zb(d.data,e.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:v,errorUpdatedAt:g,status:w}=h;p=h.data;let x=!1;if(r.placeholderData!==void 0&&p===void 0&&w==="pending"){let E;a!=null&&a.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(E=a.data,x=!0):E=typeof r.placeholderData=="function"?r.placeholderData((C=D(this,di))==null?void 0:C.state.data,D(this,di)):r.placeholderData,E!==void 0&&(w="success",p=Em(a==null?void 0:a.data,E,r),m=!0)}if(r.select&&p!==void 0&&!x)if(a&&p===(i==null?void 0:i.data)&&r.select===D(this,rc))p=D(this,ui);else try{de(this,rc,r.select),p=r.select(p),p=Em(a==null?void 0:a.data,p,r),de(this,ui,p),de(this,Cs,null)}catch(E){de(this,Cs,E)}D(this,Cs)&&(v=D(this,Cs),p=D(this,ui),g=Date.now(),w="error");const y=h.fetchStatus==="fetching",_=w==="pending",b=w==="error",j=_&&y,P=p!==void 0,k={status:w,fetchStatus:h.fetchStatus,isPending:_,isSuccess:w==="success",isError:b,isInitialLoading:j,isLoading:j,data:p,dataUpdatedAt:h.dataUpdatedAt,error:v,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!_,isLoadingError:b&&!P,isPaused:h.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:b&&P,isStale:_g(e,r),refetch:this.refetch,promise:D(this,ks),isEnabled:Or(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const E=X=>{k.status==="error"?X.reject(k.error):k.data!==void 0&&X.resolve(k.data)},M=()=>{const X=de(this,ks,k.promise=Pm());E(X)},R=D(this,ks);switch(R.status){case"pending":e.queryHash===n.queryHash&&E(R);break;case"fulfilled":(k.status==="error"||k.data!==R.value)&&M();break;case"rejected":(k.status!=="error"||k.error!==R.reason)&&M();break}}return k}updateResult(){const e=D(this,Jt),r=this.createResult(D(this,Le),this.options);if(de(this,Ia,D(this,Le).state),de(this,ci,this.options),D(this,Ia).data!==void 0&&de(this,di,D(this,Le)),km(r,e))return;de(this,Jt,r);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!D(this,hi).size)return!0;const i=new Set(a??D(this,hi));return this.options.throwOnError&&i.add("error"),Object.keys(D(this,Jt)).some(l=>{const c=l;return D(this,Jt)[c]!==e[c]&&i.has(c)})};Ie(this,Ke,Wb).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ie(this,Ke,Dm).call(this)}},lr=new WeakMap,Le=new WeakMap,tc=new WeakMap,Jt=new WeakMap,Ia=new WeakMap,ci=new WeakMap,ks=new WeakMap,Cs=new WeakMap,rc=new WeakMap,ui=new WeakMap,di=new WeakMap,La=new WeakMap,Fa=new WeakMap,Es=new WeakMap,hi=new WeakMap,Ke=new WeakSet,nl=function(e){Ie(this,Ke,Im).call(this);let r=D(this,Le).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(ur)),r},Tm=function(){Ie(this,Ke,Am).call(this);const e=zs(this.options.staleTime,D(this,Le));if(Ya||D(this,Jt).isStale||!Nm(e))return;const n=Mb(D(this,Jt).dataUpdatedAt,e)+1;de(this,La,setTimeout(()=>{D(this,Jt).isStale||this.updateResult()},n))},Rm=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(D(this,Le)):this.options.refetchInterval)??!1},Om=function(e){Ie(this,Ke,Mm).call(this),de(this,Es,e),!(Ya||Or(this.options.enabled,D(this,Le))===!1||!Nm(D(this,Es))||D(this,Es)===0)&&de(this,Fa,setInterval(()=>{(this.options.refetchIntervalInBackground||wg.isFocused())&&Ie(this,Ke,nl).call(this)},D(this,Es)))},Dm=function(){Ie(this,Ke,Tm).call(this),Ie(this,Ke,Om).call(this,Ie(this,Ke,Rm).call(this))},Am=function(){D(this,La)&&(clearTimeout(D(this,La)),de(this,La,void 0))},Mm=function(){D(this,Fa)&&(clearInterval(D(this,Fa)),de(this,Fa,void 0))},Im=function(){const e=D(this,lr).getQueryCache().build(D(this,lr),this.options);if(e===D(this,Le))return;const r=D(this,Le);de(this,Le,e),de(this,tc,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},Wb=function(e){Ft.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(D(this,Jt))}),D(this,lr).getQueryCache().notify({query:D(this,Le),type:"observerResultsUpdated"})})},y0);function cT(t,e){return Or(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function hx(t,e){return cT(t,e)||t.state.data!==void 0&&Lm(t,e,e.refetchOnMount)}function Lm(t,e,r){if(Or(e.enabled,t)!==!1&&zs(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&_g(t,e)}return!1}function fx(t,e,r,n){return(t!==e||Or(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&_g(t,r)}function _g(t,e){return Or(e.enabled,t)!==!1&&t.isStaleByTime(zs(e.staleTime,t))}function uT(t,e){return!km(t.getCurrentResult(),e)}var Vb=f.createContext(void 0),dT=t=>{const e=f.useContext(Vb);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},hT=({client:t,children:e})=>(f.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx(Vb.Provider,{value:t,children:e})),Hb=f.createContext(!1),fT=()=>f.useContext(Hb);Hb.Provider;function mT(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var pT=f.createContext(mT()),gT=()=>f.useContext(pT),vT=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},yT=t=>{f.useEffect(()=>{t.clearReset()},[t])},xT=({result:t,errorResetBoundary:e,throwOnError:r,query:n,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(s&&t.data===void 0||G2(r,[t.error,n])),wT=t=>{if(t.suspense){const e=n=>n==="static"?n:Math.max(n??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...n)=>e(r(...n)):e(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},_T=(t,e)=>t.isLoading&&t.isFetching&&!e,bT=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,mx=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function jT(t,e,r){var h,m,p,v,g;const n=fT(),s=gT(),a=dT(),i=a.defaultQueryOptions(t);(m=(h=a.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||m.call(h,i),i._optimisticResults=n?"isRestoring":"optimistic",wT(i),vT(i,s),yT(s);const l=!a.getQueryCache().get(i.queryHash),[c]=f.useState(()=>new e(a,i)),u=c.getOptimisticResult(i),d=!n&&t.subscribed!==!1;if(f.useSyncExternalStore(f.useCallback(w=>{const x=d?c.subscribe(Ft.batchCalls(w)):ur;return c.updateResult(),x},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),f.useEffect(()=>{c.setOptions(i)},[i,c]),bT(i,u))throw mx(i,c,s);if(xT({result:u,errorResetBoundary:s,throwOnError:i.throwOnError,query:a.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw u.error;if((v=(p=a.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||v.call(p,i,u),i.experimental_prefetchInRender&&!Ya&&_T(u,n)){const w=l?mx(i,c,s):(g=a.getQueryCache().get(i.queryHash))==null?void 0:g.promise;w==null||w.catch(ur).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?u:c.trackResult(u)}function Vd(t,e){return jT(t,lT)}const Ee=t=>typeof t=="string",Qi=()=>{let t,e;const r=new Promise((n,s)=>{t=n,e=s});return r.resolve=t,r.reject=e,r},px=t=>t==null?"":""+t,ST=(t,e,r)=>{t.forEach(n=>{e[n]&&(r[n]=e[n])})},NT=/###/g,gx=t=>t&&t.indexOf("###")>-1?t.replace(NT,"."):t,vx=t=>!t||Ee(t),gl=(t,e,r)=>{const n=Ee(e)?e.split("."):e;let s=0;for(;s<n.length-1;){if(vx(t))return{};const a=gx(n[s]);!t[a]&&r&&(t[a]=new r),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={},++s}return vx(t)?{}:{obj:t,k:gx(n[s])}},yx=(t,e,r)=>{const{obj:n,k:s}=gl(t,e,Object);if(n!==void 0||e.length===1){n[s]=r;return}let a=e[e.length-1],i=e.slice(0,e.length-1),l=gl(t,i,Object);for(;l.obj===void 0&&i.length;)a=`${i[i.length-1]}.${a}`,i=i.slice(0,i.length-1),l=gl(t,i,Object),l!=null&&l.obj&&typeof l.obj[`${l.k}.${a}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${a}`]=r},kT=(t,e,r,n)=>{const{obj:s,k:a}=gl(t,e,Object);s[a]=s[a]||[],s[a].push(r)},td=(t,e)=>{const{obj:r,k:n}=gl(t,e);if(r&&Object.prototype.hasOwnProperty.call(r,n))return r[n]},CT=(t,e,r)=>{const n=td(t,r);return n!==void 0?n:td(e,r)},qb=(t,e,r)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in t?Ee(t[n])||t[n]instanceof String||Ee(e[n])||e[n]instanceof String?r&&(t[n]=e[n]):qb(t[n],e[n],r):t[n]=e[n]);return t},po=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var ET={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const PT=t=>Ee(t)?t.replace(/[&<>"'\/]/g,e=>ET[e]):t;class TT{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const r=this.regExpMap.get(e);if(r!==void 0)return r;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const RT=[" ",",","?","!",";"],OT=new TT(20),DT=(t,e,r)=>{e=e||"",r=r||"";const n=RT.filter(i=>e.indexOf(i)<0&&r.indexOf(i)<0);if(n.length===0)return!0;const s=OT.getRegExp(`(${n.map(i=>i==="?"?"\\?":i).join("|")})`);let a=!s.test(t);if(!a){const i=t.indexOf(r);i>0&&!s.test(t.substring(0,i))&&(a=!0)}return a},Fm=(t,e,r=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const n=e.split(r);let s=t;for(let a=0;a<n.length;){if(!s||typeof s!="object")return;let i,l="";for(let c=a;c<n.length;++c)if(c!==a&&(l+=r),l+=n[c],i=s[l],i!==void 0){if(["string","number","boolean"].indexOf(typeof i)>-1&&c<n.length-1)continue;a+=c-a+1;break}s=i}return s},Bl=t=>t==null?void 0:t.replace("_","-"),AT={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var r,n;(n=(r=console==null?void 0:console[t])==null?void 0:r.apply)==null||n.call(r,console,e)}};class rd{constructor(e,r={}){this.init(e,r)}init(e,r={}){this.prefix=r.prefix||"i18next:",this.logger=e||AT,this.options=r,this.debug=r.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,r,n,s){return s&&!this.debug?null:(Ee(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[r](e))}create(e){return new rd(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new rd(this.logger,e)}}var Sn=new rd;class Hd{constructor(){this.observers={}}on(e,r){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const s=this.observers[n].get(r)||0;this.observers[n].set(r,s+1)}),this}off(e,r){if(this.observers[e]){if(!r){delete this.observers[e];return}this.observers[e].delete(r)}}emit(e,...r){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([s,a])=>{for(let i=0;i<a;i++)s(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([s,a])=>{for(let i=0;i<a;i++)s.apply(s,[e,...r])})}}class xx extends Hd{constructor(e,r={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const r=this.options.ns.indexOf(e);r>-1&&this.options.ns.splice(r,1)}getResource(e,r,n,s={}){var u,d;const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,i=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,r],n&&(Array.isArray(n)?l.push(...n):Ee(n)&&a?l.push(...n.split(a)):l.push(n)));const c=td(this.data,l);return!c&&!r&&!n&&e.indexOf(".")>-1&&(e=l[0],r=l[1],n=l.slice(2).join(".")),c||!i||!Ee(n)?c:Fm((d=(u=this.data)==null?void 0:u[e])==null?void 0:d[r],n,a)}addResource(e,r,n,s,a={silent:!1}){const i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let l=[e,r];n&&(l=l.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(l=e.split("."),s=r,r=l[1]),this.addNamespaces(r),yx(this.data,l,s),a.silent||this.emit("added",e,r,n,s)}addResources(e,r,n,s={silent:!1}){for(const a in n)(Ee(n[a])||Array.isArray(n[a]))&&this.addResource(e,r,a,n[a],{silent:!0});s.silent||this.emit("added",e,r,n)}addResourceBundle(e,r,n,s,a,i={silent:!1,skipCopy:!1}){let l=[e,r];e.indexOf(".")>-1&&(l=e.split("."),s=n,n=r,r=l[1]),this.addNamespaces(r);let c=td(this.data,l)||{};i.skipCopy||(n=JSON.parse(JSON.stringify(n))),s?qb(c,n,a):c={...c,...n},yx(this.data,l,c),i.silent||this.emit("added",e,r,n)}removeResourceBundle(e,r){this.hasResourceBundle(e,r)&&delete this.data[e][r],this.removeNamespaces(r),this.emit("removed",e,r)}hasResourceBundle(e,r){return this.getResource(e,r)!==void 0}getResourceBundle(e,r){return r||(r=this.options.defaultNS),this.getResource(e,r)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const r=this.getDataByLanguage(e);return!!(r&&Object.keys(r)||[]).find(s=>r[s]&&Object.keys(r[s]).length>0)}toJSON(){return this.data}}var Kb={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,r,n,s){return t.forEach(a=>{var i;e=((i=this.processors[a])==null?void 0:i.process(e,r,n,s))??e}),e}};const Gb=Symbol("i18next/PATH_KEY");function MT(){const t=[],e=Object.create(null);let r;return e.get=(n,s)=>{var a;return(a=r==null?void 0:r.revoke)==null||a.call(r),s===Gb?t:(t.push(s),r=Proxy.revocable(n,e),r.proxy)},Proxy.revocable(Object.create(null),e).proxy}function $m(t,e){const{[Gb]:r}=t(MT());return r.join((e==null?void 0:e.keySeparator)??".")}const wx={},ef=t=>!Ee(t)&&typeof t!="boolean"&&typeof t!="number";class nd extends Hd{constructor(e,r={}){super(),ST(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Sn.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,r={interpolation:{}}){const n={...r};if(e==null)return!1;const s=this.resolve(e,n);if((s==null?void 0:s.res)===void 0)return!1;const a=ef(s.res);return!(n.returnObjects===!1&&a)}extractFromKey(e,r){let n=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const s=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let a=r.ns||this.options.defaultNS||[];const i=n&&e.indexOf(n)>-1,l=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!DT(e,n,s);if(i&&!l){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:Ee(a)?[a]:a};const u=e.split(n);(n!==s||n===s&&this.options.ns.indexOf(u[0])>-1)&&(a=u.shift()),e=u.join(s)}return{key:e,namespaces:Ee(a)?[a]:a}}translate(e,r,n){let s=typeof r=="object"?{...r}:r;if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),e==null)return"";typeof e=="function"&&(e=$m(e,{...this.options,...s})),Array.isArray(e)||(e=[String(e)]);const a=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:l,namespaces:c}=this.extractFromKey(e[e.length-1],s),u=c[c.length-1];let d=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");const h=s.lng||this.language,m=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((h==null?void 0:h.toLowerCase())==="cimode")return m?a?{res:`${u}${d}${l}`,usedKey:l,exactUsedKey:l,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(s)}:`${u}${d}${l}`:a?{res:l,usedKey:l,exactUsedKey:l,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(s)}:l;const p=this.resolve(e,s);let v=p==null?void 0:p.res;const g=(p==null?void 0:p.usedKey)||l,w=(p==null?void 0:p.exactUsedKey)||l,x=["[object Number]","[object Function]","[object RegExp]"],y=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,_=!this.i18nFormat||this.i18nFormat.handleAsObject,b=s.count!==void 0&&!Ee(s.count),j=nd.hasDefaultValue(s),P=b?this.pluralResolver.getSuffix(h,s.count,s):"",S=s.ordinal&&b?this.pluralResolver.getSuffix(h,s.count,{ordinal:!1}):"",k=b&&!s.ordinal&&s.count===0,C=k&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${P}`]||s[`defaultValue${S}`]||s.defaultValue;let E=v;_&&!v&&j&&(E=C);const M=ef(E),R=Object.prototype.toString.apply(E);if(_&&E&&M&&x.indexOf(R)<0&&!(Ee(y)&&Array.isArray(E))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const X=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,E,{...s,ns:c}):`key '${l} (${this.language})' returned an object instead of string.`;return a?(p.res=X,p.usedParams=this.getUsedParamsDetails(s),p):X}if(i){const X=Array.isArray(E),O=X?[]:{},se=X?w:g;for(const I in E)if(Object.prototype.hasOwnProperty.call(E,I)){const F=`${se}${i}${I}`;j&&!v?O[I]=this.translate(F,{...s,defaultValue:ef(C)?C[I]:void 0,joinArrays:!1,ns:c}):O[I]=this.translate(F,{...s,joinArrays:!1,ns:c}),O[I]===F&&(O[I]=E[I])}v=O}}else if(_&&Ee(y)&&Array.isArray(v))v=v.join(y),v&&(v=this.extendTranslation(v,e,s,n));else{let X=!1,O=!1;!this.isValidLookup(v)&&j&&(X=!0,v=C),this.isValidLookup(v)||(O=!0,v=l);const I=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&O?void 0:v,F=j&&C!==v&&this.options.updateMissing;if(O||X||F){if(this.logger.log(F?"updateKey":"missingKey",h,u,l,F?C:v),i){const L=this.resolve(l,{...s,keySeparator:!1});L&&L.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let T=[];const B=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&B&&B[0])for(let L=0;L<B.length;L++)T.push(B[L]);else this.options.saveMissingTo==="all"?T=this.languageUtils.toResolveHierarchy(s.lng||this.language):T.push(s.lng||this.language);const K=(L,ee,ge)=>{var Re;const we=j&&ge!==v?ge:I;this.options.missingKeyHandler?this.options.missingKeyHandler(L,u,ee,we,F,s):(Re=this.backendConnector)!=null&&Re.saveMissing&&this.backendConnector.saveMissing(L,u,ee,we,F,s),this.emit("missingKey",L,u,ee,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&b?T.forEach(L=>{const ee=this.pluralResolver.getSuffixes(L,s);k&&s[`defaultValue${this.options.pluralSeparator}zero`]&&ee.indexOf(`${this.options.pluralSeparator}zero`)<0&&ee.push(`${this.options.pluralSeparator}zero`),ee.forEach(ge=>{K([L],l+ge,s[`defaultValue${ge}`]||C)})}):K(T,l,C))}v=this.extendTranslation(v,e,s,p,n),O&&v===l&&this.options.appendNamespaceToMissingKey&&(v=`${u}${d}${l}`),(O||X)&&this.options.parseMissingKeyHandler&&(v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${d}${l}`:l,X?v:void 0,s))}return a?(p.res=v,p.usedParams=this.getUsedParamsDetails(s),p):v}extendTranslation(e,r,n,s,a){var c,u;if((c=this.i18nFormat)!=null&&c.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const d=Ee(e)&&(((u=n==null?void 0:n.interpolation)==null?void 0:u.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(d){const p=e.match(this.interpolator.nestingRegexp);h=p&&p.length}let m=n.replace&&!Ee(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(m={...this.options.interpolation.defaultVariables,...m}),e=this.interpolator.interpolate(e,m,n.lng||this.language||s.usedLng,n),d){const p=e.match(this.interpolator.nestingRegexp),v=p&&p.length;h<v&&(n.nest=!1)}!n.lng&&s&&s.res&&(n.lng=this.language||s.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,(...p)=>(a==null?void 0:a[0])===p[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${r[0]}`),null):this.translate(...p,r),n)),n.interpolation&&this.interpolator.reset()}const i=n.postProcess||this.options.postProcess,l=Ee(i)?[i]:i;return e!=null&&(l!=null&&l.length)&&n.applyPostProcessor!==!1&&(e=Kb.handle(l,e,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e,r={}){let n,s,a,i,l;return Ee(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(n))return;const u=this.extractFromKey(c,r),d=u.key;s=d;let h=u.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const m=r.count!==void 0&&!Ee(r.count),p=m&&!r.ordinal&&r.count===0,v=r.context!==void 0&&(Ee(r.context)||typeof r.context=="number")&&r.context!=="",g=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);h.forEach(w=>{var x,y;this.isValidLookup(n)||(l=w,!wx[`${g[0]}-${w}`]&&((x=this.utils)!=null&&x.hasLoadedNamespace)&&!((y=this.utils)!=null&&y.hasLoadedNamespace(l))&&(wx[`${g[0]}-${w}`]=!0,this.logger.warn(`key "${s}" for languages "${g.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach(_=>{var P;if(this.isValidLookup(n))return;i=_;const b=[d];if((P=this.i18nFormat)!=null&&P.addLookupKeys)this.i18nFormat.addLookupKeys(b,d,_,w,r);else{let S;m&&(S=this.pluralResolver.getSuffix(_,r.count,r));const k=`${this.options.pluralSeparator}zero`,C=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&(r.ordinal&&S.indexOf(C)===0&&b.push(d+S.replace(C,this.options.pluralSeparator)),b.push(d+S),p&&b.push(d+k)),v){const E=`${d}${this.options.contextSeparator||"_"}${r.context}`;b.push(E),m&&(r.ordinal&&S.indexOf(C)===0&&b.push(E+S.replace(C,this.options.pluralSeparator)),b.push(E+S),p&&b.push(E+k))}}let j;for(;j=b.pop();)this.isValidLookup(n)||(a=j,n=this.getResource(_,w,j,r))}))})}),{res:n,usedKey:s,exactUsedKey:a,usedLng:i,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,r,n,s={}){var a;return(a=this.i18nFormat)!=null&&a.getResource?this.i18nFormat.getResource(e,r,n,s):this.resourceStore.getResource(e,r,n,s)}getUsedParamsDetails(e={}){const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Ee(e.replace);let s=n?e.replace:e;if(n&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!n){s={...s};for(const a of r)delete s[a]}return s}static hasDefaultValue(e){const r="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&r===n.substring(0,r.length)&&e[n]!==void 0)return!0;return!1}}class _x{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Sn.create("languageUtils")}getScriptPartFromCode(e){if(e=Bl(e),!e||e.indexOf("-")<0)return null;const r=e.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(e){if(e=Bl(e),!e||e.indexOf("-")<0)return e;const r=e.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(e){if(Ee(e)&&e.indexOf("-")>-1){let r;try{r=Intl.getCanonicalLocales(e)[0]}catch{}return r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let r;return e.forEach(n=>{if(r)return;const s=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(s))&&(r=s)}),!r&&this.options.supportedLngs&&e.forEach(n=>{if(r)return;const s=this.getScriptPartFromCode(n);if(this.isSupportedCode(s))return r=s;const a=this.getLanguagePartFromCode(n);if(this.isSupportedCode(a))return r=a;r=this.options.supportedLngs.find(i=>{if(i===a)return i;if(!(i.indexOf("-")<0&&a.indexOf("-")<0)&&(i.indexOf("-")>0&&a.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===a||i.indexOf(a)===0&&a.length>1))return i})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(e,r){if(!e)return[];if(typeof e=="function"&&(e=e(r)),Ee(e)&&(e=[e]),Array.isArray(e))return e;if(!r)return e.default||[];let n=e[r];return n||(n=e[this.getScriptPartFromCode(r)]),n||(n=e[this.formatLanguageCode(r)]),n||(n=e[this.getLanguagePartFromCode(r)]),n||(n=e.default),n||[]}toResolveHierarchy(e,r){const n=this.getFallbackCodes((r===!1?[]:r)||this.options.fallbackLng||[],e),s=[],a=i=>{i&&(this.isSupportedCode(i)?s.push(i):this.logger.warn(`rejecting language code not found in supportedLngs: ${i}`))};return Ee(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):Ee(e)&&a(this.formatLanguageCode(e)),n.forEach(i=>{s.indexOf(i)<0&&a(this.formatLanguageCode(i))}),s}}const bx={zero:0,one:1,two:2,few:3,many:4,other:5},jx={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class IT{constructor(e,r={}){this.languageUtils=e,this.options=r,this.logger=Sn.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,r){this.rules[e]=r}clearCache(){this.pluralRulesCache={}}getRule(e,r={}){const n=Bl(e==="dev"?"en":e),s=r.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:n,type:s});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let i;try{i=new Intl.PluralRules(n,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),jx;if(!e.match(/-|_/))return jx;const c=this.languageUtils.getLanguagePartFromCode(e);i=this.getRule(c,r)}return this.pluralRulesCache[a]=i,i}needsPlural(e,r={}){let n=this.getRule(e,r);return n||(n=this.getRule("dev",r)),(n==null?void 0:n.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,r,n={}){return this.getSuffixes(e,n).map(s=>`${r}${s}`)}getSuffixes(e,r={}){let n=this.getRule(e,r);return n||(n=this.getRule("dev",r)),n?n.resolvedOptions().pluralCategories.sort((s,a)=>bx[s]-bx[a]).map(s=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,r,n={}){const s=this.getRule(e,n);return s?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s.select(r)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",r,n))}}const Sx=(t,e,r,n=".",s=!0)=>{let a=CT(t,e,r);return!a&&s&&Ee(r)&&(a=Fm(t,r,n),a===void 0&&(a=Fm(e,r,n))),a},tf=t=>t.replace(/\$/g,"$$$$");class LT{constructor(e={}){var r;this.logger=Sn.create("interpolator"),this.options=e,this.format=((r=e==null?void 0:e.interpolation)==null?void 0:r.format)||(n=>n),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:r,escapeValue:n,useRawValueToEscape:s,prefix:a,prefixEscaped:i,suffix:l,suffixEscaped:c,formatSeparator:u,unescapeSuffix:d,unescapePrefix:h,nestingPrefix:m,nestingPrefixEscaped:p,nestingSuffix:v,nestingSuffixEscaped:g,nestingOptionsSeparator:w,maxReplaces:x,alwaysFormat:y}=e.interpolation;this.escape=r!==void 0?r:PT,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=a?po(a):i||"{{",this.suffix=l?po(l):c||"}}",this.formatSeparator=u||",",this.unescapePrefix=d?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=m?po(m):p||po("$t("),this.nestingSuffix=v?po(v):g||po(")"),this.nestingOptionsSeparator=w||",",this.maxReplaces=x||1e3,this.alwaysFormat=y!==void 0?y:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(r,n)=>(r==null?void 0:r.source)===n?(r.lastIndex=0,r):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,r,n,s){var p;let a,i,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=v=>{if(v.indexOf(this.formatSeparator)<0){const y=Sx(r,c,v,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(y,void 0,n,{...s,...r,interpolationkey:v}):y}const g=v.split(this.formatSeparator),w=g.shift().trim(),x=g.join(this.formatSeparator).trim();return this.format(Sx(r,c,w,this.options.keySeparator,this.options.ignoreJSONStructure),x,n,{...s,...r,interpolationkey:w})};this.resetRegExp();const d=(s==null?void 0:s.missingInterpolationHandler)||this.options.missingInterpolationHandler,h=((p=s==null?void 0:s.interpolation)==null?void 0:p.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:v=>tf(v)},{regex:this.regexp,safeValue:v=>this.escapeValue?tf(this.escape(v)):tf(v)}].forEach(v=>{for(l=0;a=v.regex.exec(e);){const g=a[1].trim();if(i=u(g),i===void 0)if(typeof d=="function"){const x=d(e,a,s);i=Ee(x)?x:""}else if(s&&Object.prototype.hasOwnProperty.call(s,g))i="";else if(h){i=a[0];continue}else this.logger.warn(`missed to pass in variable ${g} for interpolating ${e}`),i="";else!Ee(i)&&!this.useRawValueToEscape&&(i=px(i));const w=v.safeValue(i);if(e=e.replace(a[0],w),h?(v.regex.lastIndex+=i.length,v.regex.lastIndex-=a[0].length):v.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,r,n={}){let s,a,i;const l=(c,u)=>{const d=this.nestingOptionsSeparator;if(c.indexOf(d)<0)return c;const h=c.split(new RegExp(`${d}[ ]*{`));let m=`{${h[1]}`;c=h[0],m=this.interpolate(m,i);const p=m.match(/'/g),v=m.match(/"/g);(((p==null?void 0:p.length)??0)%2===0&&!v||v.length%2!==0)&&(m=m.replace(/'/g,'"'));try{i=JSON.parse(m),u&&(i={...u,...i})}catch(g){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,g),`${c}${d}${m}`}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,c};for(;s=this.nestingRegexp.exec(e);){let c=[];i={...n},i=i.replace&&!Ee(i.replace)?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;const u=/{.*}/.test(s[1])?s[1].lastIndexOf("}")+1:s[1].indexOf(this.formatSeparator);if(u!==-1&&(c=s[1].slice(u).split(this.formatSeparator).map(d=>d.trim()).filter(Boolean),s[1]=s[1].slice(0,u)),a=r(l.call(this,s[1].trim(),i),i),a&&s[0]===e&&!Ee(a))return a;Ee(a)||(a=px(a)),a||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),a=""),c.length&&(a=c.reduce((d,h)=>this.format(d,h,n.lng,{...n,interpolationkey:s[1].trim()}),a.trim())),e=e.replace(s[0],a),this.regexp.lastIndex=0}return e}}const FT=t=>{let e=t.toLowerCase().trim();const r={};if(t.indexOf("(")>-1){const n=t.split("(");e=n[0].toLowerCase().trim();const s=n[1].substring(0,n[1].length-1);e==="currency"&&s.indexOf(":")<0?r.currency||(r.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?r.range||(r.range=s.trim()):s.split(";").forEach(i=>{if(i){const[l,...c]=i.split(":"),u=c.join(":").trim().replace(/^'+|'+$/g,""),d=l.trim();r[d]||(r[d]=u),u==="false"&&(r[d]=!1),u==="true"&&(r[d]=!0),isNaN(u)||(r[d]=parseInt(u,10))}})}return{formatName:e,formatOptions:r}},Nx=t=>{const e={};return(r,n,s)=>{let a=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(a={...a,[s.interpolationkey]:void 0});const i=n+JSON.stringify(a);let l=e[i];return l||(l=t(Bl(n),s),e[i]=l),l(r)}},$T=t=>(e,r,n)=>t(Bl(r),n)(e);class UT{constructor(e={}){this.logger=Sn.create("formatter"),this.options=e,this.init(e)}init(e,r={interpolation:{}}){this.formatSeparator=r.interpolation.formatSeparator||",";const n=r.cacheInBuiltFormats?Nx:$T;this.formats={number:n((s,a)=>{const i=new Intl.NumberFormat(s,{...a});return l=>i.format(l)}),currency:n((s,a)=>{const i=new Intl.NumberFormat(s,{...a,style:"currency"});return l=>i.format(l)}),datetime:n((s,a)=>{const i=new Intl.DateTimeFormat(s,{...a});return l=>i.format(l)}),relativetime:n((s,a)=>{const i=new Intl.RelativeTimeFormat(s,{...a});return l=>i.format(l,a.range||"day")}),list:n((s,a)=>{const i=new Intl.ListFormat(s,{...a});return l=>i.format(l)})}}add(e,r){this.formats[e.toLowerCase().trim()]=r}addCached(e,r){this.formats[e.toLowerCase().trim()]=Nx(r)}format(e,r,n,s={}){const a=r.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(l=>l.indexOf(")")>-1)){const l=a.findIndex(c=>c.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,l)].join(this.formatSeparator)}return a.reduce((l,c)=>{var h;const{formatName:u,formatOptions:d}=FT(c);if(this.formats[u]){let m=l;try{const p=((h=s==null?void 0:s.formatParams)==null?void 0:h[s.interpolationkey])||{},v=p.locale||p.lng||s.locale||s.lng||n;m=this.formats[u](l,v,{...d,...s,...p})}catch(p){this.logger.warn(p)}return m}else this.logger.warn(`there was no format function for ${u}`);return l},e)}}const BT=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class zT extends Hd{constructor(e,r,n,s={}){var a,i;super(),this.backend=e,this.store=r,this.services=n,this.languageUtils=n.languageUtils,this.options=s,this.logger=Sn.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],(i=(a=this.backend)==null?void 0:a.init)==null||i.call(a,n,s.backend,s)}queueLoad(e,r,n,s){const a={},i={},l={},c={};return e.forEach(u=>{let d=!0;r.forEach(h=>{const m=`${u}|${h}`;!n.reload&&this.store.hasResourceBundle(u,h)?this.state[m]=2:this.state[m]<0||(this.state[m]===1?i[m]===void 0&&(i[m]=!0):(this.state[m]=1,d=!1,i[m]===void 0&&(i[m]=!0),a[m]===void 0&&(a[m]=!0),c[h]===void 0&&(c[h]=!0)))}),d||(l[u]=!0)}),(Object.keys(a).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(a),pending:Object.keys(i),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(e,r,n){const s=e.split("|"),a=s[0],i=s[1];r&&this.emit("failedLoading",a,i,r),!r&&n&&this.store.addResourceBundle(a,i,n,void 0,void 0,{skipCopy:!0}),this.state[e]=r?-1:2,r&&n&&(this.state[e]=0);const l={};this.queue.forEach(c=>{kT(c.loaded,[a],i),BT(c,e),r&&c.errors.push(r),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(u=>{l[u]||(l[u]={});const d=c.loaded[u];d.length&&d.forEach(h=>{l[u][h]===void 0&&(l[u][h]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(e,r,n,s=0,a=this.retryTimeout,i){if(!e.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:r,fcName:n,tried:s,wait:a,callback:i});return}this.readingCalls++;const l=(u,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(u&&d&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,r,n,s+1,a*2,i)},a);return}i(u,d)},c=this.backend[n].bind(this.backend);if(c.length===2){try{const u=c(e,r);u&&typeof u.then=="function"?u.then(d=>l(null,d)).catch(l):l(null,u)}catch(u){l(u)}return}return c(e,r,l)}prepareLoading(e,r,n={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();Ee(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Ee(r)&&(r=[r]);const a=this.queueLoad(e,r,n,s);if(!a.toLoad.length)return a.pending.length||s(),null;a.toLoad.forEach(i=>{this.loadOne(i)})}load(e,r,n){this.prepareLoading(e,r,{},n)}reload(e,r,n){this.prepareLoading(e,r,{reload:!0},n)}loadOne(e,r=""){const n=e.split("|"),s=n[0],a=n[1];this.read(s,a,"read",void 0,void 0,(i,l)=>{i&&this.logger.warn(`${r}loading namespace ${a} for language ${s} failed`,i),!i&&l&&this.logger.log(`${r}loaded namespace ${a} for language ${s}`,l),this.loaded(e,i,l)})}saveMissing(e,r,n,s,a,i={},l=()=>{}){var c,u,d,h,m;if((u=(c=this.services)==null?void 0:c.utils)!=null&&u.hasLoadedNamespace&&!((h=(d=this.services)==null?void 0:d.utils)!=null&&h.hasLoadedNamespace(r))){this.logger.warn(`did not save key "${n}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if((m=this.backend)!=null&&m.create){const p={...i,isUpdate:a},v=this.backend.create.bind(this.backend);if(v.length<6)try{let g;v.length===5?g=v(e,r,n,s,p):g=v(e,r,n,s),g&&typeof g.then=="function"?g.then(w=>l(null,w)).catch(l):l(null,g)}catch(g){l(g)}else v(e,r,n,s,l,p)}!e||!e[0]||this.store.addResource(e[0],r,n,s)}}}const kx=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),Ee(t[1])&&(e.defaultValue=t[1]),Ee(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const r=t[3]||t[2];Object.keys(r).forEach(n=>{e[n]=r[n]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Cx=t=>{var e,r;return Ee(t.ns)&&(t.ns=[t.ns]),Ee(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),Ee(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((r=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:r.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},Jc=()=>{},WT=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(r=>{typeof t[r]=="function"&&(t[r]=t[r].bind(t))})};class vl extends Hd{constructor(e={},r){if(super(),this.options=Cx(e),this.services={},this.logger=Sn,this.modules={external:[]},WT(this),r&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,r),this;setTimeout(()=>{this.init(e,r)},0)}}init(e={},r){this.isInitializing=!0,typeof e=="function"&&(r=e,e={}),e.defaultNS==null&&e.ns&&(Ee(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const n=kx();this.options={...n,...this.options,...Cx(e)},this.options.interpolation={...n.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const s=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?Sn.init(s(this.modules.logger),this.options):Sn.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=UT;const d=new _x(this.options);this.store=new xx(this.options.resources,this.options);const h=this.services;h.logger=Sn,h.resourceStore=this.store,h.languageUtils=d,h.pluralResolver=new IT(d,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(h.formatter=s(u),h.formatter.init&&h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new LT(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new zT(s(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",(p,...v)=>{this.emit(p,...v)}),this.modules.languageDetector&&(h.languageDetector=s(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=s(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new nd(this.services,this.options),this.translator.on("*",(p,...v)=>{this.emit(p,...v)}),this.modules.external.forEach(p=>{p.init&&p.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Jc),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...d)=>this.store[u](...d)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...d)=>(this.store[u](...d),this)});const l=Qi(),c=()=>{const u=(d,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(h),r(d,h)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),l}loadResources(e,r=Jc){var a,i;let n=r;const s=Ee(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if((s==null?void 0:s.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const l=[],c=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(h=>{h!=="cimode"&&l.indexOf(h)<0&&l.push(h)})};s?c(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>c(d)),(i=(a=this.options.preload)==null?void 0:a.forEach)==null||i.call(a,u=>c(u)),this.services.backendConnector.load(l,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(u)})}else n(null)}reloadResources(e,r,n){const s=Qi();return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r=void 0),e||(e=this.languages),r||(r=this.options.ns),n||(n=Jc),this.services.backendConnector.reload(e,r,a=>{s.resolve(),n(a)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Kb.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let r=0;r<this.languages.length;r++){const n=this.languages[r];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,r){this.isLanguageChangingTo=e;const n=Qi();this.emit("languageChanging",e);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},a=(l,c)=>{c?this.isLanguageChangingTo===e&&(s(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,n.resolve((...u)=>this.t(...u)),r&&r(l,(...u)=>this.t(...u))},i=l=>{var d,h;!e&&!l&&this.services.languageDetector&&(l=[]);const c=Ee(l)?l:l&&l[0],u=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(Ee(l)?[l]:l);u&&(this.language||s(u),this.translator.language||this.translator.changeLanguage(u),(h=(d=this.services.languageDetector)==null?void 0:d.cacheUserLanguage)==null||h.call(d,u)),this.loadResources(u,m=>{a(m,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?i(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(i):this.services.languageDetector.detect(i):i(e),n}getFixedT(e,r,n){const s=(a,i,...l)=>{let c;typeof i!="object"?c=this.options.overloadTranslationOptionHandler([a,i].concat(l)):c={...i},c.lng=c.lng||s.lng,c.lngs=c.lngs||s.lngs,c.ns=c.ns||s.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||n||s.keyPrefix);const u=this.options.keySeparator||".";let d;return c.keyPrefix&&Array.isArray(a)?d=a.map(h=>(typeof h=="function"&&(h=$m(h,{...this.options,...i})),`${c.keyPrefix}${u}${h}`)):(typeof a=="function"&&(a=$m(a,{...this.options,...i})),d=c.keyPrefix?`${c.keyPrefix}${u}${a}`:a),this.t(d,c)};return Ee(e)?s.lng=e:s.lngs=e,s.ns=r,s.keyPrefix=n,s}t(...e){var r;return(r=this.translator)==null?void 0:r.translate(...e)}exists(...e){var r;return(r=this.translator)==null?void 0:r.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,r={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=r.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const i=(l,c)=>{const u=this.services.backendConnector.state[`${l}|${c}`];return u===-1||u===0||u===2};if(r.precheck){const l=r.precheck(this,i);if(l!==void 0)return l}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||i(n,e)&&(!s||i(a,e)))}loadNamespaces(e,r){const n=Qi();return this.options.ns?(Ee(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{n.resolve(),r&&r(s)}),n):(r&&r(),Promise.resolve())}loadLanguages(e,r){const n=Qi();Ee(e)&&(e=[e]);const s=this.options.preload||[],a=e.filter(i=>s.indexOf(i)<0&&this.services.languageUtils.isSupportedCode(i));return a.length?(this.options.preload=s.concat(a),this.loadResources(i=>{n.resolve(),r&&r(i)}),n):(r&&r(),Promise.resolve())}dir(e){var s,a;if(e||(e=this.resolvedLanguage||(((s=this.languages)==null?void 0:s.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const i=new Intl.Locale(e);if(i&&i.getTextInfo){const l=i.getTextInfo();if(l&&l.direction)return l.direction}}catch{}const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=((a=this.services)==null?void 0:a.languageUtils)||new _x(kx());return e.toLowerCase().indexOf("-latn")>1?"ltr":r.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},r){const n=new vl(e,r);return n.createInstance=vl.createInstance,n}cloneInstance(e={},r=Jc){const n=e.forkResourceStore;n&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},a=new vl(s);if((e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(l=>{a[l]=this[l]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},n){const l=Object.keys(this.store.data).reduce((c,u)=>(c[u]={...this.store.data[u]},c[u]=Object.keys(c[u]).reduce((d,h)=>(d[h]={...c[u][h]},d),c[u]),c),{});a.store=new xx(l,s),a.services.resourceStore=a.store}return a.translator=new nd(a.services,s),a.translator.on("*",(l,...c)=>{a.emit(l,...c)}),a.init(s,r),a.translator.options=s,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const dt=vl.createInstance();dt.createInstance;dt.dir;dt.init;dt.loadResources;dt.reloadResources;dt.use;dt.changeLanguage;dt.getFixedT;dt.t;dt.exists;dt.setDefaultNamespace;dt.hasLoadedNamespace;dt.loadNamespaces;dt.loadLanguages;const VT=(t,e,r,n)=>{var a,i,l,c;const s=[r,{code:e,...n||{}}];if((i=(a=t==null?void 0:t.services)==null?void 0:a.logger)!=null&&i.forward)return t.services.logger.forward(s,"warn","react-i18next::",!0);Qa(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),(c=(l=t==null?void 0:t.services)==null?void 0:l.logger)!=null&&c.warn?t.services.logger.warn(...s):console!=null&&console.warn&&console.warn(...s)},Ex={},Yb=(t,e,r,n)=>{Qa(r)&&Ex[r]||(Qa(r)&&(Ex[r]=new Date),VT(t,e,r,n))},Qb=(t,e)=>()=>{if(t.isInitialized)e();else{const r=()=>{setTimeout(()=>{t.off("initialized",r)},0),e()};t.on("initialized",r)}},Um=(t,e,r)=>{t.loadNamespaces(e,Qb(t,r))},Px=(t,e,r,n)=>{if(Qa(r)&&(r=[r]),t.options.preload&&t.options.preload.indexOf(e)>-1)return Um(t,r,n);r.forEach(s=>{t.options.ns.indexOf(s)<0&&t.options.ns.push(s)}),t.loadLanguages(e,Qb(t,n))},HT=(t,e,r={})=>!e.languages||!e.languages.length?(Yb(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:r.lng,precheck:(n,s)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!s(n.isLanguageChangingTo,t))return!1}}),Qa=t=>typeof t=="string",qT=t=>typeof t=="object"&&t!==null,KT=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,GT={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},YT=t=>GT[t],QT=t=>t.replace(KT,YT);let Bm={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:QT};const JT=(t={})=>{Bm={...Bm,...t}},XT=()=>Bm;let Jb;const ZT=t=>{Jb=t},eR=()=>Jb,tR={type:"3rdParty",init(t){JT(t.options.react),ZT(t)}},Xb=f.createContext();class rR{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var Zb={exports:{}},ej={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wi=f;function nR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sR=typeof Object.is=="function"?Object.is:nR,aR=wi.useState,oR=wi.useEffect,iR=wi.useLayoutEffect,lR=wi.useDebugValue;function cR(t,e){var r=e(),n=aR({inst:{value:r,getSnapshot:e}}),s=n[0].inst,a=n[1];return iR(function(){s.value=r,s.getSnapshot=e,rf(s)&&a({inst:s})},[t,r,e]),oR(function(){return rf(s)&&a({inst:s}),t(function(){rf(s)&&a({inst:s})})},[t]),lR(r),r}function rf(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!sR(t,r)}catch{return!0}}function uR(t,e){return e()}var dR=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?uR:cR;ej.useSyncExternalStore=wi.useSyncExternalStore!==void 0?wi.useSyncExternalStore:dR;Zb.exports=ej;var tj=Zb.exports;const hR=(t,e)=>Qa(e)?e:qT(e)&&Qa(e.defaultValue)?e.defaultValue:Array.isArray(t)?t[t.length-1]:t,fR={t:hR,ready:!1},mR=()=>()=>{},gt=(t,e={})=>{var S,k;const{i18n:r}=e,{i18n:n,defaultNS:s}=f.useContext(Xb)||{},a=r||n||eR();a&&!a.reportNamespaces&&(a.reportNamespaces=new rR),a||Yb(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const i=f.useMemo(()=>{var C;return{...XT(),...(C=a==null?void 0:a.options)==null?void 0:C.react,...e}},[a,e]),{useSuspense:l,keyPrefix:c}=i,u=f.useMemo(()=>{var E;const C=s||((E=a==null?void 0:a.options)==null?void 0:E.defaultNS);return Qa(C)?[C]:C||["translation"]},[t,s,a]);(k=(S=a==null?void 0:a.reportNamespaces)==null?void 0:S.addUsedNamespaces)==null||k.call(S,u);const d=f.useRef(0),h=f.useCallback(C=>{if(!a)return mR;const{bindI18n:E,bindI18nStore:M}=i,R=()=>{d.current+=1,C()};return E&&a.on(E,R),M&&a.store.on(M,R),()=>{E&&E.split(" ").forEach(X=>a.off(X,R)),M&&M.split(" ").forEach(X=>a.store.off(X,R))}},[a,i]),m=f.useRef(),p=f.useCallback(()=>{if(!a)return fR;const C=!!(a.isInitialized||a.initializedStoreOnce)&&u.every(se=>HT(se,a,i)),E=e.lng||a.language,M=d.current,R=m.current;if(R&&R.ready===C&&R.lng===E&&R.keyPrefix===c&&R.revision===M)return R;const O={t:a.getFixedT(E,i.nsMode==="fallback"?u:u[0],c),ready:C,lng:E,keyPrefix:c,revision:M};return m.current=O,O},[a,u,c,i,e.lng]),[v,g]=f.useState(0),{t:w,ready:x}=tj.useSyncExternalStore(h,p,p);f.useEffect(()=>{if(a&&!x&&!l){const C=()=>g(E=>E+1);e.lng?Px(a,e.lng,u,C):Um(a,u,C)}},[a,e.lng,u,x,l,v]);const y=a||{},_=f.useRef(null),b=f.useRef(),j=C=>{const E=Object.getOwnPropertyDescriptors(C);E.__original&&delete E.__original;const M=Object.create(Object.getPrototypeOf(C),E);if(!Object.prototype.hasOwnProperty.call(M,"__original"))try{Object.defineProperty(M,"__original",{value:C,writable:!1,enumerable:!1,configurable:!1})}catch{}return M},P=f.useMemo(()=>{const C=y,E=C==null?void 0:C.language;let M=C;C&&(_.current&&_.current.__original===C?b.current!==E?(M=j(C),_.current=M,b.current=E):M=_.current:(M=j(C),_.current=M,b.current=E));const R=[w,M,x];return R.t=w,R.i18n=M,R.ready=x,R},[w,y,x,y.resolvedLanguage,y.language,y.languages]);if(a&&l&&!x)throw new Promise(C=>{const E=()=>C();e.lng?Px(a,e.lng,u,E):Um(a,u,E)});return P};function pR({i18n:t,defaultNS:e,children:r}){const n=f.useMemo(()=>({i18n:t,defaultNS:e}),[t,e]);return f.createElement(Xb.Provider,{value:n},r)}const gR={home:"Home",dashboard:"Dashboard",projects:"Projects",users:"Users",settings:"Settings",leads:"Leads",tickets:"Tickets",tasks:"Tasks",teams:"Teams",clients:"Clients",chats:"Chats",surveys:"Surveys",clientPortal:"CLIENT PORTAL",partnerDashboard:"PARTNER DASHBOARD",empDashboard:"EMP DASHBOARD"},vR={save:"Save",cancel:"Cancel",close:"Close",submit:"Submit",delete:"Delete",edit:"Edit",add:"Add",login:"Login",signup:"Sign Up",logout:"Logout",saving:"Saving..."},yR={name:"Name",email:"Email",password:"Password",confirmPassword:"Confirm Password",phone:"Phone",message:"Message"},xR={signIn:"Sign In",signUp:"Sign Up",createAccount:"Create Account",enterCredentials:"Enter your credentials to continue",signUpToGetStarted:"Sign up to get started",chooseAccountType:"Choose your account type to continue with Google",chooseAccountTypeSignUp:"Choose your account type to sign up with Google",client:"Client",partner:"Partner",partnerEmployee:"Partner Employee",redirectingToGoogle:"Redirecting to Google...",orContinueWith:"Or continue with",email:"Email",password:"Password",signingIn:"Signing in...",signInButton:"Sign In",signUpButton:"Sign Up",dontHaveAccount:"Don't have an account?",alreadyHaveAccount:"Already have an account?",clientPortal:"Client Portal",failedToSignIn:"Failed to sign in",failedToSignInWithGoogle:"Failed to sign in with Google"},wR={welcome:"Welcome",loading:"Loading...",error:"Error",success:"Success",search:"Search",filter:"Filter",notifications:"Notifications",kanban:"Kanban",list:"List",select:"Select",view:"View",status:"Status",assignee:"Assignee",all:"All",pickDate:"Pick a date",clearFilters:"Clear filters",created:"Created",actions:"Actions",stage:"Stage"},_R={title:"Dashboard",subtitle:"Welcome back! Here's an overview of your projects.",totalProjects:"Total Projects",completed:"completed",inProgress:"In Progress",activeProjects:"Active projects",clients:"Clients",totalClients:"Total clients",teamMembers:"Team Members",activeUsers:"Active users",leads:"Leads",totalLeads:"Total leads",surveys:"Surveys",totalSurveys:"Total surveys",recentProjects:"Recent Projects",projectStatus:"Project Status",noProjectsYet:"No projects yet",retry:"Retry",completedStatus:"Completed",inProgressStatus:"In Progress",notStartedStatus:"Not Started"},bR={title:"Leads",subtitle:"Manage and track all your leads",newLead:"New Lead",addLead:"Add Lead",createLead:"Create New Lead",createLeadDesc:"Add a new lead to the selected stage.",leadName:"Lead Name",leadNamePlaceholder:"Enter lead name",description:"Description",descriptionPlaceholder:"Enter lead description",clientName:"Client Name",clientNamePlaceholder:"Enter client name",client:"Client",selectClient:"Select a client (optional)",noClient:"No client",unknown:"Unknown",created:"Created",updated:"Updated",createdBy:"Created by",assignedTo:"Assigned to",assignToEmployee:"Assign to Employee",selectAssignee:"Select assignee",lead:"Lead",deleteLead:"Delete Lead",deleteConfirmation:'Are you sure you want to delete "{{name}}"?',addStage:"Add Stage",stageNamePlaceholder:"Stage name...",deleteStage:"Delete Stage",deleteStageConfirmation:"This stage contains {{count}} lead(s). Deleting this stage will also remove all leads in it. This action cannot be undone.",addNewLeadCard:"Add New Lead",noLeadsYet:"No leads have been created yet."},jR={title:"Projects",subtitle:"Manage and track all your projects",newProject:"New Project",createProject:"Create New Project",createProjectDesc:"Add a new project to the selected stage.",projectName:"Project Name",projectNamePlaceholder:"Enter project name",description:"Description",descriptionPlaceholder:"Enter project description",client:"Client",selectClient:"Select a client",initialProgress:"Initial Progress",addProject:"Add Project",addNewProjectCard:"Add New Project",progress:"Progress",started:"Started",completed:"Completed",due:"Due",deleteProject:"Delete Project",deleteConfirmation:'Are you sure you want to delete "{{name}}"?',noProjectsYet:"No projects have been created yet."},SR={title:"Tickets",subtitle:"Manage and track all support tickets.",newTicket:"New Ticket",createNewTicket:"Create New Ticket",createTicketDesc:"Fill in the details to create a new support ticket.",searchPlaceholder:"Search tickets...",allTickets:"All Tickets",noTicketsFound:"No Tickets Found",noTicketsFoundDesc:"Try adjusting your search terms.",noTicketsYet:"No tickets have been created yet.",id:"ID",subject:"Subject",subjectPlaceholder:"Enter ticket subject",description:"Description",descriptionPlaceholder:"Describe the issue or request",status:"Status",priority:"Priority",priorityLow:"Low",priorityMedium:"Medium",priorityHigh:"High",priorityUrgent:"Urgent",ticketType:"Ticket Type",typeRequest:"Request",typeFollowUp:"Follow Up",typeIssue:"Issue",typeInternalTask:"Internal Task",assignTo:"Assign To",selectAssignee:"Select assignee (optional)",assignedTo:"Assigned To",createdDate:"Created Date",actions:"Actions",view:"View",loading:"Loading tickets...",createTicket:"Create Ticket",creatingTicket:"Creating...",createError:"Failed to create ticket",allStatuses:"All Statuses",allPriorities:"All Priorities",statusOpen:"Open",statusInProgress:"In Progress",statusResolved:"Resolved",statusClosed:"Closed",ticketId:"Ticket ID",createdBy:"Created By",resolvedDate:"Resolved Date",closedDate:"Closed Date"},NR={title:"Teams",subtitle:"Manage teams and team members",createTeam:"Create Team",createTeamTitle:"Create New Team",createTeamDesc:"Create a new team and assign a team leader. You can add members after creation.",teamName:"Team Name",teamNamePlaceholder:"Enter team name",team_leader:"Team Leader",selectTeamLeader:"Select a team leader (optional)",searchPlaceholder:"Search teams...",members:"Members",memberCount:"{{count}} member",memberCount_plural:"{{count}} members",addMember:"Add member",created:"Created",noTeamsFound:"No teams found",noTeamsYet:"No teams yet",createFirstTeam:"Create Your First Team",deleteTeam:"Delete Team",deleteConfirmation:'Are you sure you want to delete "{{name}}"? This will also remove all team members. This action cannot be undone.',moreMembers:"+{{count}} more members",noMembersYet:"No members yet"},kR={title:"Tasks",subtitle:"Manage and track all your tasks in one place.",loading:"Loading...",error:"Error",deleteTask:"Delete Task",createTask:"Create New Task",createTaskDesc:"Add a new task to the selected stage.",newTask:"New Task",addNewTask:"Add New Task",addTask:"Add Task",taskName:"Task Name",taskNamePlaceholder:"Enter task name",descriptionPlaceholder:"Enter task description",dueDate:"Due Date",selectUser:"Select a user",selectStage:"Select a stage",selectStatus:"Select status",todo:"Todo",inProgress:"In Progress",done:"Done",stage:"Stage",allTasks:"All Tasks",noTasksYet:"No tasks have been created yet."},CR={brandName:"Middar",badge:" New Feature",hero:{title:{line1:"Streamline Your",line2:"Business Operations"},description:"Powerful CRM solution to manage projects, leads, tasks, and teams all in one place. Boost productivity and grow your business with our comprehensive platform.",cta:{primary:"Get Started",secondary:"Learn More"}},stats:{users:"10K+",usersLabel:"Active Users",projects:"50K+",projectsLabel:"Projects Managed",uptime:"99.9%",uptimeLabel:"Uptime",support:"24/7",supportLabel:"Support"},features:{title:"Everything you need to succeed",subtitle:"Comprehensive tools designed for modern businesses",projectManagement:{title:"Project Management",description:"Track projects from inception to completion with detailed progress monitoring and team collaboration."},leadManagement:{title:"Lead Management",description:"Convert more leads with our advanced CRM tools and automated follow-up systems."},analytics:{title:"Analytics & Insights",description:"Make data-driven decisions with comprehensive analytics and reporting dashboards."},communication:{title:"Team Communication",description:"Keep your team connected with integrated chat, notifications, and collaboration tools."},taskManagement:{title:"Task Management",description:"Organize and prioritize tasks with our intuitive kanban board and deadline tracking."},security:{title:"Enterprise Security",description:"Your data is protected with enterprise-grade security and compliance standards."}},cta:{title:"Ready to transform your business?",description:"Join thousands of businesses already using our platform to streamline their operations and boost productivity.",button:"Start Free Trial"},footer:{copyright:" 2025 {{brand}} CRM. All rights reserved."}},ER={title:"Users",subtitle:"Manage system users and their roles",totalUsers:"Total Users",addUser:"Add User",addNewUser:"Add New User",addUserDescription:"Fill in the details below to create a new user account.",fullName:"Full Name",email:"Email",password:"Password",role:"Role",admin:"Admin",manager:"Manager",employee:"Employee",team_leader:"Team Leader",client:"Client",employees:"Employees",clients:"Clients",addingUser:"Adding user...",addUserError:"Failed to add user",deleteUser:"Delete User",deleteConfirmation:'Are you sure you want to delete "{{name}}"?',deleteError:"Failed to delete user",updateRoleError:"Failed to update user role",changeRole:"Change Role",searchPlaceholder:"Search users...",noUsersFound:"No users found",noUsersFoundDesc:"Try adjusting your search terms.",noUsersAvailable:"No users available",joined:"Joined",updated:"Updated",userDetails:"User Details",userDetailsDescription:"View detailed information about this user",phone:"Phone",contact:"Contact",company:"Company",userId:"User ID",authUserId:"Auth User ID",updateUserError:"Failed to update user"},PR={title:"Clients",subtitle:"Manage and view all your clients",newClient:"New Client",loading:"Loading clients...",noClientsFound:"No clients found",noClientsYet:"No clients have been added yet",active:"active",totalProjects:"Total Projects",activeProjects:"Active Projects",completedProjects:"Completed Projects",noCompany:"No company",noEmail:"No email",projects:"projects",viewDetails:"View Details",clientDetails:"Client Details",userId:"User ID",emailLabel:"Email",contactLabel:"Contact",companyLabel:"Company",createdLabel:"Created",updatedLabel:"Updated",projectSummary:"Project Summary"},TR={title:"My Dashboard",subtitle:"Welcome back, {{name}}! Here's your work overview.",employeeInfo:"Employee Information",name:"Name",email:"Email",role:"Role",memberSince:"Member Since",myProjects:"My Projects",active:"active",myTasks:"My Tasks",completed:"completed",inProgress:"In Progress",activeTasks:"Active tasks",completedTasks:"Completed",finishedTasks:"Finished tasks",leads:"Leads",totalLeads:"Total leads",surveys:"Surveys",totalSurveys:"Total surveys",recentTasks:"Recent Tasks",noDescription:"No description",noProjectsAssigned:"No projects assigned yet",noTasksAssigned:"No tasks assigned yet"},RR={changePassword:"Change Password",changePasswordDescription:"Enter your new password below. Make sure it's at least 6 characters long.",newPassword:"New Password",newPasswordPlaceholder:"Enter new password",newPasswordRequired:"New password is required",confirmPassword:"Confirm Password",confirmPasswordPlaceholder:"Confirm new password",passwordsDoNotMatch:"Passwords do not match",passwordTooShort:"Password must be at least 6 characters long",changingPassword:"Changing password...",passwordChangedSuccessfully:"Password changed successfully!",passwordChangeFailed:"Failed to change password"},OR={chatRooms:"Chat Rooms",createRoomTitle:"Create New Room",createRoomDesc:"Create a new chat room for your team or project",roomName:"Room Name",roomNamePlaceholder:"Enter room name",private:"Private",privateRoom:"Private Room",publicRoom:"Public Room",project:"Project",projectIdPlaceholder:"Enter project ID (optional)",createRoom:"Create Room",searchConversations:"Search conversations...",searchRooms:"Search rooms...",members:"members",online:"Online",selectRoom:"Select a room to start chatting",typeMessage:"Type a message...",you:"You",unknownUser:"Unknown User",justNow:"Just now",minutesAgo:"{{count}}m ago",hoursAgo:"{{count}}h ago",viewDetails:"View Details",muteNotifications:"Mute Notifications",leaveRoom:"Leave Room",someoneTyping:"Someone is typing..."},DR={title:"Surveys",subtitle:"Manage and track all surveys and questionnaires",surveys:"Surveys",templates:"Templates",totalSurveys:"Total Surveys",createTemplate:"Create Template",createTemplateTitle:"Create New Survey Template",createTemplateDesc:"Create a custom survey template for your needs",templateName:"Template Name",templateNameAr:"Template Name (Arabic)",description:"Description",descriptionAr:"Description (Arabic)",category:"Category",selectCategory:"Select Category",customerSatisfaction:"Customer Satisfaction",productFeedback:"Product Feedback",serviceQuality:"Service Quality",general:"General",settings:"Settings",isActive:"Active",isDefault:"Default",searchPlaceholder:"Search surveys...",noSurveysFound:"No surveys found",noSurveysFoundDesc:"Try adjusting your search terms.",noSurveysYet:"No surveys have been created yet.",noTemplatesFound:"No templates found",noTemplatesFoundDesc:"Try adjusting your search terms.",noTemplatesYet:"No templates have been created yet.",survey:"Survey",clientName:"Client Name",clientCompany:"Client Company",contact:"Contact",noContact:"No contact",noCompany:"No company",noEmail:"No email",location:"Location",responses:"Responses",completed:"Completed",inProgress:"In Progress",pending:"Pending",active:"Active",inactive:"Inactive",default:"Default",noCategory:"No category",status:"Status",noDescription:"No description",fields:"Fields",noFields:"No fields defined",created:"Created",updated:"Updated",createdBy:"Created By",unknownCreator:"Unknown Creator",newSurvey:"New Survey",createNewSurvey:"Create New Survey",selectTemplate:"Select Template",fillSurveyDetails:"Fill Survey Details",changeTemplate:"Change Template",submitSurvey:"Submit Survey",locationWillBeCaptured:"Your location will be captured automatically",addField:"Add Field",fieldLabel:"Field Label",fieldType:"Field Type",text:"Text",textarea:"Textarea",email:"Email",select:"Select",multiselect:"Multiselect",radio:"Radio",checkbox:"Checkbox",options:"Options",optionsPlaceholder:"Enter options separated by spaces (e.g., option1 option2 option3)",isRequired:"Required"},AR={navigation:gR,buttons:vR,forms:yR,auth:xR,common:wR,dashboard:_R,leads:bR,projects:jR,tickets:SR,teams:NR,tasks:kR,landing:CR,users:ER,clients:PR,employeeDashboard:TR,settings:RR,chats:OR,surveys:DR},MR={home:"",dashboard:" ",projects:"",users:"",settings:"",leads:" ",tickets:"",tasks:"",teams:"",clients:"",chats:"",surveys:"",clientPortal:" ",partnerDashboard:"  ",empDashboard:"  "},IR={save:"",cancel:"",submit:"",delete:"",edit:"",close:"",add:"",login:" ",signup:" ",logout:" ",saving:" ..."},LR={name:"",email:" ",password:" ",confirmPassword:"  ",phone:"",message:""},FR={signIn:" ",signUp:" ",createAccount:" ",enterCredentials:"  ",signUpToGetStarted:" ",chooseAccountType:"     ",chooseAccountTypeSignUp:"     ",client:"",partner:"",partnerEmployee:" ",redirectingToGoogle:"    ...",orContinueWith:"  ",email:" ",password:" ",signingIn:"  ...",signInButton:" ",signUpButton:" ",dontHaveAccount:"  ",alreadyHaveAccount:"  ",clientPortal:" ",failedToSignIn:"  ",failedToSignInWithGoogle:"    "},$R={welcome:"",loading:" ...",error:"",success:"",search:"",filter:"",notifications:"",kanban:"",list:"",select:"",view:"",status:"",assignee:" ",all:"",pickDate:" ",clearFilters:" ",created:" ",actions:"",stage:""},UR={title:" ",subtitle:" !     .",totalProjects:" ",completed:"",inProgress:" ",activeProjects:" ",clients:"",totalClients:" ",teamMembers:" ",activeUsers:" ",leads:" ",totalLeads:"  ",surveys:"",totalSurveys:" ",recentProjects:" ",projectStatus:" ",noProjectsYet:"   ",retry:" ",completedStatus:"",inProgressStatus:" ",notStartedStatus:" "},BR={title:" ",subtitle:"    ",newLead:"  ",addLead:"  ",createLead:"   ",createLeadDesc:"      .",leadName:"  ",leadNamePlaceholder:"   ",description:"",descriptionPlaceholder:"   ",clientName:" ",clientNamePlaceholder:"  ",client:"",selectClient:"  ()",noClient:" ",unknown:" ",created:" ",updated:" ",createdBy:"  ",assignedTo:" ",assignToEmployee:" ",selectAssignee:"  ",lead:" ",deleteLead:"  ",deleteConfirmation:'      "{{name}}"',addStage:" ",stageNamePlaceholder:" ...",deleteStage:" ",deleteStageConfirmation:"    {{count}}  .           .      .",addNewLeadCard:"   ",noLeadsYet:"      ."},zR={title:"",subtitle:"   ",newProject:" ",createProject:"  ",createProjectDesc:"     .",projectName:" ",projectNamePlaceholder:"  ",description:"",descriptionPlaceholder:"  ",client:"",selectClient:" ",initialProgress:" ",addProject:" ",addNewProjectCard:"  ",progress:"",started:"",due:"",deleteProject:" ",deleteConfirmation:'      "{{name}}"',noProjectsYet:"     ."},WR={title:"",subtitle:"    .",newTicket:" ",createNewTicket:"  ",createTicketDesc:"     .",searchPlaceholder:"  ...",allTickets:" ",noTicketsFound:"  ",noTicketsFoundDesc:"   .",noTicketsYet:"     .",id:"",subject:"",subjectPlaceholder:"  ",description:"",descriptionPlaceholder:"   ",status:"",priority:"",priorityLow:"",priorityMedium:"",priorityHigh:"",priorityUrgent:"",ticketType:" ",typeRequest:"",typeFollowUp:"",typeIssue:"",typeInternalTask:" ",assignTo:" ",selectAssignee:"   ()",assignedTo:" ",createdDate:" ",actions:"",view:"",loading:"  ...",createTicket:" ",creatingTicket:" ...",createError:"   ",allStatuses:" ",allPriorities:" ",statusOpen:"",statusInProgress:" ",statusResolved:" ",statusClosed:"",ticketId:" ",createdBy:"  ",resolvedDate:" ",closedDate:" "},VR={title:"",subtitle:"   ",createTeam:" ",createTeamTitle:"  ",createTeamDesc:"     .     .",teamName:" ",teamNamePlaceholder:"  ",team_leader:" ",selectTeamLeader:"   ()",teamLeader:" ",searchPlaceholder:"  ...",members:"",memberCount:"{{count}} ",memberCount_plural:"{{count}} ",addMember:" ",created:" ",noTeamsFound:"  ",noTeamsYet:"   ",createFirstTeam:"  ",deleteTeam:" ",deleteConfirmation:'      "{{name}}"        .      .',moreMembers:"+{{count}}  ",noMembersYet:"   "},HR={title:"",subtitle:"      .",loading:" ...",description:"",error:"",deleteTask:" ",createTask:"  ",createTaskDesc:"     .",newTask:" ",addNewTask:"  ",addTask:" ",taskName:" ",taskNamePlaceholder:"  ",descriptionPlaceholder:"  ",dueDate:" ",selectUser:" ",selectStage:" ",selectStatus:" ",todo:"",inProgress:" ",done:"",stage:"",allTasks:" ",noTasksYet:"     ."},qR={brandName:"",badge:"  ",hero:{title:{line1:"",line2:" "},description:" CRM           .       .",cta:{primary:" ",secondary:" "}},stats:{users:"10 +",usersLabel:" ",projects:"50 +",projectsLabel:" ",uptime:"99.9%",uptimeLabel:" ",support:"24/7",supportLabel:""},features:{title:"   ",subtitle:"    ",projectManagement:{title:" ",description:"           ."},leadManagement:{title:"  ",description:"       CRM    ."},analytics:{title:" ",description:"        ."},communication:{title:" ",description:"         ."},taskManagement:{title:" ",description:"         ."},security:{title:" ",description:"       ."}},cta:{title:"  ",description:"           .",button:"  "},footer:{copyright:" 2025 {{brand}} CRM.   ."}},KR={title:"",subtitle:"   ",totalUsers:" ",addUser:" ",addNewUser:"  ",addUserDescription:"      .",fullName:" ",email:" ",password:" ",role:"",admin:"",manager:"",employee:"",team_leader:" ",client:"",employees:"",clients:"",addingUser:"  ...",addUserError:"   ",deleteUser:" ",deleteConfirmation:'      "{{name}}"',deleteError:"   ",updateRoleError:"    ",changeRole:" ",searchPlaceholder:"  ...",noUsersFound:"  ",noUsersFoundDesc:"   .",noUsersAvailable:"   ",joined:"",updated:" ",userDetails:" ",userDetailsDescription:"     ",phone:"",contact:"",company:"",userId:" ",authUserId:"  ",updateUserError:"   "},GR={title:"",subtitle:"   ",newClient:" ",loading:"  ...",noClientsFound:"  ",noClientsYet:"     ",active:"",totalProjects:" ",activeProjects:" ",completedProjects:" ",noCompany:" ",noEmail:"  ",projects:"",viewDetails:" ",clientDetails:" ",userId:" ",emailLabel:" ",contactLabel:"",companyLabel:"",createdLabel:" ",updatedLabel:" ",projectSummary:" "},YR={title:"   ",subtitle:"  {{name}}!     .",employeeInfo:" ",name:"",email:" ",role:"",memberSince:" ",myProjects:"",active:"",myTasks:"",completed:"",inProgress:" ",activeTasks:" ",completedTasks:"",finishedTasks:" ",leads:" ",totalLeads:"  ",surveys:"",totalSurveys:" ",recentTasks:" ",noDescription:" ",noProjectsAssigned:"    ",noTasksAssigned:"    "},QR={chatRooms:" ",createRoomTitle:"  ",createRoomDesc:"    ",roomName:" ",roomNamePlaceholder:"  ",private:"",privateRoom:" ",publicRoom:" ",project:"",projectIdPlaceholder:"  ()",createRoom:" ",selectRoom:"   ",members:"",typeMessage:" ...",you:"",unknownUser:"  ",justNow:"",online:"",someoneTyping:"  ...",searchConversations:"  ...",searchRooms:"  ..."},JR={changePassword:"  ",changePasswordDescription:"    .      6   .",newPassword:"  ",newPasswordPlaceholder:"   ",newPasswordRequired:"   ",confirmPassword:"  ",confirmPasswordPlaceholder:"    ",passwordsDoNotMatch:"   ",passwordTooShort:"     6   ",changingPassword:"   ...",passwordChangedSuccessfully:"    !",passwordChangeFailed:"    "},XR={title:"",subtitle:"    ",surveys:"",templates:"",totalSurveys:" ",createTemplate:" ",createTemplateTitle:"   ",createTemplateDesc:"    ",templateName:" ",templateNameAr:"  ",description:"",descriptionAr:" ",category:"",selectCategory:" ",customerSatisfaction:" ",productFeedback:" ",serviceQuality:" ",general:"",settings:"",isActive:"",isDefault:"",searchPlaceholder:"  ...",noSurveysFound:"  ",noSurveysFoundDesc:"   .",noSurveysYet:"     .",noTemplatesFound:"  ",noTemplatesFoundDesc:"   .",noTemplatesYet:"     .",survey:"",clientName:" ",clientCompany:" ",contact:"",noContact:" ",noCompany:" ",noEmail:"  ",location:"",responses:"",completed:"",inProgress:" ",pending:" ",active:"",inactive:" ",default:"",noCategory:" ",status:"",noDescription:" ",fields:"",noFields:"   ",created:" ",updated:" ",createdBy:"  ",unknownCreator:"  ",newSurvey:" ",createNewSurvey:"  ",selectTemplate:" ",fillSurveyDetails:"  ",changeTemplate:" ",submitSurvey:" ",locationWillBeCaptured:"    ",addField:" ",fieldLabel:" ",fieldType:" ",text:"",textarea:" ",email:" ",select:" ",multiselect:"  ",radio:" ",checkbox:" ",options:"",optionsPlaceholder:"    (: 1 2 3)",isRequired:""},ZR={navigation:MR,buttons:IR,forms:LR,auth:FR,common:$R,dashboard:UR,leads:BR,projects:zR,tickets:WR,teams:VR,tasks:HR,landing:qR,users:KR,clients:GR,employeeDashboard:YR,chats:QR,settings:JR,surveys:XR},eO={en:{translation:AR},ar:{translation:ZR}};dt.use(tR).init({resources:eO,lng:"ar",fallbackLng:"en",interpolation:{escapeValue:!1}});const q=(t,e)=>{if(dt.language==="ar"){const s=`${e}_ar`;if(t[s]&&t[s].trim())return t[s]}if(t[e]&&t[e].trim())return t[e];const n=`${e}_ar`;return t[n]&&t[n].trim()?t[n]:""},Wr=(t,e)=>{const r=dt.language,n={...t};return Object.entries(e).forEach(([s,a])=>{r==="ar"?(n[`${a}_ar`]=t[s],n[a]=t[s]):(n[a]=t[s],n[`${a}_ar`]=t[s])}),n},sn=()=>dt.dir()==="rtl";/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zl(){return zl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zl.apply(this,arguments)}var Rs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Rs||(Rs={}));const Tx="popstate";function tO(t){t===void 0&&(t={});function e(s,a){let{pathname:i="/",search:l="",hash:c=""}=ao(s.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),zm("",{pathname:i,search:l,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){let i=s.document.querySelector("base"),l="";if(i&&i.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof a=="string"?a:sd(a))}function n(s,a){bg(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return nO(e,r,n,t)}function xt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rO(){return Math.random().toString(36).substr(2,8)}function Rx(t,e){return{usr:t.state,key:t.key,idx:e}}function zm(t,e,r,n){return r===void 0&&(r=null),zl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ao(e):e,{state:r,key:e&&e.key||n||rO()})}function sd(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ao(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function nO(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,i=s.history,l=Rs.Pop,c=null,u=d();u==null&&(u=0,i.replaceState(zl({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function h(){l=Rs.Pop;let w=d(),x=w==null?null:w-u;u=w,c&&c({action:l,location:g.location,delta:x})}function m(w,x){l=Rs.Push;let y=zm(g.location,w,x);r&&r(y,w),u=d()+1;let _=Rx(y,u),b=g.createHref(y);try{i.pushState(_,"",b)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(b)}a&&c&&c({action:l,location:g.location,delta:1})}function p(w,x){l=Rs.Replace;let y=zm(g.location,w,x);r&&r(y,w),u=d();let _=Rx(y,u),b=g.createHref(y);i.replaceState(_,"",b),a&&c&&c({action:l,location:g.location,delta:0})}function v(w){let x=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof w=="string"?w:sd(w);return y=y.replace(/ $/,"%20"),xt(x,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,x)}let g={get action(){return l},get location(){return t(s,i)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Tx,h),c=w,()=>{s.removeEventListener(Tx,h),c=null}},createHref(w){return e(s,w)},createURL:v,encodeLocation(w){let x=v(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:p,go(w){return i.go(w)}};return g}var Ox;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ox||(Ox={}));function sO(t,e,r){return r===void 0&&(r="/"),aO(t,e,r,!1)}function aO(t,e,r,n){let s=typeof e=="string"?ao(e):e,a=jg(s.pathname||"/",r);if(a==null)return null;let i=rj(t);oO(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let u=vO(a);l=pO(i[c],u,n)}return l}function rj(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(a,i,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};c.relativePath.startsWith("/")&&(xt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Ws([n,c.relativePath]),d=r.concat(c);a.children&&a.children.length>0&&(xt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),rj(a.children,e,d,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:fO(u,a.index),routesMeta:d})};return t.forEach((a,i)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,i);else for(let c of nj(a.path))s(a,i,c)}),e}function nj(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let i=nj(n.join("/")),l=[];return l.push(...i.map(c=>c===""?a:[a,c].join("/"))),s&&l.push(...i),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function oO(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:mO(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const iO=/^:[\w-]+$/,lO=3,cO=2,uO=1,dO=10,hO=-2,Dx=t=>t==="*";function fO(t,e){let r=t.split("/"),n=r.length;return r.some(Dx)&&(n+=hO),e&&(n+=cO),r.filter(s=>!Dx(s)).reduce((s,a)=>s+(iO.test(a)?lO:a===""?uO:dO),n)}function mO(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function pO(t,e,r){let{routesMeta:n}=t,s={},a="/",i=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=a==="/"?e:e.slice(a.length)||"/",h=Ax({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=Ax({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),i.push({params:s,pathname:Ws([a,h.pathname]),pathnameBase:_O(Ws([a,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(a=Ws([a,h.pathnameBase]))}return i}function Ax(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=gO(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:m,isOptional:p}=d;if(m==="*"){let g=l[h]||"";i=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const v=l[h];return p&&!v?u[m]=void 0:u[m]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:i,pattern:t}}function gO(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),bg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function vO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function jg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function yO(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?ao(t):t;return{pathname:r?r.startsWith("/")?r:xO(r,e):e,search:bO(n),hash:jO(s)}}function xO(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function nf(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function wO(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Sg(t,e){let r=wO(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Ng(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=ao(t):(s=zl({},t),xt(!s.pathname||!s.pathname.includes("?"),nf("?","pathname","search",s)),xt(!s.pathname||!s.pathname.includes("#"),nf("#","pathname","hash",s)),xt(!s.search||!s.search.includes("#"),nf("#","search","hash",s)));let a=t===""||s.pathname==="",i=a?"/":s.pathname,l;if(i==null)l=r;else{let h=e.length-1;if(!n&&i.startsWith("..")){let m=i.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}l=h>=0?e[h]:"/"}let c=yO(s,l),u=i&&i!=="/"&&i.endsWith("/"),d=(a||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Ws=t=>t.join("/").replace(/\/\/+/g,"/"),_O=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,jO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function SO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const sj=["post","put","patch","delete"];new Set(sj);const NO=["get",...sj];new Set(NO);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wl(){return Wl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wl.apply(this,arguments)}const kg=f.createContext(null),kO=f.createContext(null),na=f.createContext(null),qd=f.createContext(null),as=f.createContext({outlet:null,matches:[],isDataRoute:!1}),aj=f.createContext(null);function CO(t,e){let{relative:r}=e===void 0?{}:e;Di()||xt(!1);let{basename:n,navigator:s}=f.useContext(na),{hash:a,pathname:i,search:l}=ij(t,{relative:r}),c=i;return n!=="/"&&(c=i==="/"?n:Ws([n,i])),s.createHref({pathname:c,search:l,hash:a})}function Di(){return f.useContext(qd)!=null}function os(){return Di()||xt(!1),f.useContext(qd).location}function oj(t){f.useContext(na).static||f.useLayoutEffect(t)}function fn(){let{isDataRoute:t}=f.useContext(as);return t?BO():EO()}function EO(){Di()||xt(!1);let t=f.useContext(kg),{basename:e,future:r,navigator:n}=f.useContext(na),{matches:s}=f.useContext(as),{pathname:a}=os(),i=JSON.stringify(Sg(s,r.v7_relativeSplatPath)),l=f.useRef(!1);return oj(()=>{l.current=!0}),f.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=Ng(u,JSON.parse(i),a,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ws([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,a,t])}function PO(){let{matches:t}=f.useContext(as),e=t[t.length-1];return e?e.params:{}}function ij(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=f.useContext(na),{matches:s}=f.useContext(as),{pathname:a}=os(),i=JSON.stringify(Sg(s,n.v7_relativeSplatPath));return f.useMemo(()=>Ng(t,JSON.parse(i),a,r==="path"),[t,i,a,r])}function TO(t,e){return RO(t,e)}function RO(t,e,r,n){Di()||xt(!1);let{navigator:s}=f.useContext(na),{matches:a}=f.useContext(as),i=a[a.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let u=os(),d;if(e){var h;let w=typeof e=="string"?ao(e):e;c==="/"||(h=w.pathname)!=null&&h.startsWith(c)||xt(!1),d=w}else d=u;let m=d.pathname||"/",p=m;if(c!=="/"){let w=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=sO(t,{pathname:p}),g=IO(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Ws([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Ws([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),a,r,n);return e&&g?f.createElement(qd.Provider,{value:{location:Wl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Rs.Pop}},g):g}function OO(){let t=UO(),e=SO(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},e),r?f.createElement("pre",{style:s},r):null,null)}const DO=f.createElement(OO,null);class AO extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?f.createElement(as.Provider,{value:this.props.routeContext},f.createElement(aj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function MO(t){let{routeContext:e,match:r,children:n}=t,s=f.useContext(kg);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),f.createElement(as.Provider,{value:e},n)}function IO(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var a;if(!r)return null;if(r.errors)t=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=i.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||xt(!1),i=i.slice(0,Math.min(i.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:p}=r,v=h.route.loader&&m[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||v){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,h,m)=>{let p,v=!1,g=null,w=null;r&&(p=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||DO,c&&(u<0&&m===0?(v=!0,w=null):u===m&&(v=!0,w=h.route.hydrateFallbackElement||null)));let x=e.concat(i.slice(0,m+1)),y=()=>{let _;return p?_=g:v?_=w:h.route.Component?_=f.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=d,f.createElement(MO,{match:h,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:_})};return r&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?f.createElement(AO,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:y(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):y()},null)}var lj=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(lj||{}),ad=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ad||{});function LO(t){let e=f.useContext(kg);return e||xt(!1),e}function FO(t){let e=f.useContext(kO);return e||xt(!1),e}function $O(t){let e=f.useContext(as);return e||xt(!1),e}function cj(t){let e=$O(),r=e.matches[e.matches.length-1];return r.route.id||xt(!1),r.route.id}function UO(){var t;let e=f.useContext(aj),r=FO(ad.UseRouteError),n=cj(ad.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function BO(){let{router:t}=LO(lj.UseNavigateStable),e=cj(ad.UseNavigateStable),r=f.useRef(!1);return oj(()=>{r.current=!0}),f.useCallback(function(s,a){a===void 0&&(a={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Wl({fromRouteId:e},a)))},[t,e])}function zO(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Mx(t){let{to:e,replace:r,state:n,relative:s}=t;Di()||xt(!1);let{future:a,static:i}=f.useContext(na),{matches:l}=f.useContext(as),{pathname:c}=os(),u=fn(),d=Ng(e,Sg(l,a.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return f.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:s}),[u,h,s,r,n]),null}function vt(t){xt(!1)}function WO(t){let{basename:e="/",children:r=null,location:n,navigationType:s=Rs.Pop,navigator:a,static:i=!1,future:l}=t;Di()&&xt(!1);let c=e.replace(/^\/*/,"/"),u=f.useMemo(()=>({basename:c,navigator:a,static:i,future:Wl({v7_relativeSplatPath:!1},l)}),[c,l,a,i]);typeof n=="string"&&(n=ao(n));let{pathname:d="/",search:h="",hash:m="",state:p=null,key:v="default"}=n,g=f.useMemo(()=>{let w=jg(d,c);return w==null?null:{location:{pathname:w,search:h,hash:m,state:p,key:v},navigationType:s}},[c,d,h,m,p,v,s]);return g==null?null:f.createElement(na.Provider,{value:u},f.createElement(qd.Provider,{children:r,value:g}))}function VO(t){let{children:e,location:r}=t;return TO(Wm(e),r)}new Promise(()=>{});function Wm(t,e){e===void 0&&(e=[]);let r=[];return f.Children.forEach(t,(n,s)=>{if(!f.isValidElement(n))return;let a=[...e,s];if(n.type===f.Fragment){r.push.apply(r,Wm(n.props.children,a));return}n.type!==vt&&xt(!1),!n.props.index||!n.props.children||xt(!1);let i={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Wm(n.props.children,a)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vm(){return Vm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vm.apply(this,arguments)}function HO(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,a;for(a=0;a<n.length;a++)s=n[a],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function qO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function KO(t,e){return t.button===0&&(!e||e==="_self")&&!qO(t)}const GO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],YO="6";try{window.__reactRouterVersion=YO}catch{}const QO="startTransition",Ix=Cp[QO];function JO(t){let{basename:e,children:r,future:n,window:s}=t,a=f.useRef();a.current==null&&(a.current=tO({window:s,v5Compat:!0}));let i=a.current,[l,c]=f.useState({action:i.action,location:i.location}),{v7_startTransition:u}=n||{},d=f.useCallback(h=>{u&&Ix?Ix(()=>c(h)):c(h)},[c,u]);return f.useLayoutEffect(()=>i.listen(d),[i,d]),f.useEffect(()=>zO(n),[n]),f.createElement(WO,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:i,future:n})}const XO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ZO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hm=f.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:a,replace:i,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,m=HO(e,GO),{basename:p}=f.useContext(na),v,g=!1;if(typeof u=="string"&&ZO.test(u)&&(v=u,XO))try{let _=new URL(window.location.href),b=u.startsWith("//")?new URL(_.protocol+u):new URL(u),j=jg(b.pathname,p);b.origin===_.origin&&j!=null?u=j+b.search+b.hash:g=!0}catch{}let w=CO(u,{relative:s}),x=eD(u,{replace:i,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function y(_){n&&n(_),_.defaultPrevented||x(_)}return f.createElement("a",Vm({},m,{href:v||w,onClick:g||a?n:y,ref:r,target:c}))});var Lx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Lx||(Lx={}));var Fx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Fx||(Fx={}));function eD(t,e){let{target:r,replace:n,state:s,preventScrollReset:a,relative:i,viewTransition:l}=e===void 0?{}:e,c=fn(),u=os(),d=ij(t,{relative:i});return f.useCallback(h=>{if(KO(h,r)){h.preventDefault();let m=n!==void 0?n:sd(u)===sd(d);c(t,{replace:m,state:s,preventScrollReset:a,relative:i,viewTransition:l})}},[u,c,d,n,s,r,t,a,i,l])}var qm=function(t,e){return qm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},qm(t,e)};function uj(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");qm(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Mr=function(){return Mr=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Mr.apply(this,arguments)};function sa(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function dj(t,e,r,n){var s=arguments.length,a=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(a=(s<3?i(a):s>3?i(e,r,a):i(e,r))||a);return s>3&&a&&Object.defineProperty(e,r,a),a}function hj(t,e){return function(r,n){e(r,n,t)}}function fj(t,e,r,n,s,a){function i(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,d=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),h,m=!1,p=r.length-1;p>=0;p--){var v={};for(var g in n)v[g]=g==="access"?{}:n[g];for(var g in n.access)v.access[g]=n.access[g];v.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(i(x||null))};var w=(0,r[p])(l==="accessor"?{get:d.get,set:d.set}:d[c],v);if(l==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=i(w.get))&&(d.get=h),(h=i(w.set))&&(d.set=h),(h=i(w.init))&&s.unshift(h)}else(h=i(w))&&(l==="field"?s.unshift(h):d[c]=h)}u&&Object.defineProperty(u,n.name,d),m=!0}function mj(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0}function pj(t){return typeof t=="symbol"?t:"".concat(t)}function gj(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function vj(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function fe(t,e,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(h){i(h)}}function c(d){try{u(n.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})}function yj(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,s,a,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(a=u[0]&2?s.return:u[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,u[1])).done)return a;switch(s=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],s=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Kd=Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function xj(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Kd(e,t,r)}function od(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Cg(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,a=[],i;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)a.push(s.value)}catch(l){i={error:l}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return a}function wj(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Cg(arguments[e]));return t}function _j(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var a=arguments[e],i=0,l=a.length;i<l;i++,s++)n[s]=a[i];return n}function Eg(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,a;n<s;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function _i(t){return this instanceof _i?(this.v=t,this):new _i(t)}function bj(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",i),s[Symbol.asyncIterator]=function(){return this},s;function i(p){return function(v){return Promise.resolve(v).then(p,h)}}function l(p,v){n[p]&&(s[p]=function(g){return new Promise(function(w,x){a.push([p,g,w,x])>1||c(p,g)})},v&&(s[p]=v(s[p])))}function c(p,v){try{u(n[p](v))}catch(g){m(a[0][3],g)}}function u(p){p.value instanceof _i?Promise.resolve(p.value.v).then(d,h):m(a[0][2],p)}function d(p){c("next",p)}function h(p){c("throw",p)}function m(p,v){p(v),a.shift(),a.length&&c(a[0][0],a[0][1])}}function jj(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,a){e[s]=t[s]?function(i){return(r=!r)?{value:_i(t[s](i)),done:!1}:a?a(i):i}:a}}function Sj(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof od=="function"?od(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=t[a]&&function(i){return new Promise(function(l,c){i=t[a](i),s(l,c,i.done,i.value)})}}function s(a,i,l,c){Promise.resolve(c).then(function(u){a({value:u,done:l})},i)}}function Nj(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var tD=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Km=function(t){return Km=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Km(t)};function kj(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Km(t),n=0;n<r.length;n++)r[n]!=="default"&&Kd(e,t,r[n]);return tD(e,t),e}function Cj(t){return t&&t.__esModule?t:{default:t}}function Ej(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function Pj(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function Tj(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Rj(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var rD=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function Oj(t){function e(a){t.error=t.hasError?new rD(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(a).then(s,function(i){return e(i),s()})}else n|=1}catch(i){e(i)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function Dj(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,a,i){return n?e?".jsx":".js":s&&(!a||!i)?r:s+a+"."+i.toLowerCase()+"js"}):t}const nD={__extends:uj,__assign:Mr,__rest:sa,__decorate:dj,__param:hj,__esDecorate:fj,__runInitializers:mj,__propKey:pj,__setFunctionName:gj,__metadata:vj,__awaiter:fe,__generator:yj,__createBinding:Kd,__exportStar:xj,__values:od,__read:Cg,__spread:wj,__spreadArrays:_j,__spreadArray:Eg,__await:_i,__asyncGenerator:bj,__asyncDelegator:jj,__asyncValues:Sj,__makeTemplateObject:Nj,__importStar:kj,__importDefault:Cj,__classPrivateFieldGet:Ej,__classPrivateFieldSet:Pj,__classPrivateFieldIn:Tj,__addDisposableResource:Rj,__disposeResources:Oj,__rewriteRelativeImportExtension:Dj},sD=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Rj,get __assign(){return Mr},__asyncDelegator:jj,__asyncGenerator:bj,__asyncValues:Sj,__await:_i,__awaiter:fe,__classPrivateFieldGet:Ej,__classPrivateFieldIn:Tj,__classPrivateFieldSet:Pj,__createBinding:Kd,__decorate:dj,__disposeResources:Oj,__esDecorate:fj,__exportStar:xj,__extends:uj,__generator:yj,__importDefault:Cj,__importStar:kj,__makeTemplateObject:Nj,__metadata:vj,__param:hj,__propKey:pj,__read:Cg,__rest:sa,__rewriteRelativeImportExtension:Dj,__runInitializers:mj,__setFunctionName:gj,__spread:wj,__spreadArray:Eg,__spreadArrays:_j,__values:od,default:nD},Symbol.toStringTag,{value:"Module"})),aD="modulepreload",oD=function(t){return"/"+t},$x={},Ai=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=oD(c),c in $x)return;$x[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":aD,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,p)=>{h.addEventListener("load",m),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},iD=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ai(async()=>{const{default:n}=await Promise.resolve().then(()=>oo);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class Pg extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class Ux extends Pg{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Bx extends Pg{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class zx extends Pg{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Gm;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Gm||(Gm={}));class lD{constructor(e,{headers:r={},customFetch:n,region:s=Gm.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=iD(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return fe(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:a,method:i,body:l,signal:c}=n;let u={},{region:d}=n;d||(d=this.region);const h=new URL(`${this.url}/${r}`);d&&d!=="any"&&(u["x-region"]=d,h.searchParams.set("forceFunctionRegion",d));let m;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",m=l):typeof l=="string"?(u["Content-Type"]="text/plain",m=l):typeof FormData<"u"&&l instanceof FormData?m=l:(u["Content-Type"]="application/json",m=JSON.stringify(l)):m=l;const p=yield this.fetch(h.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),a),body:m,signal:c}).catch(x=>{throw x.name==="AbortError"?x:new Ux(x)}),v=p.headers.get("x-relay-error");if(v&&v==="true")throw new Bx(p);if(!p.ok)throw new zx(p);let g=((s=p.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),w;return g==="application/json"?w=yield p.json():g==="application/octet-stream"||g==="application/pdf"?w=yield p.blob():g==="text/event-stream"?w=p:g==="multipart/form-data"?w=yield p.formData():w=yield p.text(),{data:w,error:null,response:p}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new Ux(a)}:{data:null,error:a,response:a instanceof zx||a instanceof Bx?a.context:void 0}}})}}var er={};const Mi=_0(sD);var Xc={},Zc={},eu={},tu={},ru={},cD=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},bi=cD();const uD=bi.fetch,Aj=bi.fetch.bind(bi),Mj=bi.Headers,dD=bi.Request,hD=bi.Response,oo=Object.freeze(Object.defineProperty({__proto__:null,Headers:Mj,Request:dD,Response:hD,default:Aj,fetch:uD},Symbol.toStringTag,{value:"Module"})),fD=_0(oo);var nu={},Wx;function Ij(){if(Wx)return nu;Wx=1,Object.defineProperty(nu,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return nu.default=t,nu}var Vx;function Lj(){if(Vx)return ru;Vx=1,Object.defineProperty(ru,"__esModule",{value:!0});const t=Mi,e=t.__importDefault(fD),r=t.__importDefault(Ij());class n{constructor(a){var i,l;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(i=a.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=a.signal,this.isMaybeSingle=(l=a.isMaybeSingle)!==null&&l!==void 0?l:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,i){return this.headers=new Headers(this.headers),this.headers.set(a,i),this}then(a,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var d,h,m,p;let v=null,g=null,w=null,x=u.status,y=u.statusText;if(u.ok){if(this.method!=="HEAD"){const P=await u.text();P===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?g=P:g=JSON.parse(P))}const b=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),j=(m=u.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");b&&j&&j.length>1&&(w=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(v={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,w=null,x=406,y="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const b=await u.text();try{v=JSON.parse(b),Array.isArray(v)&&u.status===404&&(g=[],v=null,x=200,y="OK")}catch{u.status===404&&b===""?(x=204,y="No Content"):v={message:b}}if(v&&this.isMaybeSingle&&(!((p=v==null?void 0:v.details)===null||p===void 0)&&p.includes("0 rows"))&&(v=null,x=200,y="OK"),v&&this.shouldThrowOnError)throw new r.default(v)}return{error:v,data:g,count:w,status:x,statusText:y}});return this.shouldThrowOnError||(c=c.catch(u=>{var d,h,m;return{error:{message:`${(d=u==null?void 0:u.name)!==null&&d!==void 0?d:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(h=u==null?void 0:u.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(m=u==null?void 0:u.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),c.then(a,i)}returns(){return this}overrideTypes(){return this}}return ru.default=n,ru}var Hx;function Fj(){if(Hx)return tu;Hx=1,Object.defineProperty(tu,"__esModule",{value:!0});const e=Mi.__importDefault(Lj());class r extends e.default{select(s){let a=!1;const i=(s??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:a=!0,nullsFirst:i,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${s}.${a?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:a,referencedTable:i=a}={}){const l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,a,{foreignTable:i,referencedTable:l=i}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(u,`${a-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:a=!1,settings:i=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var d;const h=[s?"analyze":null,a?"verbose":null,i?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),m=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${h};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return tu.default=r,tu}var qx;function Tg(){if(qx)return eu;qx=1,Object.defineProperty(eu,"__esModule",{value:!0});const e=Mi.__importDefault(Fj()),r=new RegExp("[,()]");class n extends e.default{eq(a,i){return this.url.searchParams.append(a,`eq.${i}`),this}neq(a,i){return this.url.searchParams.append(a,`neq.${i}`),this}gt(a,i){return this.url.searchParams.append(a,`gt.${i}`),this}gte(a,i){return this.url.searchParams.append(a,`gte.${i}`),this}lt(a,i){return this.url.searchParams.append(a,`lt.${i}`),this}lte(a,i){return this.url.searchParams.append(a,`lte.${i}`),this}like(a,i){return this.url.searchParams.append(a,`like.${i}`),this}likeAllOf(a,i){return this.url.searchParams.append(a,`like(all).{${i.join(",")}}`),this}likeAnyOf(a,i){return this.url.searchParams.append(a,`like(any).{${i.join(",")}}`),this}ilike(a,i){return this.url.searchParams.append(a,`ilike.${i}`),this}ilikeAllOf(a,i){return this.url.searchParams.append(a,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(a,i){return this.url.searchParams.append(a,`ilike(any).{${i.join(",")}}`),this}is(a,i){return this.url.searchParams.append(a,`is.${i}`),this}in(a,i){const l=Array.from(new Set(i)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(a,`in.(${l})`),this}contains(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cs.{${i.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(i)}`),this}containedBy(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cd.{${i.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(i)}`),this}rangeGt(a,i){return this.url.searchParams.append(a,`sr.${i}`),this}rangeGte(a,i){return this.url.searchParams.append(a,`nxl.${i}`),this}rangeLt(a,i){return this.url.searchParams.append(a,`sl.${i}`),this}rangeLte(a,i){return this.url.searchParams.append(a,`nxr.${i}`),this}rangeAdjacent(a,i){return this.url.searchParams.append(a,`adj.${i}`),this}overlaps(a,i){return typeof i=="string"?this.url.searchParams.append(a,`ov.${i}`):this.url.searchParams.append(a,`ov.{${i.join(",")}}`),this}textSearch(a,i,{config:l,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const d=l===void 0?"":`(${l})`;return this.url.searchParams.append(a,`${u}fts${d}.${i}`),this}match(a){return Object.entries(a).forEach(([i,l])=>{this.url.searchParams.append(i,`eq.${l}`)}),this}not(a,i,l){return this.url.searchParams.append(a,`not.${i}.${l}`),this}or(a,{foreignTable:i,referencedTable:l=i}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${a})`),this}filter(a,i,l){return this.url.searchParams.append(a,`${i}.${l}`),this}}return eu.default=n,eu}var Kx;function $j(){if(Kx)return Zc;Kx=1,Object.defineProperty(Zc,"__esModule",{value:!0});const e=Mi.__importDefault(Tg());class r{constructor(s,{headers:a={},schema:i,fetch:l}){this.url=s,this.headers=new Headers(a),this.schema=i,this.fetch=l}select(s,a){const{head:i=!1,count:l}=a??{},c=i?"HEAD":"GET";let u=!1;const d=(s??"*").split("").map(h=>/\s/.test(h)&&!u?"":(h==='"'&&(u=!u),h)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:a,defaultToNull:i=!0}={}){var l;const c="POST";if(a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const u=s.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:a,ignoreDuplicates:i=!1,count:l,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((m,p)=>m.concat(Object.keys(p)),[]);if(h.length>0){const m=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(s,{count:a}={}){var i;const l="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:s}={}){var a;const i="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return Zc.default=r,Zc}var Gx;function mD(){if(Gx)return Xc;Gx=1,Object.defineProperty(Xc,"__esModule",{value:!0});const t=Mi,e=t.__importDefault($j()),r=t.__importDefault(Tg());class n{constructor(a,{headers:i={},schema:l,fetch:c}={}){this.url=a,this.headers=new Headers(i),this.schemaName=l,this.fetch=c}from(a){const i=new URL(`${this.url}/${a}`);return new e.default(i,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new n(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,i={},{head:l=!1,get:c=!1,count:u}={}){var d;let h;const m=new URL(`${this.url}/rpc/${a}`);let p;l||c?(h=l?"HEAD":"GET",Object.entries(i).filter(([g,w])=>w!==void 0).map(([g,w])=>[g,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([g,w])=>{m.searchParams.append(g,w)})):(h="POST",p=i);const v=new Headers(this.headers);return u&&v.set("Prefer",`count=${u}`),new r.default({method:h,url:m,headers:v,schema:this.schemaName,body:p,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Xc.default=n,Xc}Object.defineProperty(er,"__esModule",{value:!0});var Uj=er.PostgrestError=Qj=er.PostgrestBuilder=Gj=er.PostgrestTransformBuilder=qj=er.PostgrestFilterBuilder=Vj=er.PostgrestQueryBuilder=zj=er.PostgrestClient=void 0;const Ii=Mi,Bj=Ii.__importDefault(mD());var zj=er.PostgrestClient=Bj.default;const Wj=Ii.__importDefault($j());var Vj=er.PostgrestQueryBuilder=Wj.default;const Hj=Ii.__importDefault(Tg());var qj=er.PostgrestFilterBuilder=Hj.default;const Kj=Ii.__importDefault(Fj());var Gj=er.PostgrestTransformBuilder=Kj.default;const Yj=Ii.__importDefault(Lj());var Qj=er.PostgrestBuilder=Yj.default;const Jj=Ii.__importDefault(Ij());Uj=er.PostgrestError=Jj.default;var Xj=er.default={PostgrestClient:Bj.default,PostgrestQueryBuilder:Wj.default,PostgrestFilterBuilder:Hj.default,PostgrestTransformBuilder:Kj.default,PostgrestBuilder:Yj.default,PostgrestError:Jj.default};const pD=x0({__proto__:null,get PostgrestBuilder(){return Qj},get PostgrestClient(){return zj},get PostgrestError(){return Uj},get PostgrestFilterBuilder(){return qj},get PostgrestQueryBuilder(){return Vj},get PostgrestTransformBuilder(){return Gj},default:Xj},[er]),{PostgrestClient:gD,PostgrestQueryBuilder:cz,PostgrestFilterBuilder:uz,PostgrestTransformBuilder:dz,PostgrestBuilder:hz,PostgrestError:fz}=Xj||pD;class vD{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const yD="2.78.0",xD=`realtime-js/${yD}`,wD="1.0.0",Ym=1e4,_D=1e3,bD=100;var yl;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(yl||(yl={}));var Nt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Nt||(Nt={}));var en;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(en||(en={}));var Qm;(function(t){t.websocket="websocket"})(Qm||(Qm={}));var ja;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ja||(ja={}));class jD{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),a=r.getUint8(2);let i=this.HEADER_LENGTH+2;const l=n.decode(e.slice(i,i+s));i=i+s;const c=n.decode(e.slice(i,i+a));i=i+a;const u=JSON.parse(n.decode(e.slice(i,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Zj{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ze;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ze||(Ze={}));const Yx=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((a,i)=>(a[i]=SD(i,t,e,s),a),{}):{}},SD=(t,e,r,n)=>{const s=e.find(l=>l.name===t),a=s==null?void 0:s.type,i=r[t];return a&&!n.includes(a)?eS(a,i):Jm(i)},eS=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return ED(e,r)}switch(t){case Ze.bool:return ND(e);case Ze.float4:case Ze.float8:case Ze.int2:case Ze.int4:case Ze.int8:case Ze.numeric:case Ze.oid:return kD(e);case Ze.json:case Ze.jsonb:return CD(e);case Ze.timestamp:return PD(e);case Ze.abstime:case Ze.date:case Ze.daterange:case Ze.int4range:case Ze.int8range:case Ze.money:case Ze.reltime:case Ze.text:case Ze.time:case Ze.timestamptz:case Ze.timetz:case Ze.tsrange:case Ze.tstzrange:return Jm(e);default:return Jm(e)}},Jm=t=>t,ND=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},kD=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},CD=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},ED=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let a;const i=t.slice(1,r);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(l=>eS(e,l))}return t},PD=t=>typeof t=="string"?t.replace(" ","T"):t,tS=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class sf{constructor(e,r,n={},s=Ym){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Qx;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Qx||(Qx={}));class xl{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=xl.syncState(this.state,s,a,i),this.pendingDiffs.forEach(c=>{this.state=xl.syncDiff(this.state,c,a,i)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=xl.syncDiff(this.state,s,a,i),l())}),this.onJoin((s,a,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:i})}),this.onLeave((s,a,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const a=this.cloneDeep(e),i=this.transformState(r),l={},c={};return this.map(a,(u,d)=>{i[u]||(c[u]=d)}),this.map(i,(u,d)=>{const h=a[u];if(h){const m=d.map(w=>w.presence_ref),p=h.map(w=>w.presence_ref),v=d.filter(w=>p.indexOf(w.presence_ref)<0),g=h.filter(w=>m.indexOf(w.presence_ref)<0);v.length>0&&(l[u]=v),g.length>0&&(c[u]=g)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},n,s)}static syncDiff(e,r,n,s){const{joins:a,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(p=>p.presence_ref),m=d.filter(p=>h.indexOf(p.presence_ref)<0);e[l].unshift(...m)}n(l,d,c)}),this.map(i,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,s(l,u,c),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Jx;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Jx||(Jx={}));var wl;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(wl||(wl={}));var Wn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Wn||(Wn={}));class Rg{constructor(e,r={config:{}},n){var s,a;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Nt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new sf(this,en.join,this.params,this.timeout),this.rejoinTimer=new Zj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Nt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Nt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Nt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(en.reply,{},(i,l)=>{this._trigger(this._replyEventName(l),i)}),this.presence=new xl(this),this.broadcastEndpointURL=tS(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Nt.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[wl.PRESENCE]&&this.bindings[wl.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,h={},m={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(Wn.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(Wn.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var v;if(this.socket.setAuth(),p===void 0){e==null||e(Wn.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,w=(v=g==null?void 0:g.length)!==null&&v!==void 0?v:0,x=[];for(let y=0;y<w;y++){const _=g[y],{filter:{event:b,schema:j,table:P,filter:S}}=_,k=p&&p[y];if(k&&k.event===b&&k.schema===j&&k.table===P&&k.filter===S)x.push(Object.assign(Object.assign({},_),{id:k.id}));else{this.unsubscribe(),this.state=Nt.errored,e==null||e(Wn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(Wn.SUBSCRIBED);return}}).receive("error",p=>{this.state=Nt.errored,e==null||e(Wn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Wn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Nt.joined&&e===wl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var s;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const i={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,i,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:i}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,l,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Nt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(en.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new sf(this,en.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Nt.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),i}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new sf(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>bD){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,a;const i=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=en;if(n&&[l,c,u,d].indexOf(i)>=0&&n!==this._joinRef())return;let m=this._onMessage(i,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var v,g,w;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(g=p.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===i}).map(p=>p.callback(m,n)):(a=this.bindings[i])===null||a===void 0||a.filter(p=>{var v,g,w,x,y,_;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const b=p.id,j=(v=p.filter)===null||v===void 0?void 0:v.event;return b&&((g=r.ids)===null||g===void 0?void 0:g.includes(b))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const b=(y=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return b==="*"||b===((_=r==null?void 0:r.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:g,table:w,commit_timestamp:x,type:y,errors:_}=v;m=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:x,eventType:y,new:{},old:{},errors:_}),this._getPayloadRecords(v))}p.callback(m,n)})}_isClosed(){return this.state===Nt.closed}_isJoined(){return this.state===Nt.joined}_isJoining(){return this.state===Nt.joining}_isLeaving(){return this.state===Nt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Rg.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(en.close,{},e)}_onError(e){this._on(en.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Nt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Yx(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Yx(e.columns,e.old_record)),r}}const af=()=>{},su={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},TD=[1e3,2e3,5e3,1e4],RD=1e4,OD=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class DD{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ym,this.transport=null,this.heartbeatIntervalMs=su.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=af,this.ref=0,this.reconnectTimer=null,this.logger=af,this.conn=null,this.sendBuffer=[],this.serializer=new jD,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...i)=>Ai(async()=>{const{default:l}=await Promise.resolve().then(()=>oo);return{default:l}},void 0).then(({default:l})=>l(...i)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...i)=>a(...i)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Qm.websocket}`,this.httpEndpoint=tS(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=vD.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:wD}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case yl.connecting:return ja.Connecting;case yl.open:return ja.Open;case yl.closing:return ja.Closing;default:return ja.Closed}}isConnected(){return this.connectionState()===ja.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new Rg(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:n,payload:s,ref:a}=e,i=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(_D,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},su.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:a,ref:i}=r,l=i?`(${i})`:"",c=a.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,a,i)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(en.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([OD],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:xD};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(en.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Zj(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},su.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,a,i,l,c,u,d;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Ym,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:su.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(i=e==null?void 0:e.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:af,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:h=>TD[h-1]||RD,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(h,m)=>m(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Og extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function lt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class AD extends Og{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Xm extends Og{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const Dg=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ai(async()=>{const{default:n}=await Promise.resolve().then(()=>oo);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},MD=()=>fe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ai(()=>Promise.resolve().then(()=>oo),void 0)).Response:Response}),Zm=t=>{if(Array.isArray(t))return t.map(r=>Zm(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=Zm(n)}),e},ID=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},of=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},LD=(t,e,r)=>fe(void 0,void 0,void 0,function*(){const n=yield MD();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const a=t.status||500,i=(s==null?void 0:s.statusCode)||a+"";e(new AD(of(s),a,i))}).catch(s=>{e(new Xm(of(s),s))}):e(new Xm(of(t),t))}),FD=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(ID(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function cc(t,e,r,n,s,a){return fe(this,void 0,void 0,function*(){return new Promise((i,l)=>{t(r,FD(e,n,s,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>LD(c,l,n))})})}function Vl(t,e,r,n){return fe(this,void 0,void 0,function*(){return cc(t,"GET",e,r,n)})}function Qr(t,e,r,n,s){return fe(this,void 0,void 0,function*(){return cc(t,"POST",e,n,s,r)})}function ep(t,e,r,n,s){return fe(this,void 0,void 0,function*(){return cc(t,"PUT",e,n,s,r)})}function $D(t,e,r,n){return fe(this,void 0,void 0,function*(){return cc(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Ag(t,e,r,n,s){return fe(this,void 0,void 0,function*(){return cc(t,"DELETE",e,n,s,r)})}class UD{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return fe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lt(e))return{data:null,error:e};throw e}})}}var rS;class BD{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[rS]="BlobDownloadBuilder",this.promise=null}asStream(){return new UD(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return fe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lt(e))return{data:null,error:e};throw e}})}}rS=Symbol.toStringTag;const zD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Xx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class WD{constructor(e,r={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=Dg(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,s){return fe(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},Xx),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(e=="PUT"?ep:Qr)(this.fetch,`${this.url}/object/${d}`,a,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(lt(a))return{data:null,error:a};throw a}})}upload(e,r,n){return fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return fe(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),i=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Xx.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield ep(this.fetch,l.toString(),c,{headers:d});return{data:{path:a,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(lt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return fe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const a=yield Qr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),i=new URL(this.url+a.url),l=i.searchParams.get("token");if(!l)throw new Og("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}})}update(e,r,n){return fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return fe(this,void 0,void 0,function*(){try{return{data:yield Qr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}})}copy(e,r,n){return fe(this,void 0,void 0,function*(){try{return{data:{path:(yield Qr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return fe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield Qr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return fe(this,void 0,void 0,function*(){try{const s=yield Qr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${a}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}})}download(e,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=a?`?${a}`:"",l=this._getFinalPath(e),c=()=>Vl(this.fetch,`${this.url}/${s}/${l}${i}`,{headers:this.headers,noResolveJson:!0});return new BD(c,this.shouldThrowOnError)}info(e){return fe(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Vl(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Zm(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}})}exists(e){return fe(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield $D(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lt(n)&&n instanceof Xm){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&s.push(a);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Ag(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}list(e,r,n){return fe(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},zD),r),{prefix:e||""});return{data:yield Qr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}})}listV2(e,r){return fe(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Qr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const nS="2.78.0",sS={"X-Client-Info":`storage-js/${nS}`};class VD{constructor(e,r={},n,s){this.shouldThrowOnError=!1;const a=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sS),r),this.fetch=Dg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return fe(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield Vl(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}getBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Vl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}createBucket(e){return fe(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Qr(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return fe(this,void 0,void 0,function*(){try{return{data:yield ep(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}})}emptyBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Qr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Ag(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class HD{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sS),r),this.fetch=Dg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Qr(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}listBuckets(e){return fe(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Vl(this.fetch,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Ag(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}}const Mg={"X-Client-Info":`storage-js/${nS}`,"Content-Type":"application/json"};class aS extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function _r(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class lf extends aS{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class qD extends aS{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var Zx;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Zx||(Zx={}));const Ig=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ai(async()=>{const{default:n}=await Promise.resolve().then(()=>oo);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},KD=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ew=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),GD=(t,e,r)=>fe(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const s=t.status||500,a=t;if(typeof a.json=="function")a.json().then(i=>{const l=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||s+"";e(new lf(ew(i),s,l))}).catch(()=>{const i=s+"",l=a.statusText||`HTTP ${s} error`;e(new lf(l,s,i))});else{const i=s+"",l=a.statusText||`HTTP ${s} error`;e(new lf(l,s,i))}}else e(new qD(ew(t),t))}),YD=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(KD(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r)):s};function QD(t,e,r,n,s,a){return fe(this,void 0,void 0,function*(){return new Promise((i,l)=>{t(r,YD(e,n,s,a)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>i(c)).catch(c=>GD(c,l,n))})})}function br(t,e,r,n,s){return fe(this,void 0,void 0,function*(){return QD(t,"POST",e,n,s,r)})}class JD{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mg),r),this.fetch=Ig(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return fe(this,void 0,void 0,function*(){try{return{data:(yield br(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_r(r))return{data:null,error:r};throw r}})}getIndex(e,r){return fe(this,void 0,void 0,function*(){try{return{data:yield br(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_r(n))return{data:null,error:n};throw n}})}listIndexes(e){return fe(this,void 0,void 0,function*(){try{return{data:yield br(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_r(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return fe(this,void 0,void 0,function*(){try{return{data:(yield br(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_r(n))return{data:null,error:n};throw n}})}}class XD{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mg),r),this.fetch=Ig(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return fe(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield br(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_r(r))return{data:null,error:r};throw r}})}getVectors(e){return fe(this,void 0,void 0,function*(){try{return{data:yield br(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_r(r))return{data:null,error:r};throw r}})}listVectors(e){return fe(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield br(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_r(r))return{data:null,error:r};throw r}})}queryVectors(e){return fe(this,void 0,void 0,function*(){try{return{data:yield br(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_r(r))return{data:null,error:r};throw r}})}deleteVectors(e){return fe(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield br(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_r(r))return{data:null,error:r};throw r}})}}class ZD{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mg),r),this.fetch=Ig(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:(yield br(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_r(r))return{data:null,error:r};throw r}})}getBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield br(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_r(r))return{data:null,error:r};throw r}})}listBuckets(){return fe(this,arguments,void 0,function*(e={}){try{return{data:yield br(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_r(r))return{data:null,error:r};throw r}})}deleteBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:(yield br(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_r(r))return{data:null,error:r};throw r}})}}class eA extends ZD{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new tA(this.url,this.headers,e,this.fetch)}}class tA extends JD{constructor(e,r,n,s){super(e,r,s),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return fe(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return fe(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return fe(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return fe(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new rA(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class rA extends XD{constructor(e,r,n,s,a){super(e,r,a),this.vectorBucketName=n,this.indexName=s}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return fe(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return fe(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return fe(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return fe(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return fe(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class nA extends VD{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new WD(this.url,this.headers,e,this.fetch)}get vectors(){return new eA(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new HD(this.url+"/iceberg",this.headers,this.fetch)}}const sA="2.78.0";let sl="";typeof Deno<"u"?sl="deno":typeof document<"u"?sl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?sl="react-native":sl="node";const aA={"X-Client-Info":`supabase-js-${sl}/${sA}`},oA={headers:aA},iA={schema:"public"},lA={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cA={},uA=t=>{let e;return t?e=t:typeof fetch>"u"?e=Aj:e=fetch,(...r)=>e(...r)},dA=()=>typeof Headers>"u"?Mj:Headers,hA=(t,e,r)=>{const n=uA(r),s=dA();return async(a,i)=>{var l;const c=(l=await e())!==null&&l!==void 0?l:t;let u=new s(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},i),{headers:u}))}};function fA(t){return t.endsWith("/")?t:t+"/"}function mA(t,e){var r,n;const{db:s,auth:a,realtime:i,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}function pA(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(fA(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const oS="2.78.0",ko=30*1e3,tp=3,cf=tp*ko,gA="http://localhost:9999",vA="supabase.auth.token",yA={"X-Client-Info":`gotrue-js/${oS}`},rp="X-Supabase-Api-Version",iS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},xA=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,wA=10*60*1e3;class Hl extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function me(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class _A extends Hl{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function bA(t){return me(t)&&t.name==="AuthApiError"}class Sa extends Hl{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class aa extends Hl{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class qr extends aa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function jA(t){return me(t)&&t.name==="AuthSessionMissingError"}class go extends aa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class au extends aa{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ou extends aa{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function SA(t){return me(t)&&t.name==="AuthImplicitGrantRedirectError"}class tw extends aa{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class np extends aa{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function uf(t){return me(t)&&t.name==="AuthRetryableFetchError"}class rw extends aa{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class sp extends aa{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const id="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),nw=` 	
\r=`.split(""),NA=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<nw.length;e+=1)t[nw[e].charCodeAt(0)]=-2;for(let e=0;e<id.length;e+=1)t[id[e].charCodeAt(0)]=e;return t})();function sw(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(id[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(id[n]),e.queuedBits-=6}}function lS(t,e,r){const n=NA[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function aw(t){const e=[],r=i=>{e.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=i=>{EA(i,n,r)};for(let i=0;i<t.length;i+=1)lS(t.charCodeAt(i),s,a);return e.join("")}function kA(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function CA(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}kA(n,e)}}function EA(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Go(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)lS(t.charCodeAt(s),r,n);return new Uint8Array(e)}function PA(t){const e=[];return CA(t,r=>e.push(r)),new Uint8Array(e)}function Pa(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>sw(s,r,n)),sw(null,r,n),e.join("")}function TA(t){return Math.round(Date.now()/1e3)+t}function RA(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Yt=()=>typeof window<"u"&&typeof document<"u",ga={tested:!1,writable:!1},cS=()=>{if(!Yt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ga.tested)return ga.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ga.tested=!0,ga.writable=!0}catch{ga.tested=!0,ga.writable=!1}return ga.writable};function OA(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const uS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ai(async()=>{const{default:n}=await Promise.resolve().then(()=>oo);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},DA=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Co=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},va=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},cs=async(t,e)=>{await t.removeItem(e)};class Gd{constructor(){this.promise=new Gd.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Gd.promiseConstructor=Promise;function df(t){const e=t.split(".");if(e.length!==3)throw new sp("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!xA.test(e[n]))throw new sp("JWT not in base64url format");return{header:JSON.parse(aw(e[0])),payload:JSON.parse(aw(e[1])),signature:Go(e[2]),raw:{header:e[0],payload:e[1]}}}async function AA(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function MA(t,e){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await t(a);if(!e(a,null,i)){n(i);return}}catch(i){if(!e(a,i)){s(i);return}}})()})}function IA(t){return("0"+t.toString(16)).substr(-2)}function LA(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,IA).join("")}async function FA(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function $A(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await FA(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vo(t,e,r=!1){const n=LA();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Co(t,`${e}-code-verifier`,s);const a=await $A(n);return[a,n===a?"plain":"s256"]}const UA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function BA(t){const e=t.headers.get(rp);if(!e||!e.match(UA))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function zA(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function WA(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const VA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yo(t){if(!VA.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function hf(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function HA(t,e){return new Proxy(t,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,s)}})}function ow(t){return JSON.parse(JSON.stringify(t))}const _a=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),qA=[502,503,504];async function iw(t){var e;if(!DA(t))throw new np(_a(t),0);if(qA.includes(t.status))throw new np(_a(t),t.status);let r;try{r=await t.json()}catch(a){throw new Sa(_a(a),a)}let n;const s=BA(t);if(s&&s.getTime()>=iS["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new rw(_a(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new qr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new rw(_a(r),t.status,r.weak_password.reasons);throw new _A(_a(r),t.status||500,n)}const KA=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Se(t,e,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[rp]||(a[rp]=iS["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const i=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await GA(t,e,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function GA(t,e,r,n,s,a){const i=KA(e,n,s,a);let l;try{l=await t(r,Object.assign({},i))}catch(c){throw console.error(c),new np(_a(c),0)}if(l.ok||await iw(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await iw(c)}}function Kr(t){var e;let r=null;JA(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=TA(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function lw(t){const e=Kr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ws(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function YA(t){return{data:t,error:null}}function QA(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=t,i=sa(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function cw(t){return t}function JA(t){return t.access_token&&t.refresh_token&&t.expires_in}const ff=["global","local","others"];class XA{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=uS(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=ff[0]){if(ff.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ff.join(", ")}`);try{return await Se(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await Se(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ws})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=sa(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:QA,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(me(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Se(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ws})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,a,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:cw});if(d.error)throw d.error;const h=await d.json(),m=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(me(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){yo(e);try{return await Se(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ws})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){yo(e);try{return await Se(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:ws})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){yo(e);try{return await Se(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:ws})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){yo(e.userId);try{const{data:r,error:n}=await Se(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(me(r))return{data:null,error:r};throw r}}async _deleteFactor(e){yo(e.userId),yo(e.id);try{return{data:await Se(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,a,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:cw});if(d.error)throw d.error;const h=await d.json(),m=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(me(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await Se(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(me(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Se(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}}function uw(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const xo={debug:!!(globalThis&&cS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class dS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ZA extends dS{}async function eM(t,e,r){xo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),xo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){xo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{xo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw xo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new ZA(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(xo.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function tM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function hS(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function rM(t){return parseInt(t,16)}function nM(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function sM(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:a=new Date,nonce:i,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:m}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=hS(t.address),v=d?`${d}://${n}`:n,g=t.statement?`${t.statement}
`:"",w=`${v} wants you to sign in with your Ethereum account:
${p}

${g}`;let x=`URI: ${h}
Version: ${m}
Chain ID: ${r}${i?`
Nonce: ${i}`:""}
Issued At: ${a.toISOString()}`;if(s&&(x+=`
Expiration Time: ${s.toISOString()}`),l&&(x+=`
Not Before: ${l.toISOString()}`),c&&(x+=`
Request ID: ${c}`),u){let y=`
Resources:`;for(const _ of u){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);y+=`
- ${_}`}x+=y}return`${w}
${x}`}class wt extends Error{constructor({message:e,code:r,cause:n,name:s}){var a;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=s??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class ld extends wt{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function aM({error:t,options:e}){var r,n,s;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new wt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new wt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new wt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new wt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new wt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new wt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new wt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new wt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const i=window.location.hostname;if(fS(i)){if(a.rp.id!==i)return new wt({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new wt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new wt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new wt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new wt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function oM({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new wt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new wt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(fS(n)){if(r.rpId!==n)return new wt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new wt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new wt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new wt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class iM{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const lM=new iM;function cM(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=sa(t,["challenge","user","excludeCredentials"]),a=Go(e).buffer,i=Object.assign(Object.assign({},r),{id:Go(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:a,user:i});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Go(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function uM(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=sa(t,["challenge","allowCredentials"]),s=Go(e).buffer,a=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let i=0;i<r.length;i++){const l=r[i];a.allowCredentials[i]=Object.assign(Object.assign({},l),{id:Go(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function dM(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Pa(new Uint8Array(t.response.attestationObject)),clientDataJSON:Pa(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function hM(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Pa(new Uint8Array(s.authenticatorData)),clientDataJSON:Pa(new Uint8Array(s.clientDataJSON)),signature:Pa(new Uint8Array(s.signature)),userHandle:s.userHandle?Pa(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function fS(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function dw(){var t,e;return!!(Yt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function fM(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ld("Browser returned unexpected credential type",e)}:{data:null,error:new ld("Empty credential response",e)}}catch(e){return{data:null,error:aM({error:e,options:t})}}}async function mM(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ld("Browser returned unexpected credential type",e)}:{data:null,error:new ld("Empty credential response",e)}}catch(e){return{data:null,error:oM({error:e,options:t})}}}const pM={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},gM={userVerification:"preferred",hints:["security-key"]};function cd(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const a in s){const i=s[a];if(i!==void 0)if(Array.isArray(i))n[a]=i;else if(r(i))n[a]=i;else if(e(i)){const l=n[a];e(l)?n[a]=cd(l,i):n[a]=cd(i)}else n[a]=i}return n}function vM(t,e){return cd(pM,t,e||{})}function yM(t,e){return cd(gM,t,e||{})}class xM{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},a){try{const{data:i,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!i)return{data:null,error:l};const c=s??lM.createNewAbortSignal();if(i.webauthn.type==="create"){const{user:u}=i.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(i.webauthn.type){case"create":{const u=vM(i.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:d,error:h}=await fM({publicKey:u,signal:c});return d?{data:{factorId:e,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=yM(i.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:d,error:h}=await mM(Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:e,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(i){return me(i)?{data:null,error:i}:{data:null,error:new Sa("Unexpected error in challenge",i)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},a){if(!r)return{data:null,error:new Hl("rpId is required for WebAuthn authentication")};try{if(!dw())return{data:null,error:new Sa("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:a});if(!i)return{data:null,error:l};const{webauthn:c}=i;return this._verify({factorId:e,challengeId:i.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(i){return me(i)?{data:null,error:i}:{data:null,error:new Sa("Unexpected error in authenticate",i)}}}async _register({friendlyName:e,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},a){if(!r)return{data:null,error:new Hl("rpId is required for WebAuthn registration")};try{if(!dw())return{data:null,error:new Sa("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this._enroll({friendlyName:e});if(!i)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===e&&m.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:i.id,friendlyName:i.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:a});return c?this._verify({factorId:i.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(i){return me(i)?{data:null,error:i}:{data:null,error:new Sa("Unexpected error in register",i)}}}}tM();const wM={url:gA,storageKey:vA,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yA,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function hw(t,e,r){return await r()}const wo={};class ql{get jwks(){var e,r;return(r=(e=wo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){wo[this.storageKey]=Object.assign(Object.assign({},wo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=wo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){wo[this.storageKey]=Object.assign(Object.assign({},wo[this.storageKey]),{cachedAt:e})}constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ql.nextInstanceID,ql.nextInstanceID+=1,this.instanceID>0&&Yt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},wM),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new XA({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=uS(s.fetch),this.lock=s.lock||hw,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Yt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=eM:this.lock=hw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new xM(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:cS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=uw(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=uw(this.memoryStorage)),Yt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${oS}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=OA(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Yt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),SA(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:i,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return me(r)?{error:r}:{error:new Sa("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const a=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Kr}),{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(me(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var r,n,s;try{let a;if("email"in e){const{email:d,password:h,options:m}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await vo(this.storage,this.storageKey)),a=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:v},xform:Kr})}else if("phone"in e){const{phone:d,password:h,options:m}=e;a=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Kr})}else throw new au("You must provide either an email or phone number and a password");const{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(me(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:i,options:l}=e;r=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:lw})}else if("phone"in e){const{phone:a,password:i,options:l}=e;r=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:lw})}else throw new au("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new go}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,a,i,l,c,u,d,h,m;let p,v;if("message"in e)p=e.message,v=e.signature;else{const{chain:g,wallet:w,statement:x,options:y}=e;let _;if(Yt())if(typeof w=="object")_=w;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")_=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=w}const b=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href),j=await _.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=hS(j[0]);let S=(n=y==null?void 0:y.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!S){const C=await _.request({method:"eth_chainId"});S=rM(C)}const k={domain:b.host,address:P,statement:x,uri:b.href,version:"1",chainId:S,nonce:(s=y==null?void 0:y.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(i=(a=y==null?void 0:y.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&i!==void 0?i:new Date,expirationTime:(l=y==null?void 0:y.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=y==null?void 0:y.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=y==null?void 0:y.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=sM(k),v=await _.request({method:"personal_sign",params:[nM(p),P]})}try{const{data:g,error:w}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:v},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Kr});if(w)throw w;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new go}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:w})}catch(g){if(me(g))return{data:{user:null,session:null},error:g};throw g}}async signInWithSolana(e){var r,n,s,a,i,l,c,u,d,h,m,p;let v,g;if("message"in e)v=e.message,g=e.signature;else{const{chain:w,wallet:x,statement:y,options:_}=e;let b;if(Yt())if(typeof x=="object")b=x;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))b=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=x}const j=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in b&&b.signIn){const P=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),y?{statement:y}:null));let S;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")S=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)S=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)v=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),g=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${j.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(n=_==null?void 0:_.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((i=_==null?void 0:_.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((u=_==null?void 0:_.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((h=(d=_==null?void 0:_.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",..._.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const P=await b.signMessage(new TextEncoder().encode(v),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=P}}try{const{data:w,error:x}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Pa(g)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Kr});if(x)throw x;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new go}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:x})}catch(w){if(me(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const r=await va(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:a,error:i}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Kr});if(await cs(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new go}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:i})}catch(a){if(me(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:a,nonce:i}=e,l=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Kr}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new go}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,a,i;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await vo(this.storage,this.storageKey));const{error:h}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new au("You must provide either an email or phone number.")}catch(l){if(me(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let s,a;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:l}=await Se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Kr});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,u=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(me(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let a=null,i=null;return this.flowType==="pkce"&&([a,i]=await vo(this.storage,this.storageKey)),await Se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:i}),headers:this.headers,xform:YA})}catch(a){if(me(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new qr;const{error:s}=await Se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(me(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:a}=e,{error:i}=await Se(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:n,type:s,options:a}=e,{data:i,error:l}=await Se(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new au("You must provide either an email or phone number and a type")}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await va(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<cf:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const i=await va(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=hf()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const i={value:this.suppressGetSessionWarning};e.user=HA(e.user,i),i.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ws}):await this._useSession(async r=>{var n,s,a;const{data:i,error:l}=r;if(l)throw l;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new qr}:await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:ws})})}catch(r){if(me(r))return jA(r)&&(await this._removeSession(),await cs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new qr;const i=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await vo(this.storage,this.storageKey));const{data:u,error:d}=await Se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:ws});if(d)throw d;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new qr;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:i}=df(e.access_token);if(i.exp&&(n=i.exp,s=n<=r),s){const{data:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(me(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:i,error:l}=r;if(l)throw l;e=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new qr;const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Yt())throw new ou("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ou(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new tw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ou("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new tw("No code detected.");const{data:y,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:i,expires_in:l,expires_at:c,token_type:u}=e;if(!a||!l||!i||!u)throw new ou("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const p=m-d;p*1e3<=ko&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const v=m-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,d);const{data:g,error:w}=await this._getUser(a);if(w)throw w;const x={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:h,expires_at:m,refresh_token:i,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(n){if(me(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await va(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{error:a};const i=(n=s.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:l}=await this.admin.signOut(i,e);if(l&&!(bA(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await cs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=RA(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await vo(this.storage,this.storageKey,!0));try{return await Se(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(me(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var i,l,c,u,d;const{data:h,error:m}=a;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Se(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Yt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(me(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:a}}=r;if(s)throw s;const{options:i,provider:l,token:c,access_token:u,nonce:d}=e,h=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:Kr}),{data:m,error:p}=h;return p?{data:{user:null,session:null},error:p}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new go}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),{data:m,error:p})}catch(s){if(me(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:a,error:i}=r;if(i)throw i;return await Se(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await MA(async s=>(s>0&&await AA(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Kr})),(s,a)=>{const i=200*Math.pow(2,s);return a&&uf(a)&&Date.now()+i-n<ko})}catch(n){if(this._debug(r,"error",n),me(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Yt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await va(this.storage,this.storageKey);if(s&&this.userStorage){let i=await va(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await Co(this.userStorage,this.storageKey+"-user",i)),s.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:hf()}else if(s&&!s.user&&!s.user){const i=await va(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await cs(this.storage,this.storageKey+"-user"),await Co(this.storage,this.storageKey,s)):s.user=hf()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<cf;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${cf}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),uf(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(s.access_token);!l&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new qr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Gd;const{data:a,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!a.session)throw new qr;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),me(a)){const i={data:null,error:a};return uf(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){a.push(c)}});if(await Promise.all(i),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Co(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const a=ow(s);await Co(this.storage,this.storageKey,a)}else{const s=ow(r);await Co(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await cs(this.storage,this.storageKey),await cs(this.storage,this.storageKey+"-code-verifier"),await cs(this.storage,this.storageKey+"-user"),this.userStorage&&await cs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Yt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ko);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/ko);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ko}ms, refresh threshold is ${tp} ticks`),s<=tp&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof dS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Yt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,i]=await vo(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await Se(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:a,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:u}=await Se(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const i=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?dM(e.webauthn.credential_response):hM(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await Se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:i,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(r){if(me(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const i=await Se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(i.error)return i;const{data:l}=i;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:cM(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:uM(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(me(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:s}=await this.getSession();if(s)return{data:null,error:s};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=df(n.access_token);let i=null;a.aal&&(i=a.aal);let l=i;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=a.amr||[];return{data:{currentLevel:i,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?{data:null,error:s}:n?await Se(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):{data:null,error:new qr}})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;if(a)return{data:null,error:a};if(!s)return{data:null,error:new qr};const i=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&Yt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(me(n))return{data:null,error:n};throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;if(a)return{data:null,error:a};if(!s)return{data:null,error:new qr};const i=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&Yt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(me(n))return{data:null,error:n};throw n}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+wA>s)return n;const{data:a,error:i}=await Se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,n=a.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:p,error:v}=await this.getSession();if(v||!p.session)return{data:null,error:v};n=p.session.access_token}const{header:s,payload:a,signature:i,raw:{header:l,payload:c}}=df(n);r!=null&&r.allowExpired||zA(a.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:a,header:s,signature:i},error:null}}const d=WA(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,i,PA(`${l}.${c}`)))throw new sp("Invalid JWT signature");return{data:{claims:a,header:s,signature:i},error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}}}ql.nextInstanceID=0;const _M=ql;class bM extends _M{constructor(e){super(e)}}class jM{constructor(e,r,n){var s,a,i;this.supabaseUrl=e,this.supabaseKey=r;const l=pA(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:iA,realtime:cA,auth:Object.assign(Object.assign({},lA),{storageKey:c}),global:oA},d=mA(n??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=d.auth)!==null&&i!==void 0?i:{},this.headers,d.global.fetch),this.fetch=hA(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new gD(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new nA(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new lD(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:a,storageKey:i,flowType:l,lock:c,debug:u},d,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new bM({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),d),storageKey:i,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:a,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new DD(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const SM=(t,e,r)=>new jM(t,e,r);function NM(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}NM()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const mS="https://studio.middar.com/",Nu="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlzcyI6InN1cGFiYXNlLWRlbW8iLCJpYXQiOjE3NjQwMDE2ODQsImV4cCI6MjA3OTU3NzY4NH0.sHsfXuCJ0n1y6g29oFxifU1KCkSZzCzZ7_x1zQDbFDY";console.log(" SUPABASE URL at runtime:",mS);console.log(" SUPABASE KEY (first 8):",Nu==null?void 0:Nu.slice(0,8));const Z=SM(mS,Nu,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storageKey:"middar_crm_session"}}),cr={async signUpStaff(t,e,r){console.log("[authService] Creating staff user:",{email:t,userData:r});try{const{data:n,error:s}=await Z.auth.signUp({email:t,password:e});if(s)throw s;if(!n.user)throw new Error("No user data returned from sign up");console.log("[authService] Auth user created:",n.user.id);const{data:a,error:i}=await Z.from("users").upsert({user_name:r.name,user_email:t,user_role:r.role,avatar:r.avatar,auth_user_id:n.user.id},{onConflict:"auth_user_id"}).select("*").single();if(i)throw console.error("[authService] Error creating user profile:",i),new Error(`Failed to create user profile: ${i.message}`);return console.log("[authService] User profile created:",a),console.log("[authService] User profile created:",a),{id:n.user.id,email:t,role:r.role,profile:{user_id:a.user_id||parseInt(n.user.id),user_name:a.user_name||r.name,user_email:a.user_email||t,user_role:a.user_role||r.role,avatar:a.avatar||r.avatar,auth_user_id:a.auth_user_id||n.user.id,client_contact:a.client_contact||null,company_name:a.company_name||null,company_name_ar:a.company_name_ar||null,user_name_ar:a.user_name_ar||null,user_phone:a.user_phone||null,created_at:a.created_at||new Date().toISOString(),updated_at:a.updated_at||new Date().toISOString()}}}catch(n){throw console.error("[authService] Error in signUpStaff:",n),n}},async createStaffUser(t,e,r){console.log("[authService] Creating staff user via Edge Function:",{email:t,userData:r});try{const{data:{session:n},error:s}=await Z.auth.getSession();if(s||!(n!=null&&n.access_token))throw new Error("No active session found");const a="https://studio.middar.com/",i=`${a}/functions/v1/crud-staff-user`,l=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.access_token}`,"x-user-id":n.user.id},body:JSON.stringify({action:"add",email:t,password:e,userData:{user_name:r.name,user_role:r.role,...r.localizedData||{}}})});if(!l.ok){const h=await l.json();throw new Error(h.error||`HTTP ${l.status}`)}const c=await l.json();if(console.log("[authService] Staff user created successfully:",c),!c.ok)throw new Error("Edge Function returned an error status");const u=c.auth_id??c.authUserId;if(!u)throw new Error("Auth user ID missing from response");if(c.user_id==null)throw new Error("User ID missing from response");const d=c.user_id??null;return{id:u,email:t,role:r.role,profile:{user_id:d,user_name:c.user_name||r.name,user_email:c.user_email||t,user_role:c.user_role||r.role,avatar:c.avatar||r.avatar,auth_user_id:u,client_contact:c.client_contact||null,company_name:c.company_name||null,company_name_ar:c.company_name_ar||null,user_name_ar:c.user_name_ar||null,user_phone:c.user_phone||null,created_at:c.created_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString()}}}catch(n){throw console.error("[authService] Error in createStaffUser:",n),n}},async updateUserRole(t,e){console.log("[authService] Updating user role:",{targetUserId:t,newRole:e});try{const{data:{session:r},error:n}=await Z.auth.getSession();if(n||!(r!=null&&r.access_token))throw new Error("No active session found");const s="https://studio.middar.com/".trim();if(!s)throw new Error("Missing VITE_SUPABASE_URL");const a=`${s}/functions/v1/crud-staff-user`,i=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.access_token}`,"x-user-id":r.user.id},body:JSON.stringify({action:"update",targetUserId:t,userData:{user_role:e}})});if(!i.ok){const l=await i.json();throw new Error(l.error||`HTTP ${i.status}`)}console.log("[authService] User role updated successfully")}catch(r){throw console.error("[authService] Error in updateUserRole:",r),r}},async updateUser(t,e){console.log("[authService] Updating user details:",{targetUserId:t,userData:e});try{const{data:{session:r},error:n}=await Z.auth.getSession();if(n||!(r!=null&&r.access_token))throw new Error("No active session found");const s="https://studio.middar.com/".trim();if(!s)throw new Error("Missing VITE_SUPABASE_URL");const a=`${s}/functions/v1/crud-staff-user`,i={action:"update",targetUserId:t,userData:{}};if(e.user_email!==void 0&&(i.email=e.user_email,i.userData.user_email=e.user_email),e.user_name!==void 0&&(i.userData.user_name=e.user_name),e.user_role!==void 0&&(i.userData.user_role=e.user_role),e.user_phone!==void 0){const{data:l,error:c}=await Z.from("users").select("user_id").eq("auth_user_id",t).single();if(c||!l)throw new Error("User not found");const{error:u}=await Z.from("users").update({user_phone:e.user_phone}).eq("user_id",l.user_id);if(u)throw u}if(i.userData.user_name||i.userData.user_email||i.userData.user_role){const l=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.access_token}`,"x-user-id":r.user.id},body:JSON.stringify(i)});if(!l.ok){const u=await l.json();throw new Error(u.error||`HTTP ${l.status}`)}const c=await l.json();console.log("[authService] Edge Function update result:",c)}console.log("[authService] User details updated successfully")}catch(r){throw console.error("[authService] Error in updateUser:",r),r}},async deleteUser(t){console.log("[authService] Deleting user:",t);try{const{data:{session:e},error:r}=await Z.auth.getSession();if(r||!(e!=null&&e.access_token))throw new Error("No active session found");const n="https://studio.middar.com/",s=`${n}/functions/v1/crud-staff-user`,a=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.access_token}`,"x-user-id":e.user.id},body:JSON.stringify({action:"delete",targetUserId:t})});if(!a.ok){const i=await a.json();throw new Error(i.error||`HTTP ${a.status}`)}console.log("[authService] User deleted successfully")}catch(e){throw console.error("[authService] Error in deleteUser:",e),e}},async signUpClient(t,e,r){console.log("[authService] Signing up client:",{email:t,...r});const{data:n,error:s}=await Z.auth.signUp({email:t,password:e});if(s)throw s;if(!n.user)throw new Error("User creation failed");console.log("[authService] Auth user created:",n.user.id);const{data:a,error:i}=await Z.from("users").upsert({user_name:r.name,user_email:t,user_role:"client",avatar:r.avatar,client_contact:r.contact,company_name:r.company,auth_user_id:n.user.id},{onConflict:"auth_user_id"}).select().single();if(i)throw console.error("[authService] Error creating user profile:",i),i;return console.log("[authService] User profile created:",a),{id:n.user.id,email:t,role:"client",profile:{user_id:a.user_id,user_name:a.user_name||r.name,user_email:a.user_email||t,user_role:"client",avatar:a.avatar||r.avatar,client_contact:a.client_contact||r.contact||null,company_name:a.company_name||r.company||null,company_name_ar:a.company_name_ar||null,user_name_ar:a.user_name_ar||null,user_phone:a.user_phone||null,auth_user_id:n.user.id,created_at:a.created_at||new Date().toISOString(),updated_at:a.updated_at||new Date().toISOString()}}},async signIn(t,e){console.log("[authService] Signing in with email:",t);try{const{data:r,error:n}=await Z.auth.signInWithPassword({email:t,password:e});if(n)throw console.error("[authService] Authentication error:",n),n;if(!r.user)throw new Error("Sign in failed: No user data returned");console.log("[authService] User authenticated, fetching profile...");const{data:s,error:a}=await Z.from("users").select("*").eq("auth_user_id",r.user.id).maybeSingle();if(a)throw console.error("[authService] Error fetching user profile:",a),new Error("Failed to fetch user profile");if(!s)throw console.error("[authService] User profile not found for user:",r.user.id),new Error("User profile not found");return console.log("[authService] User profile found:",s),{id:r.user.id,email:r.user.email,role:s.user_role||"client",profile:{...s}}}catch(r){throw console.error("[authService] Error in signIn:",r),r}},async signOut(){console.log("[authService] Signing out...");try{const{data:{session:t}}=await Z.auth.getSession();if(!t){console.warn("[authService] No active session found  skipping signOut()");return}const{error:e}=await Z.auth.signOut();if(e)throw console.error("[authService] Error signing out:",e),e;console.log("[authService] Sign out successful")}catch(t){throw console.error("[authService] Error in signOut:",t),t}},async signInWithGoogle(t="client"){console.log("[authService] Starting Google OAuth sign-in with role:",t);try{localStorage.setItem("oauth_intended_role",t);const{data:e,error:r}=await Z.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`,data:{intended_role:t},queryParams:{access_type:"offline",prompt:"consent select_account"}}});if(r)throw console.error("[authService] Google OAuth error:",r),localStorage.removeItem("oauth_intended_role"),r;console.log("[authService] Google OAuth initiated successfully with role:",t)}catch(e){throw console.error("[authService] Error in Google sign-in:",e),localStorage.removeItem("oauth_intended_role"),e}},async getCurrentUser(t){console.log("[authService] Getting current user",{authUserId:t});try{let e;if(t)e={id:t},console.log("[authService] Using provided auth user ID:",t);else{console.log("[authService] Fetching auth user from session");const l=Z.auth.getUser(),c=new Promise((u,d)=>setTimeout(()=>d(new Error("getUser timeout")),3e3));try{const{data:{user:u},error:d}=await Promise.race([l,c]);if(d||!u)return console.log("[authService] No authenticated user found"),null;e=u}catch(u){return console.warn("[authService] Failed to get user from session:",u),null}}console.log("[authService] Found auth user:",{id:e.id}),console.log("[authService] Checking users table for user:",e.id);const r=Z.from("users").select("*").eq("auth_user_id",e.id).maybeSingle(),n=new Promise((l,c)=>setTimeout(()=>c(new Error("Database query timeout")),3e3));let s,a;try{const l=await Promise.race([r,n]);s=l.data,a=l.error}catch(l){return console.error("[authService] Database query timed out:",l),{id:e.id,email:"",role:"client",profile:{user_id:0,user_name:"User",user_email:"",user_role:"client",auth_user_id:e.id,avatar:"",client_contact:null,company_name:null,company_name_ar:null,user_name_ar:null,user_phone:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}}if(console.log("[authService] Database query completed:",{hasData:!!s,hasError:!!a}),a&&console.error("[authService] Error fetching user from users table:",a),s)return console.log("[authService] Found user in users table:",s),{id:e.id,email:s.user_email||"",role:s.user_role||"client",profile:{...s}};console.warn("[authService] User authenticated but not found in users table, creating minimal user object",{userId:e.id});const i={id:e.id,email:"",role:"client",profile:{user_id:0,user_name:"User",user_email:"",user_role:"client",auth_user_id:e.id,avatar:"",client_contact:null,company_name:null,company_name_ar:null,user_name_ar:null,user_phone:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}};return console.log("[authService] Returning minimal user object"),i}catch(e){return console.error("[authService] Error in getCurrentUser:",e),null}},async getFreshJwt(){const{data:{session:t},error:e}=await Z.auth.getSession();if(e)throw e;if(!(t!=null&&t.access_token))throw new Error("No access token available");return t.access_token},onAuthStateChange(t){console.log("[authService] Setting up auth state change listener");let e=null;const r=async(s,a)=>{var l;console.log("[authService] Auth state changed:",{event:s,hasSession:!!a,userId:(l=a==null?void 0:a.user)==null?void 0:l.id});const i=async c=>{const u=this.getCurrentUser(c),d=new Promise((h,m)=>setTimeout(()=>m(new Error("getCurrentUser timeout")),3e3));return Promise.race([u,d])};if(s==="SIGNED_IN"&&(a!=null&&a.user))try{console.log("[authService] Fetching user profile for SIGNED_IN event");const c=await i(a.user.id);if(console.log("[authService] User profile fetched:",{hasUser:!!c}),c){const u=c.profile.user_name==="User",d=e&&e.profile.user_name!=="User";u&&d?console.log("[authService] Skipping update to minimal user, keeping full user"):JSON.stringify(c)!==JSON.stringify(e)&&(e=c,t(c))}}catch(c){if(console.error("[authService] Error or timeout getting current user:",c),!e){const u={id:a.user.id,email:a.user.email||"",role:"client",profile:{user_id:0,user_name:"User",user_email:a.user.email||"",user_role:"client",auth_user_id:a.user.id,avatar:"",client_contact:null,company_name:null,company_name_ar:null,user_name_ar:null,user_phone:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}};e=u,t(u)}}else if(s==="INITIAL_SESSION")if(a!=null&&a.user)try{console.log("[authService] Fetching user profile for INITIAL_SESSION event"),await new Promise(u=>setTimeout(u,100));const c=await i(a.user.id);if(console.log("[authService] User profile fetched:",{hasUser:!!c}),c){const u=c.profile.user_name==="User",d=e&&e.profile.user_name!=="User";u&&d?console.log("[authService] Skipping update to minimal user, keeping full user"):JSON.stringify(c)!==JSON.stringify(e)&&(e=c,t(c))}}catch(c){if(console.error("[authService] Error or timeout getting current user:",c),!e){const u={id:a.user.id,email:a.user.email||"",role:"client",profile:{user_id:0,user_name:"User",user_email:a.user.email||"",user_role:"client",auth_user_id:a.user.id,avatar:"",client_contact:null,company_name:null,company_name_ar:null,user_name_ar:null,user_phone:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}};e=u,t(u)}}else console.log("[authService] No session on initial check"),e=null,t(null);else s==="SIGNED_OUT"&&(console.log("[authService] User signed out"),e=null,t(null))},{data:{subscription:n}}=Z.auth.onAuthStateChange(r);return console.log("[authService] Auth state change listener set up"),{data:{subscription:n}}}},pS=f.createContext(void 0),kM=({children:t})=>{const[e,r]=f.useState(null),[n,s]=f.useState(!0),[a,i]=f.useState(!1);f.useEffect(()=>{let y=!0,_=null,b=!1;const j=P=>{if(y){if(console.log("[AuthContext] Auth state changed:",{hasUser:!!P,isSigningUp:a}),a){console.log("[AuthContext] Skipping auth state change during signup");return}r(P),b||(b=!0,s(!1))}};console.log("[AuthContext] Initializing auth state...");try{const{data:{subscription:P}}=cr.onAuthStateChange(j);_=P}catch(P){console.error("[AuthContext] Failed to set up auth state listener:",P),s(!1)}return()=>{console.log("[AuthContext] Cleaning up auth state change listener"),y=!1,_&&_.unsubscribe()}},[]);const l=async(y,_)=>{console.log("[AuthContext] Signing in..."),s(!0);try{const b=await cr.signIn(y,_);return console.log("[AuthContext] Sign in successful:",b),r(b),s(!1),b}catch(b){throw console.error("[AuthContext] Sign in failed:",b),s(!1),r(null),b}},c=async(y="client")=>{console.log("[AuthContext] Starting Google sign-in with role:",y),s(!0);try{await cr.signInWithGoogle(y)}catch(_){throw console.error("[AuthContext] Google sign-in failed:",_),s(!1),_}},u=async()=>{console.log("[AuthContext] Signing out...");try{r(null),await cr.signOut(),console.log("[AuthContext] Sign out successful")}catch(y){throw console.error("[AuthContext] Sign out failed:",y),r(null),y}},d=async(y,_,b)=>{console.log("[AuthContext] Signing up staff..."),s(!0),i(!0);try{const j=await cr.signUpStaff(y,_,b);return console.log("[AuthContext] Staff sign up successful:",j),r(j),s(!1),j}catch(j){throw console.error("[AuthContext] Staff sign up failed:",j),s(!1),j}finally{i(!1)}},h=async(y,_,b)=>{console.log("[AuthContext] Creating staff user...");try{const j=await cr.createStaffUser(y,_,b);return console.log("[AuthContext] Staff user creation successful:",j),j}catch(j){throw console.error("[AuthContext] Staff user creation failed:",j),j}},m=async y=>{console.log("[AuthContext] Deleting user...");try{await cr.deleteUser(y),console.log("[AuthContext] User deletion successful")}catch(_){throw console.error("[AuthContext] User deletion failed:",_),_}},p=async(y,_)=>{console.log("[AuthContext] Updating user role...");try{await cr.updateUserRole(y,_),console.log("[AuthContext] User role update successful")}catch(b){throw console.error("[AuthContext] User role update failed:",b),b}},v=async(y,_)=>{console.log("[AuthContext] Updating user details...");try{await cr.updateUser(y,_),console.log("[AuthContext] User details update successful")}catch(b){throw console.error("[AuthContext] User details update failed:",b),b}},g=async(y,_,b)=>{console.log("[AuthContext] Signing up client..."),s(!0),i(!0);try{const j=await cr.signUpClient(y,_,b);return console.log("[AuthContext] Client sign up successful:",j),r(j),s(!1),j}catch(j){throw console.error("[AuthContext] Client sign up failed:",j),s(!1),j}finally{i(!1)}},w=y=>e?y.includes(e.role):!1,x={user:e,loading:n,signIn:l,signInWithGoogle:c,signOut:u,signUpStaff:d,createStaffUser:h,deleteUser:m,updateUserRole:p,updateUser:v,signUpClient:g,isAuthenticated:!!e,isClient:(e==null?void 0:e.role)==="client",isStaff:e?["admin","manager","employee","team_leader"].includes(e.role):!1,hasRole:w};return o.jsx(pS.Provider,{value:x,children:t})},St=()=>{const t=f.useContext(pS);return t===void 0?(console.warn("[useAuth] AuthProvider not found, using fallback context"),{user:null,loading:!1,signIn:async()=>{throw new Error("AuthProvider not available")},signInWithGoogle:async()=>{throw new Error("AuthProvider not available")},signOut:async()=>{throw new Error("AuthProvider not available")},signUpStaff:async()=>{throw new Error("AuthProvider not available")},createStaffUser:async()=>{throw new Error("AuthProvider not available")},deleteUser:async()=>{throw new Error("AuthProvider not available")},updateUserRole:async()=>{throw new Error("AuthProvider not available")},updateUser:async()=>{throw new Error("AuthProvider not available")},signUpClient:async()=>{throw new Error("AuthProvider not available")},isAuthenticated:!1,isClient:!1,isStaff:!1,hasRole:()=>!1}):t},gS=f.createContext(void 0),CM=[{code:"en",name:"English",flag:""},{code:"ar",name:"",flag:""}],EM=({children:t})=>{const[e,r]=f.useState(dt.language||"ar"),[n,s]=f.useState(sn());f.useEffect(()=>{const l=c=>{r(c),s(sn())};return dt.on("languageChanged",l),()=>{dt.off("languageChanged",l)}},[]);const i={currentLanguage:e,changeLanguage:async l=>{try{await dt.changeLanguage(l),r(l),s(sn())}catch(c){console.error("Failed to change language:",c)}},isRTL:n,languages:CM};return o.jsx(gS.Provider,{value:i,children:t})},io=()=>{const t=f.useContext(gS);if(t===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return t};var ud=["light","dark"],Lg="(prefers-color-scheme: dark)",PM=typeof window>"u",Fg=f.createContext(void 0),TM={setTheme:t=>{},themes:[]},RM=()=>{var t;return(t=f.useContext(Fg))!=null?t:TM},vS=t=>f.useContext(Fg)?t.children:f.createElement(DM,{...t}),OM=["light","dark"],DM=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:r=!0,enableColorScheme:n=!0,storageKey:s="theme",themes:a=OM,defaultTheme:i=r?"system":"light",attribute:l="data-theme",value:c,children:u,nonce:d})=>{let[h,m]=f.useState(()=>fw(s,i)),[p,v]=f.useState(()=>fw(s)),g=c?Object.values(c):a,w=f.useCallback(b=>{let j=b;if(!j)return;b==="system"&&r&&(j=mw());let P=c?c[j]:j,S=e?MM():null,k=document.documentElement;if(l==="class"?(k.classList.remove(...g),P&&k.classList.add(P)):P?k.setAttribute(l,P):k.removeAttribute(l),n){let C=ud.includes(i)?i:null,E=ud.includes(j)?j:C;k.style.colorScheme=E}S==null||S()},[]),x=f.useCallback(b=>{let j=typeof b=="function"?b(b):b;m(j);try{localStorage.setItem(s,j)}catch{}},[t]),y=f.useCallback(b=>{let j=mw(b);v(j),h==="system"&&r&&!t&&w("system")},[h,t]);f.useEffect(()=>{let b=window.matchMedia(Lg);return b.addListener(y),y(b),()=>b.removeListener(y)},[y]),f.useEffect(()=>{let b=j=>{if(j.key!==s)return;let P=j.newValue||i;x(P)};return window.addEventListener("storage",b),()=>window.removeEventListener("storage",b)},[x]),f.useEffect(()=>{w(t??h)},[t,h]);let _=f.useMemo(()=>({theme:h,setTheme:x,forcedTheme:t,resolvedTheme:h==="system"?p:h,themes:r?[...a,"system"]:a,systemTheme:r?p:void 0}),[h,x,t,p,r,a]);return f.createElement(Fg.Provider,{value:_},f.createElement(AM,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:r,enableColorScheme:n,storageKey:s,themes:a,defaultTheme:i,attribute:l,value:c,children:u,attrs:g,nonce:d}),u)},AM=f.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:a,value:i,attrs:l,nonce:c})=>{let u=a==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,h=s?ud.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(v,g=!1,w=!0)=>{let x=i?i[v]:v,y=g?v+"|| ''":`'${x}'`,_="";return s&&w&&!g&&ud.includes(v)&&(_+=`d.style.colorScheme = '${v}';`),r==="class"?g||x?_+=`c.add(${y})`:_+="null":x&&(_+=`d[s](n,${y})`),_},p=t?`!function(){${d}${m(t)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${Lg}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${m(i?"x[e]":"e",!0)}}${u?"":"else{"+m(a,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${m(i?"x[e]":"e",!0)}}else{${m(a,!1,!1)};}${h}}catch(t){}}();`;return f.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})}),fw=(t,e)=>{if(PM)return;let r;try{r=localStorage.getItem(t)||void 0}catch{}return r||e},MM=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},mw=t=>(t||(t=window.matchMedia(Lg)),t.matches?"dark":"light");const IM=()=>o.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"}),o.jsx("span",{className:"sr-only",children:"Loading..."})]}),ir=({children:t,allowedRoles:e,requireAuth:r=!0})=>{const n=os(),{user:s,loading:a,hasRole:i}=St(),l=s&&s.role&&s.profile.user_name!=="User",c=f.useMemo(()=>e?i(e):!0,[e,i]);return f.useMemo(()=>({loading:a,user:s?{id:s.id,email:s.email,role:s.role}:null,hasRequiredRole:c}),[a,s,c]),console.log("[ProtectedRoute]",{path:n.pathname,loading:a,hasUser:!!s,isUserProfileLoaded:l,requireAuth:r,hasRequiredRole:c,userRole:s==null?void 0:s.role}),a||s&&!l?(console.log("[ProtectedRoute] Showing loading spinner - waiting for profile"),o.jsx(IM,{})):r&&!s?(console.log("[ProtectedRoute] No user, redirecting to login"),o.jsx(Mx,{to:"/login",state:{from:n},replace:!0})):e&&!c?(console.log("[ProtectedRoute] User does not have required role"),o.jsx(Mx,{to:"/unauthorized",replace:!0})):(console.log("[ProtectedRoute] Rendering protected content"),o.jsx(o.Fragment,{children:t}))};function pw(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Yd(...t){return e=>{let r=!1;const n=t.map(s=>{const a=pw(s,e);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let s=0;s<n.length;s++){const a=n[s];typeof a=="function"?a():pw(t[s],null)}}}}function Ae(...t){return f.useCallback(Yd(...t),t)}function Gs(t){const e=FM(t),r=f.forwardRef((n,s)=>{const{children:a,...i}=n,l=f.Children.toArray(a),c=l.find(UM);if(c){const u=c.props.children,d=l.map(h=>h===c?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:h);return o.jsx(e,{...i,ref:s,children:f.isValidElement(u)?f.cloneElement(u,void 0,d):null})}return o.jsx(e,{...i,ref:s,children:a})});return r.displayName=`${t}.Slot`,r}var LM=Gs("Slot");function FM(t){const e=f.forwardRef((r,n)=>{const{children:s,...a}=r;if(f.isValidElement(s)){const i=zM(s),l=BM(a,s.props);return s.type!==f.Fragment&&(l.ref=n?Yd(n,i):i),f.cloneElement(s,l)}return f.Children.count(s)>1?f.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var yS=Symbol("radix.slottable");function $M(t){const e=({children:r})=>o.jsx(o.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=yS,e}function UM(t){return f.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===yS}function BM(t,e){const r={...e};for(const n in e){const s=t[n],a=e[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...t,...r}}function zM(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function xS(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=xS(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function wS(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=xS(t))&&(n&&(n+=" "),n+=e);return n}const gw=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,vw=wS,uc=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return vw(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:a}=e,i=Object.keys(s).map(u=>{const d=r==null?void 0:r[u],h=a==null?void 0:a[u];if(d===null)return null;const m=gw(d)||gw(h);return s[u][m]}),l=r&&Object.entries(r).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:h,className:m,...p}=d;return Object.entries(p).every(v=>{let[g,w]=v;return Array.isArray(w)?w.includes({...a,...l}[g]):{...a,...l}[g]===w})?[...u,h,m]:u},[]);return vw(t,i,c,r==null?void 0:r.class,r==null?void 0:r.className)},$g="-",WM=t=>{const e=HM(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:i=>{const l=i.split($g);return l[0]===""&&l.length!==1&&l.shift(),_S(l,e)||VM(i)},getConflictingClassGroupIds:(i,l)=>{const c=r[i]||[];return l&&n[i]?[...c,...n[i]]:c}}},_S=(t,e)=>{var i;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?_S(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const a=t.join($g);return(i=e.validators.find(({validator:l})=>l(a)))==null?void 0:i.classGroupId},yw=/^\[(.+)\]$/,VM=t=>{if(yw.test(t)){const e=yw.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},HM=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return KM(Object.entries(t.classGroups),r).forEach(([a,i])=>{ap(i,n,a,e)}),n},ap=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const a=s===""?e:xw(e,s);a.classGroupId=r;return}if(typeof s=="function"){if(qM(s)){ap(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([a,i])=>{ap(i,xw(e,a),r,n)})})},xw=(t,e)=>{let r=t;return e.split($g).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},qM=t=>t.isThemeGetter,KM=(t,e)=>e?t.map(([r,n])=>{const s=n.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([i,l])=>[e+i,l])):a);return[r,s]}):t,GM=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(a,i)=>{r.set(a,i),e++,e>t&&(e=0,n=r,r=new Map)};return{get(a){let i=r.get(a);if(i!==void 0)return i;if((i=n.get(a))!==void 0)return s(a,i),i},set(a,i){r.has(a)?r.set(a,i):s(a,i)}}},bS="!",YM=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],a=e.length,i=l=>{const c=[];let u=0,d=0,h;for(let w=0;w<l.length;w++){let x=l[w];if(u===0){if(x===s&&(n||l.slice(w,w+a)===e)){c.push(l.slice(d,w)),d=w+a;continue}if(x==="/"){h=w;continue}}x==="["?u++:x==="]"&&u--}const m=c.length===0?l:l.substring(d),p=m.startsWith(bS),v=p?m.substring(1):m,g=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:i}):i},QM=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},JM=t=>({cache:GM(t.cacheSize),parseClassName:YM(t),...WM(t)}),XM=/\s+/,ZM=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,a=[],i=t.trim().split(XM);let l="";for(let c=i.length-1;c>=0;c-=1){const u=i[c],{modifiers:d,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:p}=r(u);let v=!!p,g=n(v?m.substring(0,p):m);if(!g){if(!v){l=u+(l.length>0?" "+l:l);continue}if(g=n(m),!g){l=u+(l.length>0?" "+l:l);continue}v=!1}const w=QM(d).join(":"),x=h?w+bS:w,y=x+g;if(a.includes(y))continue;a.push(y);const _=s(g,v);for(let b=0;b<_.length;++b){const j=_[b];a.push(x+j)}l=u+(l.length>0?" "+l:l)}return l};function eI(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=jS(e))&&(n&&(n+=" "),n+=r);return n}const jS=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=jS(t[n]))&&(r&&(r+=" "),r+=e);return r};function tI(t,...e){let r,n,s,a=i;function i(c){const u=e.reduce((d,h)=>h(d),t());return r=JM(u),n=r.cache.get,s=r.cache.set,a=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=ZM(c,r);return s(c,d),d}return function(){return a(eI.apply(null,arguments))}}const nt=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},SS=/^\[(?:([a-z-]+):)?(.+)\]$/i,rI=/^\d+\/\d+$/,nI=new Set(["px","full","screen"]),sI=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,aI=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,oI=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,iI=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,lI=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,$n=t=>Yo(t)||nI.has(t)||rI.test(t),us=t=>Li(t,"length",gI),Yo=t=>!!t&&!Number.isNaN(Number(t)),mf=t=>Li(t,"number",Yo),Ji=t=>!!t&&Number.isInteger(Number(t)),cI=t=>t.endsWith("%")&&Yo(t.slice(0,-1)),Oe=t=>SS.test(t),ds=t=>sI.test(t),uI=new Set(["length","size","percentage"]),dI=t=>Li(t,uI,NS),hI=t=>Li(t,"position",NS),fI=new Set(["image","url"]),mI=t=>Li(t,fI,yI),pI=t=>Li(t,"",vI),Xi=()=>!0,Li=(t,e,r)=>{const n=SS.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},gI=t=>aI.test(t)&&!oI.test(t),NS=()=>!1,vI=t=>iI.test(t),yI=t=>lI.test(t),xI=()=>{const t=nt("colors"),e=nt("spacing"),r=nt("blur"),n=nt("brightness"),s=nt("borderColor"),a=nt("borderRadius"),i=nt("borderSpacing"),l=nt("borderWidth"),c=nt("contrast"),u=nt("grayscale"),d=nt("hueRotate"),h=nt("invert"),m=nt("gap"),p=nt("gradientColorStops"),v=nt("gradientColorStopPositions"),g=nt("inset"),w=nt("margin"),x=nt("opacity"),y=nt("padding"),_=nt("saturate"),b=nt("scale"),j=nt("sepia"),P=nt("skew"),S=nt("space"),k=nt("translate"),C=()=>["auto","contain","none"],E=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",Oe,e],R=()=>[Oe,e],X=()=>["",$n,us],O=()=>["auto",Yo,Oe],se=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],I=()=>["solid","dashed","dotted","double","none"],F=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>["start","end","center","between","around","evenly","stretch"],B=()=>["","0",Oe],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>[Yo,Oe];return{cacheSize:500,separator:":",theme:{colors:[Xi],spacing:[$n,us],blur:["none","",ds,Oe],brightness:L(),borderColor:[t],borderRadius:["none","","full",ds,Oe],borderSpacing:R(),borderWidth:X(),contrast:L(),grayscale:B(),hueRotate:L(),invert:B(),gap:R(),gradientColorStops:[t],gradientColorStopPositions:[cI,us],inset:M(),margin:M(),opacity:L(),padding:R(),saturate:L(),scale:L(),sepia:B(),skew:L(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",Oe]}],container:["container"],columns:[{columns:[ds]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...se(),Oe]}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ji,Oe]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Oe]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",Ji,Oe]}],"grid-cols":[{"grid-cols":[Xi]}],"col-start-end":[{col:["auto",{span:["full",Ji,Oe]},Oe]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[Xi]}],"row-start-end":[{row:["auto",{span:[Ji,Oe]},Oe]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Oe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Oe]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...T()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...T(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...T(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Oe,e]}],"min-w":[{"min-w":[Oe,e,"min","max","fit"]}],"max-w":[{"max-w":[Oe,e,"none","full","min","max","fit","prose",{screen:[ds]},ds]}],h:[{h:[Oe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Oe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Oe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Oe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ds,us]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",mf]}],"font-family":[{font:[Xi]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Oe]}],"line-clamp":[{"line-clamp":["none",Yo,mf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",$n,Oe]}],"list-image":[{"list-image":["none",Oe]}],"list-style-type":[{list:["none","disc","decimal",Oe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...I(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",$n,us]}],"underline-offset":[{"underline-offset":["auto",$n,Oe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Oe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Oe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...se(),hI]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",dI]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},mI]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...I(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:I()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...I()]}],"outline-offset":[{"outline-offset":[$n,Oe]}],"outline-w":[{outline:[$n,us]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:X()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[$n,us]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ds,pI]}],"shadow-color":[{shadow:[Xi]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...F(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ds,Oe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Oe]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",Oe]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",Oe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[Ji,Oe]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Oe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Oe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Oe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[$n,us,mf]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},wI=tI(xI);function J(...t){return wI(wS(t))}const Kl=uc("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Y=f.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...s},a)=>{const i=n?LM:"button";return o.jsx(i,{className:J(Kl({variant:e,size:r,className:t})),ref:a,...s})});Y.displayName="Button";const ke=f.forwardRef(({className:t,type:e,...r},n)=>o.jsx("input",{type:e,className:J("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));ke.displayName="Input";var _I=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xe=_I.reduce((t,e)=>{const r=Gs(`Primitive.${e}`),n=f.forwardRef((s,a)=>{const{asChild:i,...l}=s,c=i?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:a})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function kS(t,e){t&&Oi.flushSync(()=>t.dispatchEvent(e))}var bI="Label",CS=f.forwardRef((t,e)=>o.jsx(xe.label,{...t,ref:e,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));CS.displayName=bI;var ES=CS;const jI=uc("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),le=f.forwardRef(({className:t,...e},r)=>o.jsx(ES,{ref:r,className:J(jI(),t),...e}));le.displayName=ES.displayName;const SI=uc("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ji=f.forwardRef(({className:t,variant:e,...r},n)=>o.jsx("div",{ref:n,role:"alert",className:J(SI({variant:e}),t),...r}));ji.displayName="Alert";const NI=f.forwardRef(({className:t,...e},r)=>o.jsx("h5",{ref:r,className:J("mb-1 font-medium leading-none tracking-tight",t),...e}));NI.displayName="AlertTitle";const Si=f.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:J("text-sm [&_p]:leading-relaxed",t),...e}));Si.displayName="AlertDescription";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),PS=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var CI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=f.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:i,...l},c)=>f.createElement("svg",{ref:c,...CI,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:PS("lucide",s),...l},[...i.map(([u,d])=>f.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=(t,e)=>{const r=f.forwardRef(({className:n,...s},a)=>f.createElement(EI,{ref:a,iconNode:e,className:PS(`lucide-${kI(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=ce("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=ce("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=ce("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=ce("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=ce("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=ce("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=ce("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=ce("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=ce("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=ce("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=ce("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=ce("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=ce("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=ce("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=ce("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=ce("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=ce("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=ce("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=ce("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=ce("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=ce("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=ce("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=ce("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=ce("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=ce("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=ce("Kanban",[["path",{d:"M6 5v11",key:"mdvv1e"}],["path",{d:"M12 5v6",key:"14ar3b"}],["path",{d:"M18 5v14",key:"7ji314"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=ce("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=ce("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=ce("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=ce("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=ce("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=ce("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=ce("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=ce("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=ce("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=ce("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=ce("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=ce("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=ce("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=ce("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=ce("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=ce("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=ce("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=ce("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=ce("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=ce("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=ce("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=ce("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=ce("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=ce("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=ce("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=ce("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=ce("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=ce("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=ce("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),cL=()=>{const{t}=gt(),[e,r]=f.useState(""),[n,s]=f.useState(""),[a,i]=f.useState(!1),[l,c]=f.useState(""),[u,d]=f.useState(!1);f.useState(!1);const{signIn:h,signInWithGoogle:m}=St(),p=fn(),v=async g=>{g.preventDefault(),c(""),d(!0);try{const w=await h(e,n);w&&(console.log("[LoginForm] Sign in successful, user role:",w.role),w.role==="client"?p("/client-portal"):w.role==="employee"||w.role==="team_leader"?window.location.href="/#/employee_dashboard":w.role==="partner"?window.location.href="/#/partner-dashboard":w.role==="partner_employee"?window.location.href="/#/partner-employee-dashboard":window.location.href="/#/dashboard")}catch(w){console.error("[LoginForm] Sign in error:",w),c(w.message||t("auth.failedToSignIn")),d(!1)}};return o.jsxs("div",{className:"w-full max-w-md mx-auto space-y-6 px-4 sm:px-0",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:t("auth.signIn")}),o.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:t("auth.enterCredentials")})]}),o.jsxs("form",{onSubmit:v,className:"space-y-5",children:[l&&o.jsx(ji,{variant:"destructive",children:o.jsx(Si,{className:"text-sm",children:l})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{htmlFor:"email",className:"text-sm font-medium",children:t("auth.email")}),o.jsx(ke,{id:"email",type:"email",value:e,onChange:g=>r(g.target.value),placeholder:"you@middar.com",required:!0,className:"h-11 text-base"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{htmlFor:"password",className:"text-sm font-medium",children:t("auth.password")}),o.jsxs("div",{className:"relative",children:[o.jsx(ke,{id:"password",type:a?"text":"password",value:n,onChange:g=>s(g.target.value),placeholder:"",required:!0,className:"h-11 text-base pe-10"}),o.jsx(Y,{type:"button",variant:"ghost",size:"sm",className:"absolute end-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!a),"aria-label":a?"Hide password":"Show password",children:a?o.jsx(WI,{className:"h-4 w-4 text-muted-foreground"}):o.jsx(hd,{className:"h-4 w-4 text-muted-foreground"})})]})]}),o.jsx(Y,{type:"submit",className:"w-full h-11 text-base font-medium shadow-lg hover:shadow-xl transition-all duration-200",disabled:u,children:u?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-current"}),t("auth.signingIn")]}):t("auth.signInButton")})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:t("auth.dontHaveAccount")}),o.jsx(Y,{variant:"link",className:"p-0 h-auto text-sm font-medium hover:text-primary transition-colors",onClick:()=>p("/signup"),children:t("auth.signUp")})]})]})},uL=()=>{const[t,e]=f.useState(!1);St();const r=fn(),{t:n}=gt();return o.jsxs("div",{className:"w-full max-w-md space-y-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-3xl font-bold",children:n("auth.createAccount")}),o.jsx("p",{className:"text-muted-foreground mt-2",children:n("auth.signUpToGetStarted")})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"text-center text-sm text-muted-foreground",children:n("auth.chooseAccountTypeSignUp")}),t&&o.jsx("div",{className:"text-center text-sm text-muted-foreground",children:n("auth.redirectingToGoogle")})]}),o.jsxs("div",{className:"text-center text-sm",children:[o.jsxs("span",{className:"text-muted-foreground",children:[n("auth.alreadyHaveAccount")," "]}),o.jsx(Y,{variant:"link",className:"p-0",onClick:()=>r("/login"),children:n("auth.signIn")})]})]})},dL=[{labelKey:"navigation.clientPortal",path:"/client-portal",roles:["client"],icon:HI},{labelKey:"navigation.partnerDashboard",path:"/partner-dashboard",roles:["partner"],icon:MI},{labelKey:"navigation.dashboard",path:"/dashboard",roles:["admin","manager"],icon:_w},{labelKey:"navigation.empDashboard",path:"/employee_dashboard",roles:["employee","team_leader"],icon:_w},{labelKey:"navigation.surveys",path:"/surveys",roles:["admin","manager","employee","team_leader"],icon:Qo},{labelKey:"navigation.leads",path:"/leads",roles:["admin","manager","employee","team_leader"],icon:Dn},{labelKey:"navigation.projects",path:"/projects",roles:["admin","manager","employee","team_leader"],icon:Ug},{labelKey:"navigation.tasks",path:"/tasks",roles:["admin","manager","employee","team_leader"],icon:AS},{labelKey:"navigation.tickets",path:"/tickets",roles:["admin","manager","employee","team_leader","client"],icon:eL},{labelKey:"navigation.teams",path:"/teams",roles:["admin","manager","employee","team_leader"],icon:DS},{labelKey:"navigation.chats",path:"/chats",roles:["admin","manager","employee","team_leader","client"],icon:qg},{labelKey:"navigation.users",path:"/users",roles:["admin"],icon:sL}];function Nw({onNavigate:t}={}){var a,i;const e=os(),{user:r}=St(),{t:n}=gt(),s=dL.filter(l=>r&&l.roles.includes(r.role));return o.jsxs("div",{className:"h-full w-full bg-sidebar border-r border-sidebar-border flex flex-col",children:[o.jsx("div",{className:"p-4 sm:p-6",children:o.jsxs("div",{className:"flex items-center gap-2 mb-6 sm:mb-8 px-2",children:[o.jsx("img",{src:"/favicon.ico",alt:"Logo",className:"h-8 w-8 rounded-lg"}),o.jsx("h1",{className:"text-xl font-bold text-sidebar-foreground tracking-tight",children:n("landing.brandName")})]})}),o.jsx("div",{className:"flex-1 px-4 sm:px-6",children:o.jsx("nav",{className:"space-y-1",children:s.map(l=>{const c=e.pathname===l.path,u=l.icon;return o.jsxs(Hm,{to:l.path,onClick:t,className:J("flex items-center gap-3 px-3 py-2.5 rounded-md text-sm font-medium transition-all duration-200 group",c?"bg-primary text-primary-foreground shadow-sm":"text-sidebar-foreground/70 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground"),children:[o.jsx(u,{className:J("h-4 w-4",c?"text-primary-foreground":"text-sidebar-foreground/50 group-hover:text-sidebar-accent-foreground")}),o.jsx("span",{children:n(l.labelKey)})]},l.path+l.labelKey)})})}),o.jsx("div",{className:"p-4 sm:p-6 border-t border-sidebar-border/50",children:o.jsxs("div",{className:"flex items-center gap-3 px-2 py-2 rounded-lg bg-sidebar-accent/50",children:[o.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/20 flex items-center justify-center text-primary font-bold text-sm",children:(a=r==null?void 0:r.email)==null?void 0:a.charAt(0).toUpperCase()}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-sidebar-foreground truncate",children:r==null?void 0:r.email}),o.jsx("p",{className:"text-xs text-sidebar-foreground/50 capitalize",children:(i=r==null?void 0:r.role)==null?void 0:i.replace("_"," ")})]})]})})]})}function hL(){const t=os(),{t:e}=gt(),r=t.pathname.split("/").filter(a=>a);if(r.length===0)return null;const n={dashboard:"navigation.dashboard",projects:"navigation.projects",users:"navigation.users",settings:"navigation.settings",leads:"navigation.leads",tickets:"navigation.tickets",tasks:"navigation.tasks",teams:"navigation.teams",clients:"navigation.clients",chats:"navigation.chats",surveys:"navigation.surveys","client-portal":"navigation.clientPortal","partner-dashboard":"navigation.partnerDashboard",employee_dashboard:"navigation.empDashboard","partner-employee-dashboard":"auth.partnerEmployee"},s=a=>n[a]?e(n[a]):/^\d+$/.test(a)||a.length>20?a:a.split("-").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" ");return o.jsxs("nav",{className:"flex items-center text-sm text-muted-foreground","aria-label":"Breadcrumb",children:[o.jsx(Hm,{to:"/",className:"hover:text-foreground transition-colors",children:e("navigation.home")}),r.map((a,i)=>{const l=`/${r.slice(0,i+1).join("/")}`,c=i===r.length-1,u=s(a);return o.jsxs("div",{className:"flex items-center",children:[o.jsx(zg,{className:"h-4 w-4 mx-2 text-muted-foreground rtl:rotate-180"}),c?o.jsx("span",{className:"text-foreground font-medium",children:u}):o.jsx(Hm,{to:l,className:"hover:text-foreground transition-colors",children:u})]},a)})]})}function ip(t,[e,r]){return Math.min(r,Math.max(e,t))}function oe(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t==null||t(s),r===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function fL(t,e){const r=f.createContext(e),n=a=>{const{children:i,...l}=a,c=f.useMemo(()=>l,Object.values(l));return o.jsx(r.Provider,{value:c,children:i})};n.displayName=t+"Provider";function s(a){const i=f.useContext(r);if(i)return i;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[n,s]}function yr(t,e=[]){let r=[];function n(a,i){const l=f.createContext(i),c=r.length;r=[...r,i];const u=h=>{var x;const{scope:m,children:p,...v}=h,g=((x=m==null?void 0:m[t])==null?void 0:x[c])||l,w=f.useMemo(()=>v,Object.values(v));return o.jsx(g.Provider,{value:w,children:p})};u.displayName=a+"Provider";function d(h,m){var g;const p=((g=m==null?void 0:m[t])==null?void 0:g[c])||l,v=f.useContext(p);if(v)return v;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[u,d]}const s=()=>{const a=r.map(i=>f.createContext(i));return function(l){const c=(l==null?void 0:l[t])||a;return f.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,mL(s,...e)]}function mL(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const i=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return f.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return r.scopeName=e.scopeName,r}function Yg(t){const e=t+"CollectionProvider",[r,n]=yr(e),[s,a]=r(e,{collectionRef:{current:null},itemMap:new Map}),i=g=>{const{scope:w,children:x}=g,y=fs.useRef(null),_=fs.useRef(new Map).current;return o.jsx(s,{scope:w,itemMap:_,collectionRef:y,children:x})};i.displayName=e;const l=t+"CollectionSlot",c=Gs(l),u=fs.forwardRef((g,w)=>{const{scope:x,children:y}=g,_=a(l,x),b=Ae(w,_.collectionRef);return o.jsx(c,{ref:b,children:y})});u.displayName=l;const d=t+"CollectionItemSlot",h="data-radix-collection-item",m=Gs(d),p=fs.forwardRef((g,w)=>{const{scope:x,children:y,..._}=g,b=fs.useRef(null),j=Ae(w,b),P=a(d,x);return fs.useEffect(()=>(P.itemMap.set(b,{ref:b,..._}),()=>void P.itemMap.delete(b))),o.jsx(m,{[h]:"",ref:j,children:y})});p.displayName=d;function v(g){const w=a(t+"CollectionConsumer",g);return fs.useCallback(()=>{const y=w.collectionRef.current;if(!y)return[];const _=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((P,S)=>_.indexOf(P.ref.current)-_.indexOf(S.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:i,Slot:u,ItemSlot:p},v,n]}var pL=f.createContext(void 0);function hc(t){const e=f.useContext(pL);return t||e||"ltr"}function Dt(t){const e=f.useRef(t);return f.useEffect(()=>{e.current=t}),f.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function gL(t,e=globalThis==null?void 0:globalThis.document){const r=Dt(t);f.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var vL="DismissableLayer",lp="dismissableLayer.update",yL="dismissableLayer.pointerDownOutside",xL="dismissableLayer.focusOutside",kw,MS=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),fc=f.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:i,onDismiss:l,...c}=t,u=f.useContext(MS),[d,h]=f.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=f.useState({}),v=Ae(e,S=>h(S)),g=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(w),y=d?g.indexOf(d):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,b=y>=x,j=bL(S=>{const k=S.target,C=[...u.branches].some(E=>E.contains(k));!b||C||(s==null||s(S),i==null||i(S),S.defaultPrevented||l==null||l())},m),P=jL(S=>{const k=S.target;[...u.branches].some(E=>E.contains(k))||(a==null||a(S),i==null||i(S),S.defaultPrevented||l==null||l())},m);return gL(S=>{y===u.layers.size-1&&(n==null||n(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},m),f.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(kw=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Cw(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=kw)}},[d,m,r,u]),f.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Cw())},[d,u]),f.useEffect(()=>{const S=()=>p({});return document.addEventListener(lp,S),()=>document.removeEventListener(lp,S)},[]),o.jsx(xe.div,{...c,ref:v,style:{pointerEvents:_?b?"auto":"none":void 0,...t.style},onFocusCapture:oe(t.onFocusCapture,P.onFocusCapture),onBlurCapture:oe(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:oe(t.onPointerDownCapture,j.onPointerDownCapture)})});fc.displayName=vL;var wL="DismissableLayerBranch",_L=f.forwardRef((t,e)=>{const r=f.useContext(MS),n=f.useRef(null),s=Ae(e,n);return f.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),o.jsx(xe.div,{...t,ref:s})});_L.displayName=wL;function bL(t,e=globalThis==null?void 0:globalThis.document){const r=Dt(t),n=f.useRef(!1),s=f.useRef(()=>{});return f.useEffect(()=>{const a=l=>{if(l.target&&!n.current){let c=function(){IS(yL,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);n.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function jL(t,e=globalThis==null?void 0:globalThis.document){const r=Dt(t),n=f.useRef(!1);return f.useEffect(()=>{const s=a=>{a.target&&!n.current&&IS(xL,r,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Cw(){const t=new CustomEvent(lp);document.dispatchEvent(t)}function IS(t,e,r,{discrete:n}){const s=r.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?kS(s,a):s.dispatchEvent(a)}var pf=0;function Jd(){f.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Ew()),document.body.insertAdjacentElement("beforeend",t[1]??Ew()),pf++,()=>{pf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),pf--}},[])}function Ew(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var gf="focusScope.autoFocusOnMount",vf="focusScope.autoFocusOnUnmount",Pw={bubbles:!1,cancelable:!0},SL="FocusScope",mc=f.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...i}=t,[l,c]=f.useState(null),u=Dt(s),d=Dt(a),h=f.useRef(null),m=Ae(e,g=>c(g)),p=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(n){let g=function(_){if(p.paused||!l)return;const b=_.target;l.contains(b)?h.current=b:ps(h.current,{select:!0})},w=function(_){if(p.paused||!l)return;const b=_.relatedTarget;b!==null&&(l.contains(b)||ps(h.current,{select:!0}))},x=function(_){if(document.activeElement===document.body)for(const j of _)j.removedNodes.length>0&&ps(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const y=new MutationObserver(x);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),y.disconnect()}}},[n,l,p.paused]),f.useEffect(()=>{if(l){Rw.add(p);const g=document.activeElement;if(!l.contains(g)){const x=new CustomEvent(gf,Pw);l.addEventListener(gf,u),l.dispatchEvent(x),x.defaultPrevented||(NL(TL(LS(l)),{select:!0}),document.activeElement===g&&ps(l))}return()=>{l.removeEventListener(gf,u),setTimeout(()=>{const x=new CustomEvent(vf,Pw);l.addEventListener(vf,d),l.dispatchEvent(x),x.defaultPrevented||ps(g??document.body,{select:!0}),l.removeEventListener(vf,d),Rw.remove(p)},0)}}},[l,u,d,p]);const v=f.useCallback(g=>{if(!r&&!n||p.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,x=document.activeElement;if(w&&x){const y=g.currentTarget,[_,b]=kL(y);_&&b?!g.shiftKey&&x===b?(g.preventDefault(),r&&ps(_,{select:!0})):g.shiftKey&&x===_&&(g.preventDefault(),r&&ps(b,{select:!0})):x===y&&g.preventDefault()}},[r,n,p.paused]);return o.jsx(xe.div,{tabIndex:-1,...i,ref:m,onKeyDown:v})});mc.displayName=SL;function NL(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(ps(n,{select:e}),document.activeElement!==r)return}function kL(t){const e=LS(t),r=Tw(e,t),n=Tw(e.reverse(),t);return[r,n]}function LS(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function Tw(t,e){for(const r of t)if(!CL(r,{upTo:e}))return r}function CL(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function EL(t){return t instanceof HTMLInputElement&&"select"in t}function ps(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&EL(t)&&e&&t.select()}}var Rw=PL();function PL(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=Ow(t,e),t.unshift(e)},remove(e){var r;t=Ow(t,e),(r=t[0])==null||r.resume()}}}function Ow(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function TL(t){return t.filter(e=>e.tagName!=="A")}var jt=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},RL=Cp[" useId ".trim().toString()]||(()=>{}),OL=0;function on(t){const[e,r]=f.useState(RL());return jt(()=>{r(n=>n??String(OL++))},[t]),e?`radix-${e}`:""}const DL=["top","right","bottom","left"],Qs=Math.min,wr=Math.max,md=Math.round,iu=Math.floor,Tn=t=>({x:t,y:t}),AL={left:"right",right:"left",bottom:"top",top:"bottom"},ML={start:"end",end:"start"};function cp(t,e,r){return wr(t,Qs(e,r))}function rs(t,e){return typeof t=="function"?t(e):t}function ns(t){return t.split("-")[0]}function Fi(t){return t.split("-")[1]}function Qg(t){return t==="x"?"y":"x"}function Jg(t){return t==="y"?"height":"width"}const IL=new Set(["top","bottom"]);function Nn(t){return IL.has(ns(t))?"y":"x"}function Xg(t){return Qg(Nn(t))}function LL(t,e,r){r===void 0&&(r=!1);const n=Fi(t),s=Xg(t),a=Jg(s);let i=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(i=pd(i)),[i,pd(i)]}function FL(t){const e=pd(t);return[up(t),e,up(e)]}function up(t){return t.replace(/start|end/g,e=>ML[e])}const Dw=["left","right"],Aw=["right","left"],$L=["top","bottom"],UL=["bottom","top"];function BL(t,e,r){switch(t){case"top":case"bottom":return r?e?Aw:Dw:e?Dw:Aw;case"left":case"right":return e?$L:UL;default:return[]}}function zL(t,e,r,n){const s=Fi(t);let a=BL(ns(t),r==="start",n);return s&&(a=a.map(i=>i+"-"+s),e&&(a=a.concat(a.map(up)))),a}function pd(t){return t.replace(/left|right|bottom|top/g,e=>AL[e])}function WL(t){return{top:0,right:0,bottom:0,left:0,...t}}function FS(t){return typeof t!="number"?WL(t):{top:t,right:t,bottom:t,left:t}}function gd(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function Mw(t,e,r){let{reference:n,floating:s}=t;const a=Nn(e),i=Xg(e),l=Jg(i),c=ns(e),u=a==="y",d=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,m=n[l]/2-s[l]/2;let p;switch(c){case"top":p={x:d,y:n.y-s.height};break;case"bottom":p={x:d,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:h};break;case"left":p={x:n.x-s.width,y:h};break;default:p={x:n.x,y:n.y}}switch(Fi(e)){case"start":p[i]-=m*(r&&u?-1:1);break;case"end":p[i]+=m*(r&&u?-1:1);break}return p}const VL=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:a=[],platform:i}=r,l=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(e));let u=await i.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=Mw(u,n,c),m=n,p={},v=0;for(let g=0;g<l.length;g++){const{name:w,fn:x}=l[g],{x:y,y:_,data:b,reset:j}=await x({x:d,y:h,initialPlacement:n,placement:m,strategy:s,middlewareData:p,rects:u,platform:i,elements:{reference:t,floating:e}});d=y??d,h=_??h,p={...p,[w]:{...p[w],...b}},j&&v<=50&&(v++,typeof j=="object"&&(j.placement&&(m=j.placement),j.rects&&(u=j.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:s}):j.rects),{x:d,y:h}=Mw(u,m,c)),g=-1)}return{x:d,y:h,placement:m,strategy:s,middlewareData:p}};async function Gl(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:a,rects:i,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:p=0}=rs(e,t),v=FS(p),w=l[m?h==="floating"?"reference":"floating":h],x=gd(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(w)))==null||r?w:w.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),y=h==="floating"?{x:n,y:s,width:i.floating.width,height:i.floating.height}:i.reference,_=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),b=await(a.isElement==null?void 0:a.isElement(_))?await(a.getScale==null?void 0:a.getScale(_))||{x:1,y:1}:{x:1,y:1},j=gd(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:_,strategy:c}):y);return{top:(x.top-j.top+v.top)/b.y,bottom:(j.bottom-x.bottom+v.bottom)/b.y,left:(x.left-j.left+v.left)/b.x,right:(j.right-x.right+v.right)/b.x}}const HL=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:a,platform:i,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=rs(t,e)||{};if(u==null)return{};const h=FS(d),m={x:r,y:n},p=Xg(s),v=Jg(p),g=await i.getDimensions(u),w=p==="y",x=w?"top":"left",y=w?"bottom":"right",_=w?"clientHeight":"clientWidth",b=a.reference[v]+a.reference[p]-m[p]-a.floating[v],j=m[p]-a.reference[p],P=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let S=P?P[_]:0;(!S||!await(i.isElement==null?void 0:i.isElement(P)))&&(S=l.floating[_]||a.floating[v]);const k=b/2-j/2,C=S/2-g[v]/2-1,E=Qs(h[x],C),M=Qs(h[y],C),R=E,X=S-g[v]-M,O=S/2-g[v]/2+k,se=cp(R,O,X),I=!c.arrow&&Fi(s)!=null&&O!==se&&a.reference[v]/2-(O<R?E:M)-g[v]/2<0,F=I?O<R?O-R:O-X:0;return{[p]:m[p]+F,data:{[p]:se,centerOffset:O-se-F,...I&&{alignmentOffset:F}},reset:I}}}),qL=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:a,rects:i,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:g=!0,...w}=rs(t,e);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const x=ns(s),y=Nn(l),_=ns(l)===l,b=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=m||(_||!g?[pd(l)]:FL(l)),P=v!=="none";!m&&P&&j.push(...zL(l,g,v,b));const S=[l,...j],k=await Gl(e,w),C=[];let E=((n=a.flip)==null?void 0:n.overflows)||[];if(d&&C.push(k[x]),h){const O=LL(s,i,b);C.push(k[O[0]],k[O[1]])}if(E=[...E,{placement:s,overflows:C}],!C.every(O=>O<=0)){var M,R;const O=(((M=a.flip)==null?void 0:M.index)||0)+1,se=S[O];if(se&&(!(h==="alignment"?y!==Nn(se):!1)||E.every(T=>T.overflows[0]>0&&Nn(T.placement)===y)))return{data:{index:O,overflows:E},reset:{placement:se}};let I=(R=E.filter(F=>F.overflows[0]<=0).sort((F,T)=>F.overflows[1]-T.overflows[1])[0])==null?void 0:R.placement;if(!I)switch(p){case"bestFit":{var X;const F=(X=E.filter(T=>{if(P){const B=Nn(T.placement);return B===y||B==="y"}return!0}).map(T=>[T.placement,T.overflows.filter(B=>B>0).reduce((B,K)=>B+K,0)]).sort((T,B)=>T[1]-B[1])[0])==null?void 0:X[0];F&&(I=F);break}case"initialPlacement":I=l;break}if(s!==I)return{reset:{placement:I}}}return{}}}};function Iw(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Lw(t){return DL.some(e=>t[e]>=0)}const KL=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...s}=rs(t,e);switch(n){case"referenceHidden":{const a=await Gl(e,{...s,elementContext:"reference"}),i=Iw(a,r.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Lw(i)}}}case"escaped":{const a=await Gl(e,{...s,altBoundary:!0}),i=Iw(a,r.floating);return{data:{escapedOffsets:i,escaped:Lw(i)}}}default:return{}}}}},$S=new Set(["left","top"]);async function GL(t,e){const{placement:r,platform:n,elements:s}=t,a=await(n.isRTL==null?void 0:n.isRTL(s.floating)),i=ns(r),l=Fi(r),c=Nn(r)==="y",u=$S.has(i)?-1:1,d=a&&c?-1:1,h=rs(e,t);let{mainAxis:m,crossAxis:p,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(p=l==="end"?v*-1:v),c?{x:p*d,y:m*u}:{x:m*u,y:p*d}}const YL=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:a,placement:i,middlewareData:l}=e,c=await GL(e,t);return i===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:i}}}}},QL=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:a=!0,crossAxis:i=!1,limiter:l={fn:w=>{let{x,y}=w;return{x,y}}},...c}=rs(t,e),u={x:r,y:n},d=await Gl(e,c),h=Nn(ns(s)),m=Qg(h);let p=u[m],v=u[h];if(a){const w=m==="y"?"top":"left",x=m==="y"?"bottom":"right",y=p+d[w],_=p-d[x];p=cp(y,p,_)}if(i){const w=h==="y"?"top":"left",x=h==="y"?"bottom":"right",y=v+d[w],_=v-d[x];v=cp(y,v,_)}const g=l.fn({...e,[m]:p,[h]:v});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[m]:a,[h]:i}}}}}},JL=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:a,middlewareData:i}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=rs(t,e),d={x:r,y:n},h=Nn(s),m=Qg(h);let p=d[m],v=d[h];const g=rs(l,e),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const _=m==="y"?"height":"width",b=a.reference[m]-a.floating[_]+w.mainAxis,j=a.reference[m]+a.reference[_]-w.mainAxis;p<b?p=b:p>j&&(p=j)}if(u){var x,y;const _=m==="y"?"width":"height",b=$S.has(ns(s)),j=a.reference[h]-a.floating[_]+(b&&((x=i.offset)==null?void 0:x[h])||0)+(b?0:w.crossAxis),P=a.reference[h]+a.reference[_]+(b?0:((y=i.offset)==null?void 0:y[h])||0)-(b?w.crossAxis:0);v<j?v=j:v>P&&(v=P)}return{[m]:p,[h]:v}}}},XL=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:a,platform:i,elements:l}=e,{apply:c=()=>{},...u}=rs(t,e),d=await Gl(e,u),h=ns(s),m=Fi(s),p=Nn(s)==="y",{width:v,height:g}=a.floating;let w,x;h==="top"||h==="bottom"?(w=h,x=m===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(x=h,w=m==="end"?"top":"bottom");const y=g-d.top-d.bottom,_=v-d.left-d.right,b=Qs(g-d[w],y),j=Qs(v-d[x],_),P=!e.middlewareData.shift;let S=b,k=j;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(k=_),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(S=y),P&&!m){const E=wr(d.left,0),M=wr(d.right,0),R=wr(d.top,0),X=wr(d.bottom,0);p?k=v-2*(E!==0||M!==0?E+M:wr(d.left,d.right)):S=g-2*(R!==0||X!==0?R+X:wr(d.top,d.bottom))}await c({...e,availableWidth:k,availableHeight:S});const C=await i.getDimensions(l.floating);return v!==C.width||g!==C.height?{reset:{rects:!0}}:{}}}};function Xd(){return typeof window<"u"}function $i(t){return US(t)?(t.nodeName||"").toLowerCase():"#document"}function Nr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function In(t){var e;return(e=(US(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function US(t){return Xd()?t instanceof Node||t instanceof Nr(t).Node:!1}function cn(t){return Xd()?t instanceof Element||t instanceof Nr(t).Element:!1}function An(t){return Xd()?t instanceof HTMLElement||t instanceof Nr(t).HTMLElement:!1}function Fw(t){return!Xd()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Nr(t).ShadowRoot}const ZL=new Set(["inline","contents"]);function pc(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=un(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!ZL.has(s)}const e4=new Set(["table","td","th"]);function t4(t){return e4.has($i(t))}const r4=[":popover-open",":modal"];function Zd(t){return r4.some(e=>{try{return t.matches(e)}catch{return!1}})}const n4=["transform","translate","scale","rotate","perspective"],s4=["transform","translate","scale","rotate","perspective","filter"],a4=["paint","layout","strict","content"];function Zg(t){const e=ev(),r=cn(t)?un(t):t;return n4.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||s4.some(n=>(r.willChange||"").includes(n))||a4.some(n=>(r.contain||"").includes(n))}function o4(t){let e=Js(t);for(;An(e)&&!Ni(e);){if(Zg(e))return e;if(Zd(e))return null;e=Js(e)}return null}function ev(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const i4=new Set(["html","body","#document"]);function Ni(t){return i4.has($i(t))}function un(t){return Nr(t).getComputedStyle(t)}function eh(t){return cn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Js(t){if($i(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Fw(t)&&t.host||In(t);return Fw(e)?e.host:e}function BS(t){const e=Js(t);return Ni(e)?t.ownerDocument?t.ownerDocument.body:t.body:An(e)&&pc(e)?e:BS(e)}function Yl(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=BS(t),a=s===((n=t.ownerDocument)==null?void 0:n.body),i=Nr(s);if(a){const l=dp(i);return e.concat(i,i.visualViewport||[],pc(s)?s:[],l&&r?Yl(l):[])}return e.concat(s,Yl(s,[],r))}function dp(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function zS(t){const e=un(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=An(t),a=s?t.offsetWidth:r,i=s?t.offsetHeight:n,l=md(r)!==a||md(n)!==i;return l&&(r=a,n=i),{width:r,height:n,$:l}}function tv(t){return cn(t)?t:t.contextElement}function Jo(t){const e=tv(t);if(!An(e))return Tn(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:a}=zS(e);let i=(a?md(r.width):r.width)/n,l=(a?md(r.height):r.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const l4=Tn(0);function WS(t){const e=Nr(t);return!ev()||!e.visualViewport?l4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function c4(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==Nr(t)?!1:e}function Xa(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),a=tv(t);let i=Tn(1);e&&(n?cn(n)&&(i=Jo(n)):i=Jo(t));const l=c4(a,r,n)?WS(a):Tn(0);let c=(s.left+l.x)/i.x,u=(s.top+l.y)/i.y,d=s.width/i.x,h=s.height/i.y;if(a){const m=Nr(a),p=n&&cn(n)?Nr(n):n;let v=m,g=dp(v);for(;g&&n&&p!==v;){const w=Jo(g),x=g.getBoundingClientRect(),y=un(g),_=x.left+(g.clientLeft+parseFloat(y.paddingLeft))*w.x,b=x.top+(g.clientTop+parseFloat(y.paddingTop))*w.y;c*=w.x,u*=w.y,d*=w.x,h*=w.y,c+=_,u+=b,v=Nr(g),g=dp(v)}}return gd({width:d,height:h,x:c,y:u})}function rv(t,e){const r=eh(t).scrollLeft;return e?e.left+r:Xa(In(t)).left+r}function VS(t,e,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),s=n.left+e.scrollLeft-(r?0:rv(t,n)),a=n.top+e.scrollTop;return{x:s,y:a}}function u4(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const a=s==="fixed",i=In(n),l=e?Zd(e.floating):!1;if(n===i||l&&a)return r;let c={scrollLeft:0,scrollTop:0},u=Tn(1);const d=Tn(0),h=An(n);if((h||!h&&!a)&&(($i(n)!=="body"||pc(i))&&(c=eh(n)),An(n))){const p=Xa(n);u=Jo(n),d.x=p.x+n.clientLeft,d.y=p.y+n.clientTop}const m=i&&!h&&!a?VS(i,c,!0):Tn(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+m.x,y:r.y*u.y-c.scrollTop*u.y+d.y+m.y}}function d4(t){return Array.from(t.getClientRects())}function h4(t){const e=In(t),r=eh(t),n=t.ownerDocument.body,s=wr(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),a=wr(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+rv(t);const l=-r.scrollTop;return un(n).direction==="rtl"&&(i+=wr(e.clientWidth,n.clientWidth)-s),{width:s,height:a,x:i,y:l}}function f4(t,e){const r=Nr(t),n=In(t),s=r.visualViewport;let a=n.clientWidth,i=n.clientHeight,l=0,c=0;if(s){a=s.width,i=s.height;const u=ev();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:a,height:i,x:l,y:c}}const m4=new Set(["absolute","fixed"]);function p4(t,e){const r=Xa(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,a=An(t)?Jo(t):Tn(1),i=t.clientWidth*a.x,l=t.clientHeight*a.y,c=s*a.x,u=n*a.y;return{width:i,height:l,x:c,y:u}}function $w(t,e,r){let n;if(e==="viewport")n=f4(t,r);else if(e==="document")n=h4(In(t));else if(cn(e))n=p4(e,r);else{const s=WS(t);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return gd(n)}function HS(t,e){const r=Js(t);return r===e||!cn(r)||Ni(r)?!1:un(r).position==="fixed"||HS(r,e)}function g4(t,e){const r=e.get(t);if(r)return r;let n=Yl(t,[],!1).filter(l=>cn(l)&&$i(l)!=="body"),s=null;const a=un(t).position==="fixed";let i=a?Js(t):t;for(;cn(i)&&!Ni(i);){const l=un(i),c=Zg(i);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&m4.has(s.position)||pc(i)&&!c&&HS(t,i))?n=n.filter(d=>d!==i):s=l,i=Js(i)}return e.set(t,n),n}function v4(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const i=[...r==="clippingAncestors"?Zd(e)?[]:g4(e,this._c):[].concat(r),n],l=i[0],c=i.reduce((u,d)=>{const h=$w(e,d,s);return u.top=wr(h.top,u.top),u.right=Qs(h.right,u.right),u.bottom=Qs(h.bottom,u.bottom),u.left=wr(h.left,u.left),u},$w(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function y4(t){const{width:e,height:r}=zS(t);return{width:e,height:r}}function x4(t,e,r){const n=An(e),s=In(e),a=r==="fixed",i=Xa(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const c=Tn(0);function u(){c.x=rv(s)}if(n||!n&&!a)if(($i(e)!=="body"||pc(s))&&(l=eh(e)),n){const p=Xa(e,!0,a,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&u();a&&!n&&s&&u();const d=s&&!n&&!a?VS(s,l):Tn(0),h=i.left+l.scrollLeft-c.x-d.x,m=i.top+l.scrollTop-c.y-d.y;return{x:h,y:m,width:i.width,height:i.height}}function yf(t){return un(t).position==="static"}function Uw(t,e){if(!An(t)||un(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return In(t)===r&&(r=r.ownerDocument.body),r}function qS(t,e){const r=Nr(t);if(Zd(t))return r;if(!An(t)){let s=Js(t);for(;s&&!Ni(s);){if(cn(s)&&!yf(s))return s;s=Js(s)}return r}let n=Uw(t,e);for(;n&&t4(n)&&yf(n);)n=Uw(n,e);return n&&Ni(n)&&yf(n)&&!Zg(n)?r:n||o4(t)||r}const w4=async function(t){const e=this.getOffsetParent||qS,r=this.getDimensions,n=await r(t.floating);return{reference:x4(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function _4(t){return un(t).direction==="rtl"}const b4={convertOffsetParentRelativeRectToViewportRelativeRect:u4,getDocumentElement:In,getClippingRect:v4,getOffsetParent:qS,getElementRects:w4,getClientRects:d4,getDimensions:y4,getScale:Jo,isElement:cn,isRTL:_4};function KS(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function j4(t,e){let r=null,n;const s=In(t);function a(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=t.getBoundingClientRect(),{left:d,top:h,width:m,height:p}=u;if(l||e(),!m||!p)return;const v=iu(h),g=iu(s.clientWidth-(d+m)),w=iu(s.clientHeight-(h+p)),x=iu(d),_={rootMargin:-v+"px "+-g+"px "+-w+"px "+-x+"px",threshold:wr(0,Qs(1,c))||1};let b=!0;function j(P){const S=P[0].intersectionRatio;if(S!==c){if(!b)return i();S?i(!1,S):n=setTimeout(()=>{i(!1,1e-7)},1e3)}S===1&&!KS(u,t.getBoundingClientRect())&&i(),b=!1}try{r=new IntersectionObserver(j,{..._,root:s.ownerDocument})}catch{r=new IntersectionObserver(j,_)}r.observe(t)}return i(!0),a}function S4(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=tv(t),d=s||a?[...u?Yl(u):[],...Yl(e)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",r,{passive:!0}),a&&x.addEventListener("resize",r)});const h=u&&l?j4(u,r):null;let m=-1,p=null;i&&(p=new ResizeObserver(x=>{let[y]=x;y&&y.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(e)})),r()}),u&&!c&&p.observe(u),p.observe(e));let v,g=c?Xa(t):null;c&&w();function w(){const x=Xa(t);g&&!KS(g,x)&&r(),g=x,v=requestAnimationFrame(w)}return r(),()=>{var x;d.forEach(y=>{s&&y.removeEventListener("scroll",r),a&&y.removeEventListener("resize",r)}),h==null||h(),(x=p)==null||x.disconnect(),p=null,c&&cancelAnimationFrame(v)}}const N4=YL,k4=QL,C4=qL,E4=XL,P4=KL,Bw=HL,T4=JL,R4=(t,e,r)=>{const n=new Map,s={platform:b4,...r},a={...s.platform,_c:n};return VL(t,e,{...s,platform:a})};var O4=typeof document<"u",D4=function(){},ku=O4?f.useLayoutEffect:D4;function vd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!vd(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const a=s[n];if(!(a==="_owner"&&t.$$typeof)&&!vd(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function GS(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function zw(t,e){const r=GS(t);return Math.round(e*r)/r}function xf(t){const e=f.useRef(t);return ku(()=>{e.current=t}),e}function A4(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:a,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,h]=f.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[m,p]=f.useState(n);vd(m,n)||p(n);const[v,g]=f.useState(null),[w,x]=f.useState(null),y=f.useCallback(T=>{T!==P.current&&(P.current=T,g(T))},[]),_=f.useCallback(T=>{T!==S.current&&(S.current=T,x(T))},[]),b=a||v,j=i||w,P=f.useRef(null),S=f.useRef(null),k=f.useRef(d),C=c!=null,E=xf(c),M=xf(s),R=xf(u),X=f.useCallback(()=>{if(!P.current||!S.current)return;const T={placement:e,strategy:r,middleware:m};M.current&&(T.platform=M.current),R4(P.current,S.current,T).then(B=>{const K={...B,isPositioned:R.current!==!1};O.current&&!vd(k.current,K)&&(k.current=K,Oi.flushSync(()=>{h(K)}))})},[m,e,r,M,R]);ku(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,h(T=>({...T,isPositioned:!1})))},[u]);const O=f.useRef(!1);ku(()=>(O.current=!0,()=>{O.current=!1}),[]),ku(()=>{if(b&&(P.current=b),j&&(S.current=j),b&&j){if(E.current)return E.current(b,j,X);X()}},[b,j,X,E,C]);const se=f.useMemo(()=>({reference:P,floating:S,setReference:y,setFloating:_}),[y,_]),I=f.useMemo(()=>({reference:b,floating:j}),[b,j]),F=f.useMemo(()=>{const T={position:r,left:0,top:0};if(!I.floating)return T;const B=zw(I.floating,d.x),K=zw(I.floating,d.y);return l?{...T,transform:"translate("+B+"px, "+K+"px)",...GS(I.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:B,top:K}},[r,l,I.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:X,refs:se,elements:I,floatingStyles:F}),[d,X,se,I,F])}const M4=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:s}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?Bw({element:n.current,padding:s}).fn(r):{}:n?Bw({element:n,padding:s}).fn(r):{}}}},I4=(t,e)=>({...N4(t),options:[t,e]}),L4=(t,e)=>({...k4(t),options:[t,e]}),F4=(t,e)=>({...T4(t),options:[t,e]}),$4=(t,e)=>({...C4(t),options:[t,e]}),U4=(t,e)=>({...E4(t),options:[t,e]}),B4=(t,e)=>({...P4(t),options:[t,e]}),z4=(t,e)=>({...M4(t),options:[t,e]});var W4="Arrow",YS=f.forwardRef((t,e)=>{const{children:r,width:n=10,height:s=5,...a}=t;return o.jsx(xe.svg,{...a,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});YS.displayName=W4;var V4=YS;function QS(t){const[e,r]=f.useState(void 0);return jt(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let i,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,l=u.blockSize}else i=t.offsetWidth,l=t.offsetHeight;r({width:i,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var nv="Popper",[JS,Ui]=yr(nv),[H4,XS]=JS(nv),ZS=t=>{const{__scopePopper:e,children:r}=t,[n,s]=f.useState(null);return o.jsx(H4,{scope:e,anchor:n,onAnchorChange:s,children:r})};ZS.displayName=nv;var e1="PopperAnchor",t1=f.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...s}=t,a=XS(e1,r),i=f.useRef(null),l=Ae(e,i);return f.useEffect(()=>{a.onAnchorChange((n==null?void 0:n.current)||i.current)}),n?null:o.jsx(xe.div,{...s,ref:l})});t1.displayName=e1;var sv="PopperContent",[q4,K4]=JS(sv),r1=f.forwardRef((t,e)=>{var ie,be,Pe,W,ne,V;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:a="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:v,...g}=t,w=XS(sv,r),[x,y]=f.useState(null),_=Ae(e,he=>y(he)),[b,j]=f.useState(null),P=QS(b),S=(P==null?void 0:P.width)??0,k=(P==null?void 0:P.height)??0,C=n+(a!=="center"?"-"+a:""),E=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},M=Array.isArray(u)?u:[u],R=M.length>0,X={padding:E,boundary:M.filter(Y4),altBoundary:R},{refs:O,floatingStyles:se,placement:I,isPositioned:F,middlewareData:T}=A4({strategy:"fixed",placement:C,whileElementsMounted:(...he)=>S4(...he,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[I4({mainAxis:s+k,alignmentAxis:i}),c&&L4({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?F4():void 0,...X}),c&&$4({...X}),U4({...X,apply:({elements:he,rects:Te,availableWidth:qe,availableHeight:rt})=>{const{width:it,height:U}=Te.reference,N=he.floating.style;N.setProperty("--radix-popper-available-width",`${qe}px`),N.setProperty("--radix-popper-available-height",`${rt}px`),N.setProperty("--radix-popper-anchor-width",`${it}px`),N.setProperty("--radix-popper-anchor-height",`${U}px`)}}),b&&z4({element:b,padding:l}),Q4({arrowWidth:S,arrowHeight:k}),m&&B4({strategy:"referenceHidden",...X})]}),[B,K]=a1(I),L=Dt(v);jt(()=>{F&&(L==null||L())},[F,L]);const ee=(ie=T.arrow)==null?void 0:ie.x,ge=(be=T.arrow)==null?void 0:be.y,we=((Pe=T.arrow)==null?void 0:Pe.centerOffset)!==0,[Re,Ce]=f.useState();return jt(()=>{x&&Ce(window.getComputedStyle(x).zIndex)},[x]),o.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...se,transform:F?se.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Re,"--radix-popper-transform-origin":[(W=T.transformOrigin)==null?void 0:W.x,(ne=T.transformOrigin)==null?void 0:ne.y].join(" "),...((V=T.hide)==null?void 0:V.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(q4,{scope:r,placedSide:B,onArrowChange:j,arrowX:ee,arrowY:ge,shouldHideArrow:we,children:o.jsx(xe.div,{"data-side":B,"data-align":K,...g,ref:_,style:{...g.style,animation:F?void 0:"none"}})})})});r1.displayName=sv;var n1="PopperArrow",G4={top:"bottom",right:"left",bottom:"top",left:"right"},s1=f.forwardRef(function(e,r){const{__scopePopper:n,...s}=e,a=K4(n1,n),i=G4[a.placedSide];return o.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:o.jsx(V4,{...s,ref:r,style:{...s.style,display:"block"}})})});s1.displayName=n1;function Y4(t){return t!==null}var Q4=t=>({name:"transformOrigin",options:t,fn(e){var w,x,y;const{placement:r,rects:n,middlewareData:s}=e,i=((w=s.arrow)==null?void 0:w.centerOffset)!==0,l=i?0:t.arrowWidth,c=i?0:t.arrowHeight,[u,d]=a1(r),h={start:"0%",center:"50%",end:"100%"}[d],m=(((x=s.arrow)==null?void 0:x.x)??0)+l/2,p=(((y=s.arrow)==null?void 0:y.y)??0)+c/2;let v="",g="";return u==="bottom"?(v=i?h:`${m}px`,g=`${-c}px`):u==="top"?(v=i?h:`${m}px`,g=`${n.floating.height+c}px`):u==="right"?(v=`${-c}px`,g=i?h:`${p}px`):u==="left"&&(v=`${n.floating.width+c}px`,g=i?h:`${p}px`),{data:{x:v,y:g}}}});function a1(t){const[e,r="center"]=t.split("-");return[e,r]}var av=ZS,th=t1,ov=r1,iv=s1,J4="Portal",gc=f.forwardRef((t,e)=>{var l;const{container:r,...n}=t,[s,a]=f.useState(!1);jt(()=>a(!0),[]);const i=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?W2.createPortal(o.jsx(xe.div,{...n,ref:e}),i):null});gc.displayName=J4;var X4=Cp[" useInsertionEffect ".trim().toString()]||jt;function Xs({prop:t,defaultProp:e,onChange:r=()=>{},caller:n}){const[s,a,i]=Z4({defaultProp:e,onChange:r}),l=t!==void 0,c=l?t:s;{const d=f.useRef(t!==void 0);f.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=f.useCallback(d=>{var h;if(l){const m=eF(d)?d(t):d;m!==t&&((h=i.current)==null||h.call(i,m))}else a(d)},[l,t,a,i]);return[c,u]}function Z4({defaultProp:t,onChange:e}){const[r,n]=f.useState(t),s=f.useRef(r),a=f.useRef(e);return X4(()=>{a.current=e},[e]),f.useEffect(()=>{var i;s.current!==r&&((i=a.current)==null||i.call(a,r),s.current=r)},[r,s]),[r,n,a]}function eF(t){return typeof t=="function"}function o1(t){const e=f.useRef({value:t,previous:t});return f.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var i1=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),tF="VisuallyHidden",rF=f.forwardRef((t,e)=>o.jsx(xe.span,{...t,ref:e,style:{...i1,...t.style}}));rF.displayName=tF;var nF=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},_o=new WeakMap,lu=new WeakMap,cu={},wf=0,l1=function(t){return t&&(t.host||l1(t.parentNode))},sF=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=l1(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},aF=function(t,e,r,n){var s=sF(e,Array.isArray(t)?t:[t]);cu[r]||(cu[r]=new WeakMap);var a=cu[r],i=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))d(m);else try{var p=m.getAttribute(n),v=p!==null&&p!=="false",g=(_o.get(m)||0)+1,w=(a.get(m)||0)+1;_o.set(m,g),a.set(m,w),i.push(m),g===1&&v&&lu.set(m,!0),w===1&&m.setAttribute(r,"true"),v||m.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return d(e),l.clear(),wf++,function(){i.forEach(function(h){var m=_o.get(h)-1,p=a.get(h)-1;_o.set(h,m),a.set(h,p),m||(lu.has(h)||h.removeAttribute(n),lu.delete(h)),p||h.removeAttribute(r)}),wf--,wf||(_o=new WeakMap,_o=new WeakMap,lu=new WeakMap,cu={})}},rh=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),s=nF(t);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),aF(n,s,r,"aria-hidden")):function(){return null}},Cu="right-scroll-bar-position",Eu="width-before-scroll-bar",oF="with-scroll-bars-hidden",iF="--removed-body-scroll-bar-size";function _f(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function lF(t,e){var r=f.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=e,r.facade}var cF=typeof window<"u"?f.useLayoutEffect:f.useEffect,Ww=new WeakMap;function uF(t,e){var r=lF(null,function(n){return t.forEach(function(s){return _f(s,n)})});return cF(function(){var n=Ww.get(r);if(n){var s=new Set(n),a=new Set(t),i=r.current;s.forEach(function(l){a.has(l)||_f(l,null)}),a.forEach(function(l){s.has(l)||_f(l,i)})}Ww.set(r,t)},[t]),r}function dF(t){return t}function hF(t,e){e===void 0&&(e=dF);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(a){var i=e(a,n);return r.push(i),function(){r=r.filter(function(l){return l!==i})}},assignSyncMedium:function(a){for(n=!0;r.length;){var i=r;r=[],i.forEach(a)}r={push:function(l){return a(l)},filter:function(){return r}}},assignMedium:function(a){n=!0;var i=[];if(r.length){var l=r;r=[],l.forEach(a),i=r}var c=function(){var d=i;i=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){i.push(d),u()},filter:function(d){return i=i.filter(d),r}}}};return s}function fF(t){t===void 0&&(t={});var e=hF(null);return e.options=Mr({async:!0,ssr:!1},t),e}var c1=function(t){var e=t.sideCar,r=sa(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return f.createElement(n,Mr({},r))};c1.isSideCarExport=!0;function mF(t,e){return t.useMedium(e),c1}var u1=fF(),bf=function(){},nh=f.forwardRef(function(t,e){var r=f.useRef(null),n=f.useState({onScrollCapture:bf,onWheelCapture:bf,onTouchMoveCapture:bf}),s=n[0],a=n[1],i=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,m=t.sideCar,p=t.noRelative,v=t.noIsolation,g=t.inert,w=t.allowPinchZoom,x=t.as,y=x===void 0?"div":x,_=t.gapMode,b=sa(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=m,P=uF([r,e]),S=Mr(Mr({},b),s);return f.createElement(f.Fragment,null,d&&f.createElement(j,{sideCar:u1,removeScrollBar:u,shards:h,noRelative:p,noIsolation:v,inert:g,setCallbacks:a,allowPinchZoom:!!w,lockRef:r,gapMode:_}),i?f.cloneElement(f.Children.only(l),Mr(Mr({},S),{ref:P})):f.createElement(y,Mr({},S,{className:c,ref:P}),l))});nh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};nh.classNames={fullWidth:Eu,zeroRight:Cu};var pF=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function gF(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=pF();return e&&t.setAttribute("nonce",e),t}function vF(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function yF(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var xF=function(){var t=0,e=null;return{add:function(r){t==0&&(e=gF())&&(vF(e,r),yF(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},wF=function(){var t=xF();return function(e,r){f.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},d1=function(){var t=wF(),e=function(r){var n=r.styles,s=r.dynamic;return t(n,s),null};return e},_F={left:0,top:0,right:0,gap:0},jf=function(t){return parseInt(t||"",10)||0},bF=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[jf(r),jf(n),jf(s)]},jF=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return _F;var e=bF(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},SF=d1(),Xo="data-scroll-locked",NF=function(t,e,r,n){var s=t.left,a=t.top,i=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(oF,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Xo,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Cu,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Eu,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Cu," .").concat(Cu,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Eu," .").concat(Eu,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Xo,`] {
    `).concat(iF,": ").concat(l,`px;
  }
`)},Vw=function(){var t=parseInt(document.body.getAttribute(Xo)||"0",10);return isFinite(t)?t:0},kF=function(){f.useEffect(function(){return document.body.setAttribute(Xo,(Vw()+1).toString()),function(){var t=Vw()-1;t<=0?document.body.removeAttribute(Xo):document.body.setAttribute(Xo,t.toString())}},[])},CF=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,s=n===void 0?"margin":n;kF();var a=f.useMemo(function(){return jF(s)},[s]);return f.createElement(SF,{styles:NF(a,!e,s,r?"":"!important")})},hp=!1;if(typeof window<"u")try{var uu=Object.defineProperty({},"passive",{get:function(){return hp=!0,!0}});window.addEventListener("test",uu,uu),window.removeEventListener("test",uu,uu)}catch{hp=!1}var bo=hp?{passive:!1}:!1,EF=function(t){return t.tagName==="TEXTAREA"},h1=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!EF(t)&&r[e]==="visible")},PF=function(t){return h1(t,"overflowY")},TF=function(t){return h1(t,"overflowX")},Hw=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=f1(t,n);if(s){var a=m1(t,n),i=a[1],l=a[2];if(i>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},RF=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},OF=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},f1=function(t,e){return t==="v"?PF(e):TF(e)},m1=function(t,e){return t==="v"?RF(e):OF(e)},DF=function(t,e){return t==="h"&&e==="rtl"?-1:1},AF=function(t,e,r,n,s){var a=DF(t,window.getComputedStyle(e).direction),i=a*n,l=r.target,c=e.contains(l),u=!1,d=i>0,h=0,m=0;do{if(!l)break;var p=m1(t,l),v=p[0],g=p[1],w=p[2],x=g-w-a*v;(v||x)&&f1(t,l)&&(h+=x,m+=v);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(m)<1||!s))&&(u=!0),u},du=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},qw=function(t){return[t.deltaX,t.deltaY]},Kw=function(t){return t&&"current"in t?t.current:t},MF=function(t,e){return t[0]===e[0]&&t[1]===e[1]},IF=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},LF=0,jo=[];function FF(t){var e=f.useRef([]),r=f.useRef([0,0]),n=f.useRef(),s=f.useState(LF++)[0],a=f.useState(d1)[0],i=f.useRef(t);f.useEffect(function(){i.current=t},[t]),f.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var g=Eg([t.lockRef.current],(t.shards||[]).map(Kw),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=f.useCallback(function(g,w){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!i.current.allowPinchZoom;var x=du(g),y=r.current,_="deltaX"in g?g.deltaX:y[0]-x[0],b="deltaY"in g?g.deltaY:y[1]-x[1],j,P=g.target,S=Math.abs(_)>Math.abs(b)?"h":"v";if("touches"in g&&S==="h"&&P.type==="range")return!1;var k=Hw(S,P);if(!k)return!0;if(k?j=S:(j=S==="v"?"h":"v",k=Hw(S,P)),!k)return!1;if(!n.current&&"changedTouches"in g&&(_||b)&&(n.current=j),!j)return!0;var C=n.current||j;return AF(C,w,g,C==="h"?_:b,!0)},[]),c=f.useCallback(function(g){var w=g;if(!(!jo.length||jo[jo.length-1]!==a)){var x="deltaY"in w?qw(w):du(w),y=e.current.filter(function(j){return j.name===w.type&&(j.target===w.target||w.target===j.shadowParent)&&MF(j.delta,x)})[0];if(y&&y.should){w.cancelable&&w.preventDefault();return}if(!y){var _=(i.current.shards||[]).map(Kw).filter(Boolean).filter(function(j){return j.contains(w.target)}),b=_.length>0?l(w,_[0]):!i.current.noIsolation;b&&w.cancelable&&w.preventDefault()}}},[]),u=f.useCallback(function(g,w,x,y){var _={name:g,delta:w,target:x,should:y,shadowParent:$F(x)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(b){return b!==_})},1)},[]),d=f.useCallback(function(g){r.current=du(g),n.current=void 0},[]),h=f.useCallback(function(g){u(g.type,qw(g),g.target,l(g,t.lockRef.current))},[]),m=f.useCallback(function(g){u(g.type,du(g),g.target,l(g,t.lockRef.current))},[]);f.useEffect(function(){return jo.push(a),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,bo),document.addEventListener("touchmove",c,bo),document.addEventListener("touchstart",d,bo),function(){jo=jo.filter(function(g){return g!==a}),document.removeEventListener("wheel",c,bo),document.removeEventListener("touchmove",c,bo),document.removeEventListener("touchstart",d,bo)}},[]);var p=t.removeScrollBar,v=t.inert;return f.createElement(f.Fragment,null,v?f.createElement(a,{styles:IF(s)}):null,p?f.createElement(CF,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function $F(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const UF=mF(u1,FF);var vc=f.forwardRef(function(t,e){return f.createElement(nh,Mr({},t,{ref:e,sideCar:UF}))});vc.classNames=nh.classNames;var BF=[" ","Enter","ArrowUp","ArrowDown"],zF=[" ","Enter"],Za="Select",[sh,ah,WF]=Yg(Za),[Bi,mz]=yr(Za,[WF,Ui]),oh=Ui(),[VF,oa]=Bi(Za),[HF,qF]=Bi(Za),p1=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:s,onOpenChange:a,value:i,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:m,required:p,form:v}=t,g=oh(e),[w,x]=f.useState(null),[y,_]=f.useState(null),[b,j]=f.useState(!1),P=hc(u),[S,k]=Xs({prop:n,defaultProp:s??!1,onChange:a,caller:Za}),[C,E]=Xs({prop:i,defaultProp:l,onChange:c,caller:Za}),M=f.useRef(null),R=w?v||!!w.closest("form"):!0,[X,O]=f.useState(new Set),se=Array.from(X).map(I=>I.props.value).join(";");return o.jsx(av,{...g,children:o.jsxs(VF,{required:p,scope:e,trigger:w,onTriggerChange:x,valueNode:y,onValueNodeChange:_,valueNodeHasChildren:b,onValueNodeHasChildrenChange:j,contentId:on(),value:C,onValueChange:E,open:S,onOpenChange:k,dir:P,triggerPointerDownPosRef:M,disabled:m,children:[o.jsx(sh.Provider,{scope:e,children:o.jsx(HF,{scope:t.__scopeSelect,onNativeOptionAdd:f.useCallback(I=>{O(F=>new Set(F).add(I))},[]),onNativeOptionRemove:f.useCallback(I=>{O(F=>{const T=new Set(F);return T.delete(I),T})},[]),children:r})}),R?o.jsxs($1,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:h,value:C,onChange:I=>E(I.target.value),disabled:m,form:v,children:[C===void 0?o.jsx("option",{value:""}):null,Array.from(X)]},se):null]})})};p1.displayName=Za;var g1="SelectTrigger",v1=f.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...s}=t,a=oh(r),i=oa(g1,r),l=i.disabled||n,c=Ae(e,i.onTriggerChange),u=ah(r),d=f.useRef("touch"),[h,m,p]=B1(g=>{const w=u().filter(_=>!_.disabled),x=w.find(_=>_.value===i.value),y=z1(w,g,x);y!==void 0&&i.onValueChange(y.value)}),v=g=>{l||(i.onOpenChange(!0),p()),g&&(i.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return o.jsx(th,{asChild:!0,...a,children:o.jsx(xe.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":U1(i.value)?"":void 0,...s,ref:c,onClick:oe(s.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&v(g)}),onPointerDown:oe(s.onPointerDown,g=>{d.current=g.pointerType;const w=g.target;w.hasPointerCapture(g.pointerId)&&w.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(v(g),g.preventDefault())}),onKeyDown:oe(s.onKeyDown,g=>{const w=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&m(g.key),!(w&&g.key===" ")&&BF.includes(g.key)&&(v(),g.preventDefault())})})})});v1.displayName=g1;var y1="SelectValue",x1=f.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,children:a,placeholder:i="",...l}=t,c=oa(y1,r),{onValueNodeHasChildrenChange:u}=c,d=a!==void 0,h=Ae(e,c.onValueNodeChange);return jt(()=>{u(d)},[u,d]),o.jsx(xe.span,{...l,ref:h,style:{pointerEvents:"none"},children:U1(c.value)?o.jsx(o.Fragment,{children:i}):a})});x1.displayName=y1;var KF="SelectIcon",w1=f.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...s}=t;return o.jsx(xe.span,{"aria-hidden":!0,...s,ref:e,children:n||""})});w1.displayName=KF;var GF="SelectPortal",_1=t=>o.jsx(gc,{asChild:!0,...t});_1.displayName=GF;var eo="SelectContent",b1=f.forwardRef((t,e)=>{const r=oa(eo,t.__scopeSelect),[n,s]=f.useState();if(jt(()=>{s(new DocumentFragment)},[]),!r.open){const a=n;return a?Oi.createPortal(o.jsx(j1,{scope:t.__scopeSelect,children:o.jsx(sh.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),a):null}return o.jsx(S1,{...t,ref:e})});b1.displayName=eo;var Gr=10,[j1,ia]=Bi(eo),YF="SelectContentImpl",QF=Gs("SelectContent.RemoveScroll"),S1=f.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:i,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:v,hideWhenDetached:g,avoidCollisions:w,...x}=t,y=oa(eo,r),[_,b]=f.useState(null),[j,P]=f.useState(null),S=Ae(e,ie=>b(ie)),[k,C]=f.useState(null),[E,M]=f.useState(null),R=ah(r),[X,O]=f.useState(!1),se=f.useRef(!1);f.useEffect(()=>{if(_)return rh(_)},[_]),Jd();const I=f.useCallback(ie=>{const[be,...Pe]=R().map(V=>V.ref.current),[W]=Pe.slice(-1),ne=document.activeElement;for(const V of ie)if(V===ne||(V==null||V.scrollIntoView({block:"nearest"}),V===be&&j&&(j.scrollTop=0),V===W&&j&&(j.scrollTop=j.scrollHeight),V==null||V.focus(),document.activeElement!==ne))return},[R,j]),F=f.useCallback(()=>I([k,_]),[I,k,_]);f.useEffect(()=>{X&&F()},[X,F]);const{onOpenChange:T,triggerPointerDownPosRef:B}=y;f.useEffect(()=>{if(_){let ie={x:0,y:0};const be=W=>{var ne,V;ie={x:Math.abs(Math.round(W.pageX)-(((ne=B.current)==null?void 0:ne.x)??0)),y:Math.abs(Math.round(W.pageY)-(((V=B.current)==null?void 0:V.y)??0))}},Pe=W=>{ie.x<=10&&ie.y<=10?W.preventDefault():_.contains(W.target)||T(!1),document.removeEventListener("pointermove",be),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",be),document.addEventListener("pointerup",Pe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",be),document.removeEventListener("pointerup",Pe,{capture:!0})}}},[_,T,B]),f.useEffect(()=>{const ie=()=>T(!1);return window.addEventListener("blur",ie),window.addEventListener("resize",ie),()=>{window.removeEventListener("blur",ie),window.removeEventListener("resize",ie)}},[T]);const[K,L]=B1(ie=>{const be=R().filter(ne=>!ne.disabled),Pe=be.find(ne=>ne.ref.current===document.activeElement),W=z1(be,ie,Pe);W&&setTimeout(()=>W.ref.current.focus())}),ee=f.useCallback((ie,be,Pe)=>{const W=!se.current&&!Pe;(y.value!==void 0&&y.value===be||W)&&(C(ie),W&&(se.current=!0))},[y.value]),ge=f.useCallback(()=>_==null?void 0:_.focus(),[_]),we=f.useCallback((ie,be,Pe)=>{const W=!se.current&&!Pe;(y.value!==void 0&&y.value===be||W)&&M(ie)},[y.value]),Re=n==="popper"?fp:N1,Ce=Re===fp?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:v,hideWhenDetached:g,avoidCollisions:w}:{};return o.jsx(j1,{scope:r,content:_,viewport:j,onViewportChange:P,itemRefCallback:ee,selectedItem:k,onItemLeave:ge,itemTextRefCallback:we,focusSelectedItem:F,selectedItemText:E,position:n,isPositioned:X,searchRef:K,children:o.jsx(vc,{as:QF,allowPinchZoom:!0,children:o.jsx(mc,{asChild:!0,trapped:y.open,onMountAutoFocus:ie=>{ie.preventDefault()},onUnmountAutoFocus:oe(s,ie=>{var be;(be=y.trigger)==null||be.focus({preventScroll:!0}),ie.preventDefault()}),children:o.jsx(fc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:ie=>ie.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:o.jsx(Re,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:ie=>ie.preventDefault(),...x,...Ce,onPlaced:()=>O(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:oe(x.onKeyDown,ie=>{const be=ie.ctrlKey||ie.altKey||ie.metaKey;if(ie.key==="Tab"&&ie.preventDefault(),!be&&ie.key.length===1&&L(ie.key),["ArrowUp","ArrowDown","Home","End"].includes(ie.key)){let W=R().filter(ne=>!ne.disabled).map(ne=>ne.ref.current);if(["ArrowUp","End"].includes(ie.key)&&(W=W.slice().reverse()),["ArrowUp","ArrowDown"].includes(ie.key)){const ne=ie.target,V=W.indexOf(ne);W=W.slice(V+1)}setTimeout(()=>I(W)),ie.preventDefault()}})})})})})})});S1.displayName=YF;var JF="SelectItemAlignedPosition",N1=f.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...s}=t,a=oa(eo,r),i=ia(eo,r),[l,c]=f.useState(null),[u,d]=f.useState(null),h=Ae(e,S=>d(S)),m=ah(r),p=f.useRef(!1),v=f.useRef(!0),{viewport:g,selectedItem:w,selectedItemText:x,focusSelectedItem:y}=i,_=f.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&g&&w&&x){const S=a.trigger.getBoundingClientRect(),k=u.getBoundingClientRect(),C=a.valueNode.getBoundingClientRect(),E=x.getBoundingClientRect();if(a.dir!=="rtl"){const ne=E.left-k.left,V=C.left-ne,he=S.left-V,Te=S.width+he,qe=Math.max(Te,k.width),rt=window.innerWidth-Gr,it=ip(V,[Gr,Math.max(Gr,rt-qe)]);l.style.minWidth=Te+"px",l.style.left=it+"px"}else{const ne=k.right-E.right,V=window.innerWidth-C.right-ne,he=window.innerWidth-S.right-V,Te=S.width+he,qe=Math.max(Te,k.width),rt=window.innerWidth-Gr,it=ip(V,[Gr,Math.max(Gr,rt-qe)]);l.style.minWidth=Te+"px",l.style.right=it+"px"}const M=m(),R=window.innerHeight-Gr*2,X=g.scrollHeight,O=window.getComputedStyle(u),se=parseInt(O.borderTopWidth,10),I=parseInt(O.paddingTop,10),F=parseInt(O.borderBottomWidth,10),T=parseInt(O.paddingBottom,10),B=se+I+X+T+F,K=Math.min(w.offsetHeight*5,B),L=window.getComputedStyle(g),ee=parseInt(L.paddingTop,10),ge=parseInt(L.paddingBottom,10),we=S.top+S.height/2-Gr,Re=R-we,Ce=w.offsetHeight/2,ie=w.offsetTop+Ce,be=se+I+ie,Pe=B-be;if(be<=we){const ne=M.length>0&&w===M[M.length-1].ref.current;l.style.bottom="0px";const V=u.clientHeight-g.offsetTop-g.offsetHeight,he=Math.max(Re,Ce+(ne?ge:0)+V+F),Te=be+he;l.style.height=Te+"px"}else{const ne=M.length>0&&w===M[0].ref.current;l.style.top="0px";const he=Math.max(we,se+g.offsetTop+(ne?ee:0)+Ce)+Pe;l.style.height=he+"px",g.scrollTop=be-we+g.offsetTop}l.style.margin=`${Gr}px 0`,l.style.minHeight=K+"px",l.style.maxHeight=R+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[m,a.trigger,a.valueNode,l,u,g,w,x,a.dir,n]);jt(()=>_(),[_]);const[b,j]=f.useState();jt(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const P=f.useCallback(S=>{S&&v.current===!0&&(_(),y==null||y(),v.current=!1)},[_,y]);return o.jsx(ZF,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:P,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:o.jsx(xe.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});N1.displayName=JF;var XF="SelectPopperPosition",fp=f.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Gr,...a}=t,i=oh(r);return o.jsx(ov,{...i,...a,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});fp.displayName=XF;var[ZF,lv]=Bi(eo,{}),mp="SelectViewport",k1=f.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...s}=t,a=ia(mp,r),i=lv(mp,r),l=Ae(e,a.onViewportChange),c=f.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),o.jsx(sh.Slot,{scope:r,children:o.jsx(xe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:oe(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=i;if(m!=null&&m.current&&h){const p=Math.abs(c.current-d.scrollTop);if(p>0){const v=window.innerHeight-Gr*2,g=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),x=Math.max(g,w);if(x<v){const y=x+p,_=Math.min(v,y),b=y-_;h.style.height=_+"px",h.style.bottom==="0px"&&(d.scrollTop=b>0?b:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});k1.displayName=mp;var C1="SelectGroup",[e$,t$]=Bi(C1),r$=f.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=on();return o.jsx(e$,{scope:r,id:s,children:o.jsx(xe.div,{role:"group","aria-labelledby":s,...n,ref:e})})});r$.displayName=C1;var E1="SelectLabel",P1=f.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=t$(E1,r);return o.jsx(xe.div,{id:s.id,...n,ref:e})});P1.displayName=E1;var yd="SelectItem",[n$,T1]=Bi(yd),R1=f.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:a,...i}=t,l=oa(yd,r),c=ia(yd,r),u=l.value===n,[d,h]=f.useState(a??""),[m,p]=f.useState(!1),v=Ae(e,y=>{var _;return(_=c.itemRefCallback)==null?void 0:_.call(c,y,n,s)}),g=on(),w=f.useRef("touch"),x=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(n$,{scope:r,value:n,disabled:s,textId:g,isSelected:u,onItemTextChange:f.useCallback(y=>{h(_=>_||((y==null?void 0:y.textContent)??"").trim())},[]),children:o.jsx(sh.ItemSlot,{scope:r,value:n,disabled:s,textValue:d,children:o.jsx(xe.div,{role:"option","aria-labelledby":g,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:v,onFocus:oe(i.onFocus,()=>p(!0)),onBlur:oe(i.onBlur,()=>p(!1)),onClick:oe(i.onClick,()=>{w.current!=="mouse"&&x()}),onPointerUp:oe(i.onPointerUp,()=>{w.current==="mouse"&&x()}),onPointerDown:oe(i.onPointerDown,y=>{w.current=y.pointerType}),onPointerMove:oe(i.onPointerMove,y=>{var _;w.current=y.pointerType,s?(_=c.onItemLeave)==null||_.call(c):w.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:oe(i.onPointerLeave,y=>{var _;y.currentTarget===document.activeElement&&((_=c.onItemLeave)==null||_.call(c))}),onKeyDown:oe(i.onKeyDown,y=>{var b;((b=c.searchRef)==null?void 0:b.current)!==""&&y.key===" "||(zF.includes(y.key)&&x(),y.key===" "&&y.preventDefault())})})})})});R1.displayName=yd;var al="SelectItemText",O1=f.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,...a}=t,i=oa(al,r),l=ia(al,r),c=T1(al,r),u=qF(al,r),[d,h]=f.useState(null),m=Ae(e,x=>h(x),c.onItemTextChange,x=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,x,c.value,c.disabled)}),p=d==null?void 0:d.textContent,v=f.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:w}=u;return jt(()=>(g(v),()=>w(v)),[g,w,v]),o.jsxs(o.Fragment,{children:[o.jsx(xe.span,{id:c.textId,...a,ref:m}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Oi.createPortal(a.children,i.valueNode):null]})});O1.displayName=al;var D1="SelectItemIndicator",A1=f.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return T1(D1,r).isSelected?o.jsx(xe.span,{"aria-hidden":!0,...n,ref:e}):null});A1.displayName=D1;var pp="SelectScrollUpButton",M1=f.forwardRef((t,e)=>{const r=ia(pp,t.__scopeSelect),n=lv(pp,t.__scopeSelect),[s,a]=f.useState(!1),i=Ae(e,n.onScrollButtonChange);return jt(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?o.jsx(L1,{...t,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});M1.displayName=pp;var gp="SelectScrollDownButton",I1=f.forwardRef((t,e)=>{const r=ia(gp,t.__scopeSelect),n=lv(gp,t.__scopeSelect),[s,a]=f.useState(!1),i=Ae(e,n.onScrollButtonChange);return jt(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;a(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?o.jsx(L1,{...t,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});I1.displayName=gp;var L1=f.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=t,a=ia("SelectScrollButton",r),i=f.useRef(null),l=ah(r),c=f.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return f.useEffect(()=>()=>c(),[c]),jt(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),o.jsx(xe.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:oe(s.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(n,50))}),onPointerMove:oe(s.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),i.current===null&&(i.current=window.setInterval(n,50))}),onPointerLeave:oe(s.onPointerLeave,()=>{c()})})}),s$="SelectSeparator",F1=f.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return o.jsx(xe.div,{"aria-hidden":!0,...n,ref:e})});F1.displayName=s$;var vp="SelectArrow",a$=f.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=oh(r),a=oa(vp,r),i=ia(vp,r);return a.open&&i.position==="popper"?o.jsx(iv,{...s,...n,ref:e}):null});a$.displayName=vp;var o$="SelectBubbleInput",$1=f.forwardRef(({__scopeSelect:t,value:e,...r},n)=>{const s=f.useRef(null),a=Ae(n,s),i=o1(e);return f.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==e&&d){const h=new Event("change",{bubbles:!0});d.call(l,e),l.dispatchEvent(h)}},[i,e]),o.jsx(xe.select,{...r,style:{...i1,...r.style},ref:a,defaultValue:e})});$1.displayName=o$;function U1(t){return t===""||t===void 0}function B1(t){const e=Dt(t),r=f.useRef(""),n=f.useRef(0),s=f.useCallback(i=>{const l=r.current+i;e(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),a=f.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,a]}function z1(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=r?t.indexOf(r):-1;let i=i$(t,Math.max(a,0));s.length===1&&(i=i.filter(u=>u!==r));const c=i.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function i$(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var l$=p1,W1=v1,c$=x1,u$=w1,d$=_1,V1=b1,h$=k1,H1=P1,q1=R1,f$=O1,m$=A1,K1=M1,G1=I1,Y1=F1;const ze=l$,We=c$,Ue=f.forwardRef(({className:t,children:e,...r},n)=>o.jsxs(W1,{ref:n,className:J("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,o.jsx(u$,{asChild:!0,children:o.jsx(TS,{className:"h-4 w-4 opacity-50"})})]}));Ue.displayName=W1.displayName;const Q1=f.forwardRef(({className:t,...e},r)=>o.jsx(K1,{ref:r,className:J("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(FI,{className:"h-4 w-4"})}));Q1.displayName=K1.displayName;const J1=f.forwardRef(({className:t,...e},r)=>o.jsx(G1,{ref:r,className:J("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(TS,{className:"h-4 w-4"})}));J1.displayName=G1.displayName;const Be=f.forwardRef(({className:t,children:e,position:r="popper",...n},s)=>o.jsx(d$,{children:o.jsxs(V1,{ref:s,className:J("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[o.jsx(Q1,{}),o.jsx(h$,{className:J("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(J1,{})]})}));Be.displayName=V1.displayName;const p$=f.forwardRef(({className:t,...e},r)=>o.jsx(H1,{ref:r,className:J("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));p$.displayName=H1.displayName;const ae=f.forwardRef(({className:t,children:e,...r},n)=>o.jsxs(q1,{ref:n,className:J("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(m$,{children:o.jsx(Bg,{className:"h-4 w-4"})})}),o.jsx(f$,{children:e})]}));ae.displayName=q1.displayName;const g$=f.forwardRef(({className:t,...e},r)=>o.jsx(Y1,{ref:r,className:J("-mx-1 my-1 h-px bg-muted",t),...e}));g$.displayName=Y1.displayName;const X1=()=>{const{currentLanguage:t,changeLanguage:e,languages:r}=io(),n=r.find(s=>s.code===t);return o.jsxs(ze,{value:t,onValueChange:e,children:[o.jsx(Ue,{className:"w-[140px]",children:o.jsx(We,{children:o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("span",{children:n==null?void 0:n.name})})})}),o.jsx(Be,{children:r.map(s=>o.jsx(ae,{value:s.code,children:o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("span",{children:s.name})})},s.code))})]})};function v$(t,e){return f.useReducer((r,n)=>e[r][n]??r,t)}var ar=t=>{const{present:e,children:r}=t,n=y$(e),s=typeof r=="function"?r({present:n.isPresent}):f.Children.only(r),a=Ae(n.ref,x$(s));return typeof r=="function"||n.isPresent?f.cloneElement(s,{ref:a}):null};ar.displayName="Presence";function y$(t){const[e,r]=f.useState(),n=f.useRef(null),s=f.useRef(t),a=f.useRef("none"),i=t?"mounted":"unmounted",[l,c]=v$(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const u=hu(n.current);a.current=l==="mounted"?u:"none"},[l]),jt(()=>{const u=n.current,d=s.current;if(d!==t){const m=a.current,p=hu(u);t?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),jt(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=p=>{const g=hu(n.current).includes(p.animationName);if(p.target===e&&g&&(c("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},m=p=>{p.target===e&&(a.current=hu(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function hu(t){return(t==null?void 0:t.animationName)||"none"}function x$(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var Sf="rovingFocusGroup.onEntryFocus",w$={bubbles:!1,cancelable:!0},yc="RovingFocusGroup",[yp,Z1,_$]=Yg(yc),[b$,ih]=yr(yc,[_$]),[j$,S$]=b$(yc),eN=f.forwardRef((t,e)=>o.jsx(yp.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(yp.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(N$,{...t,ref:e})})}));eN.displayName=yc;var N$=f.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,m=f.useRef(null),p=Ae(e,m),v=hc(a),[g,w]=Xs({prop:i,defaultProp:l??null,onChange:c,caller:yc}),[x,y]=f.useState(!1),_=Dt(u),b=Z1(r),j=f.useRef(!1),[P,S]=f.useState(0);return f.useEffect(()=>{const k=m.current;if(k)return k.addEventListener(Sf,_),()=>k.removeEventListener(Sf,_)},[_]),o.jsx(j$,{scope:r,orientation:n,dir:v,loop:s,currentTabStopId:g,onItemFocus:f.useCallback(k=>w(k),[w]),onItemShiftTab:f.useCallback(()=>y(!0),[]),onFocusableItemAdd:f.useCallback(()=>S(k=>k+1),[]),onFocusableItemRemove:f.useCallback(()=>S(k=>k-1),[]),children:o.jsx(xe.div,{tabIndex:x||P===0?-1:0,"data-orientation":n,...h,ref:p,style:{outline:"none",...t.style},onMouseDown:oe(t.onMouseDown,()=>{j.current=!0}),onFocus:oe(t.onFocus,k=>{const C=!j.current;if(k.target===k.currentTarget&&C&&!x){const E=new CustomEvent(Sf,w$);if(k.currentTarget.dispatchEvent(E),!E.defaultPrevented){const M=b().filter(I=>I.focusable),R=M.find(I=>I.active),X=M.find(I=>I.id===g),se=[R,X,...M].filter(Boolean).map(I=>I.ref.current);nN(se,d)}}j.current=!1}),onBlur:oe(t.onBlur,()=>y(!1))})})}),tN="RovingFocusGroupItem",rN=f.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:a,children:i,...l}=t,c=on(),u=a||c,d=S$(tN,r),h=d.currentTabStopId===u,m=Z1(r),{onFocusableItemAdd:p,onFocusableItemRemove:v,currentTabStopId:g}=d;return f.useEffect(()=>{if(n)return p(),()=>v()},[n,p,v]),o.jsx(yp.ItemSlot,{scope:r,id:u,focusable:n,active:s,children:o.jsx(xe.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:e,onMouseDown:oe(t.onMouseDown,w=>{n?d.onItemFocus(u):w.preventDefault()}),onFocus:oe(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:oe(t.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){d.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const x=E$(w,d.orientation,d.dir);if(x!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let _=m().filter(b=>b.focusable).map(b=>b.ref.current);if(x==="last")_.reverse();else if(x==="prev"||x==="next"){x==="prev"&&_.reverse();const b=_.indexOf(w.currentTarget);_=d.loop?P$(_,b+1):_.slice(b+1)}setTimeout(()=>nN(_))}}),children:typeof i=="function"?i({isCurrentTabStop:h,hasTabStop:g!=null}):i})})});rN.displayName=tN;var k$={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function C$(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function E$(t,e,r){const n=C$(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return k$[n]}function nN(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function P$(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var sN=eN,aN=rN,xp=["Enter"," "],T$=["ArrowDown","PageUp","Home"],oN=["ArrowUp","PageDown","End"],R$=[...T$,...oN],O$={ltr:[...xp,"ArrowRight"],rtl:[...xp,"ArrowLeft"]},D$={ltr:["ArrowLeft"],rtl:["ArrowRight"]},xc="Menu",[Ql,A$,M$]=Yg(xc),[lo,iN]=yr(xc,[M$,Ui,ih]),lh=Ui(),lN=ih(),[I$,co]=lo(xc),[L$,wc]=lo(xc),cN=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:s,onOpenChange:a,modal:i=!0}=t,l=lh(e),[c,u]=f.useState(null),d=f.useRef(!1),h=Dt(a),m=hc(s);return f.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),o.jsx(av,{...l,children:o.jsx(I$,{scope:e,open:r,onOpenChange:h,content:c,onContentChange:u,children:o.jsx(L$,{scope:e,onClose:f.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:i,children:n})})})};cN.displayName=xc;var F$="MenuAnchor",cv=f.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=lh(r);return o.jsx(th,{...s,...n,ref:e})});cv.displayName=F$;var uv="MenuPortal",[$$,uN]=lo(uv,{forceMount:void 0}),dN=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:s}=t,a=co(uv,e);return o.jsx($$,{scope:e,forceMount:r,children:o.jsx(ar,{present:r||a.open,children:o.jsx(gc,{asChild:!0,container:s,children:n})})})};dN.displayName=uv;var Fr="MenuContent",[U$,dv]=lo(Fr),hN=f.forwardRef((t,e)=>{const r=uN(Fr,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,a=co(Fr,t.__scopeMenu),i=wc(Fr,t.__scopeMenu);return o.jsx(Ql.Provider,{scope:t.__scopeMenu,children:o.jsx(ar,{present:n||a.open,children:o.jsx(Ql.Slot,{scope:t.__scopeMenu,children:i.modal?o.jsx(B$,{...s,ref:e}):o.jsx(z$,{...s,ref:e})})})})}),B$=f.forwardRef((t,e)=>{const r=co(Fr,t.__scopeMenu),n=f.useRef(null),s=Ae(e,n);return f.useEffect(()=>{const a=n.current;if(a)return rh(a)},[]),o.jsx(hv,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:oe(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),z$=f.forwardRef((t,e)=>{const r=co(Fr,t.__scopeMenu);return o.jsx(hv,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),W$=Gs("MenuContent.ScrollLock"),hv=f.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:p,disableOutsideScroll:v,...g}=t,w=co(Fr,r),x=wc(Fr,r),y=lh(r),_=lN(r),b=A$(r),[j,P]=f.useState(null),S=f.useRef(null),k=Ae(e,S,w.onContentChange),C=f.useRef(0),E=f.useRef(""),M=f.useRef(0),R=f.useRef(null),X=f.useRef("right"),O=f.useRef(0),se=v?vc:f.Fragment,I=v?{as:W$,allowPinchZoom:!0}:void 0,F=B=>{var ie,be;const K=E.current+B,L=b().filter(Pe=>!Pe.disabled),ee=document.activeElement,ge=(ie=L.find(Pe=>Pe.ref.current===ee))==null?void 0:ie.textValue,we=L.map(Pe=>Pe.textValue),Re=t3(we,K,ge),Ce=(be=L.find(Pe=>Pe.textValue===Re))==null?void 0:be.ref.current;(function Pe(W){E.current=W,window.clearTimeout(C.current),W!==""&&(C.current=window.setTimeout(()=>Pe(""),1e3))})(K),Ce&&setTimeout(()=>Ce.focus())};f.useEffect(()=>()=>window.clearTimeout(C.current),[]),Jd();const T=f.useCallback(B=>{var L,ee;return X.current===((L=R.current)==null?void 0:L.side)&&n3(B,(ee=R.current)==null?void 0:ee.area)},[]);return o.jsx(U$,{scope:r,searchRef:E,onItemEnter:f.useCallback(B=>{T(B)&&B.preventDefault()},[T]),onItemLeave:f.useCallback(B=>{var K;T(B)||((K=S.current)==null||K.focus(),P(null))},[T]),onTriggerLeave:f.useCallback(B=>{T(B)&&B.preventDefault()},[T]),pointerGraceTimerRef:M,onPointerGraceIntentChange:f.useCallback(B=>{R.current=B},[]),children:o.jsx(se,{...I,children:o.jsx(mc,{asChild:!0,trapped:s,onMountAutoFocus:oe(a,B=>{var K;B.preventDefault(),(K=S.current)==null||K.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:o.jsx(fc,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:p,children:o.jsx(sN,{asChild:!0,..._,dir:x.dir,orientation:"vertical",loop:n,currentTabStopId:j,onCurrentTabStopIdChange:P,onEntryFocus:oe(c,B=>{x.isUsingKeyboardRef.current||B.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(ov,{role:"menu","aria-orientation":"vertical","data-state":EN(w.open),"data-radix-menu-content":"",dir:x.dir,...y,...g,ref:k,style:{outline:"none",...g.style},onKeyDown:oe(g.onKeyDown,B=>{const L=B.target.closest("[data-radix-menu-content]")===B.currentTarget,ee=B.ctrlKey||B.altKey||B.metaKey,ge=B.key.length===1;L&&(B.key==="Tab"&&B.preventDefault(),!ee&&ge&&F(B.key));const we=S.current;if(B.target!==we||!R$.includes(B.key))return;B.preventDefault();const Ce=b().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);oN.includes(B.key)&&Ce.reverse(),Z$(Ce)}),onBlur:oe(t.onBlur,B=>{B.currentTarget.contains(B.target)||(window.clearTimeout(C.current),E.current="")}),onPointerMove:oe(t.onPointerMove,Jl(B=>{const K=B.target,L=O.current!==B.clientX;if(B.currentTarget.contains(K)&&L){const ee=B.clientX>O.current?"right":"left";X.current=ee,O.current=B.clientX}}))})})})})})})});hN.displayName=Fr;var V$="MenuGroup",fv=f.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return o.jsx(xe.div,{role:"group",...n,ref:e})});fv.displayName=V$;var H$="MenuLabel",fN=f.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return o.jsx(xe.div,{...n,ref:e})});fN.displayName=H$;var xd="MenuItem",Gw="menu.itemSelect",ch=f.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...s}=t,a=f.useRef(null),i=wc(xd,t.__scopeMenu),l=dv(xd,t.__scopeMenu),c=Ae(e,a),u=f.useRef(!1),d=()=>{const h=a.current;if(!r&&h){const m=new CustomEvent(Gw,{bubbles:!0,cancelable:!0});h.addEventListener(Gw,p=>n==null?void 0:n(p),{once:!0}),kS(h,m),m.defaultPrevented?u.current=!1:i.onClose()}};return o.jsx(mN,{...s,ref:c,disabled:r,onClick:oe(t.onClick,d),onPointerDown:h=>{var m;(m=t.onPointerDown)==null||m.call(t,h),u.current=!0},onPointerUp:oe(t.onPointerUp,h=>{var m;u.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:oe(t.onKeyDown,h=>{const m=l.searchRef.current!=="";r||m&&h.key===" "||xp.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});ch.displayName=xd;var mN=f.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...a}=t,i=dv(xd,r),l=lN(r),c=f.useRef(null),u=Ae(e,c),[d,h]=f.useState(!1),[m,p]=f.useState("");return f.useEffect(()=>{const v=c.current;v&&p((v.textContent??"").trim())},[a.children]),o.jsx(Ql.ItemSlot,{scope:r,disabled:n,textValue:s??m,children:o.jsx(aN,{asChild:!0,...l,focusable:!n,children:o.jsx(xe.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...a,ref:u,onPointerMove:oe(t.onPointerMove,Jl(v=>{n?i.onItemLeave(v):(i.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:oe(t.onPointerLeave,Jl(v=>i.onItemLeave(v))),onFocus:oe(t.onFocus,()=>h(!0)),onBlur:oe(t.onBlur,()=>h(!1))})})})}),q$="MenuCheckboxItem",pN=f.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...s}=t;return o.jsx(wN,{scope:t.__scopeMenu,checked:r,children:o.jsx(ch,{role:"menuitemcheckbox","aria-checked":wd(r)?"mixed":r,...s,ref:e,"data-state":pv(r),onSelect:oe(s.onSelect,()=>n==null?void 0:n(wd(r)?!0:!r),{checkForDefaultPrevented:!1})})})});pN.displayName=q$;var gN="MenuRadioGroup",[K$,G$]=lo(gN,{value:void 0,onValueChange:()=>{}}),vN=f.forwardRef((t,e)=>{const{value:r,onValueChange:n,...s}=t,a=Dt(n);return o.jsx(K$,{scope:t.__scopeMenu,value:r,onValueChange:a,children:o.jsx(fv,{...s,ref:e})})});vN.displayName=gN;var yN="MenuRadioItem",xN=f.forwardRef((t,e)=>{const{value:r,...n}=t,s=G$(yN,t.__scopeMenu),a=r===s.value;return o.jsx(wN,{scope:t.__scopeMenu,checked:a,children:o.jsx(ch,{role:"menuitemradio","aria-checked":a,...n,ref:e,"data-state":pv(a),onSelect:oe(n.onSelect,()=>{var i;return(i=s.onValueChange)==null?void 0:i.call(s,r)},{checkForDefaultPrevented:!1})})})});xN.displayName=yN;var mv="MenuItemIndicator",[wN,Y$]=lo(mv,{checked:!1}),_N=f.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...s}=t,a=Y$(mv,r);return o.jsx(ar,{present:n||wd(a.checked)||a.checked===!0,children:o.jsx(xe.span,{...s,ref:e,"data-state":pv(a.checked)})})});_N.displayName=mv;var Q$="MenuSeparator",bN=f.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return o.jsx(xe.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});bN.displayName=Q$;var J$="MenuArrow",jN=f.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=lh(r);return o.jsx(iv,{...s,...n,ref:e})});jN.displayName=J$;var X$="MenuSub",[pz,SN]=lo(X$),ol="MenuSubTrigger",NN=f.forwardRef((t,e)=>{const r=co(ol,t.__scopeMenu),n=wc(ol,t.__scopeMenu),s=SN(ol,t.__scopeMenu),a=dv(ol,t.__scopeMenu),i=f.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:t.__scopeMenu},d=f.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return f.useEffect(()=>d,[d]),f.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),o.jsx(cv,{asChild:!0,...u,children:o.jsx(mN,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":EN(r.open),...t,ref:Yd(e,s.onTriggerChange),onClick:h=>{var m;(m=t.onClick)==null||m.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:oe(t.onPointerMove,Jl(h=>{a.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!r.open&&!i.current&&(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:oe(t.onPointerLeave,Jl(h=>{var p,v;d();const m=(p=r.content)==null?void 0:p.getBoundingClientRect();if(m){const g=(v=r.content)==null?void 0:v.dataset.side,w=g==="right",x=w?-5:5,y=m[w?"left":"right"],_=m[w?"right":"left"];a.onPointerGraceIntentChange({area:[{x:h.clientX+x,y:h.clientY},{x:y,y:m.top},{x:_,y:m.top},{x:_,y:m.bottom},{x:y,y:m.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(h),h.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:oe(t.onKeyDown,h=>{var p;const m=a.searchRef.current!=="";t.disabled||m&&h.key===" "||O$[n.dir].includes(h.key)&&(r.onOpenChange(!0),(p=r.content)==null||p.focus(),h.preventDefault())})})})});NN.displayName=ol;var kN="MenuSubContent",CN=f.forwardRef((t,e)=>{const r=uN(Fr,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,a=co(Fr,t.__scopeMenu),i=wc(Fr,t.__scopeMenu),l=SN(kN,t.__scopeMenu),c=f.useRef(null),u=Ae(e,c);return o.jsx(Ql.Provider,{scope:t.__scopeMenu,children:o.jsx(ar,{present:n||a.open,children:o.jsx(Ql.Slot,{scope:t.__scopeMenu,children:o.jsx(hv,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;i.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:oe(t.onFocusOutside,d=>{d.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:oe(t.onEscapeKeyDown,d=>{i.onClose(),d.preventDefault()}),onKeyDown:oe(t.onKeyDown,d=>{var p;const h=d.currentTarget.contains(d.target),m=D$[i.dir].includes(d.key);h&&m&&(a.onOpenChange(!1),(p=l.trigger)==null||p.focus(),d.preventDefault())})})})})})});CN.displayName=kN;function EN(t){return t?"open":"closed"}function wd(t){return t==="indeterminate"}function pv(t){return wd(t)?"indeterminate":t?"checked":"unchecked"}function Z$(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function e3(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function t3(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=r?t.indexOf(r):-1;let i=e3(t,Math.max(a,0));s.length===1&&(i=i.filter(u=>u!==r));const c=i.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function r3(t,e){const{x:r,y:n}=t;let s=!1;for(let a=0,i=e.length-1;a<e.length;i=a++){const l=e[a],c=e[i],u=l.x,d=l.y,h=c.x,m=c.y;d>n!=m>n&&r<(h-u)*(n-d)/(m-d)+u&&(s=!s)}return s}function n3(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return r3(r,e)}function Jl(t){return e=>e.pointerType==="mouse"?t(e):void 0}var s3=cN,a3=cv,o3=dN,i3=hN,l3=fv,c3=fN,u3=ch,d3=pN,h3=vN,f3=xN,m3=_N,p3=bN,g3=jN,v3=NN,y3=CN,uh="DropdownMenu",[x3,gz]=yr(uh,[iN]),or=iN(),[w3,PN]=x3(uh),TN=t=>{const{__scopeDropdownMenu:e,children:r,dir:n,open:s,defaultOpen:a,onOpenChange:i,modal:l=!0}=t,c=or(e),u=f.useRef(null),[d,h]=Xs({prop:s,defaultProp:a??!1,onChange:i,caller:uh});return o.jsx(w3,{scope:e,triggerId:on(),triggerRef:u,contentId:on(),open:d,onOpenChange:h,onOpenToggle:f.useCallback(()=>h(m=>!m),[h]),modal:l,children:o.jsx(s3,{...c,open:d,onOpenChange:h,dir:n,modal:l,children:r})})};TN.displayName=uh;var RN="DropdownMenuTrigger",ON=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=t,a=PN(RN,r),i=or(r);return o.jsx(a3,{asChild:!0,...i,children:o.jsx(xe.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:Yd(e,a.triggerRef),onPointerDown:oe(t.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:oe(t.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});ON.displayName=RN;var _3="DropdownMenuPortal",DN=t=>{const{__scopeDropdownMenu:e,...r}=t,n=or(e);return o.jsx(o3,{...n,...r})};DN.displayName=_3;var AN="DropdownMenuContent",MN=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=PN(AN,r),a=or(r),i=f.useRef(!1);return o.jsx(i3,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...n,ref:e,onCloseAutoFocus:oe(t.onCloseAutoFocus,l=>{var c;i.current||(c=s.triggerRef.current)==null||c.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:oe(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(i.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});MN.displayName=AN;var b3="DropdownMenuGroup",j3=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=or(r);return o.jsx(l3,{...s,...n,ref:e})});j3.displayName=b3;var S3="DropdownMenuLabel",IN=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=or(r);return o.jsx(c3,{...s,...n,ref:e})});IN.displayName=S3;var N3="DropdownMenuItem",LN=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=or(r);return o.jsx(u3,{...s,...n,ref:e})});LN.displayName=N3;var k3="DropdownMenuCheckboxItem",FN=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=or(r);return o.jsx(d3,{...s,...n,ref:e})});FN.displayName=k3;var C3="DropdownMenuRadioGroup",E3=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=or(r);return o.jsx(h3,{...s,...n,ref:e})});E3.displayName=C3;var P3="DropdownMenuRadioItem",$N=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=or(r);return o.jsx(f3,{...s,...n,ref:e})});$N.displayName=P3;var T3="DropdownMenuItemIndicator",UN=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=or(r);return o.jsx(m3,{...s,...n,ref:e})});UN.displayName=T3;var R3="DropdownMenuSeparator",BN=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=or(r);return o.jsx(p3,{...s,...n,ref:e})});BN.displayName=R3;var O3="DropdownMenuArrow",D3=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=or(r);return o.jsx(g3,{...s,...n,ref:e})});D3.displayName=O3;var A3="DropdownMenuSubTrigger",zN=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=or(r);return o.jsx(v3,{...s,...n,ref:e})});zN.displayName=A3;var M3="DropdownMenuSubContent",WN=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=or(r);return o.jsx(y3,{...s,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});WN.displayName=M3;var I3=TN,L3=ON,F3=DN,VN=MN,HN=IN,qN=LN,KN=FN,GN=$N,YN=UN,QN=BN,JN=zN,XN=WN;const ZN=I3,ek=L3,$3=f.forwardRef(({className:t,inset:e,children:r,...n},s)=>o.jsxs(JN,{ref:s,className:J("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",e&&"pl-8",t),...n,children:[r,o.jsx(zg,{className:"ml-auto h-4 w-4"})]}));$3.displayName=JN.displayName;const U3=f.forwardRef(({className:t,...e},r)=>o.jsx(XN,{ref:r,className:J("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));U3.displayName=XN.displayName;const gv=f.forwardRef(({className:t,sideOffset:e=4,...r},n)=>o.jsx(F3,{children:o.jsx(VN,{ref:n,sideOffset:e,className:J("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));gv.displayName=VN.displayName;const qn=f.forwardRef(({className:t,inset:e,...r},n)=>o.jsx(qN,{ref:n,className:J("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e&&"pl-8",t),...r}));qn.displayName=qN.displayName;const B3=f.forwardRef(({className:t,children:e,checked:r,...n},s)=>o.jsxs(KN,{ref:s,className:J("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),checked:r,...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(YN,{children:o.jsx(Bg,{className:"h-4 w-4"})})}),e]}));B3.displayName=KN.displayName;const z3=f.forwardRef(({className:t,children:e,...r},n)=>o.jsxs(GN,{ref:n,className:J("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(YN,{children:o.jsx(BI,{className:"h-2 w-2 fill-current"})})}),e]}));z3.displayName=GN.displayName;const W3=f.forwardRef(({className:t,inset:e,...r},n)=>o.jsx(HN,{ref:n,className:J("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));W3.displayName=HN.displayName;const V3=f.forwardRef(({className:t,...e},r)=>o.jsx(QN,{ref:r,className:J("-mx-1 my-1 h-px bg-muted",t),...e}));V3.displayName=QN.displayName;var dh="Dialog",[tk,rk]=yr(dh),[H3,mn]=tk(dh),nk=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:s,onOpenChange:a,modal:i=!0}=t,l=f.useRef(null),c=f.useRef(null),[u,d]=Xs({prop:n,defaultProp:s??!1,onChange:a,caller:dh});return o.jsx(H3,{scope:e,triggerRef:l,contentRef:c,contentId:on(),titleId:on(),descriptionId:on(),open:u,onOpenChange:d,onOpenToggle:f.useCallback(()=>d(h=>!h),[d]),modal:i,children:r})};nk.displayName=dh;var sk="DialogTrigger",ak=f.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=mn(sk,r),a=Ae(e,s.triggerRef);return o.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":xv(s.open),...n,ref:a,onClick:oe(t.onClick,s.onOpenToggle)})});ak.displayName=sk;var vv="DialogPortal",[q3,ok]=tk(vv,{forceMount:void 0}),ik=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:s}=t,a=mn(vv,e);return o.jsx(q3,{scope:e,forceMount:r,children:f.Children.map(n,i=>o.jsx(ar,{present:r||a.open,children:o.jsx(gc,{asChild:!0,container:s,children:i})}))})};ik.displayName=vv;var _d="DialogOverlay",lk=f.forwardRef((t,e)=>{const r=ok(_d,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,a=mn(_d,t.__scopeDialog);return a.modal?o.jsx(ar,{present:n||a.open,children:o.jsx(G3,{...s,ref:e})}):null});lk.displayName=_d;var K3=Gs("DialogOverlay.RemoveScroll"),G3=f.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=mn(_d,r);return o.jsx(vc,{as:K3,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(xe.div,{"data-state":xv(s.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),to="DialogContent",ck=f.forwardRef((t,e)=>{const r=ok(to,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,a=mn(to,t.__scopeDialog);return o.jsx(ar,{present:n||a.open,children:a.modal?o.jsx(Y3,{...s,ref:e}):o.jsx(Q3,{...s,ref:e})})});ck.displayName=to;var Y3=f.forwardRef((t,e)=>{const r=mn(to,t.__scopeDialog),n=f.useRef(null),s=Ae(e,r.contentRef,n);return f.useEffect(()=>{const a=n.current;if(a)return rh(a)},[]),o.jsx(uk,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:oe(t.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=r.triggerRef.current)==null||i.focus()}),onPointerDownOutside:oe(t.onPointerDownOutside,a=>{const i=a.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&a.preventDefault()}),onFocusOutside:oe(t.onFocusOutside,a=>a.preventDefault())})}),Q3=f.forwardRef((t,e)=>{const r=mn(to,t.__scopeDialog),n=f.useRef(!1),s=f.useRef(!1);return o.jsx(uk,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,l;(i=t.onCloseAutoFocus)==null||i.call(t,a),a.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=a.target;((u=r.triggerRef.current)==null?void 0:u.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),uk=f.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:a,...i}=t,l=mn(to,r),c=f.useRef(null),u=Ae(e,c);return Jd(),o.jsxs(o.Fragment,{children:[o.jsx(mc,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:a,children:o.jsx(fc,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":xv(l.open),...i,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(X3,{titleId:l.titleId}),o.jsx(eU,{contentRef:c,descriptionId:l.descriptionId})]})]})}),yv="DialogTitle",dk=f.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=mn(yv,r);return o.jsx(xe.h2,{id:s.titleId,...n,ref:e})});dk.displayName=yv;var hk="DialogDescription",fk=f.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=mn(hk,r);return o.jsx(xe.p,{id:s.descriptionId,...n,ref:e})});fk.displayName=hk;var mk="DialogClose",pk=f.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=mn(mk,r);return o.jsx(xe.button,{type:"button",...n,ref:e,onClick:oe(t.onClick,()=>s.onOpenChange(!1))})});pk.displayName=mk;function xv(t){return t?"open":"closed"}var gk="DialogTitleWarning",[J3,vk]=fL(gk,{contentName:to,titleName:yv,docsSlug:"dialog"}),X3=({titleId:t})=>{const e=vk(gk),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return f.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},Z3="DialogDescriptionWarning",eU=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${vk(Z3).contentName}}.`;return f.useEffect(()=>{var a;const s=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},wv=nk,_v=ak,bv=ik,_c=lk,bc=ck,jc=dk,Sc=fk,hh=pk;const At=wv,za=_v,tU=bv,yk=f.forwardRef(({className:t,...e},r)=>o.jsx(_c,{ref:r,className:J("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));yk.displayName=_c.displayName;const Et=f.forwardRef(({className:t,children:e,...r},n)=>o.jsxs(tU,{children:[o.jsx(yk,{}),o.jsxs(bc,{ref:n,className:J("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-xl",t),...r,children:[e,o.jsxs(hh,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[o.jsx(Gg,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Et.displayName=bc.displayName;const Pt=({className:t,...e})=>o.jsx("div",{className:J("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Pt.displayName="DialogHeader";const rr=({className:t,...e})=>o.jsx("div",{className:J("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});rr.displayName="DialogFooter";const Tt=f.forwardRef(({className:t,...e},r)=>o.jsx(jc,{ref:r,className:J("text-lg font-semibold leading-none tracking-tight",t),...e}));Tt.displayName=jc.displayName;const Kt=f.forwardRef(({className:t,...e},r)=>o.jsx(Sc,{ref:r,className:J("text-sm text-muted-foreground",t),...e}));Kt.displayName=Sc.displayName;function rU({onToggleSidebar:t}){const{user:e,signOut:r}=St(),{t:n}=gt(),s=fn(),{setTheme:a}=RM(),[i,l]=f.useState(!1),[c,u]=f.useState(""),[d,h]=f.useState(""),[m,p]=f.useState(""),[v,g]=f.useState(!1),w=async()=>{try{await r(),s("/login")}catch(_){console.error("Logout failed:",_),s("/login")}},x=()=>{l(!0)},y=async _=>{if(_.preventDefault(),!v){if(!c.trim()){p(n("settings.newPasswordRequired"));return}if(c.length<6){p(n("settings.passwordTooShort"));return}if(c!==d){p(n("settings.passwordsDoNotMatch"));return}p(""),g(!0);try{const{error:b}=await Z.auth.updateUser({password:c});if(b)throw b;l(!1),u(""),h(""),alert(n("settings.passwordChangedSuccessfully"))}catch(b){console.error("Password change failed:",b),p(b.message||n("settings.passwordChangeFailed"))}finally{g(!1)}}};return o.jsxs("header",{className:"border-b bg-background sticky top-0 z-50",children:[o.jsxs("div",{className:"h-14 flex items-center px-4 md:px-6",children:[o.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[o.jsx("button",{onClick:t,className:"text-foreground hover:text-muted-foreground transition-colors","aria-label":"Toggle sidebar",children:o.jsx(GI,{className:"h-5 w-5"})}),o.jsx("div",{className:"hidden md:block",children:o.jsx(hL,{})})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"text-sm text-muted-foreground hidden md:block",children:q((e==null?void 0:e.profile)||{},"user_name")||(e==null?void 0:e.email)}),o.jsx(X1,{}),o.jsxs("button",{className:"text-foreground hover:text-muted-foreground relative transition-colors",title:n("common.notifications"),children:[o.jsx(DI,{className:"h-5 w-5"}),o.jsx("span",{className:"absolute -top-1 -right-1 h-3 w-3 rounded-full bg-primary flex items-center justify-center",children:o.jsx("span",{className:"h-2 w-2 rounded-full bg-primary-foreground"})}),o.jsx("span",{className:"sr-only",children:n("common.notifications")})]}),o.jsxs(ZN,{children:[o.jsx(ek,{asChild:!0,children:o.jsxs("button",{className:"text-foreground hover:text-muted-foreground transition-colors",title:n("navigation.settings"),children:[o.jsx(Sw,{className:"h-5 w-5"}),o.jsx("span",{className:"sr-only",children:n("navigation.settings")})]})}),o.jsxs(gv,{align:"end",children:[o.jsxs(qn,{onClick:()=>a("light"),children:[o.jsx(ZI,{className:"mr-2 h-4 w-4"}),o.jsx("span",{children:n("theme.light","Light")})]}),o.jsxs(qn,{onClick:()=>a("dark"),children:[o.jsx(YI,{className:"mr-2 h-4 w-4"}),o.jsx("span",{children:n("theme.dark","Dark")})]}),o.jsxs(qn,{onClick:()=>a("system"),children:[o.jsx(Sw,{className:"mr-2 h-4 w-4"}),o.jsx("span",{children:n("theme.system","System")})]}),o.jsxs(qn,{onClick:x,children:[o.jsx(qI,{className:"h-4 w-4 mr-2"}),n("settings.changePassword")]}),o.jsxs(qn,{onClick:w,className:"text-destructive focus:text-destructive",children:[o.jsx(oL,{className:"h-4 w-4 mr-2"}),n("buttons.logout")]})]})]})]})]}),o.jsx(At,{open:i,onOpenChange:l,children:o.jsxs(Et,{className:"sm:max-w-[425px]",children:[o.jsxs(Pt,{children:[o.jsx(Tt,{children:n("settings.changePassword")}),o.jsx(Kt,{children:n("settings.changePasswordDescription")})]}),o.jsxs("form",{onSubmit:y,className:"space-y-4",children:[m&&o.jsx(ji,{variant:"destructive",children:o.jsx(Si,{children:m})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{htmlFor:"newPassword",children:n("settings.newPassword")}),o.jsx(ke,{id:"newPassword",type:"password",value:c,onChange:_=>u(_.target.value),placeholder:n("settings.newPasswordPlaceholder"),required:!0,minLength:6})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{htmlFor:"confirmPassword",children:n("settings.confirmPassword")}),o.jsx(ke,{id:"confirmPassword",type:"password",value:d,onChange:_=>h(_.target.value),placeholder:n("settings.confirmPasswordPlaceholder"),required:!0,minLength:6})]}),o.jsxs(rr,{className:"flex flex-col-reverse sm:flex-row gap-2",children:[o.jsx(Y,{type:"button",variant:"outline",onClick:()=>l(!1),className:"w-full sm:w-auto",children:n("buttons.cancel")}),o.jsx(Y,{type:"submit",disabled:v||!c.trim()||!d.trim(),className:"w-full sm:w-auto",children:n(v?"settings.changingPassword":"settings.changePassword")})]})]})]})})]})}const jv=wv,xk=_v,nU=bv,wk=f.forwardRef(({className:t,...e},r)=>o.jsx(_c,{className:J("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:r}));wk.displayName=_c.displayName;const sU=uc("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),fh=f.forwardRef(({side:t="right",className:e,children:r,...n},s)=>o.jsxs(nU,{children:[o.jsx(wk,{}),o.jsxs(bc,{ref:s,className:J(sU({side:t}),e),...n,children:[r,o.jsxs(hh,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[o.jsx(Gg,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));fh.displayName=bc.displayName;const _k=f.forwardRef(({className:t,...e},r)=>o.jsx(jc,{ref:r,className:J("text-lg font-semibold text-foreground",t),...e}));_k.displayName=jc.displayName;const bk=f.forwardRef(({className:t,...e},r)=>o.jsx(Sc,{ref:r,className:J("text-sm text-muted-foreground",t),...e}));bk.displayName=Sc.displayName;function Vt({children:t}){const[e,r]=f.useState(!0),[n,s]=f.useState(!1);f.useEffect(()=>{const l=()=>{s(window.innerWidth<1024),window.innerWidth<1024?r(!1):r(!0)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]);const a=()=>{r(!e)},i=()=>{n&&r(!1)};return o.jsxs("div",{className:"h-screen bg-background w-full flex flex-col",children:[o.jsx(rU,{onToggleSidebar:a}),o.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[!n&&o.jsx("aside",{className:J("bg-sidebar transition-all duration-300 ease-in-out hidden lg:block",e?"w-60":"w-0 overflow-hidden"),style:{height:"calc(100vh - 56px)"},children:o.jsx(Nw,{onNavigate:i})}),n&&o.jsx(jv,{open:e,onOpenChange:r,children:o.jsxs(fh,{side:sn()?"right":"left",className:"p-0 w-60 [&>button]:hidden",children:[o.jsx(_k,{className:"sr-only",children:"Navigation Menu"}),o.jsx(bk,{className:"sr-only",children:"Application navigation sidebar"}),o.jsx(Nw,{onNavigate:i})]})}),o.jsx("main",{className:"flex-1 overflow-hidden bg-background pt-2",children:o.jsx("div",{className:"p-3 sm:p-4 md:p-6 w-full h-full overflow-y-auto",children:t})})]})]})}const kn={async getAll(){try{console.log("[stageService] Fetching all stages...");const{data:t,error:e}=await Z.from("stages").select("*").order("stager_order_index",{ascending:!0});if(e)throw console.error("[stageService] Error fetching stages:",e),e;return console.log(`[stageService] Successfully fetched ${(t==null?void 0:t.length)||0} stages`),t||[]}catch(t){throw console.error("[stageService] Failed to fetch stages:",t),t}},async getGlobalStages(){try{console.log("[stageService] Fetching global stages...");const{data:t,error:e}=await Z.from("stages").select("*").is("project_id",null).order("stager_order_index",{ascending:!0});if(e)throw console.error("[stageService] Error fetching global stages:",e),e;return console.log(`[stageService] Successfully fetched ${(t==null?void 0:t.length)||0} global stages`),t||[]}catch(t){throw console.error("[stageService] Failed to fetch global stages:",t),t}},async create(t){try{const{data:e}=await Z.from("stages").select("stager_order_index").order("stager_order_index",{ascending:!1}).limit(1),r=e&&e.length>0?e[0].stager_order_index:-1,n=t.stager_order_index??r+1,s=Wr({stage_name:t.stage_name,stager_order_index:n,project_id:t.project_id,color:t.color,color_var:t.color_var},{stage_name:"stage_name"}),{data:a,error:i}=await Z.from("stages").insert(s).select().single();if(i)throw i;return a}catch(e){throw console.error("[stageService] Failed to create stage:",e),e}},async update(t,e){try{const r=Wr(e,{stage_name:"stage_name"}),{error:n}=await Z.from("stages").update(r).eq("stage_id",t);if(n)throw n}catch(r){throw console.error("[stageService] Failed to update stage:",r),r}},async delete(t){try{const{error:e}=await Z.from("stages").delete().eq("stage_id",t);if(e)throw e}catch(e){throw console.error("[stageService] Failed to delete stage:",e),e}}},$r={async getAll(){try{console.log("[userService] Fetching all users...");const{data:t,error:e}=await Z.from("users").select("*");if(e)throw e;return console.log(`[userService] Successfully fetched ${(t==null?void 0:t.length)||0} users`),t||[]}catch(t){throw console.error("[userService] Failed to fetch users:",t),t}},async getById(t){try{const{data:e,error:r}=await Z.from("users").select("*").eq("user_id",t).single();return r?null:e}catch(e){return console.error("[userService] Failed to fetch user:",e),null}},async getByAuthId(t){try{const{data:e,error:r}=await Z.from("users").select("*").eq("auth_user_id",t).single();return r?null:e}catch(e){return console.error("[userService] Failed to fetch user by auth ID:",e),null}},async update(t,e){try{const r={};e.user_name!==void 0&&(r.user_name=e.user_name),e.user_name_ar!==void 0&&(r.user_name_ar=e.user_name_ar),e.user_email!==void 0&&(r.user_email=e.user_email),e.user_role!==void 0&&(r.user_role=e.user_role),e.avatar!==void 0&&(r.avatar=e.avatar),e.client_contact!==void 0&&(r.client_contact=e.client_contact),e.company_name!==void 0&&(r.company_name=e.company_name),e.company_name_ar!==void 0&&(r.company_name_ar=e.company_name_ar);const{error:n}=await Z.from("users").update(r).eq("user_id",t);if(n)throw n;console.log(`[userService] Successfully updated user ${t}`)}catch(r){throw console.error("[userService] Failed to update user:",r),r}}},Sv={async getAll(){try{console.log("[clientService] Fetching all clients...");const{data:t,error:e}=await Z.from("users").select("*").eq("user_role","client");if(e)throw e;return console.log(`[clientService] Successfully fetched ${(t==null?void 0:t.length)||0} clients`),t||[]}catch(t){throw console.error("[clientService] Failed to fetch clients:",t),t}},async getById(t){try{const{data:e,error:r}=await Z.from("users").select("*").eq("user_id",t).eq("user_role","client").single();return r?null:e}catch(e){return console.error("[clientService] Failed to fetch client:",e),null}},async create(t){try{const e=Wr({user_name:t.user_name,user_email:t.user_email,user_role:"client",avatar:t.avatar,client_contact:t.client_contact,company_name:t.company_name},{user_name:"user_name",company_name:"company_name"}),{data:r,error:n}=await Z.from("users").insert(e).select().single();if(n)throw n;return r}catch(e){throw console.error("[clientService] Failed to create client:",e),e}}},wn={async getAll(){try{console.log("[projectService] Fetching all projects...");const{data:t,error:e}=await Z.from("projects").select("*").order("created_date",{ascending:!1});if(e)throw e;return console.log(`[projectService] Successfully fetched ${(t==null?void 0:t.length)||0} projects`),t||[]}catch(t){throw console.error("[projectService] Failed to fetch projects:",t),t}},async getById(t){try{const{data:e,error:r}=await Z.from("projects").select("*").eq("project_id",t).single();return r?null:e}catch(e){return console.error("[projectService] Failed to fetch project:",e),null}},async create(t){try{const{data:e,error:r}=await Z.from("projects").insert({project_name:t.project_name,project_description:t.project_description,created_by:t.created_by,progress:t.progress||0,stage:t.stage,end_date:t.end_date}).select().single();if(r)throw r;return e}catch(e){throw console.error("[projectService] Failed to create project:",e),e}},async update(t,e){try{const r={};e.project_name&&(r.project_name=e.project_name),e.project_description!==void 0&&(r.project_description=e.project_description),e.progress!==void 0&&(r.progress=e.progress),e.stage!==void 0&&(r.stage=e.stage),e.end_date!==void 0&&(r.end_date=e.end_date);const{error:n}=await Z.from("projects").update(r).eq("project_id",t);if(n)throw n}catch(r){throw console.error("[projectService] Failed to update project:",r),r}},async delete(t){try{const{error:e}=await Z.from("projects").delete().eq("project_id",t);if(e)throw e}catch(e){throw console.error("[projectService] Failed to delete project:",e),e}},async getByUserAuthId(t){try{console.log("[projectService] Fetching projects for user:",t);const{data:e,error:r}=await Z.from("project_users").select(`
          project_id,
          projects (
            project_id,
            project_name,
            project_description,
            created_date,
            created_by,
            progress,
            stage,
            end_date,
            updated_at
          )
        `).eq("auth_user_id",t);if(r)throw r;const n=(e==null?void 0:e.map(s=>s.projects).filter(Boolean))||[];return console.log(`[projectService] Successfully fetched ${n.length} projects for user`),n}catch(e){throw console.error("[projectService] Failed to fetch projects for user:",e),e}}},Ds={async getAll(){try{console.log("[taskService] Fetching all tasks...");const{data:t,error:e}=await Z.from("tasks").select("*").order("created_at",{ascending:!1});if(e)throw e;return console.log(`[taskService] Successfully fetched ${(t==null?void 0:t.length)||0} tasks`),t||[]}catch(t){throw console.error("[taskService] Failed to fetch tasks:",t),t}},async getByStage(t){try{const{data:e,error:r}=await Z.from("tasks").select("*").eq("stage_id",t);if(r)throw r;return e||[]}catch(e){throw console.error("[taskService] Failed to fetch tasks:",e),e}},async create(t){try{const e=Wr({task_name:t.task_name,stage_id:t.stage_id,assigned_to:t.assigned_to,task_status:t.task_status,due_date:t.due_date,description:t.description,auth_user_id:t.auth_user_id},{task_name:"task_name",description:"description"}),{data:r,error:n}=await Z.from("tasks").insert(e).select().single();if(n)throw n;return r}catch(e){throw console.error("[taskService] Failed to create task:",e),e}},async update(t,e){try{const r=Wr(e,{task_name:"task_name",description:"description"}),{error:n}=await Z.from("tasks").update(r).eq("task_id",t);if(n)throw n}catch(r){throw console.error("[taskService] Failed to update task:",r),r}},async delete(t){try{const{error:e}=await Z.from("tasks").delete().eq("task_id",t);if(e)throw e}catch(e){throw console.error("[taskService] Failed to delete task:",e),e}}},wp={async getByTask(t){try{const{data:e,error:r}=await Z.from("comments").select("*").eq("task_id",t).order("created_date",{ascending:!0});if(r)throw r;return e||[]}catch(e){throw console.error("[commentService] Failed to fetch comments:",e),e}},async create(t){try{const{data:e,error:r}=await Z.from("comments").insert({task_id:t.task_id,auth_user_id:t.auth_user_id,message:t.message}).select().single();if(r)throw r;return e}catch(e){throw console.error("[commentService] Failed to create comment:",e),e}}},Bo={async getUserRooms(t){const{data:e,error:r}=await Z.from("room_members").select("room_id").eq("auth_user_id",t);if(r)throw r;if(!e||e.length===0)return[];const n=e.map(i=>i.room_id),{data:s,error:a}=await Z.from("rooms").select("*").in("room_id",n);if(a)throw a;return s||[]},async createRoom(t){const{data:e,error:r}=await Z.from("rooms").insert({room_name:t.name,is_private:t.is_private??!0,project_id:t.project_id,created_by:t.created_by,auth_user_id:t.auth_user_id}).select().single();if(r)throw r;return e},async addMember(t,e){const{error:r}=await Z.from("room_members").insert({room_id:t,auth_user_id:e});if(r)throw r},async getRoomMembers(t){const{data:e,error:r}=await Z.from("room_members").select(`
        auth_user_id,
        users (*)
      `).eq("room_id",t);if(r)throw r;return!e||e.length===0?[]:e.map(n=>n.users).filter(Boolean)}},Yw={async getProjectUsers(t){try{console.log("[projectUserService] Fetching users for project:",t);const{data:e,error:r}=await Z.from("project_users").select(`
          auth_user_id,
          users (
            user_id,
            user_name,
            user_email,
            user_role,
            avatar,
            auth_user_id,
            client_contact,
            company_name,
            created_at,
            updated_at
          )
        `).eq("project_id",t);if(r)throw r;const n=(e==null?void 0:e.map(s=>s.users).filter(Boolean))||[];return console.log(`[projectUserService] Found ${n.length} users for project ${t}`),n}catch(e){throw console.error("[projectUserService] Failed to fetch project users:",e),e}},async addUserToProject(t,e){try{console.log("[projectUserService] Adding user",e,"to project",t);const{error:r}=await Z.from("project_users").insert({project_id:t,user_id:e});if(r)throw r;console.log("[projectUserService] Successfully added user to project")}catch(r){throw console.error("[projectUserService] Failed to add user to project:",r),r}},async removeUserFromProject(t,e){try{console.log("[projectUserService] Removing user",e,"from project",t);const{error:r}=await Z.from("project_users").delete().eq("project_id",t).eq("user_id",e);if(r)throw r;console.log("[projectUserService] Successfully removed user from project")}catch(r){throw console.error("[projectUserService] Failed to remove user from project:",r),r}}},So={async getAll(){try{console.log("[teamService] Fetching all teams...");const{data:t,error:e}=await Z.from("teams").select("*").order("created_at",{ascending:!1});if(e)throw e;return console.log(`[teamService] Successfully fetched ${(t==null?void 0:t.length)||0} teams`),t||[]}catch(t){throw console.error("[teamService] Failed to fetch teams:",t),t}},async getAllWithMembers(){try{console.log("[teamService] Fetching all teams with members...");const{data:t,error:e}=await Z.from("teams").select(`
          team_id,
          team_name,
          team_name_ar,
          partner_id,
          auth_user_id,
          team_leader_id,
          created_at
        `).order("created_at",{ascending:!1});if(e)throw e;if(!t||t.length===0)return[];const r=t.map(l=>l.team_id),{data:n,error:s}=await Z.from("team_members").select(`
          team_id,
          auth_user_id,
          joined_at
        `).in("team_id",r);if(s)throw s;const a=(n||[]).reduce((l,c)=>(l[c.team_id]||(l[c.team_id]=[]),l[c.team_id].push({auth_user_id:c.auth_user_id,joined_at:c.joined_at}),l),{}),i=t.map(l=>({...l,team_members:a[l.team_id]||[]}));return console.log(`[teamService] Successfully fetched ${i.length} teams with members`),i}catch(t){throw console.error("[teamService] Failed to fetch teams with members:",t),t}},async getAllTeamMembers(){try{console.log("[teamService] Fetching all team members with user details...");const{data:t,error:e}=await Z.from("team_members").select(`
          team_id,
          users (
            user_id,
            user_name,
            user_email,
            user_role,
            avatar,
            auth_user_id,
            client_contact,
            company_name,
            created_at,
            updated_at
          )
        `);if(e)throw e;const r=(t||[]).reduce((n,s)=>{const a=s.team_id;return n[a]||(n[a]=[]),n[a].push(s.users),n},{});return console.log(`[teamService] Successfully fetched members for ${Object.keys(r).length} teams`),r}catch(t){throw console.error("[teamService] Failed to fetch all team members:",t),t}},async getById(t){try{const{data:e,error:r}=await Z.from("teams").select("*").eq("team_id",t).single();return r?null:e}catch(e){return console.error("[teamService] Failed to fetch team:",e),null}},async create(t){try{const{data:e,error:r}=await Z.from("teams").insert(t).select().single();if(r)throw r;return e}catch(e){throw console.error("[teamService] Failed to create team:",e),e}},async update(t,e){try{const r=Wr(e,{team_name:"team_name"}),{error:n}=await Z.from("teams").update(r).eq("team_id",t);if(n)throw n}catch(r){throw console.error("[teamService] Failed to update team:",r),r}},async delete(t){try{const{error:e}=await Z.from("teams").delete().eq("team_id",t);if(e)throw e}catch(e){throw console.error("[teamService] Failed to delete team:",e),e}},async getTeamMembers(t){try{console.log("[teamService] Fetching members for team:",t);const{data:e,error:r}=await Z.from("team_members").select(`
          auth_user_id,
          users!auth_user_id (
            user_id,
            user_name,
            user_email,
            user_role,
            avatar,
            auth_user_id,
            client_contact,
            company_name,
            created_at,
            updated_at
          )
        `).eq("team_id",t);if(r)throw r;const n=(e==null?void 0:e.map(s=>s.users).filter(Boolean))||[];return console.log(`[teamService] Found ${n.length} members for team ${t}`),n}catch(e){throw console.error("[teamService] Failed to fetch team members:",e),e}},async addMember(t,e){try{console.log("[teamService] Adding member",e,"to team",t);const{error:r}=await Z.from("team_members").insert({team_id:t,auth_user_id:e});if(r)throw r;console.log("[teamService] Successfully added member to team")}catch(r){throw console.error("[teamService] Failed to add member to team:",r),r}},async removeMember(t,e){try{console.log("[teamService] Removing member",e,"from team",t);const{error:r}=await Z.from("team_members").delete().eq("team_id",t).eq("auth_user_id",e);if(r)throw r;console.log("[teamService] Successfully removed member from team")}catch(r){throw console.error("[teamService] Failed to remove member from team:",r),r}}},Nf={async getAll(){try{console.log("[ticketService] Fetching all tickets...");const{data:t,error:e}=await Z.from("tickets").select("*").order("created_date",{ascending:!1});if(e)throw e;return console.log(`[ticketService] Successfully fetched ${(t==null?void 0:t.length)||0} tickets`),t||[]}catch(t){throw console.error("[ticketService] Failed to fetch tickets:",t),t}},async getById(t){try{const{data:e,error:r}=await Z.from("tickets").select("*").eq("ticket_id",t).single();return r?null:e}catch(e){return console.error("[ticketService] Failed to fetch ticket:",e),null}},async create(t){try{const{data:e,error:r}=await Z.from("tickets").insert({user_id:t.user_id,assigned_to:t.assigned_to,subject:t.subject,description:t.description,priority:t.priority,status:t.status,created_by:t.created_by}).select().single();if(r)throw r;return e}catch(e){throw console.error("[ticketService] Failed to create ticket:",e),e}},async update(t,e){try{const r={};e.user_id!==void 0&&(r.user_id=e.user_id),e.assigned_to!==void 0&&(r.assigned_to=e.assigned_to),e.subject&&(r.subject=e.subject),e.description!==void 0&&(r.description=e.description),e.priority&&(r.priority=e.priority),e.status&&(r.status=e.status),e.resolved_date!==void 0&&(r.resolved_date=e.resolved_date);const{error:n}=await Z.from("tickets").update(r).eq("ticket_id",t);if(n)throw n}catch(r){throw console.error("[ticketService] Failed to update ticket:",r),r}},async delete(t){try{const{error:e}=await Z.from("tickets").delete().eq("ticket_id",t);if(e)throw e}catch(e){throw console.error("[ticketService] Failed to delete ticket:",e),e}}},_l={async getByRoom(t,e){try{let r=Z.from("messages").select("*").eq("room_id",t).order("created_at",{ascending:!1});e!=null&&e.limit&&(r=r.limit(e.limit)),e!=null&&e.before&&(r=r.lt("created_at",e.before));const{data:n,error:s}=await r;if(s)throw s;return(n||[]).reverse()}catch(r){throw console.error("[messageService] Failed to fetch messages:",r),r}},async create(t){try{const{data:e,error:r}=await Z.from("messages").insert(t).select().single();if(r)throw r;return e}catch(e){throw console.error("[messageService] Failed to create message:",e),e}}},Na={async getAll(){try{console.log("[leadService] Fetching all leads...");const{data:t,error:e}=await Z.from("leads").select("*").order("created_date",{ascending:!1});if(e)throw e;return console.log(`[leadService] Successfully fetched ${(t==null?void 0:t.length)||0} leads`),t||[]}catch(t){throw console.error("[leadService] Failed to fetch leads:",t),t}},async getById(t){try{const{data:e,error:r}=await Z.from("leads").select("*").eq("lead_id",t).single();return r?null:e}catch(e){return console.error("[leadService] Failed to fetch lead:",e),null}},async create(t){try{const{data:e,error:r}=await Z.from("leads").insert({lead_name:t.lead_name,lead_description:t.lead_description,client_name:t.client_name,client_user_id:t.client_user_id,created_by:t.created_by,stage:t.stage,assigned_to:t.assigned_to,assigned_at:t.assigned_at}).select().single();if(r)throw r;return e}catch(e){throw console.error("[leadService] Failed to create lead:",e),e}},async update(t,e){try{const r={};e.lead_name&&(r.lead_name=e.lead_name),e.lead_description!==void 0&&(r.lead_description=e.lead_description),e.client_name&&(r.client_name=e.client_name),e.client_user_id&&(r.client_user_id=e.client_user_id),e.stage!==void 0&&(r.stage=e.stage),e.assigned_to!==void 0&&(r.assigned_to=e.assigned_to),e.assigned_at!==void 0&&(r.assigned_at=e.assigned_at);const{error:n}=await Z.from("leads").update(r).eq("lead_id",t);if(n)throw n}catch(r){throw console.error("[leadService] Failed to update lead:",r),r}},async delete(t){try{const{error:e}=await Z.from("leads").delete().eq("lead_id",t);if(e)throw e}catch(e){throw console.error("[leadService] Failed to delete lead:",e),e}}},ya={async getAll(){try{console.log("[surveyTemplateService] Fetching all survey templates...");const{data:t,error:e}=await Z.from("survey_templates").select("*").order("created_at",{ascending:!1});if(e)throw e;return console.log(`[surveyTemplateService] Successfully fetched ${(t==null?void 0:t.length)||0} templates`),t||[]}catch(t){throw console.error("[surveyTemplateService] Failed to fetch templates:",t),t}},async getById(t){try{const{data:e,error:r}=await Z.from("survey_templates").select("*").eq("template_id",t).single();return r?null:e}catch(e){return console.error("[surveyTemplateService] Failed to fetch template:",e),null}},async create(t){try{const{data:e,error:r}=await Z.from("survey_templates").insert(t).select().single();if(r)throw r;return e}catch(e){throw console.error("[surveyTemplateService] Failed to create template:",e),e}},async update(t,e){try{const r={};e.template_name&&(r.template_name=e.template_name),e.template_name_ar&&(r.template_name_ar=e.template_name_ar),e.template_description!==void 0&&(r.template_description=e.template_description),e.template_description_ar!==void 0&&(r.template_description_ar=e.template_description_ar),e.category&&(r.category=e.category),e.is_active!==void 0&&(r.is_active=e.is_active),e.is_default!==void 0&&(r.is_default=e.is_default);const{error:n}=await Z.from("survey_templates").update(r).eq("template_id",t);if(n)throw n}catch(r){throw console.error("[surveyTemplateService] Failed to update template:",r),r}},async delete(t){try{const{error:e}=await Z.from("survey_templates").delete().eq("template_id",t);if(e)throw e}catch(e){throw console.error("[surveyTemplateService] Failed to delete template:",e),e}},async getFields(t){try{console.log("[surveyTemplateService] Fetching fields for template:",t);const{data:e,error:r}=await Z.from("survey_template_fields").select("*").eq("template_id",t).order("field_order",{ascending:!0});if(r)throw r;return console.log(`[surveyTemplateService] Successfully fetched ${(e==null?void 0:e.length)||0} fields`),e||[]}catch(e){throw console.error("[surveyTemplateService] Failed to fetch template fields:",e),e}},async createField(t){try{const{data:e,error:r}=await Z.from("survey_template_fields").insert(t).select().single();if(r)throw r;return e}catch(e){throw console.error("[surveyTemplateService] Failed to create field:",e),e}},async updateField(t,e){try{const r={};e.field_order!==void 0&&(r.field_order=e.field_order),e.field_type&&(r.field_type=e.field_type),e.field_label&&(r.field_label=e.field_label),e.field_label_ar&&(r.field_label_ar=e.field_label_ar),e.help_text!==void 0&&(r.help_text=e.help_text),e.help_text_ar!==void 0&&(r.help_text_ar=e.help_text_ar),e.is_required!==void 0&&(r.is_required=e.is_required),e.field_options!==void 0&&(r.field_options=e.field_options),e.validation_rules!==void 0&&(r.validation_rules=e.validation_rules),e.default_value!==void 0&&(r.default_value=e.default_value),e.conditional_logic!==void 0&&(r.conditional_logic=e.conditional_logic);const{error:n}=await Z.from("survey_template_fields").update(r).eq("field_id",t);if(n)throw n}catch(r){throw console.error("[surveyTemplateService] Failed to update field:",r),r}},async deleteField(t){try{const{error:e}=await Z.from("survey_template_fields").delete().eq("field_id",t);if(e)throw e}catch(e){throw console.error("[surveyTemplateService] Failed to delete field:",e),e}}},bd={async getAll(){try{console.log("[surveyService] Fetching all surveys...");const{data:t,error:e}=await Z.from("surveys").select("*").order("created_at",{ascending:!1});if(e)throw e;return console.log(`[surveyService] Successfully fetched ${(t==null?void 0:t.length)||0} surveys`),t||[]}catch(t){throw console.error("[surveyService] Failed to fetch surveys:",t),t}},async getById(t){try{const{data:e,error:r}=await Z.from("surveys").select("*").eq("survey_id",t).single();return r?null:e}catch(e){return console.error("[surveyService] Failed to fetch survey:",e),null}},async create(t){try{const{data:e,error:r}=await Z.from("surveys").insert(t).select().single();if(r)throw r;return e}catch(e){throw console.error("[surveyService] Failed to create survey:",e),e}},async update(t,e){try{const r={};e.template_id!==void 0&&(r.template_id=e.template_id),e.survey_name&&(r.survey_name=e.survey_name),e.survey_description!==void 0&&(r.survey_description=e.survey_description),e.client_name&&(r.client_name=e.client_name),e.client_name_ar&&(r.client_name_ar=e.client_name_ar),e.client_contact!==void 0&&(r.client_contact=e.client_contact),e.client_email&&(r.client_email=e.client_email),e.client_address&&(r.client_address=e.client_address),e.client_company&&(r.client_company=e.client_company),e.client_company_ar&&(r.client_company_ar=e.client_company_ar),e.survey_responses!==void 0&&(r.survey_responses=e.survey_responses),e.location_latitude!==void 0&&(r.location_latitude=e.location_latitude),e.location_longitude!==void 0&&(r.location_longitude=e.location_longitude),e.location_accuracy!==void 0&&(r.location_accuracy=e.location_accuracy),e.location_address&&(r.location_address=e.location_address),e.status&&(r.status=e.status),e.lead_id!==void 0&&(r.lead_id=e.lead_id),e.converted_to_lead_at!==void 0&&(r.converted_to_lead_at=e.converted_to_lead_at),e.device_info!==void 0&&(r.device_info=e.device_info),e.completion_time_seconds!==void 0&&(r.completion_time_seconds=e.completion_time_seconds),e.notes&&(r.notes=e.notes),e.notes_ar&&(r.notes_ar=e.notes_ar);const{error:n}=await Z.from("surveys").update(r).eq("survey_id",t);if(n)throw n}catch(r){throw console.error("[surveyService] Failed to update survey:",r),r}},async delete(t){try{const{error:e}=await Z.from("surveys").delete().eq("survey_id",t);if(e)throw e}catch(e){throw console.error("[surveyService] Failed to delete survey:",e),e}}},pe=f.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:J("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));pe.displayName="Card";const $e=f.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:J("flex flex-col space-y-1.5 p-6",t),...e}));$e.displayName="CardHeader";const Je=f.forwardRef(({className:t,...e},r)=>o.jsx("h3",{ref:r,className:J("text-2xl font-semibold leading-none tracking-tight",t),...e}));Je.displayName="CardTitle";const aU=f.forwardRef(({className:t,...e},r)=>o.jsx("p",{ref:r,className:J("text-sm text-muted-foreground",t),...e}));aU.displayName="CardDescription";const _e=f.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:J("p-6 pt-0",t),...e}));_e.displayName="CardContent";const oU=f.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:J("flex items-center p-6 pt-0",t),...e}));oU.displayName="CardFooter";var Nv="Progress",kv=100,[iU,vz]=yr(Nv),[lU,cU]=iU(Nv),jk=f.forwardRef((t,e)=>{const{__scopeProgress:r,value:n=null,max:s,getValueLabel:a=uU,...i}=t;(s||s===0)&&!Qw(s)&&console.error(dU(`${s}`,"Progress"));const l=Qw(s)?s:kv;n!==null&&!Jw(n,l)&&console.error(hU(`${n}`,"Progress"));const c=Jw(n,l)?n:null,u=jd(c)?a(c,l):void 0;return o.jsx(lU,{scope:r,value:c,max:l,children:o.jsx(xe.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":jd(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":kk(c,l),"data-value":c??void 0,"data-max":l,...i,ref:e})})});jk.displayName=Nv;var Sk="ProgressIndicator",Nk=f.forwardRef((t,e)=>{const{__scopeProgress:r,...n}=t,s=cU(Sk,r);return o.jsx(xe.div,{"data-state":kk(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...n,ref:e})});Nk.displayName=Sk;function uU(t,e){return`${Math.round(t/e*100)}%`}function kk(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function jd(t){return typeof t=="number"}function Qw(t){return jd(t)&&!isNaN(t)&&t>0}function Jw(t,e){return jd(t)&&!isNaN(t)&&t<=e&&t>=0}function dU(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${kv}\`.`}function hU(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${kv} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Ck=jk,fU=Nk;const Zs=f.forwardRef(({className:t,value:e,...r},n)=>o.jsx(Ck,{ref:n,className:J("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:o.jsx(fU,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Zs.displayName=Ck.displayName;function mU(){const{t}=gt();io();const[e,r]=f.useState([]),[n,s]=f.useState([]),[a,i]=f.useState([]),[l,c]=f.useState([]),[u,d]=f.useState([]),[h,m]=f.useState(!0),[p,v]=f.useState(null),{user:g,loading:w}=St();console.log("[Dashboard] Rendering. Auth state:",{user:g?{id:g.id,email:g.email,role:g.role}:null,authLoading:w,hasUser:!!g,loading:h}),f.useEffect(()=>{console.log("[Dashboard] useEffect - User changed:",{hasUser:!!g,authLoading:w}),g&&!w&&(console.log("[Dashboard] User is authenticated, loading data..."),x())},[g,w]);const x=async()=>{console.log("[Dashboard] Starting to load data...");try{m(!0),v(null),console.log("[Dashboard] Fetching data...");const[M,R,X,O,se]=await Promise.all([wn.getAll().catch(I=>(console.error("[Dashboard] Error fetching projects:",I),[])),Sv.getAll().catch(I=>(console.error("[Dashboard] Error fetching clients:",I),[])),$r.getAll().catch(I=>(console.error("[Dashboard] Error fetching users:",I),[])),Na.getAll().catch(I=>(console.error("[Dashboard] Error fetching leads:",I),[])),bd.getAll().catch(I=>(console.error("[Dashboard] Error fetching surveys:",I),[]))]);console.log("[Dashboard] Data fetched successfully:",{projects:M.length,clients:R.length,users:X.length,leads:O.length,surveys:se.length}),r(M),s(R),i(X),c(O),d(se)}catch(M){console.error("[Dashboard] Failed to load data:",M),v(M.message||"Failed to load data")}finally{console.log("[Dashboard] Data loading completed"),m(!1)}};if(h||w||!g)return o.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:t("common.loading")})]})});if(p)return o.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-red-600",children:t("common.error")}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:p}),o.jsx(Y,{onClick:x,className:"mt-4",children:"Retry"})]})});const y=e.length,_=e.filter(M=>M.progress===100).length,b=e.filter(M=>M.progress>0&&M.progress<100).length,j=e.filter(M=>M.progress===0).length,P=n.length,S=a.length,k=l.length,C=u.length,E=e.sort((M,R)=>new Date(R.created_date||"").getTime()-new Date(M.created_date||"").getTime()).slice(0,5);return o.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[o.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold tracking-tight",children:t("dashboard.title")}),o.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:t("dashboard.subtitle")})]})}),o.jsxs("div",{className:"grid gap-4 sm:gap-6 grid-cols-2 md:grid-cols-3 lg:grid-cols-6",children:[o.jsxs(pe,{children:[o.jsxs($e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Je,{className:"text-xs sm:text-sm font-medium",children:t("dashboard.totalProjects")}),o.jsx(tL,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),o.jsxs(_e,{children:[o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:y}),o.jsxs("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:[_," ",t("dashboard.completed")]})]})]}),o.jsxs(pe,{children:[o.jsxs($e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Je,{className:"text-xs sm:text-sm font-medium",children:t("dashboard.inProgress")}),o.jsx(Dn,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),o.jsxs(_e,{children:[o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:b}),o.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:t("dashboard.activeProjects")})]})]}),o.jsxs(pe,{children:[o.jsxs($e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Je,{className:"text-xs sm:text-sm font-medium",children:t("dashboard.clients")}),o.jsx(Qd,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),o.jsxs(_e,{children:[o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:P}),o.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:t("dashboard.totalClients")})]})]}),o.jsxs(pe,{children:[o.jsxs($e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Je,{className:"text-xs sm:text-sm font-medium",children:t("dashboard.teamMembers")}),o.jsx(Dn,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),o.jsxs(_e,{children:[o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:S}),o.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:t("dashboard.activeUsers")})]})]}),o.jsxs(pe,{children:[o.jsxs($e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Je,{className:"text-xs sm:text-sm font-medium",children:t("dashboard.leads")}),o.jsx(fd,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),o.jsxs(_e,{children:[o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:k}),o.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:t("dashboard.totalLeads")})]})]}),o.jsxs(pe,{children:[o.jsxs($e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Je,{className:"text-xs sm:text-sm font-medium",children:t("dashboard.surveys")}),o.jsx(Qo,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),o.jsxs(_e,{children:[o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:C}),o.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:t("dashboard.totalSurveys")})]})]})]}),o.jsxs("div",{className:"grid gap-4 sm:gap-6 grid-cols-1 md:grid-cols-2",children:[o.jsxs(pe,{children:[o.jsx($e,{children:o.jsx(Je,{className:"text-base sm:text-lg",children:t("dashboard.recentProjects")})}),o.jsx(_e,{className:"space-y-3 sm:space-y-4",children:E.length>0?E.map(M=>{const R=n.find(X=>X.auth_user_id===M.created_by);return o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[o.jsxs("div",{className:"space-y-1 min-w-0 flex-1",children:[o.jsx("p",{className:"text-xs sm:text-sm font-medium leading-none truncate",children:q(M,"project_name")}),o.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:R?q(R,"user_name"):"No client"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Zs,{value:M.progress,className:"w-16 sm:w-20 h-2"}),o.jsxs("span",{className:"text-xs sm:text-sm text-muted-foreground w-8",children:[M.progress,"%"]})]})]},M.project_id)}):o.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:t("dashboard.noProjectsYet")})})]}),o.jsxs(pe,{children:[o.jsx($e,{children:o.jsx(Je,{className:"text-base sm:text-lg",children:t("dashboard.projectStatus")})}),o.jsxs(_e,{className:"space-y-3 sm:space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 rounded-full bg-green-500"}),o.jsx("span",{className:"text-xs sm:text-sm",children:t("dashboard.completedStatus")})]}),o.jsx("span",{className:"text-xs sm:text-sm font-medium",children:_})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 rounded-full bg-blue-500"}),o.jsx("span",{className:"text-xs sm:text-sm",children:t("dashboard.inProgressStatus")})]}),o.jsx("span",{className:"text-xs sm:text-sm font-medium",children:b})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 rounded-full bg-gray-500"}),o.jsx("span",{className:"text-xs sm:text-sm",children:t("dashboard.notStartedStatus")})]}),o.jsx("span",{className:"text-xs sm:text-sm font-medium",children:j})]})]})]})]})]})}const mh={users:["users"],projects:["projects"],tasks:["tasks"],stages:["stages"],globalStages:["stages","global"],clients:["clients"],teams:["teams"],teamMembers:["teams","members"],tickets:["tickets"],projectUsers:t=>["projects",t,"users"],comments:t=>["tasks",t,"comments"],rooms:t=>["rooms",t],messages:t=>["messages",t],userProjects:t=>["users",t,"projects"]},pU=()=>Vd({queryKey:mh.users,queryFn:$r.getAll}),gU=t=>Vd({queryKey:mh.userProjects(t),queryFn:()=>wn.getByUserAuthId(t),enabled:!!t}),vU=()=>Vd({queryKey:mh.tasks,queryFn:Ds.getAll}),yU=()=>Vd({queryKey:mh.globalStages,queryFn:kn.getGlobalStages}),xU=uc("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Fe({className:t,variant:e,...r}){return o.jsx("div",{className:J(xU({variant:e}),t),...r})}function wU(){var S;const{t}=gt(),[e,r]=f.useState([]),[n,s]=f.useState([]),[a,i]=f.useState([]),[l,c]=f.useState([]),[u,d]=f.useState(!0),[h,m]=f.useState(null),{user:p,loading:v}=St(),{data:g=[],isLoading:w}=gU((p==null?void 0:p.id)||"");f.useEffect(()=>{p&&!v&&x()},[p,v]);const x=async()=>{try{d(!0),m(null);const C=(await Ds.getAll()).filter(X=>{var O;return X.assigned_to===((O=p==null?void 0:p.profile)==null?void 0:O.user_id)}),E=await $r.getAll(),M=await Na.getAll(),R=await bd.getAll().catch(X=>(console.error("[EmployeeDashboard] Error fetching surveys:",X),[]));r(C),s(E),i(M),c(R)}catch(k){console.error("Failed to load employee data:",k),m(k.message||"Failed to load data")}finally{d(!1)}};if(u||v||!p)return o.jsx("div",{className:"flex items-center justify-center flex-1",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:t("common.loading")})]})});if(h)return o.jsx("div",{className:"flex items-center justify-center flex-1",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-red-600",children:t("common.error")}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:h}),o.jsx(Y,{onClick:x,className:"mt-4",children:t("dashboard.retry")})]})});const y=e.filter(k=>k.task_status==="completed").length,_=e.filter(k=>k.task_status==="in_progress").length;e.filter(k=>k.task_status==="pending").length;const b=g.filter(k=>k.progress!==void 0&&k.progress<100).length,j=l.length,P=e.sort((k,C)=>new Date(C.created_at||"").getTime()-new Date(k.created_at||"").getTime()).slice(0,5);return o.jsxs("div",{className:"space-y-8",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold tracking-tight",children:t("employeeDashboard.title")}),o.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:t("employeeDashboard.subtitle",{name:q(p.profile||{},"user_name")||p.email})})]})}),o.jsxs(pe,{children:[o.jsx($e,{children:o.jsxs(Je,{className:"flex items-center gap-2",children:[o.jsx(Ys,{className:"h-5 w-5"}),t("employeeDashboard.employeeInfo")]})}),o.jsx(_e,{children:o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:t("employeeDashboard.name")}),o.jsx("p",{className:"font-medium",children:q(p.profile||{},"user_name")||"N/A"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:t("employeeDashboard.email")}),o.jsx("p",{className:"font-medium",children:p.email})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:t("employeeDashboard.role")}),o.jsx(Fe,{variant:"secondary",className:"capitalize",children:p.role})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:t("employeeDashboard.memberSince")}),o.jsx("p",{className:"font-medium",children:(S=p.profile)!=null&&S.created_at?new Date(p.profile.created_at).toLocaleDateString():"N/A"})]})]})})]}),o.jsxs("div",{className:"grid gap-4 sm:gap-6 grid-cols-2 md:grid-cols-3 lg:grid-cols-6",children:[o.jsxs(pe,{children:[o.jsxs($e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Je,{className:"text-sm font-medium",children:t("employeeDashboard.myProjects")}),o.jsx(Ug,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(_e,{children:[o.jsx("div",{className:"text-2xl font-bold",children:g.length}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:[b," ",t("employeeDashboard.active")]})]})]}),o.jsxs(pe,{children:[o.jsxs($e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Je,{className:"text-sm font-medium",children:t("employeeDashboard.myTasks")}),o.jsx(fd,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(_e,{children:[o.jsx("div",{className:"text-2xl font-bold",children:e.length}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:[y," ",t("employeeDashboard.completed")]})]})]}),o.jsxs(pe,{children:[o.jsxs($e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Je,{className:"text-sm font-medium",children:t("employeeDashboard.inProgress")}),o.jsx(Uo,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(_e,{children:[o.jsx("div",{className:"text-2xl font-bold",children:_}),o.jsx("p",{className:"text-xs text-muted-foreground",children:t("employeeDashboard.activeTasks")})]})]}),o.jsxs(pe,{children:[o.jsxs($e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Je,{className:"text-sm font-medium",children:t("employeeDashboard.completedTasks")}),o.jsx(dd,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(_e,{children:[o.jsx("div",{className:"text-2xl font-bold",children:y}),o.jsx("p",{className:"text-xs text-muted-foreground",children:t("employeeDashboard.finishedTasks")})]})]}),o.jsxs(pe,{children:[o.jsxs($e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Je,{className:"text-sm font-medium",children:t("employeeDashboard.leads")}),o.jsx(fd,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(_e,{children:[o.jsx("div",{className:"text-2xl font-bold",children:a.length}),o.jsx("p",{className:"text-xs text-muted-foreground",children:t("employeeDashboard.totalLeads")})]})]}),o.jsxs(pe,{children:[o.jsxs($e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Je,{className:"text-sm font-medium",children:t("employeeDashboard.surveys")}),o.jsx(Qo,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(_e,{children:[o.jsx("div",{className:"text-2xl font-bold",children:j}),o.jsx("p",{className:"text-xs text-muted-foreground",children:t("employeeDashboard.totalSurveys")})]})]})]}),o.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[o.jsxs(pe,{children:[o.jsx($e,{children:o.jsx(Je,{children:t("employeeDashboard.myProjects")})}),o.jsx(_e,{className:"space-y-4",children:g.length>0?g.slice(0,5).map(k=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-medium leading-none",children:k.project_name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:k.project_description||t("employeeDashboard.noDescription")})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Zs,{value:k.progress||0,className:"w-16 h-2"}),o.jsxs("span",{className:"text-sm text-muted-foreground w-8",children:[k.progress||0,"%"]})]})]},k.project_id)):o.jsx("p",{className:"text-sm text-muted-foreground",children:t("employeeDashboard.noProjectsAssigned")})})]}),o.jsxs(pe,{children:[o.jsx($e,{children:o.jsx(Je,{children:t("employeeDashboard.recentTasks")})}),o.jsx(_e,{className:"space-y-4",children:P.length>0?P.map(k=>{var C;return o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-medium leading-none",children:k.task_name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:k.description||t("employeeDashboard.noDescription")})]}),o.jsx(Fe,{variant:k.task_status==="completed"?"default":k.task_status==="in_progress"?"secondary":"outline",className:"text-xs",children:(C=k.task_status)==null?void 0:C.replace("_"," ")})]},k.task_id)}):o.jsx("p",{className:"text-sm text-muted-foreground",children:t("employeeDashboard.noTasksAssigned")})})]})]})]})}const ph=f.forwardRef(({className:t,...e},r)=>o.jsx("div",{className:"relative w-full overflow-auto",children:o.jsx("table",{ref:r,className:J("w-full caption-bottom text-sm",t),...e})}));ph.displayName="Table";const gh=f.forwardRef(({className:t,...e},r)=>o.jsx("thead",{ref:r,className:J("[&_tr]:border-b",t),...e}));gh.displayName="TableHeader";const vh=f.forwardRef(({className:t,...e},r)=>o.jsx("tbody",{ref:r,className:J("[&_tr:last-child]:border-0",t),...e}));vh.displayName="TableBody";const _U=f.forwardRef(({className:t,...e},r)=>o.jsx("tfoot",{ref:r,className:J("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));_U.displayName="TableFooter";const Rn=f.forwardRef(({className:t,...e},r)=>o.jsx("tr",{ref:r,className:J("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",t),...e}));Rn.displayName="TableRow";const _t=f.forwardRef(({className:t,...e},r)=>o.jsx("th",{ref:r,className:J("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));_t.displayName="TableHead";const ut=f.forwardRef(({className:t,...e},r)=>o.jsx("td",{ref:r,className:J("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));ut.displayName="TableCell";const bU=f.forwardRef(({className:t,...e},r)=>o.jsx("caption",{ref:r,className:J("mt-4 text-sm text-muted-foreground",t),...e}));bU.displayName="TableCaption";var yh="Popover",[Ek,yz]=yr(yh,[Ui]),Nc=Ui(),[jU,la]=Ek(yh),Pk=t=>{const{__scopePopover:e,children:r,open:n,defaultOpen:s,onOpenChange:a,modal:i=!1}=t,l=Nc(e),c=f.useRef(null),[u,d]=f.useState(!1),[h,m]=Xs({prop:n,defaultProp:s??!1,onChange:a,caller:yh});return o.jsx(av,{...l,children:o.jsx(jU,{scope:e,contentId:on(),triggerRef:c,open:h,onOpenChange:m,onOpenToggle:f.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:u,onCustomAnchorAdd:f.useCallback(()=>d(!0),[]),onCustomAnchorRemove:f.useCallback(()=>d(!1),[]),modal:i,children:r})})};Pk.displayName=yh;var Tk="PopoverAnchor",SU=f.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=la(Tk,r),a=Nc(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=s;return f.useEffect(()=>(i(),()=>l()),[i,l]),o.jsx(th,{...a,...n,ref:e})});SU.displayName=Tk;var Rk="PopoverTrigger",Ok=f.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=la(Rk,r),a=Nc(r),i=Ae(e,s.triggerRef),l=o.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Lk(s.open),...n,ref:i,onClick:oe(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:o.jsx(th,{asChild:!0,...a,children:l})});Ok.displayName=Rk;var Cv="PopoverPortal",[NU,kU]=Ek(Cv,{forceMount:void 0}),Dk=t=>{const{__scopePopover:e,forceMount:r,children:n,container:s}=t,a=la(Cv,e);return o.jsx(NU,{scope:e,forceMount:r,children:o.jsx(ar,{present:r||a.open,children:o.jsx(gc,{asChild:!0,container:s,children:n})})})};Dk.displayName=Cv;var ki="PopoverContent",Ak=f.forwardRef((t,e)=>{const r=kU(ki,t.__scopePopover),{forceMount:n=r.forceMount,...s}=t,a=la(ki,t.__scopePopover);return o.jsx(ar,{present:n||a.open,children:a.modal?o.jsx(EU,{...s,ref:e}):o.jsx(PU,{...s,ref:e})})});Ak.displayName=ki;var CU=Gs("PopoverContent.RemoveScroll"),EU=f.forwardRef((t,e)=>{const r=la(ki,t.__scopePopover),n=f.useRef(null),s=Ae(e,n),a=f.useRef(!1);return f.useEffect(()=>{const i=n.current;if(i)return rh(i)},[]),o.jsx(vc,{as:CU,allowPinchZoom:!0,children:o.jsx(Mk,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:oe(t.onCloseAutoFocus,i=>{var l;i.preventDefault(),a.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:oe(t.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:oe(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),PU=f.forwardRef((t,e)=>{const r=la(ki,t.__scopePopover),n=f.useRef(!1),s=f.useRef(!1);return o.jsx(Mk,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,l;(i=t.onCloseAutoFocus)==null||i.call(t,a),a.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=a.target;((u=r.triggerRef.current)==null?void 0:u.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),Mk=f.forwardRef((t,e)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...h}=t,m=la(ki,r),p=Nc(r);return Jd(),o.jsx(mc,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:a,children:o.jsx(fc,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:o.jsx(ov,{"data-state":Lk(m.open),role:"dialog",id:m.contentId,...p,...h,ref:e,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Ik="PopoverClose",TU=f.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=la(Ik,r);return o.jsx(xe.button,{type:"button",...n,ref:e,onClick:oe(t.onClick,()=>s.onOpenChange(!1))})});TU.displayName=Ik;var RU="PopoverArrow",OU=f.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Nc(r);return o.jsx(iv,{...s,...n,ref:e})});OU.displayName=RU;function Lk(t){return t?"open":"closed"}var DU=Pk,AU=Ok,MU=Dk,Fk=Ak;const IU=DU,LU=AU,$k=f.forwardRef(({className:t,align:e="center",sideOffset:r=4,...n},s)=>o.jsx(MU,{children:o.jsx(Fk,{ref:s,align:e,sideOffset:r,className:J("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));$k.displayName=Fk.displayName;function He(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Er(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Zt(t,e){const r=He(t);return isNaN(e)?Er(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function dn(t,e){const r=He(t);if(isNaN(e))return Er(t,NaN);if(!e)return r;const n=r.getDate(),s=Er(t,r.getTime());s.setMonth(r.getMonth()+e+1,0);const a=s.getDate();return n>=a?s:(r.setFullYear(s.getFullYear(),s.getMonth(),n),r)}const Ev=6048e5,FU=864e5;let $U={};function kc(){return $U}function Mn(t,e){var l,c,u,d;const r=kc(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=He(t),a=s.getDay(),i=(a<n?7:0)+a-n;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function ro(t){return Mn(t,{weekStartsOn:1})}function Uk(t){const e=He(t),r=e.getFullYear(),n=Er(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=ro(n),a=Er(t,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const i=ro(a);return e.getTime()>=s.getTime()?r+1:e.getTime()>=i.getTime()?r:r-1}function Ci(t){const e=He(t);return e.setHours(0,0,0,0),e}function Sd(t){const e=He(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function Cn(t,e){const r=Ci(t),n=Ci(e),s=+r-Sd(r),a=+n-Sd(n);return Math.round((s-a)/FU)}function UU(t){const e=Uk(t),r=Er(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),ro(r)}function _p(t,e){const r=e*7;return Zt(t,r)}function BU(t,e){return dn(t,e*12)}function zU(t){let e;return t.forEach(function(r){const n=He(r);(e===void 0||e<n||isNaN(Number(n)))&&(e=n)}),e||new Date(NaN)}function WU(t){let e;return t.forEach(r=>{const n=He(r);(!e||e>n||isNaN(+n))&&(e=n)}),e||new Date(NaN)}function fr(t,e){const r=Ci(t),n=Ci(e);return+r==+n}function Pv(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function VU(t){if(!Pv(t)&&typeof t!="number")return!1;const e=He(t);return!isNaN(Number(e))}function Xl(t,e){const r=He(t),n=He(e),s=r.getFullYear()-n.getFullYear(),a=r.getMonth()-n.getMonth();return s*12+a}function HU(t,e,r){const n=Mn(t,r),s=Mn(e,r),a=+n-Sd(n),i=+s-Sd(s);return Math.round((a-i)/Ev)}function Tv(t){const e=He(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function vr(t){const e=He(t);return e.setDate(1),e.setHours(0,0,0,0),e}function Bk(t){const e=He(t),r=Er(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Rv(t,e){var l,c,u,d;const r=kc(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=He(t),a=s.getDay(),i=(a<n?-7:0)+6-(a-n);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s}function zk(t){return Rv(t,{weekStartsOn:1})}const qU={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},KU=(t,e,r)=>{let n;const s=qU[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Zo(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const GU={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},YU={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},QU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},JU={date:Zo({formats:GU,defaultWidth:"full"}),time:Zo({formats:YU,defaultWidth:"full"}),dateTime:Zo({formats:QU,defaultWidth:"full"})},XU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ZU=(t,e,r,n)=>XU[t];function bn(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):i;s=t.formattingValues[l]||t.formattingValues[i]}else{const i=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[l]||t.values[i]}const a=t.argumentCallback?t.argumentCallback(e):e;return s[a]}}const e5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},t5={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},r5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},n5={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},s5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},a5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},o5=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},i5={ordinalNumber:o5,era:bn({values:e5,defaultWidth:"wide"}),quarter:bn({values:t5,defaultWidth:"wide",argumentCallback:t=>t-1}),month:bn({values:r5,defaultWidth:"wide"}),day:bn({values:n5,defaultWidth:"wide"}),dayPeriod:bn({values:s5,defaultWidth:"wide",formattingValues:a5,defaultFormattingWidth:"wide"})};function jn(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;const i=a[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?c5(l,h=>h.test(i)):l5(l,h=>h.test(i));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(i.length);return{value:u,rest:d}}}function l5(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function c5(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function Wk(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],a=e.match(t.parsePattern);if(!a)return null;let i=t.valueCallback?t.valueCallback(a[0]):a[0];i=r.valueCallback?r.valueCallback(i):i;const l=e.slice(s.length);return{value:i,rest:l}}}const u5=/^(\d+)(th|st|nd|rd)?/i,d5=/\d+/i,h5={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},f5={any:[/^b/i,/^(a|c)/i]},m5={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},p5={any:[/1/i,/2/i,/3/i,/4/i]},g5={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},v5={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},y5={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},x5={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},w5={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},_5={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},b5={ordinalNumber:Wk({matchPattern:u5,parsePattern:d5,valueCallback:t=>parseInt(t,10)}),era:jn({matchPatterns:h5,defaultMatchWidth:"wide",parsePatterns:f5,defaultParseWidth:"any"}),quarter:jn({matchPatterns:m5,defaultMatchWidth:"wide",parsePatterns:p5,defaultParseWidth:"any",valueCallback:t=>t+1}),month:jn({matchPatterns:g5,defaultMatchWidth:"wide",parsePatterns:v5,defaultParseWidth:"any"}),day:jn({matchPatterns:y5,defaultMatchWidth:"wide",parsePatterns:x5,defaultParseWidth:"any"}),dayPeriod:jn({matchPatterns:w5,defaultMatchWidth:"any",parsePatterns:_5,defaultParseWidth:"any"})},Vk={code:"en-US",formatDistance:KU,formatLong:JU,formatRelative:ZU,localize:i5,match:b5,options:{weekStartsOn:0,firstWeekContainsDate:1}};function j5(t){const e=He(t);return Cn(e,Bk(e))+1}function Hk(t){const e=He(t),r=+ro(e)-+UU(e);return Math.round(r/Ev)+1}function qk(t,e){var d,h,m,p;const r=He(t),n=r.getFullYear(),s=kc(),a=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(m=s.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,i=Er(t,0);i.setFullYear(n+1,0,a),i.setHours(0,0,0,0);const l=Mn(i,e),c=Er(t,0);c.setFullYear(n,0,a),c.setHours(0,0,0,0);const u=Mn(c,e);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function S5(t,e){var l,c,u,d;const r=kc(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=qk(t,e),a=Er(t,0);return a.setFullYear(s,0,n),a.setHours(0,0,0,0),Mn(a,e)}function Kk(t,e){const r=He(t),n=+Mn(r,e)-+S5(r,e);return Math.round(n/Ev)+1}function Ge(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const hs={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Ge(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Ge(r+1,2)},d(t,e){return Ge(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Ge(t.getHours()%12||12,e.length)},H(t,e){return Ge(t.getHours(),e.length)},m(t,e){return Ge(t.getMinutes(),e.length)},s(t,e){return Ge(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return Ge(s,e.length)}},No={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Xw={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return hs.y(t,e)},Y:function(t,e,r,n){const s=qk(t,n),a=s>0?s:1-s;if(e==="YY"){const i=a%100;return Ge(i,2)}return e==="Yo"?r.ordinalNumber(a,{unit:"year"}):Ge(a,e.length)},R:function(t,e){const r=Uk(t);return Ge(r,e.length)},u:function(t,e){const r=t.getFullYear();return Ge(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Ge(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Ge(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return hs.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Ge(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const s=Kk(t,n);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):Ge(s,e.length)},I:function(t,e,r){const n=Hk(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Ge(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):hs.d(t,e)},D:function(t,e,r){const n=j5(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Ge(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const s=t.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Ge(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const s=t.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Ge(a,e.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return Ge(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let s;switch(n===12?s=No.noon:n===0?s=No.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let s;switch(n>=17?s=No.evening:n>=12?s=No.afternoon:n>=4?s=No.morning:s=No.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return hs.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):hs.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Ge(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Ge(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):hs.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):hs.s(t,e)},S:function(t,e){return hs.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return e0(n);case"XXXX":case"XX":return ba(n);case"XXXXX":case"XXX":default:return ba(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return e0(n);case"xxxx":case"xx":return ba(n);case"xxxxx":case"xxx":default:return ba(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Zw(n,":");case"OOOO":default:return"GMT"+ba(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Zw(n,":");case"zzzz":default:return"GMT"+ba(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return Ge(n,e.length)},T:function(t,e,r){const n=t.getTime();return Ge(n,e.length)}};function Zw(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),a=n%60;return a===0?r+String(s):r+String(s)+e+Ge(a,2)}function e0(t,e){return t%60===0?(t>0?"-":"+")+Ge(Math.abs(t)/60,2):ba(t,e)}function ba(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Ge(Math.trunc(n/60),2),a=Ge(n%60,2);return r+s+e+a}const t0=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Gk=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},N5=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return t0(t,e);let a;switch(n){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",t0(n,e)).replace("{{time}}",Gk(s,e))},k5={p:Gk,P:N5},C5=/^D+$/,E5=/^Y+$/,P5=["D","DD","YY","YYYY"];function T5(t){return C5.test(t)}function R5(t){return E5.test(t)}function O5(t,e,r){const n=D5(t,e,r);if(console.warn(n),P5.includes(t))throw new RangeError(n)}function D5(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const A5=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,M5=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,I5=/^'([^]*?)'?$/,L5=/''/g,F5=/[a-zA-Z]/;function On(t,e,r){var d,h,m,p,v,g,w,x;const n=kc(),s=(r==null?void 0:r.locale)??n.locale??Vk,a=(r==null?void 0:r.firstWeekContainsDate)??((h=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(m=n.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,i=(r==null?void 0:r.weekStartsOn)??((g=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:g.weekStartsOn)??n.weekStartsOn??((x=(w=n.locale)==null?void 0:w.options)==null?void 0:x.weekStartsOn)??0,l=He(t);if(!VU(l))throw new RangeError("Invalid time value");let c=e.match(M5).map(y=>{const _=y[0];if(_==="p"||_==="P"){const b=k5[_];return b(y,s.formatLong)}return y}).join("").match(A5).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const _=y[0];if(_==="'")return{isToken:!1,value:$5(y)};if(Xw[_])return{isToken:!0,value:y};if(_.match(F5))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:y}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:a,weekStartsOn:i,locale:s};return c.map(y=>{if(!y.isToken)return y.value;const _=y.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&R5(_)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&T5(_))&&O5(_,e,String(t));const b=Xw[_[0]];return b(l,_,s.localize,u)}).join("")}function $5(t){const e=t.match(I5);return e?e[1].replace(L5,"'"):t}function U5(t){const e=He(t),r=e.getFullYear(),n=e.getMonth(),s=Er(t,0);return s.setFullYear(r,n+1,0),s.setHours(0,0,0,0),s.getDate()}function B5(t){return Math.trunc(+He(t)/1e3)}function z5(t){const e=He(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(0,0,0,0),e}function W5(t,e){return HU(z5(t),vr(t),e)+1}function bp(t,e){const r=He(t),n=He(e);return r.getTime()>n.getTime()}function Yk(t,e){const r=He(t),n=He(e);return+r<+n}function Ov(t,e){const r=He(t),n=He(e);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function V5(t,e){const r=He(t),n=He(e);return r.getFullYear()===n.getFullYear()}function kf(t,e){return Zt(t,-e)}function Cf(t,e){const r=He(t),n=r.getFullYear(),s=r.getDate(),a=Er(t,0);a.setFullYear(n,e,15),a.setHours(0,0,0,0);const i=U5(a);return r.setMonth(e,Math.min(s,i)),r}function r0(t,e){const r=He(t);return isNaN(+r)?Er(t,NaN):(r.setFullYear(e),r)}const H5={lessThanXSeconds:{one:"  ",two:"  ",threeToTen:"  {{count}} ",other:"  {{count}} "},xSeconds:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},halfAMinute:" ",lessThanXMinutes:{one:"  ",two:"  ",threeToTen:"  {{count}} ",other:"  {{count}} "},xMinutes:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},aboutXHours:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "},xHours:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},xDays:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},aboutXWeeks:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "},xWeeks:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},aboutXMonths:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "},xMonths:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},aboutXYears:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "},xYears:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},overXYears:{one:"  ",two:"  ",threeToTen:"  {{count}} ",other:"  {{count}} "},almostXYears:{one:"   ",two:"  ",threeToTen:"  {{count}} ",other:"  {{count}} "}},q5=(t,e,r)=>{const n=H5[t];let s;return typeof n=="string"?s=n:e===1?s=n.one:e===2?s=n.two:e<=10?s=n.threeToTen.replace("{{count}}",String(e)):s=n.other.replace("{{count}}",String(e)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?" "+s:" "+s:s},K5={full:"EEEE do MMMM y",long:"do MMMM y",medium:"d MMM y",short:"dd/MM/yyyy"},G5={full:"HH:mm:ss",long:"HH:mm:ss",medium:"HH:mm:ss",short:"HH:mm"},Y5={full:"{{date}} ' ' {{time}}",long:"{{date}} ' ' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Q5={date:Zo({formats:K5,defaultWidth:"full"}),time:Zo({formats:G5,defaultWidth:"full"}),dateTime:Zo({formats:Y5,defaultWidth:"full"})},J5={lastWeek:"eeee '  ' p",yesterday:"'  ' p",today:"'  ' p",tomorrow:"'  ' p",nextWeek:"eeee '  ' p",other:"P"},X5=t=>J5[t],Z5={narrow:["",""],abbreviated:["..",".."],wide:[" "," "]},e6={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:[" "," "," "," "]},t6={narrow:["","","","","","","","","","","",""],abbreviated:["","","","","","","","","","","",""],wide:["","","","","","","","","","","",""]},r6={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},n6={narrow:{am:"",pm:"",morning:"",noon:"",afternoon:" ",evening:"",night:"",midnight:" "},abbreviated:{am:"",pm:"",morning:"",noon:"",afternoon:" ",evening:"",night:"",midnight:" "},wide:{am:"",pm:"",morning:"",noon:"",afternoon:" ",evening:"",night:"",midnight:" "}},s6={narrow:{am:"",pm:"",morning:" ",noon:"",afternoon:" ",evening:" ",night:" ",midnight:" "},abbreviated:{am:"",pm:"",morning:" ",noon:"",afternoon:" ",evening:" ",night:" ",midnight:" "},wide:{am:"",pm:"",morning:" ",noon:"",afternoon:" ",evening:" ",night:" ",midnight:" "}},a6=t=>String(t),o6={ordinalNumber:a6,era:bn({values:Z5,defaultWidth:"wide"}),quarter:bn({values:e6,defaultWidth:"wide",argumentCallback:t=>t-1}),month:bn({values:t6,defaultWidth:"wide"}),day:bn({values:r6,defaultWidth:"wide"}),dayPeriod:bn({values:n6,defaultWidth:"wide",formattingValues:s6,defaultFormattingWidth:"wide"})},i6=/^(\d+)(th|st|nd|rd)?/i,l6=/\d+/i,c6={narrow:/[]/,abbreviated:/[]\.\./,wide:/(|) /},u6={any:[//,//]},d6={narrow:/^[1234]/i,abbreviated:/[1234]/,wide:/ (|||)/},h6={any:[/1/i,/2/i,/3/i,/4/i]},f6={narrow:/^[]/,abbreviated:/^(|||||||||||)/,wide:/^(|||||||||||)/},m6={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],any:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i]},p6={narrow:/^[]/i,short:/^(||||||)/i,abbreviated:/^(||||||)/i,wide:/^(||||||)/i},g6={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],wide:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],any:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i]},v6={narrow:/^(|| || | | | )/,any:/^(|| || | | | )/},y6={any:{am:/^/,pm:/^/,midnight:/ /,noon://,afternoon:/ /,morning:/ /,evening:/ /,night:/ /}},x6={ordinalNumber:Wk({matchPattern:i6,parsePattern:l6,valueCallback:t=>parseInt(t,10)}),era:jn({matchPatterns:c6,defaultMatchWidth:"wide",parsePatterns:u6,defaultParseWidth:"any"}),quarter:jn({matchPatterns:d6,defaultMatchWidth:"wide",parsePatterns:h6,defaultParseWidth:"any",valueCallback:t=>t+1}),month:jn({matchPatterns:f6,defaultMatchWidth:"wide",parsePatterns:m6,defaultParseWidth:"any"}),day:jn({matchPatterns:p6,defaultMatchWidth:"wide",parsePatterns:g6,defaultParseWidth:"any"}),dayPeriod:jn({matchPatterns:v6,defaultMatchWidth:"any",parsePatterns:y6,defaultParseWidth:"any"})},w6={code:"ar",formatDistance:q5,formatLong:Q5,formatRelative:X5,localize:o6,match:x6,options:{weekStartsOn:6,firstWeekContainsDate:1}};var Ne=function(){return Ne=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ne.apply(this,arguments)};function _6(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function Qk(t,e,r){for(var n=0,s=e.length,a;n<s;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function Cc(t){return t.mode==="multiple"}function Ec(t){return t.mode==="range"}function xh(t){return t.mode==="single"}var b6={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function j6(t,e){return On(t,"LLLL y",e)}function S6(t,e){return On(t,"d",e)}function N6(t,e){return On(t,"LLLL",e)}function k6(t){return"".concat(t)}function C6(t,e){return On(t,"cccccc",e)}function E6(t,e){return On(t,"yyyy",e)}var P6=Object.freeze({__proto__:null,formatCaption:j6,formatDay:S6,formatMonthCaption:N6,formatWeekNumber:k6,formatWeekdayName:C6,formatYearCaption:E6}),T6=function(t,e,r){return On(t,"do MMMM (EEEE)",r)},R6=function(){return"Month: "},O6=function(){return"Go to next month"},D6=function(){return"Go to previous month"},A6=function(t,e){return On(t,"cccc",e)},M6=function(t){return"Week n. ".concat(t)},I6=function(){return"Year: "},L6=Object.freeze({__proto__:null,labelDay:T6,labelMonthDropdown:R6,labelNext:O6,labelPrevious:D6,labelWeekNumber:M6,labelWeekday:A6,labelYearDropdown:I6});function F6(){var t="buttons",e=b6,r=Vk,n={},s={},a=1,i={},l=new Date;return{captionLayout:t,classNames:e,formatters:P6,labels:L6,locale:r,modifiersClassNames:n,modifiers:s,numberOfMonths:a,styles:i,today:l,mode:"default"}}function $6(t){var e=t.fromYear,r=t.toYear,n=t.fromMonth,s=t.toMonth,a=t.fromDate,i=t.toDate;return n?a=vr(n):e&&(a=new Date(e,0,1)),s?i=Tv(s):r&&(i=new Date(r,11,31)),{fromDate:a?Ci(a):void 0,toDate:i?Ci(i):void 0}}var Jk=f.createContext(void 0);function U6(t){var e,r=t.initialProps,n=F6(),s=$6(r),a=s.fromDate,i=s.toDate,l=(e=r.captionLayout)!==null&&e!==void 0?e:n.captionLayout;l!=="buttons"&&(!a||!i)&&(l="buttons");var c;(xh(r)||Cc(r)||Ec(r))&&(c=r.onSelect);var u=Ne(Ne(Ne({},n),r),{captionLayout:l,classNames:Ne(Ne({},n.classNames),r.classNames),components:Ne({},r.components),formatters:Ne(Ne({},n.formatters),r.formatters),fromDate:a,labels:Ne(Ne({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:Ne(Ne({},n.modifiers),r.modifiers),modifiersClassNames:Ne(Ne({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:Ne(Ne({},n.styles),r.styles),toDate:i});return o.jsx(Jk.Provider,{value:u,children:t.children})}function tt(){var t=f.useContext(Jk);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function Xk(t){var e=tt(),r=e.locale,n=e.classNames,s=e.styles,a=e.formatters.formatCaption;return o.jsx("div",{className:n.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:a(t.displayMonth,{locale:r})})}function B6(t){return o.jsx("svg",Ne({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:o.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Zk(t){var e,r,n=t.onChange,s=t.value,a=t.children,i=t.caption,l=t.className,c=t.style,u=tt(),d=(r=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&r!==void 0?r:B6;return o.jsxs("div",{className:l,style:c,children:[o.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),o.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:s,onChange:n,children:a}),o.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[i,o.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function z6(t){var e,r=tt(),n=r.fromDate,s=r.toDate,a=r.styles,i=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!n)return o.jsx(o.Fragment,{});if(!s)return o.jsx(o.Fragment,{});var h=[];if(V5(n,s))for(var m=vr(n),p=n.getMonth();p<=s.getMonth();p++)h.push(Cf(m,p));else for(var m=vr(new Date),p=0;p<=11;p++)h.push(Cf(m,p));var v=function(w){var x=Number(w.target.value),y=Cf(vr(t.displayMonth),x);t.onChange(y)},g=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:Zk;return o.jsx(g,{name:"months","aria-label":d(),className:c.dropdown_month,style:a.dropdown_month,onChange:v,value:t.displayMonth.getMonth(),caption:l(t.displayMonth,{locale:i}),children:h.map(function(w){return o.jsx("option",{value:w.getMonth(),children:l(w,{locale:i})},w.getMonth())})})}function W6(t){var e,r=t.displayMonth,n=tt(),s=n.fromDate,a=n.toDate,i=n.locale,l=n.styles,c=n.classNames,u=n.components,d=n.formatters.formatYearCaption,h=n.labels.labelYearDropdown,m=[];if(!s)return o.jsx(o.Fragment,{});if(!a)return o.jsx(o.Fragment,{});for(var p=s.getFullYear(),v=a.getFullYear(),g=p;g<=v;g++)m.push(r0(Bk(new Date),g));var w=function(y){var _=r0(vr(r),Number(y.target.value));t.onChange(_)},x=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:Zk;return o.jsx(x,{name:"years","aria-label":h(),className:c.dropdown_year,style:l.dropdown_year,onChange:w,value:r.getFullYear(),caption:d(r,{locale:i}),children:m.map(function(y){return o.jsx("option",{value:y.getFullYear(),children:d(y,{locale:i})},y.getFullYear())})})}function V6(t,e){var r=f.useState(t),n=r[0],s=r[1],a=e===void 0?n:e;return[a,s]}function H6(t){var e=t.month,r=t.defaultMonth,n=t.today,s=e||r||n||new Date,a=t.toDate,i=t.fromDate,l=t.numberOfMonths,c=l===void 0?1:l;if(a&&Xl(a,s)<0){var u=-1*(c-1);s=dn(a,u)}return i&&Xl(s,i)<0&&(s=i),vr(s)}function q6(){var t=tt(),e=H6(t),r=V6(e,t.month),n=r[0],s=r[1],a=function(i){var l;if(!t.disableNavigation){var c=vr(i);s(c),(l=t.onMonthChange)===null||l===void 0||l.call(t,c)}};return[n,a]}function K6(t,e){for(var r=e.reverseMonths,n=e.numberOfMonths,s=vr(t),a=vr(dn(s,n)),i=Xl(a,s),l=[],c=0;c<i;c++){var u=dn(s,c);l.push(u)}return r&&(l=l.reverse()),l}function G6(t,e){if(!e.disableNavigation){var r=e.toDate,n=e.pagedNavigation,s=e.numberOfMonths,a=s===void 0?1:s,i=n?a:1,l=vr(t);if(!r)return dn(l,i);var c=Xl(r,t);if(!(c<a))return dn(l,i)}}function Y6(t,e){if(!e.disableNavigation){var r=e.fromDate,n=e.pagedNavigation,s=e.numberOfMonths,a=s===void 0?1:s,i=n?a:1,l=vr(t);if(!r)return dn(l,-i);var c=Xl(l,r);if(!(c<=0))return dn(l,-i)}}var eC=f.createContext(void 0);function Q6(t){var e=tt(),r=q6(),n=r[0],s=r[1],a=K6(n,e),i=G6(n,e),l=Y6(n,e),c=function(h){return a.some(function(m){return Ov(h,m)})},u=function(h,m){c(h)||(m&&Yk(h,m)?s(dn(h,1+e.numberOfMonths*-1)):s(h))},d={currentMonth:n,displayMonths:a,goToMonth:s,goToDate:u,previousMonth:l,nextMonth:i,isDateDisplayed:c};return o.jsx(eC.Provider,{value:d,children:t.children})}function Pc(){var t=f.useContext(eC);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function n0(t){var e,r=tt(),n=r.classNames,s=r.styles,a=r.components,i=Pc().goToMonth,l=function(d){i(dn(d,t.displayIndex?-t.displayIndex:0))},c=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:Xk,u=o.jsx(c,{id:t.id,displayMonth:t.displayMonth});return o.jsxs("div",{className:n.caption_dropdowns,style:s.caption_dropdowns,children:[o.jsx("div",{className:n.vhidden,children:u}),o.jsx(z6,{onChange:l,displayMonth:t.displayMonth}),o.jsx(W6,{onChange:l,displayMonth:t.displayMonth})]})}function J6(t){return o.jsx("svg",Ne({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:o.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function X6(t){return o.jsx("svg",Ne({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:o.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Nd=f.forwardRef(function(t,e){var r=tt(),n=r.classNames,s=r.styles,a=[n.button_reset,n.button];t.className&&a.push(t.className);var i=a.join(" "),l=Ne(Ne({},s.button_reset),s.button);return t.style&&Object.assign(l,t.style),o.jsx("button",Ne({},t,{ref:e,type:"button",className:i,style:l}))});function Z6(t){var e,r,n=tt(),s=n.dir,a=n.locale,i=n.classNames,l=n.styles,c=n.labels,u=c.labelPrevious,d=c.labelNext,h=n.components;if(!t.nextMonth&&!t.previousMonth)return o.jsx(o.Fragment,{});var m=u(t.previousMonth,{locale:a}),p=[i.nav_button,i.nav_button_previous].join(" "),v=d(t.nextMonth,{locale:a}),g=[i.nav_button,i.nav_button_next].join(" "),w=(e=h==null?void 0:h.IconRight)!==null&&e!==void 0?e:X6,x=(r=h==null?void 0:h.IconLeft)!==null&&r!==void 0?r:J6;return o.jsxs("div",{className:i.nav,style:l.nav,children:[!t.hidePrevious&&o.jsx(Nd,{name:"previous-month","aria-label":m,className:p,style:l.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:s==="rtl"?o.jsx(w,{className:i.nav_icon,style:l.nav_icon}):o.jsx(x,{className:i.nav_icon,style:l.nav_icon})}),!t.hideNext&&o.jsx(Nd,{name:"next-month","aria-label":v,className:g,style:l.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:s==="rtl"?o.jsx(x,{className:i.nav_icon,style:l.nav_icon}):o.jsx(w,{className:i.nav_icon,style:l.nav_icon})})]})}function s0(t){var e=tt().numberOfMonths,r=Pc(),n=r.previousMonth,s=r.nextMonth,a=r.goToMonth,i=r.displayMonths,l=i.findIndex(function(v){return Ov(t.displayMonth,v)}),c=l===0,u=l===i.length-1,d=e>1&&(c||!u),h=e>1&&(u||!c),m=function(){n&&a(n)},p=function(){s&&a(s)};return o.jsx(Z6,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:h,nextMonth:s,previousMonth:n,onPreviousClick:m,onNextClick:p})}function e8(t){var e,r=tt(),n=r.classNames,s=r.disableNavigation,a=r.styles,i=r.captionLayout,l=r.components,c=(e=l==null?void 0:l.CaptionLabel)!==null&&e!==void 0?e:Xk,u;return s?u=o.jsx(c,{id:t.id,displayMonth:t.displayMonth}):i==="dropdown"?u=o.jsx(n0,{displayMonth:t.displayMonth,id:t.id}):i==="dropdown-buttons"?u=o.jsxs(o.Fragment,{children:[o.jsx(n0,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),o.jsx(s0,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=o.jsxs(o.Fragment,{children:[o.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),o.jsx(s0,{displayMonth:t.displayMonth,id:t.id})]}),o.jsx("div",{className:n.caption,style:a.caption,children:u})}function t8(t){var e=tt(),r=e.footer,n=e.styles,s=e.classNames.tfoot;return r?o.jsx("tfoot",{className:s,style:n.tfoot,children:o.jsx("tr",{children:o.jsx("td",{colSpan:8,children:r})})}):o.jsx(o.Fragment,{})}function r8(t,e,r){for(var n=r?ro(new Date):Mn(new Date,{locale:t,weekStartsOn:e}),s=[],a=0;a<7;a++){var i=Zt(n,a);s.push(i)}return s}function n8(){var t=tt(),e=t.classNames,r=t.styles,n=t.showWeekNumber,s=t.locale,a=t.weekStartsOn,i=t.ISOWeek,l=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,u=r8(s,a,i);return o.jsxs("tr",{style:r.head_row,className:e.head_row,children:[n&&o.jsx("td",{style:r.head_cell,className:e.head_cell}),u.map(function(d,h){return o.jsx("th",{scope:"col",className:e.head_cell,style:r.head_cell,"aria-label":c(d,{locale:s}),children:l(d,{locale:s})},h)})]})}function s8(){var t,e=tt(),r=e.classNames,n=e.styles,s=e.components,a=(t=s==null?void 0:s.HeadRow)!==null&&t!==void 0?t:n8;return o.jsx("thead",{style:n.head,className:r.head,children:o.jsx(a,{})})}function a8(t){var e=tt(),r=e.locale,n=e.formatters.formatDay;return o.jsx(o.Fragment,{children:n(t.date,{locale:r})})}var Dv=f.createContext(void 0);function o8(t){if(!Cc(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return o.jsx(Dv.Provider,{value:e,children:t.children})}return o.jsx(i8,{initialProps:t.initialProps,children:t.children})}function i8(t){var e=t.initialProps,r=t.children,n=e.selected,s=e.min,a=e.max,i=function(u,d,h){var m,p;(m=e.onDayClick)===null||m===void 0||m.call(e,u,d,h);var v=!!(d.selected&&s&&(n==null?void 0:n.length)===s);if(!v){var g=!!(!d.selected&&a&&(n==null?void 0:n.length)===a);if(!g){var w=n?Qk([],n):[];if(d.selected){var x=w.findIndex(function(y){return fr(u,y)});w.splice(x,1)}else w.push(u);(p=e.onSelect)===null||p===void 0||p.call(e,w,u,d,h)}}},l={disabled:[]};n&&l.disabled.push(function(u){var d=a&&n.length>a-1,h=n.some(function(m){return fr(m,u)});return!!(d&&!h)});var c={selected:n,onDayClick:i,modifiers:l};return o.jsx(Dv.Provider,{value:c,children:r})}function Av(){var t=f.useContext(Dv);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function l8(t,e){var r=e||{},n=r.from,s=r.to;return n&&s?fr(s,t)&&fr(n,t)?void 0:fr(s,t)?{from:s,to:void 0}:fr(n,t)?void 0:bp(n,t)?{from:t,to:s}:{from:n,to:t}:s?bp(t,s)?{from:s,to:t}:{from:t,to:s}:n?Yk(t,n)?{from:t,to:n}:{from:n,to:t}:{from:t,to:void 0}}var Mv=f.createContext(void 0);function c8(t){if(!Ec(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return o.jsx(Mv.Provider,{value:e,children:t.children})}return o.jsx(u8,{initialProps:t.initialProps,children:t.children})}function u8(t){var e=t.initialProps,r=t.children,n=e.selected,s=n||{},a=s.from,i=s.to,l=e.min,c=e.max,u=function(p,v,g){var w,x;(w=e.onDayClick)===null||w===void 0||w.call(e,p,v,g);var y=l8(p,n);(x=e.onSelect)===null||x===void 0||x.call(e,y,p,v,g)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(d.range_start=[a],i?(d.range_end=[i],fr(a,i)||(d.range_middle=[{after:a,before:i}])):d.range_end=[a]):i&&(d.range_start=[i],d.range_end=[i]),l&&(a&&!i&&d.disabled.push({after:kf(a,l-1),before:Zt(a,l-1)}),a&&i&&d.disabled.push({after:a,before:Zt(a,l-1)}),!a&&i&&d.disabled.push({after:kf(i,l-1),before:Zt(i,l-1)})),c){if(a&&!i&&(d.disabled.push({before:Zt(a,-c+1)}),d.disabled.push({after:Zt(a,c-1)})),a&&i){var h=Cn(i,a)+1,m=c-h;d.disabled.push({before:kf(a,m)}),d.disabled.push({after:Zt(i,m)})}!a&&i&&(d.disabled.push({before:Zt(i,-c+1)}),d.disabled.push({after:Zt(i,c-1)}))}return o.jsx(Mv.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:r})}function Iv(){var t=f.useContext(Mv);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function Pu(t){return Array.isArray(t)?Qk([],t):t!==void 0?[t]:[]}function d8(t){var e={};return Object.entries(t).forEach(function(r){var n=r[0],s=r[1];e[n]=Pu(s)}),e}var hn;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(hn||(hn={}));var h8=hn.Selected,Un=hn.Disabled,f8=hn.Hidden,m8=hn.Today,Ef=hn.RangeEnd,Pf=hn.RangeMiddle,Tf=hn.RangeStart,p8=hn.Outside;function g8(t,e,r){var n,s=(n={},n[h8]=Pu(t.selected),n[Un]=Pu(t.disabled),n[f8]=Pu(t.hidden),n[m8]=[t.today],n[Ef]=[],n[Pf]=[],n[Tf]=[],n[p8]=[],n);return t.fromDate&&s[Un].push({before:t.fromDate}),t.toDate&&s[Un].push({after:t.toDate}),Cc(t)?s[Un]=s[Un].concat(e.modifiers[Un]):Ec(t)&&(s[Un]=s[Un].concat(r.modifiers[Un]),s[Tf]=r.modifiers[Tf],s[Pf]=r.modifiers[Pf],s[Ef]=r.modifiers[Ef]),s}var tC=f.createContext(void 0);function v8(t){var e=tt(),r=Av(),n=Iv(),s=g8(e,r,n),a=d8(e.modifiers),i=Ne(Ne({},s),a);return o.jsx(tC.Provider,{value:i,children:t.children})}function rC(){var t=f.useContext(tC);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function y8(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function x8(t){return!!(t&&typeof t=="object"&&"from"in t)}function w8(t){return!!(t&&typeof t=="object"&&"after"in t)}function _8(t){return!!(t&&typeof t=="object"&&"before"in t)}function b8(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function j8(t,e){var r,n=e.from,s=e.to;if(n&&s){var a=Cn(s,n)<0;a&&(r=[s,n],n=r[0],s=r[1]);var i=Cn(t,n)>=0&&Cn(s,t)>=0;return i}return s?fr(s,t):n?fr(n,t):!1}function S8(t){return Pv(t)}function N8(t){return Array.isArray(t)&&t.every(Pv)}function k8(t,e){return e.some(function(r){if(typeof r=="boolean")return r;if(S8(r))return fr(t,r);if(N8(r))return r.includes(t);if(x8(r))return j8(t,r);if(b8(r))return r.dayOfWeek.includes(t.getDay());if(y8(r)){var n=Cn(r.before,t),s=Cn(r.after,t),a=n>0,i=s<0,l=bp(r.before,r.after);return l?i&&a:a||i}return w8(r)?Cn(t,r.after)>0:_8(r)?Cn(r.before,t)>0:typeof r=="function"?r(t):!1})}function Lv(t,e,r){var n=Object.keys(e).reduce(function(a,i){var l=e[i];return k8(t,l)&&a.push(i),a},[]),s={};return n.forEach(function(a){return s[a]=!0}),r&&!Ov(t,r)&&(s.outside=!0),s}function C8(t,e){for(var r=vr(t[0]),n=Tv(t[t.length-1]),s,a,i=r;i<=n;){var l=Lv(i,e),c=!l.disabled&&!l.hidden;if(!c){i=Zt(i,1);continue}if(l.selected)return i;l.today&&!a&&(a=i),s||(s=i),i=Zt(i,1)}return a||s}var E8=365;function nC(t,e){var r=e.moveBy,n=e.direction,s=e.context,a=e.modifiers,i=e.retry,l=i===void 0?{count:0,lastFocused:t}:i,c=s.weekStartsOn,u=s.fromDate,d=s.toDate,h=s.locale,m={day:Zt,week:_p,month:dn,year:BU,startOfWeek:function(w){return s.ISOWeek?ro(w):Mn(w,{locale:h,weekStartsOn:c})},endOfWeek:function(w){return s.ISOWeek?zk(w):Rv(w,{locale:h,weekStartsOn:c})}},p=m[r](t,n==="after"?1:-1);n==="before"&&u?p=zU([u,p]):n==="after"&&d&&(p=WU([d,p]));var v=!0;if(a){var g=Lv(p,a);v=!g.disabled&&!g.hidden}return v?p:l.count>E8?l.lastFocused:nC(p,{moveBy:r,direction:n,context:s,modifiers:a,retry:Ne(Ne({},l),{count:l.count+1})})}var sC=f.createContext(void 0);function P8(t){var e=Pc(),r=rC(),n=f.useState(),s=n[0],a=n[1],i=f.useState(),l=i[0],c=i[1],u=C8(e.displayMonths,r),d=s??(l&&e.isDateDisplayed(l))?l:u,h=function(){c(s),a(void 0)},m=function(w){a(w)},p=tt(),v=function(w,x){if(s){var y=nC(s,{moveBy:w,direction:x,context:p,modifiers:r});fr(s,y)||(e.goToDate(y,s),m(y))}},g={focusedDay:s,focusTarget:d,blur:h,focus:m,focusDayAfter:function(){return v("day","after")},focusDayBefore:function(){return v("day","before")},focusWeekAfter:function(){return v("week","after")},focusWeekBefore:function(){return v("week","before")},focusMonthBefore:function(){return v("month","before")},focusMonthAfter:function(){return v("month","after")},focusYearBefore:function(){return v("year","before")},focusYearAfter:function(){return v("year","after")},focusStartOfWeek:function(){return v("startOfWeek","before")},focusEndOfWeek:function(){return v("endOfWeek","after")}};return o.jsx(sC.Provider,{value:g,children:t.children})}function Fv(){var t=f.useContext(sC);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function T8(t,e){var r=rC(),n=Lv(t,r,e);return n}var $v=f.createContext(void 0);function R8(t){if(!xh(t.initialProps)){var e={selected:void 0};return o.jsx($v.Provider,{value:e,children:t.children})}return o.jsx(O8,{initialProps:t.initialProps,children:t.children})}function O8(t){var e=t.initialProps,r=t.children,n=function(a,i,l){var c,u,d;if((c=e.onDayClick)===null||c===void 0||c.call(e,a,i,l),i.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,a,i,l);return}(d=e.onSelect)===null||d===void 0||d.call(e,a,a,i,l)},s={selected:e.selected,onDayClick:n};return o.jsx($v.Provider,{value:s,children:r})}function aC(){var t=f.useContext($v);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function D8(t,e){var r=tt(),n=aC(),s=Av(),a=Iv(),i=Fv(),l=i.focusDayAfter,c=i.focusDayBefore,u=i.focusWeekAfter,d=i.focusWeekBefore,h=i.blur,m=i.focus,p=i.focusMonthBefore,v=i.focusMonthAfter,g=i.focusYearBefore,w=i.focusYearAfter,x=i.focusStartOfWeek,y=i.focusEndOfWeek,_=function(F){var T,B,K,L;xh(r)?(T=n.onDayClick)===null||T===void 0||T.call(n,t,e,F):Cc(r)?(B=s.onDayClick)===null||B===void 0||B.call(s,t,e,F):Ec(r)?(K=a.onDayClick)===null||K===void 0||K.call(a,t,e,F):(L=r.onDayClick)===null||L===void 0||L.call(r,t,e,F)},b=function(F){var T;m(t),(T=r.onDayFocus)===null||T===void 0||T.call(r,t,e,F)},j=function(F){var T;h(),(T=r.onDayBlur)===null||T===void 0||T.call(r,t,e,F)},P=function(F){var T;(T=r.onDayMouseEnter)===null||T===void 0||T.call(r,t,e,F)},S=function(F){var T;(T=r.onDayMouseLeave)===null||T===void 0||T.call(r,t,e,F)},k=function(F){var T;(T=r.onDayPointerEnter)===null||T===void 0||T.call(r,t,e,F)},C=function(F){var T;(T=r.onDayPointerLeave)===null||T===void 0||T.call(r,t,e,F)},E=function(F){var T;(T=r.onDayTouchCancel)===null||T===void 0||T.call(r,t,e,F)},M=function(F){var T;(T=r.onDayTouchEnd)===null||T===void 0||T.call(r,t,e,F)},R=function(F){var T;(T=r.onDayTouchMove)===null||T===void 0||T.call(r,t,e,F)},X=function(F){var T;(T=r.onDayTouchStart)===null||T===void 0||T.call(r,t,e,F)},O=function(F){var T;(T=r.onDayKeyUp)===null||T===void 0||T.call(r,t,e,F)},se=function(F){var T;switch(F.key){case"ArrowLeft":F.preventDefault(),F.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":F.preventDefault(),F.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":F.preventDefault(),F.stopPropagation(),u();break;case"ArrowUp":F.preventDefault(),F.stopPropagation(),d();break;case"PageUp":F.preventDefault(),F.stopPropagation(),F.shiftKey?g():p();break;case"PageDown":F.preventDefault(),F.stopPropagation(),F.shiftKey?w():v();break;case"Home":F.preventDefault(),F.stopPropagation(),x();break;case"End":F.preventDefault(),F.stopPropagation(),y();break}(T=r.onDayKeyDown)===null||T===void 0||T.call(r,t,e,F)},I={onClick:_,onFocus:b,onBlur:j,onKeyDown:se,onKeyUp:O,onMouseEnter:P,onMouseLeave:S,onPointerEnter:k,onPointerLeave:C,onTouchCancel:E,onTouchEnd:M,onTouchMove:R,onTouchStart:X};return I}function A8(){var t=tt(),e=aC(),r=Av(),n=Iv(),s=xh(t)?e.selected:Cc(t)?r.selected:Ec(t)?n.selected:void 0;return s}function M8(t){return Object.values(hn).includes(t)}function I8(t,e){var r=[t.classNames.day];return Object.keys(e).forEach(function(n){var s=t.modifiersClassNames[n];if(s)r.push(s);else if(M8(n)){var a=t.classNames["day_".concat(n)];a&&r.push(a)}}),r}function L8(t,e){var r=Ne({},t.styles.day);return Object.keys(e).forEach(function(n){var s;r=Ne(Ne({},r),(s=t.modifiersStyles)===null||s===void 0?void 0:s[n])}),r}function F8(t,e,r){var n,s,a,i=tt(),l=Fv(),c=T8(t,e),u=D8(t,c),d=A8(),h=!!(i.onDayClick||i.mode!=="default");f.useEffect(function(){var P;c.outside||l.focusedDay&&h&&fr(l.focusedDay,t)&&((P=r.current)===null||P===void 0||P.focus())},[l.focusedDay,t,r,h,c.outside]);var m=I8(i,c).join(" "),p=L8(i,c),v=!!(c.outside&&!i.showOutsideDays||c.hidden),g=(a=(s=i.components)===null||s===void 0?void 0:s.DayContent)!==null&&a!==void 0?a:a8,w=o.jsx(g,{date:t,displayMonth:e,activeModifiers:c}),x={style:p,className:m,children:w,role:"gridcell"},y=l.focusTarget&&fr(l.focusTarget,t)&&!c.outside,_=l.focusedDay&&fr(l.focusedDay,t),b=Ne(Ne(Ne({},x),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=_||y?0:-1,n)),u),j={isButton:h,isHidden:v,activeModifiers:c,selectedDays:d,buttonProps:b,divProps:x};return j}function $8(t){var e=f.useRef(null),r=F8(t.date,t.displayMonth,e);return r.isHidden?o.jsx("div",{role:"gridcell"}):r.isButton?o.jsx(Nd,Ne({name:"day",ref:e},r.buttonProps)):o.jsx("div",Ne({},r.divProps))}function U8(t){var e=t.number,r=t.dates,n=tt(),s=n.onWeekNumberClick,a=n.styles,i=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(e),{locale:l});if(!s)return o.jsx("span",{className:i.weeknumber,style:a.weeknumber,children:d});var h=c(Number(e),{locale:l}),m=function(p){s(e,r,p)};return o.jsx(Nd,{name:"week-number","aria-label":h,className:i.weeknumber,style:a.weeknumber,onClick:m,children:d})}function B8(t){var e,r,n=tt(),s=n.styles,a=n.classNames,i=n.showWeekNumber,l=n.components,c=(e=l==null?void 0:l.Day)!==null&&e!==void 0?e:$8,u=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:U8,d;return i&&(d=o.jsx("td",{className:a.cell,style:s.cell,children:o.jsx(u,{number:t.weekNumber,dates:t.dates})})),o.jsxs("tr",{className:a.row,style:s.row,children:[d,t.dates.map(function(h){return o.jsx("td",{className:a.cell,style:s.cell,role:"presentation",children:o.jsx(c,{displayMonth:t.displayMonth,date:h})},B5(h))})]})}function a0(t,e,r){for(var n=r!=null&&r.ISOWeek?zk(e):Rv(e,r),s=r!=null&&r.ISOWeek?ro(t):Mn(t,r),a=Cn(n,s),i=[],l=0;l<=a;l++)i.push(Zt(s,l));var c=i.reduce(function(u,d){var h=r!=null&&r.ISOWeek?Hk(d):Kk(d,r),m=u.find(function(p){return p.weekNumber===h});return m?(m.dates.push(d),u):(u.push({weekNumber:h,dates:[d]}),u)},[]);return c}function z8(t,e){var r=a0(vr(t),Tv(t),e);if(e!=null&&e.useFixedWeeks){var n=W5(t,e);if(n<6){var s=r[r.length-1],a=s.dates[s.dates.length-1],i=_p(a,6-n),l=a0(_p(a,1),i,e);r.push.apply(r,l)}}return r}function W8(t){var e,r,n,s=tt(),a=s.locale,i=s.classNames,l=s.styles,c=s.hideHead,u=s.fixedWeeks,d=s.components,h=s.weekStartsOn,m=s.firstWeekContainsDate,p=s.ISOWeek,v=z8(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:p,locale:a,weekStartsOn:h,firstWeekContainsDate:m}),g=(e=d==null?void 0:d.Head)!==null&&e!==void 0?e:s8,w=(r=d==null?void 0:d.Row)!==null&&r!==void 0?r:B8,x=(n=d==null?void 0:d.Footer)!==null&&n!==void 0?n:t8;return o.jsxs("table",{id:t.id,className:i.table,style:l.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&o.jsx(g,{}),o.jsx("tbody",{className:i.tbody,style:l.tbody,children:v.map(function(y){return o.jsx(w,{displayMonth:t.displayMonth,dates:y.dates,weekNumber:y.weekNumber},y.weekNumber)})}),o.jsx(x,{displayMonth:t.displayMonth})]})}function V8(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var H8=V8()?f.useLayoutEffect:f.useEffect,Rf=!1,q8=0;function o0(){return"react-day-picker-".concat(++q8)}function K8(t){var e,r=t??(Rf?o0():null),n=f.useState(r),s=n[0],a=n[1];return H8(function(){s===null&&a(o0())},[]),f.useEffect(function(){Rf===!1&&(Rf=!0)},[]),(e=t??s)!==null&&e!==void 0?e:void 0}function G8(t){var e,r,n=tt(),s=n.dir,a=n.classNames,i=n.styles,l=n.components,c=Pc().displayMonths,u=K8(n.id?"".concat(n.id,"-").concat(t.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(t.displayIndex):void 0,h=[a.month],m=i.month,p=t.displayIndex===0,v=t.displayIndex===c.length-1,g=!p&&!v;s==="rtl"&&(e=[p,v],v=e[0],p=e[1]),p&&(h.push(a.caption_start),m=Ne(Ne({},m),i.caption_start)),v&&(h.push(a.caption_end),m=Ne(Ne({},m),i.caption_end)),g&&(h.push(a.caption_between),m=Ne(Ne({},m),i.caption_between));var w=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:e8;return o.jsxs("div",{className:h.join(" "),style:m,children:[o.jsx(w,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),o.jsx(W8,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function Y8(t){var e=tt(),r=e.classNames,n=e.styles;return o.jsx("div",{className:r.months,style:n.months,children:t.children})}function Q8(t){var e,r,n=t.initialProps,s=tt(),a=Fv(),i=Pc(),l=f.useState(!1),c=l[0],u=l[1];f.useEffect(function(){s.initialFocus&&a.focusTarget&&(c||(a.focus(a.focusTarget),u(!0)))},[s.initialFocus,c,a.focus,a.focusTarget,a]);var d=[s.classNames.root,s.className];s.numberOfMonths>1&&d.push(s.classNames.multiple_months),s.showWeekNumber&&d.push(s.classNames.with_weeknumber);var h=Ne(Ne({},s.styles.root),s.style),m=Object.keys(n).filter(function(v){return v.startsWith("data-")}).reduce(function(v,g){var w;return Ne(Ne({},v),(w={},w[g]=n[g],w))},{}),p=(r=(e=n.components)===null||e===void 0?void 0:e.Months)!==null&&r!==void 0?r:Y8;return o.jsx("div",Ne({className:d.join(" "),style:h,dir:s.dir,id:s.id,nonce:n.nonce,title:n.title,lang:n.lang},m,{children:o.jsx(p,{children:i.displayMonths.map(function(v,g){return o.jsx(G8,{displayIndex:g,displayMonth:v},g)})})}))}function J8(t){var e=t.children,r=_6(t,["children"]);return o.jsx(U6,{initialProps:r,children:o.jsx(Q6,{children:o.jsx(R8,{initialProps:r,children:o.jsx(o8,{initialProps:r,children:o.jsx(c8,{initialProps:r,children:o.jsx(v8,{children:o.jsx(P8,{children:e})})})})})})})}function X8(t){return o.jsx(J8,Ne({},t,{children:o.jsx(Q8,{initialProps:t})}))}function oC({className:t,classNames:e,showOutsideDays:r=!0,...n}){return o.jsx(X8,{showOutsideDays:r,className:J("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:J(Kl({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:J(Kl({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...s})=>o.jsx(LI,{className:"h-4 w-4"}),IconRight:({...s})=>o.jsx(zg,{className:"h-4 w-4"})},...n})}oC.displayName="Calendar";function Uv({onSearch:t,onFilterStatus:e,onFilterAssignee:r,onFilterDateRange:n,users:s=[],statuses:a=[],placeholder:i,className:l}){const{t:c}=gt(),{currentLanguage:u}=io(),[d,h]=f.useState(""),[m,p]=f.useState({from:void 0,to:void 0}),v=u==="ar"?w6:void 0;f.useEffect(()=>{const x=setTimeout(()=>{t(d)},300);return()=>clearTimeout(x)},[d,t]);const g=x=>{p(x),n&&n(x)},w=()=>{h(""),p({from:void 0,to:void 0}),e&&e("all"),r&&r("all"),n&&n({from:void 0,to:void 0})};return o.jsxs("div",{className:J("flex flex-col sm:flex-row gap-3 mb-6",l),children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(Ja,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground rtl:right-2.5 rtl:left-auto"}),o.jsx(ke,{placeholder:i||c("common.search","Search..."),value:d,onChange:x=>h(x.target.value),className:"pl-9 rtl:pr-9 rtl:pl-3"})]}),o.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 sm:pb-0",children:[e&&a.length>0&&o.jsxs(ze,{onValueChange:e,children:[o.jsxs(Ue,{className:"w-[140px]",children:[o.jsx(VI,{className:"mr-2 h-4 w-4"}),o.jsx(We,{placeholder:c("common.status","Status")})]}),o.jsxs(Be,{children:[o.jsx(ae,{value:"all",children:c("common.all","All")}),a.map(x=>o.jsx(ae,{value:x.value,children:x.label},x.value))]})]}),r&&s.length>0&&o.jsxs(ze,{onValueChange:r,children:[o.jsxs(Ue,{className:"w-[140px]",children:[o.jsx(Z8,{className:"mr-2 h-4 w-4"}),o.jsx(We,{placeholder:c("common.assignee","Assignee")})]}),o.jsxs(Be,{children:[o.jsx(ae,{value:"all",children:c("common.all","All")}),s.filter(x=>["employee","admin","manager","team_leader"].includes(x.user_role)).map(x=>o.jsx(ae,{value:x.user_id.toString(),children:q(x,"user_name")},x.user_id))]})]}),n&&o.jsxs(IU,{children:[o.jsx(LU,{asChild:!0,children:o.jsxs(Y,{variant:"outline",className:J("w-[240px] justify-start text-left font-normal",!m.from&&"text-muted-foreground"),children:[o.jsx(dc,{className:"mr-2 h-4 w-4"}),m.from?m.to?o.jsxs(o.Fragment,{children:[On(m.from,"LLL dd, y",{locale:v})," -"," ",On(m.to,"LLL dd, y",{locale:v})]}):On(m.from,"LLL dd, y",{locale:v}):o.jsx("span",{children:c("common.pickDate","Pick a date")})]})}),o.jsx($k,{className:"w-auto p-0",align:"start",children:o.jsx(oC,{initialFocus:!0,mode:"range",defaultMonth:m.from,selected:m,onSelect:g,numberOfMonths:2})})]}),o.jsx(Y,{variant:"ghost",size:"icon",onClick:w,title:c("common.clearFilters","Clear filters"),children:o.jsx(Gg,{className:"h-4 w-4"})})]})]})}function Z8(t){return o.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}const Of=1024;function uo(){const[t,e]=f.useState(void 0);return f.useEffect(()=>{const r=window.matchMedia(`(max-width: ${Of-1}px)`),n=()=>{e(window.innerWidth<Of)};return r.addEventListener("change",n),e(window.innerWidth<Of),()=>r.removeEventListener("change",n)},[]),!!t}var iC="AlertDialog",[eB,xz]=yr(iC,[rk]),is=rk(),lC=t=>{const{__scopeAlertDialog:e,...r}=t,n=is(e);return o.jsx(wv,{...n,...r,modal:!0})};lC.displayName=iC;var tB="AlertDialogTrigger",cC=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=is(r);return o.jsx(_v,{...s,...n,ref:e})});cC.displayName=tB;var rB="AlertDialogPortal",uC=t=>{const{__scopeAlertDialog:e,...r}=t,n=is(e);return o.jsx(bv,{...n,...r})};uC.displayName=rB;var nB="AlertDialogOverlay",dC=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=is(r);return o.jsx(_c,{...s,...n,ref:e})});dC.displayName=nB;var ei="AlertDialogContent",[sB,aB]=eB(ei),oB=$M("AlertDialogContent"),hC=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,children:n,...s}=t,a=is(r),i=f.useRef(null),l=Ae(e,i),c=f.useRef(null);return o.jsx(J3,{contentName:ei,titleName:fC,docsSlug:"alert-dialog",children:o.jsx(sB,{scope:r,cancelRef:c,children:o.jsxs(bc,{role:"alertdialog",...a,...s,ref:l,onOpenAutoFocus:oe(s.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[o.jsx(oB,{children:n}),o.jsx(lB,{contentRef:i})]})})})});hC.displayName=ei;var fC="AlertDialogTitle",mC=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=is(r);return o.jsx(jc,{...s,...n,ref:e})});mC.displayName=fC;var pC="AlertDialogDescription",gC=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=is(r);return o.jsx(Sc,{...s,...n,ref:e})});gC.displayName=pC;var iB="AlertDialogAction",vC=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=is(r);return o.jsx(hh,{...s,...n,ref:e})});vC.displayName=iB;var yC="AlertDialogCancel",xC=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,{cancelRef:s}=aB(yC,r),a=is(r),i=Ae(e,s);return o.jsx(hh,{...a,...n,ref:i})});xC.displayName=yC;var lB=({contentRef:t})=>{const e=`\`${ei}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ei}\` by passing a \`${pC}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ei}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return f.useEffect(()=>{var n;document.getElementById((n=t.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},cB=lC,uB=cC,dB=uC,wC=dC,_C=hC,bC=vC,jC=xC,SC=mC,NC=gC;const ho=cB,Tc=uB,hB=dB,kC=f.forwardRef(({className:t,...e},r)=>o.jsx(wC,{className:J("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:r}));kC.displayName=wC.displayName;const ca=f.forwardRef(({className:t,...e},r)=>o.jsxs(hB,{children:[o.jsx(kC,{}),o.jsx(_C,{ref:r,className:J("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));ca.displayName=_C.displayName;const ua=({className:t,...e})=>o.jsx("div",{className:J("flex flex-col space-y-2 text-center sm:text-left",t),...e});ua.displayName="AlertDialogHeader";const da=({className:t,...e})=>o.jsx("div",{className:J("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});da.displayName="AlertDialogFooter";const ha=f.forwardRef(({className:t,...e},r)=>o.jsx(SC,{ref:r,className:J("text-lg font-semibold",t),...e}));ha.displayName=SC.displayName;const fa=f.forwardRef(({className:t,...e},r)=>o.jsx(NC,{ref:r,className:J("text-sm text-muted-foreground",t),...e}));fa.displayName=NC.displayName;const ma=f.forwardRef(({className:t,...e},r)=>o.jsx(bC,{ref:r,className:J(Kl(),t),...e}));ma.displayName=bC.displayName;const pa=f.forwardRef(({className:t,...e},r)=>o.jsx(jC,{ref:r,className:J(Kl({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));pa.displayName=jC.displayName;const Ur=f.forwardRef(({className:t,...e},r)=>o.jsx("textarea",{className:J("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));Ur.displayName="Textarea";function Bv({stages:t,currentStageId:e,onStageChange:r,children:n}){const s=uo(),a=f.useRef(null),i=t.find(l=>l.id===e)??t[0];return f.useEffect(()=>{s&&a.current&&a.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},[i==null?void 0:i.id,s]),s?o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsx("div",{className:"border-b bg-background/95 backdrop-blur sticky top-0 z-20 shadow-sm",children:o.jsx("div",{className:"w-full overflow-x-auto scrollbar-hide",dir:sn()?"ltr":"rtl",children:o.jsx("div",{className:"flex gap-2 p-3 min-w-max rtl:flex-row-reverse",children:[...t].sort((l,c)=>(sn(),l.id-c.id)).map(l=>{const c=l.id===i.id;return o.jsxs("button",{ref:c?a:null,onClick:()=>r(l.id),className:J("inline-flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all font-medium text-sm border-2 flex-shrink-0",c?"bg-primary text-primary-foreground shadow-md border-primary":"bg-card text-muted-foreground hover:bg-accent hover:text-accent-foreground border-border"),children:[o.jsx("span",{className:"truncate max-w-[140px]",children:l.name}),o.jsx(Fe,{variant:"secondary",className:J("h-5 min-w-5 px-1.5 text-xs font-semibold",c?"bg-primary-foreground/20 text-primary-foreground border-primary-foreground/30":"bg-muted"),children:l.count})]},l.id)})})})}),o.jsx("div",{className:"flex-1 overflow-auto scrollbar-hide",children:o.jsx("div",{className:"p-2",children:n})})]}):o.jsx(o.Fragment,{children:n})}function fB({lead:t,client:e,creator:r,assignedUser:n,userRole:s,users:a=[],onDelete:i,onAssign:l,onClick:c,onDragStart:u,isDragging:d=!1}){const{t:h}=gt(),m=uo(),p=v=>v?new Date(v).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):h("leads.unknown");return o.jsxs(pe,{className:J("group relative hover:shadow-lg transition-all duration-200 cursor-pointer",m?"w-full border-l-4 border-l-blue-500 rtl:border-l-0 rtl:border-r-4 rtl:border-r-blue-500":"w-[280px] sm:w-[300px]",d&&"opacity-50 rotate-2 scale-105"),onClick:c,draggable:!!u,onDragStart:v=>{u&&(v.dataTransfer.effectAllowed="move",v.dataTransfer.setData("text/plain",t.lead_id.toString()),u(t.lead_id))},children:[o.jsx($e,{className:"pb-3 px-4 pt-4",children:o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-base mb-1 truncate group-hover:text-primary transition-colors",children:q(t,"lead_name")}),q(t,"lead_description")&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:q(t,"lead_description")})]}),i&&o.jsxs(ho,{children:[o.jsx(Tc,{asChild:!0,onClick:v=>v.stopPropagation(),children:o.jsx(Y,{variant:"ghost",size:"sm",className:J("h-8 w-8 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10",m?"opacity-100":"opacity-0 group-hover:opacity-100 transition-opacity"),children:o.jsx(an,{className:"h-4 w-4"})})}),o.jsxs(ca,{onClick:v=>v.stopPropagation(),children:[o.jsxs(ua,{children:[o.jsx(ha,{children:h("leads.deleteLead")}),o.jsx(fa,{children:h("leads.deleteConfirmation",{name:q(t,"lead_name")})})]}),o.jsxs(da,{children:[o.jsx(pa,{children:h("buttons.cancel")}),o.jsx(ma,{onClick:v=>{v.stopPropagation(),i(t.lead_id)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:h("buttons.delete")})]})]})]})]})}),o.jsxs(_e,{className:"px-4 pb-4 space-y-3",children:[e&&o.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md bg-muted/50",children:[o.jsx(Qd,{className:"h-4 w-4 text-primary flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:h("leads.client")}),o.jsx("p",{className:"text-sm font-medium truncate",children:q(e,"user_name")})]})]}),(s==="admin"||s==="manager")&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r&&o.jsxs("div",{className:"flex items-start gap-1.5",children:[o.jsx(Ys,{className:"h-3.5 w-3.5 text-muted-foreground mt-0.5 flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-[10px] text-muted-foreground",children:h("leads.createdBy")}),o.jsx("p",{className:"text-xs font-medium truncate",children:q(r,"user_name")})]})]}),o.jsxs("div",{className:"flex items-start gap-1.5",children:[o.jsx(Ys,{className:"h-3.5 w-3.5 text-muted-foreground mt-0.5 flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-[10px] text-muted-foreground",children:h("leads.assignedTo")}),o.jsx("p",{className:"text-xs font-medium truncate",children:n?q(n,"user_name"):h("common.all","Unassigned")})]})]})]}),o.jsx("div",{className:"pt-1",children:o.jsxs(ze,{value:t.assigned_to||"unassigned",onValueChange:v=>l&&l(t.lead_id,v==="unassigned"?"":v),children:[o.jsx(Ue,{className:"h-7 text-xs",children:o.jsx(We,{placeholder:h("leads.selectAssignee","Select assignee")})}),o.jsxs(Be,{children:[o.jsx(ae,{value:"unassigned",children:h("common.all","Unassigned")}),a.filter(v=>["employee","admin","manager","team_leader"].includes(v.user_role)&&v.auth_user_id).map(v=>o.jsx(ae,{value:v.auth_user_id,children:q(v,"user_name")},v.user_id))]})]})})]}),o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[o.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[o.jsx(dc,{className:"h-3.5 w-3.5"}),o.jsx("span",{children:p(t.created_date)})]}),o.jsx(Fe,{variant:"secondary",className:"text-xs",children:h("leads.lead")})]})]})]})}function mB(){var qe,rt,it;fn();const{hasRole:t,user:e}=St(),r=uo(),{t:n}=gt(),[s,a]=f.useState([]),[i,l]=f.useState([]),[c,u]=f.useState([]),[d,h]=f.useState([]),[m,p]=f.useState(!0);f.useState(!1),f.useState("");const[v,g]=f.useState(null),[w,x]=f.useState(""),[y,_]=f.useState(null),[b,j]=f.useState(null),[P,S]=f.useState(!1),[k,C]=f.useState(null),[E,M]=f.useState("kanban"),[R,X]=f.useState(""),[O,se]=f.useState("all"),[I,F]=f.useState("all"),[T,B]=f.useState({from:void 0,to:void 0}),K=f.useMemo(()=>s.filter(U=>{const N=(U.lead_name||"").toLowerCase().includes(R.toLowerCase())||(U.lead_description||"").toLowerCase().includes(R.toLowerCase())||(U.client_name||"").toLowerCase().includes(R.toLowerCase()),z=I==="all"||U.assigned_to&&U.assigned_to===I;let A=!0;if(T.from&&U.created_date){const G=new Date(U.created_date),H=new Date(T.from);H.setHours(0,0,0,0);const te=new Date(G);if(te.setHours(0,0,0,0),A=te>=H,A&&T.to){const ve=new Date(T.to);ve.setHours(23,59,59,999),A=te<=ve}}else T.from&&!U.created_date&&(A=!1);return N&&z&&A}),[s,R,O,I,T]),[L,ee]=f.useState({lead_name:"",lead_description:"",client_name:"",client_user_id:"",stage:"1",assigned_to:""});f.useEffect(()=>{ge()},[]),f.useEffect(()=>{if(d.length>0&&k===null){const U=d.find(N=>N.stage_id===1);U&&C(U.stage_id)}},[d,k]);const ge=async()=>{try{p(!0);const[U,N,z,A]=await Promise.all([Na.getAll(),Sv.getAll(),$r.getAll(),kn.getGlobalStages()]);console.log("[Leads] Loaded data:",{leads:U.length,clients:N.length,users:z.length,stages:A.length}),console.log("[Leads] Leads data:",U),console.log("[Leads] Stages data:",A),a(U),l(N),u(z),h(A)}catch(U){console.error("Failed to load data:",U)}finally{p(!1)}},we=async U=>{if(w.trim())try{await kn.update(U,{stage_name:w.trim()}),h(d.map(N=>N.stage_id===U?{...N,stage_name:w.trim()}:N)),g(null),x("")}catch(N){console.error("Failed to update stage:",N)}},Re=async U=>{if(s.filter(z=>z.stage===U).length>0){_(U);return}try{await kn.delete(U),h(d.filter(z=>z.stage_id!==U))}catch(z){console.error("Failed to delete stage:",z)}},Ce=async()=>{if(y)try{await kn.delete(y),h(d.filter(U=>U.stage_id!==y)),_(null),ge()}catch(U){console.error("Failed to delete stage:",U)}},ie=U=>{j(U)},be=U=>{U.preventDefault(),U.dataTransfer.dropEffect="move"},Pe=async U=>{if(!b)return;const N=s.find(z=>z.lead_id===b);if(N&&N.stage!==U)try{await Na.update(b,{stage:U}),a(s.map(z=>z.lead_id===b?{...z,stage:U}:z))}catch(z){console.error("Failed to update lead stage:",z)}j(null)},W=async U=>{try{await Na.delete(U),a(s.filter(N=>N.lead_id!==U))}catch(N){console.error("Failed to delete lead:",N)}},ne=async(U,N)=>{const z=N||null,A=z?new Date().toISOString():null,G=s.find(H=>H.lead_id===U);if(G){a(s.map(H=>H.lead_id===U?{...H,assigned_to:z,assigned_at:A}:H));try{await Na.update(U,{assigned_to:z,assigned_at:A})}catch(H){console.error("Failed to assign lead:",H),a(s.map(te=>te.lead_id===U?{...te,assigned_to:G.assigned_to,assigned_at:G.assigned_at}:te))}}},V=U=>{ee(N=>({...N,stage:U.toString()})),S(!0)},he=async()=>{if(L.lead_name.trim())try{const U=L.assigned_to&&L.assigned_to!=="unassigned"?L.assigned_to:null,N=U?new Date().toISOString():null,z=Wr({lead_name:L.lead_name.trim(),lead_description:L.lead_description.trim()||null,client_name:L.client_name.trim()||null,client_user_id:L.client_user_id||null,created_by:(e==null?void 0:e.id)||null,stage:parseInt(L.stage),assigned_to:U,assigned_at:N},{lead_name:"lead_name",lead_description:"lead_description",client_name:"client_name"}),A=await Na.create(z);a([...s,A]),ee({lead_name:"",lead_description:"",client_name:"",client_user_id:"",stage:"1",assigned_to:""}),S(!1)}catch(U){console.error("Failed to create lead:",U)}},Te=d.filter(U=>[1,2,3,4].includes(U.stage_id)).sort((U,N)=>sn()?N.stage_id-U.stage_id:U.stage_id-N.stage_id).map(U=>({id:U.stage_id,name:q(U,"stage_name"),color:U.color,count:K.filter(N=>N.stage===U.stage_id).length}));return m?o.jsx("div",{className:"flex items-center justify-center h-full py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):o.jsxs("div",{className:"h-full flex flex-col space-y-8",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n("leads.title")}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"bg-muted p-1 rounded-lg flex items-center gap-1",children:[o.jsx(Y,{variant:E==="kanban"?"default":"ghost",size:"sm",onClick:()=>M("kanban"),className:"h-8 w-8 p-0","data-active":E==="kanban",children:o.jsx(Vg,{className:"h-4 w-4"})}),o.jsx(Y,{variant:E==="list"?"default":"ghost",size:"sm",onClick:()=>M("list"),className:"h-8 w-8 p-0","data-active":E==="list",children:o.jsx(Hg,{className:"h-4 w-4"})})]}),o.jsxs(Y,{onClick:()=>S(!0),children:[o.jsx(It,{className:"mr-2 h-4 w-4"})," ",n("leads.newLead")]})]})]}),o.jsx(Uv,{onSearch:X,onFilterAssignee:F,onFilterDateRange:B,users:c}),E==="kanban"?o.jsxs(Bv,{stages:Te,currentStageId:k||((qe=Te[0])==null?void 0:qe.id),onStageChange:C,children:[o.jsx(At,{open:P,onOpenChange:S,children:o.jsxs(Et,{className:"w-[95vw] sm:w-full sm:max-w-[500px] max-h-[85vh] overflow-y-auto",children:[o.jsxs(Pt,{children:[o.jsx(Tt,{children:n("leads.createLead")}),o.jsx(Kt,{children:n("leads.createLeadDesc")})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"text-sm font-medium",children:[n("leads.leadName")," *"]}),o.jsx(ke,{value:L.lead_name,onChange:U=>ee(N=>({...N,lead_name:U.target.value})),placeholder:n("leads.leadNamePlaceholder")})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("leads.description")}),o.jsx(Ur,{value:L.lead_description,onChange:U=>ee(N=>({...N,lead_description:U.target.value})),placeholder:n("leads.descriptionPlaceholder"),rows:3})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("leads.clientName")}),o.jsx(ke,{value:L.client_name,onChange:U=>ee(N=>({...N,client_name:U.target.value})),placeholder:n("leads.clientNamePlaceholder")})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("leads.client")}),o.jsxs(ze,{value:L.client_user_id,onValueChange:U=>ee(N=>({...N,client_user_id:U})),children:[o.jsx(Ue,{children:o.jsx(We,{placeholder:n("leads.selectClient")})}),o.jsx(Be,{children:i.filter(U=>U.auth_user_id).map(U=>o.jsx(ae,{value:U.auth_user_id,children:q(U,"user_name")},U.user_id))})]})]}),((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="manager")&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("leads.assignToEmployee")}),o.jsxs(ze,{value:L.assigned_to,onValueChange:U=>ee(N=>({...N,assigned_to:U})),children:[o.jsx(Ue,{children:o.jsx(We,{placeholder:n("leads.selectAssignee","Select assignee")})}),o.jsxs(Be,{children:[o.jsx(ae,{value:"unassigned",children:n("common.all","Unassigned")}),c.filter(U=>["employee","admin","manager","team_leader"].includes(U.user_role)&&U.auth_user_id).map(U=>o.jsx(ae,{value:U.auth_user_id,children:q(U,"user_name")},U.user_id))]})]})]})]}),o.jsxs(rr,{children:[o.jsx(Y,{variant:"outline",onClick:()=>S(!1),children:n("buttons.cancel")}),o.jsxs(Y,{onClick:he,disabled:!((rt=L.lead_name)!=null&&rt.trim()),children:[o.jsx(Ba,{className:"h-4 w-4 mr-2"}),n("leads.createLead")]})]})]})}),o.jsx("div",{className:"flex gap-6 pb-6 overflow-x-auto scrollbar-hide max-w-full pl-6 rtl:pr-6 rtl:pl-0 flex-1",children:d.filter(U=>[1,2,3,4].includes(U.stage_id)).sort((U,N)=>U.stage_id-N.stage_id).filter(U=>{var N;return r?U.stage_id===(k||((N=Te[0])==null?void 0:N.id)):!0}).map((U,N)=>{var A,G;const z=K.filter(H=>H.stage===U.stage_id);return console.log(`[Leads] Stage ${U.stage_name} (${U.stage_id}): ${z.length} leads`),console.log("[Leads] Stage leads:",z),o.jsxs("div",{className:J("flex-shrink-0 animate-fade-in h-full flex flex-col",r?"w-full":"w-[280px] sm:w-[300px]"),style:{animationDelay:`${N*.1}s`},onDragOver:be,onDrop:()=>Pe(U.stage_id),children:[o.jsx("div",{className:J("rounded-xl bg-muted/30 backdrop-blur p-4 mb-5 shadow-soft hidden md:block",U.color||"border-l-4 border-primary/50"),children:o.jsx("div",{className:"flex items-center justify-between mb-2 rtl:flex-row-reverse",children:v===U.stage_id?o.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[o.jsx(ke,{value:w,onChange:H=>x(H.target.value),onKeyDown:H=>{H.key==="Enter"&&we(U.stage_id),H.key==="Escape"&&(g(null),x(""))},className:"h-8 text-sm font-bold",autoFocus:!0}),o.jsx(Y,{size:"sm",variant:"ghost",onClick:()=>we(U.stage_id),className:"h-8 w-8 p-0",children:""})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Wg,{className:"h-4 w-4 text-muted-foreground cursor-move"}),o.jsx("h2",{className:"font-bold text-base",children:q(U,"stage_name")})]}),o.jsxs("div",{className:"flex items-center gap-2 rtl:flex-row-reverse",children:[o.jsx("span",{className:"text-sm font-bold px-3 py-1 rounded-full bg-background shadow-sm",children:z.length}),o.jsxs(o.Fragment,{children:[o.jsx(Y,{size:"sm",variant:"ghost",onClick:()=>{g(U.stage_id),x(q(U,"stage_name"))},className:"h-6 w-6 p-0",title:n("buttons.edit"),children:o.jsx(OS,{className:"h-3 w-3"})}),o.jsx(Y,{size:"sm",variant:"ghost",onClick:()=>Re(U.stage_id),className:"h-6 w-6 p-0 text-destructive",title:n("buttons.delete"),children:o.jsx(an,{className:"h-3 w-3"})})]})]})]})})}),o.jsxs("div",{className:"space-y-4 flex-1 overflow-y-auto pr-2 rtl:pr-0 rtl:pl-2 scrollbar-hide",children:[((A=d.sort((H,te)=>(H.stager_order_index||0)-(te.stager_order_index||0))[0])==null?void 0:A.stage_id)===U.stage_id&&o.jsx("div",{className:"mb-4",children:o.jsx(pe,{className:J("group relative hover:shadow-lg transition-all duration-200 cursor-pointer","border-l-4 border-l-gray-300 rtl:border-l-0 rtl:border-r-4 rtl:border-r-gray-300","flex items-center justify-center bg-muted/20",r?"w-full h-[100px]":"w-[280px] sm:w-[300px] h-[120px]"),onClick:()=>V(U.stage_id),children:o.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[o.jsx(It,{className:"h-8 w-8"}),o.jsx("span",{className:"text-sm font-medium",children:n("leads.addNewLeadCard")})]})})}),z.map(H=>{const te=i.find(Q=>Q.auth_user_id===H.client_user_id),ve=c.find(Q=>Q.auth_user_id===H.created_by),$=c.find(Q=>Q.auth_user_id===H.assigned_to);return o.jsx("div",{children:o.jsx(fB,{lead:H,client:te||null,creator:ve||null,assignedUser:$||null,userRole:e==null?void 0:e.role,users:c,onDelete:()=>W(H.lead_id),onAssign:ne,onClick:()=>{},onDragStart:ie,isDragging:b===H.lead_id})},H.lead_id)}),((G=d.sort((H,te)=>(H.stager_order_index||0)-(te.stager_order_index||0))[0])==null?void 0:G.stage_id)!==U.stage_id&&o.jsx("div",{className:"mt-2",children:o.jsxs(Y,{variant:"outline",size:"sm",className:"w-full h-12 border-dashed text-muted-foreground hover:text-foreground",onClick:()=>V(U.stage_id),children:[o.jsx(It,{className:"h-4 w-4 mr-2"}),n("leads.addLead")]})})]})]},U.stage_id)})}),o.jsx(ho,{open:!!y,onOpenChange:()=>_(null),children:o.jsxs(ca,{children:[o.jsxs(ua,{children:[o.jsx(ha,{children:n("leads.deleteStage")}),o.jsx(fa,{children:n("leads.deleteStageConfirmation",{count:s.filter(U=>U.stage===y).length})})]}),o.jsxs(da,{children:[o.jsx(pa,{children:n("buttons.cancel")}),o.jsx(ma,{onClick:Ce,className:"bg-destructive text-destructive-foreground",children:n("buttons.delete")})]})]})})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("h2",{className:"text-lg font-semibold",children:[n("leads.title")," (",s.length,")"]}),o.jsx(At,{open:P,onOpenChange:S,children:o.jsxs(Et,{className:"w-[95vw] sm:w-full sm:max-w-[500px] max-h-[85vh] overflow-y-auto",children:[o.jsxs(Pt,{children:[o.jsx(Tt,{children:n("leads.createLead")}),o.jsx(Kt,{children:n("leads.createLeadDesc")})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"text-sm font-medium",children:[n("leads.leadName")," *"]}),o.jsx(ke,{value:L.lead_name,onChange:U=>ee(N=>({...N,lead_name:U.target.value})),placeholder:n("leads.leadNamePlaceholder")})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("leads.description")}),o.jsx(Ur,{value:L.lead_description,onChange:U=>ee(N=>({...N,lead_description:U.target.value})),placeholder:n("leads.descriptionPlaceholder"),rows:3})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("leads.clientName")}),o.jsx(ke,{value:L.client_name,onChange:U=>ee(N=>({...N,client_name:U.target.value})),placeholder:n("leads.clientNamePlaceholder")})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("leads.client")}),o.jsxs(ze,{value:L.client_user_id,onValueChange:U=>ee(N=>({...N,client_user_id:U})),children:[o.jsx(Ue,{children:o.jsx(We,{placeholder:n("leads.selectClient")})}),o.jsx(Be,{children:i.filter(U=>U.auth_user_id).map(U=>o.jsx(ae,{value:U.auth_user_id,children:q(U,"user_name")},U.user_id))})]})]}),((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="manager")&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("leads.assignToEmployee")}),o.jsxs(ze,{value:L.assigned_to,onValueChange:U=>ee(N=>({...N,assigned_to:U})),children:[o.jsx(Ue,{children:o.jsx(We,{placeholder:n("leads.selectAssignee","Select assignee")})}),o.jsxs(Be,{children:[o.jsx(ae,{value:"unassigned",children:n("common.all","Unassigned")}),c.filter(U=>["employee","admin","manager","team_leader"].includes(U.user_role)&&U.auth_user_id).map(U=>o.jsx(ae,{value:U.auth_user_id,children:q(U,"user_name")},U.user_id))]})]})]})]}),o.jsxs(rr,{children:[o.jsx(Y,{variant:"outline",onClick:()=>S(!1),children:n("buttons.cancel")}),o.jsxs(Y,{onClick:he,disabled:!((it=L.lead_name)!=null&&it.trim()),children:[o.jsx(Ba,{className:"h-4 w-4 mr-2"}),n("leads.createLead")]})]})]})})]}),o.jsxs(pe,{className:"max-h-[calc(100vh-300px)] flex flex-col",children:[o.jsx($e,{className:"flex-shrink-0",children:o.jsx(Je,{children:n("leads.title")})}),o.jsx(_e,{className:"flex-1 overflow-y-auto",children:o.jsxs(ph,{children:[o.jsx(gh,{children:o.jsxs(Rn,{children:[o.jsx(_t,{children:n("leads.leadName")}),o.jsx(_t,{children:n("leads.client")}),o.jsx(_t,{children:n("leads.createdBy")}),o.jsx(_t,{children:n("leads.assignedTo")}),o.jsx(_t,{children:n("common.created")}),o.jsx(_t,{children:n("tasks.stage")}),o.jsx(_t,{className:"w-[100px]",children:n("common.actions")})]})}),o.jsx(vh,{children:s.length===0?o.jsx(Rn,{children:o.jsx(ut,{colSpan:7,className:"text-center py-12",children:o.jsx("div",{className:"text-muted-foreground",children:n("leads.noLeadsYet")})})}):s.map(U=>{const N=i.find(H=>H.auth_user_id===U.client_user_id),z=c.find(H=>H.auth_user_id===U.created_by),A=c.find(H=>H.auth_user_id===U.assigned_to),G=d.find(H=>H.stage_id===U.stage);return o.jsxs(Rn,{className:"cursor-pointer hover:bg-muted/50",children:[o.jsx(ut,{children:o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:q(U,"lead_name")}),q(U,"lead_description")&&o.jsx("div",{className:"text-sm text-muted-foreground truncate max-w-xs",children:q(U,"lead_description")})]})}),o.jsx(ut,{children:N?q(N,"user_name"):n("leads.unknown")}),o.jsx(ut,{children:z?q(z,"user_name"):n("leads.unknown")}),o.jsx(ut,{children:(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="manager"?o.jsxs(ze,{value:U.assigned_to||"unassigned",onValueChange:H=>ne(U.lead_id,H==="unassigned"?"":H),children:[o.jsx(Ue,{className:"w-full h-8",children:o.jsx(We,{placeholder:n("leads.selectAssignee","Select assignee")})}),o.jsxs(Be,{children:[o.jsx(ae,{value:"unassigned",children:n("common.all","Unassigned")}),c.filter(H=>["employee","admin","manager","team_leader"].includes(H.user_role)&&H.auth_user_id).map(H=>o.jsx(ae,{value:H.auth_user_id,children:q(H,"user_name")},H.user_id))]})]}):A?q(A,"user_name"):n("common.all","Unassigned")}),o.jsx(ut,{children:U.created_date?new Date(U.created_date).toLocaleDateString():n("leads.notSet")}),o.jsx(ut,{children:G?q(G,"stage_name"):n("leads.unknown")}),o.jsx(ut,{children:o.jsx(Y,{variant:"ghost",size:"sm",children:n("common.view")})})]},U.lead_id)})})]})})]})]})]})}function pB({task:t,assignedUser:e,stages:r=[],onDelete:n,onClick:s,onDragStart:a,onStageChange:i,isDragging:l=!1}){var g,w;const{t:c}=gt(),u=uo(),d=x=>x?new Date(x).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Not set",h=x=>{switch(x){case"done":return o.jsx(dd,{className:"h-3 w-3 text-green-500"});case"in_progress":return o.jsx(Uo,{className:"h-3 w-3 text-blue-500"});case"todo":default:return o.jsx($I,{className:"h-3 w-3 text-gray-500"})}},m=x=>{switch(x){case"done":return"border-l-green-500 rtl:border-r-green-500";case"in_progress":return"border-l-blue-500 rtl:border-r-blue-500";case"todo":default:return"border-l-gray-500 rtl:border-r-gray-500"}},p=x=>{if(!x)return null;const y=new Date,b=(new Date(x).getTime()-y.getTime())/(1e3*60*60);return b<0?"overdue":b<24?"urgent":b<72?"soon":null},v=x=>{switch(p(x)){case"overdue":return"border-destructive ring-1 ring-destructive";case"urgent":return"border-orange-500 ring-1 ring-orange-500";case"soon":return"border-yellow-500";default:return""}};return o.jsxs(pe,{className:J("group relative hover:shadow-lg transition-all duration-200","border-l-4 rtl:border-l-0 rtl:border-r-4",u?"w-full":"w-[280px] h-[180px]",m(t.task_status),v(t.due_date),l&&"opacity-50 rotate-2 scale-105"),draggable:!!a,onDragStart:x=>{a&&(x.dataTransfer.effectAllowed="move",x.dataTransfer.setData("text/plain",t.task_id.toString()),a(t.task_id))},children:[o.jsx($e,{className:"pb-3 px-4 pt-4 cursor-pointer",onClick:s,children:o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-base mb-1 truncate group-hover:text-primary transition-colors",children:t.task_name}),t.description&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:t.description})]}),n&&o.jsxs(ho,{children:[o.jsx(Tc,{asChild:!0,onClick:x=>x.stopPropagation(),children:o.jsx(Y,{variant:"ghost",size:"sm",className:J("h-8 w-8 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10",u?"opacity-100":"opacity-0 group-hover:opacity-100 transition-opacity"),children:o.jsx(an,{className:"h-4 w-4"})})}),o.jsxs(ca,{onClick:x=>x.stopPropagation(),children:[o.jsxs(ua,{children:[o.jsx(ha,{children:"Delete Task"}),o.jsxs(fa,{children:['Are you sure you want to delete "',t.task_name,'"?']})]}),o.jsxs(da,{children:[o.jsx(pa,{children:"Cancel"}),o.jsx(ma,{onClick:x=>{x.stopPropagation(),n(t.task_id)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})]})}),o.jsxs(_e,{className:"px-4 pb-3 space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-start gap-2",children:[o.jsx("div",{className:"space-y-1.5 flex-1 min-w-0",children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Ys,{className:"h-3 w-3 text-muted-foreground flex-shrink-0"}),o.jsx("p",{className:"text-xs font-medium truncate",children:e?q(e,"user_name"):c("common.all","Unassigned")})]})}),o.jsx("div",{children:o.jsxs("div",{className:"flex items-center gap-1",children:[h(t.task_status),o.jsx("span",{className:"text-xs font-medium capitalize",children:((g=t.task_status)==null?void 0:g.replace("_"," "))||"Todo"})]})})]}),u&&i&&o.jsx("div",{className:"pt-1",children:o.jsxs(ze,{value:((w=t.stage_id)==null?void 0:w.toString())||"",onValueChange:x=>i(t.task_id,parseInt(x)),children:[o.jsx(Ue,{className:"h-7 text-xs",children:o.jsx(We,{placeholder:c("tasks.selectStage","Select stage")})}),o.jsx(Be,{children:r.map(x=>o.jsx(ae,{value:x.stage_id.toString(),children:q(x,"stage_name")},x.stage_id))})]})}),t.due_date&&o.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-muted-foreground pt-1 border-t",children:[o.jsx(dc,{className:"h-3 w-3 flex-shrink-0"}),o.jsxs("span",{children:["Due: ",d(t.due_date)]})]})]})]})}function gB(){var Pe;fn();const{hasRole:t,user:e,loading:r}=St(),{t:n}=gt(),s=uo(),[a,i]=f.useState(null),[l,c]=f.useState("kanban");f.useState(!1);const u=W=>{switch(W==null?void 0:W.toLowerCase()){case"done":case"completed":return"default";case"in_progress":return"secondary";case"pending":case"todo":return"outline";default:return"secondary"}};f.useState(""),f.useState(null),f.useState(""),f.useState(null);const[d,h]=f.useState(null),[m,p]=f.useState(!1),[v,g]=f.useState({task_name:"",description:"",assigned_to:"",task_status:"todo",due_date:"",stage_id:""}),[w,x]=f.useState(""),[y,_]=f.useState("all"),[b,j]=f.useState("all"),[P,S]=f.useState({from:void 0,to:void 0}),{data:k=[],isLoading:C,error:E}=vU(),{data:M=[],isLoading:R,error:X}=pU(),{data:O=[],isLoading:se,error:I}=yU(),F=f.useMemo(()=>k.filter(W=>{const ne=W.task_name.toLowerCase().includes(w.toLowerCase())||W.description&&W.description.toLowerCase().includes(w.toLowerCase()),V=y==="all"||W.task_status===y,he=b==="all"||W.assigned_to&&W.assigned_to.toString()===b;let Te=!0;if(P.from&&W.due_date){const qe=new Date(W.due_date),rt=new Date(P.from);rt.setHours(0,0,0,0);const it=new Date(qe);if(it.setHours(0,0,0,0),Te=it>=rt,Te&&P.to){const U=new Date(P.to);U.setHours(23,59,59,999),Te=it<=U}}else P.from&&!W.due_date&&(Te=!1);return ne&&V&&he&&Te}),[k,w,y,b,P]),T=C||R||se||r,B=(E==null?void 0:E.message)||(X==null?void 0:X.message)||(I==null?void 0:I.message)||null;console.log("[Tasks] Rendering. Auth state:",{user:e?{id:e.id,email:e.email,role:e.role}:null,authLoading:r,hasUser:!!e,loading:T,data:{tasks:k.length,users:M.length,stages:O.length}});const K=()=>{},L=async W=>{try{await Ds.delete(W),K()}catch(ne){console.error("Failed to delete task:",ne)}},ee=W=>{h(W)},ge=W=>{W.preventDefault(),W.dataTransfer.dropEffect="move"},we=async W=>{if(!d)return;const ne=k.find(V=>V.task_id===d);if(ne&&ne.stage_id!==W)try{await Ds.update(d,{stage_id:W}),K()}catch(V){console.error("Failed to update task stage:",V)}h(null)},Re=async(W,ne)=>{const V=k.find(he=>he.task_id===W);if(V&&V.stage_id!==ne)try{await Ds.update(W,{stage_id:ne}),K()}catch(he){console.error("Failed to update task stage:",he)}},Ce=async()=>{if(v.task_name.trim())try{const W=Wr({task_name:v.task_name.trim(),stage_id:v.stage_id?parseInt(v.stage_id):null,assigned_to:v.assigned_to?parseInt(v.assigned_to):null,task_status:v.task_status,due_date:v.due_date?new Date(v.due_date).toISOString():null,description:v.description.trim()||null,auth_user_id:(e==null?void 0:e.id)||null},{task_name:"task_name",description:"description"});await Ds.create(W),K(),g({task_name:"",description:"",assigned_to:"",task_status:"todo",due_date:"",stage_id:""}),p(!1)}catch(W){console.error("Failed to create task:",W)}},ie=!0;f.useEffect(()=>{if(O.length>0&&a===null){const W=O.find(ne=>ne.stage_id===5);W&&i(W.stage_id)}},[O,a,sn]);const be=O.filter(W=>[5,6,7,8].includes(W.stage_id)).sort((W,ne)=>sn()?ne.stage_id-W.stage_id:W.stage_id-ne.stage_id).map(W=>({id:W.stage_id,name:q(W,"stage_name"),color:W.color,count:k.filter(ne=>ne.stage_id===W.stage_id).length}));return T||r||!e?o.jsx("div",{className:"flex items-center justify-center flex-1",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:n("tasks.loading")})]})}):B?o.jsx("div",{className:"flex items-center justify-center flex-1",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-red-600",children:n("tasks.error")}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:B})]})}):o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n("tasks.title")}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"bg-muted p-1 rounded-lg flex items-center gap-1",children:[o.jsx(Y,{variant:l==="kanban"?"default":"ghost",size:"sm",onClick:()=>c("kanban"),className:"h-8 w-8 p-0","data-active":l==="kanban",children:o.jsx(Vg,{className:"h-4 w-4"})}),o.jsx(Y,{variant:l==="list"?"default":"ghost",size:"sm",onClick:()=>c("list"),className:"h-8 w-8 p-0","data-active":l==="list",children:o.jsx(Hg,{className:"h-4 w-4"})})]}),o.jsxs(Y,{onClick:()=>p(!0),children:[o.jsx(It,{className:"mr-2 h-4 w-4"})," ",n("tasks.addNewTask")]})]})]}),o.jsx(Uv,{onSearch:x,onFilterStatus:_,onFilterAssignee:j,onFilterDateRange:S,users:M,statuses:[{value:"todo",label:n("tasks.todo")},{value:"in_progress",label:n("tasks.inProgress")},{value:"done",label:n("tasks.done")}]}),l==="kanban"?o.jsxs(Bv,{stages:be,currentStageId:a||((Pe=be[0])==null?void 0:Pe.id),onStageChange:i,children:[o.jsx(At,{open:m,onOpenChange:p,children:o.jsxs(Et,{className:"w-[95vw] sm:w-full sm:max-w-[500px] max-h-[85vh] overflow-y-auto",children:[o.jsxs(Pt,{children:[o.jsx(Tt,{children:n("tasks.createTask")}),o.jsx(Kt,{children:n("tasks.createTaskDesc")})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"text-sm font-medium",children:[n("tasks.taskName")," *"]}),o.jsx(ke,{value:v.task_name,onChange:W=>g(ne=>({...ne,task_name:W.target.value})),placeholder:n("tasks.taskNamePlaceholder")})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("tasks.description")}),o.jsx(Ur,{value:v.description,onChange:W=>g(ne=>({...ne,description:W.target.value})),placeholder:n("tasks.descriptionPlaceholder"),rows:3})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("tasks.selectUser")}),o.jsxs(ze,{value:v.assigned_to,onValueChange:W=>g(ne=>({...ne,assigned_to:W})),children:[o.jsx(Ue,{children:o.jsx(We,{placeholder:n("tasks.selectUser")})}),o.jsx(Be,{children:M.map(W=>o.jsx(ae,{value:W.user_id.toString(),children:q(W,"user_name")},W.user_id))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("tasks.selectStage")}),o.jsxs(ze,{value:v.stage_id,onValueChange:W=>g(ne=>({...ne,stage_id:W})),children:[o.jsx(Ue,{children:o.jsx(We,{placeholder:n("tasks.selectStage")})}),o.jsx(Be,{children:O.filter(W=>["New","In Progress","Overdue","Completed"].includes(W.stage_name)).map(W=>o.jsx(ae,{value:W.stage_id.toString(),children:q(W,"stage_name")},W.stage_id))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("tasks.selectStatus")}),o.jsxs(ze,{value:v.task_status,onValueChange:W=>g(ne=>({...ne,task_status:W})),children:[o.jsx(Ue,{children:o.jsx(We,{placeholder:n("tasks.selectStatus")})}),o.jsxs(Be,{children:[o.jsx(ae,{value:"todo",children:n("tasks.todo")}),o.jsx(ae,{value:"in_progress",children:n("tasks.inProgress")}),o.jsx(ae,{value:"done",children:n("tasks.done")})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("tasks.dueDate")}),o.jsx(ke,{type:"date",value:v.due_date,onChange:W=>g(ne=>({...ne,due_date:W.target.value}))})]})]}),o.jsxs(rr,{children:[o.jsx(Y,{variant:"outline",onClick:()=>p(!1),children:n("buttons.cancel")}),o.jsxs(Y,{onClick:Ce,disabled:!v.task_name.trim(),children:[o.jsx(Ba,{className:"h-4 w-4 mr-2"}),n("tasks.createTask")]})]})]})}),o.jsx("div",{className:"flex gap-6 pb-6 overflow-x-auto scrollbar-hide max-w-full pl-6 rtl:pr-6 rtl:pl-0",children:O.filter(W=>[5,6,7,8].includes(W.stage_id)).sort((W,ne)=>W.stage_id-ne.stage_id).filter(W=>{var ne;return s?W.stage_id===(a||((ne=be[0])==null?void 0:ne.id)):!0}).map((W,ne)=>{var he,Te;const V=F.filter(qe=>qe.stage_id===W.stage_id);return o.jsxs("div",{className:J("flex-shrink-0 animate-fade-in",s?"w-full":"w-[300px]"),style:{animationDelay:`${ne*.1}s`},onDragOver:ge,onDrop:()=>we(W.stage_id),children:[o.jsx("div",{className:J("rounded-xl bg-muted/30 backdrop-blur p-4 mb-5 shadow-soft hidden md:block",W.color||"border-l-4 border-primary/50"),children:o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Wg,{className:"h-4 w-4 text-muted-foreground cursor-move"}),o.jsx("h2",{className:"font-bold text-base",children:q(W,"stage_name")})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("span",{className:"text-sm font-bold px-3 py-1 rounded-full bg-background shadow-sm",children:V.length})})]})}),o.jsxs("div",{className:"space-y-4 max-h-[calc(100vh-300px)] overflow-y-auto pr-2 custom-scrollbar",children:[((he=O.sort((qe,rt)=>(qe.stager_order_index||0)-(rt.stager_order_index||0))[0])==null?void 0:he.stage_id)===W.stage_id&&o.jsx("div",{className:"mb-4",children:o.jsx(pe,{className:J("group relative hover:shadow-lg transition-all duration-200 cursor-pointer","border-l-4 border-l-gray-300 rtl:border-l-0 rtl:border-r-4 rtl:border-r-gray-300","flex items-center justify-center bg-muted/20",s?"w-full h-[100px]":"w-[280px] h-[120px]"),onClick:()=>p(!0),children:o.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[o.jsx(It,{className:"h-8 w-8"}),o.jsx("span",{className:"text-sm font-medium",children:n("tasks.addNewTask")})]})})}),V.map(qe=>{const rt=M.find(it=>it.user_id===qe.assigned_to);return o.jsx("div",{draggable:ie,onDragStart:()=>ee(qe.task_id),className:"cursor-move",children:o.jsx(pB,{task:qe,assignedUser:rt||null,stages:O,onDelete:()=>L(qe.task_id),onClick:()=>{console.log("Task clicked:",qe.task_id)},onDragStart:ee,onStageChange:Re,isDragging:d===qe.task_id})},qe.task_id)}),((Te=O.sort((qe,rt)=>(qe.stager_order_index||0)-(rt.stager_order_index||0))[0])==null?void 0:Te.stage_id)!==W.stage_id&&o.jsx("div",{className:"mt-2",children:o.jsxs(Y,{variant:"outline",size:"sm",className:"w-full h-12 border-dashed text-muted-foreground hover:text-foreground",onClick:()=>p(!0),children:[o.jsx(It,{className:"h-4 w-4 mr-2"}),n("tasks.addTask")]})})]})]},W.stage_id)})})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("h2",{className:"text-lg font-semibold",children:[n("tasks.allTasks")," (",k.length,")"]}),o.jsx(At,{open:m,onOpenChange:p,children:o.jsxs(Et,{className:"w-[95vw] sm:w-full sm:max-w-[500px] max-h-[85vh] overflow-y-auto",children:[o.jsxs(Pt,{children:[o.jsx(Tt,{children:n("tasks.createTask")}),o.jsx(Kt,{children:n("tasks.createTaskDesc")})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"text-sm font-medium",children:[n("tasks.taskName")," *"]}),o.jsx(ke,{value:v.task_name,onChange:W=>g(ne=>({...ne,task_name:W.target.value})),placeholder:n("tasks.taskNamePlaceholder")})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("tasks.description")}),o.jsx(Ur,{value:v.description,onChange:W=>g(ne=>({...ne,description:W.target.value})),placeholder:n("tasks.descriptionPlaceholder"),rows:3})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("tasks.selectUser")}),o.jsxs(ze,{value:v.assigned_to,onValueChange:W=>g(ne=>({...ne,assigned_to:W})),children:[o.jsx(Ue,{children:o.jsx(We,{placeholder:n("tasks.selectUser")})}),o.jsx(Be,{children:M.map(W=>o.jsx(ae,{value:W.user_id.toString(),children:q(W,"user_name")},W.user_id))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("tasks.selectStage")}),o.jsxs(ze,{value:v.stage_id,onValueChange:W=>g(ne=>({...ne,stage_id:W})),children:[o.jsx(Ue,{children:o.jsx(We,{placeholder:n("tasks.selectStage")})}),o.jsx(Be,{children:O.map(W=>o.jsx(ae,{value:W.stage_id.toString(),children:q(W,"stage_name")},W.stage_id))})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("tasks.selectStatus")}),o.jsxs(ze,{value:v.task_status,onValueChange:W=>g(ne=>({...ne,task_status:W})),children:[o.jsx(Ue,{children:o.jsx(We,{placeholder:n("tasks.selectStatus")})}),o.jsxs(Be,{children:[o.jsx(ae,{value:"todo",children:n("tasks.todo")}),o.jsx(ae,{value:"in_progress",children:n("tasks.inProgress")}),o.jsx(ae,{value:"done",children:n("tasks.done")})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("tasks.dueDate")}),o.jsx(ke,{type:"date",value:v.due_date,onChange:W=>g(ne=>({...ne,due_date:W.target.value}))})]})]})]}),o.jsxs(rr,{children:[o.jsx(Y,{variant:"outline",onClick:()=>p(!1),children:n("buttons.cancel")}),o.jsxs(Y,{onClick:Ce,disabled:!v.task_name.trim(),children:[o.jsx(Ba,{className:"h-4 w-4 mr-2"}),n("tasks.createTask")]})]})]})})]}),o.jsx(pe,{className:"max-h-[calc(100vh-300px)] flex flex-col",children:o.jsx(_e,{className:"p-0 flex-1 overflow-y-auto",children:o.jsxs(ph,{children:[o.jsx(gh,{children:o.jsxs(Rn,{children:[o.jsx(_t,{children:n("tasks.taskName")}),o.jsx(_t,{children:n("tasks.assignedTo")}),o.jsx(_t,{children:n("tasks.status")}),o.jsx(_t,{children:n("tasks.dueDate")}),o.jsx(_t,{children:n("tasks.stage")}),o.jsx(_t,{className:"w-[100px]",children:n("common.actions")})]})}),o.jsx(vh,{children:k.length===0?o.jsx(Rn,{children:o.jsx(ut,{colSpan:6,className:"text-center py-12",children:o.jsx("div",{className:"text-muted-foreground",children:n("tasks.noTasksYet")})})}):k.map(W=>{const ne=M.find(he=>he.user_id===W.assigned_to),V=O.find(he=>he.stage_id===W.stage_id);return o.jsxs(Rn,{className:"cursor-pointer hover:bg-muted/50",children:[o.jsx(ut,{children:o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:W.task_name}),W.description&&o.jsx("div",{className:"text-sm text-muted-foreground truncate max-w-xs",children:W.description})]})}),o.jsx(ut,{children:ne?q(ne,"user_name"):n("common.all","Unassigned")}),o.jsx(ut,{children:o.jsx(Fe,{variant:u(W.task_status),children:W.task_status||n("leads.unknown")})}),o.jsx(ut,{children:W.due_date?new Date(W.due_date).toLocaleDateString():n("leads.notSet")}),o.jsx(ut,{children:V?q(V,"stage_name"):n("leads.unknown")}),o.jsx(ut,{children:o.jsx(Y,{variant:"ghost",size:"sm",children:n("common.view")})})]},W.task_id)})})]})})})]})]})}function vB(){const[t,e]=f.useState([]),[r,n]=f.useState([]),[s,a]=f.useState(!0),[i,l]=f.useState(null),[c,u]=f.useState(""),[d,h]=f.useState("all"),[m,p]=f.useState("all"),[v,g]=f.useState(!1),[w,x]=f.useState(null),[y,_]=f.useState(!1),[b,j]=f.useState({subject:"",description:"",priority:"medium",ticket_type:"request",assigned_to:""}),[P,S]=f.useState(""),[k,C]=f.useState(!1),{user:E,loading:M}=St(),{t:R}=gt();f.useEffect(()=>{E&&!M&&X()},[E,M]);const X=async()=>{try{a(!0),l(null);const[L,ee]=await Promise.all([Nf.getAll().catch(ge=>(console.error("[Tickets] Error fetching tickets:",ge),[])),$r.getAll().catch(ge=>(console.error("[Tickets] Error fetching users:",ge),[]))]);e(L),n(ee)}catch(L){console.error("[Tickets] Failed to load data:",L),l(L.message||R("common.error"))}finally{a(!1)}},O=L=>{if(!L)return R("leads.unknown");const ee=r.find(ge=>ge.user_id===L);return ee?q(ee,"user_name"):R("leads.unknown")},se=L=>{switch(L==null?void 0:L.toLowerCase()){case"open":return"destructive";case"in_progress":return"default";case"resolved":return"secondary";case"closed":return"outline";default:return"secondary"}},I=L=>{switch(L==null?void 0:L.toLowerCase()){case"urgent":return"destructive";case"high":return"default";case"medium":return"secondary";case"low":return"outline";default:return"secondary"}},F=async L=>{var ee;if(L.preventDefault(),!(k||!E)){S(""),C(!0);try{const ge={subject:b.subject,description:b.description||null,priority:b.priority,ticket_type:b.ticket_type,status:"open",created_by:((ee=E.profile)==null?void 0:ee.user_id)||null,assigned_to:b.assigned_to?parseInt(b.assigned_to):null,auth_user_id:E.id,resolved_date:null,closed_at:null,closed_by:null,room_id:null,task_id:null};await Nf.create(ge),j({subject:"",description:"",priority:"medium",ticket_type:"request",assigned_to:""}),g(!1),X()}catch(ge){S(ge.message||R("tickets.createError"))}finally{C(!1)}}},T=L=>{x(L),_(!0)},B=async L=>{if(confirm(R("tickets.deleteConfirmation",{name:"this ticket"})))try{await Nf.delete(L),X()}catch(ee){alert(`${R("tickets.deleteError")}: ${ee.message}`)}},K=t.filter(L=>{var Re,Ce;const ee=((Re=L.subject)==null?void 0:Re.toLowerCase().includes(c.toLowerCase()))||((Ce=L.description)==null?void 0:Ce.toLowerCase().includes(c.toLowerCase()))||O(L.assigned_to).toLowerCase().includes(c.toLowerCase()),ge=d==="all"||L.status===d,we=m==="all"||L.priority===m;return ee&&ge&&we});return s||M||!E?o.jsx("div",{className:"flex items-center justify-center flex-1",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:R("tickets.loading")})]})}):i?o.jsx("div",{className:"flex items-center justify-center flex-1",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-red-600",children:R("common.error")}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:i}),o.jsx(Y,{onClick:X,className:"mt-4",children:R("dashboard.retry")})]})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold tracking-tight",children:R("tickets.title")}),o.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:R("tickets.subtitle")})]}),o.jsxs(At,{open:v,onOpenChange:g,children:[o.jsx(za,{asChild:!0,children:o.jsxs(Y,{size:"lg",className:"shadow-lg hover:shadow-xl transition-all",children:[o.jsx(It,{className:"h-5 w-5 mr-2"}),R("tickets.newTicket")]})}),o.jsxs(Et,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[o.jsxs(Pt,{children:[o.jsx(Tt,{children:R("tickets.createNewTicket")}),o.jsx(Kt,{children:R("tickets.createTicketDesc")})]}),o.jsxs("form",{onSubmit:F,className:"space-y-4",children:[P&&o.jsx(ji,{variant:"destructive",children:o.jsx(Si,{children:P})}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(le,{htmlFor:"subject",children:[R("tickets.subject")," *"]}),o.jsx(ke,{id:"subject",value:b.subject,onChange:L=>j(ee=>({...ee,subject:L.target.value})),placeholder:R("tickets.subjectPlaceholder"),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{htmlFor:"description",children:R("tickets.description")}),o.jsx(Ur,{id:"description",value:b.description,onChange:L=>j(ee=>({...ee,description:L.target.value})),placeholder:R("tickets.descriptionPlaceholder"),rows:3})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(le,{htmlFor:"priority",children:[R("tickets.priority")," *"]}),o.jsxs(ze,{value:b.priority,onValueChange:L=>j(ee=>({...ee,priority:L})),children:[o.jsx(Ue,{children:o.jsx(We,{})}),o.jsxs(Be,{children:[o.jsx(ae,{value:"low",children:R("tickets.priorityLow")}),o.jsx(ae,{value:"medium",children:R("tickets.priorityMedium")}),o.jsx(ae,{value:"high",children:R("tickets.priorityHigh")}),o.jsx(ae,{value:"urgent",children:R("tickets.priorityUrgent")})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(le,{htmlFor:"ticket_type",children:[R("tickets.ticketType")," *"]}),o.jsxs(ze,{value:b.ticket_type,onValueChange:L=>j(ee=>({...ee,ticket_type:L})),children:[o.jsx(Ue,{children:o.jsx(We,{})}),o.jsxs(Be,{children:[o.jsx(ae,{value:"request",children:R("tickets.typeRequest")}),o.jsx(ae,{value:"follow_up",children:R("tickets.typeFollowUp")}),o.jsx(ae,{value:"issue",children:R("tickets.typeIssue")}),o.jsx(ae,{value:"internal_task",children:R("tickets.typeInternalTask")})]})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{htmlFor:"assigned_to",children:R("tickets.assignTo")}),o.jsxs(ze,{value:b.assigned_to,onValueChange:L=>j(ee=>({...ee,assigned_to:L})),children:[o.jsx(Ue,{children:o.jsx(We,{placeholder:R("tickets.selectAssignee")})}),o.jsx(Be,{children:r.map(L=>o.jsx(ae,{value:L.user_id.toString(),children:q(L,"user_name")},L.user_id))})]})]}),o.jsxs(rr,{className:"flex flex-col-reverse sm:flex-row gap-2",children:[o.jsx(Y,{type:"button",variant:"outline",onClick:()=>g(!1),className:"w-full sm:w-auto",children:R("buttons.cancel")}),o.jsx(Y,{type:"submit",disabled:k||!b.subject.trim(),className:"w-full sm:w-auto",children:R(k?"tickets.creatingTicket":"tickets.createTicket")})]})]})]})]}),o.jsx(At,{open:y,onOpenChange:_,children:o.jsxs(Et,{className:"w-[95vw] max-w-[700px] max-h-[90vh] overflow-y-auto p-4 sm:p-6",children:[o.jsxs(Pt,{className:"space-y-3",children:[o.jsx(Tt,{className:"text-lg sm:text-xl leading-tight",children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[o.jsx("span",{className:"break-words",children:w==null?void 0:w.subject}),o.jsx(Fe,{variant:se(w==null?void 0:w.status),className:"self-start sm:self-center shrink-0",children:(w==null?void 0:w.status)||R("leads.unknown")})]})}),o.jsxs(Kt,{className:"text-sm",children:[R("tickets.ticketId"),": #",w==null?void 0:w.ticket_id]})]}),w&&o.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium",children:R("tickets.priority")}),o.jsx("div",{className:"mt-1",children:o.jsx(Fe,{variant:I(w.priority),className:"text-xs",children:w.priority||R("leads.unknown")})})]}),o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium",children:R("tickets.ticketType")}),o.jsx("div",{className:"mt-1",children:o.jsx(Fe,{variant:"outline",className:"text-xs",children:w.ticket_type||R("leads.unknown")})})]})]}),o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium",children:R("tickets.assignedTo")}),o.jsx("div",{className:"mt-1 text-sm break-words",children:O(w.assigned_to)})]}),o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium",children:R("tickets.createdDate")}),o.jsx("div",{className:"mt-1 text-sm",children:w.created_date?new Date(w.created_date).toLocaleString():"N/A"})]})]}),w.description&&o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium",children:R("tickets.description")}),o.jsx("div",{className:"mt-2 p-3 bg-muted rounded-md text-sm whitespace-pre-wrap break-words",children:w.description})]}),o.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium",children:R("tickets.createdBy")}),o.jsx("div",{className:"mt-1 text-sm break-words",children:O(w.created_by)})]}),w.resolved_date&&o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium",children:R("tickets.resolvedDate")}),o.jsx("div",{className:"mt-1 text-sm",children:new Date(w.resolved_date).toLocaleString()})]}),w.closed_at&&o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium",children:R("tickets.closedDate")}),o.jsx("div",{className:"mt-1 text-sm",children:new Date(w.closed_at).toLocaleString()})]})]})]}),o.jsx(rr,{className:"flex flex-col-reverse sm:flex-row gap-2 pt-4",children:o.jsx(Y,{variant:"outline",onClick:()=>_(!1),className:"w-full sm:w-auto",children:R("buttons.cancel")})})]})})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[o.jsxs("div",{className:"relative flex-1 max-w-sm",children:[o.jsx(Ja,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),o.jsx(ke,{placeholder:R("tickets.searchPlaceholder"),value:c,onChange:L=>u(L.target.value),className:"pl-10"})]}),o.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[o.jsxs(ze,{value:d,onValueChange:h,children:[o.jsx(Ue,{className:"w-full sm:w-[140px]",children:o.jsx(We,{})}),o.jsxs(Be,{children:[o.jsx(ae,{value:"all",children:R("tickets.allStatuses")}),o.jsx(ae,{value:"open",children:R("tickets.statusOpen")}),o.jsx(ae,{value:"in_progress",children:R("tickets.statusInProgress")}),o.jsx(ae,{value:"resolved",children:R("tickets.statusResolved")}),o.jsx(ae,{value:"closed",children:R("tickets.statusClosed")})]})]}),o.jsxs(ze,{value:m,onValueChange:p,children:[o.jsx(Ue,{className:"w-full sm:w-[140px]",children:o.jsx(We,{})}),o.jsxs(Be,{children:[o.jsx(ae,{value:"all",children:R("tickets.allPriorities")}),o.jsx(ae,{value:"low",children:R("tickets.priorityLow")}),o.jsx(ae,{value:"medium",children:R("tickets.priorityMedium")}),o.jsx(ae,{value:"high",children:R("tickets.priorityHigh")}),o.jsx(ae,{value:"urgent",children:R("tickets.priorityUrgent")})]})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("h2",{className:"text-lg font-semibold",children:[R("tickets.allTickets")," (",K.length,")"]})}),K.length===0?o.jsx(pe,{children:o.jsxs(_e,{className:"text-center py-12",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:R("tickets.noTicketsFound")}),o.jsx("p",{className:"text-muted-foreground",children:R(c?"tickets.noTicketsFoundDesc":"tickets.noTicketsYet")})]})}):o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:K.map(L=>o.jsxs(pe,{className:"cursor-pointer hover:shadow-lg transition-all duration-200",onClick:()=>T(L),children:[o.jsx($e,{className:"pb-3",children:o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-base truncate",children:L.subject}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["#",L.ticket_id]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Fe,{variant:se(L.status),className:"shrink-0",children:L.status||R("leads.unknown")}),(E==null?void 0:E.role)==="admin"&&o.jsx(Y,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:ee=>{ee.stopPropagation(),B(L.ticket_id)},children:o.jsx(an,{className:"h-4 w-4"})})]})]})}),o.jsxs(_e,{className:"pt-0",children:[L.description&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:L.description}),o.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[o.jsx("div",{className:"flex items-center gap-4",children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsxs("span",{className:"font-medium",children:[R("tickets.priority"),":"]}),o.jsx(Fe,{variant:I(L.priority),className:"text-xs",children:L.priority||R("leads.unknown")})]})}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{children:O(L.assigned_to)}),o.jsx("div",{children:L.created_date?new Date(L.created_date).toLocaleDateString():"N/A"})]})]})]})]},L.ticket_id))})]})]})}function yB({project:t,client:e,manager:r,stages:n,onDelete:s,onClick:a,onDragStart:i,onStageChange:l,isDragging:c=!1}){const{t:u}=gt(),d=uo(),h=t.progress||0,m=g=>g?new Date(g).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):u("leads.notSet","Not set"),p=g=>{if(!g)return null;const w=new Date,y=(new Date(g).getTime()-w.getTime())/(1e3*60*60);return y<0?"overdue":y<24?"urgent":y<72?"soon":null},v=g=>{switch(p(g)){case"overdue":return"border-destructive ring-1 ring-destructive";case"urgent":return"border-orange-500 ring-1 ring-orange-500";case"soon":return"border-yellow-500";default:return""}};return o.jsxs(pe,{className:J("group relative hover:shadow-lg transition-all duration-200",d?"w-full border-l-4 border-l-blue-500 rtl:border-l-0 rtl:border-r-4 rtl:border-r-blue-500":"w-[280px] sm:w-[300px] border-l-4 rtl:border-l-0 rtl:border-r-4",!d&&(h===100?"border-l-green-500 rtl:border-r-green-500":"border-l-blue-500 rtl:border-r-blue-500"),v(t.end_date),c&&"opacity-50 rotate-2 scale-105"),draggable:!!i,onDragStart:g=>{i&&(g.dataTransfer.effectAllowed="move",g.dataTransfer.setData("text/plain",t.project_id.toString()),i(t.project_id))},children:[o.jsx($e,{className:"pb-3 px-4 pt-4 cursor-pointer",onClick:a,children:o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-base mb-1 truncate group-hover:text-primary transition-colors",children:q(t,"project_name")}),q(t,"project_description")&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:q(t,"project_description")})]}),s&&o.jsxs(ho,{children:[o.jsx(Tc,{asChild:!0,onClick:g=>g.stopPropagation(),children:o.jsx(Y,{variant:"ghost",size:"sm",className:J("h-8 w-8 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10",d?"opacity-100":"opacity-0 group-hover:opacity-100 transition-opacity"),children:o.jsx(an,{className:"h-4 w-4"})})}),o.jsxs(ca,{onClick:g=>g.stopPropagation(),children:[o.jsxs(ua,{children:[o.jsx(ha,{children:u("projects.deleteProject")}),o.jsx(fa,{children:u("projects.deleteConfirmation",{name:q(t,"project_name")})})]}),o.jsxs(da,{children:[o.jsx(pa,{children:u("buttons.cancel")}),o.jsx(ma,{onClick:g=>{g.stopPropagation(),s(t.project_id)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:u("buttons.delete")})]})]})]})]})}),o.jsxs(_e,{className:"px-4 pb-4 space-y-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[o.jsx("span",{children:u("projects.progress")}),o.jsxs("span",{className:"font-medium",children:[h,"%"]})]}),o.jsx(Zs,{value:h,className:"h-2"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e&&o.jsxs("div",{className:"flex items-start gap-1.5",children:[o.jsx(Qd,{className:"h-3.5 w-3.5 text-muted-foreground mt-0.5 flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Client"}),o.jsx("p",{className:"text-xs font-medium truncate",children:e.user_name})]})]}),o.jsxs("div",{className:"flex items-start gap-1.5",children:[o.jsx(Ys,{className:"h-3.5 w-3.5 text-muted-foreground mt-0.5 flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Manager"}),o.jsx("p",{className:"text-xs font-medium truncate",children:r?r.user_name:u("common.all","Unassigned")})]})]})]}),d&&l&&o.jsx("div",{className:"pt-1",children:o.jsxs(ze,{value:t.stage.toString(),onValueChange:g=>l(t.project_id,parseInt(g)),children:[o.jsx(Ue,{className:"h-7 text-xs",children:o.jsx(We,{placeholder:u("projects.selectStage","Select stage")})}),o.jsx(Be,{children:n.filter(g=>["New","In Progress","Overdue","Completed"].includes(g.stage_name)).map(g=>o.jsx(ae,{value:g.stage_id.toString(),children:q(g,"stage_name")},g.stage_id))})]})}),o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[o.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[o.jsx(dc,{className:"h-3.5 w-3.5"}),o.jsx("span",{children:m(t.created_date)})]}),h===100?o.jsx(Fe,{variant:"default",className:"bg-green-500 text-xs",children:"Completed"}):h>0?o.jsx(Fe,{variant:"default",className:"text-xs",children:"In Progress"}):o.jsx(Fe,{variant:"secondary",className:"text-xs",children:"Not Started"})]})]})]})}function xB(){var G,H,te,ve;const t=fn(),{hasRole:e,user:r}=St();io();const{t:n}=gt(),s=uo(),[a,i]=f.useState([]),[l,c]=f.useState([]),[u,d]=f.useState([]),[h,m]=f.useState([]),[p,v]=f.useState(!0);f.useState(!1),f.useState("");const[g,w]=f.useState(null),[x,y]=f.useState(""),[_,b]=f.useState(null),[j,P]=f.useState(null),[S,k]=f.useState(!1),[C,E]=f.useState(null),[M,R]=f.useState({project_name:"",project_description:"",client_id:"",progress:0,stage:"1"}),[X,O]=f.useState(!1),[se,I]=f.useState({project_name:"",project_description:"",client_id:""}),[F,T]=f.useState("kanban"),[B,K]=f.useState(""),[L,ee]=f.useState("all"),[ge,we]=f.useState("all"),[Re,Ce]=f.useState({from:void 0,to:void 0}),ie=f.useMemo(()=>a.filter($=>{const Q=($.project_name||"").toLowerCase().includes(B.toLowerCase())||($.project_description||"").toLowerCase().includes(B.toLowerCase());let ye=!0;L==="todo"?ye=($.progress||0)===0:L==="in_progress"?ye=($.progress||0)>0&&($.progress||0)<100:L==="done"&&(ye=($.progress||0)===100);const De=ge==="all"||$.created_by&&$.created_by.toString()===ge;let Xe=!0;if(Re.from&&$.end_date){const Qe=new Date($.end_date),Bt=new Date(Re.from);Bt.setHours(0,0,0,0);const Rt=new Date(Qe);if(Rt.setHours(0,0,0,0),Xe=Rt>=Bt,Xe&&Re.to){const Fn=new Date(Re.to);Fn.setHours(23,59,59,999),Xe=Rt<=Fn}}else Re.from&&!$.end_date&&(Xe=!1);return Q&&ye&&De&&Xe}),[a,B,L,ge,Re]);f.useEffect(()=>{be()},[]),f.useEffect(()=>{if(h.length>0&&C===null){const $=h.find(Q=>Q.stage_id===5);$&&E($.stage_id)}},[h,C]);const be=async()=>{try{v(!0);const[$,Q,ye,De]=await Promise.all([wn.getAll(),Sv.getAll(),$r.getAll(),kn.getGlobalStages()]);console.log("[Projects] Loaded data:",{projects:$.length,clients:Q.length,users:ye.length,stages:De.length}),console.log("[Projects] Projects data:",$),console.log("[Projects] Stages data:",De),i($),c(Q),d(ye),m(De)}catch($){console.error("Failed to load data:",$)}finally{v(!1)}},Pe=async $=>{if(x.trim())try{await kn.update($,{stage_name:x.trim()}),m(h.map(Q=>Q.stage_id===$?{...Q,stage_name:x.trim()}:Q)),w(null),y("")}catch(Q){console.error("Failed to update stage:",Q)}},W=async $=>{if(a.filter(ye=>ye.stage===$).length>0){b($);return}try{await kn.delete($),m(h.filter(ye=>ye.stage_id!==$))}catch(ye){console.error("Failed to delete stage:",ye)}},ne=async()=>{if(_)try{await kn.delete(_),m(h.filter($=>$.stage_id!==_)),b(null),be()}catch($){console.error("Failed to delete stage:",$)}},V=$=>{P($)},he=$=>{$.preventDefault(),$.dataTransfer.dropEffect="move"},Te=async $=>{if(!j)return;const Q=a.find(ye=>ye.project_id===j);if(Q&&Q.stage!==$)try{await wn.update(j,{stage:$}),i(a.map(ye=>ye.project_id===j?{...ye,stage:$}:ye))}catch(ye){console.error("Failed to update project stage:",ye)}P(null)},qe=async($,Q)=>{const ye=a.find(De=>De.project_id===$);if(ye&&ye.stage!==Q)try{await wn.update($,{stage:Q}),i(a.map(De=>De.project_id===$?{...De,stage:Q}:De))}catch(De){console.error("Failed to update project stage:",De)}},rt=async $=>{try{await wn.delete($),i(a.filter(Q=>Q.project_id!==$))}catch(Q){console.error("Failed to delete project:",Q)}},it=$=>{R(Q=>({...Q,stage:$.toString()})),k(!0)},U=async()=>{var $;if(M.project_name.trim())try{const Q=Wr({project_name:M.project_name.trim(),project_description:M.project_description.trim()||null,created_by:(($=r==null?void 0:r.profile)==null?void 0:$.user_id)||1,progress:M.progress,stage:parseInt(M.stage),end_date:null,auth_user_id:(r==null?void 0:r.id)||""},{project_name:"project_name",project_description:"project_description"}),ye=await wn.create(Q);i([...a,ye]),R({project_name:"",project_description:"",client_id:"",progress:0,stage:"1"}),k(!1)}catch(Q){console.error("Failed to create project:",Q)}},N=async()=>{var $;if(se.project_name.trim())try{const Q=Wr({project_name:se.project_name.trim(),project_description:se.project_description.trim()||null,created_by:(($=r==null?void 0:r.profile)==null?void 0:$.user_id)||1,progress:0,stage:1,end_date:null,auth_user_id:(r==null?void 0:r.id)||""},{project_name:"project_name",project_description:"project_description"}),ye=await wn.create(Q);i([...a,ye]),I({project_name:"",project_description:"",client_id:""}),O(!1)}catch(Q){console.error("Failed to create lead:",Q)}},z=h.filter($=>[5,6,7,8].includes($.stage_id)).sort(($,Q)=>sn()?Q.stage_id-$.stage_id:$.stage_id-Q.stage_id),A=z.sort(($,Q)=>sn()?Q.stage_id-$.stage_id:$.stage_id-Q.stage_id).map($=>({id:$.stage_id,name:q($,"stage_name"),color:$.color,count:a.filter(Q=>Q.stage===$.stage_id).length}));return p?o.jsx("div",{className:"flex items-center justify-center h-full py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):o.jsxs("div",{className:"space-y-8 h-screen",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n("projects.title")}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"bg-muted p-1 rounded-lg flex items-center gap-1",children:[o.jsx(Y,{variant:F==="kanban"?"default":"ghost",size:"sm",onClick:()=>T("kanban"),className:"h-8 w-8 p-0","data-active":F==="kanban",children:o.jsx(Vg,{className:"h-4 w-4"})}),o.jsx(Y,{variant:F==="list"?"default":"ghost",size:"sm",onClick:()=>T("list"),className:"h-8 w-8 p-0","data-active":F==="list",children:o.jsx(Hg,{className:"h-4 w-4"})})]}),o.jsxs(Y,{onClick:()=>O(!0),children:[o.jsx(It,{className:"mr-2 h-4 w-4"})," ",n("projects.newProject")]})]})]}),o.jsx(Uv,{onSearch:K,onFilterStatus:ee,onFilterAssignee:we,onFilterDateRange:Ce,users:u,statuses:[{value:"todo",label:"Not Started"},{value:"in_progress",label:"In Progress"},{value:"done",label:"Completed"}]}),F==="kanban"?o.jsxs(o.Fragment,{children:[o.jsx(At,{open:S,onOpenChange:k,children:o.jsxs(Et,{className:"w-[95vw] sm:w-full sm:max-w-[500px] max-h-[85vh] overflow-y-auto",children:[o.jsxs(Pt,{children:[o.jsx(Tt,{children:n("projects.createProject")}),o.jsx(Kt,{children:n("projects.createProjectDesc")})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"text-sm font-medium",children:[n("projects.projectName")," *"]}),o.jsx(ke,{value:M.project_name,onChange:$=>R(Q=>({...Q,project_name:$.target.value})),placeholder:n("projects.projectNamePlaceholder")})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("projects.description")}),o.jsx(Ur,{value:M.project_description,onChange:$=>R(Q=>({...Q,project_description:$.target.value})),placeholder:n("projects.descriptionPlaceholder"),rows:3})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("projects.client")}),o.jsxs(ze,{value:M.client_id,onValueChange:$=>R(Q=>({...Q,client_id:$})),children:[o.jsx(Ue,{children:o.jsx(We,{placeholder:n("projects.selectClient")})}),o.jsx(Be,{children:l.map($=>o.jsx(ae,{value:$.user_id.toString(),children:q($,"user_name")},$.user_id))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("projects.initialProgress")}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("input",{type:"range",min:"0",max:"100",value:M.progress,onChange:$=>R(Q=>({...Q,progress:parseInt($.target.value)})),className:"w-full h-1.5"}),o.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[o.jsx("span",{children:"0%"}),o.jsxs("span",{children:[M.progress,"%"]}),o.jsx("span",{children:"100%"})]})]})]})]}),o.jsxs(rr,{children:[o.jsx(Y,{variant:"outline",onClick:()=>k(!1),children:n("buttons.cancel")}),o.jsxs(Y,{onClick:U,disabled:!((G=M.project_name)!=null&&G.trim()),children:[o.jsx(Ba,{className:"h-4 w-4 mr-2"}),n("projects.createProject")]})]})]})}),o.jsxs(Bv,{stages:A,currentStageId:C||((H=A[0])==null?void 0:H.id),onStageChange:E,children:[o.jsx("div",{className:"flex gap-6 pb-6 overflow-x-auto scrollbar-hide max-w-full pl-6 rtl:pr-6 rtl:pl-0",children:z.sort(($,Q)=>$.stage_id-Q.stage_id).filter($=>{var ye;return window.innerWidth<1024?$.stage_id===(C||((ye=A[0])==null?void 0:ye.id)):!0}).map(($,Q)=>{var De,Xe;const ye=ie.filter(Qe=>Qe.stage===$.stage_id);return console.log(`[Projects] Stage ${$.stage_name} (${$.stage_id}): ${ye.length} projects`),console.log("[Projects] Stage projects:",ye),o.jsxs("div",{className:J("flex-shrink-0 animate-fade-in h-[calc(100vh-300px)]",s?"w-full":"w-[280px] sm:w-[300px]"),style:{animationDelay:`${Q*.1}s`},onDragOver:he,onDrop:()=>Te($.stage_id),children:[!s&&o.jsx("div",{className:J("rounded-xl bg-muted/30 backdrop-blur p-4 mb-5 shadow-soft",$.color||"border-l-4 border-primary/50"),children:o.jsx("div",{className:"flex items-center justify-between mb-2",children:g===$.stage_id?o.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[o.jsx(ke,{value:x,onChange:Qe=>y(Qe.target.value),onKeyDown:Qe=>{Qe.key==="Enter"&&Pe($.stage_id),Qe.key==="Escape"&&(w(null),y(""))},className:"h-8 text-sm font-bold",autoFocus:!0}),o.jsx(Y,{size:"sm",variant:"ghost",onClick:()=>Pe($.stage_id),className:"h-8 w-8 p-0",children:""})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Wg,{className:"h-4 w-4 text-muted-foreground cursor-move"}),o.jsx("h2",{className:"font-bold text-base",children:q($,"stage_name")})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-bold px-3 py-1 rounded-full bg-background shadow-sm",children:ye.length}),o.jsxs(o.Fragment,{children:[o.jsx(Y,{size:"sm",variant:"ghost",onClick:()=>{w($.stage_id),y(q($,"stage_name"))},className:"h-6 w-6 p-0",title:n("buttons.edit"),children:o.jsx(OS,{className:"h-3 w-3"})}),o.jsx(Y,{size:"sm",variant:"ghost",onClick:()=>W($.stage_id),className:"h-6 w-6 p-0 text-destructive",title:n("buttons.delete"),children:o.jsx(an,{className:"h-3 w-3"})})]})]})]})})}),o.jsxs("div",{className:"space-y-4 max-h-[calc(100vh-300px)] overflow-y-auto scrollbar-hide",children:[((De=h.sort((Qe,Bt)=>(Qe.stager_order_index||0)-(Bt.stager_order_index||0))[0])==null?void 0:De.stage_id)===$.stage_id&&o.jsx("div",{className:"mb-4",children:o.jsx(pe,{className:J("group relative hover:shadow-lg transition-all duration-200 cursor-pointer","border-l-4 border-l-gray-300 rtl:border-l-0 rtl:border-r-4 rtl:border-r-gray-300","flex items-center justify-center bg-muted/20",s?"w-full h-[100px]":"w-[280px] sm:w-[300px] h-[120px]"),onClick:()=>it($.stage_id),children:o.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[o.jsx(It,{className:"h-8 w-8"}),o.jsx("span",{className:"text-sm font-medium",children:n("projects.addNewProjectCard")})]})})}),ye.map(Qe=>{const Bt=u.find(Rt=>Rt.auth_user_id===Qe.created_by);return o.jsx("div",{children:o.jsx(yB,{project:Qe,client:null,manager:Bt||null,stages:z,onDelete:()=>rt(Qe.project_id),onClick:()=>t(`/project/${Qe.project_id}`),onDragStart:V,onStageChange:qe,isDragging:j===Qe.project_id})},Qe.project_id)}),((Xe=h.sort((Qe,Bt)=>(Qe.stager_order_index||0)-(Bt.stager_order_index||0))[0])==null?void 0:Xe.stage_id)!==$.stage_id&&o.jsx("div",{className:"mt-2",children:o.jsxs(Y,{variant:"outline",size:"sm",className:"w-full h-12 border-dashed text-muted-foreground hover:text-foreground",onClick:()=>it($.stage_id),children:[o.jsx(It,{className:"h-4 w-4 mr-2"}),n("projects.addProject")]})})]})]},$.stage_id)})}),o.jsx(ho,{open:!!_,onOpenChange:()=>b(null),children:o.jsxs(ca,{children:[o.jsxs(ua,{children:[o.jsx(ha,{children:n("leads.deleteStage")}),o.jsx(fa,{children:n("leads.deleteStageConfirmation",{count:a.filter($=>$.stage===_).length})})]}),o.jsxs(da,{children:[o.jsx(pa,{children:n("buttons.cancel")}),o.jsx(ma,{onClick:ne,className:"bg-destructive text-destructive-foreground",children:n("buttons.delete")})]})]})})]})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("h2",{className:"text-lg font-semibold",children:[n("projects.title")," (",a.length,")"]}),o.jsx(At,{open:S,onOpenChange:k,children:o.jsxs(Et,{className:"w-[95vw] sm:w-full sm:max-w-[500px] max-h-[85vh] overflow-y-auto",children:[o.jsxs(Pt,{children:[o.jsx(Tt,{children:n("projects.createProject")}),o.jsx(Kt,{children:n("projects.createProjectDesc")})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"text-sm font-medium",children:[n("projects.projectName")," *"]}),o.jsx(ke,{value:M.project_name,onChange:$=>R(Q=>({...Q,project_name:$.target.value})),placeholder:n("projects.projectNamePlaceholder")})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("projects.description")}),o.jsx(Ur,{value:M.project_description,onChange:$=>R(Q=>({...Q,project_description:$.target.value})),placeholder:n("projects.descriptionPlaceholder"),rows:3})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("projects.client")}),o.jsxs(ze,{value:M.client_id,onValueChange:$=>R(Q=>({...Q,client_id:$})),children:[o.jsx(Ue,{children:o.jsx(We,{placeholder:n("projects.selectClient")})}),o.jsx(Be,{children:l.map($=>o.jsx(ae,{value:$.user_id.toString(),children:q($,"user_name")},$.user_id))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("projects.initialProgress")}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("input",{type:"range",min:"0",max:"100",value:M.progress,onChange:$=>R(Q=>({...Q,progress:parseInt($.target.value)})),className:"w-full h-1.5"}),o.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[o.jsx("span",{children:"0%"}),o.jsxs("span",{children:[M.progress,"%"]}),o.jsx("span",{children:"100%"})]})]})]})]}),o.jsxs(rr,{children:[o.jsx(Y,{variant:"outline",onClick:()=>k(!1),children:n("buttons.cancel")}),o.jsxs(Y,{onClick:U,disabled:!((te=M.project_name)!=null&&te.trim()),children:[o.jsx(Ba,{className:"h-4 w-4 mr-2"}),n("projects.createProject")]})]})]})})]}),o.jsxs(pe,{className:"max-h-[calc(100vh-300px)] flex flex-col",children:[o.jsx($e,{className:"flex-shrink-0",children:o.jsx(Je,{children:n("projects.title")})}),o.jsx(_e,{className:"flex-1 overflow-y-auto",children:o.jsxs(ph,{children:[o.jsx(gh,{children:o.jsxs(Rn,{children:[o.jsx(_t,{children:n("projects.projectName")}),o.jsx(_t,{children:n("projects.client")}),o.jsx(_t,{children:n("projects.progress")}),o.jsx(_t,{children:n("common.created")}),o.jsx(_t,{children:n("tasks.stage")}),o.jsx(_t,{className:"w-[100px]",children:n("common.actions")})]})}),o.jsx(vh,{children:a.length===0?o.jsx(Rn,{children:o.jsx(ut,{colSpan:6,className:"text-center py-12",children:o.jsx("div",{className:"text-muted-foreground",children:n("projects.noProjectsYet")})})}):a.map($=>{const Q=l.find(De=>De.auth_user_id===$.created_by),ye=h.find(De=>De.stage_id===$.stage);return o.jsxs(Rn,{className:"cursor-pointer hover:bg-muted/50",children:[o.jsx(ut,{children:o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:q($,"project_name")}),q($,"project_description")&&o.jsx("div",{className:"text-sm text-muted-foreground truncate max-w-xs",children:q($,"project_description")})]})}),o.jsx(ut,{children:Q?q(Q,"user_name"):n("common.all","Unassigned")}),o.jsx(ut,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Zs,{value:$.progress,className:"w-16"}),o.jsxs("span",{className:"text-sm",children:[$.progress,"%"]})]})}),o.jsx(ut,{children:$.created_date?new Date($.created_date).toLocaleDateString():n("leads.notSet")}),o.jsx(ut,{children:ye?q(ye,"stage_name"):n("leads.unknown")}),o.jsx(ut,{children:o.jsx(Y,{variant:"ghost",size:"sm",children:n("common.view")})})]},$.project_id)})})]})})]})]}),o.jsx(At,{open:X,onOpenChange:O,children:o.jsxs(Et,{className:"w-[95vw] sm:w-full sm:max-w-[500px] max-h-[85vh] overflow-y-auto",children:[o.jsxs(Pt,{children:[o.jsx(Tt,{children:n("projects.createProject")}),o.jsx(Kt,{children:n("projects.createProjectDesc")})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"text-sm font-medium",children:[n("projects.projectName")," *"]}),o.jsx(ke,{value:se.project_name,onChange:$=>I(Q=>({...Q,project_name:$.target.value})),placeholder:n("projects.projectNamePlaceholder")})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("projects.description")}),o.jsx(Ur,{value:se.project_description,onChange:$=>I(Q=>({...Q,project_description:$.target.value})),placeholder:n("projects.descriptionPlaceholder"),rows:3})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:n("projects.client")}),o.jsxs(ze,{value:se.client_id,onValueChange:$=>I(Q=>({...Q,client_id:$})),children:[o.jsx(Ue,{children:o.jsx(We,{placeholder:n("projects.selectClient")})}),o.jsx(Be,{children:l.map($=>o.jsx(ae,{value:$.user_id.toString(),children:q($,"user_name")},$.user_id))})]})]})]}),o.jsxs(rr,{children:[o.jsx(Y,{variant:"outline",onClick:()=>O(!1),children:n("buttons.cancel")}),o.jsxs(Y,{onClick:N,disabled:!((ve=se.project_name)!=null&&ve.trim()),children:[o.jsx(Ba,{className:"h-4 w-4 mr-2"}),n("projects.createProject")]})]})]})})]})}function wB(t,e){return f.useReducer((r,n)=>e[r][n]??r,t)}var zv="ScrollArea",[CC,wz]=yr(zv),[_B,Vr]=CC(zv),EC=f.forwardRef((t,e)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:a=600,...i}=t,[l,c]=f.useState(null),[u,d]=f.useState(null),[h,m]=f.useState(null),[p,v]=f.useState(null),[g,w]=f.useState(null),[x,y]=f.useState(0),[_,b]=f.useState(0),[j,P]=f.useState(!1),[S,k]=f.useState(!1),C=Ae(e,M=>c(M)),E=hc(s);return o.jsx(_B,{scope:r,type:n,dir:E,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:m,scrollbarX:p,onScrollbarXChange:v,scrollbarXEnabled:j,onScrollbarXEnabledChange:P,scrollbarY:g,onScrollbarYChange:w,scrollbarYEnabled:S,onScrollbarYEnabledChange:k,onCornerWidthChange:y,onCornerHeightChange:b,children:o.jsx(xe.div,{dir:E,...i,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":_+"px",...t.style}})})});EC.displayName=zv;var PC="ScrollAreaViewport",TC=f.forwardRef((t,e)=>{const{__scopeScrollArea:r,children:n,nonce:s,...a}=t,i=Vr(PC,r),l=f.useRef(null),c=Ae(e,l,i.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(xe.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t.style},children:o.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});TC.displayName=PC;var Ln="ScrollAreaScrollbar",Wv=f.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=Vr(Ln,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=s,l=t.orientation==="horizontal";return f.useEffect(()=>(l?a(!0):i(!0),()=>{l?a(!1):i(!1)}),[l,a,i]),s.type==="hover"?o.jsx(bB,{...n,ref:e,forceMount:r}):s.type==="scroll"?o.jsx(jB,{...n,ref:e,forceMount:r}):s.type==="auto"?o.jsx(RC,{...n,ref:e,forceMount:r}):s.type==="always"?o.jsx(Vv,{...n,ref:e}):null});Wv.displayName=Ln;var bB=f.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=Vr(Ln,t.__scopeScrollArea),[a,i]=f.useState(!1);return f.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),i(!0)},d=()=>{c=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),o.jsx(ar,{present:r||a,children:o.jsx(RC,{"data-state":a?"visible":"hidden",...n,ref:e})})}),jB=f.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=Vr(Ln,t.__scopeScrollArea),a=t.orientation==="horizontal",i=_h(()=>c("SCROLL_END"),100),[l,c]=wB("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),f.useEffect(()=>{const u=s.viewport,d=a?"scrollLeft":"scrollTop";if(u){let h=u[d];const m=()=>{const p=u[d];h!==p&&(c("SCROLL"),i()),h=p};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[s.viewport,a,c,i]),o.jsx(ar,{present:r||l!=="hidden",children:o.jsx(Vv,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:oe(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:oe(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),RC=f.forwardRef((t,e)=>{const r=Vr(Ln,t.__scopeScrollArea),{forceMount:n,...s}=t,[a,i]=f.useState(!1),l=t.orientation==="horizontal",c=_h(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;i(l?u:d)}},10);return Ei(r.viewport,c),Ei(r.content,c),o.jsx(ar,{present:n||a,children:o.jsx(Vv,{"data-state":a?"visible":"hidden",...s,ref:e})})}),Vv=f.forwardRef((t,e)=>{const{orientation:r="vertical",...n}=t,s=Vr(Ln,t.__scopeScrollArea),a=f.useRef(null),i=f.useRef(0),[l,c]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=IC(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:m=>i.current=m};function h(m,p){return PB(m,i.current,l,p)}return r==="horizontal"?o.jsx(SB,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollLeft,p=i0(m,l,s.dir);a.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=h(m,s.dir))}}):r==="vertical"?o.jsx(NB,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollTop,p=i0(m,l);a.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=h(m))}}):null}),SB=f.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...s}=t,a=Vr(Ln,t.__scopeScrollArea),[i,l]=f.useState(),c=f.useRef(null),u=Ae(e,c,a.onScrollbarXChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(DC,{"data-orientation":"horizontal",...s,ref:u,sizes:r,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":wh(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(a.viewport){const m=a.viewport.scrollLeft+d.deltaX;t.onWheelScroll(m),FC(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Cd(i.paddingLeft),paddingEnd:Cd(i.paddingRight)}})}})}),NB=f.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...s}=t,a=Vr(Ln,t.__scopeScrollArea),[i,l]=f.useState(),c=f.useRef(null),u=Ae(e,c,a.onScrollbarYChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(DC,{"data-orientation":"vertical",...s,ref:u,sizes:r,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":wh(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(a.viewport){const m=a.viewport.scrollTop+d.deltaY;t.onWheelScroll(m),FC(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Cd(i.paddingTop),paddingEnd:Cd(i.paddingBottom)}})}})}),[kB,OC]=CC(Ln),DC=f.forwardRef((t,e)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...m}=t,p=Vr(Ln,r),[v,g]=f.useState(null),w=Ae(e,C=>g(C)),x=f.useRef(null),y=f.useRef(""),_=p.viewport,b=n.content-n.viewport,j=Dt(d),P=Dt(c),S=_h(h,10);function k(C){if(x.current){const E=C.clientX-x.current.left,M=C.clientY-x.current.top;u({x:E,y:M})}}return f.useEffect(()=>{const C=E=>{const M=E.target;(v==null?void 0:v.contains(M))&&j(E,b)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[_,v,b,j]),f.useEffect(P,[n,P]),Ei(v,S),Ei(p.content,S),o.jsx(kB,{scope:r,scrollbar:v,hasThumb:s,onThumbChange:Dt(a),onThumbPointerUp:Dt(i),onThumbPositionChange:P,onThumbPointerDown:Dt(l),children:o.jsx(xe.div,{...m,ref:w,style:{position:"absolute",...m.style},onPointerDown:oe(t.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),x.current=v.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),k(C))}),onPointerMove:oe(t.onPointerMove,k),onPointerUp:oe(t.onPointerUp,C=>{const E=C.target;E.hasPointerCapture(C.pointerId)&&E.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=y.current,p.viewport&&(p.viewport.style.scrollBehavior=""),x.current=null})})})}),kd="ScrollAreaThumb",AC=f.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=OC(kd,t.__scopeScrollArea);return o.jsx(ar,{present:r||s.hasThumb,children:o.jsx(CB,{ref:e,...n})})}),CB=f.forwardRef((t,e)=>{const{__scopeScrollArea:r,style:n,...s}=t,a=Vr(kd,r),i=OC(kd,r),{onThumbPositionChange:l}=i,c=Ae(e,h=>i.onThumbChange(h)),u=f.useRef(void 0),d=_h(()=>{u.current&&(u.current(),u.current=void 0)},100);return f.useEffect(()=>{const h=a.viewport;if(h){const m=()=>{if(d(),!u.current){const p=TB(h,l);u.current=p,l()}};return l(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[a.viewport,d,l]),o.jsx(xe.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:oe(t.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),v=h.clientX-p.left,g=h.clientY-p.top;i.onThumbPointerDown({x:v,y:g})}),onPointerUp:oe(t.onPointerUp,i.onThumbPointerUp)})});AC.displayName=kd;var Hv="ScrollAreaCorner",MC=f.forwardRef((t,e)=>{const r=Vr(Hv,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?o.jsx(EB,{...t,ref:e}):null});MC.displayName=Hv;var EB=f.forwardRef((t,e)=>{const{__scopeScrollArea:r,...n}=t,s=Vr(Hv,r),[a,i]=f.useState(0),[l,c]=f.useState(0),u=!!(a&&l);return Ei(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),Ei(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),i(d)}),u?o.jsx(xe.div,{...n,ref:e,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Cd(t){return t?parseInt(t,10):0}function IC(t,e){const r=t/e;return isNaN(r)?0:r}function wh(t){const e=IC(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*e;return Math.max(n,18)}function PB(t,e,r,n="ltr"){const s=wh(r),a=s/2,i=e||a,l=s-i,c=r.scrollbar.paddingStart+i,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,h=n==="ltr"?[0,d]:[d*-1,0];return LC([c,u],h)(t)}function i0(t,e,r="ltr"){const n=wh(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-s,i=e.content-e.viewport,l=a-n,c=r==="ltr"?[0,i]:[i*-1,0],u=ip(t,c);return LC([0,i],[0,l])(u)}function LC(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function FC(t,e){return t>0&&t<e}var TB=(t,e=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function s(){const a={left:t.scrollLeft,top:t.scrollTop},i=r.left!==a.left,l=r.top!==a.top;(i||l)&&e(),r=a,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function _h(t,e){const r=Dt(t),n=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(n.current),[]),f.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,e)},[r,e])}function Ei(t,e){const r=Dt(e);jt(()=>{let n=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(t),()=>{window.cancelAnimationFrame(n),s.unobserve(t)}}},[t,r])}var $C=EC,RB=TC,OB=MC;const kr=f.forwardRef(({className:t,children:e,...r},n)=>o.jsxs($C,{ref:n,className:J("relative overflow-hidden",t),...r,children:[o.jsx(RB,{className:"h-full w-full rounded-[inherit]",children:e}),o.jsx(UC,{}),o.jsx(OB,{})]}));kr.displayName=$C.displayName;const UC=f.forwardRef(({className:t,orientation:e="vertical",...r},n)=>o.jsx(Wv,{ref:n,orientation:e,className:J("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:o.jsx(AC,{className:"relative flex-1 rounded-full bg-border"})}));UC.displayName=Wv.displayName;function DB(){return tj.useSyncExternalStore(AB,()=>!0,()=>!1)}function AB(){return()=>{}}var qv="Avatar",[MB,_z]=yr(qv),[IB,BC]=MB(qv),zC=f.forwardRef((t,e)=>{const{__scopeAvatar:r,...n}=t,[s,a]=f.useState("idle");return o.jsx(IB,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:o.jsx(xe.span,{...n,ref:e})})});zC.displayName=qv;var WC="AvatarImage",VC=f.forwardRef((t,e)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...a}=t,i=BC(WC,r),l=LB(n,a),c=Dt(u=>{s(u),i.onImageLoadingStatusChange(u)});return jt(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?o.jsx(xe.img,{...a,ref:e,src:n}):null});VC.displayName=WC;var HC="AvatarFallback",qC=f.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:n,...s}=t,a=BC(HC,r),[i,l]=f.useState(n===void 0);return f.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),i&&a.imageLoadingStatus!=="loaded"?o.jsx(xe.span,{...s,ref:e}):null});qC.displayName=HC;function l0(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function LB(t,{referrerPolicy:e,crossOrigin:r}){const n=DB(),s=f.useRef(null),a=n?(s.current||(s.current=new window.Image),s.current):null,[i,l]=f.useState(()=>l0(a,t));return jt(()=>{l(l0(a,t))},[a,t]),jt(()=>{const c=h=>()=>{l(h)};if(!a)return;const u=c("loaded"),d=c("error");return a.addEventListener("load",u),a.addEventListener("error",d),e&&(a.referrerPolicy=e),typeof r=="string"&&(a.crossOrigin=r),()=>{a.removeEventListener("load",u),a.removeEventListener("error",d)}},[a,r,e]),i}var KC=zC,GC=VC,YC=qC;const Vs=f.forwardRef(({className:t,...e},r)=>o.jsx(KC,{ref:r,className:J("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Vs.displayName=KC.displayName;const Wa=f.forwardRef(({className:t,...e},r)=>o.jsx(GC,{ref:r,className:J("aspect-square h-full w-full",t),...e}));Wa.displayName=GC.displayName;const Hs=f.forwardRef(({className:t,...e},r)=>o.jsx(YC,{ref:r,className:J("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Hs.displayName=YC.displayName;function FB(){const{user:t,createStaffUser:e,deleteUser:r,updateUserRole:n,updateUser:s}=St();io();const{t:a}=gt(),[i,l]=f.useState([]),[c,u]=f.useState(!0),[d,h]=f.useState(""),[m,p]=f.useState(!1),[v,g]=f.useState(""),[w,x]=f.useState(""),[y,_]=f.useState(""),[b,j]=f.useState("employee"),[P,S]=f.useState(""),[k,C]=f.useState(!1),[E,M]=f.useState("employees"),[R,X]=f.useState(!1),[O,se]=f.useState(null),[I,F]=f.useState(!1),[T,B]=f.useState({user_name:"",user_email:"",user_phone:"",user_role:""}),[K,L]=f.useState(!1),[ee,ge]=f.useState("");f.useEffect(()=>{we()},[]);const we=async()=>{try{u(!0);const V=await $r.getAll();l(V)}catch(V){console.error("Failed to load users:",V)}finally{u(!1)}},Re=i.filter(V=>{var N,z,A;const he=E==="employees",Te=E==="clients";if(he&&V.user_role==="client"||Te&&V.user_role!=="client")return!1;const qe=((N=q(V,"user_name"))==null?void 0:N.toLowerCase())||"",rt=((z=V.user_email)==null?void 0:z.toLowerCase())||"",it=((A=V.user_role)==null?void 0:A.toLowerCase())||"",U=d.toLowerCase();return qe.includes(U)||rt.includes(U)||it.includes(U)}),Ce=V=>{switch(V){case"admin":return"destructive";case"manager":return"default";case"employee":return"secondary";case"client":return"outline";default:return"secondary"}},ie=async V=>{if(V.preventDefault(),!k){S(""),C(!0);try{const he=Wr({user_name:v,user_email:w,user_role:b},{user_name:"user_name"});await e(w,y,{name:v,role:b,localizedData:he}),p(!1),g(""),x(""),_(""),j("employee"),we()}catch(he){S(he.message||a("users.addUserError"))}finally{C(!1)}}},be=async(V,he)=>{if(confirm(a("users.deleteConfirmation",{name:he})))try{await r(V),we()}catch(Te){alert(`${a("users.deleteError")}: ${Te.message}`)}},Pe=async(V,he)=>{try{await n(V,he),we()}catch(Te){alert(`${a("users.updateRoleError")}: ${Te.message}`)}},W=async V=>{var he;if(V.preventDefault(),!(K||!O)){ge(""),L(!0);try{const Te={};T.user_name!==q(O,"user_name")&&(Te.user_name=T.user_name),T.user_email!==O.user_email&&(Te.user_email=T.user_email),T.user_phone!==((he=O.user_phone)==null?void 0:he.toString())&&(Te.user_phone=T.user_phone?parseInt(T.user_phone):null),T.user_role!==O.user_role&&(Te.user_role=T.user_role),Object.keys(Te).length>0?(await s(O.auth_user_id||"",Te),F(!1),we()):F(!1)}catch(Te){ge(Te.message||a("users.updateUserError"))}finally{L(!1)}}},ne=V=>{var he;se(V),B({user_name:q(V,"user_name")||"",user_email:V.user_email||"",user_phone:((he=V.user_phone)==null?void 0:he.toString())||"",user_role:V.user_role||""}),F(!1),ge(""),X(!0)};return c?o.jsx("div",{className:"flex items-center justify-center h-full py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between md:justify-start gap-4",children:[o.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:a("users.title")}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Dn,{className:"h-5 w-5"}),o.jsxs("span",{className:"text-sm font-medium",children:[i.length," ",a("users.totalUsers")]})]}),o.jsx("p",{className:"hidden md:block text-muted-foreground",children:a("users.subtitle")})]}),o.jsxs("div",{className:"flex flex-row items-center border rounded-lg p-1 bg-muted/50 w-fit",children:[o.jsxs(Y,{variant:E==="employees"?"default":"ghost",size:"sm",onClick:()=>M("employees"),className:"h-8 px-3",children:[o.jsx(nL,{className:"h-4 w-4 mr-2"}),a("users.employees")]}),o.jsxs(Y,{variant:E==="clients"?"default":"ghost",size:"sm",onClick:()=>M("clients"),className:"h-8 px-3",children:[o.jsx(Ys,{className:"h-4 w-4 mr-2"}),a("users.clients")]})]}),E==="employees"&&o.jsxs("div",{className:"space-y-6",children:[(t==null?void 0:t.role)!=="manager"&&o.jsxs(At,{open:m,onOpenChange:p,children:[o.jsx(za,{asChild:!0,children:o.jsxs(Y,{className:"w-full",children:[o.jsx(It,{className:"h-4 w-4 mr-2"}),a("users.addUser")]})}),o.jsxs(Et,{children:[o.jsxs(Pt,{children:[o.jsx(Tt,{children:a("users.addNewUser")}),o.jsx(Kt,{children:a("users.addUserDescription")})]}),o.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[P&&o.jsx(ji,{variant:"destructive",children:o.jsx(Si,{children:P})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{htmlFor:"formName",children:a("users.fullName")}),o.jsx(ke,{id:"formName",value:v,onChange:V=>g(V.target.value),placeholder:a("users.fullName"),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{htmlFor:"formEmail",children:a("users.email")}),o.jsx(ke,{id:"formEmail",type:"email",value:w,onChange:V=>x(V.target.value),placeholder:a("users.email"),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{htmlFor:"formPassword",children:a("users.password")}),o.jsx(ke,{id:"formPassword",type:"password",value:y,onChange:V=>_(V.target.value),placeholder:a("users.password"),required:!0,minLength:6})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{htmlFor:"formRole",children:a("users.role")}),o.jsxs(ze,{value:b,onValueChange:V=>j(V),children:[o.jsx(Ue,{children:o.jsx(We,{})}),o.jsxs(Be,{children:[o.jsx(ae,{value:"employee",children:a("users.employee")}),o.jsx(ae,{value:"manager",children:a("users.manager")}),o.jsx(ae,{value:"admin",children:a("users.admin")})]})]})]}),o.jsx(Y,{type:"submit",className:"w-full",disabled:k,children:a(k?"users.addingUser":"users.addUser")})]})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Ja,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),o.jsx(ke,{placeholder:a("users.searchPlaceholder"),value:d,onChange:V=>h(V.target.value),className:"pl-10"})]}),o.jsxs(kr,{className:"flex-1",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Re.map(V=>o.jsxs(pe,{className:"hover:shadow-md transition-shadow",children:[o.jsx($e,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs(Vs,{className:"h-12 w-12",children:[o.jsx(Wa,{src:V.avatar||""}),o.jsx(Hs,{children:q(V,"user_name").charAt(0).toUpperCase()})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx(Je,{className:"text-lg truncate",children:q(V,"user_name")}),o.jsx(Fe,{variant:Ce(V.user_role),className:"mt-1",children:a(`users.${V.user_role}`)})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Y,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>ne(V),children:o.jsx(hd,{className:"h-4 w-4"})}),(t==null?void 0:t.role)==="admin"&&o.jsx(Y,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>be(V.auth_user_id||"",q(V,"user_name")),children:o.jsx(an,{className:"h-4 w-4"})})]})]})}),o.jsxs(_e,{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(bw,{className:"h-4 w-4"}),o.jsx("span",{className:"truncate",children:V.user_email})]}),V.client_contact&&o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(op,{className:"h-4 w-4"}),o.jsx("span",{children:V.client_contact})]}),V.company_name&&o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(ww,{className:"h-4 w-4"}),o.jsx("span",{className:"truncate",children:V.company_name})]}),(V.user_role==="employee"||V.user_role==="manager")&&(t==null?void 0:t.role)==="admin"&&o.jsxs("div",{className:"pt-2 border-t",children:[o.jsx("div",{className:"text-xs font-medium mb-1",children:a("users.changeRole")}),o.jsxs(ze,{value:V.user_role,onValueChange:he=>Pe(V.auth_user_id||"",he),children:[o.jsx(Ue,{className:"w-full h-8",children:o.jsx(We,{})}),o.jsxs(Be,{children:[o.jsx(ae,{value:"employee",children:a("users.employee")}),o.jsx(ae,{value:"manager",children:a("users.manager")})]})]})]}),o.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[a("users.joined")," ",new Date(V.created_at).toLocaleDateString()]})]})]},V.user_id))}),Re.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Dn,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),o.jsx("h3",{className:"text-lg font-medium mb-2",children:a("users.noUsersFound")}),o.jsx("p",{className:"text-muted-foreground",children:a(d?"users.noUsersFoundDesc":"users.noUsersAvailable")})]})]})]}),E==="clients"&&o.jsx("div",{className:"space-y-6",children:o.jsxs(kr,{className:"flex-1",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Re.map(V=>o.jsxs(pe,{className:"hover:shadow-md transition-shadow",children:[o.jsx($e,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs(Vs,{className:"h-12 w-12",children:[o.jsx(Wa,{src:V.avatar||""}),o.jsx(Hs,{children:q(V,"user_name").charAt(0).toUpperCase()})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx(Je,{className:"text-lg truncate",children:q(V,"user_name")}),o.jsx(Fe,{variant:"outline",className:"mt-1",children:a("users.client")})]})]})}),o.jsxs(_e,{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(bw,{className:"h-4 w-4"}),o.jsx("span",{className:"truncate",children:V.user_email})]}),V.client_contact&&o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(op,{className:"h-4 w-4"}),o.jsx("span",{children:V.client_contact})]}),V.company_name&&o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(ww,{className:"h-4 w-4"}),o.jsx("span",{className:"truncate",children:V.company_name})]}),o.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[a("users.joined")," ",new Date(V.created_at).toLocaleDateString()]})]})]},V.user_id))}),Re.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Ys,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),o.jsx("h3",{className:"text-lg font-medium mb-2",children:a("clients.noClientsFound")}),o.jsx("p",{className:"text-muted-foreground",children:a("clients.noClientsYet")})]})]})}),o.jsx(At,{open:R,onOpenChange:X,children:o.jsxs(Et,{className:"max-w-2xl max-h-[80vh]",children:[o.jsxs(Pt,{children:[o.jsx(Tt,{children:a("users.userDetails")}),o.jsx(Kt,{children:a("users.userDetailsDescription")})]}),O&&o.jsx(kr,{className:"max-h-[60vh] pr-4",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(Vs,{className:"h-16 w-16",children:[o.jsx(Wa,{src:O.avatar||""}),o.jsx(Hs,{className:"text-lg",children:q(O,"user_name").charAt(0).toUpperCase()})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-semibold",children:q(O,"user_name")}),o.jsx(Fe,{variant:Ce(O.user_role),className:"mt-1",children:a(`users.${O.user_role}`)}),O.avatar&&o.jsx("p",{className:"text-xs text-muted-foreground mt-1 break-all",children:O.avatar})]})]}),I?o.jsxs("form",{onSubmit:W,className:"space-y-4",children:[ee&&o.jsx(ji,{variant:"destructive",children:o.jsx(Si,{children:ee})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{htmlFor:"editName",children:a("users.fullName")}),o.jsx(ke,{id:"editName",value:T.user_name,onChange:V=>B(he=>({...he,user_name:V.target.value})),placeholder:a("users.fullName")})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{htmlFor:"editEmail",children:a("users.email")}),o.jsx(ke,{id:"editEmail",type:"email",value:T.user_email,onChange:V=>B(he=>({...he,user_email:V.target.value})),placeholder:a("users.email")})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{htmlFor:"editRole",children:a("users.role")}),o.jsxs(ze,{value:T.user_role,onValueChange:V=>B(he=>({...he,user_role:V})),children:[o.jsx(Ue,{children:o.jsx(We,{})}),o.jsxs(Be,{children:[o.jsx(ae,{value:"employee",children:a("users.employee")}),o.jsx(ae,{value:"manager",children:a("users.manager")}),o.jsx(ae,{value:"admin",children:a("users.admin")}),o.jsx(ae,{value:"client",children:a("users.client")})]})]})]}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:[o.jsx(le,{className:"text-sm font-medium",children:a("users.joined")}),o.jsx("p",{className:"text-sm",children:new Date(O.created_at).toLocaleDateString()})]}),O.updated_at&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:[o.jsx(le,{className:"text-sm font-medium",children:a("users.updated")}),o.jsx("p",{className:"text-sm",children:new Date(O.updated_at).toLocaleDateString()})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{htmlFor:"editPhone",children:a("users.phone")}),o.jsx(ke,{id:"editPhone",type:"tel",value:T.user_phone,onChange:V=>B(he=>({...he,user_phone:V.target.value})),placeholder:a("users.phone")})]}),O.client_contact&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:[o.jsx(le,{className:"text-sm font-medium",children:a("users.contact")}),o.jsx("p",{className:"text-sm",children:O.client_contact})]}),O.company_name&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:[o.jsx(le,{className:"text-sm font-medium",children:a("users.company")}),o.jsx("p",{className:"text-sm",children:q(O,"company_name")})]}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:[o.jsx(le,{className:"text-sm font-medium",children:a("users.userId")}),o.jsx("p",{className:"text-sm font-mono text-xs",children:O.user_id})]})]})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(Y,{type:"button",variant:"outline",onClick:()=>F(!1),children:a("buttons.cancel")}),o.jsx(Y,{type:"submit",disabled:K,children:a(K?"buttons.saving":"buttons.save")})]})]}):o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium text-muted-foreground",children:a("users.fullName")}),o.jsx("p",{className:"text-sm",children:q(O,"user_name")})]}),o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium text-muted-foreground",children:a("users.email")}),o.jsx("p",{className:"text-sm",children:O.user_email||a("common.na")})]}),o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium text-muted-foreground",children:a("users.role")}),o.jsx("p",{className:"text-sm",children:a(`users.${O.user_role}`)})]}),o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium text-muted-foreground",children:a("users.joined")}),o.jsx("p",{className:"text-sm",children:new Date(O.created_at).toLocaleDateString()})]}),O.updated_at&&o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium text-muted-foreground",children:a("users.updated")}),o.jsx("p",{className:"text-sm",children:new Date(O.updated_at).toLocaleDateString()})]})]}),o.jsxs("div",{className:"space-y-3",children:[O.user_phone&&o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium text-muted-foreground",children:a("users.phone")}),o.jsx("p",{className:"text-sm",children:O.user_phone})]}),O.client_contact&&o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium text-muted-foreground",children:a("users.contact")}),o.jsx("p",{className:"text-sm",children:O.client_contact})]}),O.company_name&&o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium text-muted-foreground",children:a("users.company")}),o.jsx("p",{className:"text-sm",children:q(O,"company_name")})]}),o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium text-muted-foreground",children:a("users.userId")}),o.jsx("p",{className:"text-sm font-mono text-xs",children:O.user_id})]})]})]}),O.auth_user_id&&o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium text-muted-foreground",children:a("users.authUserId")}),o.jsx("p",{className:"text-sm font-mono text-xs break-all",children:O.auth_user_id})]})]})}),o.jsxs(rr,{children:[!I&&(t==null?void 0:t.role)==="admin"&&o.jsx(Y,{variant:"outline",onClick:()=>F(!0),children:a("buttons.edit")}),o.jsx(Y,{onClick:()=>X(!1),children:a("buttons.close")})]})]})})]})}function $B(){const{user:t}=St(),{t:e}=gt(),[r,n]=f.useState([]),[s,a]=f.useState([]),[i,l]=f.useState({}),[c,u]=f.useState(!0),[d,h]=f.useState(""),[m,p]=f.useState(!1),[v,g]=f.useState(""),[w,x]=f.useState(""),[y,_]=f.useState(null),b=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="manager";(t==null?void 0:t.role)==="employee"||(t==null||t.role),f.useEffect(()=>{j(),P()},[]);const j=async()=>{try{u(!0);const O=await So.getAll(),se=await So.getAllTeamMembers();n(O),l(se)}catch(O){console.error("Failed to load teams:",O)}finally{u(!1)}},P=async()=>{try{const O=await $r.getAll();a(O)}catch(O){console.error("Failed to load users:",O)}},S=async()=>{if(v.trim())try{const O=Wr({team_name:v.trim(),team_leader_id:w||null,partner_id:null,auth_user_id:null},{team_name:"team_name"});await So.create(O),g(""),x(""),p(!1),await j()}catch(O){console.error("Failed to create team:",O)}},k=async(O,se)=>{try{await So.addMember(O,se);const I=s.find(F=>F.auth_user_id===se);I&&l(F=>({...F,[O]:[...F[O]||[],I]}))}catch(I){console.error("Failed to add team member:",I)}},C=async(O,se)=>{try{await So.removeMember(O,se),l(I=>({...I,[O]:(I[O]||[]).filter(F=>F.auth_user_id!==se)}))}catch(I){console.error("Failed to remove team member:",I)}},E=async O=>{try{await So.delete(O),n(se=>se.filter(I=>I.team_id!==O)),l(se=>{const I={...se};return delete I[O],I}),_(null)}catch(se){console.error("Failed to delete team:",se)}},M=r.filter(O=>(q(O,"team_name")||"").toLowerCase().includes(d.toLowerCase())),R=O=>s.find(se=>se.auth_user_id===O),X=s.filter(O=>O.user_role==="employee");return c?o.jsx("div",{className:"flex items-center justify-center h-full py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:e("teams.title")}),o.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:e("teams.subtitle")})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Dn,{className:"h-5 w-5"}),o.jsx("span",{className:"text-sm font-medium",children:e("teams.memberCount_plural",{count:r.length})})]}),b&&o.jsxs(At,{open:m,onOpenChange:p,children:[o.jsx(za,{asChild:!0,children:o.jsxs(Y,{children:[o.jsx(It,{className:"h-4 w-4 mr-2"}),e("teams.createTeam")]})}),o.jsxs(Et,{className:"sm:max-w-[425px]",children:[o.jsxs(Pt,{children:[o.jsx(Tt,{children:e("teams.createTeamTitle")}),o.jsx(Kt,{children:e("teams.createTeamDesc")})]}),o.jsxs("div",{className:"grid gap-4 py-4",children:[o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(le,{htmlFor:"team-name",className:"text-right",children:e("teams.teamName")}),o.jsx(ke,{id:"team-name",value:v,onChange:O=>g(O.target.value),className:"col-span-3",placeholder:e("teams.teamNamePlaceholder")})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(le,{htmlFor:"team-leader",className:"text-right",children:e("teams.teamLeader")}),o.jsxs(ze,{value:w,onValueChange:x,children:[o.jsx(Ue,{className:"col-span-3",children:o.jsx(We,{placeholder:e("teams.selectTeamLeader")})}),o.jsx(Be,{children:X.map(O=>o.jsx(ae,{value:O.auth_user_id,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{children:O.avatar||""}),o.jsx("span",{children:q(O,"user_name")}),o.jsx(Fe,{variant:"outline",className:"text-xs",children:O.user_role})]})},O.auth_user_id))})]})]})]}),o.jsx(rr,{children:o.jsx(Y,{type:"submit",onClick:S,disabled:!v.trim(),children:e("teams.createTeam")})})]})]})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Ja,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),o.jsx(ke,{placeholder:e("teams.searchPlaceholder"),value:d,onChange:O=>h(O.target.value),className:"pl-10"})]}),o.jsxs(kr,{className:"flex-1",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:M.map(O=>{const se=R(O.team_leader_id||""),I=i[O.team_id]||[];return o.jsxs(pe,{className:"hover:shadow-md transition-shadow",children:[o.jsxs($e,{className:"pb-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Je,{className:"text-lg",children:q(O,"team_name")}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Fe,{variant:"outline",children:e("teams.memberCount_plural",{count:I.length})}),b&&o.jsxs(ho,{children:[o.jsx(Tc,{asChild:!0,children:o.jsx(Y,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-red-500 hover:text-red-700",onClick:F=>{F.stopPropagation(),_(O.team_id)},children:o.jsx(an,{className:"h-3 w-3"})})}),o.jsxs(ca,{onClick:F=>F.stopPropagation(),children:[o.jsxs(ua,{children:[o.jsx(ha,{children:e("teams.deleteTeam")}),o.jsx(fa,{children:e("teams.deleteConfirmation",{name:q(O,"team_name")})})]}),o.jsxs(da,{children:[o.jsx(pa,{children:e("buttons.cancel")}),o.jsx(ma,{onClick:F=>{F.stopPropagation(),E(O.team_id)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:e("buttons.delete")})]})]})]})]})]}),se&&o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsxs("span",{children:[e("teams.teamLeader"),":"]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("span",{children:se.avatar||""}),o.jsx("span",{children:q(se,"user_name")})]})]})]}),o.jsxs(_e,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium mb-2",children:e("teams.members")}),o.jsxs("div",{className:"space-y-2",children:[I.slice(0,4).map(F=>o.jsxs("div",{className:`flex items-center ${b?"justify-between":"gap-2"} bg-muted/50 p-2 rounded`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(Vs,{className:"h-6 w-6",children:[o.jsx(Wa,{src:F.avatar||""}),o.jsx(Hs,{className:"text-xs",children:q(F,"user_name").charAt(0).toUpperCase()})]}),o.jsx("span",{className:"text-sm",children:q(F,"user_name")})]}),b&&o.jsx(Y,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-red-500 hover:text-red-700",onClick:()=>C(O.team_id,F.auth_user_id),children:o.jsx(aL,{className:"h-3 w-3"})})]},F.auth_user_id)),I.length>4&&o.jsx("div",{className:"text-xs text-muted-foreground text-center",children:e("teams.moreMembers",{count:I.length-4})}),I.length===0&&o.jsx("div",{className:"text-xs text-muted-foreground text-center py-2",children:e("teams.noMembersYet")})]})]}),b&&o.jsx("div",{children:o.jsxs(ze,{onValueChange:F=>{F&&k(O.team_id,F)},children:[o.jsx(Ue,{className:"w-full",children:o.jsx(We,{placeholder:e("teams.addMember")})}),o.jsx(Be,{children:s.filter(F=>F.auth_user_id&&F.user_role==="employee"&&!I.some(T=>T.auth_user_id===F.auth_user_id)).map(F=>o.jsx(ae,{value:F.auth_user_id,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{children:F.avatar||""}),o.jsx("span",{children:q(F,"user_name")}),o.jsx(Fe,{variant:"outline",className:"text-xs",children:F.user_role})]})},F.auth_user_id))})]})}),o.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[e("teams.created")," ",O.created_at?new Date(O.created_at).toLocaleDateString():"N/A"]})]})]},O.team_id)})}),M.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Dn,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),o.jsx("h3",{className:"text-lg font-medium mb-2",children:e(d?"teams.noTeamsFound":"teams.noTeamsYet")}),o.jsx("p",{className:"text-muted-foreground mb-4",children:e(d?"tickets.noTicketsFoundDesc":"teams.createFirstTeam")}),!d&&b&&o.jsxs(Y,{onClick:()=>p(!0),children:[o.jsx(It,{className:"h-4 w-4 mr-2"}),e("teams.createFirstTeam")]})]})]})]})}var bh="Switch",[UB,bz]=yr(bh),[BB,zB]=UB(bh),QC=f.forwardRef((t,e)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:a,required:i,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[m,p]=f.useState(null),v=Ae(e,_=>p(_)),g=f.useRef(!1),w=m?d||!!m.closest("form"):!0,[x,y]=Xs({prop:s,defaultProp:a??!1,onChange:u,caller:bh});return o.jsxs(BB,{scope:r,checked:x,disabled:l,children:[o.jsx(xe.button,{type:"button",role:"switch","aria-checked":x,"aria-required":i,"data-state":eE(x),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:v,onClick:oe(t.onClick,_=>{y(b=>!b),w&&(g.current=_.isPropagationStopped(),g.current||_.stopPropagation())})}),w&&o.jsx(ZC,{control:m,bubbles:!g.current,name:n,value:c,checked:x,required:i,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});QC.displayName=bh;var JC="SwitchThumb",XC=f.forwardRef((t,e)=>{const{__scopeSwitch:r,...n}=t,s=zB(JC,r);return o.jsx(xe.span,{"data-state":eE(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:e})});XC.displayName=JC;var WB="SwitchBubbleInput",ZC=f.forwardRef(({__scopeSwitch:t,control:e,checked:r,bubbles:n=!0,...s},a)=>{const i=f.useRef(null),l=Ae(i,a),c=o1(r),u=QS(e);return f.useEffect(()=>{const d=i.current;if(!d)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&p){const v=new Event("click",{bubbles:n});p.call(d,r),d.dispatchEvent(v)}},[c,r,n]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ZC.displayName=WB;function eE(t){return t?"checked":"unchecked"}var tE=QC,VB=XC;const rE=f.forwardRef(({className:t,...e},r)=>o.jsx(tE,{className:J("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:r,children:o.jsx(VB,{className:J("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));rE.displayName=tE.displayName;function HB(){var z;const{user:t,hasRole:e}=St(),{t:r}=gt(),[n,s]=f.useState([]),[a,i]=f.useState(null),[l,c]=f.useState([]),[u,d]=f.useState([]),[h,m]=f.useState(""),[p,v]=f.useState(!0),[g,w]=f.useState(!1),[x,y]=f.useState(""),[_,b]=f.useState(!1),[j,P]=f.useState([]),[S,k]=f.useState({name:"",is_private:!0,project_id:""}),[C,E]=f.useState(!1),[M,R]=f.useState(null),[X,O]=f.useState(null),[se,I]=f.useState(!1),[F,T]=f.useState(!0),[B,K]=f.useState(!1),[L,ee]=f.useState(!1),ge=f.useRef(!1),we=f.useRef(null),Re=f.useRef(null),Ce=f.useRef(null),ie=f.useRef(null),be=f.useRef(null);f.useEffect(()=>{t&&!ge.current&&W()},[t]),f.useEffect(()=>{a&&(Re.current!==a.room_id&&V(),we.current!==a.room_id&&ne())},[a]),f.useEffect(()=>{if(Ce.current){const A=Ce.current.querySelector("[data-radix-scroll-area-viewport]");A&&(A.scrollTop=A.scrollHeight)}},[l]),f.useEffect(()=>{if(M&&Ce.current){const A=Ce.current.querySelector("[data-radix-scroll-area-viewport]");A&&setTimeout(()=>{A.scrollTop=A.scrollHeight},100)}},[M]),f.useEffect(()=>{if(!Ce.current||!B||L)return;const A=Ce.current.querySelector("[data-radix-scroll-area-viewport]");if(!A)return;const G=()=>{A.scrollTop<=50&&B&&!L&&ne(!0)};return A.addEventListener("scroll",G),()=>A.removeEventListener("scroll",G)},[B,L,a]),f.useEffect(()=>{a&&(async()=>{try{await Z.realtime.setAuth(await cr.getFreshJwt());const G=`room:${a.room_id}:messages`,H=Z.channel(G,{config:{broadcast:{self:!0,ack:!0},private:!0}});return H.on("broadcast",{event:"*"},te=>{var $;const ve=($=te.payload)==null?void 0:$.record;ve&&ve.message_id&&(c(Q=>Q.some(De=>De.message_id===ve.message_id)?Q:[...Q.filter(De=>!(De.message_id.startsWith("temp-")&&De.auth_user_id===ve.auth_user_id&&De.content===ve.content)),ve]),s(Q=>Q.map(ye=>ye.room_id===a.room_id?{...ye,lastMessage:ve}:ye)))}),await H.subscribe(),()=>{H.unsubscribe()}}catch(G){console.error("Failed to setup realtime:",G)}})()},[a]),f.useEffect(()=>(h&&a?(_||(b(!0),Pe(!0)),ie.current&&clearTimeout(ie.current),ie.current=setTimeout(()=>{b(!1),Pe(!1)},2e3)):_&&(b(!1),Pe(!1)),()=>{ie.current&&clearTimeout(ie.current)}),[h]),f.useEffect(()=>{E(!1),R(null),O(null),K(!1),ee(!1),ge.current=!1,we.current=null,Re.current=null,be.current=null},[t]),f.useEffect(()=>{K(!1),ee(!1),be.current=null},[a]);const Pe=async A=>{var G;if(!(!a||!t))try{await Z.channel(`room:${a.room_id}:typing`).send({type:"broadcast",event:"typing",payload:{userId:t.id,userName:((G=t.profile)==null?void 0:G.user_name)||t.email,typing:A}})}catch(H){console.error("Failed to broadcast typing:",H)}},W=async()=>{if(!ge.current)try{v(!0);const A=await Bo.getUserRooms((t==null?void 0:t.id)||""),G=await Promise.all(A.map(async H=>{try{const te=await _l.getByRoom(H.room_id),ve=te[te.length-1];return{...H,lastMessage:ve,unreadCount:0}}catch{return{...H,unreadCount:0}}}));s(G),G.length>0&&i(G[0]),E(!0),ge.current=!0}catch(A){console.error("Failed to load rooms:",A)}finally{v(!1)}},ne=async(A=!1)=>{var G,H,te,ve;if(!(!a||!A&&we.current===a.room_id))try{A&&ee(!0);const $=A&&be.current?{limit:10,before:be.current}:{limit:10},Q=await _l.getByRoom(a.room_id,$);if(A){const ye=((H=(G=Ce.current)==null?void 0:G.querySelector("[data-radix-scroll-area-viewport]"))==null?void 0:H.scrollHeight)||0,De=((ve=(te=Ce.current)==null?void 0:te.querySelector("[data-radix-scroll-area-viewport]"))==null?void 0:ve.scrollTop)||0;c(Xe=>[...Q,...Xe]),ee(!1),Q.length>0&&(be.current=Q[0].created_at),setTimeout(()=>{var Qe;const Xe=(Qe=Ce.current)==null?void 0:Qe.querySelector("[data-radix-scroll-area-viewport]");if(Xe){const Rt=Xe.scrollHeight-ye;Xe.scrollTop=Rt}},50)}else c(Q),R(a.room_id),we.current=a.room_id,be.current=Q.length>0?Q[0].created_at:null;K(Q.length===10)}catch($){console.error("Failed to load messages:",$),A&&ee(!1)}},V=async()=>{if(!(!a||Re.current===a.room_id))try{const A=await Bo.getRoomMembers(a.room_id);d(A),O(a.room_id),Re.current=a.room_id}catch(A){console.error("Failed to load room members:",A)}},he=async()=>{if(!h.trim()||!a||!t)return;const A=h.trim(),G={message_id:`temp-${Date.now()}`,room_id:a.room_id,auth_user_id:t.id,content:A,created_at:new Date().toISOString(),metadata:null};c(H=>[...H,G]),m("");try{await _l.create({room_id:a.room_id,auth_user_id:t.id,content:A,metadata:null})}catch(H){console.error("Failed to send message:",H),c(te=>te.filter(ve=>ve.message_id!==G.message_id)),m(A)}},Te=async()=>{var A;if(!(!S.name.trim()||!t))try{const G=await Bo.createRoom({name:S.name.trim(),is_private:S.is_private,project_id:S.project_id?parseInt(S.project_id):null,created_by:((A=t.profile)==null?void 0:A.user_id)||0,auth_user_id:t.id});await Bo.addMember(G.room_id,t.id),s(H=>[...H,{...G,unreadCount:0}]),i({...G,unreadCount:0}),k({name:"",is_private:!0,project_id:""}),w(!1)}catch(G){console.error("Failed to create room:",G)}},qe=A=>{const G=new Date(A),te=Math.floor((new Date().getTime()-G.getTime())/6e4);return te<1?r("chats.justNow"):te<60?r("chats.minutesAgo",{count:te}):te<1440?r("chats.hoursAgo",{count:Math.floor(te/60)}):G.toLocaleDateString("en-US",{month:"short",day:"numeric"})},rt=A=>new Date(A).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),it=(A,G)=>!G||A.auth_user_id!==G.auth_user_id?!1:new Date(A.created_at).getTime()-new Date(G.created_at).getTime()<5*60*1e3,U=(A,G)=>{if(!G)return!0;const H=new Date(A.created_at).toDateString(),te=new Date(G.created_at).toDateString();return H!==te},N=n.filter(A=>{var G;return(G=A.room_name)==null?void 0:G.toLowerCase().includes(x.toLowerCase())});return p?o.jsx("div",{className:"flex items-center justify-center h-full py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):o.jsxs("div",{className:"flex flex-col md:flex-row h-[calc(100vh-100px)] gap-4 sm:gap-6 p-3 sm:p-6 bg-gradient-to-br from-background via-background to-muted/20 rounded-xl border shadow-sm",children:[o.jsxs("div",{className:J("flex-col gap-4",F?"flex w-64 md:w-64 lg:w-72":"hidden","hidden sm:flex sm:w-64 md:w-64 lg:w-72"),children:[o.jsxs("div",{className:"flex items-center justify-between px-2",children:[o.jsx("h2",{className:"text-2xl font-bold tracking-tight bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:r("chats.chatRooms")}),e(["admin","manager"])&&o.jsxs(At,{open:g,onOpenChange:w,children:[o.jsx(za,{asChild:!0,children:o.jsx(Y,{size:"icon",variant:"ghost",className:"h-9 w-9 rounded-full hover:bg-primary/10 hover:text-primary transition-all hover:scale-105",children:o.jsx(It,{className:"h-5 w-5"})})}),o.jsxs(Et,{className:"sm:max-w-[425px]",children:[o.jsxs(Pt,{children:[o.jsx(Tt,{children:r("chats.createRoomTitle")}),o.jsx(Kt,{children:r("chats.createRoomDesc")})]}),o.jsxs("div",{className:"grid gap-4 py-4",children:[o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(le,{htmlFor:"room-name",className:"text-right",children:r("chats.roomName")}),o.jsx(ke,{id:"room-name",value:S.name,onChange:A=>k(G=>({...G,name:A.target.value})),className:"col-span-3",placeholder:r("chats.roomNamePlaceholder")})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(le,{htmlFor:"private",className:"text-right",children:r("chats.private")}),o.jsxs("div",{className:"col-span-3 flex items-center space-x-2",children:[o.jsx(rE,{id:"private",checked:S.is_private,onCheckedChange:A=>k(G=>({...G,is_private:A}))}),o.jsx(le,{htmlFor:"private",className:"text-sm text-muted-foreground",children:S.is_private?r("chats.privateRoom"):r("chats.publicRoom")})]})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(le,{htmlFor:"project",className:"text-right",children:r("chats.project")}),o.jsx(ke,{id:"project",value:S.project_id,onChange:A=>k(G=>({...G,project_id:A.target.value})),className:"col-span-3",placeholder:r("chats.projectIdPlaceholder")})]})]}),o.jsx(rr,{children:o.jsx(Y,{onClick:Te,disabled:!S.name.trim(),children:r("chats.createRoom")})})]})]})]}),o.jsxs("div",{className:"relative px-3 md:px-2",children:[o.jsx(Ja,{className:"absolute left-5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(ke,{placeholder:r("chats.searchConversations"),className:"pl-9 bg-muted/50 border-none focus-visible:ring-2 focus-visible:ring-primary/20 transition-all",value:x,onChange:A=>y(A.target.value)})]}),o.jsx(kr,{className:"flex-1 -mx-3 px-3 md:-mx-2 md:px-2",children:o.jsx("div",{className:"space-y-2",children:N.map(A=>{var G;return o.jsxs("button",{onClick:()=>i(A),className:J("w-full flex items-start gap-3 p-3 md:p-2 md:pr-3 rounded-xl transition-all duration-200 text-left group relative overflow-hidden",(a==null?void 0:a.room_id)===A.room_id?"bg-gradient-to-r from-primary to-primary/90 text-primary-foreground shadow-lg shadow-primary/30 scale-[1.02]":"hover:bg-muted/70 text-foreground hover:shadow-md"),children:[o.jsxs("div",{className:J("h-12 w-12 rounded-full flex items-center justify-center flex-shrink-0 transition-all relative",(a==null?void 0:a.room_id)===A.room_id?"bg-primary-foreground/20 text-primary-foreground ring-2 ring-primary-foreground/30":"bg-gradient-to-br from-primary/20 to-primary/10 text-primary group-hover:from-primary/30 group-hover:to-primary/20"),children:[o.jsx(Os,{className:"h-5 w-5"}),A.unreadCount&&A.unreadCount>0&&o.jsx(Fe,{className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-[10px] bg-destructive border-2 border-background",children:A.unreadCount})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"font-semibold truncate text-sm",children:A.room_name||`Room ${A.room_id.slice(0,8)}`}),A.lastMessage&&o.jsx("span",{className:J("text-[10px] flex-shrink-0 ml-2",(a==null?void 0:a.room_id)===A.room_id?"text-primary-foreground/70":"text-muted-foreground"),children:qe(A.lastMessage.created_at)})]}),o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("p",{className:J("text-xs truncate flex-1",(a==null?void 0:a.room_id)===A.room_id?"text-primary-foreground/80":"text-muted-foreground"),children:((G=A.lastMessage)==null?void 0:G.content)||r("chats.selectRoom")}),A.is_private&&o.jsx("span",{className:J("text-[9px] px-1.5 py-0.5 rounded-full flex-shrink-0 md:text-[8px] md:px-1 md:py-0.5",(a==null?void 0:a.room_id)===A.room_id?"bg-primary-foreground/20 text-primary-foreground":"bg-muted text-muted-foreground"),children:r("chats.private")})]})]})]},A.room_id)})})})]}),a&&o.jsx("div",{className:"md:hidden mb-4",children:o.jsxs(jv,{open:se,onOpenChange:I,children:[o.jsx(xk,{asChild:!0,children:o.jsxs(Y,{variant:"outline",className:"w-full justify-between shadow-sm hover:shadow-md transition-shadow",children:[o.jsx("span",{className:"truncate",children:a.room_name||`Room ${a.room_id.slice(0,8)}`}),o.jsx(Os,{className:"h-4 w-4 ml-2"})]})}),o.jsx(fh,{side:"left",className:"w-80 p-4",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold",children:r("chats.chatRooms")}),e(["admin","manager"])&&o.jsx(Y,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>w(!0),children:o.jsx(It,{className:"h-5 w-5"})})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Ja,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(ke,{placeholder:r("chats.searchRooms"),className:"pl-9",value:x,onChange:A=>y(A.target.value)})]}),o.jsx(kr,{className:"h-[60vh]",children:o.jsx("div",{className:"space-y-2",children:N.map(A=>o.jsxs("button",{onClick:()=>{i(A),I(!1)},className:J("w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 text-left",(a==null?void 0:a.room_id)===A.room_id?"bg-primary text-primary-foreground shadow-md":"hover:bg-muted/50"),children:[o.jsx(Os,{className:"h-5 w-5 flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-semibold truncate text-sm",children:A.room_name||`Room ${A.room_id.slice(0,8)}`}),A.lastMessage&&o.jsx("div",{className:"text-xs truncate opacity-80",children:A.lastMessage.content})]})]},A.room_id))})})]})})]})}),o.jsx(pe,{className:"flex-1 flex flex-col overflow-hidden border-none shadow-xl bg-card/80 backdrop-blur-sm",children:a?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b bg-gradient-to-r from-background/95 via-background to-background/95 backdrop-blur-md supports-[backdrop-filter]:bg-background/80",children:[o.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[o.jsx(Vs,{className:"h-10 w-10 sm:h-11 sm:w-11 border-2 border-primary/20 shadow-md flex-shrink-0 ring-2 ring-background",children:o.jsx(Hs,{className:"bg-gradient-to-br from-primary/20 to-primary/10 text-primary font-semibold",children:((z=a.room_name)==null?void 0:z.charAt(0).toUpperCase())||"#"})}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("h3",{className:"font-semibold text-sm sm:text-base truncate",children:a.room_name||`Room ${a.room_id.slice(0,8)}`}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(Dn,{className:"h-3 w-3"}),o.jsxs("span",{className:"truncate",children:[u.length," ",r("chats.members")]}),o.jsx("span",{className:"hidden sm:inline w-1 h-1 rounded-full bg-muted-foreground/30"}),o.jsxs("span",{className:"hidden sm:flex text-green-500 items-center gap-1.5",children:[o.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse shadow-lg shadow-green-500/50"}),r("chats.online")]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Y,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9 text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-all",onClick:()=>T(!F),children:o.jsx(RS,{className:"h-4 w-4"})}),o.jsx(Y,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9 text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-all hidden sm:flex",children:o.jsx(op,{className:"h-4 w-4"})}),o.jsx(Y,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9 text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-all hidden sm:flex",children:o.jsx(iL,{className:"h-4 w-4"})}),o.jsxs(ZN,{children:[o.jsx(ek,{asChild:!0,children:o.jsx(Y,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9 text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-all",children:o.jsx(zI,{className:"h-4 w-4"})})}),o.jsxs(gv,{align:"end",children:[o.jsx(qn,{children:r("chats.viewDetails")}),o.jsx(qn,{children:r("chats.muteNotifications")}),o.jsx(qn,{className:"text-destructive",children:r("chats.leaveRoom")})]})]})]})]}),o.jsx(kr,{ref:Ce,className:"flex-1 p-3 sm:p-6 bg-gradient-to-b from-slate-50/80 via-slate-50/50 to-slate-50/80 dark:from-slate-900/80 dark:via-slate-900/50 dark:to-slate-900/80",children:o.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[L&&o.jsx("div",{className:"flex items-center justify-center py-4",children:o.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-primary"})}),X===a.room_id&&l.map((A,G)=>{var ye,De,Xe,Qe,Bt,Rt,Fn;const H=A.auth_user_id===(t==null?void 0:t.id)||A.auth_user_id===((ye=t==null?void 0:t.profile)==null?void 0:ye.auth_user_id)||A.auth_user_id===((Xe=(De=t==null?void 0:t.profile)==null?void 0:De.user_id)==null?void 0:Xe.toString()),te=G>0?l[G-1]:void 0,ve=!it(A,te),$=U(A,te);let Q;return H?Q={auth_user_id:t.id,user_name:((Qe=t.profile)==null?void 0:Qe.user_name)||t.email||r("chats.you"),avatar:(Bt=t.profile)==null?void 0:Bt.avatar,user_id:((Rt=t.profile)==null?void 0:Rt.user_id)||0,user_email:t.email}:Q=u.find(fo=>fo.auth_user_id===A.auth_user_id),Q||(Q={auth_user_id:A.auth_user_id,user_name:r("chats.unknownUser"),avatar:"",user_id:0}),o.jsxs("div",{children:[$&&o.jsx("div",{className:"flex items-center justify-center my-6",children:o.jsx("div",{className:"bg-muted/80 backdrop-blur-sm px-4 py-1.5 rounded-full text-xs text-muted-foreground font-medium shadow-sm",children:new Date(A.created_at).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})}),o.jsxs("div",{className:J("flex gap-3 animate-in slide-in-from-bottom-2 duration-300",H?"flex-row-reverse":"flex-row",!ve&&"mt-1"),children:[o.jsx("div",{className:J("flex-shrink-0 w-8",!ve&&"invisible"),children:o.jsxs(Vs,{className:"h-8 w-8 border-2 border-background shadow-md",children:[o.jsx(Wa,{src:Q.avatar||""}),o.jsx(Hs,{className:"text-xs font-semibold bg-gradient-to-br from-primary/20 to-primary/10 text-primary",children:((Fn=Q.user_name)==null?void 0:Fn.charAt(0).toUpperCase())||"?"})]})}),o.jsxs("div",{className:J("flex flex-col max-w-[75%] sm:max-w-[65%]",H?"items-end":"items-start"),children:[ve&&!H&&o.jsx("span",{className:"text-xs font-medium text-muted-foreground ml-1 mb-1",children:Q.user_name}),o.jsxs("div",{className:"group relative",children:[o.jsx("div",{className:J("px-4 py-2.5 shadow-md text-sm break-words transition-all hover:shadow-lg",H?"bg-gradient-to-br from-primary to-primary/90 text-primary-foreground rounded-2xl rounded-tr-md":"bg-card border border-border/50 text-card-foreground rounded-2xl rounded-tl-md"),children:A.content}),o.jsxs("div",{className:J("flex items-center gap-1.5 mt-1",H?"justify-end":"justify-start"),children:[o.jsx("span",{className:"text-[10px] text-muted-foreground",children:rt(A.created_at)}),H&&o.jsx("div",{className:"text-primary-foreground/70",children:A.message_id.startsWith("temp-")?o.jsx(Bg,{className:"h-3 w-3"}):o.jsx(II,{className:"h-3 w-3"})})]})]})]})]})]},A.message_id)}),j.length>0&&o.jsxs("div",{className:"flex gap-3 animate-in fade-in duration-200",children:[o.jsx("div",{className:"flex-shrink-0 w-8",children:o.jsx("div",{className:"h-8 w-8 rounded-full bg-muted flex items-center justify-center",children:o.jsxs("div",{className:"flex gap-1",children:[o.jsx("div",{className:"w-1.5 h-1.5 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0ms"}}),o.jsx("div",{className:"w-1.5 h-1.5 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"150ms"}}),o.jsx("div",{className:"w-1.5 h-1.5 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),o.jsx("div",{className:"flex items-center",children:o.jsx("span",{className:"text-xs text-muted-foreground italic",children:r("chats.someoneTyping")})})]})]})}),o.jsx("div",{className:"p-3 sm:p-4 bg-gradient-to-r from-background/95 via-background to-background/95 backdrop-blur-md border-t",children:o.jsxs("div",{className:"flex items-end gap-2 max-w-4xl mx-auto bg-card/80 backdrop-blur-sm border border-border/50 rounded-2xl p-2 shadow-lg focus-within:ring-2 focus-within:ring-primary/30 focus-within:border-primary/50 transition-all",children:[o.jsx(Y,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-full text-muted-foreground hover:text-primary hover:bg-primary/10 transition-all flex-shrink-0",children:o.jsx(QI,{className:"h-5 w-5"})}),o.jsx(ke,{value:h,onChange:A=>m(A.target.value),placeholder:r("chats.typeMessage"),onKeyPress:A=>A.key==="Enter"&&!A.shiftKey&&he(),className:"flex-1 border-none bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 min-h-[40px] py-2.5 text-sm placeholder:text-muted-foreground/60"}),o.jsx(Y,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-full text-muted-foreground hover:text-primary hover:bg-primary/10 transition-all flex-shrink-0",children:o.jsx(JI,{className:"h-5 w-5"})}),o.jsx(Y,{onClick:he,disabled:!h.trim(),size:"icon",className:J("h-9 w-9 rounded-full transition-all duration-200 flex-shrink-0",h.trim()?"bg-gradient-to-r from-primary to-primary/90 text-primary-foreground hover:from-primary/90 hover:to-primary shadow-lg shadow-primary/30 hover:shadow-xl hover:scale-105":"bg-muted text-muted-foreground hover:bg-muted/80"),children:o.jsx(Kg,{className:"h-4 w-4"})})]})})]}):o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center p-8 bg-gradient-to-b from-slate-50/50 via-background to-slate-50/50 dark:from-slate-900/50 dark:via-background dark:to-slate-900/50",children:[o.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-primary/20 to-primary/10 rounded-full flex items-center justify-center mb-6 animate-pulse shadow-lg shadow-primary/20",children:o.jsx(Os,{className:"h-10 w-10 text-primary"})}),o.jsx("h3",{className:"text-2xl font-bold text-foreground mb-2",children:r("chats.selectRoom")}),o.jsx("p",{className:"text-base text-muted-foreground max-w-sm",children:r("chats.selectRoom")})]})})]})}function qB(){const{user:t}=St(),{t:e}=gt(),[r,n]=f.useState([]),[s,a]=f.useState(null),[i,l]=f.useState([]),[c,u]=f.useState([]),[d,h]=f.useState(""),[m,p]=f.useState(!0),[v,g]=f.useState(!1),[w,x]=f.useState(null),[y,_]=f.useState(null),[b,j]=f.useState(!1),[P,S]=f.useState(!0),k=f.useRef(!1),C=f.useRef(null),E=f.useRef(null);f.useEffect(()=>{t&&!k.current&&M()},[t]),f.useEffect(()=>{s&&(E.current!==s.room_id&&X(),C.current!==s.room_id&&R())},[s]),f.useEffect(()=>{s&&(async()=>{try{await Z.realtime.setAuth(await cr.getFreshJwt());const F=`room:${s.room_id}:messages`,T=Z.channel(F,{config:{broadcast:{self:!0,ack:!0},private:!0}});return T.on("broadcast",{event:"*"},B=>{var L;const K=(L=B.payload)==null?void 0:L.record;K&&K.message_id&&l(ee=>ee.some(we=>we.message_id===K.message_id)?ee:[...ee.filter(we=>!(we.message_id.startsWith("temp-")&&we.auth_user_id===K.auth_user_id&&we.content===K.content)),K])}),await T.subscribe(),()=>{T.unsubscribe()}}catch(F){console.error("Failed to setup realtime:",F)}})()},[s]),f.useEffect(()=>{g(!1),x(null),_(null),k.current=!1,C.current=null,E.current=null},[t]);const M=async()=>{if(!k.current)try{p(!0);const I=await Bo.getUserRooms((t==null?void 0:t.id)||"");n(I),I.length>0&&a(I[0]),g(!0),k.current=!0}catch(I){console.error("Failed to load rooms:",I)}finally{p(!1)}},R=async()=>{if(!(!s||C.current===s.room_id))try{const I=await _l.getByRoom(s.room_id);l(I),x(s.room_id),C.current=s.room_id}catch(I){console.error("Failed to load messages:",I)}},X=async()=>{if(!(!s||E.current===s.room_id))try{const I=await Bo.getRoomMembers(s.room_id);u(I),_(s.room_id),E.current=s.room_id}catch(I){console.error("Failed to load room members:",I)}},O=async()=>{if(!d.trim()||!s||!t)return;const I=d.trim(),F={message_id:`temp-${Date.now()}`,room_id:s.room_id,auth_user_id:t.id,content:I,created_at:new Date().toISOString(),metadata:null};l(T=>[...T,F]),h("");try{await _l.create({room_id:s.room_id,auth_user_id:t.id,content:I,metadata:null})}catch(T){console.error("Failed to send message:",T),l(B=>B.filter(K=>K.message_id!==F.message_id)),h(I)}},se=I=>new Date(I).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return m?o.jsx("div",{className:"flex items-center justify-center h-full py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):o.jsxs("div",{className:"flex flex-col md:flex-row h-[calc(100vh-120px)] gap-4 sm:gap-6 pb-6",children:[o.jsxs("div",{className:`flex-col border rounded-lg ${P?"flex w-80":"hidden"} lg:flex lg:w-80`,children:[o.jsx("div",{className:"p-4 border-b",children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("h2",{className:"text-xl font-semibold",children:e("chats.myChatRooms")})})}),o.jsx(kr,{className:"flex-1 p-4",children:o.jsx("div",{className:"space-y-2",children:r.map(I=>o.jsx(pe,{className:`cursor-pointer transition-colors ${(s==null?void 0:s.room_id)===I.room_id?"bg-primary/10 border-primary":""}`,onClick:()=>a(I),children:o.jsx(_e,{className:"p-3",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Os,{className:"h-5 w-5 text-muted-foreground"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium truncate",children:I.room_name||`Room ${I.room_id.slice(0,8)}`}),o.jsx("p",{className:"text-xs text-muted-foreground",children:I.is_private?e("chats.private"):e("chats.publicRoom")})]})]})})},I.room_id))})})]}),s&&o.jsx("div",{className:"md:hidden mb-4",children:o.jsxs(jv,{open:b,onOpenChange:j,children:[o.jsx(xk,{asChild:!0,children:o.jsxs(Y,{variant:"outline",className:"w-full justify-between",children:[o.jsx("span",{className:"truncate",children:s.room_name||`Room ${s.room_id.slice(0,8)}`}),o.jsx(Os,{className:"h-4 w-4 ml-2"})]})}),o.jsx(fh,{side:"left",className:"w-80 p-4",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-bold",children:e("chats.myChatRooms")}),o.jsx(kr,{className:"h-[60vh]",children:o.jsx("div",{className:"space-y-2",children:r.map(I=>o.jsx(pe,{className:`cursor-pointer transition-colors ${(s==null?void 0:s.room_id)===I.room_id?"bg-primary/10 border-primary":""}`,onClick:()=>{a(I),j(!1)},children:o.jsx(_e,{className:"p-3",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Os,{className:"h-5 w-5 text-muted-foreground"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium truncate",children:I.room_name||`Room ${I.room_id.slice(0,8)}`}),o.jsx("p",{className:"text-xs text-muted-foreground",children:I.is_private?e("chats.private"):e("chats.publicRoom")})]})]})})},I.room_id))})})]})})]})}),o.jsx("div",{className:"flex-1 flex flex-col",children:s?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-4 pb-4 border-b",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold",children:s.room_name||`Room ${s.room_id.slice(0,8)}`}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(Dn,{className:"h-4 w-4"}),o.jsxs("span",{children:[c.length," ",e("chats.members")]}),s.is_private&&o.jsx("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:e("chats.private")})]})]}),o.jsx(Y,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-all",onClick:()=>S(!P),children:o.jsx(RS,{className:"h-4 w-4"})})]}),o.jsx(kr,{className:"flex-1 mb-4",children:o.jsx("div",{className:"space-y-4 p-4",children:y===s.room_id&&i.map(I=>{var T,B,K,L;let F;return I.auth_user_id===(t==null?void 0:t.id)?F={auth_user_id:t.id,user_name:((T=t.profile)==null?void 0:T.user_name)||t.email||e("chats.you"),avatar:(B=t.profile)==null?void 0:B.avatar,user_id:((K=t.profile)==null?void 0:K.user_id)||0,user_email:t.email}:F=c.find(ee=>ee.auth_user_id===I.auth_user_id),F||(F={auth_user_id:I.auth_user_id,user_name:e("chats.unknownUser"),avatar:"",user_id:0}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs(Vs,{className:"h-8 w-8",children:[o.jsx(Wa,{src:F.avatar||""}),o.jsx(Hs,{children:((L=F.user_name)==null?void 0:L.charAt(0))||"?"})]}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"font-medium text-sm",children:F.user_name}),o.jsx("span",{className:"text-xs text-muted-foreground",children:se(I.created_at)})]}),o.jsx("p",{className:"text-sm",children:I.content})]})]},I.message_id)})})}),o.jsxs("div",{className:"flex gap-2 p-4 border-t",children:[o.jsx(ke,{value:d,onChange:I=>h(I.target.value),placeholder:e("chats.typeMessage"),onKeyPress:I=>I.key==="Enter"&&O(),className:"flex-1"}),o.jsx(Y,{onClick:O,disabled:!d.trim(),children:o.jsx(Kg,{className:"h-4 w-4"})})]})]}):o.jsx("div",{className:"flex-1 flex items-center justify-center",children:o.jsxs("div",{className:"text-center text-muted-foreground",children:[o.jsx(Os,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:e("chats.selectRoom")})]})})})]})}var jh="Tabs",[KB,jz]=yr(jh,[ih]),nE=ih(),[GB,Kv]=KB(jh),sE=f.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:a,orientation:i="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=hc(l),[h,m]=Xs({prop:n,onChange:s,defaultProp:a??"",caller:jh});return o.jsx(GB,{scope:r,baseId:on(),value:h,onValueChange:m,orientation:i,dir:d,activationMode:c,children:o.jsx(xe.div,{dir:d,"data-orientation":i,...u,ref:e})})});sE.displayName=jh;var aE="TabsList",oE=f.forwardRef((t,e)=>{const{__scopeTabs:r,loop:n=!0,...s}=t,a=Kv(aE,r),i=nE(r);return o.jsx(sN,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:n,children:o.jsx(xe.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});oE.displayName=aE;var iE="TabsTrigger",lE=f.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...a}=t,i=Kv(iE,r),l=nE(r),c=dE(i.baseId,n),u=hE(i.baseId,n),d=n===i.value;return o.jsx(aN,{asChild:!0,...l,focusable:!s,active:d,children:o.jsx(xe.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...a,ref:e,onMouseDown:oe(t.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?i.onValueChange(n):h.preventDefault()}),onKeyDown:oe(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&i.onValueChange(n)}),onFocus:oe(t.onFocus,()=>{const h=i.activationMode!=="manual";!d&&!s&&h&&i.onValueChange(n)})})})});lE.displayName=iE;var cE="TabsContent",uE=f.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,forceMount:s,children:a,...i}=t,l=Kv(cE,r),c=dE(l.baseId,n),u=hE(l.baseId,n),d=n===l.value,h=f.useRef(d);return f.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),o.jsx(ar,{present:s||d,children:({present:m})=>o.jsx(xe.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...i,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:m&&a})})});uE.displayName=cE;function dE(t,e){return`${t}-trigger-${e}`}function hE(t,e){return`${t}-content-${e}`}var YB=sE,fE=oE,mE=lE,pE=uE;const Gv=YB,Sh=f.forwardRef(({className:t,...e},r)=>o.jsx(fE,{ref:r,className:J("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Sh.displayName=fE.displayName;const Qn=f.forwardRef(({className:t,...e},r)=>o.jsx(mE,{ref:r,className:J("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...e}));Qn.displayName=mE.displayName;const Jn=f.forwardRef(({className:t,...e},r)=>o.jsx(pE,{ref:r,className:J("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Jn.displayName=pE.displayName;function QB(){const[t,e]=f.useState(null),[r,n]=f.useState([]),[s,a]=f.useState([]),[i,l]=f.useState([]),[c,u]=f.useState(!0),{user:d,signOut:h}=St();f.useEffect(()=>{(async()=>{if(d!=null&&d.id)try{u(!0);const v=await wn.getByUserAuthId(d.id);n(v)}catch(v){console.error("Failed to fetch user projects:",v)}finally{u(!1)}})()},[d==null?void 0:d.id]),f.useEffect(()=>{(async()=>{if(t)try{const[v,g]=await Promise.all([Ds.getAll(),wp.getByTask(0)]),w=v.filter(x=>!0);a(w),l(g)}catch(v){console.error("Failed to fetch project data:",v)}})()},[t]);const m=t?r.find(p=>p.project_id===t):null;return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx("header",{className:"border-b bg-card",children:o.jsxs("div",{className:"container mx-auto px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("h1",{className:"text-xl font-bold",children:"Client Portal"})]}),o.jsxs(Y,{variant:"ghost",size:"sm",children:[o.jsx(KI,{className:"h-4 w-4 mr-2"}),"Logout"]})]})}),o.jsxs("div",{className:"container mx-auto px-6 py-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold",children:["Hello, ",q((d==null?void 0:d.profile)||{},"user_name"),"! "]}),o.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:"Here's your project progress"})]}),m?o.jsxs("div",{children:[o.jsx(Y,{variant:"ghost",className:"mb-4",onClick:()=>e(null),children:" Back to Projects"}),o.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o.jsxs(pe,{children:[o.jsx($e,{children:o.jsx(Je,{children:m.project_name})}),o.jsxs(_e,{children:[o.jsx("p",{className:"text-muted-foreground",children:m.project_description||"No description available"}),o.jsxs("div",{className:"mt-4",children:[o.jsx(Zs,{value:m.progress||0,className:"h-3"}),o.jsxs("div",{className:"text-right mt-2 text-sm font-semibold",children:[m.progress||0,"% Complete"]})]})]})]}),o.jsxs(Gv,{defaultValue:"tasks",children:[o.jsxs(Sh,{children:[o.jsx(Qn,{value:"tasks",children:"Tasks"}),o.jsx(Qn,{value:"images",children:"Gallery"}),o.jsx(Qn,{value:"comments",children:"Comments"})]}),o.jsx(Jn,{value:"tasks",className:"space-y-3",children:s.filter(p=>p.stage_id!==null).map(p=>{var v;return o.jsx(pe,{children:o.jsx(_e,{className:"pt-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:p.task_name}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:p.description||"No description"})]}),o.jsxs(Fe,{variant:p.task_status==="completed"?"default":"secondary",children:[p.task_status==="completed"?"":""," ",((v=p.task_status)==null?void 0:v.replace("_"," "))||"pending"]})]})})},p.task_id)})}),o.jsx(Jn,{value:"images",children:o.jsx(pe,{children:o.jsx(_e,{className:"pt-6",children:o.jsx("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(p=>o.jsx("div",{className:"aspect-square bg-muted rounded-lg flex items-center justify-center",children:o.jsx("span",{className:"text-4xl",children:""})},p))})})})}),o.jsx(Jn,{value:"comments",children:o.jsx(pe,{children:o.jsxs(_e,{className:"pt-6 space-y-4",children:[i.map(p=>o.jsxs("div",{className:"flex gap-3 pb-4 border-b last:border-0",children:[o.jsx("div",{className:"text-2xl",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-semibold text-sm",children:"Team Member"}),o.jsx("p",{className:"text-sm mt-1",children:p.message||"No message"}),o.jsx("span",{className:"text-xs text-muted-foreground mt-2 block",children:p.created_date?new Date(p.created_date).toLocaleString():"Unknown date"})]})]},p.comment_id)),o.jsxs("div",{className:"flex gap-2 mt-4",children:[o.jsx(ke,{placeholder:"Add a comment..."}),o.jsx(Y,{children:o.jsx(qg,{className:"h-4 w-4"})})]})]})})})]})]}),o.jsx("div",{children:o.jsxs(pe,{children:[o.jsx($e,{children:o.jsx(Je,{className:"text-lg",children:"Timeline"})}),o.jsxs(_e,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium",children:"Created Date"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:m.created_date?new Date(m.created_date).toLocaleDateString():"N/A"})]}),m.end_date&&o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium",children:"End Date"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(m.end_date).toLocaleDateString()})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium mb-2",children:"Milestones"}),o.jsxs("div",{className:"space-y-2 text-xs",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-green-500",children:""}),o.jsx("span",{children:"Project Kickoff"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-green-500",children:""}),o.jsx("span",{children:"Design Phase"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-blue-500",children:""}),o.jsx("span",{children:"Development Phase"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-muted-foreground",children:""}),o.jsx("span",{children:"Testing & Launch"})]})]})]})]})]})})]})]}):c?o.jsxs("div",{className:"flex justify-center items-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"}),o.jsx("span",{className:"sr-only",children:"Loading projects..."})]}):r.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Projects Found"}),o.jsx("p",{className:"text-muted-foreground",children:"You don't have any projects assigned yet."})]}):o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(p=>o.jsxs(pe,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e(p.project_id),children:[o.jsxs($e,{children:[o.jsx(Je,{className:"text-lg",children:p.project_name}),o.jsxs(Fe,{className:"w-fit mt-2",variant:"secondary",children:["Stage ",p.stage||"N/A"]})]}),o.jsx(_e,{children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[o.jsx("span",{className:"text-muted-foreground",children:"Progress"}),o.jsxs("span",{className:"font-semibold",children:[p.progress||0,"%"]})]}),o.jsx(Zs,{value:p.progress||0,className:"h-2"})]}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Created: ",p.created_date?new Date(p.created_date).toLocaleDateString():"N/A"]}),o.jsx(Y,{className:"w-full",variant:"outline",children:"View Details "})]})})]},p.project_id))})]})]})}function JB(){const{id:t}=PO(),e=fn(),{user:r}=St(),[n,s]=f.useState([]),[a,i]=f.useState(""),[l,c]=f.useState(!0),[u,d]=f.useState(null),[h,m]=f.useState(null),[p,v]=f.useState(null),[g,w]=f.useState(null),[x,y]=f.useState([]),[_,b]=f.useState([]);f.useEffect(()=>{(async()=>{if(!(!t||!r)){if(r.role==="admin"||r.role==="manager"){d(!0);return}if(r.role==="employee")try{const E=parseInt(t),R=(await Yw.getProjectUsers(E)).some(X=>X.auth_user_id===r.id);d(R)}catch(E){console.error("Failed to check project access:",E),d(!1)}else d(!0)}})()},[t,r]),f.useEffect(()=>{t&&u&&j()},[t,u]);const j=async()=>{if(t)try{c(!0);const C=parseInt(t),E=await wn.getById(C);if(m(E),E){if(E.created_by)try{const M=await $r.getByAuthId(E.created_by);v(M)}catch(M){console.error("Failed to fetch client:",M)}if(E.created_by)try{const M=await $r.getByAuthId(E.created_by);w(M)}catch(M){console.error("Failed to fetch manager:",M)}try{const R=(await Yw.getProjectUsers(C)).map(O=>O.auth_user_id),X=await Promise.all(R.map(O=>$r.getByAuthId(O).catch(()=>null)));y(X.filter(O=>O!==null))}catch(M){console.error("Failed to fetch project users:",M)}try{const X=(await kn.getAll()).filter(I=>I.project_id===C).map(I=>I.stage_id),se=(await Promise.all(X.map(I=>Ds.getByStage(I)))).flat();b(se)}catch(M){console.error("Failed to fetch tasks:",M)}}}catch(C){console.error("Failed to load project data:",C)}finally{c(!1)}};f.useEffect(()=>{t&&h&&_.length>0&&P()},[t,h,_]);const P=async()=>{if(!(!t||!h||_.length===0))try{const C=[];for(const E of _){const M=await wp.getByTask(E.task_id);C.push(...M)}s(C)}catch(C){console.error("Failed to load comments:",C)}},S=async C=>{if(!(!a.trim()||!r))try{const E=await wp.create({task_id:C,auth_user_id:r.id,message:a.trim()});s(M=>[...M,E]),i("")}catch(E){console.error("Failed to add comment:",E)}};if(u===!1)return o.jsx(Vt,{children:o.jsx("div",{className:"flex items-center justify-center h-full py-12",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"You don't have permission to view this project."}),o.jsx(Y,{onClick:()=>e("/projects"),children:"Back to Projects"})]})})});if(u===null||!h||!p||!g)return o.jsx(Vt,{children:o.jsx("div",{children:"Project not found"})});const k={todo:"bg-slate-200 text-slate-700",in_progress:"bg-blue-200 text-blue-700",done:"bg-green-200 text-green-700"};return o.jsx(Vt,{children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>e("/projects"),children:o.jsx(TI,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:q(h,"project_name")}),o.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:q(p,"company_name")})]})]}),o.jsx(Y,{variant:"outline",className:"self-start sm:self-auto",children:"Settings"})]}),o.jsx(pe,{children:o.jsxs(_e,{className:"pt-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-sm font-medium",children:"Overall Progress"}),o.jsxs("span",{className:"text-sm font-bold",children:[h.progress||0,"%"]})]}),o.jsx(Zs,{value:h.progress||0,className:"h-3"})]})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[o.jsx("div",{className:"lg:col-span-2 space-y-4 lg:space-y-6",children:o.jsxs(Gv,{defaultValue:"tasks",children:[o.jsxs(Sh,{className:"w-full sm:w-auto",children:[o.jsx(Qn,{value:"tasks",className:"flex-1 sm:flex-none",children:"Tasks"}),o.jsx(Qn,{value:"images",className:"flex-1 sm:flex-none",children:"Images"}),o.jsx(Qn,{value:"comments",className:"flex-1 sm:flex-none",children:"Comments"})]}),o.jsxs(Jn,{value:"tasks",className:"space-y-3",children:[_.map(C=>{var M;const E=x.find(R=>R.user_id===C.assigned_to);return o.jsx(pe,{children:o.jsx(_e,{className:"pt-6",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold",children:q(C,"task_name")}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:q(C,"description")}),o.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[o.jsx(Fe,{className:J("text-xs",k[C.task_status]),children:((M=C.task_status)==null?void 0:M.replace("_"," "))||"todo"}),C.due_date&&o.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[o.jsx(dc,{className:"h-3 w-3"}),"Due: ",new Date(C.due_date).toLocaleDateString()]})]})]}),E&&o.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[o.jsx("div",{className:"text-2xl mb-1",children:E.avatar||""}),q(E,"user_name")]})]})})},C.task_id)}),o.jsx(Y,{variant:"outline",className:"w-full",children:"+ Add New Task"})]}),o.jsx(Jn,{value:"images",children:o.jsx(pe,{children:o.jsxs(_e,{className:"pt-6",children:[o.jsx("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(C=>o.jsx("div",{className:"aspect-square bg-muted rounded-lg flex items-center justify-center",children:o.jsx("span",{className:"text-4xl",children:""})},C))}),o.jsxs(Y,{variant:"outline",className:"w-full mt-4",children:[o.jsx(rL,{className:"h-4 w-4 mr-2"}),"Upload Images"]})]})})}),o.jsxs(Jn,{value:"comments",className:"space-y-3",children:[n.map(C=>{const E=[...x,p,g].find(M=>M&&M.auth_user_id===C.auth_user_id);return o.jsx(pe,{children:o.jsx(_e,{className:"pt-6",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:"text-2xl",children:(E==null?void 0:E.avatar)||""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-semibold text-sm",children:E?q(E,"user_name"):"Unknown"}),o.jsx("p",{className:"text-sm mt-1",children:C.message}),o.jsx("span",{className:"text-xs text-muted-foreground mt-2 block",children:new Date(C.created_date||"").toLocaleString()})]})]})})},C.comment_id)}),_.length>0&&o.jsx(pe,{children:o.jsx(_e,{className:"pt-6",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ke,{placeholder:"Add a comment...",value:a,onChange:C=>i(C.target.value),onKeyDown:C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),S(_[0].task_id))}}),o.jsx(Y,{size:"icon",onClick:()=>S(_[0].task_id),children:o.jsx(Kg,{className:"h-4 w-4"})})]})})})]})]})}),o.jsxs("div",{className:"space-y-4 lg:order-last",children:[o.jsxs(pe,{children:[o.jsx($e,{children:o.jsx(Je,{className:"text-base sm:text-lg",children:"Project Summary"})}),o.jsxs(_e,{className:"space-y-3 sm:space-y-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium mb-1",children:"Client"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:p.avatar}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold",children:q(p,"user_name")}),o.jsx("div",{className:"text-xs text-muted-foreground",children:q(p,"company_name")})]})]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium mb-1",children:"Project Manager"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:g.avatar}),o.jsx("div",{className:"text-sm",children:q(g,"user_name")})]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium mb-2",children:"Team"}),o.jsx("div",{className:"space-y-2",children:x.map(C=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:C.avatar||""}),o.jsx("div",{className:"text-sm",children:q(C,"user_name")})]},C.user_id))})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium mb-1",children:"Timeline"}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:["Start: ",h.created_date?new Date(h.created_date).toLocaleDateString():"Not set",h.end_date&&o.jsxs("div",{children:["End: ",new Date(h.end_date).toLocaleDateString()]})]})]})]})]}),o.jsxs(pe,{children:[o.jsx($e,{children:o.jsx(Je,{className:"text-base sm:text-lg",children:"Recent Activity"})}),o.jsx(_e,{children:o.jsxs("div",{className:"space-y-3 text-xs",children:[o.jsxs("div",{className:"pb-2 border-b",children:[o.jsx("div",{className:"font-medium",children:"Task completed"}),o.jsx("div",{className:"text-muted-foreground",children:"2 hours ago"})]}),o.jsxs("div",{className:"pb-2 border-b",children:[o.jsx("div",{className:"font-medium",children:"New comment added"}),o.jsx("div",{className:"text-muted-foreground",children:"5 hours ago"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:"Images uploaded"}),o.jsx("div",{className:"text-muted-foreground",children:"1 day ago"})]})]})})]})]})]})]})})}const XB=()=>{const t=fn(),{t:e}=gt(),r=[{icon:o.jsx(Ug,{className:"h-6 w-6"}),title:e("landing.features.projectManagement.title"),description:e("landing.features.projectManagement.description")},{icon:o.jsx(Dn,{className:"h-6 w-6"}),title:e("landing.features.leadManagement.title"),description:e("landing.features.leadManagement.description")},{icon:o.jsx(AI,{className:"h-6 w-6"}),title:e("landing.features.analytics.title"),description:e("landing.features.analytics.description")},{icon:o.jsx(qg,{className:"h-6 w-6"}),title:e("landing.features.communication.title"),description:e("landing.features.communication.description")},{icon:o.jsx(AS,{className:"h-6 w-6"}),title:e("landing.features.taskManagement.title"),description:e("landing.features.taskManagement.description")},{icon:o.jsx(DS,{className:"h-6 w-6"}),title:e("landing.features.security.title"),description:e("landing.features.security.description")}];return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:[o.jsx("header",{className:"relative z-10 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex items-center justify-between py-4 sm:py-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"h-8 w-8 rounded-lg bg-primary flex items-center justify-center",children:o.jsx("span",{className:"text-primary-foreground font-bold text-lg",children:"M"})}),o.jsx("span",{className:"text-xl font-bold text-gray-900",children:e("landing.brandName")})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(X1,{}),o.jsx(Y,{onClick:()=>t("/login"),className:"shadow-lg hover:shadow-xl transition-all duration-200",children:e("buttons.login")})]})]})}),o.jsxs("section",{className:"relative px-4 sm:px-6 lg:px-8 pb-12 sm:pb-16 lg:pb-20",children:[o.jsx("div",{className:"max-w-7xl mx-auto",children:o.jsxs("div",{className:"text-center",children:[o.jsxs(Fe,{variant:"secondary",className:"mb-4 px-3 py-1 text-sm font-medium",children:[o.jsx(XI,{className:"h-3 w-3 mr-1"}),e("landing.badge")]}),o.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 mb-6 leading-tight",children:[e("landing.hero.title.line1"),o.jsx("span",{className:"text-primary block",children:e("landing.hero.title.line2")})]}),o.jsx("p",{className:"text-lg sm:text-xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed",children:e("landing.hero.description")}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center mb-12",children:[o.jsxs(Y,{size:"lg",onClick:()=>t("/login"),className:"px-8 py-3 text-lg shadow-lg hover:shadow-xl transition-all duration-200 group",children:[e("landing.hero.cta.primary"),o.jsx(RI,{className:"ml-2 h-5 w-5 group-hover:translate-x-1 transition-transform"})]}),o.jsx(Y,{variant:"outline",size:"lg",className:"px-8 py-3 text-lg",children:e("landing.hero.cta.secondary")})]}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-6 max-w-2xl mx-auto",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-primary",children:e("landing.stats.users")}),o.jsx("div",{className:"text-sm text-gray-600",children:e("landing.stats.usersLabel")})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-primary",children:e("landing.stats.projects")}),o.jsx("div",{className:"text-sm text-gray-600",children:e("landing.stats.projectsLabel")})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-primary",children:e("landing.stats.uptime")}),o.jsx("div",{className:"text-sm text-gray-600",children:e("landing.stats.uptimeLabel")})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-primary",children:e("landing.stats.support")}),o.jsx("div",{className:"text-sm text-gray-600",children:e("landing.stats.supportLabel")})]})]})]})}),o.jsxs("div",{className:"absolute inset-0 -z-10 overflow-hidden",children:[o.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-primary/10 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-400/10 rounded-full blur-3xl"})]})]}),o.jsx("section",{className:"px-4 sm:px-6 lg:px-8 py-12 sm:py-16 lg:py-20 bg-white/50 backdrop-blur-sm",children:o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:e("landing.features.title")}),o.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:e("landing.features.subtitle")})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8",children:r.map((n,s)=>o.jsx(pe,{className:"group hover:shadow-lg transition-all duration-200 border-0 shadow-md bg-white/80 backdrop-blur-sm",children:o.jsxs(_e,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx("div",{className:"p-2 rounded-lg bg-primary/10 text-primary group-hover:bg-primary group-hover:text-primary-foreground transition-colors",children:n.icon}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n.title})]}),o.jsx("p",{className:"text-gray-600 leading-relaxed",children:n.description})]})},s))})]})}),o.jsx("section",{className:"px-4 sm:px-6 lg:px-8 py-12 sm:py-16 lg:py-20",children:o.jsx("div",{className:"max-w-4xl mx-auto text-center",children:o.jsx(pe,{className:"bg-gradient-to-r from-primary to-blue-600 text-white border-0 shadow-2xl",children:o.jsxs(_e,{className:"p-8 sm:p-12",children:[o.jsx(lL,{className:"h-12 w-12 mx-auto mb-6 text-primary-foreground/80"}),o.jsx("h3",{className:"text-2xl sm:text-3xl font-bold mb-4",children:e("landing.cta.title")}),o.jsx("p",{className:"text-lg mb-8 text-primary-foreground/90 max-w-2xl mx-auto",children:e("landing.cta.description")}),o.jsxs(Y,{size:"lg",variant:"secondary",onClick:()=>t("/login"),className:"px-8 py-3 text-lg shadow-lg hover:shadow-xl transition-all duration-200 group",children:[e("landing.cta.button"),o.jsx(fd,{className:"ml-2 h-5 w-5 group-hover:scale-110 transition-transform"})]})]})})})}),o.jsx("footer",{className:"px-4 sm:px-6 lg:px-8 py-8 border-t border-gray-200 bg-white/50 backdrop-blur-sm",children:o.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[o.jsx("div",{className:"h-6 w-6 rounded bg-primary flex items-center justify-center",children:o.jsx("span",{className:"text-primary-foreground font-bold text-sm",children:"M"})}),o.jsxs("span",{className:"font-semibold text-gray-900",children:[e("landing.brandName")," CRM"]})]}),o.jsx("p",{className:"text-sm text-gray-600",children:e("landing.footer.copyright",{brand:e("landing.brandName")})})]})})]})},ZB=()=>{const[t,e]=f.useState("loading"),[r,n]=f.useState("Processing authentication..."),s=fn(),{user:a}=St();return f.useEffect(()=>{let i;return(async()=>{try{if(console.log("[AuthCallback] Handling OAuth callback"),a){console.log("[AuthCallback] User already authenticated by auth context:",a.role),e("success"),n("Authentication successful! Redirecting..."),setTimeout(()=>{a.role==="client"?s("/client-portal"):a.role==="employee"||a.role==="team_leader"?window.location.href="/#/employee_dashboard":window.location.href="/#/dashboard"},1500);return}console.log("[AuthCallback] Waiting for OAuth session to establish...");let c=0;const u=20,d=async()=>{c++,console.log(`[AuthCallback] Checking session and profile (attempt ${c}/${u})`);try{const{data:{user:h},error:m}=await Z.auth.getUser();if(m&&console.error("[AuthCallback] User error:",m),h){console.log("[AuthCallback] Found authenticated user:",h.id);const{data:g}=await Z.from("users").select("user_id").eq("auth_user_id",h.id).maybeSingle();if(g){console.log("[AuthCallback] User profile exists, fetching user data...");const w=await cr.getCurrentUser(h.id);if(w){localStorage.removeItem("oauth_intended_role"),e("success"),n("Authentication successful! Redirecting..."),setTimeout(()=>{w.role==="client"?s("/client-portal"):w.role==="employee"||w.role==="team_leader"?window.location.href="/#/employee_dashboard":window.location.href="/#/dashboard"},1500);return}}else console.log("[AuthCallback] Profile not yet created by trigger, waiting...")}const{data:{session:p},error:v}=await Z.auth.getSession();if(v&&console.error("[AuthCallback] Session error:",v),p!=null&&p.user){console.log("[AuthCallback] Found session user:",p.user.id);const{data:g}=await Z.from("users").select("user_id").eq("auth_user_id",p.user.id).maybeSingle();if(g){console.log("[AuthCallback] User profile exists, fetching user data...");const w=await cr.getCurrentUser(p.user.id);if(w){localStorage.removeItem("oauth_intended_role"),e("success"),n("Authentication successful! Redirecting..."),setTimeout(()=>{w.role==="client"?s("/client-portal"):w.role==="employee"||w.role==="team_leader"?window.location.href="/#/employee_dashboard":window.location.href="/#/dashboard"},1500);return}}else console.log("[AuthCallback] Profile not yet created by trigger, waiting...")}c<u?(console.log("[AuthCallback] No session or profile found, waiting and retrying..."),i=setTimeout(d,1e3)):(console.error("[AuthCallback] No session or profile found after maximum attempts"),e("error"),n("Authentication session not established. Please try signing in again."),setTimeout(()=>s("/login"),3e3))}catch(h){console.error("[AuthCallback] Error checking session and profile:",h),c<u?i=setTimeout(d,1e3):(e("error"),n("Authentication failed. Please try again."),setTimeout(()=>s("/login"),3e3))}};d()}catch(c){console.error("[AuthCallback] Error handling callback:",c),e("error"),n("Authentication failed. Please try again."),setTimeout(()=>s("/login"),3e3)}})(),()=>{i&&clearTimeout(i)}},[a,s]),o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:o.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md text-center max-w-md",children:[t==="loading"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Completing Sign In"}),o.jsx("p",{className:"text-gray-600",children:r})]}),t==="success"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),o.jsx("h2",{className:"text-xl font-semibold mb-2 text-green-600",children:"Success!"}),o.jsx("p",{className:"text-gray-600",children:r})]}),t==="error"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),o.jsx("h2",{className:"text-xl font-semibold mb-2 text-red-600",children:"Authentication Failed"}),o.jsx("p",{className:"text-gray-600",children:r})]})]})})};function ez(){return o.jsxs("div",{className:"space-y-8",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold tracking-tight",children:"Partner Dashboard"}),o.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:"Welcome to your partner portal"})]})}),o.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:o.jsxs("div",{className:"text-center space-y-4",children:[o.jsx("div",{className:"w-24 h-24 bg-primary/10 rounded-full flex items-center justify-center mx-auto",children:o.jsx("svg",{className:"w-12 h-12 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),o.jsx("h2",{className:"text-2xl font-semibold",children:"Coming Soon"}),o.jsx("p",{className:"text-muted-foreground max-w-md",children:"We're working hard to bring you an amazing partner experience. Check back soon for updates and new features."})]})})]})}function tz(){return o.jsxs("div",{className:"space-y-8",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Partner Employee Dashboard"}),o.jsx("p",{className:"text-muted-foreground mt-2 text-base",children:"Welcome to your partner employee portal"})]})}),o.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:o.jsxs("div",{className:"text-center space-y-4",children:[o.jsx("div",{className:"w-24 h-24 bg-primary/10 rounded-full flex items-center justify-center mx-auto",children:o.jsx("svg",{className:"w-12 h-12 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),o.jsx("h2",{className:"text-2xl font-semibold",children:"Coming Soon"}),o.jsx("p",{className:"text-muted-foreground max-w-md",children:"We're working hard to bring you an amazing partner employee experience. Check back soon for updates and new features."})]})})]})}function rz(){var U;const{t}=gt(),{user:e}=St(),{isRTL:r}=io(),[n,s]=f.useState([]),[a,i]=f.useState([]),[l,c]=f.useState({}),[u,d]=f.useState(!0),[h,m]=f.useState(""),[p,v]=f.useState(null),[g,w]=f.useState(null),[x,y]=f.useState([]);f.useState(!1);const[_,b]=f.useState(!1),[j,P]=f.useState(null),[S,k]=f.useState({}),[C,E]=f.useState({}),[M,R]=f.useState([]),[X,O]=f.useState(!1),[se,I]=f.useState(null),[F,T]=f.useState({template_name:"",template_name_ar:"",template_description:"",template_description_ar:"",category:"",is_active:!0,is_default:!1}),[B,K]=f.useState([]);f.useState({template_name:"",template_name_ar:"",template_description:"",template_description_ar:"",category:"",is_active:!0,is_default:!1}),f.useEffect(()=>{L()},[]);const L=async()=>{try{d(!0);const[N,z,A]=await Promise.all([bd.getAll().catch(ve=>(console.error("[Surveys] Error fetching surveys:",ve),[])),ya.getAll().catch(ve=>(console.error("[Surveys] Error fetching templates:",ve),[])),$r.getAll().catch(ve=>(console.error("[Surveys] Error fetching users:",ve),[]))]),G=z.map(async ve=>{try{const $=await ya.getFields(ve.template_id);return{templateId:ve.template_id,fields:$}}catch($){return console.error(`[Surveys] Error fetching fields for template ${ve.template_id}:`,$),{templateId:ve.template_id,fields:[]}}}),H=await Promise.all(G),te={};H.forEach(ve=>{te[ve.templateId]=ve.fields}),s(N),i(z),R(A),c(te)}catch(N){console.error("Failed to load surveys data:",N)}finally{d(!1)}},ee=n.filter(N=>{var z,A;return N.client_name.toLowerCase().includes(h.toLowerCase())||((z=N.client_company)==null?void 0:z.toLowerCase().includes(h.toLowerCase()))||((A=N.survey_name)==null?void 0:A.toLowerCase().includes(h.toLowerCase()))}),ge=a.filter(N=>{var z;return q(N,"template_name").toLowerCase().includes(h.toLowerCase())||((z=N.category)==null?void 0:z.toLowerCase().includes(h.toLowerCase()))}),we=N=>{if(!N)return t("surveys.unknownCreator");const z=M.find(A=>A.auth_user_id===N);return z?q(z,"user_name"):t("surveys.unknownCreator")},Re=N=>{switch(N.toLowerCase()){case"completed":return o.jsxs(Fe,{variant:"default",className:"bg-green-500",children:[o.jsx(dd,{className:"h-3 w-3 mr-1"}),t("surveys.completed")]});case"in_progress":return o.jsxs(Fe,{variant:"secondary",children:[o.jsx(Uo,{className:"h-3 w-3 mr-1"}),t("surveys.inProgress")]});case"pending":return o.jsxs(Fe,{variant:"outline",children:[o.jsx(Uo,{className:"h-3 w-3 mr-1"}),t("surveys.pending")]});default:return o.jsx(Fe,{variant:"outline",children:N})}},Ce=async N=>{if(w(N),l[N.template_id])y(l[N.template_id]);else try{const z=await ya.getFields(N.template_id);c(A=>({...A,[N.template_id]:z})),y(z)}catch(z){console.error("Failed to load template fields:",z),y([])}},ie=()=>{const N={field_type:"text",field_label:"",is_required:!1,field_options:null,validation_rules:null,conditional_logic:null};K(z=>[...z,N])},be=N=>{K(z=>z.filter((A,G)=>G!==N))},Pe=(N,z)=>{K(A=>A.map((G,H)=>H===N?{...G,...z}:G))},W=(N,z)=>{K(A=>{const G=[...A],[H]=G.splice(N,1);return G.splice(z,0,H),G})},ne=()=>{T({template_name:"",template_name_ar:"",template_description:"",template_description_ar:"",category:"",is_active:!0,is_default:!1}),K([])},V=async()=>{if(!F.template_name.trim()){alert("Template name is required");return}if(B.length===0){alert("At least one field is required");return}for(let N=0;N<B.length;N++)if(!B[N].field_label.trim()){alert(`Field ${N+1}: Label is required`);return}try{const N={...F,created_by:e==null?void 0:e.id},z=await ya.create(N),A=B.map((G,H)=>({template_id:z.template_id,field_order:H+1,field_type:G.field_type,field_label:G.field_label,is_required:G.is_required,field_options:G.field_options,validation_rules:G.validation_rules,conditional_logic:G.conditional_logic}));for(const G of A)await ya.createField({template_id:G.template_id,field_order:G.field_order,field_type:G.field_type,field_label:G.field_label,field_label_ar:"",help_text:null,help_text_ar:null,is_required:G.is_required,field_options:G.field_options,validation_rules:G.validation_rules,default_value:null,conditional_logic:G.conditional_logic,image_path:null});ne(),O(!1),L(),alert("Template created successfully!")}catch(N){console.error("Failed to create template:",N),alert("Failed to create template. Please try again.")}},he=async N=>{if(P(N),!l[N.template_id])try{const G=await ya.getFields(N.template_id);c(H=>({...H,[N.template_id]:G}))}catch(G){console.error("Failed to load template fields:",G)}const z={};(l[N.template_id]||[]).forEach(G=>{G.default_value!==null&&G.default_value!==void 0&&(z[G.field_label]=G.default_value)}),k(z)},Te=async N=>{try{await ya.delete(N),i(z=>z.filter(A=>A.template_id!==N)),I(null),c(z=>{const A={...z};return delete A[N],A})}catch(z){console.error("Failed to delete template:",z),alert("Failed to delete template. Please try again.")}},qe=()=>new Promise((N,z)=>{if(!navigator.geolocation){z(new Error("Geolocation is not supported by this browser"));return}navigator.geolocation.getCurrentPosition(A=>{N({latitude:A.coords.latitude,longitude:A.coords.longitude,accuracy:A.coords.accuracy})},A=>{z(A)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}),rt=async()=>{if(!(!j||!e))try{let N={latitude:0,longitude:0,accuracy:0};try{N=await qe()}catch(Xe){console.warn("Could not get location:",Xe)}const z=S["Customer Name"]||S["Client Name"]||S.client_name||S.customer_name||"Anonymous",A=S["Customer Company"]||S["Client Company"]||S.Company||S.company||S.client_company||null,G=S["Contact Number"]||S["Contact Email"]||S.Contact||S.contact||S.phone||null,H=S["Contact Email"]||S.Email||S.email||S.client_email||null,te=S.Address||S.address||S.client_address||null,ve=S["Additional Notes"]||S.Notes||S.notes||null,$={},Q=Object.keys(C);for(const[Xe,Qe]of Object.entries(S))Q.includes(Xe)||($[Xe]=Qe);const ye={template_id:j.template_id,survey_name:`${q(j,"template_name")} - ${new Date().toLocaleDateString()}`,survey_description:q(j,"template_description")||null,client_name:z,client_name_ar:null,client_contact:G,client_email:H,client_address:te,client_company:A,client_company_ar:null,survey_responses:$,location_latitude:N.latitude,location_longitude:N.longitude,location_accuracy:N.accuracy,location_address:te,status:"collected",created_by:e.id,lead_id:null,converted_to_lead_at:null,device_info:navigator.userAgent,completion_time_seconds:null,notes:ve,notes_ar:null,updated_by:null,reviewed_by:null,reviewed_at:null};console.log("[Survey] Creating survey...");const De=await bd.create(ye);if(console.log("[Survey] Survey created with ID:",De.survey_id),Object.keys(C).length>0){console.log("[Survey] Uploading images...",Object.keys(C));const Xe={...$};for(const[Rt,Fn]of Object.entries(C))try{const fo=Fn.name.split(".").pop(),gE=`${Rt.replace(/[^a-zA-Z0-9]/g,"_")}_${Date.now()}.${fo}`,Rc=`surveys/survey_${De.survey_id}/${gE}`;console.log(`[Survey] Uploading image for field "${Rt}" to path: ${Rc}`);const{data:vE,error:Nh}=await Z.storage.from("survey-uploads").upload(Rc,Fn,{cacheControl:"3600",upsert:!0,contentType:Fn.type});if(Nh)throw console.error(`[Survey] Failed to upload image for field ${Rt}:`,Nh),Nh;console.log(`[Survey] Upload successful for field "${Rt}":`,vE);const{data:{publicUrl:Yv}}=Z.storage.from("survey-uploads").getPublicUrl(Rc);console.log(`[Survey] Public URL for field "${Rt}":`,Yv),Xe[Rt]={bucket:"survey-uploads",path:Rc,url:Yv}}catch(fo){throw console.error(`[Survey] Error processing image for field ${Rt}:`,fo),fo}console.log("[Survey] Updating survey with image references...");const{data:Qe,error:Bt}=await Z.from("surveys").update({survey_responses:Xe}).eq("survey_id",De.survey_id).select().single();if(Bt)throw console.error("[Survey] Failed to update survey with images:",Bt),Bt;console.log("[Survey] Survey updated successfully with images"),De.survey_responses=Xe}s([De,...n]),P(null),k({}),E({}),b(!1),console.log("[Survey] Survey creation complete:",De)}catch(N){console.error("[Survey] Failed to create survey:",N),alert(`Failed to create survey: ${N.message}`)}},it=N=>{const z=N.field_label,A=S[z]||"";switch(N.field_type.toLowerCase()){case"text":return o.jsx(ke,{id:z,value:A,onChange:H=>k(te=>({...te,[z]:H.target.value})),placeholder:q(N,"help_text")||N.field_label,required:N.is_required});case"textarea":return o.jsx(Ur,{id:z,value:A,onChange:H=>k(te=>({...te,[z]:H.target.value})),placeholder:q(N,"help_text")||N.field_label,required:N.is_required,rows:3});case"number":return o.jsx(ke,{id:z,type:"number",value:A,onChange:H=>k(te=>({...te,[z]:H.target.value})),placeholder:q(N,"help_text")||N.field_label,required:N.is_required});case"email":return o.jsx(ke,{id:z,type:"email",value:A,onChange:H=>k(te=>({...te,[z]:H.target.value})),placeholder:q(N,"help_text")||N.field_label,required:N.is_required});case"select":if(N.field_options&&typeof N.field_options=="object"&&!Array.isArray(N.field_options)&&"options"in N.field_options&&Array.isArray(N.field_options.options)){const H=N.field_options.options.filter(te=>typeof te=="string");return o.jsxs(ze,{value:A,onValueChange:te=>k(ve=>({...ve,[z]:te})),children:[o.jsx(Ue,{children:o.jsx(We,{placeholder:q(N,"help_text")||`${t("common.select")} ${q(N,"field_label")}`})}),o.jsx(Be,{children:H.map((te,ve)=>o.jsx(ae,{value:te,children:te},ve))})]})}return o.jsx(ke,{id:z,value:A,onChange:H=>k(te=>({...te,[z]:H.target.value})),placeholder:q(N,"help_text")||N.field_label,required:N.is_required});case"radio":if(N.field_options&&typeof N.field_options=="object"&&!Array.isArray(N.field_options)&&"options"in N.field_options&&Array.isArray(N.field_options.options)){const H=N.field_options.options.filter(te=>typeof te=="string");return o.jsx("div",{className:"space-y-2",children:H.map((te,ve)=>o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"radio",name:z,value:te,checked:A===te,onChange:$=>k(Q=>({...Q,[z]:$.target.value}))}),o.jsx("span",{className:"text-sm",children:te})]},ve))})}return o.jsx(ke,{id:z,value:A,onChange:H=>k(te=>({...te,[z]:H.target.value})),placeholder:q(N,"help_text")||N.field_label,required:N.is_required});case"multiselect":case"checkbox":if(N.field_options&&typeof N.field_options=="object"&&!Array.isArray(N.field_options)&&"options"in N.field_options&&Array.isArray(N.field_options.options)){const H=N.field_options.options.filter(te=>typeof te=="string");return o.jsx("div",{className:"space-y-2",children:H.map((te,ve)=>o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:Array.isArray(A)?A.includes(te):!1,onChange:$=>{const Q=Array.isArray(A)?A:[];$.target.checked?k(ye=>({...ye,[z]:[...Q,te]})):k(ye=>({...ye,[z]:Q.filter(De=>De!==te)}))}}),o.jsx("span",{className:"text-sm",children:te})]},ve))})}return o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:!!A,onChange:H=>k(te=>({...te,[z]:H.target.checked}))}),o.jsx("span",{className:"text-sm",children:q(N,"field_label")})]});case"image":const G=S[z];return o.jsxs("div",{className:"space-y-2",children:[o.jsx(ke,{id:z,type:"file",accept:"image/*",onChange:H=>{var ve;const te=(ve=H.target.files)==null?void 0:ve[0];te&&(E($=>({...$,[z]:te})),k($=>({...$,[z]:{preview:URL.createObjectURL(te),filename:te.name}})))},required:N.is_required}),(G==null?void 0:G.preview)&&o.jsxs("div",{className:"relative w-full",children:[o.jsx("img",{src:G.preview,alt:"Preview",className:"w-full h-48 object-cover rounded-lg border"}),o.jsx(Y,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:()=>{E(H=>{const te={...H};return delete te[z],te}),k(H=>{const te={...H};return delete te[z],te})},children:o.jsx(an,{className:"h-4 w-4"})})]})]});default:return o.jsx(ke,{id:z,value:A,onChange:H=>k(te=>({...te,[z]:H.target.value})),placeholder:q(N,"help_text")||N.field_label,required:N.is_required})}};return u?o.jsx("div",{className:"flex items-center justify-center h-full py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):o.jsxs("div",{className:`h-full flex flex-col space-y-6 ${r?"rtl":"ltr"}`,children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold tracking-tight",children:t("surveys.title")}),o.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:t("surveys.subtitle")})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Qo,{className:"h-5 w-5"}),o.jsxs("span",{className:"text-sm font-medium",children:[n.length," ",t("surveys.totalSurveys")]})]})})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Ja,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),o.jsx(ke,{placeholder:t("surveys.searchPlaceholder"),value:h,onChange:N=>m(N.target.value),className:"pl-10"})]}),o.jsxs(Gv,{defaultValue:"surveys",className:"w-full flex-1 flex flex-col",children:[o.jsxs(Sh,{className:"grid w-full grid-cols-2",children:[o.jsxs(Qn,{value:"surveys",children:[t("surveys.surveys")," (",ee.length,")"]}),o.jsxs(Qn,{value:"templates",children:[t("surveys.templates")," (",ge.length,")"]})]}),o.jsxs(Jn,{value:"surveys",className:"space-y-4 flex-1 flex flex-col",children:[o.jsx("div",{className:"flex justify-end",children:o.jsxs(At,{open:_,onOpenChange:b,children:[o.jsx(za,{asChild:!0,children:o.jsxs(Y,{size:"lg",className:"w-full shadow-lg hover:shadow-xl transition-all",children:[o.jsx(It,{className:"h-5 w-5 mr-2"}),t("surveys.newSurvey")]})}),o.jsxs(Et,{className:"w-[95vw] sm:w-full sm:max-w-2xl lg:max-w-4xl max-h-[85vh] overflow-y-auto",children:[o.jsx(Pt,{children:o.jsx(Tt,{children:t("surveys.createNewSurvey")})}),o.jsx("div",{className:"space-y-6 py-4",children:j?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium",children:q(j,"template_name")}),o.jsx("p",{className:"text-sm text-muted-foreground",children:t("surveys.fillSurveyDetails")})]}),o.jsx(Y,{variant:"outline",size:"sm",onClick:()=>{P(null),k({})},children:t("surveys.changeTemplate")})]}),o.jsx("div",{className:"space-y-4",children:(U=l[j.template_id])==null?void 0:U.map(N=>o.jsxs("div",{className:"space-y-2",children:[o.jsxs(le,{htmlFor:N.field_label,className:"text-sm font-medium",children:[q(N,"field_label"),N.is_required&&o.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),it(N),q(N,"help_text")&&o.jsx("p",{className:"text-xs text-muted-foreground",children:q(N,"help_text")})]},N.field_id))}),o.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:o.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-700 dark:text-blue-300",children:[o.jsx(jw,{className:"h-4 w-4"}),o.jsx("span",{children:t("surveys.locationWillBeCaptured")})]})})]}):o.jsxs("div",{children:[o.jsx(le,{className:"text-base font-medium mb-4 block",children:t("surveys.selectTemplate")}),o.jsx("div",{className:"w-full max-w-full grid gap-4 grid-cols-1 md:grid-cols-2",children:a.filter(N=>N.is_active).map(N=>o.jsx(pe,{className:`w-full overflow-hidden cursor-pointer transition-all hover:shadow-md ${(j==null?void 0:j.template_id)===N.template_id?"ring-2 ring-primary":""}`,onClick:()=>he(N),children:o.jsx(_e,{className:"p-4",children:o.jsx("div",{className:"flex items-start gap-3",children:o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-medium text-sm truncate",children:q(N,"template_name")}),N.category&&o.jsx(Fe,{variant:"outline",className:"mt-1 text-xs",children:N.category}),q(N,"template_description")&&o.jsx("p",{className:"text-xs text-muted-foreground mt-2 line-clamp-2",children:q(N,"template_description")})]})})})},N.template_id))})]})}),o.jsxs("div",{className:"flex flex-col-reverse sm:flex-row gap-2",children:[o.jsx(Y,{variant:"outline",onClick:()=>{b(!1),P(null),k({})},className:"w-full sm:w-auto",children:t("buttons.cancel")}),j&&o.jsx(Y,{onClick:rt,disabled:!j,className:"w-full sm:w-auto",children:t("surveys.submitSurvey")})]})]})]})}),o.jsx(kr,{className:"flex-1",children:ee.length===0?o.jsx(pe,{children:o.jsxs(_e,{className:"text-center py-12",children:[o.jsx(Qo,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:t("surveys.noSurveysFound")}),o.jsx("p",{className:"text-muted-foreground",children:t(h?"surveys.noSurveysFoundDesc":"surveys.noSurveysYet")})]})}):o.jsx("div",{className:`w-full max-w-full grid gap-4 md:grid-cols-2 lg:grid-cols-3 ${r?"rtl":""}`,children:ee.map(N=>o.jsxs(pe,{className:"w-full overflow-hidden hover:shadow-lg transition-all duration-200 cursor-pointer",children:[o.jsx($e,{className:"pb-3",children:o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-base truncate",children:N.survey_name||`${t("surveys.survey")} #${N.survey_id}`}),o.jsx("p",{className:"text-sm text-muted-foreground truncate",children:q(N,"client_name")})]}),Re(N.status)]})}),o.jsxs(_e,{className:"pt-0 space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(Qd,{className:"h-4 w-4"}),o.jsx("span",{className:"truncate",children:N.client_company||t("surveys.noCompany")})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(jw,{className:"h-4 w-4"}),o.jsx("span",{className:"truncate",children:N.location_address||`${N.location_latitude.toFixed(4)}, ${N.location_longitude.toFixed(4)}`})]}),o.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(Ys,{className:"h-4 w-4"}),o.jsxs("span",{children:[t("surveys.createdBy"),": ",we(N.created_by)]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[o.jsx(Uo,{className:"h-3.5 w-3.5"}),o.jsx("span",{children:new Date(N.created_at).toLocaleDateString()})]}),o.jsxs(At,{children:[o.jsx(za,{asChild:!0,children:o.jsxs(Y,{variant:"outline",size:"sm",onClick:()=>v(N),children:[o.jsx(hd,{className:"h-4 w-4 mr-1"}),t("common.view")]})}),o.jsxs(Et,{className:"w-[95vw] sm:w-full sm:max-w-2xl lg:max-w-4xl max-h-[85vh] overflow-y-auto",children:[o.jsx(Pt,{children:o.jsx(Tt,{children:N.survey_name||`${t("surveys.survey")} #${N.survey_id}`})}),p&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium",children:t("surveys.clientName")}),o.jsx("p",{className:"text-sm",children:q(p,"client_name")})]}),o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium",children:t("surveys.clientCompany")}),o.jsx("p",{className:"text-sm",children:p.client_company||t("surveys.noCompany")})]}),o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium",children:t("surveys.contact")}),o.jsx("p",{className:"text-sm",children:p.client_contact||t("surveys.noContact")})]}),o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium",children:t("surveys.email")}),o.jsx("p",{className:"text-sm",children:p.client_email||t("surveys.noEmail")})]})]}),o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium",children:t("surveys.location")}),o.jsx("p",{className:"text-sm",children:p.location_address||`${p.location_latitude.toFixed(6)}, ${p.location_longitude.toFixed(6)}`})]}),o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium",children:t("surveys.responses")}),o.jsx("div",{className:"mt-2 space-y-2",children:p.survey_responses&&Object.keys(p.survey_responses).length>0?Object.entries(p.survey_responses).map(([z,A])=>{const G=typeof A=="object"&&A!==null&&"bucket"in A&&"path"in A&&"url"in A;return o.jsxs("div",{className:"flex flex-col gap-2 p-3 bg-muted/30 rounded-lg",children:[o.jsxs("div",{className:"font-medium text-sm text-primary",children:[z,":"]}),G?o.jsx("div",{className:"mt-2",children:o.jsx("img",{src:A.url,alt:z,className:"w-full max-w-md h-auto rounded-lg border object-cover"})}):o.jsx("div",{className:"text-sm text-muted-foreground break-words",children:Array.isArray(A)?A.join(", "):typeof A=="object"?JSON.stringify(A):String(A||"N/A")})]},z)}):o.jsx("div",{className:"text-sm text-muted-foreground italic p-3 bg-muted/30 rounded-lg",children:"No responses recorded"})})]})]})]})]})]})]})]})]},N.survey_id))})})]}),o.jsxs(Jn,{value:"templates",className:"space-y-4 flex-1 flex flex-col",children:[((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="manager")&&o.jsx("div",{className:"flex justify-end p-4 pb-0",children:o.jsxs(Y,{onClick:()=>O(!0),size:"lg",className:"w-full shadow-lg hover:shadow-xl transition-all",children:[o.jsx(It,{className:"h-5 w-5 mr-2"}),t("surveys.createTemplate")]})}),o.jsx(kr,{className:"flex-1",children:ge.length===0?o.jsx(pe,{children:o.jsxs(_e,{className:"text-center py-12",children:[o.jsx(Qo,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:t("surveys.noTemplatesFound")}),o.jsx("p",{className:"text-muted-foreground",children:t(h?"surveys.noTemplatesFoundDesc":"surveys.noTemplatesYet")})]})}):o.jsx("div",{className:`w-full max-w-full grid gap-4 md:grid-cols-2 lg:grid-cols-3 ${r?"rtl":""}`,children:ge.map(N=>o.jsxs(pe,{className:"w-full overflow-hidden hover:shadow-lg transition-all duration-200",children:[o.jsx($e,{className:"pb-3",children:o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-base truncate",children:q(N,"template_name")}),N.category&&o.jsx(Fe,{variant:"outline",className:"mt-1 text-xs",children:N.category})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[N.is_default&&o.jsx(Fe,{variant:"default",className:"text-xs",children:t("surveys.default")}),N.is_active?o.jsx(dd,{className:"h-4 w-4 text-green-500"}):o.jsx(UI,{className:"h-4 w-4 text-red-500"})]})]})}),o.jsxs(_e,{className:"pt-0 space-y-3",children:[q(N,"template_description")&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:q(N,"template_description")}),o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[o.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[o.jsx(Uo,{className:"h-3.5 w-3.5"}),o.jsx("span",{children:new Date(N.created_at).toLocaleDateString()})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(At,{children:[o.jsx(za,{asChild:!0,children:o.jsxs(Y,{variant:"outline",size:"sm",onClick:()=>Ce(N),children:[o.jsx(hd,{className:"h-4 w-4 mr-1"}),t("common.view")]})}),o.jsxs(Et,{className:"w-[95vw] sm:w-full sm:max-w-2xl lg:max-w-4xl max-h-[85vh] overflow-y-auto",children:[o.jsx(Pt,{children:o.jsx(Tt,{children:q(g||N,"template_name")})}),g&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium",children:t("surveys.category")}),o.jsx("p",{className:"text-sm",children:g.category||t("surveys.noCategory")})]}),o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium",children:t("surveys.status")}),o.jsxs("div",{className:"flex items-center gap-2",children:[g.is_active?o.jsx(Fe,{variant:"default",className:"bg-green-500",children:t("surveys.active")}):o.jsx(Fe,{variant:"secondary",children:t("surveys.inactive")}),g.is_default&&o.jsx(Fe,{variant:"default",children:t("surveys.default")})]})]})]}),o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium",children:t("surveys.description")}),o.jsx("p",{className:"text-sm mt-1",children:q(g,"template_description")||t("surveys.noDescription")})]}),o.jsxs("div",{children:[o.jsxs(le,{className:"text-sm font-medium",children:[t("surveys.fields")," (",x.length,")"]}),o.jsx("div",{className:"mt-2 space-y-2",children:x.length===0?o.jsx("p",{className:"text-sm text-muted-foreground",children:t("surveys.noFields")}):x.sort((z,A)=>z.field_order-A.field_order).map(z=>o.jsx("div",{className:"border rounded-lg p-3 bg-muted/30",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(Fe,{variant:"outline",className:"text-xs",children:z.field_type}),o.jsx("span",{className:"text-sm font-medium",children:q(z,"field_label")}),z.is_required&&o.jsx("span",{className:"text-red-500 text-sm",children:"*"})]}),q(z,"help_text")&&o.jsx("p",{className:"text-xs text-muted-foreground",children:q(z,"help_text")})]}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:["#",z.field_order]})]})},z.field_id))})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium",children:t("surveys.created")}),o.jsx("p",{children:new Date(g.created_at).toLocaleString()})]}),o.jsxs("div",{children:[o.jsx(le,{className:"text-sm font-medium",children:t("surveys.updated")}),o.jsx("p",{children:new Date(g.updated_at).toLocaleString()})]})]})]})]})]}),((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="manager")&&o.jsxs(ho,{children:[o.jsx(Tc,{asChild:!0,children:o.jsx(Y,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:z=>{z.stopPropagation(),I(N.template_id)},children:o.jsx(an,{className:"h-4 w-4"})})}),o.jsxs(ca,{onClick:z=>z.stopPropagation(),children:[o.jsxs(ua,{children:[o.jsx(ha,{children:t("surveys.deleteTemplate")}),o.jsx(fa,{children:t("surveys.deleteTemplateConfirmation",{name:q(N,"template_name")})})]}),o.jsxs(da,{children:[o.jsx(pa,{children:t("buttons.cancel")}),o.jsx(ma,{onClick:z=>{z.stopPropagation(),Te(N.template_id)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:t("buttons.delete")})]})]})]})]})]})]})]},N.template_id))})})]})]}),o.jsx(At,{open:X,onOpenChange:O,children:o.jsxs(Et,{className:"w-[95vw] sm:w-full sm:max-w-2xl lg:max-w-4xl max-h-[85vh] overflow-y-auto",children:[o.jsxs(Pt,{children:[o.jsx(Tt,{children:t("surveys.createTemplateTitle")}),o.jsx(Kt,{children:t("surveys.createTemplateDesc")})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(le,{htmlFor:"template_name",children:[t("surveys.templateName")," *"]}),o.jsx(ke,{id:"template_name",value:F.template_name,onChange:N=>T(z=>({...z,template_name:N.target.value})),placeholder:t("surveys.templateName")})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{htmlFor:"category",children:t("surveys.category")}),o.jsxs(ze,{value:F.category,onValueChange:N=>T(z=>({...z,category:N})),children:[o.jsx(Ue,{children:o.jsx(We,{placeholder:t("surveys.selectCategory")})}),o.jsxs(Be,{children:[o.jsx(ae,{value:"customer_satisfaction",children:t("surveys.customerSatisfaction")}),o.jsx(ae,{value:"product_feedback",children:t("surveys.productFeedback")}),o.jsx(ae,{value:"service_quality",children:t("surveys.serviceQuality")}),o.jsx(ae,{value:"general",children:t("surveys.general")})]})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{htmlFor:"template_description",children:t("surveys.description")}),o.jsx(Ur,{id:"template_description",value:F.template_description,onChange:N=>T(z=>({...z,template_description:N.target.value})),placeholder:t("surveys.description"),rows:3})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:"is_active",checked:F.is_active,onChange:N=>T(z=>({...z,is_active:N.target.checked})),className:"rounded"}),o.jsx(le,{htmlFor:"is_active",children:t("surveys.isActive")})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("h3",{className:"text-lg font-semibold",children:t("surveys.fields")})}),o.jsx("div",{className:"space-y-3",children:B.map((N,z)=>{var A,G,H;return o.jsx(pe,{className:"p-4",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[o.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>W(z,Math.max(0,z-1)),disabled:z===0,children:o.jsx(OI,{className:"h-4 w-4"})}),o.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>W(z,Math.min(B.length-1,z+1)),disabled:z===B.length-1,children:o.jsx(PI,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"flex-1 space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(le,{children:[t("surveys.fieldLabel")," *"]}),o.jsx(ke,{value:N.field_label,onChange:te=>Pe(z,{field_label:te.target.value}),placeholder:t("surveys.fieldLabel")})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(le,{children:[t("surveys.fieldType")," *"]}),o.jsxs(ze,{value:N.field_type,onValueChange:te=>Pe(z,{field_type:te}),children:[o.jsx(Ue,{children:o.jsx(We,{})}),o.jsxs(Be,{children:[o.jsx(ae,{value:"text",children:t("surveys.text")}),o.jsx(ae,{value:"textarea",children:t("surveys.textarea")}),o.jsx(ae,{value:"email",children:t("surveys.email")}),o.jsx(ae,{value:"select",children:t("surveys.select")}),o.jsx(ae,{value:"multiselect",children:t("surveys.multiselect")}),o.jsx(ae,{value:"radio",children:t("surveys.radio")}),o.jsx(ae,{value:"checkbox",children:t("surveys.checkbox")}),o.jsx(ae,{value:"image",children:"Image"})]})]})]})]}),(N.field_type==="select"||N.field_type==="multiselect"||N.field_type==="radio")&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{children:t("surveys.options")}),o.jsx(Ur,{defaultValue:((G=(A=N.field_options)==null?void 0:A.options)==null?void 0:G.join(`
`))||"",onBlur:te=>{const ve=te.target.value.split(/[\n\s]+/).filter($=>$.trim()).map($=>$.trim());Pe(z,{field_options:{options:ve,allow_multiple:N.field_type==="multiselect"}})},placeholder:"Enter options separated by spaces or new lines (e.g., POS CRM ERP)",rows:3}),((H=N.field_options)==null?void 0:H.options)&&N.field_options.options.length>0&&o.jsxs("p",{className:"text-xs text-muted-foreground",children:[N.field_options.options.length," option(s): ",N.field_options.options.join(", ")]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:`required-${z}`,checked:N.is_required,onChange:te=>Pe(z,{is_required:te.target.checked}),className:"rounded"}),o.jsx(le,{htmlFor:`required-${z}`,children:t("surveys.isRequired")})]})]}),o.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>be(z),className:"text-red-500 hover:text-red-700",children:o.jsx(an,{className:"h-4 w-4"})})]})},z)})}),o.jsx("div",{className:"flex justify-center pt-4",children:o.jsxs(Y,{onClick:ie,size:"sm",variant:"outline",children:[o.jsx(It,{className:"h-4 w-4 mr-2"}),t("surveys.addField")]})})]})]}),o.jsxs(rr,{children:[o.jsx(Y,{variant:"outline",onClick:()=>O(!1),children:t("buttons.cancel")}),o.jsx(Y,{onClick:V,disabled:!F.template_name.trim(),children:t("surveys.createTemplate")})]})]})})]})}const nz=()=>o.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50",children:o.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md text-center",children:[o.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Unauthorized Access"}),o.jsx("p",{className:"mb-4",children:"You don't have permission to view this page."}),o.jsx("button",{onClick:()=>window.history.back(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Go Back"})]})});console.log(" SUPABASE URL (runtime):","https://studio.middar.com/");const sz=()=>{const{user:t}=St();return(t==null?void 0:t.role)==="client"?o.jsx(qB,{}):o.jsx(HB,{})},c0=({children:t})=>o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-900 dark:to-slate-800",children:t});function az(){return o.jsx(JO,{children:o.jsx(vS,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:o.jsx(EM,{children:o.jsx(kM,{children:o.jsx(oz,{})})})})})}function oz(){const{isRTL:t}=io(),e=os(),{t:r}=gt();return f.useEffect(()=>{document.documentElement.dir=t?"rtl":"ltr"},[t]),f.useEffect(()=>{const n=e.pathname.split("/").filter(c=>c),s="Middar CRM";if(n.length===0){document.title=s;return}const a=n[n.length-1],i={dashboard:"navigation.dashboard",projects:"navigation.projects",users:"navigation.users",settings:"navigation.settings",leads:"navigation.leads",tickets:"navigation.tickets",tasks:"navigation.tasks",teams:"navigation.teams",clients:"navigation.clients",chats:"navigation.chats",surveys:"navigation.surveys","client-portal":"navigation.clientPortal","partner-dashboard":"navigation.partnerDashboard",employee_dashboard:"navigation.empDashboard","partner-employee-dashboard":"auth.partnerEmployee"};let l="";if(i[a])l=r(i[a]);else if(/^\d+$/.test(a)||a.length>20)if(n.length>1){const c=n[n.length-2];i[c]?l=`${r(i[c])} - ${a}`:l=a}else l=a;else l=a.split("-").map(c=>c.charAt(0).toUpperCase()+c.slice(1)).join(" ");document.title=`${l} | ${s}`},[e,r]),o.jsxs(VO,{children:[o.jsx(vt,{path:"/login",element:o.jsx(c0,{children:o.jsx(cL,{})})}),o.jsx(vt,{path:"/signup",element:o.jsx(c0,{children:o.jsx(uL,{})})}),o.jsx(vt,{path:"/unauthorized",element:o.jsx(nz,{})}),o.jsx(vt,{path:"/auth/callback",element:o.jsx(ZB,{})}),o.jsx(vt,{path:"/",element:o.jsx(XB,{})}),o.jsx(vt,{path:"/dashboard",element:o.jsx(ir,{allowedRoles:["admin","manager"],children:o.jsx(Vt,{children:o.jsx(mU,{})})})}),o.jsx(vt,{path:"/employee_dashboard",element:o.jsx(ir,{allowedRoles:["employee","team_leader"],children:o.jsx(Vt,{children:o.jsx(wU,{})})})}),o.jsx(vt,{path:"/leads",element:o.jsx(ir,{allowedRoles:["admin","manager","employee","team_leader"],children:o.jsx(Vt,{children:o.jsx(mB,{})})})}),o.jsx(vt,{path:"/projects",element:o.jsx(ir,{allowedRoles:["admin","manager","employee","team_leader"],children:o.jsx(Vt,{children:o.jsx(xB,{})})})}),o.jsx(vt,{path:"/tasks",element:o.jsx(ir,{allowedRoles:["admin","manager","employee","team_leader"],children:o.jsx(Vt,{children:o.jsx(gB,{})})})}),o.jsx(vt,{path:"/tickets",element:o.jsx(ir,{allowedRoles:["admin","manager","employee","team_leader","client"],children:o.jsx(Vt,{children:o.jsx(vB,{})})})}),o.jsx(vt,{path:"/users",element:o.jsx(ir,{allowedRoles:["admin"],children:o.jsx(Vt,{children:o.jsx(FB,{})})})}),o.jsx(vt,{path:"/teams",element:o.jsx(ir,{allowedRoles:["admin","manager","employee","team_leader"],children:o.jsx(Vt,{children:o.jsx($B,{})})})}),o.jsx(vt,{path:"/chats",element:o.jsx(ir,{allowedRoles:["admin","manager","employee","team_leader","client"],children:o.jsx(Vt,{children:o.jsx(sz,{})})})}),o.jsx(vt,{path:"/client-portal",element:o.jsx(ir,{allowedRoles:["client"],children:o.jsx(Vt,{children:o.jsx(QB,{})})})}),o.jsx(vt,{path:"/partner-dashboard",element:o.jsx(ir,{allowedRoles:["partner"],children:o.jsx(Vt,{children:o.jsx(ez,{})})})}),o.jsx(vt,{path:"/partner-employee-dashboard",element:o.jsx(ir,{allowedRoles:["partner_employee"],children:o.jsx(Vt,{children:o.jsx(tz,{})})})}),o.jsx(vt,{path:"/project/:id",element:o.jsx(ir,{allowedRoles:["admin","manager"],children:o.jsx(JB,{})})}),o.jsx(vt,{path:"/surveys",element:o.jsx(ir,{allowedRoles:["admin","manager","employee","team_leader"],children:o.jsx(Vt,{children:o.jsx(rz,{})})})}),o.jsx(vt,{path:"*",element:o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("h1",{children:"404 - Page Not Found"})})})]})}const iz=new iT({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:10*60*1e3}}});Ab(document.getElementById("root")).render(o.jsx(pR,{i18n:dt,children:o.jsx(hT,{client:iz,children:o.jsx(vS,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:o.jsx(az,{})})})}));
