var Nx=t=>{throw TypeError(t)};var nf=(t,e,r)=>e.has(t)||Nx("Cannot "+r);var A=(t,e,r)=>(nf(t,e,"read from private field"),r?r.call(t):e.get(t)),Ne=(t,e,r)=>e.has(t)?Nx("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),pe=(t,e,r,n)=>(nf(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Be=(t,e,r)=>(nf(t,e,"access private method"),r);var Xc=(t,e,r,n)=>({set _(s){pe(t,e,s,r)},get _(){return A(t,e,n)}});function Y0(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();function Q0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function J0(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var X0={exports:{}},eh={},Z0={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yc=Symbol.for("react.element"),ZE=Symbol.for("react.portal"),eP=Symbol.for("react.fragment"),tP=Symbol.for("react.strict_mode"),rP=Symbol.for("react.profiler"),nP=Symbol.for("react.provider"),sP=Symbol.for("react.context"),aP=Symbol.for("react.forward_ref"),oP=Symbol.for("react.suspense"),iP=Symbol.for("react.memo"),lP=Symbol.for("react.lazy"),kx=Symbol.iterator;function cP(t){return t===null||typeof t!="object"?null:(t=kx&&t[kx]||t["@@iterator"],typeof t=="function"?t:null)}var e_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},t_=Object.assign,r_={};function Fi(t,e,r){this.props=t,this.context=e,this.refs=r_,this.updater=r||e_}Fi.prototype.isReactComponent={};Fi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function n_(){}n_.prototype=Fi.prototype;function ng(t,e,r){this.props=t,this.context=e,this.refs=r_,this.updater=r||e_}var sg=ng.prototype=new n_;sg.constructor=ng;t_(sg,Fi.prototype);sg.isPureReactComponent=!0;var Cx=Array.isArray,s_=Object.prototype.hasOwnProperty,ag={current:null},a_={key:!0,ref:!0,__self:!0,__source:!0};function o_(t,e,r){var n,s={},o=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(o=""+e.key),e)s_.call(e,n)&&!a_.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:yc,type:t,key:o,ref:i,props:s,_owner:ag.current}}function uP(t,e){return{$$typeof:yc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function og(t){return typeof t=="object"&&t!==null&&t.$$typeof===yc}function dP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Ex=/\/+/g;function sf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dP(""+t.key):e.toString(36)}function Mu(t,e,r,n,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case yc:case ZE:i=!0}}if(i)return i=t,s=s(i),t=n===""?"."+sf(i,0):n,Cx(s)?(r="",t!=null&&(r=t.replace(Ex,"$&/")+"/"),Mu(s,e,r,"",function(u){return u})):s!=null&&(og(s)&&(s=uP(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Ex,"$&/")+"/")+t)),e.push(s)),1;if(i=0,n=n===""?".":n+":",Cx(t))for(var l=0;l<t.length;l++){o=t[l];var c=n+sf(o,l);i+=Mu(o,e,r,c,s)}else if(c=cP(t),typeof c=="function")for(t=c.call(t),l=0;!(o=t.next()).done;)o=o.value,c=n+sf(o,l++),i+=Mu(o,e,r,c,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Zc(t,e,r){if(t==null)return t;var n=[],s=0;return Mu(t,n,"","",function(o){return e.call(r,o,s++)}),n}function hP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ir={current:null},Iu={transition:null},fP={ReactCurrentDispatcher:ir,ReactCurrentBatchConfig:Iu,ReactCurrentOwner:ag};function i_(){throw Error("act(...) is not supported in production builds of React.")}Le.Children={map:Zc,forEach:function(t,e,r){Zc(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Zc(t,function(){e++}),e},toArray:function(t){return Zc(t,function(e){return e})||[]},only:function(t){if(!og(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Le.Component=Fi;Le.Fragment=eP;Le.Profiler=rP;Le.PureComponent=ng;Le.StrictMode=tP;Le.Suspense=oP;Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fP;Le.act=i_;Le.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=t_({},t.props),s=t.key,o=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,i=ag.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)s_.call(e,c)&&!a_.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:yc,type:t.type,key:s,ref:o,props:n,_owner:i}};Le.createContext=function(t){return t={$$typeof:sP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:nP,_context:t},t.Consumer=t};Le.createElement=o_;Le.createFactory=function(t){var e=o_.bind(null,t);return e.type=t,e};Le.createRef=function(){return{current:null}};Le.forwardRef=function(t){return{$$typeof:aP,render:t}};Le.isValidElement=og;Le.lazy=function(t){return{$$typeof:lP,_payload:{_status:-1,_result:t},_init:hP}};Le.memo=function(t,e){return{$$typeof:iP,type:t,compare:e===void 0?null:e}};Le.startTransition=function(t){var e=Iu.transition;Iu.transition={};try{t()}finally{Iu.transition=e}};Le.unstable_act=i_;Le.useCallback=function(t,e){return ir.current.useCallback(t,e)};Le.useContext=function(t){return ir.current.useContext(t)};Le.useDebugValue=function(){};Le.useDeferredValue=function(t){return ir.current.useDeferredValue(t)};Le.useEffect=function(t,e){return ir.current.useEffect(t,e)};Le.useId=function(){return ir.current.useId()};Le.useImperativeHandle=function(t,e,r){return ir.current.useImperativeHandle(t,e,r)};Le.useInsertionEffect=function(t,e){return ir.current.useInsertionEffect(t,e)};Le.useLayoutEffect=function(t,e){return ir.current.useLayoutEffect(t,e)};Le.useMemo=function(t,e){return ir.current.useMemo(t,e)};Le.useReducer=function(t,e,r){return ir.current.useReducer(t,e,r)};Le.useRef=function(t){return ir.current.useRef(t)};Le.useState=function(t){return ir.current.useState(t)};Le.useSyncExternalStore=function(t,e,r){return ir.current.useSyncExternalStore(t,e,r)};Le.useTransition=function(){return ir.current.useTransition()};Le.version="18.3.1";Z0.exports=Le;var f=Z0.exports;const Ts=Q0(f),ig=Y0({__proto__:null,default:Ts},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mP=f,pP=Symbol.for("react.element"),gP=Symbol.for("react.fragment"),vP=Object.prototype.hasOwnProperty,xP=mP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yP={key:!0,ref:!0,__self:!0,__source:!0};function l_(t,e,r){var n,s={},o=null,i=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)vP.call(e,n)&&!yP.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:pP,type:t,key:o,ref:i,props:s,_owner:xP.current}}eh.Fragment=gP;eh.jsx=l_;eh.jsxs=l_;X0.exports=eh;var a=X0.exports,c_={exports:{}},Ir={},u_={exports:{}},d_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(C,L){var I=C.length;C.push(L);e:for(;0<I;){var W=I-1>>>1,K=C[W];if(0<s(K,L))C[W]=L,C[I]=K,I=W;else break e}}function r(C){return C.length===0?null:C[0]}function n(C){if(C.length===0)return null;var L=C[0],I=C.pop();if(I!==L){C[0]=I;e:for(var W=0,K=C.length,te=K>>>1;W<te;){var O=2*(W+1)-1,re=C[O],de=O+1,ae=C[de];if(0>s(re,I))de<K&&0>s(ae,re)?(C[W]=ae,C[de]=I,W=de):(C[W]=re,C[O]=I,W=O);else if(de<K&&0>s(ae,I))C[W]=ae,C[de]=I,W=de;else break e}}return L}function s(C,L){var I=C.sortIndex-L.sortIndex;return I!==0?I:C.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,h=null,m=3,p=!1,v=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(C){for(var L=r(u);L!==null;){if(L.callback===null)n(u);else if(L.startTime<=C)n(u),L.sortIndex=L.expirationTime,e(c,L);else break;L=r(u)}}function b(C){if(g=!1,_(C),!v)if(r(c)!==null)v=!0,M(j);else{var L=r(u);L!==null&&D(b,L.startTime-C)}}function j(C,L){v=!1,g&&(g=!1,y(E),E=-1),p=!0;var I=m;try{for(_(L),h=r(c);h!==null&&(!(h.expirationTime>L)||C&&!z());){var W=h.callback;if(typeof W=="function"){h.callback=null,m=h.priorityLevel;var K=W(h.expirationTime<=L);L=t.unstable_now(),typeof K=="function"?h.callback=K:h===r(c)&&n(c),_(L)}else n(c);h=r(c)}if(h!==null)var te=!0;else{var O=r(u);O!==null&&D(b,O.startTime-L),te=!1}return te}finally{h=null,m=I,p=!1}}var N=!1,k=null,E=-1,T=5,P=-1;function z(){return!(t.unstable_now()-P<T)}function B(){if(k!==null){var C=t.unstable_now();P=C;var L=!0;try{L=k(!0,C)}finally{L?Q():(N=!1,k=null)}}else N=!1}var Q;if(typeof x=="function")Q=function(){x(B)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Y=R.port2;R.port1.onmessage=B,Q=function(){Y.postMessage(null)}}else Q=function(){w(B,0)};function M(C){k=C,N||(N=!0,Q())}function D(C,L){E=w(function(){C(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(C){C.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,M(j))},t.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<C?Math.floor(1e3/C):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(C){switch(m){case 1:case 2:case 3:var L=3;break;default:L=m}var I=m;m=L;try{return C()}finally{m=I}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(C,L){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var I=m;m=C;try{return L()}finally{m=I}},t.unstable_scheduleCallback=function(C,L,I){var W=t.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?W+I:W):I=W,C){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=I+K,C={id:d++,callback:L,priorityLevel:C,startTime:I,expirationTime:K,sortIndex:-1},I>W?(C.sortIndex=I,e(u,C),r(c)===null&&C===r(u)&&(g?(y(E),E=-1):g=!0,D(b,I-W))):(C.sortIndex=K,e(c,C),v||p||(v=!0,M(j))),C},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(C){var L=m;return function(){var I=m;m=L;try{return C.apply(this,arguments)}finally{m=I}}}})(d_);u_.exports=d_;var wP=u_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _P=f,Ar=wP;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h_=new Set,Ll={};function uo(t,e){wi(t,e),wi(t+"Capture",e)}function wi(t,e){for(Ll[t]=e,t=0;t<e.length;t++)h_.add(e[t])}var ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hm=Object.prototype.hasOwnProperty,bP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Px={},Tx={};function jP(t){return hm.call(Tx,t)?!0:hm.call(Px,t)?!1:bP.test(t)?Tx[t]=!0:(Px[t]=!0,!1)}function SP(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function NP(t,e,r,n){if(e===null||typeof e>"u"||SP(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function lr(t,e,r,n,s,o,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=i}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$t[t]=new lr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$t[e]=new lr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$t[t]=new lr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$t[t]=new lr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$t[t]=new lr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$t[t]=new lr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$t[t]=new lr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$t[t]=new lr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$t[t]=new lr(t,5,!1,t.toLowerCase(),null,!1,!1)});var lg=/[\-:]([a-z])/g;function cg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(lg,cg);$t[e]=new lr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(lg,cg);$t[e]=new lr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(lg,cg);$t[e]=new lr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$t[t]=new lr(t,1,!1,t.toLowerCase(),null,!1,!1)});$t.xlinkHref=new lr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$t[t]=new lr(t,1,!1,t.toLowerCase(),null,!0,!0)});function ug(t,e,r,n){var s=$t.hasOwnProperty(e)?$t[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(NP(e,r,s,n)&&(r=null),n||s===null?jP(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var ms=_P.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,eu=Symbol.for("react.element"),Mo=Symbol.for("react.portal"),Io=Symbol.for("react.fragment"),dg=Symbol.for("react.strict_mode"),fm=Symbol.for("react.profiler"),f_=Symbol.for("react.provider"),m_=Symbol.for("react.context"),hg=Symbol.for("react.forward_ref"),mm=Symbol.for("react.suspense"),pm=Symbol.for("react.suspense_list"),fg=Symbol.for("react.memo"),Ds=Symbol.for("react.lazy"),p_=Symbol.for("react.offscreen"),Rx=Symbol.iterator;function tl(t){return t===null||typeof t!="object"?null:(t=Rx&&t[Rx]||t["@@iterator"],typeof t=="function"?t:null)}var ft=Object.assign,af;function hl(t){if(af===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);af=e&&e[1]||""}return`
`+af+t}var of=!1;function lf(t,e){if(!t||of)return"";of=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=n.stack.split(`
`),i=s.length-1,l=o.length-1;1<=i&&0<=l&&s[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==o[l]){var c=`
`+s[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=l);break}}}finally{of=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?hl(t):""}function kP(t){switch(t.tag){case 5:return hl(t.type);case 16:return hl("Lazy");case 13:return hl("Suspense");case 19:return hl("SuspenseList");case 0:case 2:case 15:return t=lf(t.type,!1),t;case 11:return t=lf(t.type.render,!1),t;case 1:return t=lf(t.type,!0),t;default:return""}}function gm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Io:return"Fragment";case Mo:return"Portal";case fm:return"Profiler";case dg:return"StrictMode";case mm:return"Suspense";case pm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case m_:return(t.displayName||"Context")+".Consumer";case f_:return(t._context.displayName||"Context")+".Provider";case hg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case fg:return e=t.displayName||null,e!==null?e:gm(t.type)||"Memo";case Ds:e=t._payload,t=t._init;try{return gm(t(e))}catch{}}return null}function CP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gm(e);case 8:return e===dg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function la(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function g_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function EP(t){var e=g_(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,o.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function tu(t){t._valueTracker||(t._valueTracker=EP(t))}function v_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=g_(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function nd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vm(t,e){var r=e.checked;return ft({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Ox(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=la(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function x_(t,e){e=e.checked,e!=null&&ug(t,"checked",e,!1)}function xm(t,e){x_(t,e);var r=la(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ym(t,e.type,r):e.hasOwnProperty("defaultValue")&&ym(t,e.type,la(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Dx(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function ym(t,e,r){(e!=="number"||nd(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var fl=Array.isArray;function Go(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+la(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function wm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return ft({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ax(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ne(92));if(fl(r)){if(1<r.length)throw Error(ne(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:la(r)}}function y_(t,e){var r=la(e.value),n=la(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Mx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function w_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _m(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?w_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ru,__=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ru=ru||document.createElement("div"),ru.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ru.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fl(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var wl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PP=["Webkit","ms","Moz","O"];Object.keys(wl).forEach(function(t){PP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wl[e]=wl[t]})});function b_(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||wl.hasOwnProperty(t)&&wl[t]?(""+e).trim():e+"px"}function j_(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=b_(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var TP=ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bm(t,e){if(e){if(TP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function jm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sm=null;function mg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Nm=null,Yo=null,Qo=null;function Ix(t){if(t=bc(t)){if(typeof Nm!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=ah(e),Nm(t.stateNode,t.type,e))}}function S_(t){Yo?Qo?Qo.push(t):Qo=[t]:Yo=t}function N_(){if(Yo){var t=Yo,e=Qo;if(Qo=Yo=null,Ix(t),e)for(t=0;t<e.length;t++)Ix(e[t])}}function k_(t,e){return t(e)}function C_(){}var cf=!1;function E_(t,e,r){if(cf)return t(e,r);cf=!0;try{return k_(t,e,r)}finally{cf=!1,(Yo!==null||Qo!==null)&&(C_(),N_())}}function $l(t,e){var r=t.stateNode;if(r===null)return null;var n=ah(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ne(231,e,typeof r));return r}var km=!1;if(ss)try{var rl={};Object.defineProperty(rl,"passive",{get:function(){km=!0}}),window.addEventListener("test",rl,rl),window.removeEventListener("test",rl,rl)}catch{km=!1}function RP(t,e,r,n,s,o,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var _l=!1,sd=null,ad=!1,Cm=null,OP={onError:function(t){_l=!0,sd=t}};function DP(t,e,r,n,s,o,i,l,c){_l=!1,sd=null,RP.apply(OP,arguments)}function AP(t,e,r,n,s,o,i,l,c){if(DP.apply(this,arguments),_l){if(_l){var u=sd;_l=!1,sd=null}else throw Error(ne(198));ad||(ad=!0,Cm=u)}}function ho(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function P_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Lx(t){if(ho(t)!==t)throw Error(ne(188))}function MP(t){var e=t.alternate;if(!e){if(e=ho(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return Lx(s),t;if(o===n)return Lx(s),e;o=o.sibling}throw Error(ne(188))}if(r.return!==n.return)r=s,n=o;else{for(var i=!1,l=s.child;l;){if(l===r){i=!0,r=s,n=o;break}if(l===n){i=!0,n=s,r=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===r){i=!0,r=o,n=s;break}if(l===n){i=!0,n=o,r=s;break}l=l.sibling}if(!i)throw Error(ne(189))}}if(r.alternate!==n)throw Error(ne(190))}if(r.tag!==3)throw Error(ne(188));return r.stateNode.current===r?t:e}function T_(t){return t=MP(t),t!==null?R_(t):null}function R_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=R_(t);if(e!==null)return e;t=t.sibling}return null}var O_=Ar.unstable_scheduleCallback,Fx=Ar.unstable_cancelCallback,IP=Ar.unstable_shouldYield,LP=Ar.unstable_requestPaint,_t=Ar.unstable_now,FP=Ar.unstable_getCurrentPriorityLevel,pg=Ar.unstable_ImmediatePriority,D_=Ar.unstable_UserBlockingPriority,od=Ar.unstable_NormalPriority,$P=Ar.unstable_LowPriority,A_=Ar.unstable_IdlePriority,th=null,$n=null;function UP(t){if($n&&typeof $n.onCommitFiberRoot=="function")try{$n.onCommitFiberRoot(th,t,void 0,(t.current.flags&128)===128)}catch{}}var mn=Math.clz32?Math.clz32:WP,BP=Math.log,zP=Math.LN2;function WP(t){return t>>>=0,t===0?32:31-(BP(t)/zP|0)|0}var nu=64,su=4194304;function ml(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function id(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,o=t.pingedLanes,i=r&268435455;if(i!==0){var l=i&~s;l!==0?n=ml(l):(o&=i,o!==0&&(n=ml(o)))}else i=r&~s,i!==0?n=ml(i):o!==0&&(n=ml(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-mn(e),s=1<<r,n|=t[r],e&=~s;return n}function VP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HP(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var i=31-mn(o),l=1<<i,c=s[i];c===-1?(!(l&r)||l&n)&&(s[i]=VP(l,e)):c<=e&&(t.expiredLanes|=l),o&=~l}}function Em(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function M_(){var t=nu;return nu<<=1,!(nu&4194240)&&(nu=64),t}function uf(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function wc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mn(e),t[e]=r}function qP(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-mn(r),o=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~o}}function gg(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-mn(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Je=0;function I_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var L_,vg,F_,$_,U_,Pm=!1,au=[],Xs=null,Zs=null,ea=null,Ul=new Map,Bl=new Map,Ms=[],KP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $x(t,e){switch(t){case"focusin":case"focusout":Xs=null;break;case"dragenter":case"dragleave":Zs=null;break;case"mouseover":case"mouseout":ea=null;break;case"pointerover":case"pointerout":Ul.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bl.delete(e.pointerId)}}function nl(t,e,r,n,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[s]},e!==null&&(e=bc(e),e!==null&&vg(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function GP(t,e,r,n,s){switch(e){case"focusin":return Xs=nl(Xs,t,e,r,n,s),!0;case"dragenter":return Zs=nl(Zs,t,e,r,n,s),!0;case"mouseover":return ea=nl(ea,t,e,r,n,s),!0;case"pointerover":var o=s.pointerId;return Ul.set(o,nl(Ul.get(o)||null,t,e,r,n,s)),!0;case"gotpointercapture":return o=s.pointerId,Bl.set(o,nl(Bl.get(o)||null,t,e,r,n,s)),!0}return!1}function B_(t){var e=La(t.target);if(e!==null){var r=ho(e);if(r!==null){if(e=r.tag,e===13){if(e=P_(r),e!==null){t.blockedOn=e,U_(t.priority,function(){F_(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Tm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Sm=n,r.target.dispatchEvent(n),Sm=null}else return e=bc(r),e!==null&&vg(e),t.blockedOn=r,!1;e.shift()}return!0}function Ux(t,e,r){Lu(t)&&r.delete(e)}function YP(){Pm=!1,Xs!==null&&Lu(Xs)&&(Xs=null),Zs!==null&&Lu(Zs)&&(Zs=null),ea!==null&&Lu(ea)&&(ea=null),Ul.forEach(Ux),Bl.forEach(Ux)}function sl(t,e){t.blockedOn===e&&(t.blockedOn=null,Pm||(Pm=!0,Ar.unstable_scheduleCallback(Ar.unstable_NormalPriority,YP)))}function zl(t){function e(s){return sl(s,t)}if(0<au.length){sl(au[0],t);for(var r=1;r<au.length;r++){var n=au[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Xs!==null&&sl(Xs,t),Zs!==null&&sl(Zs,t),ea!==null&&sl(ea,t),Ul.forEach(e),Bl.forEach(e),r=0;r<Ms.length;r++)n=Ms[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ms.length&&(r=Ms[0],r.blockedOn===null);)B_(r),r.blockedOn===null&&Ms.shift()}var Jo=ms.ReactCurrentBatchConfig,ld=!0;function QP(t,e,r,n){var s=Je,o=Jo.transition;Jo.transition=null;try{Je=1,xg(t,e,r,n)}finally{Je=s,Jo.transition=o}}function JP(t,e,r,n){var s=Je,o=Jo.transition;Jo.transition=null;try{Je=4,xg(t,e,r,n)}finally{Je=s,Jo.transition=o}}function xg(t,e,r,n){if(ld){var s=Tm(t,e,r,n);if(s===null)wf(t,e,n,cd,r),$x(t,n);else if(GP(s,t,e,r,n))n.stopPropagation();else if($x(t,n),e&4&&-1<KP.indexOf(t)){for(;s!==null;){var o=bc(s);if(o!==null&&L_(o),o=Tm(t,e,r,n),o===null&&wf(t,e,n,cd,r),o===s)break;s=o}s!==null&&n.stopPropagation()}else wf(t,e,n,null,r)}}var cd=null;function Tm(t,e,r,n){if(cd=null,t=mg(n),t=La(t),t!==null)if(e=ho(t),e===null)t=null;else if(r=e.tag,r===13){if(t=P_(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cd=t,null}function z_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FP()){case pg:return 1;case D_:return 4;case od:case $P:return 16;case A_:return 536870912;default:return 16}default:return 16}}var Ks=null,yg=null,Fu=null;function W_(){if(Fu)return Fu;var t,e=yg,r=e.length,n,s="value"in Ks?Ks.value:Ks.textContent,o=s.length;for(t=0;t<r&&e[t]===s[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===s[o-n];n++);return Fu=s.slice(t,1<n?1-n:void 0)}function $u(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ou(){return!0}function Bx(){return!1}function Lr(t){function e(r,n,s,o,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ou:Bx,this.isPropagationStopped=Bx,this}return ft(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ou)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ou)},persist:function(){},isPersistent:ou}),e}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wg=Lr($i),_c=ft({},$i,{view:0,detail:0}),XP=Lr(_c),df,hf,al,rh=ft({},_c,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_g,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==al&&(al&&t.type==="mousemove"?(df=t.screenX-al.screenX,hf=t.screenY-al.screenY):hf=df=0,al=t),df)},movementY:function(t){return"movementY"in t?t.movementY:hf}}),zx=Lr(rh),ZP=ft({},rh,{dataTransfer:0}),e2=Lr(ZP),t2=ft({},_c,{relatedTarget:0}),ff=Lr(t2),r2=ft({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),n2=Lr(r2),s2=ft({},$i,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),a2=Lr(s2),o2=ft({},$i,{data:0}),Wx=Lr(o2),i2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},l2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},c2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=c2[t])?!!e[t]:!1}function _g(){return u2}var d2=ft({},_c,{key:function(t){if(t.key){var e=i2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$u(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?l2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_g,charCode:function(t){return t.type==="keypress"?$u(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$u(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),h2=Lr(d2),f2=ft({},rh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vx=Lr(f2),m2=ft({},_c,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_g}),p2=Lr(m2),g2=ft({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),v2=Lr(g2),x2=ft({},rh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),y2=Lr(x2),w2=[9,13,27,32],bg=ss&&"CompositionEvent"in window,bl=null;ss&&"documentMode"in document&&(bl=document.documentMode);var _2=ss&&"TextEvent"in window&&!bl,V_=ss&&(!bg||bl&&8<bl&&11>=bl),Hx=" ",qx=!1;function H_(t,e){switch(t){case"keyup":return w2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function q_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Lo=!1;function b2(t,e){switch(t){case"compositionend":return q_(e);case"keypress":return e.which!==32?null:(qx=!0,Hx);case"textInput":return t=e.data,t===Hx&&qx?null:t;default:return null}}function j2(t,e){if(Lo)return t==="compositionend"||!bg&&H_(t,e)?(t=W_(),Fu=yg=Ks=null,Lo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return V_&&e.locale!=="ko"?null:e.data;default:return null}}var S2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!S2[t.type]:e==="textarea"}function K_(t,e,r,n){S_(n),e=ud(e,"onChange"),0<e.length&&(r=new wg("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var jl=null,Wl=null;function N2(t){sb(t,0)}function nh(t){var e=Uo(t);if(v_(e))return t}function k2(t,e){if(t==="change")return e}var G_=!1;if(ss){var mf;if(ss){var pf="oninput"in document;if(!pf){var Gx=document.createElement("div");Gx.setAttribute("oninput","return;"),pf=typeof Gx.oninput=="function"}mf=pf}else mf=!1;G_=mf&&(!document.documentMode||9<document.documentMode)}function Yx(){jl&&(jl.detachEvent("onpropertychange",Y_),Wl=jl=null)}function Y_(t){if(t.propertyName==="value"&&nh(Wl)){var e=[];K_(e,Wl,t,mg(t)),E_(N2,e)}}function C2(t,e,r){t==="focusin"?(Yx(),jl=e,Wl=r,jl.attachEvent("onpropertychange",Y_)):t==="focusout"&&Yx()}function E2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nh(Wl)}function P2(t,e){if(t==="click")return nh(e)}function T2(t,e){if(t==="input"||t==="change")return nh(e)}function R2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yn=typeof Object.is=="function"?Object.is:R2;function Vl(t,e){if(yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!hm.call(e,s)||!yn(t[s],e[s]))return!1}return!0}function Qx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jx(t,e){var r=Qx(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Qx(r)}}function Q_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Q_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function J_(){for(var t=window,e=nd();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=nd(t.document)}return e}function jg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function O2(t){var e=J_(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Q_(r.ownerDocument.documentElement,r)){if(n!==null&&jg(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,o=Math.min(n.start,s);n=n.end===void 0?o:Math.min(n.end,s),!t.extend&&o>n&&(s=n,n=o,o=s),s=Jx(r,o);var i=Jx(r,n);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var D2=ss&&"documentMode"in document&&11>=document.documentMode,Fo=null,Rm=null,Sl=null,Om=!1;function Xx(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Om||Fo==null||Fo!==nd(n)||(n=Fo,"selectionStart"in n&&jg(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Sl&&Vl(Sl,n)||(Sl=n,n=ud(Rm,"onSelect"),0<n.length&&(e=new wg("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Fo)))}function iu(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var $o={animationend:iu("Animation","AnimationEnd"),animationiteration:iu("Animation","AnimationIteration"),animationstart:iu("Animation","AnimationStart"),transitionend:iu("Transition","TransitionEnd")},gf={},X_={};ss&&(X_=document.createElement("div").style,"AnimationEvent"in window||(delete $o.animationend.animation,delete $o.animationiteration.animation,delete $o.animationstart.animation),"TransitionEvent"in window||delete $o.transitionend.transition);function sh(t){if(gf[t])return gf[t];if(!$o[t])return t;var e=$o[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in X_)return gf[t]=e[r];return t}var Z_=sh("animationend"),eb=sh("animationiteration"),tb=sh("animationstart"),rb=sh("transitionend"),nb=new Map,Zx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ma(t,e){nb.set(t,e),uo(e,[t])}for(var vf=0;vf<Zx.length;vf++){var xf=Zx[vf],A2=xf.toLowerCase(),M2=xf[0].toUpperCase()+xf.slice(1);ma(A2,"on"+M2)}ma(Z_,"onAnimationEnd");ma(eb,"onAnimationIteration");ma(tb,"onAnimationStart");ma("dblclick","onDoubleClick");ma("focusin","onFocus");ma("focusout","onBlur");ma(rb,"onTransitionEnd");wi("onMouseEnter",["mouseout","mouseover"]);wi("onMouseLeave",["mouseout","mouseover"]);wi("onPointerEnter",["pointerout","pointerover"]);wi("onPointerLeave",["pointerout","pointerover"]);uo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));uo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));uo("onBeforeInput",["compositionend","keypress","textInput","paste"]);uo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));uo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));uo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I2=new Set("cancel close invalid load scroll toggle".split(" ").concat(pl));function ey(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,AP(n,e,void 0,t),t.currentTarget=null}function sb(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;ey(s,l,u),o=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;ey(s,l,u),o=c}}}if(ad)throw t=Cm,ad=!1,Cm=null,t}function at(t,e){var r=e[Lm];r===void 0&&(r=e[Lm]=new Set);var n=t+"__bubble";r.has(n)||(ab(e,t,2,!1),r.add(n))}function yf(t,e,r){var n=0;e&&(n|=4),ab(r,t,n,e)}var lu="_reactListening"+Math.random().toString(36).slice(2);function Hl(t){if(!t[lu]){t[lu]=!0,h_.forEach(function(r){r!=="selectionchange"&&(I2.has(r)||yf(r,!1,t),yf(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[lu]||(e[lu]=!0,yf("selectionchange",!1,e))}}function ab(t,e,r,n){switch(z_(e)){case 1:var s=QP;break;case 4:s=JP;break;default:s=xg}r=s.bind(null,e,r,t),s=void 0,!km||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function wf(t,e,r,n,s){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;l!==null;){if(i=La(l),i===null)return;if(c=i.tag,c===5||c===6){n=o=i;continue e}l=l.parentNode}}n=n.return}E_(function(){var u=o,d=mg(r),h=[];e:{var m=nb.get(t);if(m!==void 0){var p=wg,v=t;switch(t){case"keypress":if($u(r)===0)break e;case"keydown":case"keyup":p=h2;break;case"focusin":v="focus",p=ff;break;case"focusout":v="blur",p=ff;break;case"beforeblur":case"afterblur":p=ff;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=zx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=e2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=p2;break;case Z_:case eb:case tb:p=n2;break;case rb:p=v2;break;case"scroll":p=XP;break;case"wheel":p=y2;break;case"copy":case"cut":case"paste":p=a2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Vx}var g=(e&4)!==0,w=!g&&t==="scroll",y=g?m!==null?m+"Capture":null:m;g=[];for(var x=u,_;x!==null;){_=x;var b=_.stateNode;if(_.tag===5&&b!==null&&(_=b,y!==null&&(b=$l(x,y),b!=null&&g.push(ql(x,b,_)))),w)break;x=x.return}0<g.length&&(m=new p(m,v,null,r,d),h.push({event:m,listeners:g}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&r!==Sm&&(v=r.relatedTarget||r.fromElement)&&(La(v)||v[as]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(v=r.relatedTarget||r.toElement,p=u,v=v?La(v):null,v!==null&&(w=ho(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(g=zx,b="onMouseLeave",y="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(g=Vx,b="onPointerLeave",y="onPointerEnter",x="pointer"),w=p==null?m:Uo(p),_=v==null?m:Uo(v),m=new g(b,x+"leave",p,r,d),m.target=w,m.relatedTarget=_,b=null,La(d)===u&&(g=new g(y,x+"enter",v,r,d),g.target=_,g.relatedTarget=w,b=g),w=b,p&&v)t:{for(g=p,y=v,x=0,_=g;_;_=wo(_))x++;for(_=0,b=y;b;b=wo(b))_++;for(;0<x-_;)g=wo(g),x--;for(;0<_-x;)y=wo(y),_--;for(;x--;){if(g===y||y!==null&&g===y.alternate)break t;g=wo(g),y=wo(y)}g=null}else g=null;p!==null&&ty(h,m,p,g,!1),v!==null&&w!==null&&ty(h,w,v,g,!0)}}e:{if(m=u?Uo(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var j=k2;else if(Kx(m))if(G_)j=T2;else{j=E2;var N=C2}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=P2);if(j&&(j=j(t,u))){K_(h,j,r,d);break e}N&&N(t,m,u),t==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&ym(m,"number",m.value)}switch(N=u?Uo(u):window,t){case"focusin":(Kx(N)||N.contentEditable==="true")&&(Fo=N,Rm=u,Sl=null);break;case"focusout":Sl=Rm=Fo=null;break;case"mousedown":Om=!0;break;case"contextmenu":case"mouseup":case"dragend":Om=!1,Xx(h,r,d);break;case"selectionchange":if(D2)break;case"keydown":case"keyup":Xx(h,r,d)}var k;if(bg)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Lo?H_(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(V_&&r.locale!=="ko"&&(Lo||E!=="onCompositionStart"?E==="onCompositionEnd"&&Lo&&(k=W_()):(Ks=d,yg="value"in Ks?Ks.value:Ks.textContent,Lo=!0)),N=ud(u,E),0<N.length&&(E=new Wx(E,t,null,r,d),h.push({event:E,listeners:N}),k?E.data=k:(k=q_(r),k!==null&&(E.data=k)))),(k=_2?b2(t,r):j2(t,r))&&(u=ud(u,"onBeforeInput"),0<u.length&&(d=new Wx("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=k))}sb(h,e)})}function ql(t,e,r){return{instance:t,listener:e,currentTarget:r}}function ud(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=$l(t,r),o!=null&&n.unshift(ql(t,o,s)),o=$l(t,e),o!=null&&n.push(ql(t,o,s))),t=t.return}return n}function wo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ty(t,e,r,n,s){for(var o=e._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=$l(r,o),c!=null&&i.unshift(ql(r,c,l))):s||(c=$l(r,o),c!=null&&i.push(ql(r,c,l)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var L2=/\r\n?/g,F2=/\u0000|\uFFFD/g;function ry(t){return(typeof t=="string"?t:""+t).replace(L2,`
`).replace(F2,"")}function cu(t,e,r){if(e=ry(e),ry(t)!==e&&r)throw Error(ne(425))}function dd(){}var Dm=null,Am=null;function Mm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Im=typeof setTimeout=="function"?setTimeout:void 0,$2=typeof clearTimeout=="function"?clearTimeout:void 0,ny=typeof Promise=="function"?Promise:void 0,U2=typeof queueMicrotask=="function"?queueMicrotask:typeof ny<"u"?function(t){return ny.resolve(null).then(t).catch(B2)}:Im;function B2(t){setTimeout(function(){throw t})}function _f(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),zl(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);zl(e)}function ta(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function sy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ui=Math.random().toString(36).slice(2),Dn="__reactFiber$"+Ui,Kl="__reactProps$"+Ui,as="__reactContainer$"+Ui,Lm="__reactEvents$"+Ui,z2="__reactListeners$"+Ui,W2="__reactHandles$"+Ui;function La(t){var e=t[Dn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[as]||r[Dn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=sy(t);t!==null;){if(r=t[Dn])return r;t=sy(t)}return e}t=r,r=t.parentNode}return null}function bc(t){return t=t[Dn]||t[as],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Uo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function ah(t){return t[Kl]||null}var Fm=[],Bo=-1;function pa(t){return{current:t}}function ot(t){0>Bo||(t.current=Fm[Bo],Fm[Bo]=null,Bo--)}function rt(t,e){Bo++,Fm[Bo]=t.current,t.current=e}var ca={},Kt=pa(ca),vr=pa(!1),Xa=ca;function _i(t,e){var r=t.type.contextTypes;if(!r)return ca;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function xr(t){return t=t.childContextTypes,t!=null}function hd(){ot(vr),ot(Kt)}function ay(t,e,r){if(Kt.current!==ca)throw Error(ne(168));rt(Kt,e),rt(vr,r)}function ob(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(ne(108,CP(t)||"Unknown",s));return ft({},r,n)}function fd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ca,Xa=Kt.current,rt(Kt,t),rt(vr,vr.current),!0}function oy(t,e,r){var n=t.stateNode;if(!n)throw Error(ne(169));r?(t=ob(t,e,Xa),n.__reactInternalMemoizedMergedChildContext=t,ot(vr),ot(Kt),rt(Kt,t)):ot(vr),rt(vr,r)}var Xn=null,oh=!1,bf=!1;function ib(t){Xn===null?Xn=[t]:Xn.push(t)}function V2(t){oh=!0,ib(t)}function ga(){if(!bf&&Xn!==null){bf=!0;var t=0,e=Je;try{var r=Xn;for(Je=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Xn=null,oh=!1}catch(s){throw Xn!==null&&(Xn=Xn.slice(t+1)),O_(pg,ga),s}finally{Je=e,bf=!1}}return null}var zo=[],Wo=0,md=null,pd=0,Ur=[],Br=0,Za=null,es=1,ts="";function Ra(t,e){zo[Wo++]=pd,zo[Wo++]=md,md=t,pd=e}function lb(t,e,r){Ur[Br++]=es,Ur[Br++]=ts,Ur[Br++]=Za,Za=t;var n=es;t=ts;var s=32-mn(n)-1;n&=~(1<<s),r+=1;var o=32-mn(e)+s;if(30<o){var i=s-s%5;o=(n&(1<<i)-1).toString(32),n>>=i,s-=i,es=1<<32-mn(e)+s|r<<s|n,ts=o+t}else es=1<<o|r<<s|n,ts=t}function Sg(t){t.return!==null&&(Ra(t,1),lb(t,1,0))}function Ng(t){for(;t===md;)md=zo[--Wo],zo[Wo]=null,pd=zo[--Wo],zo[Wo]=null;for(;t===Za;)Za=Ur[--Br],Ur[Br]=null,ts=Ur[--Br],Ur[Br]=null,es=Ur[--Br],Ur[Br]=null}var Tr=null,Pr=null,it=!1,fn=null;function cb(t,e){var r=Wr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function iy(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tr=t,Pr=ta(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tr=t,Pr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Za!==null?{id:es,overflow:ts}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Wr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Tr=t,Pr=null,!0):!1;default:return!1}}function $m(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Um(t){if(it){var e=Pr;if(e){var r=e;if(!iy(t,e)){if($m(t))throw Error(ne(418));e=ta(r.nextSibling);var n=Tr;e&&iy(t,e)?cb(n,r):(t.flags=t.flags&-4097|2,it=!1,Tr=t)}}else{if($m(t))throw Error(ne(418));t.flags=t.flags&-4097|2,it=!1,Tr=t}}}function ly(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tr=t}function uu(t){if(t!==Tr)return!1;if(!it)return ly(t),it=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mm(t.type,t.memoizedProps)),e&&(e=Pr)){if($m(t))throw ub(),Error(ne(418));for(;e;)cb(t,e),e=ta(e.nextSibling)}if(ly(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Pr=ta(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Pr=null}}else Pr=Tr?ta(t.stateNode.nextSibling):null;return!0}function ub(){for(var t=Pr;t;)t=ta(t.nextSibling)}function bi(){Pr=Tr=null,it=!1}function kg(t){fn===null?fn=[t]:fn.push(t)}var H2=ms.ReactCurrentBatchConfig;function ol(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ne(309));var n=r.stateNode}if(!n)throw Error(ne(147,t));var s=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(i){var l=s.refs;i===null?delete l[o]:l[o]=i},e._stringRef=o,e)}if(typeof t!="string")throw Error(ne(284));if(!r._owner)throw Error(ne(290,t))}return t}function du(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function cy(t){var e=t._init;return e(t._payload)}function db(t){function e(y,x){if(t){var _=y.deletions;_===null?(y.deletions=[x],y.flags|=16):_.push(x)}}function r(y,x){if(!t)return null;for(;x!==null;)e(y,x),x=x.sibling;return null}function n(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function s(y,x){return y=aa(y,x),y.index=0,y.sibling=null,y}function o(y,x,_){return y.index=_,t?(_=y.alternate,_!==null?(_=_.index,_<x?(y.flags|=2,x):_):(y.flags|=2,x)):(y.flags|=1048576,x)}function i(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,x,_,b){return x===null||x.tag!==6?(x=Pf(_,y.mode,b),x.return=y,x):(x=s(x,_),x.return=y,x)}function c(y,x,_,b){var j=_.type;return j===Io?d(y,x,_.props.children,b,_.key):x!==null&&(x.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ds&&cy(j)===x.type)?(b=s(x,_.props),b.ref=ol(y,x,_),b.return=y,b):(b=qu(_.type,_.key,_.props,null,y.mode,b),b.ref=ol(y,x,_),b.return=y,b)}function u(y,x,_,b){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=Tf(_,y.mode,b),x.return=y,x):(x=s(x,_.children||[]),x.return=y,x)}function d(y,x,_,b,j){return x===null||x.tag!==7?(x=Ja(_,y.mode,b,j),x.return=y,x):(x=s(x,_),x.return=y,x)}function h(y,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Pf(""+x,y.mode,_),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case eu:return _=qu(x.type,x.key,x.props,null,y.mode,_),_.ref=ol(y,null,x),_.return=y,_;case Mo:return x=Tf(x,y.mode,_),x.return=y,x;case Ds:var b=x._init;return h(y,b(x._payload),_)}if(fl(x)||tl(x))return x=Ja(x,y.mode,_,null),x.return=y,x;du(y,x)}return null}function m(y,x,_,b){var j=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return j!==null?null:l(y,x,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case eu:return _.key===j?c(y,x,_,b):null;case Mo:return _.key===j?u(y,x,_,b):null;case Ds:return j=_._init,m(y,x,j(_._payload),b)}if(fl(_)||tl(_))return j!==null?null:d(y,x,_,b,null);du(y,_)}return null}function p(y,x,_,b,j){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(_)||null,l(x,y,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case eu:return y=y.get(b.key===null?_:b.key)||null,c(x,y,b,j);case Mo:return y=y.get(b.key===null?_:b.key)||null,u(x,y,b,j);case Ds:var N=b._init;return p(y,x,_,N(b._payload),j)}if(fl(b)||tl(b))return y=y.get(_)||null,d(x,y,b,j,null);du(x,b)}return null}function v(y,x,_,b){for(var j=null,N=null,k=x,E=x=0,T=null;k!==null&&E<_.length;E++){k.index>E?(T=k,k=null):T=k.sibling;var P=m(y,k,_[E],b);if(P===null){k===null&&(k=T);break}t&&k&&P.alternate===null&&e(y,k),x=o(P,x,E),N===null?j=P:N.sibling=P,N=P,k=T}if(E===_.length)return r(y,k),it&&Ra(y,E),j;if(k===null){for(;E<_.length;E++)k=h(y,_[E],b),k!==null&&(x=o(k,x,E),N===null?j=k:N.sibling=k,N=k);return it&&Ra(y,E),j}for(k=n(y,k);E<_.length;E++)T=p(k,y,E,_[E],b),T!==null&&(t&&T.alternate!==null&&k.delete(T.key===null?E:T.key),x=o(T,x,E),N===null?j=T:N.sibling=T,N=T);return t&&k.forEach(function(z){return e(y,z)}),it&&Ra(y,E),j}function g(y,x,_,b){var j=tl(_);if(typeof j!="function")throw Error(ne(150));if(_=j.call(_),_==null)throw Error(ne(151));for(var N=j=null,k=x,E=x=0,T=null,P=_.next();k!==null&&!P.done;E++,P=_.next()){k.index>E?(T=k,k=null):T=k.sibling;var z=m(y,k,P.value,b);if(z===null){k===null&&(k=T);break}t&&k&&z.alternate===null&&e(y,k),x=o(z,x,E),N===null?j=z:N.sibling=z,N=z,k=T}if(P.done)return r(y,k),it&&Ra(y,E),j;if(k===null){for(;!P.done;E++,P=_.next())P=h(y,P.value,b),P!==null&&(x=o(P,x,E),N===null?j=P:N.sibling=P,N=P);return it&&Ra(y,E),j}for(k=n(y,k);!P.done;E++,P=_.next())P=p(k,y,E,P.value,b),P!==null&&(t&&P.alternate!==null&&k.delete(P.key===null?E:P.key),x=o(P,x,E),N===null?j=P:N.sibling=P,N=P);return t&&k.forEach(function(B){return e(y,B)}),it&&Ra(y,E),j}function w(y,x,_,b){if(typeof _=="object"&&_!==null&&_.type===Io&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case eu:e:{for(var j=_.key,N=x;N!==null;){if(N.key===j){if(j=_.type,j===Io){if(N.tag===7){r(y,N.sibling),x=s(N,_.props.children),x.return=y,y=x;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ds&&cy(j)===N.type){r(y,N.sibling),x=s(N,_.props),x.ref=ol(y,N,_),x.return=y,y=x;break e}r(y,N);break}else e(y,N);N=N.sibling}_.type===Io?(x=Ja(_.props.children,y.mode,b,_.key),x.return=y,y=x):(b=qu(_.type,_.key,_.props,null,y.mode,b),b.ref=ol(y,x,_),b.return=y,y=b)}return i(y);case Mo:e:{for(N=_.key;x!==null;){if(x.key===N)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){r(y,x.sibling),x=s(x,_.children||[]),x.return=y,y=x;break e}else{r(y,x);break}else e(y,x);x=x.sibling}x=Tf(_,y.mode,b),x.return=y,y=x}return i(y);case Ds:return N=_._init,w(y,x,N(_._payload),b)}if(fl(_))return v(y,x,_,b);if(tl(_))return g(y,x,_,b);du(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(r(y,x.sibling),x=s(x,_),x.return=y,y=x):(r(y,x),x=Pf(_,y.mode,b),x.return=y,y=x),i(y)):r(y,x)}return w}var ji=db(!0),hb=db(!1),gd=pa(null),vd=null,Vo=null,Cg=null;function Eg(){Cg=Vo=vd=null}function Pg(t){var e=gd.current;ot(gd),t._currentValue=e}function Bm(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Xo(t,e){vd=t,Cg=Vo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mr=!0),t.firstContext=null)}function Jr(t){var e=t._currentValue;if(Cg!==t)if(t={context:t,memoizedValue:e,next:null},Vo===null){if(vd===null)throw Error(ne(308));Vo=t,vd.dependencies={lanes:0,firstContext:t}}else Vo=Vo.next=t;return e}var Fa=null;function Tg(t){Fa===null?Fa=[t]:Fa.push(t)}function fb(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Tg(e)):(r.next=s.next,s.next=r),e.interleaved=r,os(t,n)}function os(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var As=!1;function Rg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function rs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ra(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,He&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,os(t,r)}return s=n.interleaved,s===null?(e.next=e,Tg(n)):(e.next=s.next,s.next=e),n.interleaved=e,os(t,r)}function Uu(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,gg(t,r)}}function uy(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=i:o=o.next=i,r=r.next}while(r!==null);o===null?s=o=e:o=o.next=e}else s=o=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function xd(t,e,r,n){var s=t.updateQueue;As=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?o=u:i.next=u,i=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(o!==null){var h=s.baseState;i=0,d=u=c=null,l=o;do{var m=l.lane,p=l.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,g=l;switch(m=e,p=r,g.tag){case 1:if(v=g.payload,typeof v=="function"){h=v.call(p,h,m);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=g.payload,m=typeof v=="function"?v.call(p,h,m):v,m==null)break e;h=ft({},h,m);break e;case 2:As=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,i|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);to|=i,t.lanes=i,t.memoizedState=h}}function dy(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ne(191,s));s.call(n)}}}var jc={},Un=pa(jc),Gl=pa(jc),Yl=pa(jc);function $a(t){if(t===jc)throw Error(ne(174));return t}function Og(t,e){switch(rt(Yl,e),rt(Gl,t),rt(Un,jc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_m(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_m(e,t)}ot(Un),rt(Un,e)}function Si(){ot(Un),ot(Gl),ot(Yl)}function pb(t){$a(Yl.current);var e=$a(Un.current),r=_m(e,t.type);e!==r&&(rt(Gl,t),rt(Un,r))}function Dg(t){Gl.current===t&&(ot(Un),ot(Gl))}var ct=pa(0);function yd(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jf=[];function Ag(){for(var t=0;t<jf.length;t++)jf[t]._workInProgressVersionPrimary=null;jf.length=0}var Bu=ms.ReactCurrentDispatcher,Sf=ms.ReactCurrentBatchConfig,eo=0,ht=null,Tt=null,Dt=null,wd=!1,Nl=!1,Ql=0,q2=0;function zt(){throw Error(ne(321))}function Mg(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!yn(t[r],e[r]))return!1;return!0}function Ig(t,e,r,n,s,o){if(eo=o,ht=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bu.current=t===null||t.memoizedState===null?Q2:J2,t=r(n,s),Nl){o=0;do{if(Nl=!1,Ql=0,25<=o)throw Error(ne(301));o+=1,Dt=Tt=null,e.updateQueue=null,Bu.current=X2,t=r(n,s)}while(Nl)}if(Bu.current=_d,e=Tt!==null&&Tt.next!==null,eo=0,Dt=Tt=ht=null,wd=!1,e)throw Error(ne(300));return t}function Lg(){var t=Ql!==0;return Ql=0,t}function En(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?ht.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function Xr(){if(Tt===null){var t=ht.alternate;t=t!==null?t.memoizedState:null}else t=Tt.next;var e=Dt===null?ht.memoizedState:Dt.next;if(e!==null)Dt=e,Tt=t;else{if(t===null)throw Error(ne(310));Tt=t,t={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Dt===null?ht.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function Jl(t,e){return typeof e=="function"?e(t):e}function Nf(t){var e=Xr(),r=e.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=t;var n=Tt,s=n.baseQueue,o=r.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}n.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,n=n.baseState;var l=i=null,c=null,u=o;do{var d=u.lane;if((eo&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,i=n):c=c.next=h,ht.lanes|=d,to|=d}u=u.next}while(u!==null&&u!==o);c===null?i=n:c.next=l,yn(n,e.memoizedState)||(mr=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do o=s.lane,ht.lanes|=o,to|=o,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function kf(t){var e=Xr(),r=e.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,o=e.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do o=t(o,i.action),i=i.next;while(i!==s);yn(o,e.memoizedState)||(mr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function gb(){}function vb(t,e){var r=ht,n=Xr(),s=e(),o=!yn(n.memoizedState,s);if(o&&(n.memoizedState=s,mr=!0),n=n.queue,Fg(wb.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||Dt!==null&&Dt.memoizedState.tag&1){if(r.flags|=2048,Xl(9,yb.bind(null,r,n,s,e),void 0,null),Mt===null)throw Error(ne(349));eo&30||xb(r,e,s)}return s}function xb(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function yb(t,e,r,n){e.value=r,e.getSnapshot=n,_b(e)&&bb(t)}function wb(t,e,r){return r(function(){_b(e)&&bb(t)})}function _b(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!yn(t,r)}catch{return!0}}function bb(t){var e=os(t,1);e!==null&&pn(e,t,1,-1)}function hy(t){var e=En();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jl,lastRenderedState:t},e.queue=t,t=t.dispatch=Y2.bind(null,ht,t),[e.memoizedState,t]}function Xl(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function jb(){return Xr().memoizedState}function zu(t,e,r,n){var s=En();ht.flags|=t,s.memoizedState=Xl(1|e,r,void 0,n===void 0?null:n)}function ih(t,e,r,n){var s=Xr();n=n===void 0?null:n;var o=void 0;if(Tt!==null){var i=Tt.memoizedState;if(o=i.destroy,n!==null&&Mg(n,i.deps)){s.memoizedState=Xl(e,r,o,n);return}}ht.flags|=t,s.memoizedState=Xl(1|e,r,o,n)}function fy(t,e){return zu(8390656,8,t,e)}function Fg(t,e){return ih(2048,8,t,e)}function Sb(t,e){return ih(4,2,t,e)}function Nb(t,e){return ih(4,4,t,e)}function kb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Cb(t,e,r){return r=r!=null?r.concat([t]):null,ih(4,4,kb.bind(null,e,t),r)}function $g(){}function Eb(t,e){var r=Xr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Mg(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Pb(t,e){var r=Xr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Mg(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Tb(t,e,r){return eo&21?(yn(r,e)||(r=M_(),ht.lanes|=r,to|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mr=!0),t.memoizedState=r)}function K2(t,e){var r=Je;Je=r!==0&&4>r?r:4,t(!0);var n=Sf.transition;Sf.transition={};try{t(!1),e()}finally{Je=r,Sf.transition=n}}function Rb(){return Xr().memoizedState}function G2(t,e,r){var n=sa(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Ob(t))Db(e,r);else if(r=fb(t,e,r,n),r!==null){var s=sr();pn(r,t,n,s),Ab(r,e,n)}}function Y2(t,e,r){var n=sa(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ob(t))Db(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var i=e.lastRenderedState,l=o(i,r);if(s.hasEagerState=!0,s.eagerState=l,yn(l,i)){var c=e.interleaved;c===null?(s.next=s,Tg(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=fb(t,e,s,n),r!==null&&(s=sr(),pn(r,t,n,s),Ab(r,e,n))}}function Ob(t){var e=t.alternate;return t===ht||e!==null&&e===ht}function Db(t,e){Nl=wd=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Ab(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,gg(t,r)}}var _d={readContext:Jr,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},Q2={readContext:Jr,useCallback:function(t,e){return En().memoizedState=[t,e===void 0?null:e],t},useContext:Jr,useEffect:fy,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,zu(4194308,4,kb.bind(null,e,t),r)},useLayoutEffect:function(t,e){return zu(4194308,4,t,e)},useInsertionEffect:function(t,e){return zu(4,2,t,e)},useMemo:function(t,e){var r=En();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=En();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=G2.bind(null,ht,t),[n.memoizedState,t]},useRef:function(t){var e=En();return t={current:t},e.memoizedState=t},useState:hy,useDebugValue:$g,useDeferredValue:function(t){return En().memoizedState=t},useTransition:function(){var t=hy(!1),e=t[0];return t=K2.bind(null,t[1]),En().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ht,s=En();if(it){if(r===void 0)throw Error(ne(407));r=r()}else{if(r=e(),Mt===null)throw Error(ne(349));eo&30||xb(n,e,r)}s.memoizedState=r;var o={value:r,getSnapshot:e};return s.queue=o,fy(wb.bind(null,n,o,t),[t]),n.flags|=2048,Xl(9,yb.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=En(),e=Mt.identifierPrefix;if(it){var r=ts,n=es;r=(n&~(1<<32-mn(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ql++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=q2++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},J2={readContext:Jr,useCallback:Eb,useContext:Jr,useEffect:Fg,useImperativeHandle:Cb,useInsertionEffect:Sb,useLayoutEffect:Nb,useMemo:Pb,useReducer:Nf,useRef:jb,useState:function(){return Nf(Jl)},useDebugValue:$g,useDeferredValue:function(t){var e=Xr();return Tb(e,Tt.memoizedState,t)},useTransition:function(){var t=Nf(Jl)[0],e=Xr().memoizedState;return[t,e]},useMutableSource:gb,useSyncExternalStore:vb,useId:Rb,unstable_isNewReconciler:!1},X2={readContext:Jr,useCallback:Eb,useContext:Jr,useEffect:Fg,useImperativeHandle:Cb,useInsertionEffect:Sb,useLayoutEffect:Nb,useMemo:Pb,useReducer:kf,useRef:jb,useState:function(){return kf(Jl)},useDebugValue:$g,useDeferredValue:function(t){var e=Xr();return Tt===null?e.memoizedState=t:Tb(e,Tt.memoizedState,t)},useTransition:function(){var t=kf(Jl)[0],e=Xr().memoizedState;return[t,e]},useMutableSource:gb,useSyncExternalStore:vb,useId:Rb,unstable_isNewReconciler:!1};function on(t,e){if(t&&t.defaultProps){e=ft({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function zm(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ft({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var lh={isMounted:function(t){return(t=t._reactInternals)?ho(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=sr(),s=sa(t),o=rs(n,s);o.payload=e,r!=null&&(o.callback=r),e=ra(t,o,s),e!==null&&(pn(e,t,s,n),Uu(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=sr(),s=sa(t),o=rs(n,s);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=ra(t,o,s),e!==null&&(pn(e,t,s,n),Uu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=sr(),n=sa(t),s=rs(r,n);s.tag=2,e!=null&&(s.callback=e),e=ra(t,s,n),e!==null&&(pn(e,t,n,r),Uu(e,t,n))}};function my(t,e,r,n,s,o,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,i):e.prototype&&e.prototype.isPureReactComponent?!Vl(r,n)||!Vl(s,o):!0}function Mb(t,e,r){var n=!1,s=ca,o=e.contextType;return typeof o=="object"&&o!==null?o=Jr(o):(s=xr(e)?Xa:Kt.current,n=e.contextTypes,o=(n=n!=null)?_i(t,s):ca),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lh,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function py(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&lh.enqueueReplaceState(e,e.state,null)}function Wm(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Rg(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Jr(o):(o=xr(e)?Xa:Kt.current,s.context=_i(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(zm(t,e,o,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&lh.enqueueReplaceState(s,s.state,null),xd(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ni(t,e){try{var r="",n=e;do r+=kP(n),n=n.return;while(n);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function Cf(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Vm(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Z2=typeof WeakMap=="function"?WeakMap:Map;function Ib(t,e,r){r=rs(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){jd||(jd=!0,ep=n),Vm(t,e)},r}function Lb(t,e,r){r=rs(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Vm(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Vm(t,e),typeof n!="function"&&(na===null?na=new Set([this]):na.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function gy(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Z2;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=fT.bind(null,t,e,r),e.then(t,t))}function vy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function xy(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=rs(-1,1),e.tag=2,ra(r,e,1))),r.lanes|=1),t)}var eT=ms.ReactCurrentOwner,mr=!1;function tr(t,e,r,n){e.child=t===null?hb(e,null,r,n):ji(e,t.child,r,n)}function yy(t,e,r,n,s){r=r.render;var o=e.ref;return Xo(e,s),n=Ig(t,e,r,n,o,s),r=Lg(),t!==null&&!mr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,is(t,e,s)):(it&&r&&Sg(e),e.flags|=1,tr(t,e,n,s),e.child)}function wy(t,e,r,n,s){if(t===null){var o=r.type;return typeof o=="function"&&!Kg(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,Fb(t,e,o,n,s)):(t=qu(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var i=o.memoizedProps;if(r=r.compare,r=r!==null?r:Vl,r(i,n)&&t.ref===e.ref)return is(t,e,s)}return e.flags|=1,t=aa(o,n),t.ref=e.ref,t.return=e,e.child=t}function Fb(t,e,r,n,s){if(t!==null){var o=t.memoizedProps;if(Vl(o,n)&&t.ref===e.ref)if(mr=!1,e.pendingProps=n=o,(t.lanes&s)!==0)t.flags&131072&&(mr=!0);else return e.lanes=t.lanes,is(t,e,s)}return Hm(t,e,r,n,s)}function $b(t,e,r){var n=e.pendingProps,s=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(qo,Nr),Nr|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,rt(qo,Nr),Nr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,rt(qo,Nr),Nr|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,rt(qo,Nr),Nr|=n;return tr(t,e,s,r),e.child}function Ub(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Hm(t,e,r,n,s){var o=xr(r)?Xa:Kt.current;return o=_i(e,o),Xo(e,s),r=Ig(t,e,r,n,o,s),n=Lg(),t!==null&&!mr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,is(t,e,s)):(it&&n&&Sg(e),e.flags|=1,tr(t,e,r,s),e.child)}function _y(t,e,r,n,s){if(xr(r)){var o=!0;fd(e)}else o=!1;if(Xo(e,s),e.stateNode===null)Wu(t,e),Mb(e,r,n),Wm(e,r,n,s),n=!0;else if(t===null){var i=e.stateNode,l=e.memoizedProps;i.props=l;var c=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=Jr(u):(u=xr(r)?Xa:Kt.current,u=_i(e,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==u)&&py(e,i,n,u),As=!1;var m=e.memoizedState;i.state=m,xd(e,n,i,s),c=e.memoizedState,l!==n||m!==c||vr.current||As?(typeof d=="function"&&(zm(e,r,d,n),c=e.memoizedState),(l=As||my(e,r,l,n,m,c,u))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),i.props=n,i.state=c,i.context=u,n=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,mb(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:on(e.type,l),i.props=u,h=e.pendingProps,m=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=Jr(c):(c=xr(r)?Xa:Kt.current,c=_i(e,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==h||m!==c)&&py(e,i,n,c),As=!1,m=e.memoizedState,i.state=m,xd(e,n,i,s);var v=e.memoizedState;l!==h||m!==v||vr.current||As?(typeof p=="function"&&(zm(e,r,p,n),v=e.memoizedState),(u=As||my(e,r,u,n,m,v,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,v,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,v,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),i.props=n,i.state=v,i.context=c,n=u):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return qm(t,e,r,n,o,s)}function qm(t,e,r,n,s,o){Ub(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return s&&oy(e,r,!1),is(t,e,o);n=e.stateNode,eT.current=e;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=ji(e,t.child,null,o),e.child=ji(e,null,l,o)):tr(t,e,l,o),e.memoizedState=n.state,s&&oy(e,r,!0),e.child}function Bb(t){var e=t.stateNode;e.pendingContext?ay(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ay(t,e.context,!1),Og(t,e.containerInfo)}function by(t,e,r,n,s){return bi(),kg(s),e.flags|=256,tr(t,e,r,n),e.child}var Km={dehydrated:null,treeContext:null,retryLane:0};function Gm(t){return{baseLanes:t,cachePool:null,transitions:null}}function zb(t,e,r){var n=e.pendingProps,s=ct.current,o=!1,i=(e.flags&128)!==0,l;if((l=i)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),rt(ct,s&1),t===null)return Um(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,o?(n=e.mode,o=e.child,i={mode:"hidden",children:i},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=dh(i,n,0,null),t=Ja(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Gm(r),e.memoizedState=Km,t):Ug(e,i));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return tT(t,e,i,n,l,s,r);if(o){o=n.fallback,i=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=aa(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=aa(l,o):(o=Ja(o,i,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,i=t.child.memoizedState,i=i===null?Gm(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=t.childLanes&~r,e.memoizedState=Km,n}return o=t.child,t=o.sibling,n=aa(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Ug(t,e){return e=dh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hu(t,e,r,n){return n!==null&&kg(n),ji(e,t.child,null,r),t=Ug(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function tT(t,e,r,n,s,o,i){if(r)return e.flags&256?(e.flags&=-257,n=Cf(Error(ne(422))),hu(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,s=e.mode,n=dh({mode:"visible",children:n.children},s,0,null),o=Ja(o,s,i,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&ji(e,t.child,null,i),e.child.memoizedState=Gm(i),e.memoizedState=Km,o);if(!(e.mode&1))return hu(t,e,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,o=Error(ne(419)),n=Cf(o,n,void 0),hu(t,e,i,n)}if(l=(i&t.childLanes)!==0,mr||l){if(n=Mt,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,os(t,s),pn(n,t,s,-1))}return qg(),n=Cf(Error(ne(421))),hu(t,e,i,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=mT.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,Pr=ta(s.nextSibling),Tr=e,it=!0,fn=null,t!==null&&(Ur[Br++]=es,Ur[Br++]=ts,Ur[Br++]=Za,es=t.id,ts=t.overflow,Za=e),e=Ug(e,n.children),e.flags|=4096,e)}function jy(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Bm(t.return,e,r)}function Ef(t,e,r,n,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s)}function Wb(t,e,r){var n=e.pendingProps,s=n.revealOrder,o=n.tail;if(tr(t,e,n.children,r),n=ct.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jy(t,r,e);else if(t.tag===19)jy(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(rt(ct,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&yd(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Ef(e,!1,s,r,o);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&yd(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Ef(e,!0,r,null,o);break;case"together":Ef(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function is(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),to|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,r=aa(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=aa(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function rT(t,e,r){switch(e.tag){case 3:Bb(e),bi();break;case 5:pb(e);break;case 1:xr(e.type)&&fd(e);break;case 4:Og(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;rt(gd,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(rt(ct,ct.current&1),e.flags|=128,null):r&e.child.childLanes?zb(t,e,r):(rt(ct,ct.current&1),t=is(t,e,r),t!==null?t.sibling:null);rt(ct,ct.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Wb(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),rt(ct,ct.current),n)break;return null;case 22:case 23:return e.lanes=0,$b(t,e,r)}return is(t,e,r)}var Vb,Ym,Hb,qb;Vb=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ym=function(){};Hb=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,$a(Un.current);var o=null;switch(r){case"input":s=vm(t,s),n=vm(t,n),o=[];break;case"select":s=ft({},s,{value:void 0}),n=ft({},n,{value:void 0}),o=[];break;case"textarea":s=wm(t,s),n=wm(t,n),o=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=dd)}bm(r,n);var i;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ll.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(o||(o=[]),o.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ll.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&at("scroll",t),o||l===c||(o=[])):(o=o||[]).push(u,c))}r&&(o=o||[]).push("style",r);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};qb=function(t,e,r,n){r!==n&&(e.flags|=4)};function il(t,e){if(!it)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function nT(t,e,r){var n=e.pendingProps;switch(Ng(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(e),null;case 1:return xr(e.type)&&hd(),Wt(e),null;case 3:return n=e.stateNode,Si(),ot(vr),ot(Kt),Ag(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(uu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fn!==null&&(np(fn),fn=null))),Ym(t,e),Wt(e),null;case 5:Dg(e);var s=$a(Yl.current);if(r=e.type,t!==null&&e.stateNode!=null)Hb(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ne(166));return Wt(e),null}if(t=$a(Un.current),uu(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[Dn]=e,n[Kl]=o,t=(e.mode&1)!==0,r){case"dialog":at("cancel",n),at("close",n);break;case"iframe":case"object":case"embed":at("load",n);break;case"video":case"audio":for(s=0;s<pl.length;s++)at(pl[s],n);break;case"source":at("error",n);break;case"img":case"image":case"link":at("error",n),at("load",n);break;case"details":at("toggle",n);break;case"input":Ox(n,o),at("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},at("invalid",n);break;case"textarea":Ax(n,o),at("invalid",n)}bm(r,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?n.textContent!==l&&(o.suppressHydrationWarning!==!0&&cu(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&cu(n.textContent,l,t),s=["children",""+l]):Ll.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&at("scroll",n)}switch(r){case"input":tu(n),Dx(n,o,!0);break;case"textarea":tu(n),Mx(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=dd)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=w_(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[Dn]=e,t[Kl]=n,Vb(t,e,!1,!1),e.stateNode=t;e:{switch(i=jm(r,n),r){case"dialog":at("cancel",t),at("close",t),s=n;break;case"iframe":case"object":case"embed":at("load",t),s=n;break;case"video":case"audio":for(s=0;s<pl.length;s++)at(pl[s],t);s=n;break;case"source":at("error",t),s=n;break;case"img":case"image":case"link":at("error",t),at("load",t),s=n;break;case"details":at("toggle",t),s=n;break;case"input":Ox(t,n),s=vm(t,n),at("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=ft({},n,{value:void 0}),at("invalid",t);break;case"textarea":Ax(t,n),s=wm(t,n),at("invalid",t);break;default:s=n}bm(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?j_(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&__(t,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Fl(t,c):typeof c=="number"&&Fl(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ll.hasOwnProperty(o)?c!=null&&o==="onScroll"&&at("scroll",t):c!=null&&ug(t,o,c,i))}switch(r){case"input":tu(t),Dx(t,n,!1);break;case"textarea":tu(t),Mx(t);break;case"option":n.value!=null&&t.setAttribute("value",""+la(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?Go(t,!!n.multiple,o,!1):n.defaultValue!=null&&Go(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=dd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wt(e),null;case 6:if(t&&e.stateNode!=null)qb(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ne(166));if(r=$a(Yl.current),$a(Un.current),uu(e)){if(n=e.stateNode,r=e.memoizedProps,n[Dn]=e,(o=n.nodeValue!==r)&&(t=Tr,t!==null))switch(t.tag){case 3:cu(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&cu(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Dn]=e,e.stateNode=n}return Wt(e),null;case 13:if(ot(ct),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(it&&Pr!==null&&e.mode&1&&!(e.flags&128))ub(),bi(),e.flags|=98560,o=!1;else if(o=uu(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(ne(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ne(317));o[Dn]=e}else bi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wt(e),o=!1}else fn!==null&&(np(fn),fn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ct.current&1?Rt===0&&(Rt=3):qg())),e.updateQueue!==null&&(e.flags|=4),Wt(e),null);case 4:return Si(),Ym(t,e),t===null&&Hl(e.stateNode.containerInfo),Wt(e),null;case 10:return Pg(e.type._context),Wt(e),null;case 17:return xr(e.type)&&hd(),Wt(e),null;case 19:if(ot(ct),o=e.memoizedState,o===null)return Wt(e),null;if(n=(e.flags&128)!==0,i=o.rendering,i===null)if(n)il(o,!1);else{if(Rt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=yd(t),i!==null){for(e.flags|=128,il(o,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,t=i.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return rt(ct,ct.current&1|2),e.child}t=t.sibling}o.tail!==null&&_t()>ki&&(e.flags|=128,n=!0,il(o,!1),e.lanes=4194304)}else{if(!n)if(t=yd(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),il(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!it)return Wt(e),null}else 2*_t()-o.renderingStartTime>ki&&r!==1073741824&&(e.flags|=128,n=!0,il(o,!1),e.lanes=4194304);o.isBackwards?(i.sibling=e.child,e.child=i):(r=o.last,r!==null?r.sibling=i:e.child=i,o.last=i)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=_t(),e.sibling=null,r=ct.current,rt(ct,n?r&1|2:r&1),e):(Wt(e),null);case 22:case 23:return Hg(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Nr&1073741824&&(Wt(e),e.subtreeFlags&6&&(e.flags|=8192)):Wt(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function sT(t,e){switch(Ng(e),e.tag){case 1:return xr(e.type)&&hd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Si(),ot(vr),ot(Kt),Ag(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Dg(e),null;case 13:if(ot(ct),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));bi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ot(ct),null;case 4:return Si(),null;case 10:return Pg(e.type._context),null;case 22:case 23:return Hg(),null;case 24:return null;default:return null}}var fu=!1,Ht=!1,aT=typeof WeakSet=="function"?WeakSet:Set,me=null;function Ho(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){vt(t,e,n)}else r.current=null}function Qm(t,e,r){try{r()}catch(n){vt(t,e,n)}}var Sy=!1;function oT(t,e){if(Dm=ld,t=J_(),jg(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,u=0,d=0,h=t,m=null;t:for(;;){for(var p;h!==r||s!==0&&h.nodeType!==3||(l=i+s),h!==o||n!==0&&h.nodeType!==3||(c=i+n),h.nodeType===3&&(i+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===t)break t;if(m===r&&++u===s&&(l=i),m===o&&++d===n&&(c=i),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Am={focusedElem:t,selectionRange:r},ld=!1,me=e;me!==null;)if(e=me,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,me=t;else for(;me!==null;){e=me;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var g=v.memoizedProps,w=v.memoizedState,y=e.stateNode,x=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:on(e.type,g),w);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(b){vt(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,me=t;break}me=e.return}return v=Sy,Sy=!1,v}function kl(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&Qm(e,r,o)}s=s.next}while(s!==n)}}function ch(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Jm(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Kb(t){var e=t.alternate;e!==null&&(t.alternate=null,Kb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Dn],delete e[Kl],delete e[Lm],delete e[z2],delete e[W2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Gb(t){return t.tag===5||t.tag===3||t.tag===4}function Ny(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Gb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=dd));else if(n!==4&&(t=t.child,t!==null))for(Xm(t,e,r),t=t.sibling;t!==null;)Xm(t,e,r),t=t.sibling}function Zm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Zm(t,e,r),t=t.sibling;t!==null;)Zm(t,e,r),t=t.sibling}var It=null,dn=!1;function Ns(t,e,r){for(r=r.child;r!==null;)Yb(t,e,r),r=r.sibling}function Yb(t,e,r){if($n&&typeof $n.onCommitFiberUnmount=="function")try{$n.onCommitFiberUnmount(th,r)}catch{}switch(r.tag){case 5:Ht||Ho(r,e);case 6:var n=It,s=dn;It=null,Ns(t,e,r),It=n,dn=s,It!==null&&(dn?(t=It,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):It.removeChild(r.stateNode));break;case 18:It!==null&&(dn?(t=It,r=r.stateNode,t.nodeType===8?_f(t.parentNode,r):t.nodeType===1&&_f(t,r),zl(t)):_f(It,r.stateNode));break;case 4:n=It,s=dn,It=r.stateNode.containerInfo,dn=!0,Ns(t,e,r),It=n,dn=s;break;case 0:case 11:case 14:case 15:if(!Ht&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&Qm(r,e,i),s=s.next}while(s!==n)}Ns(t,e,r);break;case 1:if(!Ht&&(Ho(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){vt(r,e,l)}Ns(t,e,r);break;case 21:Ns(t,e,r);break;case 22:r.mode&1?(Ht=(n=Ht)||r.memoizedState!==null,Ns(t,e,r),Ht=n):Ns(t,e,r);break;default:Ns(t,e,r)}}function ky(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new aT),e.forEach(function(n){var s=pT.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function tn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var o=t,i=e,l=i;e:for(;l!==null;){switch(l.tag){case 5:It=l.stateNode,dn=!1;break e;case 3:It=l.stateNode.containerInfo,dn=!0;break e;case 4:It=l.stateNode.containerInfo,dn=!0;break e}l=l.return}if(It===null)throw Error(ne(160));Yb(o,i,s),It=null,dn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){vt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Qb(e,t),e=e.sibling}function Qb(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tn(e,t),kn(t),n&4){try{kl(3,t,t.return),ch(3,t)}catch(g){vt(t,t.return,g)}try{kl(5,t,t.return)}catch(g){vt(t,t.return,g)}}break;case 1:tn(e,t),kn(t),n&512&&r!==null&&Ho(r,r.return);break;case 5:if(tn(e,t),kn(t),n&512&&r!==null&&Ho(r,r.return),t.flags&32){var s=t.stateNode;try{Fl(s,"")}catch(g){vt(t,t.return,g)}}if(n&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,i=r!==null?r.memoizedProps:o,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&x_(s,o),jm(l,i);var u=jm(l,o);for(i=0;i<c.length;i+=2){var d=c[i],h=c[i+1];d==="style"?j_(s,h):d==="dangerouslySetInnerHTML"?__(s,h):d==="children"?Fl(s,h):ug(s,d,h,u)}switch(l){case"input":xm(s,o);break;case"textarea":y_(s,o);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Go(s,!!o.multiple,p,!1):m!==!!o.multiple&&(o.defaultValue!=null?Go(s,!!o.multiple,o.defaultValue,!0):Go(s,!!o.multiple,o.multiple?[]:"",!1))}s[Kl]=o}catch(g){vt(t,t.return,g)}}break;case 6:if(tn(e,t),kn(t),n&4){if(t.stateNode===null)throw Error(ne(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(g){vt(t,t.return,g)}}break;case 3:if(tn(e,t),kn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{zl(e.containerInfo)}catch(g){vt(t,t.return,g)}break;case 4:tn(e,t),kn(t);break;case 13:tn(e,t),kn(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Wg=_t())),n&4&&ky(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Ht=(u=Ht)||d,tn(e,t),Ht=u):tn(e,t),kn(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(me=t,d=t.child;d!==null;){for(h=me=d;me!==null;){switch(m=me,p=m.child,m.tag){case 0:case 11:case 14:case 15:kl(4,m,m.return);break;case 1:Ho(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(g){vt(n,r,g)}}break;case 5:Ho(m,m.return);break;case 22:if(m.memoizedState!==null){Ey(h);continue}}p!==null?(p.return=m,me=p):Ey(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,c=h.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=b_("display",i))}catch(g){vt(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){vt(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:tn(e,t),kn(t),n&4&&ky(t);break;case 21:break;default:tn(e,t),kn(t)}}function kn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Gb(r)){var n=r;break e}r=r.return}throw Error(ne(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Fl(s,""),n.flags&=-33);var o=Ny(t);Zm(t,o,s);break;case 3:case 4:var i=n.stateNode.containerInfo,l=Ny(t);Xm(t,l,i);break;default:throw Error(ne(161))}}catch(c){vt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function iT(t,e,r){me=t,Jb(t)}function Jb(t,e,r){for(var n=(t.mode&1)!==0;me!==null;){var s=me,o=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||fu;if(!i){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ht;l=fu;var u=Ht;if(fu=i,(Ht=c)&&!u)for(me=s;me!==null;)i=me,c=i.child,i.tag===22&&i.memoizedState!==null?Py(s):c!==null?(c.return=i,me=c):Py(s);for(;o!==null;)me=o,Jb(o),o=o.sibling;me=s,fu=l,Ht=u}Cy(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,me=o):Cy(t)}}function Cy(t){for(;me!==null;){var e=me;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ht||ch(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ht)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:on(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&dy(e,o,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}dy(e,i,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&zl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}Ht||e.flags&512&&Jm(e)}catch(m){vt(e,e.return,m)}}if(e===t){me=null;break}if(r=e.sibling,r!==null){r.return=e.return,me=r;break}me=e.return}}function Ey(t){for(;me!==null;){var e=me;if(e===t){me=null;break}var r=e.sibling;if(r!==null){r.return=e.return,me=r;break}me=e.return}}function Py(t){for(;me!==null;){var e=me;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{ch(4,e)}catch(c){vt(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){vt(e,s,c)}}var o=e.return;try{Jm(e)}catch(c){vt(e,o,c)}break;case 5:var i=e.return;try{Jm(e)}catch(c){vt(e,i,c)}}}catch(c){vt(e,e.return,c)}if(e===t){me=null;break}var l=e.sibling;if(l!==null){l.return=e.return,me=l;break}me=e.return}}var lT=Math.ceil,bd=ms.ReactCurrentDispatcher,Bg=ms.ReactCurrentOwner,Vr=ms.ReactCurrentBatchConfig,He=0,Mt=null,St=null,Ft=0,Nr=0,qo=pa(0),Rt=0,Zl=null,to=0,uh=0,zg=0,Cl=null,fr=null,Wg=0,ki=1/0,Qn=null,jd=!1,ep=null,na=null,mu=!1,Gs=null,Sd=0,El=0,tp=null,Vu=-1,Hu=0;function sr(){return He&6?_t():Vu!==-1?Vu:Vu=_t()}function sa(t){return t.mode&1?He&2&&Ft!==0?Ft&-Ft:H2.transition!==null?(Hu===0&&(Hu=M_()),Hu):(t=Je,t!==0||(t=window.event,t=t===void 0?16:z_(t.type)),t):1}function pn(t,e,r,n){if(50<El)throw El=0,tp=null,Error(ne(185));wc(t,r,n),(!(He&2)||t!==Mt)&&(t===Mt&&(!(He&2)&&(uh|=r),Rt===4&&Is(t,Ft)),yr(t,n),r===1&&He===0&&!(e.mode&1)&&(ki=_t()+500,oh&&ga()))}function yr(t,e){var r=t.callbackNode;HP(t,e);var n=id(t,t===Mt?Ft:0);if(n===0)r!==null&&Fx(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Fx(r),e===1)t.tag===0?V2(Ty.bind(null,t)):ib(Ty.bind(null,t)),U2(function(){!(He&6)&&ga()}),r=null;else{switch(I_(n)){case 1:r=pg;break;case 4:r=D_;break;case 16:r=od;break;case 536870912:r=A_;break;default:r=od}r=aj(r,Xb.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Xb(t,e){if(Vu=-1,Hu=0,He&6)throw Error(ne(327));var r=t.callbackNode;if(Zo()&&t.callbackNode!==r)return null;var n=id(t,t===Mt?Ft:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Nd(t,n);else{e=n;var s=He;He|=2;var o=ej();(Mt!==t||Ft!==e)&&(Qn=null,ki=_t()+500,Qa(t,e));do try{dT();break}catch(l){Zb(t,l)}while(!0);Eg(),bd.current=o,He=s,St!==null?e=0:(Mt=null,Ft=0,e=Rt)}if(e!==0){if(e===2&&(s=Em(t),s!==0&&(n=s,e=rp(t,s))),e===1)throw r=Zl,Qa(t,0),Is(t,n),yr(t,_t()),r;if(e===6)Is(t,n);else{if(s=t.current.alternate,!(n&30)&&!cT(s)&&(e=Nd(t,n),e===2&&(o=Em(t),o!==0&&(n=o,e=rp(t,o))),e===1))throw r=Zl,Qa(t,0),Is(t,n),yr(t,_t()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(ne(345));case 2:Oa(t,fr,Qn);break;case 3:if(Is(t,n),(n&130023424)===n&&(e=Wg+500-_t(),10<e)){if(id(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){sr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Im(Oa.bind(null,t,fr,Qn),e);break}Oa(t,fr,Qn);break;case 4:if(Is(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var i=31-mn(n);o=1<<i,i=e[i],i>s&&(s=i),n&=~o}if(n=s,n=_t()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*lT(n/1960))-n,10<n){t.timeoutHandle=Im(Oa.bind(null,t,fr,Qn),n);break}Oa(t,fr,Qn);break;case 5:Oa(t,fr,Qn);break;default:throw Error(ne(329))}}}return yr(t,_t()),t.callbackNode===r?Xb.bind(null,t):null}function rp(t,e){var r=Cl;return t.current.memoizedState.isDehydrated&&(Qa(t,e).flags|=256),t=Nd(t,e),t!==2&&(e=fr,fr=r,e!==null&&np(e)),t}function np(t){fr===null?fr=t:fr.push.apply(fr,t)}function cT(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],o=s.getSnapshot;s=s.value;try{if(!yn(o(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Is(t,e){for(e&=~zg,e&=~uh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-mn(e),n=1<<r;t[r]=-1,e&=~n}}function Ty(t){if(He&6)throw Error(ne(327));Zo();var e=id(t,0);if(!(e&1))return yr(t,_t()),null;var r=Nd(t,e);if(t.tag!==0&&r===2){var n=Em(t);n!==0&&(e=n,r=rp(t,n))}if(r===1)throw r=Zl,Qa(t,0),Is(t,e),yr(t,_t()),r;if(r===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Oa(t,fr,Qn),yr(t,_t()),null}function Vg(t,e){var r=He;He|=1;try{return t(e)}finally{He=r,He===0&&(ki=_t()+500,oh&&ga())}}function ro(t){Gs!==null&&Gs.tag===0&&!(He&6)&&Zo();var e=He;He|=1;var r=Vr.transition,n=Je;try{if(Vr.transition=null,Je=1,t)return t()}finally{Je=n,Vr.transition=r,He=e,!(He&6)&&ga()}}function Hg(){Nr=qo.current,ot(qo)}function Qa(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,$2(r)),St!==null)for(r=St.return;r!==null;){var n=r;switch(Ng(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&hd();break;case 3:Si(),ot(vr),ot(Kt),Ag();break;case 5:Dg(n);break;case 4:Si();break;case 13:ot(ct);break;case 19:ot(ct);break;case 10:Pg(n.type._context);break;case 22:case 23:Hg()}r=r.return}if(Mt=t,St=t=aa(t.current,null),Ft=Nr=e,Rt=0,Zl=null,zg=uh=to=0,fr=Cl=null,Fa!==null){for(e=0;e<Fa.length;e++)if(r=Fa[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,o=r.pending;if(o!==null){var i=o.next;o.next=s,n.next=i}r.pending=n}Fa=null}return t}function Zb(t,e){do{var r=St;try{if(Eg(),Bu.current=_d,wd){for(var n=ht.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}wd=!1}if(eo=0,Dt=Tt=ht=null,Nl=!1,Ql=0,Bg.current=null,r===null||r.return===null){Rt=1,Zl=e,St=null;break}e:{var o=t,i=r.return,l=r,c=e;if(e=Ft,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=vy(i);if(p!==null){p.flags&=-257,xy(p,i,l,o,e),p.mode&1&&gy(o,u,e),e=p,c=u;var v=e.updateQueue;if(v===null){var g=new Set;g.add(c),e.updateQueue=g}else v.add(c);break e}else{if(!(e&1)){gy(o,u,e),qg();break e}c=Error(ne(426))}}else if(it&&l.mode&1){var w=vy(i);if(w!==null){!(w.flags&65536)&&(w.flags|=256),xy(w,i,l,o,e),kg(Ni(c,l));break e}}o=c=Ni(c,l),Rt!==4&&(Rt=2),Cl===null?Cl=[o]:Cl.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var y=Ib(o,c,e);uy(o,y);break e;case 1:l=c;var x=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(na===null||!na.has(_)))){o.flags|=65536,e&=-e,o.lanes|=e;var b=Lb(o,l,e);uy(o,b);break e}}o=o.return}while(o!==null)}rj(r)}catch(j){e=j,St===r&&r!==null&&(St=r=r.return);continue}break}while(!0)}function ej(){var t=bd.current;return bd.current=_d,t===null?_d:t}function qg(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),Mt===null||!(to&268435455)&&!(uh&268435455)||Is(Mt,Ft)}function Nd(t,e){var r=He;He|=2;var n=ej();(Mt!==t||Ft!==e)&&(Qn=null,Qa(t,e));do try{uT();break}catch(s){Zb(t,s)}while(!0);if(Eg(),He=r,bd.current=n,St!==null)throw Error(ne(261));return Mt=null,Ft=0,Rt}function uT(){for(;St!==null;)tj(St)}function dT(){for(;St!==null&&!IP();)tj(St)}function tj(t){var e=sj(t.alternate,t,Nr);t.memoizedProps=t.pendingProps,e===null?rj(t):St=e,Bg.current=null}function rj(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=sT(r,e),r!==null){r.flags&=32767,St=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Rt=6,St=null;return}}else if(r=nT(r,e,Nr),r!==null){St=r;return}if(e=e.sibling,e!==null){St=e;return}St=e=t}while(e!==null);Rt===0&&(Rt=5)}function Oa(t,e,r){var n=Je,s=Vr.transition;try{Vr.transition=null,Je=1,hT(t,e,r,n)}finally{Vr.transition=s,Je=n}return null}function hT(t,e,r,n){do Zo();while(Gs!==null);if(He&6)throw Error(ne(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(qP(t,o),t===Mt&&(St=Mt=null,Ft=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||mu||(mu=!0,aj(od,function(){return Zo(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Vr.transition,Vr.transition=null;var i=Je;Je=1;var l=He;He|=4,Bg.current=null,oT(t,r),Qb(r,t),O2(Am),ld=!!Dm,Am=Dm=null,t.current=r,iT(r),LP(),He=l,Je=i,Vr.transition=o}else t.current=r;if(mu&&(mu=!1,Gs=t,Sd=s),o=t.pendingLanes,o===0&&(na=null),UP(r.stateNode),yr(t,_t()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(jd)throw jd=!1,t=ep,ep=null,t;return Sd&1&&t.tag!==0&&Zo(),o=t.pendingLanes,o&1?t===tp?El++:(El=0,tp=t):El=0,ga(),null}function Zo(){if(Gs!==null){var t=I_(Sd),e=Vr.transition,r=Je;try{if(Vr.transition=null,Je=16>t?16:t,Gs===null)var n=!1;else{if(t=Gs,Gs=null,Sd=0,He&6)throw Error(ne(331));var s=He;for(He|=4,me=t.current;me!==null;){var o=me,i=o.child;if(me.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(me=u;me!==null;){var d=me;switch(d.tag){case 0:case 11:case 15:kl(8,d,o)}var h=d.child;if(h!==null)h.return=d,me=h;else for(;me!==null;){d=me;var m=d.sibling,p=d.return;if(Kb(d),d===u){me=null;break}if(m!==null){m.return=p,me=m;break}me=p}}}var v=o.alternate;if(v!==null){var g=v.child;if(g!==null){v.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}me=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,me=i;else e:for(;me!==null;){if(o=me,o.flags&2048)switch(o.tag){case 0:case 11:case 15:kl(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,me=y;break e}me=o.return}}var x=t.current;for(me=x;me!==null;){i=me;var _=i.child;if(i.subtreeFlags&2064&&_!==null)_.return=i,me=_;else e:for(i=x;me!==null;){if(l=me,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ch(9,l)}}catch(j){vt(l,l.return,j)}if(l===i){me=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,me=b;break e}me=l.return}}if(He=s,ga(),$n&&typeof $n.onPostCommitFiberRoot=="function")try{$n.onPostCommitFiberRoot(th,t)}catch{}n=!0}return n}finally{Je=r,Vr.transition=e}}return!1}function Ry(t,e,r){e=Ni(r,e),e=Ib(t,e,1),t=ra(t,e,1),e=sr(),t!==null&&(wc(t,1,e),yr(t,e))}function vt(t,e,r){if(t.tag===3)Ry(t,t,r);else for(;e!==null;){if(e.tag===3){Ry(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(na===null||!na.has(n))){t=Ni(r,t),t=Lb(e,t,1),e=ra(e,t,1),t=sr(),e!==null&&(wc(e,1,t),yr(e,t));break}}e=e.return}}function fT(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=sr(),t.pingedLanes|=t.suspendedLanes&r,Mt===t&&(Ft&r)===r&&(Rt===4||Rt===3&&(Ft&130023424)===Ft&&500>_t()-Wg?Qa(t,0):zg|=r),yr(t,e)}function nj(t,e){e===0&&(t.mode&1?(e=su,su<<=1,!(su&130023424)&&(su=4194304)):e=1);var r=sr();t=os(t,e),t!==null&&(wc(t,e,r),yr(t,r))}function mT(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),nj(t,r)}function pT(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ne(314))}n!==null&&n.delete(e),nj(t,r)}var sj;sj=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||vr.current)mr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return mr=!1,rT(t,e,r);mr=!!(t.flags&131072)}else mr=!1,it&&e.flags&1048576&&lb(e,pd,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Wu(t,e),t=e.pendingProps;var s=_i(e,Kt.current);Xo(e,r),s=Ig(null,e,n,t,s,r);var o=Lg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xr(n)?(o=!0,fd(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Rg(e),s.updater=lh,e.stateNode=s,s._reactInternals=e,Wm(e,n,t,r),e=qm(null,e,n,!0,o,r)):(e.tag=0,it&&o&&Sg(e),tr(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Wu(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=vT(n),t=on(n,t),s){case 0:e=Hm(null,e,n,t,r);break e;case 1:e=_y(null,e,n,t,r);break e;case 11:e=yy(null,e,n,t,r);break e;case 14:e=wy(null,e,n,on(n.type,t),r);break e}throw Error(ne(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:on(n,s),Hm(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:on(n,s),_y(t,e,n,s,r);case 3:e:{if(Bb(e),t===null)throw Error(ne(387));n=e.pendingProps,o=e.memoizedState,s=o.element,mb(t,e),xd(e,n,null,r);var i=e.memoizedState;if(n=i.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Ni(Error(ne(423)),e),e=by(t,e,n,r,s);break e}else if(n!==s){s=Ni(Error(ne(424)),e),e=by(t,e,n,r,s);break e}else for(Pr=ta(e.stateNode.containerInfo.firstChild),Tr=e,it=!0,fn=null,r=hb(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(bi(),n===s){e=is(t,e,r);break e}tr(t,e,n,r)}e=e.child}return e;case 5:return pb(e),t===null&&Um(e),n=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,i=s.children,Mm(n,s)?i=null:o!==null&&Mm(n,o)&&(e.flags|=32),Ub(t,e),tr(t,e,i,r),e.child;case 6:return t===null&&Um(e),null;case 13:return zb(t,e,r);case 4:return Og(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=ji(e,null,n,r):tr(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:on(n,s),yy(t,e,n,s,r);case 7:return tr(t,e,e.pendingProps,r),e.child;case 8:return tr(t,e,e.pendingProps.children,r),e.child;case 12:return tr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,o=e.memoizedProps,i=s.value,rt(gd,n._currentValue),n._currentValue=i,o!==null)if(yn(o.value,i)){if(o.children===s.children&&!vr.current){e=is(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=rs(-1,r&-r),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Bm(o.return,r,e),l.lanes|=r;break}c=c.next}}else if(o.tag===10)i=o.type===e.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(ne(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Bm(i,r,e),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===e){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}tr(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Xo(e,r),s=Jr(s),n=n(s),e.flags|=1,tr(t,e,n,r),e.child;case 14:return n=e.type,s=on(n,e.pendingProps),s=on(n.type,s),wy(t,e,n,s,r);case 15:return Fb(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:on(n,s),Wu(t,e),e.tag=1,xr(n)?(t=!0,fd(e)):t=!1,Xo(e,r),Mb(e,n,s),Wm(e,n,s,r),qm(null,e,n,!0,t,r);case 19:return Wb(t,e,r);case 22:return $b(t,e,r)}throw Error(ne(156,e.tag))};function aj(t,e){return O_(t,e)}function gT(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wr(t,e,r,n){return new gT(t,e,r,n)}function Kg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vT(t){if(typeof t=="function")return Kg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===hg)return 11;if(t===fg)return 14}return 2}function aa(t,e){var r=t.alternate;return r===null?(r=Wr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function qu(t,e,r,n,s,o){var i=2;if(n=t,typeof t=="function")Kg(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Io:return Ja(r.children,s,o,e);case dg:i=8,s|=8;break;case fm:return t=Wr(12,r,e,s|2),t.elementType=fm,t.lanes=o,t;case mm:return t=Wr(13,r,e,s),t.elementType=mm,t.lanes=o,t;case pm:return t=Wr(19,r,e,s),t.elementType=pm,t.lanes=o,t;case p_:return dh(r,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case f_:i=10;break e;case m_:i=9;break e;case hg:i=11;break e;case fg:i=14;break e;case Ds:i=16,n=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=Wr(i,r,e,s),e.elementType=t,e.type=n,e.lanes=o,e}function Ja(t,e,r,n){return t=Wr(7,t,n,e),t.lanes=r,t}function dh(t,e,r,n){return t=Wr(22,t,n,e),t.elementType=p_,t.lanes=r,t.stateNode={isHidden:!1},t}function Pf(t,e,r){return t=Wr(6,t,null,e),t.lanes=r,t}function Tf(t,e,r){return e=Wr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xT(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uf(0),this.expirationTimes=uf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uf(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Gg(t,e,r,n,s,o,i,l,c){return t=new xT(t,e,r,l,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Wr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rg(o),t}function yT(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mo,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function oj(t){if(!t)return ca;t=t._reactInternals;e:{if(ho(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var r=t.type;if(xr(r))return ob(t,r,e)}return e}function ij(t,e,r,n,s,o,i,l,c){return t=Gg(r,n,!0,t,s,o,i,l,c),t.context=oj(null),r=t.current,n=sr(),s=sa(r),o=rs(n,s),o.callback=e??null,ra(r,o,s),t.current.lanes=s,wc(t,s,n),yr(t,n),t}function hh(t,e,r,n){var s=e.current,o=sr(),i=sa(s);return r=oj(r),e.context===null?e.context=r:e.pendingContext=r,e=rs(o,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ra(s,e,i),t!==null&&(pn(t,s,i,o),Uu(t,s,i)),i}function kd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Oy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Yg(t,e){Oy(t,e),(t=t.alternate)&&Oy(t,e)}function wT(){return null}var lj=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qg(t){this._internalRoot=t}fh.prototype.render=Qg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));hh(t,e,null,null)};fh.prototype.unmount=Qg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ro(function(){hh(null,t,null,null)}),e[as]=null}};function fh(t){this._internalRoot=t}fh.prototype.unstable_scheduleHydration=function(t){if(t){var e=$_();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ms.length&&e!==0&&e<Ms[r].priority;r++);Ms.splice(r,0,t),r===0&&B_(t)}};function Jg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dy(){}function _T(t,e,r,n,s){if(s){if(typeof n=="function"){var o=n;n=function(){var u=kd(i);o.call(u)}}var i=ij(e,n,t,0,null,!1,!1,"",Dy);return t._reactRootContainer=i,t[as]=i.current,Hl(t.nodeType===8?t.parentNode:t),ro(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=kd(c);l.call(u)}}var c=Gg(t,0,!1,null,null,!1,!1,"",Dy);return t._reactRootContainer=c,t[as]=c.current,Hl(t.nodeType===8?t.parentNode:t),ro(function(){hh(e,c,r,n)}),c}function ph(t,e,r,n,s){var o=r._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var l=s;s=function(){var c=kd(i);l.call(c)}}hh(e,i,t,s)}else i=_T(r,e,t,s,n);return kd(i)}L_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=ml(e.pendingLanes);r!==0&&(gg(e,r|1),yr(e,_t()),!(He&6)&&(ki=_t()+500,ga()))}break;case 13:ro(function(){var n=os(t,1);if(n!==null){var s=sr();pn(n,t,1,s)}}),Yg(t,1)}};vg=function(t){if(t.tag===13){var e=os(t,134217728);if(e!==null){var r=sr();pn(e,t,134217728,r)}Yg(t,134217728)}};F_=function(t){if(t.tag===13){var e=sa(t),r=os(t,e);if(r!==null){var n=sr();pn(r,t,e,n)}Yg(t,e)}};$_=function(){return Je};U_=function(t,e){var r=Je;try{return Je=t,e()}finally{Je=r}};Nm=function(t,e,r){switch(e){case"input":if(xm(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=ah(n);if(!s)throw Error(ne(90));v_(n),xm(n,s)}}}break;case"textarea":y_(t,r);break;case"select":e=r.value,e!=null&&Go(t,!!r.multiple,e,!1)}};k_=Vg;C_=ro;var bT={usingClientEntryPoint:!1,Events:[bc,Uo,ah,S_,N_,Vg]},ll={findFiberByHostInstance:La,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jT={bundleType:ll.bundleType,version:ll.version,rendererPackageName:ll.rendererPackageName,rendererConfig:ll.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ms.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=T_(t),t===null?null:t.stateNode},findFiberByHostInstance:ll.findFiberByHostInstance||wT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pu.isDisabled&&pu.supportsFiber)try{th=pu.inject(jT),$n=pu}catch{}}Ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bT;Ir.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jg(e))throw Error(ne(200));return yT(t,e,null,r)};Ir.createRoot=function(t,e){if(!Jg(t))throw Error(ne(299));var r=!1,n="",s=lj;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Gg(t,1,!1,null,null,r,!1,n,s),t[as]=e.current,Hl(t.nodeType===8?t.parentNode:t),new Qg(e)};Ir.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=T_(e),t=t===null?null:t.stateNode,t};Ir.flushSync=function(t){return ro(t)};Ir.hydrate=function(t,e,r){if(!mh(e))throw Error(ne(200));return ph(null,t,e,!0,r)};Ir.hydrateRoot=function(t,e,r){if(!Jg(t))throw Error(ne(405));var n=r!=null&&r.hydratedSources||null,s=!1,o="",i=lj;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=ij(e,null,t,1,r??null,s,!1,o,i),t[as]=e.current,Hl(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new fh(e)};Ir.render=function(t,e,r){if(!mh(e))throw Error(ne(200));return ph(null,t,e,!1,r)};Ir.unmountComponentAtNode=function(t){if(!mh(t))throw Error(ne(40));return t._reactRootContainer?(ro(function(){ph(null,null,t,!1,function(){t._reactRootContainer=null,t[as]=null})}),!0):!1};Ir.unstable_batchedUpdates=Vg;Ir.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!mh(r))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return ph(t,e,r,!1,n)};Ir.version="18.3.1-next-f1338f8080-20240426";function cj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cj)}catch(t){console.error(t)}}cj(),c_.exports=Ir;var Bi=c_.exports;const ST=Q0(Bi);var uj,Ay=Bi;uj=Ay.createRoot,Ay.hydrateRoot;var Sc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},no=typeof window>"u"||"Deno"in globalThis;function hr(){}function NT(t,e){return typeof t=="function"?t(e):t}function sp(t){return typeof t=="number"&&t>=0&&t!==1/0}function dj(t,e){return Math.max(t+(e||0)-Date.now(),0)}function oa(t,e){return typeof t=="function"?t(e):t}function $r(t,e){return typeof t=="function"?t(e):t}function My(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:o,queryKey:i,stale:l}=t;if(i){if(n){if(e.queryHash!==Xg(i,e.options))return!1}else if(!tc(e.queryKey,i))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||o&&!o(e))}function Iy(t,e){const{exact:r,status:n,predicate:s,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(r){if(ec(e.options.mutationKey)!==ec(o))return!1}else if(!tc(e.options.mutationKey,o))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function Xg(t,e){return((e==null?void 0:e.queryKeyHashFn)||ec)(t)}function ec(t){return JSON.stringify(t,(e,r)=>op(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function tc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>tc(t[r],e[r])):!1}function hj(t,e){if(t===e)return t;const r=Ly(t)&&Ly(e);if(r||op(t)&&op(e)){const n=r?t:Object.keys(t),s=n.length,o=r?e:Object.keys(e),i=o.length,l=r?[]:{},c=new Set(n);let u=0;for(let d=0;d<i;d++){const h=r?d:o[d];(!r&&c.has(h)||r)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,u++):(l[h]=hj(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&u++)}return s===i&&u===s?t:l}return e}function ap(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function Ly(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function op(t){if(!Fy(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!Fy(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Fy(t){return Object.prototype.toString.call(t)==="[object Object]"}function kT(t){return new Promise(e=>{setTimeout(e,t)})}function ip(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?hj(t,e):e}function CT(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function ET(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var Zg=Symbol();function fj(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Zg?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function PT(t,e){return typeof t=="function"?t(...e):!!t}var Ba,$s,li,U0,TT=(U0=class extends Sc{constructor(){super();Ne(this,Ba);Ne(this,$s);Ne(this,li);pe(this,li,e=>{if(!no&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){A(this,$s)||this.setEventListener(A(this,li))}onUnsubscribe(){var e;this.hasListeners()||((e=A(this,$s))==null||e.call(this),pe(this,$s,void 0))}setEventListener(e){var r;pe(this,li,e),(r=A(this,$s))==null||r.call(this),pe(this,$s,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){A(this,Ba)!==e&&(pe(this,Ba,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof A(this,Ba)=="boolean"?A(this,Ba):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ba=new WeakMap,$s=new WeakMap,li=new WeakMap,U0),ev=new TT,ci,Us,ui,B0,RT=(B0=class extends Sc{constructor(){super();Ne(this,ci,!0);Ne(this,Us);Ne(this,ui);pe(this,ui,e=>{if(!no&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){A(this,Us)||this.setEventListener(A(this,ui))}onUnsubscribe(){var e;this.hasListeners()||((e=A(this,Us))==null||e.call(this),pe(this,Us,void 0))}setEventListener(e){var r;pe(this,ui,e),(r=A(this,Us))==null||r.call(this),pe(this,Us,e(this.setOnline.bind(this)))}setOnline(e){A(this,ci)!==e&&(pe(this,ci,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return A(this,ci)}},ci=new WeakMap,Us=new WeakMap,ui=new WeakMap,B0),Cd=new RT;function lp(){let t,e;const r=new Promise((s,o)=>{t=s,e=o});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),t(s)},r.reject=s=>{n({status:"rejected",reason:s}),e(s)},r}function OT(t){return Math.min(1e3*2**t,3e4)}function mj(t){return(t??"online")==="online"?Cd.isOnline():!0}var pj=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Rf(t){return t instanceof pj}function gj(t){let e=!1,r=0,n=!1,s;const o=lp(),i=g=>{var w;n||(m(new pj(g)),(w=t.abort)==null||w.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>ev.isFocused()&&(t.networkMode==="always"||Cd.isOnline())&&t.canRun(),d=()=>mj(t.networkMode)&&t.canRun(),h=g=>{var w;n||(n=!0,(w=t.onSuccess)==null||w.call(t,g),s==null||s(),o.resolve(g))},m=g=>{var w;n||(n=!0,(w=t.onError)==null||w.call(t,g),s==null||s(),o.reject(g))},p=()=>new Promise(g=>{var w;s=y=>{(n||u())&&g(y)},(w=t.onPause)==null||w.call(t)}).then(()=>{var g;s=void 0,n||(g=t.onContinue)==null||g.call(t)}),v=()=>{if(n)return;let g;const w=r===0?t.initialPromise:void 0;try{g=w??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(h).catch(y=>{var N;if(n)return;const x=t.retry??(no?0:3),_=t.retryDelay??OT,b=typeof _=="function"?_(r,y):_,j=x===!0||typeof x=="number"&&r<x||typeof x=="function"&&x(r,y);if(e||!j){m(y);return}r++,(N=t.onFail)==null||N.call(t,r,y),kT(b).then(()=>u()?void 0:p()).then(()=>{e?m(y):v()})})};return{promise:o,cancel:i,continue:()=>(s==null||s(),o),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?v():p().then(v),o)}}var DT=t=>setTimeout(t,0);function AT(){let t=[],e=0,r=l=>{l()},n=l=>{l()},s=DT;const o=l=>{e?t.push(l):s(()=>{r(l)})},i=()=>{const l=t;t=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||i()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var Lt=AT(),za,z0,vj=(z0=class{constructor(){Ne(this,za)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),sp(this.gcTime)&&pe(this,za,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(no?1/0:5*60*1e3))}clearGcTimeout(){A(this,za)&&(clearTimeout(A(this,za)),pe(this,za,void 0))}},za=new WeakMap,z0),di,Wa,Fr,Va,Vt,pc,Ha,cn,Yn,W0,MT=(W0=class extends vj{constructor(e){super();Ne(this,cn);Ne(this,di);Ne(this,Wa);Ne(this,Fr);Ne(this,Va);Ne(this,Vt);Ne(this,pc);Ne(this,Ha);pe(this,Ha,!1),pe(this,pc,e.defaultOptions),this.setOptions(e.options),this.observers=[],pe(this,Va,e.client),pe(this,Fr,A(this,Va).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,pe(this,di,IT(this.options)),this.state=e.state??A(this,di),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=A(this,Vt))==null?void 0:e.promise}setOptions(e){this.options={...A(this,pc),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&A(this,Fr).remove(this)}setData(e,r){const n=ip(this.state.data,e,this.options);return Be(this,cn,Yn).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){Be(this,cn,Yn).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,s;const r=(n=A(this,Vt))==null?void 0:n.promise;return(s=A(this,Vt))==null||s.cancel(e),r?r.then(hr).catch(hr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(A(this,di))}isActive(){return this.observers.some(e=>$r(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Zg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>oa(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!dj(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=A(this,Vt))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=A(this,Vt))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),A(this,Fr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(A(this,Vt)&&(A(this,Ha)?A(this,Vt).cancel({revert:!0}):A(this,Vt).cancelRetry()),this.scheduleGc()),A(this,Fr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Be(this,cn,Yn).call(this,{type:"invalidate"})}fetch(e,r){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(A(this,Vt))return A(this,Vt).continueRetry(),A(this,Vt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const m=this.observers.find(p=>p.options.queryFn);m&&this.setOptions(m.options)}const n=new AbortController,s=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(pe(this,Ha,!0),n.signal)})},o=()=>{const m=fj(this.options,r),v=(()=>{const g={client:A(this,Va),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return pe(this,Ha,!1),this.options.persister?this.options.persister(m,v,this):m(v)},l=(()=>{const m={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:A(this,Va),state:this.state,fetchFn:o};return s(m),m})();(u=this.options.behavior)==null||u.onFetch(l,this),pe(this,Wa,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&Be(this,cn,Yn).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=m=>{var p,v,g,w;Rf(m)&&m.silent||Be(this,cn,Yn).call(this,{type:"error",error:m}),Rf(m)||((v=(p=A(this,Fr).config).onError)==null||v.call(p,m,this),(w=(g=A(this,Fr).config).onSettled)==null||w.call(g,this.state.data,m,this)),this.scheduleGc()};return pe(this,Vt,gj({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:m=>{var p,v,g,w;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(y){c(y);return}(v=(p=A(this,Fr).config).onSuccess)==null||v.call(p,m,this),(w=(g=A(this,Fr).config).onSettled)==null||w.call(g,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,p)=>{Be(this,cn,Yn).call(this,{type:"failed",failureCount:m,error:p})},onPause:()=>{Be(this,cn,Yn).call(this,{type:"pause"})},onContinue:()=>{Be(this,cn,Yn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),A(this,Vt).start()}},di=new WeakMap,Wa=new WeakMap,Fr=new WeakMap,Va=new WeakMap,Vt=new WeakMap,pc=new WeakMap,Ha=new WeakMap,cn=new WeakSet,Yn=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...xj(n.data,this.options),fetchMeta:e.meta??null};case"success":return pe(this,Wa,void 0),{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Rf(s)&&s.revert&&A(this,Wa)?{...A(this,Wa),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),Lt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),A(this,Fr).notify({query:this,type:"updated",action:e})})},W0);function xj(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:mj(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function IT(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Pn,V0,LT=(V0=class extends Sc{constructor(e={}){super();Ne(this,Pn);this.config=e,pe(this,Pn,new Map)}build(e,r,n){const s=r.queryKey,o=r.queryHash??Xg(s,r);let i=this.get(o);return i||(i=new MT({client:e,queryKey:s,queryHash:o,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(i)),i}add(e){A(this,Pn).has(e.queryHash)||(A(this,Pn).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=A(this,Pn).get(e.queryHash);r&&(e.destroy(),r===e&&A(this,Pn).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Lt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return A(this,Pn).get(e)}getAll(){return[...A(this,Pn).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>My(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>My(e,n)):r}notify(e){Lt.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){Lt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Lt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Pn=new WeakMap,V0),Tn,Zt,qa,Rn,Rs,H0,FT=(H0=class extends vj{constructor(e){super();Ne(this,Rn);Ne(this,Tn);Ne(this,Zt);Ne(this,qa);this.mutationId=e.mutationId,pe(this,Zt,e.mutationCache),pe(this,Tn,[]),this.state=e.state||$T(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){A(this,Tn).includes(e)||(A(this,Tn).push(e),this.clearGcTimeout(),A(this,Zt).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){pe(this,Tn,A(this,Tn).filter(r=>r!==e)),this.scheduleGc(),A(this,Zt).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){A(this,Tn).length||(this.state.status==="pending"?this.scheduleGc():A(this,Zt).remove(this))}continue(){var e;return((e=A(this,qa))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,i,l,c,u,d,h,m,p,v,g,w,y,x,_,b,j,N,k,E;const r=()=>{Be(this,Rn,Rs).call(this,{type:"continue"})};pe(this,qa,gj({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(T,P)=>{Be(this,Rn,Rs).call(this,{type:"failed",failureCount:T,error:P})},onPause:()=>{Be(this,Rn,Rs).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>A(this,Zt).canRun(this)}));const n=this.state.status==="pending",s=!A(this,qa).canStart();try{if(n)r();else{Be(this,Rn,Rs).call(this,{type:"pending",variables:e,isPaused:s}),await((i=(o=A(this,Zt).config).onMutate)==null?void 0:i.call(o,e,this));const P=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e));P!==this.state.context&&Be(this,Rn,Rs).call(this,{type:"pending",context:P,variables:e,isPaused:s})}const T=await A(this,qa).start();return await((d=(u=A(this,Zt).config).onSuccess)==null?void 0:d.call(u,T,e,this.state.context,this)),await((m=(h=this.options).onSuccess)==null?void 0:m.call(h,T,e,this.state.context)),await((v=(p=A(this,Zt).config).onSettled)==null?void 0:v.call(p,T,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,T,null,e,this.state.context)),Be(this,Rn,Rs).call(this,{type:"success",data:T}),T}catch(T){try{throw await((x=(y=A(this,Zt).config).onError)==null?void 0:x.call(y,T,e,this.state.context,this)),await((b=(_=this.options).onError)==null?void 0:b.call(_,T,e,this.state.context)),await((N=(j=A(this,Zt).config).onSettled)==null?void 0:N.call(j,void 0,T,this.state.variables,this.state.context,this)),await((E=(k=this.options).onSettled)==null?void 0:E.call(k,void 0,T,e,this.state.context)),T}finally{Be(this,Rn,Rs).call(this,{type:"error",error:T})}}finally{A(this,Zt).runNext(this)}}},Tn=new WeakMap,Zt=new WeakMap,qa=new WeakMap,Rn=new WeakSet,Rs=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Lt.batch(()=>{A(this,Tn).forEach(n=>{n.onMutationUpdate(e)}),A(this,Zt).notify({mutation:this,type:"updated",action:e})})},H0);function $T(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Zn,un,gc,q0,UT=(q0=class extends Sc{constructor(e={}){super();Ne(this,Zn);Ne(this,un);Ne(this,gc);this.config=e,pe(this,Zn,new Set),pe(this,un,new Map),pe(this,gc,0)}build(e,r,n){const s=new FT({mutationCache:this,mutationId:++Xc(this,gc)._,options:e.defaultMutationOptions(r),state:n});return this.add(s),s}add(e){A(this,Zn).add(e);const r=gu(e);if(typeof r=="string"){const n=A(this,un).get(r);n?n.push(e):A(this,un).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(A(this,Zn).delete(e)){const r=gu(e);if(typeof r=="string"){const n=A(this,un).get(r);if(n)if(n.length>1){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}else n[0]===e&&A(this,un).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=gu(e);if(typeof r=="string"){const n=A(this,un).get(r),s=n==null?void 0:n.find(o=>o.state.status==="pending");return!s||s===e}else return!0}runNext(e){var n;const r=gu(e);if(typeof r=="string"){const s=(n=A(this,un).get(r))==null?void 0:n.find(o=>o!==e&&o.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Lt.batch(()=>{A(this,Zn).forEach(e=>{this.notify({type:"removed",mutation:e})}),A(this,Zn).clear(),A(this,un).clear()})}getAll(){return Array.from(A(this,Zn))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>Iy(r,n))}findAll(e={}){return this.getAll().filter(r=>Iy(e,r))}notify(e){Lt.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return Lt.batch(()=>Promise.all(e.map(r=>r.continue().catch(hr))))}},Zn=new WeakMap,un=new WeakMap,gc=new WeakMap,q0);function gu(t){var e;return(e=t.options.scope)==null?void 0:e.id}function $y(t){return{onFetch:(e,r)=>{var d,h,m,p,v;const n=e.options,s=(m=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,o=((p=e.state.data)==null?void 0:p.pages)||[],i=((v=e.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const w=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},y=fj(e.options,e.fetchOptions),x=async(_,b,j)=>{if(g)return Promise.reject();if(b==null&&_.pages.length)return Promise.resolve(_);const k=(()=>{const z={client:e.client,queryKey:e.queryKey,pageParam:b,direction:j?"backward":"forward",meta:e.options.meta};return w(z),z})(),E=await y(k),{maxPages:T}=e.options,P=j?ET:CT;return{pages:P(_.pages,E,T),pageParams:P(_.pageParams,b,T)}};if(s&&o.length){const _=s==="backward",b=_?BT:Uy,j={pages:o,pageParams:i},N=b(n,j);l=await x(j,N,_)}else{const _=t??o.length;do{const b=c===0?i[0]??n.initialPageParam:Uy(n,l);if(c>0&&b==null)break;l=await x(l,b),c++}while(c<_)}return l};e.options.persister?e.fetchFn=()=>{var g,w;return(w=(g=e.options).persister)==null?void 0:w.call(g,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function Uy(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function BT(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var gt,Bs,zs,hi,fi,Ws,mi,pi,K0,zT=(K0=class{constructor(t={}){Ne(this,gt);Ne(this,Bs);Ne(this,zs);Ne(this,hi);Ne(this,fi);Ne(this,Ws);Ne(this,mi);Ne(this,pi);pe(this,gt,t.queryCache||new LT),pe(this,Bs,t.mutationCache||new UT),pe(this,zs,t.defaultOptions||{}),pe(this,hi,new Map),pe(this,fi,new Map),pe(this,Ws,0)}mount(){Xc(this,Ws)._++,A(this,Ws)===1&&(pe(this,mi,ev.subscribe(async t=>{t&&(await this.resumePausedMutations(),A(this,gt).onFocus())})),pe(this,pi,Cd.subscribe(async t=>{t&&(await this.resumePausedMutations(),A(this,gt).onOnline())})))}unmount(){var t,e;Xc(this,Ws)._--,A(this,Ws)===0&&((t=A(this,mi))==null||t.call(this),pe(this,mi,void 0),(e=A(this,pi))==null||e.call(this),pe(this,pi,void 0))}isFetching(t){return A(this,gt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return A(this,Bs).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=A(this,gt).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=A(this,gt).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(oa(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return A(this,gt).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),s=A(this,gt).get(n.queryHash),o=s==null?void 0:s.state.data,i=NT(e,o);if(i!==void 0)return A(this,gt).build(this,n).setData(i,{...r,manual:!0})}setQueriesData(t,e,r){return Lt.batch(()=>A(this,gt).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=A(this,gt).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=A(this,gt);Lt.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=A(this,gt);return Lt.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=Lt.batch(()=>A(this,gt).findAll(t).map(s=>s.cancel(r)));return Promise.all(n).then(hr).catch(hr)}invalidateQueries(t,e={}){return Lt.batch(()=>(A(this,gt).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=Lt.batch(()=>A(this,gt).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,r);return r.throwOnError||(o=o.catch(hr)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(hr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=A(this,gt).build(this,e);return r.isStaleByTime(oa(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(hr).catch(hr)}fetchInfiniteQuery(t){return t.behavior=$y(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(hr).catch(hr)}ensureInfiniteQueryData(t){return t.behavior=$y(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Cd.isOnline()?A(this,Bs).resumePausedMutations():Promise.resolve()}getQueryCache(){return A(this,gt)}getMutationCache(){return A(this,Bs)}getDefaultOptions(){return A(this,zs)}setDefaultOptions(t){pe(this,zs,t)}setQueryDefaults(t,e){A(this,hi).set(ec(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...A(this,hi).values()],r={};return e.forEach(n=>{tc(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){A(this,fi).set(ec(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...A(this,fi).values()],r={};return e.forEach(n=>{tc(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...A(this,zs).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Xg(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Zg&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...A(this,zs).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){A(this,gt).clear(),A(this,Bs).clear()}},gt=new WeakMap,Bs=new WeakMap,zs=new WeakMap,hi=new WeakMap,fi=new WeakMap,Ws=new WeakMap,mi=new WeakMap,pi=new WeakMap,K0),dr,ze,vc,er,Ka,gi,Vs,Hs,xc,vi,xi,Ga,Ya,qs,yi,Ye,gl,cp,up,dp,hp,fp,mp,pp,yj,G0,WT=(G0=class extends Sc{constructor(e,r){super();Ne(this,Ye);Ne(this,dr);Ne(this,ze);Ne(this,vc);Ne(this,er);Ne(this,Ka);Ne(this,gi);Ne(this,Vs);Ne(this,Hs);Ne(this,xc);Ne(this,vi);Ne(this,xi);Ne(this,Ga);Ne(this,Ya);Ne(this,qs);Ne(this,yi,new Set);this.options=r,pe(this,dr,e),pe(this,Hs,null),pe(this,Vs,lp()),this.options.experimental_prefetchInRender||A(this,Vs).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(A(this,ze).addObserver(this),By(A(this,ze),this.options)?Be(this,Ye,gl).call(this):this.updateResult(),Be(this,Ye,hp).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return gp(A(this,ze),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return gp(A(this,ze),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Be(this,Ye,fp).call(this),Be(this,Ye,mp).call(this),A(this,ze).removeObserver(this)}setOptions(e){const r=this.options,n=A(this,ze);if(this.options=A(this,dr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof $r(this.options.enabled,A(this,ze))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Be(this,Ye,pp).call(this),A(this,ze).setOptions(this.options),r._defaulted&&!ap(this.options,r)&&A(this,dr).getQueryCache().notify({type:"observerOptionsUpdated",query:A(this,ze),observer:this});const s=this.hasListeners();s&&zy(A(this,ze),n,this.options,r)&&Be(this,Ye,gl).call(this),this.updateResult(),s&&(A(this,ze)!==n||$r(this.options.enabled,A(this,ze))!==$r(r.enabled,A(this,ze))||oa(this.options.staleTime,A(this,ze))!==oa(r.staleTime,A(this,ze)))&&Be(this,Ye,cp).call(this);const o=Be(this,Ye,up).call(this);s&&(A(this,ze)!==n||$r(this.options.enabled,A(this,ze))!==$r(r.enabled,A(this,ze))||o!==A(this,qs))&&Be(this,Ye,dp).call(this,o)}getOptimisticResult(e){const r=A(this,dr).getQueryCache().build(A(this,dr),e),n=this.createResult(r,e);return HT(this,n)&&(pe(this,er,n),pe(this,gi,this.options),pe(this,Ka,A(this,ze).state)),n}getCurrentResult(){return A(this,er)}trackResult(e,r){return new Proxy(e,{get:(n,s)=>(this.trackProp(s),r==null||r(s),Reflect.get(n,s))})}trackProp(e){A(this,yi).add(e)}getCurrentQuery(){return A(this,ze)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=A(this,dr).defaultQueryOptions(e),n=A(this,dr).getQueryCache().build(A(this,dr),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(e){return Be(this,Ye,gl).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),A(this,er)))}createResult(e,r){var T;const n=A(this,ze),s=this.options,o=A(this,er),i=A(this,Ka),l=A(this,gi),u=e!==n?e.state:A(this,vc),{state:d}=e;let h={...d},m=!1,p;if(r._optimisticResults){const P=this.hasListeners(),z=!P&&By(e,r),B=P&&zy(e,n,r,s);(z||B)&&(h={...h,...xj(d.data,e.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:v,errorUpdatedAt:g,status:w}=h;p=h.data;let y=!1;if(r.placeholderData!==void 0&&p===void 0&&w==="pending"){let P;o!=null&&o.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(P=o.data,y=!0):P=typeof r.placeholderData=="function"?r.placeholderData((T=A(this,xi))==null?void 0:T.state.data,A(this,xi)):r.placeholderData,P!==void 0&&(w="success",p=ip(o==null?void 0:o.data,P,r),m=!0)}if(r.select&&p!==void 0&&!y)if(o&&p===(i==null?void 0:i.data)&&r.select===A(this,xc))p=A(this,vi);else try{pe(this,xc,r.select),p=r.select(p),p=ip(o==null?void 0:o.data,p,r),pe(this,vi,p),pe(this,Hs,null)}catch(P){pe(this,Hs,P)}A(this,Hs)&&(v=A(this,Hs),p=A(this,vi),g=Date.now(),w="error");const x=h.fetchStatus==="fetching",_=w==="pending",b=w==="error",j=_&&x,N=p!==void 0,E={status:w,fetchStatus:h.fetchStatus,isPending:_,isSuccess:w==="success",isError:b,isInitialLoading:j,isLoading:j,data:p,dataUpdatedAt:h.dataUpdatedAt,error:v,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:x,isRefetching:x&&!_,isLoadingError:b&&!N,isPaused:h.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:b&&N,isStale:tv(e,r),refetch:this.refetch,promise:A(this,Vs),isEnabled:$r(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const P=Q=>{E.status==="error"?Q.reject(E.error):E.data!==void 0&&Q.resolve(E.data)},z=()=>{const Q=pe(this,Vs,E.promise=lp());P(Q)},B=A(this,Vs);switch(B.status){case"pending":e.queryHash===n.queryHash&&P(B);break;case"fulfilled":(E.status==="error"||E.data!==B.value)&&z();break;case"rejected":(E.status!=="error"||E.error!==B.reason)&&z();break}}return E}updateResult(){const e=A(this,er),r=this.createResult(A(this,ze),this.options);if(pe(this,Ka,A(this,ze).state),pe(this,gi,this.options),A(this,Ka).data!==void 0&&pe(this,xi,A(this,ze)),ap(r,e))return;pe(this,er,r);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!A(this,yi).size)return!0;const i=new Set(o??A(this,yi));return this.options.throwOnError&&i.add("error"),Object.keys(A(this,er)).some(l=>{const c=l;return A(this,er)[c]!==e[c]&&i.has(c)})};Be(this,Ye,yj).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Be(this,Ye,hp).call(this)}},dr=new WeakMap,ze=new WeakMap,vc=new WeakMap,er=new WeakMap,Ka=new WeakMap,gi=new WeakMap,Vs=new WeakMap,Hs=new WeakMap,xc=new WeakMap,vi=new WeakMap,xi=new WeakMap,Ga=new WeakMap,Ya=new WeakMap,qs=new WeakMap,yi=new WeakMap,Ye=new WeakSet,gl=function(e){Be(this,Ye,pp).call(this);let r=A(this,ze).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(hr)),r},cp=function(){Be(this,Ye,fp).call(this);const e=oa(this.options.staleTime,A(this,ze));if(no||A(this,er).isStale||!sp(e))return;const n=dj(A(this,er).dataUpdatedAt,e)+1;pe(this,Ga,setTimeout(()=>{A(this,er).isStale||this.updateResult()},n))},up=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(A(this,ze)):this.options.refetchInterval)??!1},dp=function(e){Be(this,Ye,mp).call(this),pe(this,qs,e),!(no||$r(this.options.enabled,A(this,ze))===!1||!sp(A(this,qs))||A(this,qs)===0)&&pe(this,Ya,setInterval(()=>{(this.options.refetchIntervalInBackground||ev.isFocused())&&Be(this,Ye,gl).call(this)},A(this,qs)))},hp=function(){Be(this,Ye,cp).call(this),Be(this,Ye,dp).call(this,Be(this,Ye,up).call(this))},fp=function(){A(this,Ga)&&(clearTimeout(A(this,Ga)),pe(this,Ga,void 0))},mp=function(){A(this,Ya)&&(clearInterval(A(this,Ya)),pe(this,Ya,void 0))},pp=function(){const e=A(this,dr).getQueryCache().build(A(this,dr),this.options);if(e===A(this,ze))return;const r=A(this,ze);pe(this,ze,e),pe(this,vc,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},yj=function(e){Lt.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(A(this,er))}),A(this,dr).getQueryCache().notify({query:A(this,ze),type:"observerResultsUpdated"})})},G0);function VT(t,e){return $r(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function By(t,e){return VT(t,e)||t.state.data!==void 0&&gp(t,e,e.refetchOnMount)}function gp(t,e,r){if($r(e.enabled,t)!==!1&&oa(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&tv(t,e)}return!1}function zy(t,e,r,n){return(t!==e||$r(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&tv(t,r)}function tv(t,e){return $r(e.enabled,t)!==!1&&t.isStaleByTime(oa(e.staleTime,t))}function HT(t,e){return!ap(t.getCurrentResult(),e)}var wj=f.createContext(void 0),qT=t=>{const e=f.useContext(wj);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},KT=({client:t,children:e})=>(f.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(wj.Provider,{value:t,children:e})),_j=f.createContext(!1),GT=()=>f.useContext(_j);_j.Provider;function YT(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var QT=f.createContext(YT()),JT=()=>f.useContext(QT),XT=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},ZT=t=>{f.useEffect(()=>{t.clearReset()},[t])},eR=({result:t,errorResetBoundary:e,throwOnError:r,query:n,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(s&&t.data===void 0||PT(r,[t.error,n])),tR=t=>{if(t.suspense){const e=n=>n==="static"?n:Math.max(n??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...n)=>e(r(...n)):e(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},rR=(t,e)=>t.isLoading&&t.isFetching&&!e,nR=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Wy=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function sR(t,e,r){var h,m,p,v,g;const n=GT(),s=JT(),o=qT(),i=o.defaultQueryOptions(t);(m=(h=o.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||m.call(h,i),i._optimisticResults=n?"isRestoring":"optimistic",tR(i),XT(i,s),ZT(s);const l=!o.getQueryCache().get(i.queryHash),[c]=f.useState(()=>new e(o,i)),u=c.getOptimisticResult(i),d=!n&&t.subscribed!==!1;if(f.useSyncExternalStore(f.useCallback(w=>{const y=d?c.subscribe(Lt.batchCalls(w)):hr;return c.updateResult(),y},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),f.useEffect(()=>{c.setOptions(i)},[i,c]),nR(i,u))throw Wy(i,c,s);if(eR({result:u,errorResetBoundary:s,throwOnError:i.throwOnError,query:o.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw u.error;if((v=(p=o.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||v.call(p,i,u),i.experimental_prefetchInRender&&!no&&rR(u,n)){const w=l?Wy(i,c,s):(g=o.getQueryCache().get(i.queryHash))==null?void 0:g.promise;w==null||w.catch(hr).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?u:c.trackResult(u)}function gh(t,e){return sR(t,WT)}const Pe=t=>typeof t=="string",cl=()=>{let t,e;const r=new Promise((n,s)=>{t=n,e=s});return r.resolve=t,r.reject=e,r},Vy=t=>t==null?"":""+t,aR=(t,e,r)=>{t.forEach(n=>{e[n]&&(r[n]=e[n])})},oR=/###/g,Hy=t=>t&&t.indexOf("###")>-1?t.replace(oR,"."):t,qy=t=>!t||Pe(t),Pl=(t,e,r)=>{const n=Pe(e)?e.split("."):e;let s=0;for(;s<n.length-1;){if(qy(t))return{};const o=Hy(n[s]);!t[o]&&r&&(t[o]=new r),Object.prototype.hasOwnProperty.call(t,o)?t=t[o]:t={},++s}return qy(t)?{}:{obj:t,k:Hy(n[s])}},Ky=(t,e,r)=>{const{obj:n,k:s}=Pl(t,e,Object);if(n!==void 0||e.length===1){n[s]=r;return}let o=e[e.length-1],i=e.slice(0,e.length-1),l=Pl(t,i,Object);for(;l.obj===void 0&&i.length;)o=`${i[i.length-1]}.${o}`,i=i.slice(0,i.length-1),l=Pl(t,i,Object),l!=null&&l.obj&&typeof l.obj[`${l.k}.${o}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${o}`]=r},iR=(t,e,r,n)=>{const{obj:s,k:o}=Pl(t,e,Object);s[o]=s[o]||[],s[o].push(r)},Ed=(t,e)=>{const{obj:r,k:n}=Pl(t,e);if(r&&Object.prototype.hasOwnProperty.call(r,n))return r[n]},lR=(t,e,r)=>{const n=Ed(t,r);return n!==void 0?n:Ed(e,r)},bj=(t,e,r)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in t?Pe(t[n])||t[n]instanceof String||Pe(e[n])||e[n]instanceof String?r&&(t[n]=e[n]):bj(t[n],e[n],r):t[n]=e[n]);return t},_o=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var cR={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const uR=t=>Pe(t)?t.replace(/[&<>"'\/]/g,e=>cR[e]):t;class dR{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const r=this.regExpMap.get(e);if(r!==void 0)return r;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const hR=[" ",",","?","!",";"],fR=new dR(20),mR=(t,e,r)=>{e=e||"",r=r||"";const n=hR.filter(i=>e.indexOf(i)<0&&r.indexOf(i)<0);if(n.length===0)return!0;const s=fR.getRegExp(`(${n.map(i=>i==="?"?"\\?":i).join("|")})`);let o=!s.test(t);if(!o){const i=t.indexOf(r);i>0&&!s.test(t.substring(0,i))&&(o=!0)}return o},vp=(t,e,r=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const n=e.split(r);let s=t;for(let o=0;o<n.length;){if(!s||typeof s!="object")return;let i,l="";for(let c=o;c<n.length;++c)if(c!==o&&(l+=r),l+=n[c],i=s[l],i!==void 0){if(["string","number","boolean"].indexOf(typeof i)>-1&&c<n.length-1)continue;o+=c-o+1;break}s=i}return s},rc=t=>t==null?void 0:t.replace("_","-"),pR={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var r,n;(n=(r=console==null?void 0:console[t])==null?void 0:r.apply)==null||n.call(r,console,e)}};class Pd{constructor(e,r={}){this.init(e,r)}init(e,r={}){this.prefix=r.prefix||"i18next:",this.logger=e||pR,this.options=r,this.debug=r.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,r,n,s){return s&&!this.debug?null:(Pe(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[r](e))}create(e){return new Pd(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Pd(this.logger,e)}}var In=new Pd;class vh{constructor(){this.observers={}}on(e,r){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const s=this.observers[n].get(r)||0;this.observers[n].set(r,s+1)}),this}off(e,r){if(this.observers[e]){if(!r){delete this.observers[e];return}this.observers[e].delete(r)}}emit(e,...r){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([s,o])=>{for(let i=0;i<o;i++)s(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([s,o])=>{for(let i=0;i<o;i++)s.apply(s,[e,...r])})}}class Gy extends vh{constructor(e,r={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const r=this.options.ns.indexOf(e);r>-1&&this.options.ns.splice(r,1)}getResource(e,r,n,s={}){var u,d;const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,i=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,r],n&&(Array.isArray(n)?l.push(...n):Pe(n)&&o?l.push(...n.split(o)):l.push(n)));const c=Ed(this.data,l);return!c&&!r&&!n&&e.indexOf(".")>-1&&(e=l[0],r=l[1],n=l.slice(2).join(".")),c||!i||!Pe(n)?c:vp((d=(u=this.data)==null?void 0:u[e])==null?void 0:d[r],n,o)}addResource(e,r,n,s,o={silent:!1}){const i=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let l=[e,r];n&&(l=l.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(l=e.split("."),s=r,r=l[1]),this.addNamespaces(r),Ky(this.data,l,s),o.silent||this.emit("added",e,r,n,s)}addResources(e,r,n,s={silent:!1}){for(const o in n)(Pe(n[o])||Array.isArray(n[o]))&&this.addResource(e,r,o,n[o],{silent:!0});s.silent||this.emit("added",e,r,n)}addResourceBundle(e,r,n,s,o,i={silent:!1,skipCopy:!1}){let l=[e,r];e.indexOf(".")>-1&&(l=e.split("."),s=n,n=r,r=l[1]),this.addNamespaces(r);let c=Ed(this.data,l)||{};i.skipCopy||(n=JSON.parse(JSON.stringify(n))),s?bj(c,n,o):c={...c,...n},Ky(this.data,l,c),i.silent||this.emit("added",e,r,n)}removeResourceBundle(e,r){this.hasResourceBundle(e,r)&&delete this.data[e][r],this.removeNamespaces(r),this.emit("removed",e,r)}hasResourceBundle(e,r){return this.getResource(e,r)!==void 0}getResourceBundle(e,r){return r||(r=this.options.defaultNS),this.getResource(e,r)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const r=this.getDataByLanguage(e);return!!(r&&Object.keys(r)||[]).find(s=>r[s]&&Object.keys(r[s]).length>0)}toJSON(){return this.data}}var jj={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,r,n,s){return t.forEach(o=>{var i;e=((i=this.processors[o])==null?void 0:i.process(e,r,n,s))??e}),e}};const Sj=Symbol("i18next/PATH_KEY");function gR(){const t=[],e=Object.create(null);let r;return e.get=(n,s)=>{var o;return(o=r==null?void 0:r.revoke)==null||o.call(r),s===Sj?t:(t.push(s),r=Proxy.revocable(n,e),r.proxy)},Proxy.revocable(Object.create(null),e).proxy}function xp(t,e){const{[Sj]:r}=t(gR());return r.join((e==null?void 0:e.keySeparator)??".")}const Yy={},Of=t=>!Pe(t)&&typeof t!="boolean"&&typeof t!="number";class Td extends vh{constructor(e,r={}){super(),aR(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=In.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,r={interpolation:{}}){const n={...r};if(e==null)return!1;const s=this.resolve(e,n);if((s==null?void 0:s.res)===void 0)return!1;const o=Of(s.res);return!(n.returnObjects===!1&&o)}extractFromKey(e,r){let n=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const s=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let o=r.ns||this.options.defaultNS||[];const i=n&&e.indexOf(n)>-1,l=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!mR(e,n,s);if(i&&!l){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:Pe(o)?[o]:o};const u=e.split(n);(n!==s||n===s&&this.options.ns.indexOf(u[0])>-1)&&(o=u.shift()),e=u.join(s)}return{key:e,namespaces:Pe(o)?[o]:o}}translate(e,r,n){let s=typeof r=="object"?{...r}:r;if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),e==null)return"";typeof e=="function"&&(e=xp(e,{...this.options,...s})),Array.isArray(e)||(e=[String(e)]);const o=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:l,namespaces:c}=this.extractFromKey(e[e.length-1],s),u=c[c.length-1];let d=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");const h=s.lng||this.language,m=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((h==null?void 0:h.toLowerCase())==="cimode")return m?o?{res:`${u}${d}${l}`,usedKey:l,exactUsedKey:l,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(s)}:`${u}${d}${l}`:o?{res:l,usedKey:l,exactUsedKey:l,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(s)}:l;const p=this.resolve(e,s);let v=p==null?void 0:p.res;const g=(p==null?void 0:p.usedKey)||l,w=(p==null?void 0:p.exactUsedKey)||l,y=["[object Number]","[object Function]","[object RegExp]"],x=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,_=!this.i18nFormat||this.i18nFormat.handleAsObject,b=s.count!==void 0&&!Pe(s.count),j=Td.hasDefaultValue(s),N=b?this.pluralResolver.getSuffix(h,s.count,s):"",k=s.ordinal&&b?this.pluralResolver.getSuffix(h,s.count,{ordinal:!1}):"",E=b&&!s.ordinal&&s.count===0,T=E&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${N}`]||s[`defaultValue${k}`]||s.defaultValue;let P=v;_&&!v&&j&&(P=T);const z=Of(P),B=Object.prototype.toString.apply(P);if(_&&P&&z&&y.indexOf(B)<0&&!(Pe(x)&&Array.isArray(P))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Q=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,P,{...s,ns:c}):`key '${l} (${this.language})' returned an object instead of string.`;return o?(p.res=Q,p.usedParams=this.getUsedParamsDetails(s),p):Q}if(i){const Q=Array.isArray(P),R=Q?[]:{},Y=Q?w:g;for(const M in P)if(Object.prototype.hasOwnProperty.call(P,M)){const D=`${Y}${i}${M}`;j&&!v?R[M]=this.translate(D,{...s,defaultValue:Of(T)?T[M]:void 0,joinArrays:!1,ns:c}):R[M]=this.translate(D,{...s,joinArrays:!1,ns:c}),R[M]===D&&(R[M]=P[M])}v=R}}else if(_&&Pe(x)&&Array.isArray(v))v=v.join(x),v&&(v=this.extendTranslation(v,e,s,n));else{let Q=!1,R=!1;!this.isValidLookup(v)&&j&&(Q=!0,v=T),this.isValidLookup(v)||(R=!0,v=l);const M=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&R?void 0:v,D=j&&T!==v&&this.options.updateMissing;if(R||Q||D){if(this.logger.log(D?"updateKey":"missingKey",h,u,l,D?T:v),i){const W=this.resolve(l,{...s,keySeparator:!1});W&&W.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let C=[];const L=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&L&&L[0])for(let W=0;W<L.length;W++)C.push(L[W]);else this.options.saveMissingTo==="all"?C=this.languageUtils.toResolveHierarchy(s.lng||this.language):C.push(s.lng||this.language);const I=(W,K,te)=>{var re;const O=j&&te!==v?te:M;this.options.missingKeyHandler?this.options.missingKeyHandler(W,u,K,O,D,s):(re=this.backendConnector)!=null&&re.saveMissing&&this.backendConnector.saveMissing(W,u,K,O,D,s),this.emit("missingKey",W,u,K,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&b?C.forEach(W=>{const K=this.pluralResolver.getSuffixes(W,s);E&&s[`defaultValue${this.options.pluralSeparator}zero`]&&K.indexOf(`${this.options.pluralSeparator}zero`)<0&&K.push(`${this.options.pluralSeparator}zero`),K.forEach(te=>{I([W],l+te,s[`defaultValue${te}`]||T)})}):I(C,l,T))}v=this.extendTranslation(v,e,s,p,n),R&&v===l&&this.options.appendNamespaceToMissingKey&&(v=`${u}${d}${l}`),(R||Q)&&this.options.parseMissingKeyHandler&&(v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${d}${l}`:l,Q?v:void 0,s))}return o?(p.res=v,p.usedParams=this.getUsedParamsDetails(s),p):v}extendTranslation(e,r,n,s,o){var c,u;if((c=this.i18nFormat)!=null&&c.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const d=Pe(e)&&(((u=n==null?void 0:n.interpolation)==null?void 0:u.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(d){const p=e.match(this.interpolator.nestingRegexp);h=p&&p.length}let m=n.replace&&!Pe(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(m={...this.options.interpolation.defaultVariables,...m}),e=this.interpolator.interpolate(e,m,n.lng||this.language||s.usedLng,n),d){const p=e.match(this.interpolator.nestingRegexp),v=p&&p.length;h<v&&(n.nest=!1)}!n.lng&&s&&s.res&&(n.lng=this.language||s.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,(...p)=>(o==null?void 0:o[0])===p[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${r[0]}`),null):this.translate(...p,r),n)),n.interpolation&&this.interpolator.reset()}const i=n.postProcess||this.options.postProcess,l=Pe(i)?[i]:i;return e!=null&&(l!=null&&l.length)&&n.applyPostProcessor!==!1&&(e=jj.handle(l,e,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e,r={}){let n,s,o,i,l;return Pe(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(n))return;const u=this.extractFromKey(c,r),d=u.key;s=d;let h=u.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const m=r.count!==void 0&&!Pe(r.count),p=m&&!r.ordinal&&r.count===0,v=r.context!==void 0&&(Pe(r.context)||typeof r.context=="number")&&r.context!=="",g=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);h.forEach(w=>{var y,x;this.isValidLookup(n)||(l=w,!Yy[`${g[0]}-${w}`]&&((y=this.utils)!=null&&y.hasLoadedNamespace)&&!((x=this.utils)!=null&&x.hasLoadedNamespace(l))&&(Yy[`${g[0]}-${w}`]=!0,this.logger.warn(`key "${s}" for languages "${g.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach(_=>{var N;if(this.isValidLookup(n))return;i=_;const b=[d];if((N=this.i18nFormat)!=null&&N.addLookupKeys)this.i18nFormat.addLookupKeys(b,d,_,w,r);else{let k;m&&(k=this.pluralResolver.getSuffix(_,r.count,r));const E=`${this.options.pluralSeparator}zero`,T=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&(r.ordinal&&k.indexOf(T)===0&&b.push(d+k.replace(T,this.options.pluralSeparator)),b.push(d+k),p&&b.push(d+E)),v){const P=`${d}${this.options.contextSeparator||"_"}${r.context}`;b.push(P),m&&(r.ordinal&&k.indexOf(T)===0&&b.push(P+k.replace(T,this.options.pluralSeparator)),b.push(P+k),p&&b.push(P+E))}}let j;for(;j=b.pop();)this.isValidLookup(n)||(o=j,n=this.getResource(_,w,j,r))}))})}),{res:n,usedKey:s,exactUsedKey:o,usedLng:i,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,r,n,s={}){var o;return(o=this.i18nFormat)!=null&&o.getResource?this.i18nFormat.getResource(e,r,n,s):this.resourceStore.getResource(e,r,n,s)}getUsedParamsDetails(e={}){const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Pe(e.replace);let s=n?e.replace:e;if(n&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!n){s={...s};for(const o of r)delete s[o]}return s}static hasDefaultValue(e){const r="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&r===n.substring(0,r.length)&&e[n]!==void 0)return!0;return!1}}class Qy{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=In.create("languageUtils")}getScriptPartFromCode(e){if(e=rc(e),!e||e.indexOf("-")<0)return null;const r=e.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(e){if(e=rc(e),!e||e.indexOf("-")<0)return e;const r=e.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(e){if(Pe(e)&&e.indexOf("-")>-1){let r;try{r=Intl.getCanonicalLocales(e)[0]}catch{}return r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let r;return e.forEach(n=>{if(r)return;const s=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(s))&&(r=s)}),!r&&this.options.supportedLngs&&e.forEach(n=>{if(r)return;const s=this.getScriptPartFromCode(n);if(this.isSupportedCode(s))return r=s;const o=this.getLanguagePartFromCode(n);if(this.isSupportedCode(o))return r=o;r=this.options.supportedLngs.find(i=>{if(i===o)return i;if(!(i.indexOf("-")<0&&o.indexOf("-")<0)&&(i.indexOf("-")>0&&o.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===o||i.indexOf(o)===0&&o.length>1))return i})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(e,r){if(!e)return[];if(typeof e=="function"&&(e=e(r)),Pe(e)&&(e=[e]),Array.isArray(e))return e;if(!r)return e.default||[];let n=e[r];return n||(n=e[this.getScriptPartFromCode(r)]),n||(n=e[this.formatLanguageCode(r)]),n||(n=e[this.getLanguagePartFromCode(r)]),n||(n=e.default),n||[]}toResolveHierarchy(e,r){const n=this.getFallbackCodes((r===!1?[]:r)||this.options.fallbackLng||[],e),s=[],o=i=>{i&&(this.isSupportedCode(i)?s.push(i):this.logger.warn(`rejecting language code not found in supportedLngs: ${i}`))};return Pe(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):Pe(e)&&o(this.formatLanguageCode(e)),n.forEach(i=>{s.indexOf(i)<0&&o(this.formatLanguageCode(i))}),s}}const Jy={zero:0,one:1,two:2,few:3,many:4,other:5},Xy={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class vR{constructor(e,r={}){this.languageUtils=e,this.options=r,this.logger=In.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,r){this.rules[e]=r}clearCache(){this.pluralRulesCache={}}getRule(e,r={}){const n=rc(e==="dev"?"en":e),s=r.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:n,type:s});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let i;try{i=new Intl.PluralRules(n,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Xy;if(!e.match(/-|_/))return Xy;const c=this.languageUtils.getLanguagePartFromCode(e);i=this.getRule(c,r)}return this.pluralRulesCache[o]=i,i}needsPlural(e,r={}){let n=this.getRule(e,r);return n||(n=this.getRule("dev",r)),(n==null?void 0:n.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,r,n={}){return this.getSuffixes(e,n).map(s=>`${r}${s}`)}getSuffixes(e,r={}){let n=this.getRule(e,r);return n||(n=this.getRule("dev",r)),n?n.resolvedOptions().pluralCategories.sort((s,o)=>Jy[s]-Jy[o]).map(s=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,r,n={}){const s=this.getRule(e,n);return s?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s.select(r)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",r,n))}}const Zy=(t,e,r,n=".",s=!0)=>{let o=lR(t,e,r);return!o&&s&&Pe(r)&&(o=vp(t,r,n),o===void 0&&(o=vp(e,r,n))),o},Df=t=>t.replace(/\$/g,"$$$$");class xR{constructor(e={}){var r;this.logger=In.create("interpolator"),this.options=e,this.format=((r=e==null?void 0:e.interpolation)==null?void 0:r.format)||(n=>n),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:r,escapeValue:n,useRawValueToEscape:s,prefix:o,prefixEscaped:i,suffix:l,suffixEscaped:c,formatSeparator:u,unescapeSuffix:d,unescapePrefix:h,nestingPrefix:m,nestingPrefixEscaped:p,nestingSuffix:v,nestingSuffixEscaped:g,nestingOptionsSeparator:w,maxReplaces:y,alwaysFormat:x}=e.interpolation;this.escape=r!==void 0?r:uR,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=o?_o(o):i||"{{",this.suffix=l?_o(l):c||"}}",this.formatSeparator=u||",",this.unescapePrefix=d?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=m?_o(m):p||_o("$t("),this.nestingSuffix=v?_o(v):g||_o(")"),this.nestingOptionsSeparator=w||",",this.maxReplaces=y||1e3,this.alwaysFormat=x!==void 0?x:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(r,n)=>(r==null?void 0:r.source)===n?(r.lastIndex=0,r):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,r,n,s){var p;let o,i,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=v=>{if(v.indexOf(this.formatSeparator)<0){const x=Zy(r,c,v,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(x,void 0,n,{...s,...r,interpolationkey:v}):x}const g=v.split(this.formatSeparator),w=g.shift().trim(),y=g.join(this.formatSeparator).trim();return this.format(Zy(r,c,w,this.options.keySeparator,this.options.ignoreJSONStructure),y,n,{...s,...r,interpolationkey:w})};this.resetRegExp();const d=(s==null?void 0:s.missingInterpolationHandler)||this.options.missingInterpolationHandler,h=((p=s==null?void 0:s.interpolation)==null?void 0:p.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:v=>Df(v)},{regex:this.regexp,safeValue:v=>this.escapeValue?Df(this.escape(v)):Df(v)}].forEach(v=>{for(l=0;o=v.regex.exec(e);){const g=o[1].trim();if(i=u(g),i===void 0)if(typeof d=="function"){const y=d(e,o,s);i=Pe(y)?y:""}else if(s&&Object.prototype.hasOwnProperty.call(s,g))i="";else if(h){i=o[0];continue}else this.logger.warn(`missed to pass in variable ${g} for interpolating ${e}`),i="";else!Pe(i)&&!this.useRawValueToEscape&&(i=Vy(i));const w=v.safeValue(i);if(e=e.replace(o[0],w),h?(v.regex.lastIndex+=i.length,v.regex.lastIndex-=o[0].length):v.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,r,n={}){let s,o,i;const l=(c,u)=>{const d=this.nestingOptionsSeparator;if(c.indexOf(d)<0)return c;const h=c.split(new RegExp(`${d}[ ]*{`));let m=`{${h[1]}`;c=h[0],m=this.interpolate(m,i);const p=m.match(/'/g),v=m.match(/"/g);(((p==null?void 0:p.length)??0)%2===0&&!v||v.length%2!==0)&&(m=m.replace(/'/g,'"'));try{i=JSON.parse(m),u&&(i={...u,...i})}catch(g){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,g),`${c}${d}${m}`}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,c};for(;s=this.nestingRegexp.exec(e);){let c=[];i={...n},i=i.replace&&!Pe(i.replace)?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;const u=/{.*}/.test(s[1])?s[1].lastIndexOf("}")+1:s[1].indexOf(this.formatSeparator);if(u!==-1&&(c=s[1].slice(u).split(this.formatSeparator).map(d=>d.trim()).filter(Boolean),s[1]=s[1].slice(0,u)),o=r(l.call(this,s[1].trim(),i),i),o&&s[0]===e&&!Pe(o))return o;Pe(o)||(o=Vy(o)),o||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),o=""),c.length&&(o=c.reduce((d,h)=>this.format(d,h,n.lng,{...n,interpolationkey:s[1].trim()}),o.trim())),e=e.replace(s[0],o),this.regexp.lastIndex=0}return e}}const yR=t=>{let e=t.toLowerCase().trim();const r={};if(t.indexOf("(")>-1){const n=t.split("(");e=n[0].toLowerCase().trim();const s=n[1].substring(0,n[1].length-1);e==="currency"&&s.indexOf(":")<0?r.currency||(r.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?r.range||(r.range=s.trim()):s.split(";").forEach(i=>{if(i){const[l,...c]=i.split(":"),u=c.join(":").trim().replace(/^'+|'+$/g,""),d=l.trim();r[d]||(r[d]=u),u==="false"&&(r[d]=!1),u==="true"&&(r[d]=!0),isNaN(u)||(r[d]=parseInt(u,10))}})}return{formatName:e,formatOptions:r}},ew=t=>{const e={};return(r,n,s)=>{let o=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(o={...o,[s.interpolationkey]:void 0});const i=n+JSON.stringify(o);let l=e[i];return l||(l=t(rc(n),s),e[i]=l),l(r)}},wR=t=>(e,r,n)=>t(rc(r),n)(e);class _R{constructor(e={}){this.logger=In.create("formatter"),this.options=e,this.init(e)}init(e,r={interpolation:{}}){this.formatSeparator=r.interpolation.formatSeparator||",";const n=r.cacheInBuiltFormats?ew:wR;this.formats={number:n((s,o)=>{const i=new Intl.NumberFormat(s,{...o});return l=>i.format(l)}),currency:n((s,o)=>{const i=new Intl.NumberFormat(s,{...o,style:"currency"});return l=>i.format(l)}),datetime:n((s,o)=>{const i=new Intl.DateTimeFormat(s,{...o});return l=>i.format(l)}),relativetime:n((s,o)=>{const i=new Intl.RelativeTimeFormat(s,{...o});return l=>i.format(l,o.range||"day")}),list:n((s,o)=>{const i=new Intl.ListFormat(s,{...o});return l=>i.format(l)})}}add(e,r){this.formats[e.toLowerCase().trim()]=r}addCached(e,r){this.formats[e.toLowerCase().trim()]=ew(r)}format(e,r,n,s={}){const o=r.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(l=>l.indexOf(")")>-1)){const l=o.findIndex(c=>c.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,l)].join(this.formatSeparator)}return o.reduce((l,c)=>{var h;const{formatName:u,formatOptions:d}=yR(c);if(this.formats[u]){let m=l;try{const p=((h=s==null?void 0:s.formatParams)==null?void 0:h[s.interpolationkey])||{},v=p.locale||p.lng||s.locale||s.lng||n;m=this.formats[u](l,v,{...d,...s,...p})}catch(p){this.logger.warn(p)}return m}else this.logger.warn(`there was no format function for ${u}`);return l},e)}}const bR=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class jR extends vh{constructor(e,r,n,s={}){var o,i;super(),this.backend=e,this.store=r,this.services=n,this.languageUtils=n.languageUtils,this.options=s,this.logger=In.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],(i=(o=this.backend)==null?void 0:o.init)==null||i.call(o,n,s.backend,s)}queueLoad(e,r,n,s){const o={},i={},l={},c={};return e.forEach(u=>{let d=!0;r.forEach(h=>{const m=`${u}|${h}`;!n.reload&&this.store.hasResourceBundle(u,h)?this.state[m]=2:this.state[m]<0||(this.state[m]===1?i[m]===void 0&&(i[m]=!0):(this.state[m]=1,d=!1,i[m]===void 0&&(i[m]=!0),o[m]===void 0&&(o[m]=!0),c[h]===void 0&&(c[h]=!0)))}),d||(l[u]=!0)}),(Object.keys(o).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(o),pending:Object.keys(i),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(e,r,n){const s=e.split("|"),o=s[0],i=s[1];r&&this.emit("failedLoading",o,i,r),!r&&n&&this.store.addResourceBundle(o,i,n,void 0,void 0,{skipCopy:!0}),this.state[e]=r?-1:2,r&&n&&(this.state[e]=0);const l={};this.queue.forEach(c=>{iR(c.loaded,[o],i),bR(c,e),r&&c.errors.push(r),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(u=>{l[u]||(l[u]={});const d=c.loaded[u];d.length&&d.forEach(h=>{l[u][h]===void 0&&(l[u][h]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(e,r,n,s=0,o=this.retryTimeout,i){if(!e.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:r,fcName:n,tried:s,wait:o,callback:i});return}this.readingCalls++;const l=(u,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(u&&d&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,r,n,s+1,o*2,i)},o);return}i(u,d)},c=this.backend[n].bind(this.backend);if(c.length===2){try{const u=c(e,r);u&&typeof u.then=="function"?u.then(d=>l(null,d)).catch(l):l(null,u)}catch(u){l(u)}return}return c(e,r,l)}prepareLoading(e,r,n={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();Pe(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Pe(r)&&(r=[r]);const o=this.queueLoad(e,r,n,s);if(!o.toLoad.length)return o.pending.length||s(),null;o.toLoad.forEach(i=>{this.loadOne(i)})}load(e,r,n){this.prepareLoading(e,r,{},n)}reload(e,r,n){this.prepareLoading(e,r,{reload:!0},n)}loadOne(e,r=""){const n=e.split("|"),s=n[0],o=n[1];this.read(s,o,"read",void 0,void 0,(i,l)=>{i&&this.logger.warn(`${r}loading namespace ${o} for language ${s} failed`,i),!i&&l&&this.logger.log(`${r}loaded namespace ${o} for language ${s}`,l),this.loaded(e,i,l)})}saveMissing(e,r,n,s,o,i={},l=()=>{}){var c,u,d,h,m;if((u=(c=this.services)==null?void 0:c.utils)!=null&&u.hasLoadedNamespace&&!((h=(d=this.services)==null?void 0:d.utils)!=null&&h.hasLoadedNamespace(r))){this.logger.warn(`did not save key "${n}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if((m=this.backend)!=null&&m.create){const p={...i,isUpdate:o},v=this.backend.create.bind(this.backend);if(v.length<6)try{let g;v.length===5?g=v(e,r,n,s,p):g=v(e,r,n,s),g&&typeof g.then=="function"?g.then(w=>l(null,w)).catch(l):l(null,g)}catch(g){l(g)}else v(e,r,n,s,l,p)}!e||!e[0]||this.store.addResource(e[0],r,n,s)}}}const tw=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),Pe(t[1])&&(e.defaultValue=t[1]),Pe(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const r=t[3]||t[2];Object.keys(r).forEach(n=>{e[n]=r[n]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),rw=t=>{var e,r;return Pe(t.ns)&&(t.ns=[t.ns]),Pe(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),Pe(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((r=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:r.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},vu=()=>{},SR=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(r=>{typeof t[r]=="function"&&(t[r]=t[r].bind(t))})};class Tl extends vh{constructor(e={},r){if(super(),this.options=rw(e),this.services={},this.logger=In,this.modules={external:[]},SR(this),r&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,r),this;setTimeout(()=>{this.init(e,r)},0)}}init(e={},r){this.isInitializing=!0,typeof e=="function"&&(r=e,e={}),e.defaultNS==null&&e.ns&&(Pe(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const n=tw();this.options={...n,...this.options,...rw(e)},this.options.interpolation={...n.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const s=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?In.init(s(this.modules.logger),this.options):In.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=_R;const d=new Qy(this.options);this.store=new Gy(this.options.resources,this.options);const h=this.services;h.logger=In,h.resourceStore=this.store,h.languageUtils=d,h.pluralResolver=new vR(d,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(h.formatter=s(u),h.formatter.init&&h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new xR(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new jR(s(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",(p,...v)=>{this.emit(p,...v)}),this.modules.languageDetector&&(h.languageDetector=s(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=s(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new Td(this.services,this.options),this.translator.on("*",(p,...v)=>{this.emit(p,...v)}),this.modules.external.forEach(p=>{p.init&&p.init(this)})}if(this.format=this.options.interpolation.format,r||(r=vu),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...d)=>this.store[u](...d)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...d)=>(this.store[u](...d),this)});const l=cl(),c=()=>{const u=(d,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(h),r(d,h)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),l}loadResources(e,r=vu){var o,i;let n=r;const s=Pe(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if((s==null?void 0:s.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const l=[],c=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(h=>{h!=="cimode"&&l.indexOf(h)<0&&l.push(h)})};s?c(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>c(d)),(i=(o=this.options.preload)==null?void 0:o.forEach)==null||i.call(o,u=>c(u)),this.services.backendConnector.load(l,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(u)})}else n(null)}reloadResources(e,r,n){const s=cl();return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r=void 0),e||(e=this.languages),r||(r=this.options.ns),n||(n=vu),this.services.backendConnector.reload(e,r,o=>{s.resolve(),n(o)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&jj.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let r=0;r<this.languages.length;r++){const n=this.languages[r];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,r){this.isLanguageChangingTo=e;const n=cl();this.emit("languageChanging",e);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,c)=>{c?this.isLanguageChangingTo===e&&(s(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,n.resolve((...u)=>this.t(...u)),r&&r(l,(...u)=>this.t(...u))},i=l=>{var d,h;!e&&!l&&this.services.languageDetector&&(l=[]);const c=Pe(l)?l:l&&l[0],u=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(Pe(l)?[l]:l);u&&(this.language||s(u),this.translator.language||this.translator.changeLanguage(u),(h=(d=this.services.languageDetector)==null?void 0:d.cacheUserLanguage)==null||h.call(d,u)),this.loadResources(u,m=>{o(m,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?i(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(i):this.services.languageDetector.detect(i):i(e),n}getFixedT(e,r,n){const s=(o,i,...l)=>{let c;typeof i!="object"?c=this.options.overloadTranslationOptionHandler([o,i].concat(l)):c={...i},c.lng=c.lng||s.lng,c.lngs=c.lngs||s.lngs,c.ns=c.ns||s.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||n||s.keyPrefix);const u=this.options.keySeparator||".";let d;return c.keyPrefix&&Array.isArray(o)?d=o.map(h=>(typeof h=="function"&&(h=xp(h,{...this.options,...i})),`${c.keyPrefix}${u}${h}`)):(typeof o=="function"&&(o=xp(o,{...this.options,...i})),d=c.keyPrefix?`${c.keyPrefix}${u}${o}`:o),this.t(d,c)};return Pe(e)?s.lng=e:s.lngs=e,s.ns=r,s.keyPrefix=n,s}t(...e){var r;return(r=this.translator)==null?void 0:r.translate(...e)}exists(...e){var r;return(r=this.translator)==null?void 0:r.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,r={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=r.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const i=(l,c)=>{const u=this.services.backendConnector.state[`${l}|${c}`];return u===-1||u===0||u===2};if(r.precheck){const l=r.precheck(this,i);if(l!==void 0)return l}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||i(n,e)&&(!s||i(o,e)))}loadNamespaces(e,r){const n=cl();return this.options.ns?(Pe(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{n.resolve(),r&&r(s)}),n):(r&&r(),Promise.resolve())}loadLanguages(e,r){const n=cl();Pe(e)&&(e=[e]);const s=this.options.preload||[],o=e.filter(i=>s.indexOf(i)<0&&this.services.languageUtils.isSupportedCode(i));return o.length?(this.options.preload=s.concat(o),this.loadResources(i=>{n.resolve(),r&&r(i)}),n):(r&&r(),Promise.resolve())}dir(e){var s,o;if(e||(e=this.resolvedLanguage||(((s=this.languages)==null?void 0:s.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const i=new Intl.Locale(e);if(i&&i.getTextInfo){const l=i.getTextInfo();if(l&&l.direction)return l.direction}}catch{}const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=((o=this.services)==null?void 0:o.languageUtils)||new Qy(tw());return e.toLowerCase().indexOf("-latn")>1?"ltr":r.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},r){const n=new Tl(e,r);return n.createInstance=Tl.createInstance,n}cloneInstance(e={},r=vu){const n=e.forkResourceStore;n&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},o=new Tl(s);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(l=>{o[l]=this[l]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},n){const l=Object.keys(this.store.data).reduce((c,u)=>(c[u]={...this.store.data[u]},c[u]=Object.keys(c[u]).reduce((d,h)=>(d[h]={...c[u][h]},d),c[u]),c),{});o.store=new Gy(l,s),o.services.resourceStore=o.store}return o.translator=new Td(o.services,s),o.translator.on("*",(l,...c)=>{o.emit(l,...c)}),o.init(s,r),o.translator.options=s,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const dt=Tl.createInstance();dt.createInstance;dt.dir;dt.init;dt.loadResources;dt.reloadResources;dt.use;dt.changeLanguage;dt.getFixedT;dt.t;dt.exists;dt.setDefaultNamespace;dt.hasLoadedNamespace;dt.loadNamespaces;dt.loadLanguages;const NR=(t,e,r,n)=>{var o,i,l,c;const s=[r,{code:e,...n||{}}];if((i=(o=t==null?void 0:t.services)==null?void 0:o.logger)!=null&&i.forward)return t.services.logger.forward(s,"warn","react-i18next::",!0);so(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),(c=(l=t==null?void 0:t.services)==null?void 0:l.logger)!=null&&c.warn?t.services.logger.warn(...s):console!=null&&console.warn&&console.warn(...s)},nw={},Nj=(t,e,r,n)=>{so(r)&&nw[r]||(so(r)&&(nw[r]=new Date),NR(t,e,r,n))},kj=(t,e)=>()=>{if(t.isInitialized)e();else{const r=()=>{setTimeout(()=>{t.off("initialized",r)},0),e()};t.on("initialized",r)}},yp=(t,e,r)=>{t.loadNamespaces(e,kj(t,r))},sw=(t,e,r,n)=>{if(so(r)&&(r=[r]),t.options.preload&&t.options.preload.indexOf(e)>-1)return yp(t,r,n);r.forEach(s=>{t.options.ns.indexOf(s)<0&&t.options.ns.push(s)}),t.loadLanguages(e,kj(t,n))},kR=(t,e,r={})=>!e.languages||!e.languages.length?(Nj(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:r.lng,precheck:(n,s)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!s(n.isLanguageChangingTo,t))return!1}}),so=t=>typeof t=="string",CR=t=>typeof t=="object"&&t!==null,ER=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,PR={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},TR=t=>PR[t],RR=t=>t.replace(ER,TR);let wp={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:RR};const OR=(t={})=>{wp={...wp,...t}},DR=()=>wp;let Cj;const AR=t=>{Cj=t},MR=()=>Cj,IR={type:"3rdParty",init(t){OR(t.options.react),AR(t)}},Ej=f.createContext();class LR{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var Pj={exports:{}},Tj={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ci=f;function FR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $R=typeof Object.is=="function"?Object.is:FR,UR=Ci.useState,BR=Ci.useEffect,zR=Ci.useLayoutEffect,WR=Ci.useDebugValue;function VR(t,e){var r=e(),n=UR({inst:{value:r,getSnapshot:e}}),s=n[0].inst,o=n[1];return zR(function(){s.value=r,s.getSnapshot=e,Af(s)&&o({inst:s})},[t,r,e]),BR(function(){return Af(s)&&o({inst:s}),t(function(){Af(s)&&o({inst:s})})},[t]),WR(r),r}function Af(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!$R(t,r)}catch{return!0}}function HR(t,e){return e()}var qR=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?HR:VR;Tj.useSyncExternalStore=Ci.useSyncExternalStore!==void 0?Ci.useSyncExternalStore:qR;Pj.exports=Tj;var Rj=Pj.exports;const KR=(t,e)=>so(e)?e:CR(e)&&so(e.defaultValue)?e.defaultValue:Array.isArray(t)?t[t.length-1]:t,GR={t:KR,ready:!1},YR=()=>()=>{},Xe=(t,e={})=>{var k,E;const{i18n:r}=e,{i18n:n,defaultNS:s}=f.useContext(Ej)||{},o=r||n||MR();o&&!o.reportNamespaces&&(o.reportNamespaces=new LR),o||Nj(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const i=f.useMemo(()=>{var T;return{...DR(),...(T=o==null?void 0:o.options)==null?void 0:T.react,...e}},[o,e]),{useSuspense:l,keyPrefix:c}=i,u=f.useMemo(()=>{var P;const T=s||((P=o==null?void 0:o.options)==null?void 0:P.defaultNS);return so(T)?[T]:T||["translation"]},[t,s,o]);(E=(k=o==null?void 0:o.reportNamespaces)==null?void 0:k.addUsedNamespaces)==null||E.call(k,u);const d=f.useRef(0),h=f.useCallback(T=>{if(!o)return YR;const{bindI18n:P,bindI18nStore:z}=i,B=()=>{d.current+=1,T()};return P&&o.on(P,B),z&&o.store.on(z,B),()=>{P&&P.split(" ").forEach(Q=>o.off(Q,B)),z&&z.split(" ").forEach(Q=>o.store.off(Q,B))}},[o,i]),m=f.useRef(),p=f.useCallback(()=>{if(!o)return GR;const T=!!(o.isInitialized||o.initializedStoreOnce)&&u.every(Y=>kR(Y,o,i)),P=e.lng||o.language,z=d.current,B=m.current;if(B&&B.ready===T&&B.lng===P&&B.keyPrefix===c&&B.revision===z)return B;const R={t:o.getFixedT(P,i.nsMode==="fallback"?u:u[0],c),ready:T,lng:P,keyPrefix:c,revision:z};return m.current=R,R},[o,u,c,i,e.lng]),[v,g]=f.useState(0),{t:w,ready:y}=Rj.useSyncExternalStore(h,p,p);f.useEffect(()=>{if(o&&!y&&!l){const T=()=>g(P=>P+1);e.lng?sw(o,e.lng,u,T):yp(o,u,T)}},[o,e.lng,u,y,l,v]);const x=o||{},_=f.useRef(null),b=f.useRef(),j=T=>{const P=Object.getOwnPropertyDescriptors(T);P.__original&&delete P.__original;const z=Object.create(Object.getPrototypeOf(T),P);if(!Object.prototype.hasOwnProperty.call(z,"__original"))try{Object.defineProperty(z,"__original",{value:T,writable:!1,enumerable:!1,configurable:!1})}catch{}return z},N=f.useMemo(()=>{const T=x,P=T==null?void 0:T.language;let z=T;T&&(_.current&&_.current.__original===T?b.current!==P?(z=j(T),_.current=z,b.current=P):z=_.current:(z=j(T),_.current=z,b.current=P));const B=[w,z,y];return B.t=w,B.i18n=z,B.ready=y,B},[w,x,y,x.resolvedLanguage,x.language,x.languages]);if(o&&l&&!y)throw new Promise(T=>{const P=()=>T();e.lng?sw(o,e.lng,u,P):yp(o,u,P)});return N};function QR({i18n:t,defaultNS:e,children:r}){const n=f.useMemo(()=>({i18n:t,defaultNS:e}),[t,e]);return f.createElement(Ej.Provider,{value:n},r)}const JR={dashboard:"Dashboard",empDashboard:"Employee Dashboard",clientPortal:"Client Portal",partnerDashboard:"Partner Dashboard",leads:"Leads",projects:"Projects",tasks:"Tasks",tickets:"Tickets",teams:"Teams",chats:"Chats",surveys:"Surveys",users:"Users",settings:"Settings",mainGroup:"Main",salesGroup:"Sales",workGroup:"Work",communicationGroup:"Communication",systemGroup:"System"},XR={save:"Save",cancel:"Cancel",close:"Close",submit:"Submit",delete:"Delete",edit:"Edit",add:"Add",create:"Create",login:"Login",signup:"Sign Up",logout:"Logout",saving:"Saving..."},ZR={name:"Name",email:"Email",password:"Password",confirmPassword:"Confirm Password",phone:"Phone",message:"Message"},eO={signIn:"Sign In",signUp:"Sign Up",createAccount:"Create Account",enterCredentials:"Enter your credentials to continue",signUpToGetStarted:"Sign up to get started",chooseAccountType:"Choose your account type to continue with Google",chooseAccountTypeSignUp:"Choose your account type to sign up with Google",client:"Client",partner:"Partner",partnerEmployee:"Partner Employee",redirectingToGoogle:"Redirecting to Google...",orContinueWith:"Or continue with",email:"Email",password:"Password",signingIn:"Signing in...",signInButton:"Sign In",signUpButton:"Sign Up",dontHaveAccount:"Don't have an account?",alreadyHaveAccount:"Already have an account?",clientPortal:"Client Portal",failedToSignIn:"Failed to sign in",failedToSignInWithGoogle:"Failed to sign in with Google"},tO={welcome:"Welcome",loading:"Loading...",error:"Error",success:"Success",search:"Search",filter:"Filter",notifications:"Notifications",kanban:"Kanban",list:"List",select:"Select",view:"View",status:"Status",assignee:"Assignee",all:"All",pickDate:"Pick a date",clearFilters:"Clear filters",created:"Created",actions:"Actions",stage:"Stage",priority:"Priority",veryLow:"Very Low",low:"Low",medium:"Medium",high:"High",veryHigh:"Very High",overview:"Overview",unassigned:"Unassigned"},rO={title:"Dashboard",subtitle:"Welcome back! Here's an overview of your projects.",totalProjects:"Total Projects",completed:"completed",inProgress:"In Progress",activeProjects:"Active projects",clients:"Clients",totalClients:"Total clients",teamMembers:"Team Members",activeUsers:"Active users",leads:"Leads",totalLeads:"Total leads",surveys:"Surveys",totalSurveys:"Total surveys",recentProjects:"Recent Projects",projectStatus:"Project Status",noProjectsYet:"No projects yet",retry:"Retry",completedStatus:"Completed",inProgressStatus:"In Progress",notStartedStatus:"Not Started"},nO={title:"Leads",subtitle:"Manage and track all your leads",newLead:"New Lead",addLead:"Add Lead",createLead:"Create New Lead",createLeadDesc:"Add a new lead to the selected stage.",leadName:"Lead Name",leadNamePlaceholder:"Enter lead name",description:"Description",descriptionPlaceholder:"Enter lead description",clientName:"Client Name",clientNamePlaceholder:"Enter client name",client:"Client",selectClient:"Select a client (optional)",noClient:"No client",unknown:"Unknown",created:"Created",updated:"Updated",createdBy:"Created by",assignedTo:"Assigned to",assignToEmployee:"Assign to Employee",selectAssignee:"Select assignee",lead:"Lead",deleteLead:"Delete Lead",deleteConfirmation:'Are you sure you want to delete "{{name}}"?',addStage:"Add Stage",stageNamePlaceholder:"Stage name...",deleteStage:"Delete Stage",deleteStageConfirmation:"This stage contains {{count}} lead(s). Deleting this stage will also remove all leads in it. This action cannot be undone.",addNewLeadCard:"Add New Lead",noLeadsYet:"No leads have been created yet.",value:"Value",currency:"Currency",stageTotal:"Total: {{amount}}",leadDetails:"Lead Details",leadDetailsDesc:"View and edit lead information",notFound:"Lead not found",expectedCloseDate:"Expected Close Date"},sO={title:"Notes",addNote:"Add Note",noNotes:"No notes yet",placeholder:"Enter your note...",save:"Save Note",edit:"Edit",delete:"Delete Note",deleteConfirmation:"Are you sure you want to delete this note?",unknown:"Unknown user"},aO={title:"Projects",subtitle:"Manage and track all your projects",newProject:"New Project",createProject:"Create New Project",createProjectDesc:"Add a new project to the selected stage.",projectName:"Project Name",projectNamePlaceholder:"Enter project name",description:"Description",descriptionPlaceholder:"Enter project description",client:"Client",selectClient:"Select a client",initialProgress:"Initial Progress",addProject:"Add Project",addNewProjectCard:"Add New Project",progress:"Progress",started:"Started",completed:"Completed",due:"Due",deleteProject:"Delete Project",deleteConfirmation:'Are you sure you want to delete "{{name}}"?',noProjectsYet:"No projects have been created yet.",deleteComment:"Delete Comment",deleteCommentConfirmation:"Are you sure you want to delete this comment?"},oO={title:"Settings",description:"Manage application settings and configurations",stageManagement:"Stage Management",leads:"Lead Stages",projects:"Project Stages",tasks:"Task Stages",tickets:"Ticket Stages",addStage:"Add Stage",editStage:"Edit Stage",deleteStage:"Delete Stage",stageName:"Stage Name",stageNamePlaceholder:"Enter stage name",stageColor:"Stage Color",order:"Order",noStages:"No stages found. Add one to get started.",addStageDesc:"Add a new stage for {{type}}",deleteStageConfirmation:"Are you sure you want to delete this stage? This action cannot be undone.",englishName:"English name",arabicName:"Arabic name",changePassword:"Change Password",changePasswordDescription:"Enter your new password below. Make sure it's at least 6 characters long.",newPassword:"New Password",newPasswordPlaceholder:"Enter new password",newPasswordRequired:"New password is required",confirmPassword:"Confirm Password",confirmPasswordPlaceholder:"Confirm new password",passwordsDoNotMatch:"Passwords do not match",passwordTooShort:"Password must be at least 6 characters long",changingPassword:"Changing password...",passwordChangedSuccessfully:"Password changed successfully!",passwordChangeFailed:"Failed to change password"},iO={title:"Messages",channels:"Channels",teams:"Teams",directMessages:"Direct Messages",welcome:"Welcome to Chat",selectRoomDesc:"Select a channel or direct message to start chatting.",membersCount:"{{count}} members",today:"Today",placeholder:"Message...",noChannels:"No channels",noMessages:"No messages"},lO={title:"Tickets",subtitle:"Manage and track all support tickets.",newTicket:"New Ticket",createNewTicket:"Create New Ticket",createTicketDesc:"Fill in the details to create a new support ticket.",searchPlaceholder:"Search tickets...",allTickets:"All Tickets",noTicketsFound:"No Tickets Found",noTicketsFoundDesc:"Try adjusting your search terms.",noTicketsYet:"No tickets have been created yet.",id:"ID",subject:"Subject",subjectPlaceholder:"Enter ticket subject",description:"Description",descriptionPlaceholder:"Describe the issue or request",status:"Status",priority:"Priority",priorityLow:"Low",priorityMedium:"Medium",priorityHigh:"High",priorityUrgent:"Urgent",ticketType:"Ticket Type",typeRequest:"Request",typeFollowUp:"Follow Up",typeIssue:"Issue",typeInternalTask:"Internal Task",assignTo:"Assign To",selectAssignee:"Select assignee (optional)",assignedTo:"Assigned To",createdDate:"Created Date",actions:"Actions",view:"View",loading:"Loading tickets...",createTicket:"Create Ticket",creatingTicket:"Creating...",createError:"Failed to create ticket",allStatuses:"All Statuses",allPriorities:"All Priorities",statusOpen:"Open",statusInProgress:"In Progress",statusResolved:"Resolved",statusClosed:"Closed",ticketId:"Ticket ID",createdBy:"Created By",resolvedDate:"Resolved Date",closedDate:"Closed Date"},cO={title:"Teams",subtitle:"Manage teams and team members",createTeam:"Create Team",createTeamTitle:"Create New Team",createTeamDesc:"Create a new team and assign a team leader. You can add members after creation.",teamName:"Team Name",teamNamePlaceholder:"Enter team name",team_leader:"Team Leader",teamLeader:"Team Leader",selectTeamLeader:"Select a team leader (optional)",searchPlaceholder:"Search teams...",members:"Members",memberCount:"{{count}} member",memberCount_plural:"{{count}} members",addMember:"Add member",created:"Created",noTeamsFound:"No teams found",noTeamsYet:"No teams yet",createFirstTeam:"Create Your First Team",deleteTeam:"Delete Team",deleteConfirmation:'Are you sure you want to delete "{{name}}"? This will also remove all team members. This action cannot be undone.',moreMembers:"+{{count}} more members",noMembersYet:"No members yet"},uO={title:"Tasks",subtitle:"Manage and track all your tasks in one place.",loading:"Loading...",error:"Error",deleteTask:"Delete Task",createTask:"Create New Task",createTaskDesc:"Add a new task to the selected stage.",newTask:"New Task",addNewTask:"Add New Task",addTask:"Add Task",taskName:"Task Name",taskNamePlaceholder:"Enter task name",descriptionPlaceholder:"Enter task description",dueDate:"Due Date",selectUser:"Select a user",selectStage:"Select a stage",selectStatus:"Select status",todo:"Todo",inProgress:"In Progress",done:"Done",stage:"Stage",allTasks:"All Tasks",noTasksYet:"No tasks have been created yet."},dO={brandName:"Middar",badge:" New Feature",hero:{title:{line1:"Streamline Your",line2:"Business Operations"},description:"Powerful CRM solution to manage projects, leads, tasks, and teams all in one place. Boost productivity and grow your business with our comprehensive platform.",cta:{primary:"Get Started",secondary:"Learn More"}},stats:{users:"10K+",usersLabel:"Active Users",projects:"50K+",projectsLabel:"Projects Managed",uptime:"99.9%",uptimeLabel:"Uptime",support:"24/7",supportLabel:"Support"},features:{title:"Everything you need to succeed",subtitle:"Comprehensive tools designed for modern businesses",projectManagement:{title:"Project Management",description:"Track projects from inception to completion with detailed progress monitoring and team collaboration."},leadManagement:{title:"Lead Management",description:"Convert more leads with our advanced CRM tools and automated follow-up systems."},analytics:{title:"Analytics & Insights",description:"Make data-driven decisions with comprehensive analytics and reporting dashboards."},communication:{title:"Team Communication",description:"Keep your team connected with integrated chat, notifications, and collaboration tools."},taskManagement:{title:"Task Management",description:"Organize and prioritize tasks with our intuitive kanban board and deadline tracking."},security:{title:"Enterprise Security",description:"Your data is protected with enterprise-grade security and compliance standards."}},cta:{title:"Ready to transform your business?",description:"Join thousands of businesses already using our platform to streamline their operations and boost productivity.",button:"Start Free Trial"},footer:{copyright:" 2025 {{brand}} CRM. All rights reserved."}},hO={title:"Users",subtitle:"Manage system users and their roles",totalUsers:"Total Users",addUser:"Add User",addNewUser:"Add New User",addUserDescription:"Fill in the details below to create a new user account.",fullName:"Full Name",email:"Email",password:"Password",role:"Role",admin:"Admin",manager:"Manager",employee:"Employee",team_leader:"Team Leader",client:"Client",employees:"Employees",clients:"Clients",addingUser:"Adding user...",addUserError:"Failed to add user",deleteUser:"Delete User",deleteConfirmation:'Are you sure you want to delete "{{name}}"?',deleteError:"Failed to delete user",updateRoleError:"Failed to update user role",changeRole:"Change Role",searchPlaceholder:"Search users...",noUsersFound:"No users found",noUsersFoundDesc:"Try adjusting your search terms.",noUsersAvailable:"No users available",joined:"Joined",updated:"Updated",userDetails:"User Details",userDetailsDescription:"View detailed information about this user",phone:"Phone",contact:"Contact",company:"Company",userId:"User ID",authUserId:"Auth User ID",updateUserError:"Failed to update user"},fO={title:"Clients",subtitle:"Manage and view all your clients",newClient:"New Client",loading:"Loading clients...",noClientsFound:"No clients found",noClientsYet:"No clients have been added yet",active:"active",totalProjects:"Total Projects",activeProjects:"Active Projects",completedProjects:"Completed Projects",noCompany:"No company",noEmail:"No email",projects:"projects",viewDetails:"View Details",clientDetails:"Client Details",userId:"User ID",emailLabel:"Email",contactLabel:"Contact",companyLabel:"Company",createdLabel:"Created",updatedLabel:"Updated",projectSummary:"Project Summary"},mO={title:"My Dashboard",subtitle:"Welcome back, {{name}}! Here's your work overview.",employeeInfo:"Employee Information",name:"Name",email:"Email",role:"Role",memberSince:"Member Since",myProjects:"My Projects",active:"active",myTasks:"My Tasks",completed:"completed",inProgress:"In Progress",activeTasks:"Active tasks",completedTasks:"Completed",finishedTasks:"Finished tasks",leads:"Leads",totalLeads:"Total leads",surveys:"Surveys",totalSurveys:"Total surveys",recentTasks:"Recent Tasks",noDescription:"No description",noProjectsAssigned:"No projects assigned yet",noTasksAssigned:"No tasks assigned yet"},pO={chatRooms:"Chat Rooms",createRoomTitle:"Create New Room",createRoomDesc:"Create a new chat room for your team or project",roomName:"Room Name",roomNamePlaceholder:"Enter room name",private:"Private",privateRoom:"Private Room",publicRoom:"Public Room",project:"Project",projectIdPlaceholder:"Enter project ID (optional)",createRoom:"Create Room",searchConversations:"Search conversations...",searchRooms:"Search rooms...",members:"members",online:"Online",selectRoom:"Select a room to start chatting",typeMessage:"Type a message...",you:"You",unknownUser:"Unknown User",justNow:"Just now",minutesAgo:"{{count}}m ago",hoursAgo:"{{count}}h ago",viewDetails:"View Details",muteNotifications:"Mute Notifications",leaveRoom:"Leave Room",someoneTyping:"Someone is typing..."},gO={title:"Surveys",subtitle:"Manage and track all surveys and questionnaires",surveys:"Surveys",templates:"Templates",totalSurveys:"Total Surveys",createTemplate:"Create Template",createTemplateTitle:"Create New Survey Template",createTemplateDesc:"Create a custom survey template for your needs",templateName:"Template Name",templateNameAr:"Template Name (Arabic)",description:"Description",descriptionAr:"Description (Arabic)",category:"Category",selectCategory:"Select Category",customerSatisfaction:"Customer Satisfaction",productFeedback:"Product Feedback",serviceQuality:"Service Quality",general:"General",settings:"Settings",isActive:"Active",isDefault:"Default",searchPlaceholder:"Search surveys...",noSurveysFound:"No surveys found",noSurveysFoundDesc:"Try adjusting your search terms.",noSurveysYet:"No surveys have been created yet.",noTemplatesFound:"No templates found",noTemplatesFoundDesc:"Try adjusting your search terms.",noTemplatesYet:"No templates have been created yet.",survey:"Survey",clientName:"Client Name",clientCompany:"Client Company",contact:"Contact",noContact:"No contact",noCompany:"No company",noEmail:"No email",location:"Location",responses:"Responses",completed:"Completed",inProgress:"In Progress",pending:"Pending",active:"Active",inactive:"Inactive",default:"Default",noCategory:"No category",status:"Status",noDescription:"No description",fields:"Fields",noFields:"No fields defined",created:"Created",updated:"Updated",createdBy:"Created By",unknownCreator:"Unknown Creator",newSurvey:"New Survey",createNewSurvey:"Create New Survey",selectTemplate:"Select Template",fillSurveyDetails:"Fill Survey Details",changeTemplate:"Change Template",submitSurvey:"Submit Survey",locationWillBeCaptured:"Your location will be captured automatically",addField:"Add Field",fieldLabel:"Field Label",fieldType:"Field Type",text:"Text",textarea:"Textarea",email:"Email",select:"Select",multiselect:"Multiselect",radio:"Radio",checkbox:"Checkbox",image:"Image",options:"Options",optionsPlaceholder:"Enter options separated by spaces (e.g., option1 option2 option3)",isRequired:"Required",editTemplateTitle:"Edit Survey Template",updateTemplate:"Update Template",deleteTemplate:"Delete Template",deleteTemplateConfirmation:'Are you sure you want to delete "{{name}}"? This action cannot be undone.',templateNameRequired:"Template name is required",atLeastOneFieldRequired:"At least one field is required",fieldLabelRequired:"Field {{number}}: Label is required",templateCreated:"Template created successfully!",templateUpdated:"Template updated successfully!",templateValidationFailed:"Please fix the validation errors before saving.",templateSaveError:"Failed to {{action}} template. Please try again."},vO={navigation:JR,buttons:XR,forms:ZR,auth:eO,common:tO,dashboard:rO,leads:nO,notes:sO,projects:aO,settings:oO,chat:iO,tickets:lO,teams:cO,tasks:uO,landing:dO,users:hO,clients:fO,employeeDashboard:mO,chats:pO,surveys:gO},xO={home:"",dashboard:" ",projects:"",users:"",settings:"",leads:" ",tickets:"",tasks:"",teams:"",clients:"",chats:"",surveys:"",clientPortal:" ",partnerDashboard:"  ",empDashboard:"  ",mainGroup:"",salesGroup:"",workGroup:"",communicationGroup:"",systemGroup:""},yO={save:"",cancel:"",submit:"",delete:"",edit:"",close:"",add:"",create:"",login:" ",signup:" ",logout:" ",saving:" ..."},wO={name:"",email:" ",password:" ",confirmPassword:"  ",phone:"",message:""},_O={signIn:" ",signUp:" ",createAccount:" ",enterCredentials:"  ",signUpToGetStarted:" ",chooseAccountType:"     ",chooseAccountTypeSignUp:"     ",client:"",partner:"",partnerEmployee:" ",redirectingToGoogle:"    ...",orContinueWith:"  ",email:" ",password:" ",signingIn:"  ...",signInButton:" ",signUpButton:" ",dontHaveAccount:"  ",alreadyHaveAccount:"  ",clientPortal:" ",failedToSignIn:"  ",failedToSignInWithGoogle:"    "},bO={welcome:"",loading:" ...",error:"",success:"",search:"",filter:"",notifications:"",kanban:"",list:"",select:"",view:"",status:"",assignee:" ",all:"",pickDate:" ",clearFilters:" ",created:" ",actions:"",stage:"",priority:"",veryLow:" ",low:"",medium:"",high:"",veryHigh:" ",overview:" ",unassigned:" "},jO={title:" ",subtitle:" !     .",totalProjects:" ",completed:"",inProgress:" ",activeProjects:" ",clients:"",totalClients:" ",teamMembers:" ",activeUsers:" ",leads:" ",totalLeads:"  ",surveys:"",totalSurveys:" ",recentProjects:" ",projectStatus:" ",noProjectsYet:"   ",retry:" ",completedStatus:"",inProgressStatus:" ",notStartedStatus:" "},SO={title:" ",subtitle:"    ",newLead:"  ",addLead:"  ",createLead:"   ",createLeadDesc:"      .",leadName:"  ",leadNamePlaceholder:"   ",description:"",descriptionPlaceholder:"   ",clientName:" ",clientNamePlaceholder:"  ",client:"",selectClient:"  ()",noClient:" ",unknown:" ",created:" ",updated:" ",createdBy:"  ",assignedTo:" ",assignToEmployee:" ",selectAssignee:"  ",lead:" ",deleteLead:"  ",deleteConfirmation:'      "{{name}}"',addStage:" ",stageNamePlaceholder:" ...",deleteStage:" ",deleteStageConfirmation:"    {{count}}  .           .      .",addNewLeadCard:"   ",noLeadsYet:"      .",value:"",currency:"",stageTotal:": {{amount}}",leadDetails:"  ",leadDetailsDesc:"    ",notFound:"   ",expectedCloseDate:"  "},NO={title:"",addNote:" ",noNotes:"   ",placeholder:" ...",save:" ",edit:"",delete:" ",deleteConfirmation:"       ",unknown:"  "},kO={title:"",subtitle:"   ",newProject:" ",createProject:"  ",createProjectDesc:"     .",projectName:" ",projectNamePlaceholder:"  ",description:"",descriptionPlaceholder:"  ",client:"",selectClient:" ",initialProgress:" ",addProject:" ",addNewProjectCard:"  ",progress:"",started:"",due:"",deleteProject:" ",deleteConfirmation:'      "{{name}}"',noProjectsYet:"     ."},CO={title:"",channels:"",teams:"",directMessages:" ",welcome:"   ",selectRoomDesc:"      .",membersCount:"{{count}} ",today:"",placeholder:" ...",noChannels:"  ",noMessages:"  "},EO={title:"",subtitle:"    .",newTicket:" ",createNewTicket:"  ",createTicketDesc:"     .",searchPlaceholder:"  ...",allTickets:" ",noTicketsFound:"  ",noTicketsFoundDesc:"   .",noTicketsYet:"     .",id:"",subject:"",subjectPlaceholder:"  ",description:"",descriptionPlaceholder:"   ",status:"",priority:"",priorityLow:"",priorityMedium:"",priorityHigh:"",priorityUrgent:"",ticketType:" ",typeRequest:"",typeFollowUp:"",typeIssue:"",typeInternalTask:" ",assignTo:" ",selectAssignee:"   ()",assignedTo:" ",createdDate:" ",actions:"",view:"",loading:"  ...",createTicket:" ",creatingTicket:" ...",createError:"   ",allStatuses:" ",allPriorities:" ",statusOpen:"",statusInProgress:" ",statusResolved:" ",statusClosed:"",ticketId:" ",createdBy:"  ",resolvedDate:" ",closedDate:" "},PO={title:"",subtitle:"   ",createTeam:" ",createTeamTitle:"  ",createTeamDesc:"     .     .",teamName:" ",teamNamePlaceholder:"  ",team_leader:" ",selectTeamLeader:"   ()",teamLeader:" ",searchPlaceholder:"  ...",members:"",memberCount:"{{count}} ",memberCount_plural:"{{count}} ",addMember:" ",created:" ",noTeamsFound:"  ",noTeamsYet:"   ",createFirstTeam:"  ",deleteTeam:" ",deleteConfirmation:'      "{{name}}"        .      .',moreMembers:"+{{count}}  ",noMembersYet:"   "},TO={title:"",subtitle:"      .",loading:" ...",description:"",error:"",deleteTask:" ",createTask:"  ",createTaskDesc:"     .",newTask:" ",addNewTask:"  ",addTask:" ",taskName:" ",taskNamePlaceholder:"  ",descriptionPlaceholder:"  ",dueDate:" ",selectUser:" ",selectStage:" ",selectStatus:" ",todo:"",inProgress:" ",done:"",stage:"",allTasks:" ",noTasksYet:"     ."},RO={brandName:"",badge:"  ",hero:{title:{line1:"",line2:" "},description:" CRM           .       .",cta:{primary:" ",secondary:" "}},stats:{users:"10 +",usersLabel:" ",projects:"50 +",projectsLabel:" ",uptime:"99.9%",uptimeLabel:" ",support:"24/7",supportLabel:""},features:{title:"   ",subtitle:"    ",projectManagement:{title:" ",description:"           ."},leadManagement:{title:"  ",description:"       CRM    ."},analytics:{title:" ",description:"        ."},communication:{title:" ",description:"         ."},taskManagement:{title:" ",description:"         ."},security:{title:" ",description:"       ."}},cta:{title:"  ",description:"           .",button:"  "},footer:{copyright:" 2025 {{brand}} CRM.   ."}},OO={title:"",subtitle:"   ",totalUsers:" ",addUser:" ",addNewUser:"  ",addUserDescription:"      .",fullName:" ",email:" ",password:" ",role:"",admin:"",manager:"",employee:"",team_leader:" ",client:"",employees:"",clients:"",addingUser:"  ...",addUserError:"   ",deleteUser:" ",deleteConfirmation:'      "{{name}}"',deleteError:"   ",updateRoleError:"    ",changeRole:" ",searchPlaceholder:"  ...",noUsersFound:"  ",noUsersFoundDesc:"   .",noUsersAvailable:"   ",joined:"",updated:" ",userDetails:" ",userDetailsDescription:"     ",phone:"",contact:"",company:"",userId:" ",authUserId:"  ",updateUserError:"   "},DO={title:"",subtitle:"   ",newClient:" ",loading:"  ...",noClientsFound:"  ",noClientsYet:"     ",active:"",totalProjects:" ",activeProjects:" ",completedProjects:" ",noCompany:" ",noEmail:"  ",projects:"",viewDetails:" ",clientDetails:" ",userId:" ",emailLabel:" ",contactLabel:"",companyLabel:"",createdLabel:" ",updatedLabel:" ",projectSummary:" "},AO={title:"   ",subtitle:"  {{name}}!     .",employeeInfo:" ",name:"",email:" ",role:"",memberSince:" ",myProjects:"",active:"",myTasks:"",completed:"",inProgress:" ",activeTasks:" ",completedTasks:"",finishedTasks:" ",leads:" ",totalLeads:"  ",surveys:"",totalSurveys:" ",recentTasks:" ",noDescription:" ",noProjectsAssigned:"    ",noTasksAssigned:"    "},MO={chatRooms:" ",createRoomTitle:"  ",createRoomDesc:"    ",roomName:" ",roomNamePlaceholder:"  ",private:"",privateRoom:" ",publicRoom:" ",project:"",projectIdPlaceholder:"  ()",createRoom:" ",selectRoom:"   ",members:"",typeMessage:" ...",you:"",unknownUser:"  ",justNow:"",online:"",someoneTyping:"  ...",searchConversations:"  ...",searchRooms:"  ..."},IO={title:"",subtitle:"    ",surveys:"",templates:"",totalSurveys:" ",createTemplate:" ",createTemplateTitle:"   ",createTemplateDesc:"    ",templateName:" ",templateNameAr:"  ",description:"",descriptionAr:" ",category:"",selectCategory:" ",customerSatisfaction:" ",productFeedback:" ",serviceQuality:" ",general:"",settings:"",isActive:"",isDefault:"",searchPlaceholder:"  ...",noSurveysFound:"  ",noSurveysFoundDesc:"   .",noSurveysYet:"     .",noTemplatesFound:"  ",noTemplatesFoundDesc:"   .",noTemplatesYet:"     .",survey:"",clientName:" ",clientCompany:" ",contact:"",noContact:" ",noCompany:" ",noEmail:"  ",location:"",responses:"",completed:"",inProgress:" ",pending:" ",active:"",inactive:" ",default:"",noCategory:" ",status:"",noDescription:" ",fields:"",noFields:"   ",created:" ",updated:" ",createdBy:"  ",unknownCreator:"  ",newSurvey:" ",createNewSurvey:"  ",selectTemplate:" ",fillSurveyDetails:"  ",changeTemplate:" ",submitSurvey:" ",locationWillBeCaptured:"    ",addField:" ",fieldLabel:" ",fieldType:" ",text:"",textarea:" ",email:" ",select:" ",multiselect:"  ",radio:" ",checkbox:" ",image:"",options:"",optionsPlaceholder:"    (: 1 2 3)",isRequired:"",templateNameRequired:"  ",atLeastOneFieldRequired:"    ",fieldLabelRequired:" {{number}}:  ",templateCreated:"   !",templateUpdated:"   !",templateValidationFailed:"     .",templateSaveError:"  {{action}} .    ."},LO={title:"",description:"   ",stageManagement:" ",leads:"  ",projects:" ",tasks:" ",tickets:" ",addStage:" ",editStage:" ",deleteStage:" ",stageName:" ",stageNamePlaceholder:"  ",stageColor:" ",order:"",noStages:"    .   .",addStageDesc:"    {{type}}",deleteStageConfirmation:"             .",englishName:" ",arabicName:" ",changePassword:"  ",changePasswordDescription:"    .      6   .",newPassword:"  ",newPasswordPlaceholder:"   ",newPasswordRequired:"   ",confirmPassword:"  ",confirmPasswordPlaceholder:"    ",passwordsDoNotMatch:"   ",passwordTooShort:"     6   ",changingPassword:"   ...",passwordChangedSuccessfully:"    !",passwordChangeFailed:"    "},FO={navigation:xO,buttons:yO,forms:wO,auth:_O,common:bO,dashboard:jO,leads:SO,notes:NO,projects:kO,chat:CO,tickets:EO,teams:PO,tasks:TO,landing:RO,users:OO,clients:DO,employeeDashboard:AO,chats:MO,surveys:IO,settings:LO},$O={en:{translation:vO},ar:{translation:FO}};dt.use(IR).init({resources:$O,lng:"ar",fallbackLng:"en",interpolation:{escapeValue:!1}});const H=(t,e)=>{if(dt.language==="ar"){const s=`${e}_ar`;if(t[s]&&t[s].trim())return t[s]}if(t[e]&&t[e].trim())return t[e];const n=`${e}_ar`;return t[n]&&t[n].trim()?t[n]:""},wn=(t,e)=>{const r=dt.language,n={...t};return Object.entries(e).forEach(([s,o])=>{r==="ar"?(n[`${o}_ar`]=t[s],n[o]=t[s]):(n[o]=t[s],n[`${o}_ar`]=t[s])}),n},gn=()=>dt.dir()==="rtl";/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nc(){return nc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nc.apply(this,arguments)}var Ys;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ys||(Ys={}));const aw="popstate";function UO(t){t===void 0&&(t={});function e(s,o){let{pathname:i="/",search:l="",hash:c=""}=fo(s.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),_p("",{pathname:i,search:l,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(s,o){let i=s.document.querySelector("base"),l="";if(i&&i.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof o=="string"?o:Rd(o))}function n(s,o){rv(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return zO(e,r,n,t)}function bt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rv(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BO(){return Math.random().toString(36).substr(2,8)}function ow(t,e){return{usr:t.state,key:t.key,idx:e}}function _p(t,e,r,n){return r===void 0&&(r=null),nc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?fo(e):e,{state:r,key:e&&e.key||n||BO()})}function Rd(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function fo(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function zO(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:o=!1}=n,i=s.history,l=Ys.Pop,c=null,u=d();u==null&&(u=0,i.replaceState(nc({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function h(){l=Ys.Pop;let w=d(),y=w==null?null:w-u;u=w,c&&c({action:l,location:g.location,delta:y})}function m(w,y){l=Ys.Push;let x=_p(g.location,w,y);r&&r(x,w),u=d()+1;let _=ow(x,u),b=g.createHref(x);try{i.pushState(_,"",b)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(b)}o&&c&&c({action:l,location:g.location,delta:1})}function p(w,y){l=Ys.Replace;let x=_p(g.location,w,y);r&&r(x,w),u=d();let _=ow(x,u),b=g.createHref(x);i.replaceState(_,"",b),o&&c&&c({action:l,location:g.location,delta:0})}function v(w){let y=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof w=="string"?w:Rd(w);return x=x.replace(/ $/,"%20"),bt(y,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,y)}let g={get action(){return l},get location(){return t(s,i)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(aw,h),c=w,()=>{s.removeEventListener(aw,h),c=null}},createHref(w){return e(s,w)},createURL:v,encodeLocation(w){let y=v(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:m,replace:p,go(w){return i.go(w)}};return g}var iw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(iw||(iw={}));function WO(t,e,r){return r===void 0&&(r="/"),VO(t,e,r,!1)}function VO(t,e,r,n){let s=typeof e=="string"?fo(e):e,o=nv(s.pathname||"/",r);if(o==null)return null;let i=Oj(t);HO(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let u=rD(o);l=eD(i[c],u,n)}return l}function Oj(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(bt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=ia([n,c.relativePath]),d=r.concat(c);o.children&&o.children.length>0&&(bt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Oj(o.children,e,d,u)),!(o.path==null&&!o.index)&&e.push({path:u,score:XO(u,o.index),routesMeta:d})};return t.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,i);else for(let c of Dj(o.path))s(o,i,c)}),e}function Dj(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let i=Dj(n.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),s&&l.push(...i),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function HO(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:ZO(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const qO=/^:[\w-]+$/,KO=3,GO=2,YO=1,QO=10,JO=-2,lw=t=>t==="*";function XO(t,e){let r=t.split("/"),n=r.length;return r.some(lw)&&(n+=JO),e&&(n+=GO),r.filter(s=>!lw(s)).reduce((s,o)=>s+(qO.test(o)?KO:o===""?YO:QO),n)}function ZO(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function eD(t,e,r){let{routesMeta:n}=t,s={},o="/",i=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=o==="/"?e:e.slice(o.length)||"/",h=cw({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=cw({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),i.push({params:s,pathname:ia([o,h.pathname]),pathnameBase:oD(ia([o,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(o=ia([o,h.pathnameBase]))}return i}function cw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=tD(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:m,isOptional:p}=d;if(m==="*"){let g=l[h]||"";i=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const v=l[h];return p&&!v?u[m]=void 0:u[m]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:i,pattern:t}}function tD(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),rv(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function rD(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function nv(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function nD(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?fo(t):t;return{pathname:r?r.startsWith("/")?r:sD(r,e):e,search:iD(n),hash:lD(s)}}function sD(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Mf(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function aD(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function sv(t,e){let r=aD(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function av(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=fo(t):(s=nc({},t),bt(!s.pathname||!s.pathname.includes("?"),Mf("?","pathname","search",s)),bt(!s.pathname||!s.pathname.includes("#"),Mf("#","pathname","hash",s)),bt(!s.search||!s.search.includes("#"),Mf("#","search","hash",s)));let o=t===""||s.pathname==="",i=o?"/":s.pathname,l;if(i==null)l=r;else{let h=e.length-1;if(!n&&i.startsWith("..")){let m=i.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}l=h>=0?e[h]:"/"}let c=nD(s,l),u=i&&i!=="/"&&i.endsWith("/"),d=(o||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const ia=t=>t.join("/").replace(/\/\/+/g,"/"),oD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),iD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,lD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function cD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Aj=["post","put","patch","delete"];new Set(Aj);const uD=["get",...Aj];new Set(uD);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sc(){return sc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sc.apply(this,arguments)}const ov=f.createContext(null),dD=f.createContext(null),va=f.createContext(null),xh=f.createContext(null),ps=f.createContext({outlet:null,matches:[],isDataRoute:!1}),Mj=f.createContext(null);function hD(t,e){let{relative:r}=e===void 0?{}:e;zi()||bt(!1);let{basename:n,navigator:s}=f.useContext(va),{hash:o,pathname:i,search:l}=Lj(t,{relative:r}),c=i;return n!=="/"&&(c=i==="/"?n:ia([n,i])),s.createHref({pathname:c,search:l,hash:o})}function zi(){return f.useContext(xh)!=null}function xa(){return zi()||bt(!1),f.useContext(xh).location}function Ij(t){f.useContext(va).static||f.useLayoutEffect(t)}function Zr(){let{isDataRoute:t}=f.useContext(ps);return t?kD():fD()}function fD(){zi()||bt(!1);let t=f.useContext(ov),{basename:e,future:r,navigator:n}=f.useContext(va),{matches:s}=f.useContext(ps),{pathname:o}=xa(),i=JSON.stringify(sv(s,r.v7_relativeSplatPath)),l=f.useRef(!1);return Ij(()=>{l.current=!0}),f.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=av(u,JSON.parse(i),o,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ia([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,o,t])}function mD(){let{matches:t}=f.useContext(ps),e=t[t.length-1];return e?e.params:{}}function Lj(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=f.useContext(va),{matches:s}=f.useContext(ps),{pathname:o}=xa(),i=JSON.stringify(sv(s,n.v7_relativeSplatPath));return f.useMemo(()=>av(t,JSON.parse(i),o,r==="path"),[t,i,o,r])}function pD(t,e){return gD(t,e)}function gD(t,e,r,n){zi()||bt(!1);let{navigator:s}=f.useContext(va),{matches:o}=f.useContext(ps),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let u=xa(),d;if(e){var h;let w=typeof e=="string"?fo(e):e;c==="/"||(h=w.pathname)!=null&&h.startsWith(c)||bt(!1),d=w}else d=u;let m=d.pathname||"/",p=m;if(c!=="/"){let w=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=WO(t,{pathname:p}),g=_D(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:ia([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:ia([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),o,r,n);return e&&g?f.createElement(xh.Provider,{value:{location:sc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ys.Pop}},g):g}function vD(){let t=ND(),e=cD(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},e),r?f.createElement("pre",{style:s},r):null,null)}const xD=f.createElement(vD,null);class yD extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?f.createElement(ps.Provider,{value:this.props.routeContext},f.createElement(Mj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wD(t){let{routeContext:e,match:r,children:n}=t,s=f.useContext(ov);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),f.createElement(ps.Provider,{value:e},n)}function _D(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var o;if(!r)return null;if(r.errors)t=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=i.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||bt(!1),i=i.slice(0,Math.min(i.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:p}=r,v=h.route.loader&&m[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||v){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,h,m)=>{let p,v=!1,g=null,w=null;r&&(p=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||xD,c&&(u<0&&m===0?(v=!0,w=null):u===m&&(v=!0,w=h.route.hydrateFallbackElement||null)));let y=e.concat(i.slice(0,m+1)),x=()=>{let _;return p?_=g:v?_=w:h.route.Component?_=f.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=d,f.createElement(wD,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:r!=null},children:_})};return r&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?f.createElement(yD,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}var Fj=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Fj||{}),Od=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Od||{});function bD(t){let e=f.useContext(ov);return e||bt(!1),e}function jD(t){let e=f.useContext(dD);return e||bt(!1),e}function SD(t){let e=f.useContext(ps);return e||bt(!1),e}function $j(t){let e=SD(),r=e.matches[e.matches.length-1];return r.route.id||bt(!1),r.route.id}function ND(){var t;let e=f.useContext(Mj),r=jD(Od.UseRouteError),n=$j(Od.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function kD(){let{router:t}=bD(Fj.UseNavigateStable),e=$j(Od.UseNavigateStable),r=f.useRef(!1);return Ij(()=>{r.current=!0}),f.useCallback(function(s,o){o===void 0&&(o={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,sc({fromRouteId:e},o)))},[t,e])}function CD(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function bp(t){let{to:e,replace:r,state:n,relative:s}=t;zi()||bt(!1);let{future:o,static:i}=f.useContext(va),{matches:l}=f.useContext(ps),{pathname:c}=xa(),u=Zr(),d=av(e,sv(l,o.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return f.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:s}),[u,h,s,r,n]),null}function pt(t){bt(!1)}function ED(t){let{basename:e="/",children:r=null,location:n,navigationType:s=Ys.Pop,navigator:o,static:i=!1,future:l}=t;zi()&&bt(!1);let c=e.replace(/^\/*/,"/"),u=f.useMemo(()=>({basename:c,navigator:o,static:i,future:sc({v7_relativeSplatPath:!1},l)}),[c,l,o,i]);typeof n=="string"&&(n=fo(n));let{pathname:d="/",search:h="",hash:m="",state:p=null,key:v="default"}=n,g=f.useMemo(()=>{let w=nv(d,c);return w==null?null:{location:{pathname:w,search:h,hash:m,state:p,key:v},navigationType:s}},[c,d,h,m,p,v,s]);return g==null?null:f.createElement(va.Provider,{value:u},f.createElement(xh.Provider,{children:r,value:g}))}function PD(t){let{children:e,location:r}=t;return pD(jp(e),r)}new Promise(()=>{});function jp(t,e){e===void 0&&(e=[]);let r=[];return f.Children.forEach(t,(n,s)=>{if(!f.isValidElement(n))return;let o=[...e,s];if(n.type===f.Fragment){r.push.apply(r,jp(n.props.children,o));return}n.type!==pt&&bt(!1),!n.props.index||!n.props.children||bt(!1);let i={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=jp(n.props.children,o)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sp(){return Sp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sp.apply(this,arguments)}function TD(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,o;for(o=0;o<n.length;o++)s=n[o],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function RD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function OD(t,e){return t.button===0&&(!e||e==="_self")&&!RD(t)}const DD=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],AD="6";try{window.__reactRouterVersion=AD}catch{}const MD="startTransition",uw=ig[MD];function ID(t){let{basename:e,children:r,future:n,window:s}=t,o=f.useRef();o.current==null&&(o.current=UO({window:s,v5Compat:!0}));let i=o.current,[l,c]=f.useState({action:i.action,location:i.location}),{v7_startTransition:u}=n||{},d=f.useCallback(h=>{u&&uw?uw(()=>c(h)):c(h)},[c,u]);return f.useLayoutEffect(()=>i.listen(d),[i,d]),f.useEffect(()=>CD(n),[n]),f.createElement(ED,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:i,future:n})}const LD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",FD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Uj=f.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:o,replace:i,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,m=TD(e,DD),{basename:p}=f.useContext(va),v,g=!1;if(typeof u=="string"&&FD.test(u)&&(v=u,LD))try{let _=new URL(window.location.href),b=u.startsWith("//")?new URL(_.protocol+u):new URL(u),j=nv(b.pathname,p);b.origin===_.origin&&j!=null?u=j+b.search+b.hash:g=!0}catch{}let w=hD(u,{relative:s}),y=$D(u,{replace:i,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function x(_){n&&n(_),_.defaultPrevented||y(_)}return f.createElement("a",Sp({},m,{href:v||w,onClick:g||o?n:x,ref:r,target:c}))});var dw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(dw||(dw={}));var hw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(hw||(hw={}));function $D(t,e){let{target:r,replace:n,state:s,preventScrollReset:o,relative:i,viewTransition:l}=e===void 0?{}:e,c=Zr(),u=xa(),d=Lj(t,{relative:i});return f.useCallback(h=>{if(OD(h,r)){h.preventDefault();let m=n!==void 0?n:Rd(u)===Rd(d);c(t,{replace:m,state:s,preventScrollReset:o,relative:i,viewTransition:l})}},[u,c,d,n,s,r,t,o,i,l])}var Np=function(t,e){return Np=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Np(t,e)};function Bj(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Np(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var zr=function(){return zr=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},zr.apply(this,arguments)};function ya(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function zj(t,e,r,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(o=(s<3?i(o):s>3?i(e,r,o):i(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}function Wj(t,e){return function(r,n){e(r,n,t)}}function Vj(t,e,r,n,s,o){function i(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,d=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),h,m=!1,p=r.length-1;p>=0;p--){var v={};for(var g in n)v[g]=g==="access"?{}:n[g];for(var g in n.access)v.access[g]=n.access[g];v.addInitializer=function(y){if(m)throw new TypeError("Cannot add initializers after decoration has completed");o.push(i(y||null))};var w=(0,r[p])(l==="accessor"?{get:d.get,set:d.set}:d[c],v);if(l==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=i(w.get))&&(d.get=h),(h=i(w.set))&&(d.set=h),(h=i(w.init))&&s.unshift(h)}else(h=i(w))&&(l==="field"?s.unshift(h):d[c]=h)}u&&Object.defineProperty(u,n.name,d),m=!0}function Hj(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0}function qj(t){return typeof t=="symbol"?t:"".concat(t)}function Kj(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function Gj(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ve(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(d){try{u(n.next(d))}catch(h){i(h)}}function c(d){try{u(n.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})}function Yj(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(o=u[0]&2?s.return:u[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,u[1])).done)return o;switch(s=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],s=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var yh=Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function Qj(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&yh(e,t,r)}function Dd(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function iv(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,o=[],i;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(l){i={error:l}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return o}function Jj(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(iv(arguments[e]));return t}function Xj(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],i=0,l=o.length;i<l;i++,s++)n[s]=o[i];return n}function lv(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,o;n<s;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function Ei(t){return this instanceof Ei?(this.v=t,this):new Ei(t)}function Zj(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",i),s[Symbol.asyncIterator]=function(){return this},s;function i(p){return function(v){return Promise.resolve(v).then(p,h)}}function l(p,v){n[p]&&(s[p]=function(g){return new Promise(function(w,y){o.push([p,g,w,y])>1||c(p,g)})},v&&(s[p]=v(s[p])))}function c(p,v){try{u(n[p](v))}catch(g){m(o[0][3],g)}}function u(p){p.value instanceof Ei?Promise.resolve(p.value.v).then(d,h):m(o[0][2],p)}function d(p){c("next",p)}function h(p){c("throw",p)}function m(p,v){p(v),o.shift(),o.length&&c(o[0][0],o[0][1])}}function eS(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,o){e[s]=t[s]?function(i){return(r=!r)?{value:Ei(t[s](i)),done:!1}:o?o(i):i}:o}}function tS(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Dd=="function"?Dd(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(i){return new Promise(function(l,c){i=t[o](i),s(l,c,i.done,i.value)})}}function s(o,i,l,c){Promise.resolve(c).then(function(u){o({value:u,done:l})},i)}}function rS(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var UD=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},kp=function(t){return kp=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},kp(t)};function nS(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=kp(t),n=0;n<r.length;n++)r[n]!=="default"&&yh(e,t,r[n]);return UD(e,t),e}function sS(t){return t&&t.__esModule?t:{default:t}}function aS(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function oS(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function iS(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function lS(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var BD=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function cS(t){function e(o){t.error=t.hasError?new BD(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(s,function(i){return e(i),s()})}else n|=1}catch(i){e(i)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function uS(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,o,i){return n?e?".jsx":".js":s&&(!o||!i)?r:s+o+"."+i.toLowerCase()+"js"}):t}const zD={__extends:Bj,__assign:zr,__rest:ya,__decorate:zj,__param:Wj,__esDecorate:Vj,__runInitializers:Hj,__propKey:qj,__setFunctionName:Kj,__metadata:Gj,__awaiter:ve,__generator:Yj,__createBinding:yh,__exportStar:Qj,__values:Dd,__read:iv,__spread:Jj,__spreadArrays:Xj,__spreadArray:lv,__await:Ei,__asyncGenerator:Zj,__asyncDelegator:eS,__asyncValues:tS,__makeTemplateObject:rS,__importStar:nS,__importDefault:sS,__classPrivateFieldGet:aS,__classPrivateFieldSet:oS,__classPrivateFieldIn:iS,__addDisposableResource:lS,__disposeResources:cS,__rewriteRelativeImportExtension:uS},WD=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:lS,get __assign(){return zr},__asyncDelegator:eS,__asyncGenerator:Zj,__asyncValues:tS,__await:Ei,__awaiter:ve,__classPrivateFieldGet:aS,__classPrivateFieldIn:iS,__classPrivateFieldSet:oS,__createBinding:yh,__decorate:zj,__disposeResources:cS,__esDecorate:Vj,__exportStar:Qj,__extends:Bj,__generator:Yj,__importDefault:sS,__importStar:nS,__makeTemplateObject:rS,__metadata:Gj,__param:Wj,__propKey:qj,__read:iv,__rest:ya,__rewriteRelativeImportExtension:uS,__runInitializers:Hj,__setFunctionName:Kj,__spread:Jj,__spreadArray:lv,__spreadArrays:Xj,__values:Dd,default:zD},Symbol.toStringTag,{value:"Module"})),VD="modulepreload",HD=function(t){return"/"+t},fw={},Wi=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=HD(c),c in fw)return;fw[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":VD,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,p)=>{h.addEventListener("load",m),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})},qD=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Wi(async()=>{const{default:n}=await Promise.resolve().then(()=>mo);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class cv extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class mw extends cv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class pw extends cv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class gw extends cv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Cp;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Cp||(Cp={}));class KD{constructor(e,{headers:r={},customFetch:n,region:s=Cp.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=qD(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ve(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:o,method:i,body:l,signal:c}=n;let u={},{region:d}=n;d||(d=this.region);const h=new URL(`${this.url}/${r}`);d&&d!=="any"&&(u["x-region"]=d,h.searchParams.set("forceFunctionRegion",d));let m;l&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",m=l):typeof l=="string"?(u["Content-Type"]="text/plain",m=l):typeof FormData<"u"&&l instanceof FormData?m=l:(u["Content-Type"]="application/json",m=JSON.stringify(l)):m=l;const p=yield this.fetch(h.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),o),body:m,signal:c}).catch(y=>{throw y.name==="AbortError"?y:new mw(y)}),v=p.headers.get("x-relay-error");if(v&&v==="true")throw new pw(p);if(!p.ok)throw new gw(p);let g=((s=p.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),w;return g==="application/json"?w=yield p.json():g==="application/octet-stream"||g==="application/pdf"?w=yield p.blob():g==="text/event-stream"?w=p:g==="multipart/form-data"?w=yield p.formData():w=yield p.text(),{data:w,error:null,response:p}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new mw(o)}:{data:null,error:o,response:o instanceof gw||o instanceof pw?o.context:void 0}}})}}var nr={};const Vi=J0(WD);var xu={},yu={},wu={},_u={},bu={},GD=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Pi=GD();const YD=Pi.fetch,dS=Pi.fetch.bind(Pi),hS=Pi.Headers,QD=Pi.Request,JD=Pi.Response,mo=Object.freeze(Object.defineProperty({__proto__:null,Headers:hS,Request:QD,Response:JD,default:dS,fetch:YD},Symbol.toStringTag,{value:"Module"})),XD=J0(mo);var ju={},vw;function fS(){if(vw)return ju;vw=1,Object.defineProperty(ju,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return ju.default=t,ju}var xw;function mS(){if(xw)return bu;xw=1,Object.defineProperty(bu,"__esModule",{value:!0});const t=Vi,e=t.__importDefault(XD),r=t.__importDefault(fS());class n{constructor(o){var i,l;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(i=o.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=o.signal,this.isMaybeSingle=(l=o.isMaybeSingle)!==null&&l!==void 0?l:!1,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,i){return this.headers=new Headers(this.headers),this.headers.set(o,i),this}then(o,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var d,h,m,p;let v=null,g=null,w=null,y=u.status,x=u.statusText;if(u.ok){if(this.method!=="HEAD"){const N=await u.text();N===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?g=N:g=JSON.parse(N))}const b=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),j=(m=u.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");b&&j&&j.length>1&&(w=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(v={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,w=null,y=406,x="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const b=await u.text();try{v=JSON.parse(b),Array.isArray(v)&&u.status===404&&(g=[],v=null,y=200,x="OK")}catch{u.status===404&&b===""?(y=204,x="No Content"):v={message:b}}if(v&&this.isMaybeSingle&&(!((p=v==null?void 0:v.details)===null||p===void 0)&&p.includes("0 rows"))&&(v=null,y=200,x="OK"),v&&this.shouldThrowOnError)throw new r.default(v)}return{error:v,data:g,count:w,status:y,statusText:x}});return this.shouldThrowOnError||(c=c.catch(u=>{var d,h,m;return{error:{message:`${(d=u==null?void 0:u.name)!==null&&d!==void 0?d:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(h=u==null?void 0:u.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(m=u==null?void 0:u.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),c.then(o,i)}returns(){return this}overrideTypes(){return this}}return bu.default=n,bu}var yw;function pS(){if(yw)return _u;yw=1,Object.defineProperty(_u,"__esModule",{value:!0});const e=Vi.__importDefault(mS());class r extends e.default{select(s){let o=!1;const i=(s??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:o=!0,nullsFirst:i,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${s}.${o?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:o,referencedTable:i=o}={}){const l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,o,{foreignTable:i,referencedTable:l=i}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(u,`${o-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:o=!1,settings:i=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var d;const h=[s?"analyze":null,o?"verbose":null,i?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),m=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${h};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return _u.default=r,_u}var ww;function uv(){if(ww)return wu;ww=1,Object.defineProperty(wu,"__esModule",{value:!0});const e=Vi.__importDefault(pS()),r=new RegExp("[,()]");class n extends e.default{eq(o,i){return this.url.searchParams.append(o,`eq.${i}`),this}neq(o,i){return this.url.searchParams.append(o,`neq.${i}`),this}gt(o,i){return this.url.searchParams.append(o,`gt.${i}`),this}gte(o,i){return this.url.searchParams.append(o,`gte.${i}`),this}lt(o,i){return this.url.searchParams.append(o,`lt.${i}`),this}lte(o,i){return this.url.searchParams.append(o,`lte.${i}`),this}like(o,i){return this.url.searchParams.append(o,`like.${i}`),this}likeAllOf(o,i){return this.url.searchParams.append(o,`like(all).{${i.join(",")}}`),this}likeAnyOf(o,i){return this.url.searchParams.append(o,`like(any).{${i.join(",")}}`),this}ilike(o,i){return this.url.searchParams.append(o,`ilike.${i}`),this}ilikeAllOf(o,i){return this.url.searchParams.append(o,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(o,i){return this.url.searchParams.append(o,`ilike(any).{${i.join(",")}}`),this}is(o,i){return this.url.searchParams.append(o,`is.${i}`),this}in(o,i){const l=Array.from(new Set(i)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(o,`in.(${l})`),this}contains(o,i){return typeof i=="string"?this.url.searchParams.append(o,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(o,`cs.{${i.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(i)}`),this}containedBy(o,i){return typeof i=="string"?this.url.searchParams.append(o,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(o,`cd.{${i.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(i)}`),this}rangeGt(o,i){return this.url.searchParams.append(o,`sr.${i}`),this}rangeGte(o,i){return this.url.searchParams.append(o,`nxl.${i}`),this}rangeLt(o,i){return this.url.searchParams.append(o,`sl.${i}`),this}rangeLte(o,i){return this.url.searchParams.append(o,`nxr.${i}`),this}rangeAdjacent(o,i){return this.url.searchParams.append(o,`adj.${i}`),this}overlaps(o,i){return typeof i=="string"?this.url.searchParams.append(o,`ov.${i}`):this.url.searchParams.append(o,`ov.{${i.join(",")}}`),this}textSearch(o,i,{config:l,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const d=l===void 0?"":`(${l})`;return this.url.searchParams.append(o,`${u}fts${d}.${i}`),this}match(o){return Object.entries(o).forEach(([i,l])=>{this.url.searchParams.append(i,`eq.${l}`)}),this}not(o,i,l){return this.url.searchParams.append(o,`not.${i}.${l}`),this}or(o,{foreignTable:i,referencedTable:l=i}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${o})`),this}filter(o,i,l){return this.url.searchParams.append(o,`${i}.${l}`),this}}return wu.default=n,wu}var _w;function gS(){if(_w)return yu;_w=1,Object.defineProperty(yu,"__esModule",{value:!0});const e=Vi.__importDefault(uv());class r{constructor(s,{headers:o={},schema:i,fetch:l}){this.url=s,this.headers=new Headers(o),this.schema=i,this.fetch=l}select(s,o){const{head:i=!1,count:l}=o??{},c=i?"HEAD":"GET";let u=!1;const d=(s??"*").split("").map(h=>/\s/.test(h)&&!u?"":(h==='"'&&(u=!u),h)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:o,defaultToNull:i=!0}={}){var l;const c="POST";if(o&&this.headers.append("Prefer",`count=${o}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const u=s.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:o,ignoreDuplicates:i=!1,count:l,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((m,p)=>m.concat(Object.keys(p)),[]);if(h.length>0){const m=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(s,{count:o}={}){var i;const l="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:s}={}){var o;const i="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return yu.default=r,yu}var bw;function ZD(){if(bw)return xu;bw=1,Object.defineProperty(xu,"__esModule",{value:!0});const t=Vi,e=t.__importDefault(gS()),r=t.__importDefault(uv());class n{constructor(o,{headers:i={},schema:l,fetch:c}={}){this.url=o,this.headers=new Headers(i),this.schemaName=l,this.fetch=c}from(o){const i=new URL(`${this.url}/${o}`);return new e.default(i,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new n(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,i={},{head:l=!1,get:c=!1,count:u}={}){var d;let h;const m=new URL(`${this.url}/rpc/${o}`);let p;l||c?(h=l?"HEAD":"GET",Object.entries(i).filter(([g,w])=>w!==void 0).map(([g,w])=>[g,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([g,w])=>{m.searchParams.append(g,w)})):(h="POST",p=i);const v=new Headers(this.headers);return u&&v.set("Prefer",`count=${u}`),new r.default({method:h,url:m,headers:v,schema:this.schemaName,body:p,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return xu.default=n,xu}Object.defineProperty(nr,"__esModule",{value:!0});var vS=nr.PostgrestError=CS=nr.PostgrestBuilder=NS=nr.PostgrestTransformBuilder=jS=nr.PostgrestFilterBuilder=_S=nr.PostgrestQueryBuilder=yS=nr.PostgrestClient=void 0;const Hi=Vi,xS=Hi.__importDefault(ZD());var yS=nr.PostgrestClient=xS.default;const wS=Hi.__importDefault(gS());var _S=nr.PostgrestQueryBuilder=wS.default;const bS=Hi.__importDefault(uv());var jS=nr.PostgrestFilterBuilder=bS.default;const SS=Hi.__importDefault(pS());var NS=nr.PostgrestTransformBuilder=SS.default;const kS=Hi.__importDefault(mS());var CS=nr.PostgrestBuilder=kS.default;const ES=Hi.__importDefault(fS());vS=nr.PostgrestError=ES.default;var PS=nr.default={PostgrestClient:xS.default,PostgrestQueryBuilder:wS.default,PostgrestFilterBuilder:bS.default,PostgrestTransformBuilder:SS.default,PostgrestBuilder:kS.default,PostgrestError:ES.default};const eA=Y0({__proto__:null,get PostgrestBuilder(){return CS},get PostgrestClient(){return yS},get PostgrestError(){return vS},get PostgrestFilterBuilder(){return jS},get PostgrestQueryBuilder(){return _S},get PostgrestTransformBuilder(){return NS},default:PS},[nr]),{PostgrestClient:tA,PostgrestQueryBuilder:vW,PostgrestFilterBuilder:xW,PostgrestTransformBuilder:yW,PostgrestBuilder:wW,PostgrestError:_W}=PS||eA;class rA{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const nA="2.78.0",sA=`realtime-js/${nA}`,aA="1.0.0",Ep=1e4,oA=1e3,iA=100;var Rl;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Rl||(Rl={}));var Pt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Pt||(Pt={}));var hn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(hn||(hn={}));var Pp;(function(t){t.websocket="websocket"})(Pp||(Pp={}));var Ma;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ma||(Ma={}));class lA{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),o=r.getUint8(2);let i=this.HEADER_LENGTH+2;const l=n.decode(e.slice(i,i+s));i=i+s;const c=n.decode(e.slice(i,i+o));i=i+o;const u=JSON.parse(n.decode(e.slice(i,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class TS{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var tt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(tt||(tt={}));const jw=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((o,i)=>(o[i]=cA(i,t,e,s),o),{}):{}},cA=(t,e,r,n)=>{const s=e.find(l=>l.name===t),o=s==null?void 0:s.type,i=r[t];return o&&!n.includes(o)?RS(o,i):Tp(i)},RS=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return fA(e,r)}switch(t){case tt.bool:return uA(e);case tt.float4:case tt.float8:case tt.int2:case tt.int4:case tt.int8:case tt.numeric:case tt.oid:return dA(e);case tt.json:case tt.jsonb:return hA(e);case tt.timestamp:return mA(e);case tt.abstime:case tt.date:case tt.daterange:case tt.int4range:case tt.int8range:case tt.money:case tt.reltime:case tt.text:case tt.time:case tt.timestamptz:case tt.timetz:case tt.tsrange:case tt.tstzrange:return Tp(e);default:return Tp(e)}},Tp=t=>t,uA=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},dA=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},hA=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},fA=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let o;const i=t.slice(1,r);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(l=>RS(e,l))}return t},mA=t=>typeof t=="string"?t.replace(" ","T"):t,OS=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class If{constructor(e,r,n={},s=Ep){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Sw;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Sw||(Sw={}));class Ol{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ol.syncState(this.state,s,o,i),this.pendingDiffs.forEach(c=>{this.state=Ol.syncDiff(this.state,c,o,i)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ol.syncDiff(this.state,s,o,i),l())}),this.onJoin((s,o,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:i})}),this.onLeave((s,o,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const o=this.cloneDeep(e),i=this.transformState(r),l={},c={};return this.map(o,(u,d)=>{i[u]||(c[u]=d)}),this.map(i,(u,d)=>{const h=o[u];if(h){const m=d.map(w=>w.presence_ref),p=h.map(w=>w.presence_ref),v=d.filter(w=>p.indexOf(w.presence_ref)<0),g=h.filter(w=>m.indexOf(w.presence_ref)<0);v.length>0&&(l[u]=v),g.length>0&&(c[u]=g)}else l[u]=d}),this.syncDiff(o,{joins:l,leaves:c},n,s)}static syncDiff(e,r,n,s){const{joins:o,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(o,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(p=>p.presence_ref),m=d.filter(p=>h.indexOf(p.presence_ref)<0);e[l].unshift(...m)}n(l,d,c)}),this.map(i,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,s(l,u,c),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Nw;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Nw||(Nw={}));var Dl;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Dl||(Dl={}));var Jn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Jn||(Jn={}));class dv{constructor(e,r={config:{}},n){var s,o;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new If(this,hn.join,this.params,this.timeout),this.rejoinTimer=new TS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(hn.reply,{},(i,l)=>{this._trigger(this._replyEventName(l),i)}),this.presence=new Ol(this),this.broadcastEndpointURL=OS(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Pt.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Dl.PRESENCE]&&this.bindings[Dl.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,h={},m={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(Jn.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(Jn.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var v;if(this.socket.setAuth(),p===void 0){e==null||e(Jn.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,w=(v=g==null?void 0:g.length)!==null&&v!==void 0?v:0,y=[];for(let x=0;x<w;x++){const _=g[x],{filter:{event:b,schema:j,table:N,filter:k}}=_,E=p&&p[x];if(E&&E.event===b&&E.schema===j&&E.table===N&&E.filter===k)y.push(Object.assign(Object.assign({},_),{id:E.id}));else{this.unsubscribe(),this.state=Pt.errored,e==null||e(Jn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(Jn.SUBSCRIBED);return}}).receive("error",p=>{this.state=Pt.errored,e==null||e(Jn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Jn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Pt.joined&&e===Dl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var s;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const i={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,i,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:i}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,l,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Pt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(hn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new If(this,hn.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Pt.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,o=setTimeout(()=>s.abort(),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(o),i}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new If(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>iA){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,o;const i=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=hn;if(n&&[l,c,u,d].indexOf(i)>=0&&n!==this._joinRef())return;let m=this._onMessage(i,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var v,g,w;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(g=p.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===i}).map(p=>p.callback(m,n)):(o=this.bindings[i])===null||o===void 0||o.filter(p=>{var v,g,w,y,x,_;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const b=p.id,j=(v=p.filter)===null||v===void 0?void 0:v.event;return b&&((g=r.ids)===null||g===void 0?void 0:g.includes(b))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const b=(x=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return b==="*"||b===((_=r==null?void 0:r.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:g,table:w,commit_timestamp:y,type:x,errors:_}=v;m=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:y,eventType:x,new:{},old:{},errors:_}),this._getPayloadRecords(v))}p.callback(m,n)})}_isClosed(){return this.state===Pt.closed}_isJoined(){return this.state===Pt.joined}_isJoining(){return this.state===Pt.joining}_isLeaving(){return this.state===Pt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),o={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&dv.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(hn.close,{},e)}_onError(e){this._on(hn.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=jw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=jw(e.columns,e.old_record)),r}}const Lf=()=>{},Su={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},pA=[1e3,2e3,5e3,1e4],gA=1e4,vA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class xA{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ep,this.transport=null,this.heartbeatIntervalMs=Su.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Lf,this.ref=0,this.reconnectTimer=null,this.logger=Lf,this.conn=null,this.sendBuffer=[],this.serializer=new lA,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...i)=>Wi(async()=>{const{default:l}=await Promise.resolve().then(()=>mo);return{default:l}},void 0).then(({default:l})=>l(...i)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...i)=>o(...i)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Pp.websocket}`,this.httpEndpoint=OS(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=rA.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:aA}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Rl.connecting:return Ma.Connecting;case Rl.open:return Ma.Open;case Rl.closing:return Ma.Closing;default:return Ma.Closed}}isConnected(){return this.connectionState()===Ma.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(o=>o.topic===n);if(s)return s;{const o=new dv(`realtime:${e}`,r,this);return this.channels.push(o),o}}push(e){const{topic:r,event:n,payload:s,ref:o}=e,i=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${o})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(oA,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Su.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:o,ref:i}=r,l=i?`(${i})`:"",c=o.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),o),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,o,i)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(hn.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([vA],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:sA};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(hn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new TS(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Su.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,o,i,l,c,u,d;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Ep,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Su.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(i=e==null?void 0:e.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:Lf,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:h=>pA[h-1]||gA,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(h,m)=>m(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class hv extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function lt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class yA extends hv{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Rp extends hv{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const fv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Wi(async()=>{const{default:n}=await Promise.resolve().then(()=>mo);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},wA=()=>ve(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Wi(()=>Promise.resolve().then(()=>mo),void 0)).Response:Response}),Op=t=>{if(Array.isArray(t))return t.map(r=>Op(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=Op(n)}),e},_A=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Ff=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},bA=(t,e,r)=>ve(void 0,void 0,void 0,function*(){const n=yield wA();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const o=t.status||500,i=(s==null?void 0:s.statusCode)||o+"";e(new yA(Ff(s),o,i))}).catch(s=>{e(new Rp(Ff(s),s))}):e(new Rp(Ff(t),t))}),jA=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(_A(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function Nc(t,e,r,n,s,o){return ve(this,void 0,void 0,function*(){return new Promise((i,l)=>{t(r,jA(e,n,s,o)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>bA(c,l,n))})})}function ac(t,e,r,n){return ve(this,void 0,void 0,function*(){return Nc(t,"GET",e,r,n)})}function ln(t,e,r,n,s){return ve(this,void 0,void 0,function*(){return Nc(t,"POST",e,n,s,r)})}function Dp(t,e,r,n,s){return ve(this,void 0,void 0,function*(){return Nc(t,"PUT",e,n,s,r)})}function SA(t,e,r,n){return ve(this,void 0,void 0,function*(){return Nc(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function mv(t,e,r,n,s){return ve(this,void 0,void 0,function*(){return Nc(t,"DELETE",e,n,s,r)})}class NA{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return ve(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lt(e))return{data:null,error:e};throw e}})}}var DS;class kA{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[DS]="BlobDownloadBuilder",this.promise=null}asStream(){return new NA(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ve(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lt(e))return{data:null,error:e};throw e}})}}DS=Symbol.toStringTag;const CA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},kw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class EA{constructor(e,r={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=fv(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,s){return ve(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},kw),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=n,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(e=="PUT"?Dp:ln)(this.fetch,`${this.url}/object/${d}`,o,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(lt(o))return{data:null,error:o};throw o}})}upload(e,r,n){return ve(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return ve(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),i=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:kw.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Dp(this.fetch,l.toString(),c,{headers:d});return{data:{path:o,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(lt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return ve(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const o=yield ln(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),i=new URL(this.url+o.url),l=i.searchParams.get("token");if(!l)throw new hv("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}})}update(e,r,n){return ve(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return ve(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}})}copy(e,r,n){return ve(this,void 0,void 0,function*(){try{return{data:{path:(yield ln(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return ve(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield ln(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return ve(this,void 0,void 0,function*(){try{const s=yield ln(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}})}download(e,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=o?`?${o}`:"",l=this._getFinalPath(e),c=()=>ac(this.fetch,`${this.url}/${s}/${l}${i}`,{headers:this.headers,noResolveJson:!0});return new kA(c,this.shouldThrowOnError)}info(e){return ve(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield ac(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Op(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}})}exists(e){return ve(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield SA(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lt(n)&&n instanceof Rp){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&s.push(o);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return ve(this,void 0,void 0,function*(){try{return{data:yield mv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}list(e,r,n){return ve(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},CA),r),{prefix:e||""});return{data:yield ln(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}})}listV2(e,r){return ve(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield ln(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const AS="2.78.0",MS={"X-Client-Info":`storage-js/${AS}`};class PA{constructor(e,r={},n,s){this.shouldThrowOnError=!1;const o=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},MS),r),this.fetch=fv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ve(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield ac(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}getBucket(e){return ve(this,void 0,void 0,function*(){try{return{data:yield ac(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}createBucket(e){return ve(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield ln(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return ve(this,void 0,void 0,function*(){try{return{data:yield Dp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}})}emptyBucket(e){return ve(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return ve(this,void 0,void 0,function*(){try{return{data:yield mv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class TA{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},MS),r),this.fetch=fv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ve(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}listBuckets(e){return ve(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield ac(this.fetch,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return ve(this,void 0,void 0,function*(){try{return{data:yield mv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}}const pv={"X-Client-Info":`storage-js/${AS}`,"Content-Type":"application/json"};class IS extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Cr(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class $f extends IS{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class RA extends IS{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var Cw;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Cw||(Cw={}));const gv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Wi(async()=>{const{default:n}=await Promise.resolve().then(()=>mo);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},OA=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Ew=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),DA=(t,e,r)=>ve(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const s=t.status||500,o=t;if(typeof o.json=="function")o.json().then(i=>{const l=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||s+"";e(new $f(Ew(i),s,l))}).catch(()=>{const i=s+"",l=o.statusText||`HTTP ${s} error`;e(new $f(l,s,i))});else{const i=s+"",l=o.statusText||`HTTP ${s} error`;e(new $f(l,s,i))}}else e(new RA(Ew(t),t))}),AA=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(OA(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r)):s};function MA(t,e,r,n,s,o){return ve(this,void 0,void 0,function*(){return new Promise((i,l)=>{t(r,AA(e,n,s,o)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>i(c)).catch(c=>DA(c,l,n))})})}function Er(t,e,r,n,s){return ve(this,void 0,void 0,function*(){return MA(t,"POST",e,n,s,r)})}class IA{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},pv),r),this.fetch=gv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ve(this,void 0,void 0,function*(){try{return{data:(yield Er(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cr(r))return{data:null,error:r};throw r}})}getIndex(e,r){return ve(this,void 0,void 0,function*(){try{return{data:yield Er(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cr(n))return{data:null,error:n};throw n}})}listIndexes(e){return ve(this,void 0,void 0,function*(){try{return{data:yield Er(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cr(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return ve(this,void 0,void 0,function*(){try{return{data:(yield Er(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cr(n))return{data:null,error:n};throw n}})}}class LA{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},pv),r),this.fetch=gv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ve(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Er(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cr(r))return{data:null,error:r};throw r}})}getVectors(e){return ve(this,void 0,void 0,function*(){try{return{data:yield Er(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cr(r))return{data:null,error:r};throw r}})}listVectors(e){return ve(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Er(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cr(r))return{data:null,error:r};throw r}})}queryVectors(e){return ve(this,void 0,void 0,function*(){try{return{data:yield Er(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cr(r))return{data:null,error:r};throw r}})}deleteVectors(e){return ve(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Er(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cr(r))return{data:null,error:r};throw r}})}}class FA{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},pv),r),this.fetch=gv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ve(this,void 0,void 0,function*(){try{return{data:(yield Er(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cr(r))return{data:null,error:r};throw r}})}getBucket(e){return ve(this,void 0,void 0,function*(){try{return{data:yield Er(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cr(r))return{data:null,error:r};throw r}})}listBuckets(){return ve(this,arguments,void 0,function*(e={}){try{return{data:yield Er(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cr(r))return{data:null,error:r};throw r}})}deleteBucket(e){return ve(this,void 0,void 0,function*(){try{return{data:(yield Er(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cr(r))return{data:null,error:r};throw r}})}}class $A extends FA{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new UA(this.url,this.headers,e,this.fetch)}}class UA extends IA{constructor(e,r,n,s){super(e,r,s),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ve(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ve(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ve(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ve(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new BA(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class BA extends LA{constructor(e,r,n,s,o){super(e,r,o),this.vectorBucketName=n,this.indexName=s}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ve(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ve(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ve(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ve(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ve(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class zA extends PA{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new EA(this.url,this.headers,e,this.fetch)}get vectors(){return new $A(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new TA(this.url+"/iceberg",this.headers,this.fetch)}}const WA="2.78.0";let vl="";typeof Deno<"u"?vl="deno":typeof document<"u"?vl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vl="react-native":vl="node";const VA={"X-Client-Info":`supabase-js-${vl}/${WA}`},HA={headers:VA},qA={schema:"public"},KA={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},GA={},YA=t=>{let e;return t?e=t:typeof fetch>"u"?e=dS:e=fetch,(...r)=>e(...r)},QA=()=>typeof Headers>"u"?hS:Headers,JA=(t,e,r)=>{const n=YA(r),s=QA();return async(o,i)=>{var l;const c=(l=await e())!==null&&l!==void 0?l:t;let u=new s(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(o,Object.assign(Object.assign({},i),{headers:u}))}};function XA(t){return t.endsWith("/")?t:t+"/"}function ZA(t,e){var r,n;const{db:s,auth:o,realtime:i,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),o),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}function eM(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(XA(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const LS="2.78.0",Oo=30*1e3,Ap=3,Uf=Ap*Oo,tM="http://localhost:9999",rM="supabase.auth.token",nM={"X-Client-Info":`gotrue-js/${LS}`},Mp="X-Supabase-Api-Version",FS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},sM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,aM=10*60*1e3;class oc extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function we(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class oM extends oc{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function iM(t){return we(t)&&t.name==="AuthApiError"}class Ia extends oc{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class wa extends oc{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class rn extends wa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function lM(t){return we(t)&&t.name==="AuthSessionMissingError"}class bo extends wa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Nu extends wa{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ku extends wa{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function cM(t){return we(t)&&t.name==="AuthImplicitGrantRedirectError"}class Pw extends wa{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ip extends wa{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Bf(t){return we(t)&&t.name==="AuthRetryableFetchError"}class Tw extends wa{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Lp extends wa{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ad="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Rw=` 	
\r=`.split(""),uM=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Rw.length;e+=1)t[Rw[e].charCodeAt(0)]=-2;for(let e=0;e<Ad.length;e+=1)t[Ad[e].charCodeAt(0)]=e;return t})();function Ow(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Ad[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Ad[n]),e.queuedBits-=6}}function $S(t,e,r){const n=uM[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Dw(t){const e=[],r=i=>{e.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=i=>{fM(i,n,r)};for(let i=0;i<t.length;i+=1)$S(t.charCodeAt(i),s,o);return e.join("")}function dM(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function hM(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}dM(n,e)}}function fM(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function ei(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)$S(t.charCodeAt(s),r,n);return new Uint8Array(e)}function mM(t){const e=[];return hM(t,r=>e.push(r)),new Uint8Array(e)}function Ua(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>Ow(s,r,n)),Ow(null,r,n),e.join("")}function pM(t){return Math.round(Date.now()/1e3)+t}function gM(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Xt=()=>typeof window<"u"&&typeof document<"u",Pa={tested:!1,writable:!1},US=()=>{if(!Xt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pa.tested)return Pa.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Pa.tested=!0,Pa.writable=!0}catch{Pa.tested=!0,Pa.writable=!1}return Pa.writable};function vM(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const BS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Wi(async()=>{const{default:n}=await Promise.resolve().then(()=>mo);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},xM=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Do=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Ta=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ks=async(t,e)=>{await t.removeItem(e)};class wh{constructor(){this.promise=new wh.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}wh.promiseConstructor=Promise;function zf(t){const e=t.split(".");if(e.length!==3)throw new Lp("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!sM.test(e[n]))throw new Lp("JWT not in base64url format");return{header:JSON.parse(Dw(e[0])),payload:JSON.parse(Dw(e[1])),signature:ei(e[2]),raw:{header:e[0],payload:e[1]}}}async function yM(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function wM(t,e){return new Promise((n,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await t(o);if(!e(o,null,i)){n(i);return}}catch(i){if(!e(o,i)){s(i);return}}})()})}function _M(t){return("0"+t.toString(16)).substr(-2)}function bM(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let o=0;o<56;o++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,_M).join("")}async function jM(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function SM(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await jM(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function jo(t,e,r=!1){const n=bM();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Do(t,`${e}-code-verifier`,s);const o=await SM(n);return[o,n===o?"plain":"s256"]}const NM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function kM(t){const e=t.headers.get(Mp);if(!e||!e.match(NM))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function CM(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function EM(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const PM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function So(t){if(!PM.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Wf(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function TM(t,e){return new Proxy(t,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,s)}})}function Aw(t){return JSON.parse(JSON.stringify(t))}const Da=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),RM=[502,503,504];async function Mw(t){var e;if(!xM(t))throw new Ip(Da(t),0);if(RM.includes(t.status))throw new Ip(Da(t),t.status);let r;try{r=await t.json()}catch(o){throw new Ia(Da(o),o)}let n;const s=kM(t);if(s&&s.getTime()>=FS["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Tw(Da(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new rn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new Tw(Da(r),t.status,r.weak_password.reasons);throw new oM(Da(r),t.status||500,n)}const OM=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function ke(t,e,r,n){var s;const o=Object.assign({},n==null?void 0:n.headers);o[Mp]||(o[Mp]=FS["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const i=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await DM(t,e,r+l,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function DM(t,e,r,n,s,o){const i=OM(e,n,s,o);let l;try{l=await t(r,Object.assign({},i))}catch(c){throw console.error(c),new Ip(Da(c),0)}if(l.ok||await Mw(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Mw(c)}}function nn(t){var e;let r=null;IM(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=pM(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Iw(t){const e=nn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ls(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function AM(t){return{data:t,error:null}}function MM(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o}=t,i=ya(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function Lw(t){return t}function IM(t){return t.access_token&&t.refresh_token&&t.expires_in}const Vf=["global","local","others"];class LM{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=BS(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=Vf[0]){if(Vf.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Vf.join(", ")}`);try{return await ke(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await ke(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ls})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=ya(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ke(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:MM,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(we(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await ke(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ls})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,o,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ke(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:Lw});if(d.error)throw d.error;const h=await d.json(),m=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(we(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){So(e);try{return await ke(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ls})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){So(e);try{return await ke(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Ls})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){So(e);try{return await ke(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ls})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){So(e.userId);try{const{data:r,error:n}=await ke(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(we(r))return{data:null,error:r};throw r}}async _deleteFactor(e){So(e.userId),So(e.id);try{return{data:await ke(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,o,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ke(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:Lw});if(d.error)throw d.error;const h=await d.json(),m=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(we(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await ke(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(we(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await ke(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(we(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await ke(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(we(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await ke(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await ke(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(we(r))return{data:null,error:r};throw r}}}function Fw(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const No={debug:!!(globalThis&&US()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class zS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class FM extends zS{}async function $M(t,e,r){No.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),No.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){No.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{No.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw No.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new FM(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(No.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function UM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function WS(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function BM(t){return parseInt(t,16)}function zM(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function WM(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:o=new Date,nonce:i,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:m}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=WS(t.address),v=d?`${d}://${n}`:n,g=t.statement?`${t.statement}
`:"",w=`${v} wants you to sign in with your Ethereum account:
${p}

${g}`;let y=`URI: ${h}
Version: ${m}
Chain ID: ${r}${i?`
Nonce: ${i}`:""}
Issued At: ${o.toISOString()}`;if(s&&(y+=`
Expiration Time: ${s.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),c&&(y+=`
Request ID: ${c}`),u){let x=`
Resources:`;for(const _ of u){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);x+=`
- ${_}`}y+=x}return`${w}
${y}`}class jt extends Error{constructor({message:e,code:r,cause:n,name:s}){var o;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(o=s??(n instanceof Error?n.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class Md extends jt{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function VM({error:t,options:e}){var r,n,s;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new jt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new jt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new jt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new jt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new jt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new jt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new jt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new jt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const i=window.location.hostname;if(VS(i)){if(o.rp.id!==i)return new jt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new jt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new jt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new jt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new jt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function HM({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new jt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new jt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(VS(n)){if(r.rpId!==n)return new jt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new jt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new jt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new jt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class qM{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const KM=new qM;function GM(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=ya(t,["challenge","user","excludeCredentials"]),o=ei(e).buffer,i=Object.assign(Object.assign({},r),{id:ei(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:o,user:i});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:ei(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function YM(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=ya(t,["challenge","allowCredentials"]),s=ei(e).buffer,o=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let i=0;i<r.length;i++){const l=r[i];o.allowCredentials[i]=Object.assign(Object.assign({},l),{id:ei(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return o}function QM(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ua(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ua(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function JM(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ua(new Uint8Array(s.authenticatorData)),clientDataJSON:Ua(new Uint8Array(s.clientDataJSON)),signature:Ua(new Uint8Array(s.signature)),userHandle:s.userHandle?Ua(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function VS(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function $w(){var t,e;return!!(Xt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function XM(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Md("Browser returned unexpected credential type",e)}:{data:null,error:new Md("Empty credential response",e)}}catch(e){return{data:null,error:VM({error:e,options:t})}}}async function ZM(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Md("Browser returned unexpected credential type",e)}:{data:null,error:new Md("Empty credential response",e)}}catch(e){return{data:null,error:HM({error:e,options:t})}}}const eI={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},tI={userVerification:"preferred",hints:["security-key"]};function Id(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const o in s){const i=s[o];if(i!==void 0)if(Array.isArray(i))n[o]=i;else if(r(i))n[o]=i;else if(e(i)){const l=n[o];e(l)?n[o]=Id(l,i):n[o]=Id(i)}else n[o]=i}return n}function rI(t,e){return Id(eI,t,e||{})}function nI(t,e){return Id(tI,t,e||{})}class sI{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},o){try{const{data:i,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!i)return{data:null,error:l};const c=s??KM.createNewAbortSignal();if(i.webauthn.type==="create"){const{user:u}=i.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(i.webauthn.type){case"create":{const u=rI(i.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:d,error:h}=await XM({publicKey:u,signal:c});return d?{data:{factorId:e,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=nI(i.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:d,error:h}=await ZM(Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:e,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(i){return we(i)?{data:null,error:i}:{data:null,error:new Ia("Unexpected error in challenge",i)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},o){if(!r)return{data:null,error:new oc("rpId is required for WebAuthn authentication")};try{if(!$w())return{data:null,error:new Ia("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:o});if(!i)return{data:null,error:l};const{webauthn:c}=i;return this._verify({factorId:e,challengeId:i.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(i){return we(i)?{data:null,error:i}:{data:null,error:new Ia("Unexpected error in authenticate",i)}}}async _register({friendlyName:e,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},o){if(!r)return{data:null,error:new oc("rpId is required for WebAuthn registration")};try{if(!$w())return{data:null,error:new Ia("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this._enroll({friendlyName:e});if(!i)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===e&&m.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:i.id,friendlyName:i.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:o});return c?this._verify({factorId:i.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(i){return we(i)?{data:null,error:i}:{data:null,error:new Ia("Unexpected error in register",i)}}}}UM();const aI={url:tM,storageKey:rM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:nM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Uw(t,e,r){return await r()}const ko={};class ic{get jwks(){var e,r;return(r=(e=ko[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){ko[this.storageKey]=Object.assign(Object.assign({},ko[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=ko[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ko[this.storageKey]=Object.assign(Object.assign({},ko[this.storageKey]),{cachedAt:e})}constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ic.nextInstanceID,ic.nextInstanceID+=1,this.instanceID>0&&Xt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},aI),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new LM({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=BS(s.fetch),this.lock=s.lock||Uw,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Xt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=$M:this.lock=Uw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new sI(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:US()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Fw(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Fw(this.memoryStorage)),Xt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${LS}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=vM(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Xt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),cM(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return we(r)?{error:r}:{error:new Ia("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const o=await ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:nn}),{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(we(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var r,n,s;try{let o;if("email"in e){const{email:d,password:h,options:m}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await jo(this.storage,this.storageKey)),o=await ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:v},xform:nn})}else if("phone"in e){const{phone:d,password:h,options:m}=e;o=await ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:nn})}else throw new Nu("You must provide either an email or phone number and a password");const{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(we(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let r;if("email"in e){const{email:o,password:i,options:l}=e;r=await ke(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Iw})}else if("phone"in e){const{phone:o,password:i,options:l}=e;r=await ke(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Iw})}else throw new Nu("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new bo}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(we(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,o,i,l,c,u,d,h,m;let p,v;if("message"in e)p=e.message,v=e.signature;else{const{chain:g,wallet:w,statement:y,options:x}=e;let _;if(Xt())if(typeof w=="object")_=w;else{const T=window;if("ethereum"in T&&typeof T.ethereum=="object"&&"request"in T.ethereum&&typeof T.ethereum.request=="function")_=T.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=w}const b=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href),j=await _.request({method:"eth_requestAccounts"}).then(T=>T).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=WS(j[0]);let k=(n=x==null?void 0:x.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!k){const T=await _.request({method:"eth_chainId"});k=BM(T)}const E={domain:b.host,address:N,statement:y,uri:b.href,version:"1",chainId:k,nonce:(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(i=(o=x==null?void 0:x.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&i!==void 0?i:new Date,expirationTime:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=x==null?void 0:x.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=x==null?void 0:x.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=WM(E),v=await _.request({method:"personal_sign",params:[zM(p),N]})}try{const{data:g,error:w}=await ke(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:v},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:nn});if(w)throw w;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new bo}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:w})}catch(g){if(we(g))return{data:{user:null,session:null},error:g};throw g}}async signInWithSolana(e){var r,n,s,o,i,l,c,u,d,h,m,p;let v,g;if("message"in e)v=e.message,g=e.signature;else{const{chain:w,wallet:y,statement:x,options:_}=e;let b;if(Xt())if(typeof y=="object")b=y;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))b=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=y}const j=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in b&&b.signIn){const N=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),x?{statement:x}:null));let k;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")k=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)k=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)v=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),g=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${j.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(n=_==null?void 0:_.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((i=_==null?void 0:_.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((u=_==null?void 0:_.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((h=(d=_==null?void 0:_.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",..._.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const N=await b.signMessage(new TextEncoder().encode(v),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=N}}try{const{data:w,error:y}=await ke(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Ua(g)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:nn});if(y)throw y;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new bo}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:y})}catch(w){if(we(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const r=await Ta(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:o,error:i}=await ke(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:nn});if(await ks(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new bo}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:i})}catch(o){if(we(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:o,nonce:i}=e,l=await ke(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:nn}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new bo}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(we(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,o,i;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await jo(this.storage,this.storageKey));const{error:h}=await ke(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await ke(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Nu("You must provide either an email or phone number.")}catch(l){if(we(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let s,o;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:l}=await ke(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:nn});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,u=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(we(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await jo(this.storage,this.storageKey)),await ke(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:AM})}catch(o){if(we(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new rn;const{error:s}=await ke(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(we(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:o}=e,{error:i}=await ke(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:n,type:s,options:o}=e,{data:i,error:l}=await ke(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new Nu("You must provide either an email or phone number and a type")}catch(r){if(we(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Ta(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Uf:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const i=await Ta(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=Wf()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const i={value:this.suppressGetSessionWarning};e.user=TM(e.user,i),i.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ke(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ls}):await this._useSession(async r=>{var n,s,o;const{data:i,error:l}=r;if(l)throw l;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new rn}:await ke(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Ls})})}catch(r){if(we(r))return lM(r)&&(await this._removeSession(),await ks(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:o}=n;if(o)throw o;if(!s.session)throw new rn;const i=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await jo(this.storage,this.storageKey));const{data:u,error:d}=await ke(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:Ls});if(d)throw d;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new rn;const r=Date.now()/1e3;let n=r,s=!0,o=null;const{payload:i}=zf(e.access_token);if(i.exp&&(n=i.exp,s=n<=r),s){const{data:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(we(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:i,error:l}=r;if(l)throw l;e=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new rn;const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(we(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Xt())throw new ku("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ku(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Pw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ku("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Pw("No code detected.");const{data:x,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:o,refresh_token:i,expires_in:l,expires_at:c,token_type:u}=e;if(!o||!l||!i||!u)throw new ku("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const p=m-d;p*1e3<=Oo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const v=m-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,d);const{data:g,error:w}=await this._getUser(o);if(w)throw w;const y={provider_token:n,provider_refresh_token:s,access_token:o,expires_in:h,expires_at:m,refresh_token:i,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(n){if(we(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Ta(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{error:o};const i=(n=s.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:l}=await this.admin.signOut(i,e);if(l&&!(iM(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await ks(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=gM(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:o},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await jo(this.storage,this.storageKey,!0));try{return await ke(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(we(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async o=>{var i,l,c,u,d;const{data:h,error:m}=o;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ke(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Xt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(we(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:o}}=r;if(s)throw s;const{options:i,provider:l,token:c,access_token:u,nonce:d}=e,h=await ke(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=o==null?void 0:o.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:nn}),{data:m,error:p}=h;return p?{data:{user:null,session:null},error:p}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new bo}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),{data:m,error:p})}catch(s){if(we(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)throw i;return await ke(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(we(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await wM(async s=>(s>0&&await yM(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await ke(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:nn})),(s,o)=>{const i=200*Math.pow(2,s);return o&&Bf(o)&&Date.now()+i-n<Oo})}catch(n){if(this._debug(r,"error",n),we(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Xt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Ta(this.storage,this.storageKey);if(s&&this.userStorage){let i=await Ta(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await Do(this.userStorage,this.storageKey+"-user",i)),s.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:Wf()}else if(s&&!s.user&&!s.user){const i=await Ta(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await ks(this.storage,this.storageKey+"-user"),await Do(this.storage,this.storageKey,s)):s.user=Wf()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const o=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Uf;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${Uf}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),Bf(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(s.access_token);!l&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new rn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new wh;const{data:o,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!o.session)throw new rn;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={data:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),we(o)){const i={data:null,error:o};return Bf(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){o.push(c)}});if(await Promise.all(i),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Do(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const o=Aw(s);await Do(this.storage,this.storageKey,o)}else{const s=Aw(r);await Do(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await ks(this.storage,this.storageKey),await ks(this.storage,this.storageKey+"-code-verifier"),await ks(this.storage,this.storageKey+"-user"),this.userStorage&&await ks(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Xt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Oo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Oo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Oo}ms, refresh threshold is ${Ap} ticks`),s<=Ap&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof zS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,i]=await jo(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);s.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await ke(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(we(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:u}=await ke(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(we(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{data:null,error:o};const i=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?QM(e.webauthn.credential_response):JM(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await ke(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:i,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(r){if(we(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{data:null,error:o};const i=await ke(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(i.error)return i;const{data:l}=i;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:GM(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:YM(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(we(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])s.all.push(o),o.status==="verified"&&s[o.factor_type].push(o);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:s}=await this.getSession();if(s)return{data:null,error:s};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=zf(n.access_token);let i=null;o.aal&&(i=o.aal);let l=i;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:i,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?{data:null,error:s}:n?await ke(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):{data:null,error:new rn}})}catch(r){if(we(r))return{data:null,error:r};throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;if(o)return{data:null,error:o};if(!s)return{data:null,error:new rn};const i=await ke(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&Xt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(we(n))return{data:null,error:n};throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;if(o)return{data:null,error:o};if(!s)return{data:null,error:new rn};const i=await ke(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&Xt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(we(n))return{data:null,error:n};throw n}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+aM>s)return n;const{data:o,error:i}=await ke(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,n=o.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:p,error:v}=await this.getSession();if(v||!p.session)return{data:null,error:v};n=p.session.access_token}const{header:s,payload:o,signature:i,raw:{header:l,payload:c}}=zf(n);r!=null&&r.allowExpired||CM(o.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:o,header:s,signature:i},error:null}}const d=EM(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,i,mM(`${l}.${c}`)))throw new Lp("Invalid JWT signature");return{data:{claims:o,header:s,signature:i},error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}}}ic.nextInstanceID=0;const oI=ic;class iI extends oI{constructor(e){super(e)}}class lI{constructor(e,r,n){var s,o,i;this.supabaseUrl=e,this.supabaseKey=r;const l=eM(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:qA,realtime:GA,auth:Object.assign(Object.assign({},KA),{storageKey:c}),global:HA},d=ZA(n??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=d.global.headers)!==null&&o!==void 0?o:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=d.auth)!==null&&i!==void 0?i:{},this.headers,d.global.fetch),this.fetch=JA(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new tA(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new zA(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new KD(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:o,storageKey:i,flowType:l,lock:c,debug:u},d,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new iI({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),d),storageKey:i,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:o,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new xA(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const cI=(t,e,r)=>new lI(t,e,r);function uI(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}uI()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const HS="https://studio.middar.com/",Ku="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlzcyI6InN1cGFiYXNlLWRlbW8iLCJpYXQiOjE3NjQwMDE2ODQsImV4cCI6MjA3OTU3NzY4NH0.sHsfXuCJ0n1y6g29oFxifU1KCkSZzCzZ7_x1zQDbFDY";console.log(" SUPABASE URL at runtime:",HS);console.log(" SUPABASE KEY (first 8):",Ku==null?void 0:Ku.slice(0,8));const J=cI(HS,Ku,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storageKey:"middar_crm_session"}}),Sr={async signUpStaff(t,e,r){console.log("[authService] Creating staff user:",{email:t,userData:r});try{const{data:n,error:s}=await J.auth.signUp({email:t,password:e});if(s)throw s;if(!n.user)throw new Error("No user data returned from sign up");console.log("[authService] Auth user created:",n.user.id);const{data:o,error:i}=await J.from("users").upsert({user_name:r.name,user_email:t,user_role:r.role,avatar:r.avatar,auth_user_id:n.user.id},{onConflict:"auth_user_id"}).select("*").single();if(i)throw console.error("[authService] Error creating user profile:",i),new Error(`Failed to create user profile: ${i.message}`);return console.log("[authService] User profile created:",o),console.log("[authService] User profile created:",o),{id:n.user.id,email:t,role:r.role,profile:{user_id:o.user_id||parseInt(n.user.id),user_name:o.user_name||r.name,user_email:o.user_email||t,user_role:o.user_role||r.role,avatar:o.avatar||r.avatar,auth_user_id:o.auth_user_id||n.user.id,client_contact:o.client_contact||null,company_name:o.company_name||null,company_name_ar:o.company_name_ar||null,user_name_ar:o.user_name_ar||null,user_phone:o.user_phone||null,created_at:o.created_at||new Date().toISOString(),updated_at:o.updated_at||new Date().toISOString()}}}catch(n){throw console.error("[authService] Error in signUpStaff:",n),n}},async createStaffUser(t,e,r){console.log("[authService] Creating staff user via Edge Function:",{email:t,userData:r});try{const{data:{session:n},error:s}=await J.auth.getSession();if(s||!(n!=null&&n.access_token))throw new Error("No active session found");const o="https://studio.middar.com/",i=`${o}/functions/v1/crud-staff-user`,l=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.access_token}`,"x-user-id":n.user.id},body:JSON.stringify({action:"add",email:t,password:e,userData:{user_name:r.name,user_role:r.role,...r.localizedData||{}}})});if(!l.ok){const h=await l.json();throw new Error(h.error||`HTTP ${l.status}`)}const c=await l.json();if(console.log("[authService] Staff user created successfully:",c),!c.ok)throw new Error("Edge Function returned an error status");const u=c.auth_id??c.authUserId;if(!u)throw new Error("Auth user ID missing from response");if(c.user_id==null)throw new Error("User ID missing from response");const d=c.user_id??null;return{id:u,email:t,role:r.role,profile:{user_id:d,user_name:c.user_name||r.name,user_email:c.user_email||t,user_role:c.user_role||r.role,avatar:c.avatar||r.avatar,auth_user_id:u,client_contact:c.client_contact||null,company_name:c.company_name||null,company_name_ar:c.company_name_ar||null,user_name_ar:c.user_name_ar||null,user_phone:c.user_phone||null,created_at:c.created_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString()}}}catch(n){throw console.error("[authService] Error in createStaffUser:",n),n}},async updateUserRole(t,e){console.log("[authService] Updating user role:",{targetUserId:t,newRole:e});try{const{data:{session:r},error:n}=await J.auth.getSession();if(n||!(r!=null&&r.access_token))throw new Error("No active session found");const s="https://studio.middar.com/".trim();if(!s)throw new Error("Missing VITE_SUPABASE_URL");const o=`${s}/functions/v1/crud-staff-user`,i=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.access_token}`,"x-user-id":r.user.id},body:JSON.stringify({action:"update",targetUserId:t,userData:{user_role:e}})});if(!i.ok){const l=await i.json();throw new Error(l.error||`HTTP ${i.status}`)}console.log("[authService] User role updated successfully")}catch(r){throw console.error("[authService] Error in updateUserRole:",r),r}},async updateUser(t,e){console.log("[authService] Updating user details:",{targetUserId:t,userData:e});try{const{data:{session:r},error:n}=await J.auth.getSession();if(n||!(r!=null&&r.access_token))throw new Error("No active session found");const s="https://studio.middar.com/".trim();if(!s)throw new Error("Missing VITE_SUPABASE_URL");const o=`${s}/functions/v1/crud-staff-user`,i={action:"update",targetUserId:t,userData:{}};if(e.user_email!==void 0&&(i.email=e.user_email,i.userData.user_email=e.user_email),e.user_name!==void 0&&(i.userData.user_name=e.user_name),e.user_role!==void 0&&(i.userData.user_role=e.user_role),e.user_phone!==void 0){const{data:l,error:c}=await J.from("users").select("user_id").eq("auth_user_id",t).single();if(c||!l)throw new Error("User not found");const{error:u}=await J.from("users").update({user_phone:e.user_phone}).eq("user_id",l.user_id);if(u)throw u}if(i.userData.user_name||i.userData.user_email||i.userData.user_role){const l=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.access_token}`,"x-user-id":r.user.id},body:JSON.stringify(i)});if(!l.ok){const u=await l.json();throw new Error(u.error||`HTTP ${l.status}`)}const c=await l.json();console.log("[authService] Edge Function update result:",c)}console.log("[authService] User details updated successfully")}catch(r){throw console.error("[authService] Error in updateUser:",r),r}},async deleteUser(t){console.log("[authService] Deleting user:",t);try{const{data:{session:e},error:r}=await J.auth.getSession();if(r||!(e!=null&&e.access_token))throw new Error("No active session found");const n="https://studio.middar.com/",s=`${n}/functions/v1/crud-staff-user`,o=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.access_token}`,"x-user-id":e.user.id},body:JSON.stringify({action:"delete",targetUserId:t})});if(!o.ok){const i=await o.json();throw new Error(i.error||`HTTP ${o.status}`)}console.log("[authService] User deleted successfully")}catch(e){throw console.error("[authService] Error in deleteUser:",e),e}},async signUpClient(t,e,r){console.log("[authService] Signing up client:",{email:t,...r});const{data:n,error:s}=await J.auth.signUp({email:t,password:e});if(s)throw s;if(!n.user)throw new Error("User creation failed");console.log("[authService] Auth user created:",n.user.id);const{data:o,error:i}=await J.from("users").upsert({user_name:r.name,user_email:t,user_role:"client",avatar:r.avatar,client_contact:r.contact,company_name:r.company,auth_user_id:n.user.id},{onConflict:"auth_user_id"}).select().single();if(i)throw console.error("[authService] Error creating user profile:",i),i;return console.log("[authService] User profile created:",o),{id:n.user.id,email:t,role:"client",profile:{user_id:o.user_id,user_name:o.user_name||r.name,user_email:o.user_email||t,user_role:"client",avatar:o.avatar||r.avatar,client_contact:o.client_contact||r.contact||null,company_name:o.company_name||r.company||null,company_name_ar:o.company_name_ar||null,user_name_ar:o.user_name_ar||null,user_phone:o.user_phone||null,auth_user_id:n.user.id,created_at:o.created_at||new Date().toISOString(),updated_at:o.updated_at||new Date().toISOString()}}},async signIn(t,e){console.log("[authService] Signing in with email:",t);try{const{data:r,error:n}=await J.auth.signInWithPassword({email:t,password:e});if(n)throw console.error("[authService] Authentication error:",n),n;if(!r.user)throw new Error("Sign in failed: No user data returned");console.log("[authService] User authenticated, fetching profile...");const{data:s,error:o}=await J.from("users").select("*").eq("auth_user_id",r.user.id).maybeSingle();if(o)throw console.error("[authService] Error fetching user profile:",o),new Error("Failed to fetch user profile");if(!s)throw console.error("[authService] User profile not found for user:",r.user.id),new Error("User profile not found");return console.log("[authService] User profile found:",s),{id:r.user.id,email:r.user.email,role:s.user_role||"client",profile:{...s}}}catch(r){throw console.error("[authService] Error in signIn:",r),r}},async signOut(){console.log("[authService] Signing out...");try{const{data:{session:t}}=await J.auth.getSession();if(!t){console.warn("[authService] No active session found  skipping signOut()");return}const{error:e}=await J.auth.signOut();if(e)throw console.error("[authService] Error signing out:",e),e;console.log("[authService] Sign out successful")}catch(t){throw console.error("[authService] Error in signOut:",t),t}},async signInWithGoogle(t="client"){console.log("[authService] Starting Google OAuth sign-in with role:",t);try{localStorage.setItem("oauth_intended_role",t);const{data:e,error:r}=await J.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`,data:{intended_role:t},queryParams:{access_type:"offline",prompt:"consent select_account"}}});if(r)throw console.error("[authService] Google OAuth error:",r),localStorage.removeItem("oauth_intended_role"),r;console.log("[authService] Google OAuth initiated successfully with role:",t)}catch(e){throw console.error("[authService] Error in Google sign-in:",e),localStorage.removeItem("oauth_intended_role"),e}},async getCurrentUser(t){console.log("[authService] Getting current user",{authUserId:t});try{let e;if(t)e={id:t},console.log("[authService] Using provided auth user ID:",t);else{console.log("[authService] Fetching auth user from session");const l=J.auth.getUser(),c=new Promise((u,d)=>setTimeout(()=>d(new Error("getUser timeout")),3e3));try{const{data:{user:u},error:d}=await Promise.race([l,c]);if(d||!u)return console.log("[authService] No authenticated user found"),null;e=u}catch(u){return console.warn("[authService] Failed to get user from session:",u),null}}console.log("[authService] Found auth user:",{id:e.id}),console.log("[authService] Checking users table for user:",e.id);const r=J.from("users").select("*").eq("auth_user_id",e.id).maybeSingle(),n=new Promise((l,c)=>setTimeout(()=>c(new Error("Database query timeout")),3e3));let s,o;try{const l=await Promise.race([r,n]);s=l.data,o=l.error}catch(l){return console.error("[authService] Database query timed out:",l),{id:e.id,email:"",role:"client",profile:{user_id:0,user_name:"User",user_email:"",user_role:"client",auth_user_id:e.id,avatar:"",client_contact:null,company_name:null,company_name_ar:null,user_name_ar:null,user_phone:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}}if(console.log("[authService] Database query completed:",{hasData:!!s,hasError:!!o}),o&&console.error("[authService] Error fetching user from users table:",o),s)return console.log("[authService] Found user in users table:",s),{id:e.id,email:s.user_email||"",role:s.user_role||"client",profile:{...s}};console.warn("[authService] User authenticated but not found in users table, creating minimal user object",{userId:e.id});const i={id:e.id,email:"",role:"client",profile:{user_id:0,user_name:"User",user_email:"",user_role:"client",auth_user_id:e.id,avatar:"",client_contact:null,company_name:null,company_name_ar:null,user_name_ar:null,user_phone:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}};return console.log("[authService] Returning minimal user object"),i}catch(e){return console.error("[authService] Error in getCurrentUser:",e),null}},async getFreshJwt(){const{data:{session:t},error:e}=await J.auth.getSession();if(e)throw e;if(!(t!=null&&t.access_token))throw new Error("No access token available");return t.access_token},onAuthStateChange(t){console.log("[authService] Setting up auth state change listener");let e=null;const r=async(s,o)=>{var l;console.log("[authService] Auth state changed:",{event:s,hasSession:!!o,userId:(l=o==null?void 0:o.user)==null?void 0:l.id});const i=async c=>{const u=this.getCurrentUser(c),d=new Promise((h,m)=>setTimeout(()=>m(new Error("getCurrentUser timeout")),3e3));return Promise.race([u,d])};if(s==="SIGNED_IN"&&(o!=null&&o.user))try{console.log("[authService] Fetching user profile for SIGNED_IN event");const c=await i(o.user.id);if(console.log("[authService] User profile fetched:",{hasUser:!!c}),c){const u=c.profile.user_name==="User",d=e&&e.profile.user_name!=="User";u&&d?console.log("[authService] Skipping update to minimal user, keeping full user"):JSON.stringify(c)!==JSON.stringify(e)&&(e=c,t(c))}}catch(c){if(console.error("[authService] Error or timeout getting current user:",c),!e){const u={id:o.user.id,email:o.user.email||"",role:"client",profile:{user_id:0,user_name:"User",user_email:o.user.email||"",user_role:"client",auth_user_id:o.user.id,avatar:"",client_contact:null,company_name:null,company_name_ar:null,user_name_ar:null,user_phone:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}};e=u,t(u)}}else if(s==="INITIAL_SESSION")if(o!=null&&o.user)try{console.log("[authService] Fetching user profile for INITIAL_SESSION event"),await new Promise(u=>setTimeout(u,100));const c=await i(o.user.id);if(console.log("[authService] User profile fetched:",{hasUser:!!c}),c){const u=c.profile.user_name==="User",d=e&&e.profile.user_name!=="User";u&&d?console.log("[authService] Skipping update to minimal user, keeping full user"):JSON.stringify(c)!==JSON.stringify(e)&&(e=c,t(c))}}catch(c){if(console.error("[authService] Error or timeout getting current user:",c),!e){const u={id:o.user.id,email:o.user.email||"",role:"client",profile:{user_id:0,user_name:"User",user_email:o.user.email||"",user_role:"client",auth_user_id:o.user.id,avatar:"",client_contact:null,company_name:null,company_name_ar:null,user_name_ar:null,user_phone:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}};e=u,t(u)}}else console.log("[authService] No session on initial check"),e=null,t(null);else s==="SIGNED_OUT"&&(console.log("[authService] User signed out"),e=null,t(null))},{data:{subscription:n}}=J.auth.onAuthStateChange(r);return console.log("[authService] Auth state change listener set up"),{data:{subscription:n}}}},qS=f.createContext(void 0),dI=({children:t})=>{const[e,r]=f.useState(null),[n,s]=f.useState(!0),[o,i]=f.useState(!1);f.useEffect(()=>{let x=!0,_=null,b=!1;const j=N=>{if(x){if(console.log("[AuthContext] Auth state changed:",{hasUser:!!N,isSigningUp:o}),o){console.log("[AuthContext] Skipping auth state change during signup");return}r(N),b||(b=!0,s(!1))}};console.log("[AuthContext] Initializing auth state...");try{const{data:{subscription:N}}=Sr.onAuthStateChange(j);_=N}catch(N){console.error("[AuthContext] Failed to set up auth state listener:",N),s(!1)}return()=>{console.log("[AuthContext] Cleaning up auth state change listener"),x=!1,_&&_.unsubscribe()}},[]);const l=async(x,_)=>{console.log("[AuthContext] Signing in..."),s(!0);try{const b=await Sr.signIn(x,_);return console.log("[AuthContext] Sign in successful:",b),r(b),s(!1),b}catch(b){throw console.error("[AuthContext] Sign in failed:",b),s(!1),r(null),b}},c=async(x="client")=>{console.log("[AuthContext] Starting Google sign-in with role:",x),s(!0);try{await Sr.signInWithGoogle(x)}catch(_){throw console.error("[AuthContext] Google sign-in failed:",_),s(!1),_}},u=async()=>{console.log("[AuthContext] Signing out...");try{r(null),await Sr.signOut(),console.log("[AuthContext] Sign out successful")}catch(x){throw console.error("[AuthContext] Sign out failed:",x),r(null),x}},d=async(x,_,b)=>{console.log("[AuthContext] Signing up staff..."),s(!0),i(!0);try{const j=await Sr.signUpStaff(x,_,b);return console.log("[AuthContext] Staff sign up successful:",j),r(j),s(!1),j}catch(j){throw console.error("[AuthContext] Staff sign up failed:",j),s(!1),j}finally{i(!1)}},h=async(x,_,b)=>{console.log("[AuthContext] Creating staff user...");try{const j=await Sr.createStaffUser(x,_,b);return console.log("[AuthContext] Staff user creation successful:",j),j}catch(j){throw console.error("[AuthContext] Staff user creation failed:",j),j}},m=async x=>{console.log("[AuthContext] Deleting user...");try{await Sr.deleteUser(x),console.log("[AuthContext] User deletion successful")}catch(_){throw console.error("[AuthContext] User deletion failed:",_),_}},p=async(x,_)=>{console.log("[AuthContext] Updating user role...");try{await Sr.updateUserRole(x,_),console.log("[AuthContext] User role update successful")}catch(b){throw console.error("[AuthContext] User role update failed:",b),b}},v=async(x,_)=>{console.log("[AuthContext] Updating user details...");try{await Sr.updateUser(x,_),console.log("[AuthContext] User details update successful")}catch(b){throw console.error("[AuthContext] User details update failed:",b),b}},g=async(x,_,b)=>{console.log("[AuthContext] Signing up client..."),s(!0),i(!0);try{const j=await Sr.signUpClient(x,_,b);return console.log("[AuthContext] Client sign up successful:",j),r(j),s(!1),j}catch(j){throw console.error("[AuthContext] Client sign up failed:",j),s(!1),j}finally{i(!1)}},w=x=>e?x.includes(e.role):!1,y={user:e,loading:n,signIn:l,signInWithGoogle:c,signOut:u,signUpStaff:d,createStaffUser:h,deleteUser:m,updateUserRole:p,updateUser:v,signUpClient:g,isAuthenticated:!!e,isClient:(e==null?void 0:e.role)==="client",isStaff:e?["admin","manager","employee","team_leader"].includes(e.role):!1,hasRole:w};return a.jsx(qS.Provider,{value:y,children:t})},yt=()=>{const t=f.useContext(qS);return t===void 0?(console.warn("[useAuth] AuthProvider not found, using fallback context"),{user:null,loading:!1,signIn:async()=>{throw new Error("AuthProvider not available")},signInWithGoogle:async()=>{throw new Error("AuthProvider not available")},signOut:async()=>{throw new Error("AuthProvider not available")},signUpStaff:async()=>{throw new Error("AuthProvider not available")},createStaffUser:async()=>{throw new Error("AuthProvider not available")},deleteUser:async()=>{throw new Error("AuthProvider not available")},updateUserRole:async()=>{throw new Error("AuthProvider not available")},updateUser:async()=>{throw new Error("AuthProvider not available")},signUpClient:async()=>{throw new Error("AuthProvider not available")},isAuthenticated:!1,isClient:!1,isStaff:!1,hasRole:()=>!1}):t},KS=f.createContext(void 0),hI=[{code:"en",name:"English",flag:""},{code:"ar",name:"",flag:""}],fI=({children:t})=>{const[e,r]=f.useState(dt.language||"ar"),[n,s]=f.useState(gn());f.useEffect(()=>{const l=c=>{r(c),s(gn())};return dt.on("languageChanged",l),()=>{dt.off("languageChanged",l)}},[]);const i={currentLanguage:e,changeLanguage:async l=>{try{await dt.changeLanguage(l),r(l),s(gn())}catch(c){console.error("Failed to change language:",c)}},isRTL:n,languages:hI};return a.jsx(KS.Provider,{value:i,children:t})},_a=()=>{const t=f.useContext(KS);if(t===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return t};var Ld=["light","dark"],vv="(prefers-color-scheme: dark)",mI=typeof window>"u",xv=f.createContext(void 0),pI={setTheme:t=>{},themes:[]},gI=()=>{var t;return(t=f.useContext(xv))!=null?t:pI},GS=t=>f.useContext(xv)?t.children:f.createElement(xI,{...t}),vI=["light","dark"],xI=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:r=!0,enableColorScheme:n=!0,storageKey:s="theme",themes:o=vI,defaultTheme:i=r?"system":"light",attribute:l="data-theme",value:c,children:u,nonce:d})=>{let[h,m]=f.useState(()=>Bw(s,i)),[p,v]=f.useState(()=>Bw(s)),g=c?Object.values(c):o,w=f.useCallback(b=>{let j=b;if(!j)return;b==="system"&&r&&(j=zw());let N=c?c[j]:j,k=e?wI():null,E=document.documentElement;if(l==="class"?(E.classList.remove(...g),N&&E.classList.add(N)):N?E.setAttribute(l,N):E.removeAttribute(l),n){let T=Ld.includes(i)?i:null,P=Ld.includes(j)?j:T;E.style.colorScheme=P}k==null||k()},[]),y=f.useCallback(b=>{let j=typeof b=="function"?b(b):b;m(j);try{localStorage.setItem(s,j)}catch{}},[t]),x=f.useCallback(b=>{let j=zw(b);v(j),h==="system"&&r&&!t&&w("system")},[h,t]);f.useEffect(()=>{let b=window.matchMedia(vv);return b.addListener(x),x(b),()=>b.removeListener(x)},[x]),f.useEffect(()=>{let b=j=>{if(j.key!==s)return;let N=j.newValue||i;y(N)};return window.addEventListener("storage",b),()=>window.removeEventListener("storage",b)},[y]),f.useEffect(()=>{w(t??h)},[t,h]);let _=f.useMemo(()=>({theme:h,setTheme:y,forcedTheme:t,resolvedTheme:h==="system"?p:h,themes:r?[...o,"system"]:o,systemTheme:r?p:void 0}),[h,y,t,p,r,o]);return f.createElement(xv.Provider,{value:_},f.createElement(yI,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:r,enableColorScheme:n,storageKey:s,themes:o,defaultTheme:i,attribute:l,value:c,children:u,attrs:g,nonce:d}),u)},yI=f.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:o,value:i,attrs:l,nonce:c})=>{let u=o==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,h=s?Ld.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(v,g=!1,w=!0)=>{let y=i?i[v]:v,x=g?v+"|| ''":`'${y}'`,_="";return s&&w&&!g&&Ld.includes(v)&&(_+=`d.style.colorScheme = '${v}';`),r==="class"?g||y?_+=`c.add(${x})`:_+="null":y&&(_+=`d[s](n,${x})`),_},p=t?`!function(){${d}${m(t)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${vv}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${m(i?"x[e]":"e",!0)}}${u?"":"else{"+m(o,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${m(i?"x[e]":"e",!0)}}else{${m(o,!1,!1)};}${h}}catch(t){}}();`;return f.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})}),Bw=(t,e)=>{if(mI)return;let r;try{r=localStorage.getItem(t)||void 0}catch{}return r||e},wI=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},zw=t=>(t||(t=window.matchMedia(vv)),t.matches?"dark":"light");const _I=()=>a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"}),a.jsx("span",{className:"sr-only",children:"Loading..."})]}),Qt=({children:t,allowedRoles:e,requireAuth:r=!0})=>{const n=xa(),{user:s,loading:o,hasRole:i}=yt(),l=s&&s.role&&s.profile.user_name!=="User",c=f.useMemo(()=>e?i(e):!0,[e,i]);return f.useMemo(()=>({loading:o,user:s?{id:s.id,email:s.email,role:s.role}:null,hasRequiredRole:c}),[o,s,c]),console.log("[ProtectedRoute]",{path:n.pathname,loading:o,hasUser:!!s,isUserProfileLoaded:l,requireAuth:r,hasRequiredRole:c,userRole:s==null?void 0:s.role}),o||s&&!l?(console.log("[ProtectedRoute] Showing loading spinner - waiting for profile"),a.jsx(_I,{})):r&&!s?(console.log("[ProtectedRoute] No user, redirecting to login"),a.jsx(bp,{to:"/login",state:{from:n},replace:!0})):e&&!c?(console.log("[ProtectedRoute] User does not have required role"),a.jsx(bp,{to:"/unauthorized",replace:!0})):(console.log("[ProtectedRoute] Rendering protected content"),a.jsx(a.Fragment,{children:t}))};function Ww(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function _h(...t){return e=>{let r=!1;const n=t.map(s=>{const o=Ww(s,e);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let s=0;s<n.length;s++){const o=n[s];typeof o=="function"?o():Ww(t[s],null)}}}}function Ae(...t){return f.useCallback(_h(...t),t)}function ua(t){const e=jI(t),r=f.forwardRef((n,s)=>{const{children:o,...i}=n,l=f.Children.toArray(o),c=l.find(NI);if(c){const u=c.props.children,d=l.map(h=>h===c?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:h);return a.jsx(e,{...i,ref:s,children:f.isValidElement(u)?f.cloneElement(u,void 0,d):null})}return a.jsx(e,{...i,ref:s,children:o})});return r.displayName=`${t}.Slot`,r}var bI=ua("Slot");function jI(t){const e=f.forwardRef((r,n)=>{const{children:s,...o}=r;if(f.isValidElement(s)){const i=CI(s),l=kI(o,s.props);return s.type!==f.Fragment&&(l.ref=n?_h(n,i):i),f.cloneElement(s,l)}return f.Children.count(s)>1?f.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var YS=Symbol("radix.slottable");function SI(t){const e=({children:r})=>a.jsx(a.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=YS,e}function NI(t){return f.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===YS}function kI(t,e){const r={...e};for(const n in e){const s=t[n],o=e[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...l)=>{const c=o(...l);return s(...l),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...t,...r}}function CI(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function QS(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=QS(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function JS(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=QS(t))&&(n&&(n+=" "),n+=e);return n}const Vw=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Hw=JS,kc=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return Hw(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:o}=e,i=Object.keys(s).map(u=>{const d=r==null?void 0:r[u],h=o==null?void 0:o[u];if(d===null)return null;const m=Vw(d)||Vw(h);return s[u][m]}),l=r&&Object.entries(r).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:h,className:m,...p}=d;return Object.entries(p).every(v=>{let[g,w]=v;return Array.isArray(w)?w.includes({...o,...l}[g]):{...o,...l}[g]===w})?[...u,h,m]:u},[]);return Hw(t,i,c,r==null?void 0:r.class,r==null?void 0:r.className)},yv="-",EI=t=>{const e=TI(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:i=>{const l=i.split(yv);return l[0]===""&&l.length!==1&&l.shift(),XS(l,e)||PI(i)},getConflictingClassGroupIds:(i,l)=>{const c=r[i]||[];return l&&n[i]?[...c,...n[i]]:c}}},XS=(t,e)=>{var i;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?XS(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const o=t.join(yv);return(i=e.validators.find(({validator:l})=>l(o)))==null?void 0:i.classGroupId},qw=/^\[(.+)\]$/,PI=t=>{if(qw.test(t)){const e=qw.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},TI=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return OI(Object.entries(t.classGroups),r).forEach(([o,i])=>{Fp(i,n,o,e)}),n},Fp=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const o=s===""?e:Kw(e,s);o.classGroupId=r;return}if(typeof s=="function"){if(RI(s)){Fp(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([o,i])=>{Fp(i,Kw(e,o),r,n)})})},Kw=(t,e)=>{let r=t;return e.split(yv).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},RI=t=>t.isThemeGetter,OI=(t,e)=>e?t.map(([r,n])=>{const s=n.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,l])=>[e+i,l])):o);return[r,s]}):t,DI=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(o,i)=>{r.set(o,i),e++,e>t&&(e=0,n=r,r=new Map)};return{get(o){let i=r.get(o);if(i!==void 0)return i;if((i=n.get(o))!==void 0)return s(o,i),i},set(o,i){r.has(o)?r.set(o,i):s(o,i)}}},ZS="!",AI=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],o=e.length,i=l=>{const c=[];let u=0,d=0,h;for(let w=0;w<l.length;w++){let y=l[w];if(u===0){if(y===s&&(n||l.slice(w,w+o)===e)){c.push(l.slice(d,w)),d=w+o;continue}if(y==="/"){h=w;continue}}y==="["?u++:y==="]"&&u--}const m=c.length===0?l:l.substring(d),p=m.startsWith(ZS),v=p?m.substring(1):m,g=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:i}):i},MI=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},II=t=>({cache:DI(t.cacheSize),parseClassName:AI(t),...EI(t)}),LI=/\s+/,FI=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,o=[],i=t.trim().split(LI);let l="";for(let c=i.length-1;c>=0;c-=1){const u=i[c],{modifiers:d,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:p}=r(u);let v=!!p,g=n(v?m.substring(0,p):m);if(!g){if(!v){l=u+(l.length>0?" "+l:l);continue}if(g=n(m),!g){l=u+(l.length>0?" "+l:l);continue}v=!1}const w=MI(d).join(":"),y=h?w+ZS:w,x=y+g;if(o.includes(x))continue;o.push(x);const _=s(g,v);for(let b=0;b<_.length;++b){const j=_[b];o.push(y+j)}l=u+(l.length>0?" "+l:l)}return l};function $I(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=e1(e))&&(n&&(n+=" "),n+=r);return n}const e1=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=e1(t[n]))&&(r&&(r+=" "),r+=e);return r};function UI(t,...e){let r,n,s,o=i;function i(c){const u=e.reduce((d,h)=>h(d),t());return r=II(u),n=r.cache.get,s=r.cache.set,o=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=FI(c,r);return s(c,d),d}return function(){return o($I.apply(null,arguments))}}const st=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},t1=/^\[(?:([a-z-]+):)?(.+)\]$/i,BI=/^\d+\/\d+$/,zI=new Set(["px","full","screen"]),WI=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,VI=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,HI=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,qI=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,KI=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Kn=t=>ti(t)||zI.has(t)||BI.test(t),Cs=t=>qi(t,"length",tL),ti=t=>!!t&&!Number.isNaN(Number(t)),Hf=t=>qi(t,"number",ti),ul=t=>!!t&&Number.isInteger(Number(t)),GI=t=>t.endsWith("%")&&ti(t.slice(0,-1)),Oe=t=>t1.test(t),Es=t=>WI.test(t),YI=new Set(["length","size","percentage"]),QI=t=>qi(t,YI,r1),JI=t=>qi(t,"position",r1),XI=new Set(["image","url"]),ZI=t=>qi(t,XI,nL),eL=t=>qi(t,"",rL),dl=()=>!0,qi=(t,e,r)=>{const n=t1.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},tL=t=>VI.test(t)&&!HI.test(t),r1=()=>!1,rL=t=>qI.test(t),nL=t=>KI.test(t),sL=()=>{const t=st("colors"),e=st("spacing"),r=st("blur"),n=st("brightness"),s=st("borderColor"),o=st("borderRadius"),i=st("borderSpacing"),l=st("borderWidth"),c=st("contrast"),u=st("grayscale"),d=st("hueRotate"),h=st("invert"),m=st("gap"),p=st("gradientColorStops"),v=st("gradientColorStopPositions"),g=st("inset"),w=st("margin"),y=st("opacity"),x=st("padding"),_=st("saturate"),b=st("scale"),j=st("sepia"),N=st("skew"),k=st("space"),E=st("translate"),T=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],z=()=>["auto",Oe,e],B=()=>[Oe,e],Q=()=>["",Kn,Cs],R=()=>["auto",ti,Oe],Y=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],M=()=>["solid","dashed","dotted","double","none"],D=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],C=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",Oe],I=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[ti,Oe];return{cacheSize:500,separator:":",theme:{colors:[dl],spacing:[Kn,Cs],blur:["none","",Es,Oe],brightness:W(),borderColor:[t],borderRadius:["none","","full",Es,Oe],borderSpacing:B(),borderWidth:Q(),contrast:W(),grayscale:L(),hueRotate:W(),invert:L(),gap:B(),gradientColorStops:[t],gradientColorStopPositions:[GI,Cs],inset:z(),margin:z(),opacity:W(),padding:B(),saturate:W(),scale:W(),sepia:L(),skew:W(),space:B(),translate:B()},classGroups:{aspect:[{aspect:["auto","square","video",Oe]}],container:["container"],columns:[{columns:[Es]}],"break-after":[{"break-after":I()}],"break-before":[{"break-before":I()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Y(),Oe]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ul,Oe]}],basis:[{basis:z()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Oe]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",ul,Oe]}],"grid-cols":[{"grid-cols":[dl]}],"col-start-end":[{col:["auto",{span:["full",ul,Oe]},Oe]}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":[dl]}],"row-start-end":[{row:["auto",{span:[ul,Oe]},Oe]}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Oe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Oe]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...C()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...C(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...C(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Oe,e]}],"min-w":[{"min-w":[Oe,e,"min","max","fit"]}],"max-w":[{"max-w":[Oe,e,"none","full","min","max","fit","prose",{screen:[Es]},Es]}],h:[{h:[Oe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Oe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Oe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Oe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Es,Cs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Hf]}],"font-family":[{font:[dl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Oe]}],"line-clamp":[{"line-clamp":["none",ti,Hf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Kn,Oe]}],"list-image":[{"list-image":["none",Oe]}],"list-style-type":[{list:["none","disc","decimal",Oe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...M(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Kn,Cs]}],"underline-offset":[{"underline-offset":["auto",Kn,Oe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Oe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Oe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Y(),JI]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",QI]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ZI]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...M(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:M()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...M()]}],"outline-offset":[{"outline-offset":[Kn,Oe]}],"outline-w":[{outline:[Kn,Cs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:Q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Kn,Cs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Es,eL]}],"shadow-color":[{shadow:[dl]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...D(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":D()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Es,Oe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Oe]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",Oe]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",Oe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[ul,Oe]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Oe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Oe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Oe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Kn,Cs,Hf]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},aL=UI(sL);function Z(...t){return aL(JS(t))}const lc=kc("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),q=f.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...s},o)=>{const i=n?bI:"button";return a.jsx(i,{className:Z(lc({variant:e,size:r,className:t})),ref:o,...s})});q.displayName="Button";const je=f.forwardRef(({className:t,type:e,...r},n)=>a.jsx("input",{type:e,className:Z("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));je.displayName="Input";var oL=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],be=oL.reduce((t,e)=>{const r=ua(`Primitive.${e}`),n=f.forwardRef((s,o)=>{const{asChild:i,...l}=s,c=i?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function n1(t,e){t&&Bi.flushSync(()=>t.dispatchEvent(e))}var iL="Label",s1=f.forwardRef((t,e)=>a.jsx(be.label,{...t,ref:e,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));s1.displayName=iL;var a1=s1;const lL=kc("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),he=f.forwardRef(({className:t,...e},r)=>a.jsx(a1,{ref:r,className:Z(lL(),t),...e}));he.displayName=a1.displayName;const cL=kc("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ti=f.forwardRef(({className:t,variant:e,...r},n)=>a.jsx("div",{ref:n,role:"alert",className:Z(cL({variant:e}),t),...r}));Ti.displayName="Alert";const uL=f.forwardRef(({className:t,...e},r)=>a.jsx("h5",{ref:r,className:Z("mb-1 font-medium leading-none tracking-tight",t),...e}));uL.displayName="AlertTitle";const Ri=f.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:Z("text-sm [&_p]:leading-relaxed",t),...e}));Ri.displayName="AlertDescription";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o1=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=f.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:i,...l},c)=>f.createElement("svg",{ref:c,...hL,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:o1("lucide",s),...l},[...i.map(([u,d])=>f.createElement(u,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=(t,e)=>{const r=f.forwardRef(({className:n,...s},o)=>f.createElement(fL,{ref:o,iconNode:e,className:o1(`lucide-${dL(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=ce("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=ce("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=ce("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=ce("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=ce("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=ce("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=ce("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=ce("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=ce("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=ce("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=ce("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=ce("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=ce("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=ce("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=ce("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=ce("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=ce("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=ce("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=ce("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=ce("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=ce("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=ce("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=ce("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=ce("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=ce("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=ce("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=ce("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=ce("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=ce("Kanban",[["path",{d:"M6 5v11",key:"mdvv1e"}],["path",{d:"M12 5v6",key:"14ar3b"}],["path",{d:"M18 5v14",key:"7ji314"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=ce("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=ce("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=ce("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=ce("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=ce("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=ce("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=ce("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=ce("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=ce("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=ce("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=ce("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=ce("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=ce("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=ce("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=ce("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=ce("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=ce("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=ce("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=ce("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=ce("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=ce("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=ce("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=ce("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=ce("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=ce("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=ce("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=ce("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=ce("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=ce("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=ce("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=ce("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=ce("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=ce("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),GL=()=>{const{t}=Xe(),[e,r]=f.useState(""),[n,s]=f.useState(""),[o,i]=f.useState(!1),[l,c]=f.useState(""),[u,d]=f.useState(!1);f.useState(!1);const{signIn:h,signInWithGoogle:m}=yt(),p=Zr(),v=async g=>{g.preventDefault(),c(""),d(!0);try{const w=await h(e,n);w&&(console.log("[LoginForm] Sign in successful, user role:",w.role),w.role==="client"?p("/client-portal"):w.role==="employee"||w.role==="team_leader"?window.location.href="/#/employee_dashboard":w.role==="partner"?window.location.href="/#/partner-dashboard":w.role==="partner_employee"?window.location.href="/#/partner-employee-dashboard":window.location.href="/#/dashboard")}catch(w){console.error("[LoginForm] Sign in error:",w),c(w.message||t("auth.failedToSignIn")),d(!1)}};return a.jsxs("div",{className:"w-full max-w-md mx-auto space-y-6 px-4 sm:px-0",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:t("auth.signIn")}),a.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:t("auth.enterCredentials")})]}),a.jsxs("form",{onSubmit:v,className:"space-y-5",children:[l&&a.jsx(Ti,{variant:"destructive",children:a.jsx(Ri,{className:"text-sm",children:l})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"email",className:"text-sm font-medium",children:t("auth.email")}),a.jsx(je,{id:"email",type:"email",value:e,onChange:g=>r(g.target.value),placeholder:"you@middar.com",required:!0,className:"h-11 text-base"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"password",className:"text-sm font-medium",children:t("auth.password")}),a.jsxs("div",{className:"relative",children:[a.jsx(je,{id:"password",type:o?"text":"password",value:n,onChange:g=>s(g.target.value),placeholder:"",required:!0,className:"h-11 text-base pe-10"}),a.jsx(q,{type:"button",variant:"ghost",size:"sm",className:"absolute end-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!o),"aria-label":o?"Hide password":"Show password",children:o?a.jsx(NL,{className:"h-4 w-4 text-muted-foreground"}):a.jsx(Fd,{className:"h-4 w-4 text-muted-foreground"})})]})]}),a.jsx(q,{type:"submit",className:"w-full h-11 text-base font-medium shadow-lg hover:shadow-xl transition-all duration-200",disabled:u,children:u?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-current"}),t("auth.signingIn")]}):t("auth.signInButton")})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:t("auth.dontHaveAccount")}),a.jsx(q,{variant:"link",className:"p-0 h-auto text-sm font-medium hover:text-primary transition-colors",onClick:()=>p("/signup"),children:t("auth.signUp")})]})]})},YL=()=>{const[t,e]=f.useState(!1);yt();const r=Zr(),{t:n}=Xe();return a.jsxs("div",{className:"w-full max-w-md space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-3xl font-bold",children:n("auth.createAccount")}),a.jsx("p",{className:"text-muted-foreground mt-2",children:n("auth.signUpToGetStarted")})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"text-center text-sm text-muted-foreground",children:n("auth.chooseAccountTypeSignUp")}),t&&a.jsx("div",{className:"text-center text-sm text-muted-foreground",children:n("auth.redirectingToGoogle")})]}),a.jsxs("div",{className:"text-center text-sm",children:[a.jsxs("span",{className:"text-muted-foreground",children:[n("auth.alreadyHaveAccount")," "]}),a.jsx(q,{variant:"link",className:"p-0",onClick:()=>r("/login"),children:n("auth.signIn")})]})]})};function QL(t,e){const r=f.createContext(e),n=o=>{const{children:i,...l}=o,c=f.useMemo(()=>l,Object.values(l));return a.jsx(r.Provider,{value:c,children:i})};n.displayName=t+"Provider";function s(o){const i=f.useContext(r);if(i)return i;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[n,s]}function jr(t,e=[]){let r=[];function n(o,i){const l=f.createContext(i),c=r.length;r=[...r,i];const u=h=>{var y;const{scope:m,children:p,...v}=h,g=((y=m==null?void 0:m[t])==null?void 0:y[c])||l,w=f.useMemo(()=>v,Object.values(v));return a.jsx(g.Provider,{value:w,children:p})};u.displayName=o+"Provider";function d(h,m){var g;const p=((g=m==null?void 0:m[t])==null?void 0:g[c])||l,v=f.useContext(p);if(v)return v;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[u,d]}const s=()=>{const o=r.map(i=>f.createContext(i));return function(l){const c=(l==null?void 0:l[t])||o;return f.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,JL(s,...e)]}function JL(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(o)[`__scope${u}`];return{...l,...h}},{});return f.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return r.scopeName=e.scopeName,r}function At(t){const e=f.useRef(t);return f.useEffect(()=>{e.current=t}),f.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}var Et=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{};function XL(){return Rj.useSyncExternalStore(ZL,()=>!0,()=>!1)}function ZL(){return()=>{}}var Nv="Avatar",[e4,bW]=jr(Nv),[t4,p1]=e4(Nv),g1=f.forwardRef((t,e)=>{const{__scopeAvatar:r,...n}=t,[s,o]=f.useState("idle");return a.jsx(t4,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:a.jsx(be.span,{...n,ref:e})})});g1.displayName=Nv;var v1="AvatarImage",x1=f.forwardRef((t,e)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...o}=t,i=p1(v1,r),l=r4(n,o),c=At(u=>{s(u),i.onImageLoadingStatusChange(u)});return Et(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?a.jsx(be.img,{...o,ref:e,src:n}):null});x1.displayName=v1;var y1="AvatarFallback",w1=f.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:n,...s}=t,o=p1(y1,r),[i,l]=f.useState(n===void 0);return f.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),i&&o.imageLoadingStatus!=="loaded"?a.jsx(be.span,{...s,ref:e}):null});w1.displayName=y1;function Zw(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function r4(t,{referrerPolicy:e,crossOrigin:r}){const n=XL(),s=f.useRef(null),o=n?(s.current||(s.current=new window.Image),s.current):null,[i,l]=f.useState(()=>Zw(o,t));return Et(()=>{l(Zw(o,t))},[o,t]),Et(()=>{const c=h=>()=>{l(h)};if(!o)return;const u=c("loaded"),d=c("error");return o.addEventListener("load",u),o.addEventListener("error",d),e&&(o.referrerPolicy=e),typeof r=="string"&&(o.crossOrigin=r),()=>{o.removeEventListener("load",u),o.removeEventListener("error",d)}},[o,r,e]),i}var _1=g1,b1=x1,j1=w1;const Hr=f.forwardRef(({className:t,...e},r)=>a.jsx(_1,{ref:r,className:Z("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Hr.displayName=_1.displayName;const qr=f.forwardRef(({className:t,...e},r)=>a.jsx(b1,{ref:r,className:Z("aspect-square h-full w-full",t),...e}));qr.displayName=b1.displayName;const Kr=f.forwardRef(({className:t,...e},r)=>a.jsx(j1,{ref:r,className:Z("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Kr.displayName=j1.displayName;const n4=[{label:"main",items:[{labelKey:"navigation.dashboard",path:"/dashboard",roles:["admin","manager"],icon:Yw},{labelKey:"navigation.empDashboard",path:"/employee_dashboard",roles:["employee","team_leader"],icon:Yw},{labelKey:"navigation.clientPortal",path:"/client-portal",roles:["client"],icon:CL},{labelKey:"navigation.partnerDashboard",path:"/partner-dashboard",roles:["partner"],icon:yL},{labelKey:"navigation.surveys",path:"/surveys",roles:["admin","manager","employee","team_leader"],icon:ni}]},{label:"sales",items:[{labelKey:"navigation.leads",path:"/leads",roles:["admin","manager","employee","team_leader"],icon:Mr},{labelKey:"navigation.projects",path:"/projects",roles:["admin","manager","employee","team_leader"],icon:ri}]},{label:"work",items:[{labelKey:"navigation.tasks",path:"/tasks",roles:["admin","manager","employee","team_leader"],icon:$d},{labelKey:"navigation.tickets",path:"/tickets",roles:["admin","manager","employee","team_leader","client"],icon:Gu}]},{label:"communication",items:[{labelKey:"navigation.chats",path:"/chats",roles:["admin","manager","employee","team_leader","client"],icon:Cc},{labelKey:"navigation.teams",path:"/teams",roles:["admin","manager","employee","team_leader"],icon:f1}]},{label:"system",items:[{labelKey:"navigation.users",path:"/users",roles:["admin"],icon:WL},{labelKey:"navigation.settings",path:"/settings",roles:["admin"],icon:h1}]}];function e0({onNavigate:t}={}){var s,o,i,l;const e=xa(),{user:r}=yt(),{t:n}=Xe();return a.jsxs("div",{className:"h-full w-full bg-gradient-to-b from-sidebar via-sidebar to-sidebar/95 border-r border-sidebar-border/50 flex flex-col shadow-xl",children:[a.jsx("div",{className:"p-6 border-b border-sidebar-border/30 bg-gradient-to-r from-primary/5 via-primary/3 to-transparent",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary to-primary/80 shadow-lg flex items-center justify-center ring-2 ring-primary/20",children:a.jsx(po,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg font-bold text-sidebar-foreground tracking-tight",children:n("landing.brandName")}),a.jsx("p",{className:"text-xs text-sidebar-foreground/60",children:"CRM System"})]})]})}),a.jsx("div",{className:"flex-1 px-4 py-6 overflow-y-auto",children:a.jsx("nav",{className:"space-y-6",children:n4.map(c=>{const u=c.items.filter(d=>r&&d.roles.includes(r.role));return u.length===0?null:a.jsxs("div",{children:[a.jsx("h3",{className:"px-3 mb-2 text-xs font-semibold text-sidebar-foreground/50 uppercase tracking-wider",children:n(`navigation.${c.label}Group`,c.label)}),a.jsx("div",{className:"space-y-1",children:u.map(d=>{const h=e.pathname===d.path,m=d.icon;return a.jsxs(Uj,{to:d.path,onClick:t,className:Z("flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 group relative overflow-hidden",h?"bg-gradient-to-r from-primary to-primary/90 text-white shadow-lg shadow-primary/25 translate-x-1":"text-sidebar-foreground/70 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:translate-x-0.5"),children:[h&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 via-transparent to-transparent"}),a.jsx(m,{className:Z("h-4 w-4 transition-transform group-hover:scale-110 relative z-10",h?"text-white":"text-sidebar-foreground/50 group-hover:text-sidebar-accent-foreground")}),a.jsx("span",{className:"flex-1 relative z-10",children:n(d.labelKey)}),h&&a.jsx(cc,{className:"h-4 w-4 text-white/70 relative z-10"})]},d.path)})})]},c.label)})})}),a.jsx("div",{className:"p-4 border-t border-sidebar-border/50 bg-sidebar-accent/30",children:a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-gradient-to-r from-sidebar-accent/50 to-transparent hover:from-sidebar-accent hover:shadow-md transition-all cursor-pointer group",children:[a.jsxs(Hr,{className:"h-10 w-10 ring-2 ring-primary/20 transition-all group-hover:ring-primary/40",children:[a.jsx(qr,{src:(s=r==null?void 0:r.profile)==null?void 0:s.avatar}),a.jsx(Kr,{className:"bg-gradient-to-br from-primary/20 to-primary/10 text-primary font-bold",children:(o=r==null?void 0:r.email)==null?void 0:o.charAt(0).toUpperCase()})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-semibold text-sidebar-foreground truncate",children:((i=r==null?void 0:r.profile)==null?void 0:i.user_name)||(r==null?void 0:r.email)}),a.jsxs("p",{className:"text-xs text-sidebar-foreground/60 capitalize flex items-center gap-1.5",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse shadow-lg shadow-green-500/50"}),(l=r==null?void 0:r.role)==null?void 0:l.replace("_"," ")]})]}),a.jsx(cc,{className:"h-4 w-4 text-sidebar-foreground/30 group-hover:text-sidebar-foreground/60 transition-colors"})]})})]})}function Up(t,[e,r]){return Math.min(r,Math.max(e,t))}function ue(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t==null||t(s),r===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function kv(t){const e=t+"CollectionProvider",[r,n]=jr(e),[s,o]=r(e,{collectionRef:{current:null},itemMap:new Map}),i=g=>{const{scope:w,children:y}=g,x=Ts.useRef(null),_=Ts.useRef(new Map).current;return a.jsx(s,{scope:w,itemMap:_,collectionRef:x,children:y})};i.displayName=e;const l=t+"CollectionSlot",c=ua(l),u=Ts.forwardRef((g,w)=>{const{scope:y,children:x}=g,_=o(l,y),b=Ae(w,_.collectionRef);return a.jsx(c,{ref:b,children:x})});u.displayName=l;const d=t+"CollectionItemSlot",h="data-radix-collection-item",m=ua(d),p=Ts.forwardRef((g,w)=>{const{scope:y,children:x,..._}=g,b=Ts.useRef(null),j=Ae(w,b),N=o(d,y);return Ts.useEffect(()=>(N.itemMap.set(b,{ref:b,..._}),()=>void N.itemMap.delete(b))),a.jsx(m,{[h]:"",ref:j,children:x})});p.displayName=d;function v(g){const w=o(t+"CollectionConsumer",g);return Ts.useCallback(()=>{const x=w.collectionRef.current;if(!x)return[];const _=Array.from(x.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((N,k)=>_.indexOf(N.ref.current)-_.indexOf(k.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:i,Slot:u,ItemSlot:p},v,n]}var s4=f.createContext(void 0);function Pc(t){const e=f.useContext(s4);return t||e||"ltr"}function a4(t,e=globalThis==null?void 0:globalThis.document){const r=At(t);f.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var o4="DismissableLayer",Bp="dismissableLayer.update",i4="dismissableLayer.pointerDownOutside",l4="dismissableLayer.focusOutside",t0,S1=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Tc=f.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...c}=t,u=f.useContext(S1),[d,h]=f.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=f.useState({}),v=Ae(e,k=>h(k)),g=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(w),x=d?g.indexOf(d):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,b=x>=y,j=d4(k=>{const E=k.target,T=[...u.branches].some(P=>P.contains(E));!b||T||(s==null||s(k),i==null||i(k),k.defaultPrevented||l==null||l())},m),N=h4(k=>{const E=k.target;[...u.branches].some(P=>P.contains(E))||(o==null||o(k),i==null||i(k),k.defaultPrevented||l==null||l())},m);return a4(k=>{x===u.layers.size-1&&(n==null||n(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},m),f.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(t0=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),r0(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=t0)}},[d,m,r,u]),f.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),r0())},[d,u]),f.useEffect(()=>{const k=()=>p({});return document.addEventListener(Bp,k),()=>document.removeEventListener(Bp,k)},[]),a.jsx(be.div,{...c,ref:v,style:{pointerEvents:_?b?"auto":"none":void 0,...t.style},onFocusCapture:ue(t.onFocusCapture,N.onFocusCapture),onBlurCapture:ue(t.onBlurCapture,N.onBlurCapture),onPointerDownCapture:ue(t.onPointerDownCapture,j.onPointerDownCapture)})});Tc.displayName=o4;var c4="DismissableLayerBranch",u4=f.forwardRef((t,e)=>{const r=f.useContext(S1),n=f.useRef(null),s=Ae(e,n);return f.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),a.jsx(be.div,{...t,ref:s})});u4.displayName=c4;function d4(t,e=globalThis==null?void 0:globalThis.document){const r=At(t),n=f.useRef(!1),s=f.useRef(()=>{});return f.useEffect(()=>{const o=l=>{if(l.target&&!n.current){let c=function(){N1(i4,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);n.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function h4(t,e=globalThis==null?void 0:globalThis.document){const r=At(t),n=f.useRef(!1);return f.useEffect(()=>{const s=o=>{o.target&&!n.current&&N1(l4,r,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function r0(){const t=new CustomEvent(Bp);document.dispatchEvent(t)}function N1(t,e,r,{discrete:n}){const s=r.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?n1(s,o):s.dispatchEvent(o)}var qf=0;function jh(){f.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??n0()),document.body.insertAdjacentElement("beforeend",t[1]??n0()),qf++,()=>{qf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),qf--}},[])}function n0(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Kf="focusScope.autoFocusOnMount",Gf="focusScope.autoFocusOnUnmount",s0={bubbles:!1,cancelable:!0},f4="FocusScope",Rc=f.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...i}=t,[l,c]=f.useState(null),u=At(s),d=At(o),h=f.useRef(null),m=Ae(e,g=>c(g)),p=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(n){let g=function(_){if(p.paused||!l)return;const b=_.target;l.contains(b)?h.current=b:Os(h.current,{select:!0})},w=function(_){if(p.paused||!l)return;const b=_.relatedTarget;b!==null&&(l.contains(b)||Os(h.current,{select:!0}))},y=function(_){if(document.activeElement===document.body)for(const j of _)j.removedNodes.length>0&&Os(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const x=new MutationObserver(y);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),x.disconnect()}}},[n,l,p.paused]),f.useEffect(()=>{if(l){o0.add(p);const g=document.activeElement;if(!l.contains(g)){const y=new CustomEvent(Kf,s0);l.addEventListener(Kf,u),l.dispatchEvent(y),y.defaultPrevented||(m4(y4(k1(l)),{select:!0}),document.activeElement===g&&Os(l))}return()=>{l.removeEventListener(Kf,u),setTimeout(()=>{const y=new CustomEvent(Gf,s0);l.addEventListener(Gf,d),l.dispatchEvent(y),y.defaultPrevented||Os(g??document.body,{select:!0}),l.removeEventListener(Gf,d),o0.remove(p)},0)}}},[l,u,d,p]);const v=f.useCallback(g=>{if(!r&&!n||p.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,y=document.activeElement;if(w&&y){const x=g.currentTarget,[_,b]=p4(x);_&&b?!g.shiftKey&&y===b?(g.preventDefault(),r&&Os(_,{select:!0})):g.shiftKey&&y===_&&(g.preventDefault(),r&&Os(b,{select:!0})):y===x&&g.preventDefault()}},[r,n,p.paused]);return a.jsx(be.div,{tabIndex:-1,...i,ref:m,onKeyDown:v})});Rc.displayName=f4;function m4(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(Os(n,{select:e}),document.activeElement!==r)return}function p4(t){const e=k1(t),r=a0(e,t),n=a0(e.reverse(),t);return[r,n]}function k1(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function a0(t,e){for(const r of t)if(!g4(r,{upTo:e}))return r}function g4(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function v4(t){return t instanceof HTMLInputElement&&"select"in t}function Os(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&v4(t)&&e&&t.select()}}var o0=x4();function x4(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=i0(t,e),t.unshift(e)},remove(e){var r;t=i0(t,e),(r=t[0])==null||r.resume()}}}function i0(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function y4(t){return t.filter(e=>e.tagName!=="A")}var w4=ig[" useId ".trim().toString()]||(()=>{}),_4=0;function vn(t){const[e,r]=f.useState(w4());return Et(()=>{r(n=>n??String(_4++))},[t]),e?`radix-${e}`:""}const b4=["top","right","bottom","left"],da=Math.min,kr=Math.max,Bd=Math.round,Eu=Math.floor,Bn=t=>({x:t,y:t}),j4={left:"right",right:"left",bottom:"top",top:"bottom"},S4={start:"end",end:"start"};function zp(t,e,r){return kr(t,da(e,r))}function ds(t,e){return typeof t=="function"?t(e):t}function hs(t){return t.split("-")[0]}function Ki(t){return t.split("-")[1]}function Cv(t){return t==="x"?"y":"x"}function Ev(t){return t==="y"?"height":"width"}const N4=new Set(["top","bottom"]);function Ln(t){return N4.has(hs(t))?"y":"x"}function Pv(t){return Cv(Ln(t))}function k4(t,e,r){r===void 0&&(r=!1);const n=Ki(t),s=Pv(t),o=Ev(s);let i=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(i=zd(i)),[i,zd(i)]}function C4(t){const e=zd(t);return[Wp(t),e,Wp(e)]}function Wp(t){return t.replace(/start|end/g,e=>S4[e])}const l0=["left","right"],c0=["right","left"],E4=["top","bottom"],P4=["bottom","top"];function T4(t,e,r){switch(t){case"top":case"bottom":return r?e?c0:l0:e?l0:c0;case"left":case"right":return e?E4:P4;default:return[]}}function R4(t,e,r,n){const s=Ki(t);let o=T4(hs(t),r==="start",n);return s&&(o=o.map(i=>i+"-"+s),e&&(o=o.concat(o.map(Wp)))),o}function zd(t){return t.replace(/left|right|bottom|top/g,e=>j4[e])}function O4(t){return{top:0,right:0,bottom:0,left:0,...t}}function C1(t){return typeof t!="number"?O4(t):{top:t,right:t,bottom:t,left:t}}function Wd(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function u0(t,e,r){let{reference:n,floating:s}=t;const o=Ln(e),i=Pv(e),l=Ev(i),c=hs(e),u=o==="y",d=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,m=n[l]/2-s[l]/2;let p;switch(c){case"top":p={x:d,y:n.y-s.height};break;case"bottom":p={x:d,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:h};break;case"left":p={x:n.x-s.width,y:h};break;default:p={x:n.x,y:n.y}}switch(Ki(e)){case"start":p[i]-=m*(r&&u?-1:1);break;case"end":p[i]+=m*(r&&u?-1:1);break}return p}const D4=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:i}=r,l=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(e));let u=await i.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=u0(u,n,c),m=n,p={},v=0;for(let g=0;g<l.length;g++){const{name:w,fn:y}=l[g],{x,y:_,data:b,reset:j}=await y({x:d,y:h,initialPlacement:n,placement:m,strategy:s,middlewareData:p,rects:u,platform:i,elements:{reference:t,floating:e}});d=x??d,h=_??h,p={...p,[w]:{...p[w],...b}},j&&v<=50&&(v++,typeof j=="object"&&(j.placement&&(m=j.placement),j.rects&&(u=j.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:s}):j.rects),{x:d,y:h}=u0(u,m,c)),g=-1)}return{x:d,y:h,placement:m,strategy:s,middlewareData:p}};async function dc(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:o,rects:i,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:p=0}=ds(e,t),v=C1(p),w=l[m?h==="floating"?"reference":"floating":h],y=Wd(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(w)))==null||r?w:w.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),x=h==="floating"?{x:n,y:s,width:i.floating.width,height:i.floating.height}:i.reference,_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),b=await(o.isElement==null?void 0:o.isElement(_))?await(o.getScale==null?void 0:o.getScale(_))||{x:1,y:1}:{x:1,y:1},j=Wd(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:_,strategy:c}):x);return{top:(y.top-j.top+v.top)/b.y,bottom:(j.bottom-y.bottom+v.bottom)/b.y,left:(y.left-j.left+v.left)/b.x,right:(j.right-y.right+v.right)/b.x}}const A4=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:o,platform:i,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=ds(t,e)||{};if(u==null)return{};const h=C1(d),m={x:r,y:n},p=Pv(s),v=Ev(p),g=await i.getDimensions(u),w=p==="y",y=w?"top":"left",x=w?"bottom":"right",_=w?"clientHeight":"clientWidth",b=o.reference[v]+o.reference[p]-m[p]-o.floating[v],j=m[p]-o.reference[p],N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let k=N?N[_]:0;(!k||!await(i.isElement==null?void 0:i.isElement(N)))&&(k=l.floating[_]||o.floating[v]);const E=b/2-j/2,T=k/2-g[v]/2-1,P=da(h[y],T),z=da(h[x],T),B=P,Q=k-g[v]-z,R=k/2-g[v]/2+E,Y=zp(B,R,Q),M=!c.arrow&&Ki(s)!=null&&R!==Y&&o.reference[v]/2-(R<B?P:z)-g[v]/2<0,D=M?R<B?R-B:R-Q:0;return{[p]:m[p]+D,data:{[p]:Y,centerOffset:R-Y-D,...M&&{alignmentOffset:D}},reset:M}}}),M4=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:o,rects:i,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:g=!0,...w}=ds(t,e);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const y=hs(s),x=Ln(l),_=hs(l)===l,b=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=m||(_||!g?[zd(l)]:C4(l)),N=v!=="none";!m&&N&&j.push(...R4(l,g,v,b));const k=[l,...j],E=await dc(e,w),T=[];let P=((n=o.flip)==null?void 0:n.overflows)||[];if(d&&T.push(E[y]),h){const R=k4(s,i,b);T.push(E[R[0]],E[R[1]])}if(P=[...P,{placement:s,overflows:T}],!T.every(R=>R<=0)){var z,B;const R=(((z=o.flip)==null?void 0:z.index)||0)+1,Y=k[R];if(Y&&(!(h==="alignment"?x!==Ln(Y):!1)||P.every(C=>C.overflows[0]>0&&Ln(C.placement)===x)))return{data:{index:R,overflows:P},reset:{placement:Y}};let M=(B=P.filter(D=>D.overflows[0]<=0).sort((D,C)=>D.overflows[1]-C.overflows[1])[0])==null?void 0:B.placement;if(!M)switch(p){case"bestFit":{var Q;const D=(Q=P.filter(C=>{if(N){const L=Ln(C.placement);return L===x||L==="y"}return!0}).map(C=>[C.placement,C.overflows.filter(L=>L>0).reduce((L,I)=>L+I,0)]).sort((C,L)=>C[1]-L[1])[0])==null?void 0:Q[0];D&&(M=D);break}case"initialPlacement":M=l;break}if(s!==M)return{reset:{placement:M}}}return{}}}};function d0(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function h0(t){return b4.some(e=>t[e]>=0)}const I4=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...s}=ds(t,e);switch(n){case"referenceHidden":{const o=await dc(e,{...s,elementContext:"reference"}),i=d0(o,r.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:h0(i)}}}case"escaped":{const o=await dc(e,{...s,altBoundary:!0}),i=d0(o,r.floating);return{data:{escapedOffsets:i,escaped:h0(i)}}}default:return{}}}}},E1=new Set(["left","top"]);async function L4(t,e){const{placement:r,platform:n,elements:s}=t,o=await(n.isRTL==null?void 0:n.isRTL(s.floating)),i=hs(r),l=Ki(r),c=Ln(r)==="y",u=E1.has(i)?-1:1,d=o&&c?-1:1,h=ds(e,t);let{mainAxis:m,crossAxis:p,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(p=l==="end"?v*-1:v),c?{x:p*d,y:m*u}:{x:m*u,y:p*d}}const F4=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:o,placement:i,middlewareData:l}=e,c=await L4(e,t);return i===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:i}}}}},$4=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:w=>{let{x:y,y:x}=w;return{x:y,y:x}}},...c}=ds(t,e),u={x:r,y:n},d=await dc(e,c),h=Ln(hs(s)),m=Cv(h);let p=u[m],v=u[h];if(o){const w=m==="y"?"top":"left",y=m==="y"?"bottom":"right",x=p+d[w],_=p-d[y];p=zp(x,p,_)}if(i){const w=h==="y"?"top":"left",y=h==="y"?"bottom":"right",x=v+d[w],_=v-d[y];v=zp(x,v,_)}const g=l.fn({...e,[m]:p,[h]:v});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[m]:o,[h]:i}}}}}},U4=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:o,middlewareData:i}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ds(t,e),d={x:r,y:n},h=Ln(s),m=Cv(h);let p=d[m],v=d[h];const g=ds(l,e),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const _=m==="y"?"height":"width",b=o.reference[m]-o.floating[_]+w.mainAxis,j=o.reference[m]+o.reference[_]-w.mainAxis;p<b?p=b:p>j&&(p=j)}if(u){var y,x;const _=m==="y"?"width":"height",b=E1.has(hs(s)),j=o.reference[h]-o.floating[_]+(b&&((y=i.offset)==null?void 0:y[h])||0)+(b?0:w.crossAxis),N=o.reference[h]+o.reference[_]+(b?0:((x=i.offset)==null?void 0:x[h])||0)-(b?w.crossAxis:0);v<j?v=j:v>N&&(v=N)}return{[m]:p,[h]:v}}}},B4=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:o,platform:i,elements:l}=e,{apply:c=()=>{},...u}=ds(t,e),d=await dc(e,u),h=hs(s),m=Ki(s),p=Ln(s)==="y",{width:v,height:g}=o.floating;let w,y;h==="top"||h==="bottom"?(w=h,y=m===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(y=h,w=m==="end"?"top":"bottom");const x=g-d.top-d.bottom,_=v-d.left-d.right,b=da(g-d[w],x),j=da(v-d[y],_),N=!e.middlewareData.shift;let k=b,E=j;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(E=_),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(k=x),N&&!m){const P=kr(d.left,0),z=kr(d.right,0),B=kr(d.top,0),Q=kr(d.bottom,0);p?E=v-2*(P!==0||z!==0?P+z:kr(d.left,d.right)):k=g-2*(B!==0||Q!==0?B+Q:kr(d.top,d.bottom))}await c({...e,availableWidth:E,availableHeight:k});const T=await i.getDimensions(l.floating);return v!==T.width||g!==T.height?{reset:{rects:!0}}:{}}}};function Sh(){return typeof window<"u"}function Gi(t){return P1(t)?(t.nodeName||"").toLowerCase():"#document"}function Rr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Vn(t){var e;return(e=(P1(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function P1(t){return Sh()?t instanceof Node||t instanceof Rr(t).Node:!1}function _n(t){return Sh()?t instanceof Element||t instanceof Rr(t).Element:!1}function zn(t){return Sh()?t instanceof HTMLElement||t instanceof Rr(t).HTMLElement:!1}function f0(t){return!Sh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Rr(t).ShadowRoot}const z4=new Set(["inline","contents"]);function Oc(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=bn(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!z4.has(s)}const W4=new Set(["table","td","th"]);function V4(t){return W4.has(Gi(t))}const H4=[":popover-open",":modal"];function Nh(t){return H4.some(e=>{try{return t.matches(e)}catch{return!1}})}const q4=["transform","translate","scale","rotate","perspective"],K4=["transform","translate","scale","rotate","perspective","filter"],G4=["paint","layout","strict","content"];function Tv(t){const e=Rv(),r=_n(t)?bn(t):t;return q4.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||K4.some(n=>(r.willChange||"").includes(n))||G4.some(n=>(r.contain||"").includes(n))}function Y4(t){let e=ha(t);for(;zn(e)&&!Oi(e);){if(Tv(e))return e;if(Nh(e))return null;e=ha(e)}return null}function Rv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Q4=new Set(["html","body","#document"]);function Oi(t){return Q4.has(Gi(t))}function bn(t){return Rr(t).getComputedStyle(t)}function kh(t){return _n(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ha(t){if(Gi(t)==="html")return t;const e=t.assignedSlot||t.parentNode||f0(t)&&t.host||Vn(t);return f0(e)?e.host:e}function T1(t){const e=ha(t);return Oi(e)?t.ownerDocument?t.ownerDocument.body:t.body:zn(e)&&Oc(e)?e:T1(e)}function hc(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=T1(t),o=s===((n=t.ownerDocument)==null?void 0:n.body),i=Rr(s);if(o){const l=Vp(i);return e.concat(i,i.visualViewport||[],Oc(s)?s:[],l&&r?hc(l):[])}return e.concat(s,hc(s,[],r))}function Vp(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function R1(t){const e=bn(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=zn(t),o=s?t.offsetWidth:r,i=s?t.offsetHeight:n,l=Bd(r)!==o||Bd(n)!==i;return l&&(r=o,n=i),{width:r,height:n,$:l}}function Ov(t){return _n(t)?t:t.contextElement}function si(t){const e=Ov(t);if(!zn(e))return Bn(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:o}=R1(e);let i=(o?Bd(r.width):r.width)/n,l=(o?Bd(r.height):r.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const J4=Bn(0);function O1(t){const e=Rr(t);return!Rv()||!e.visualViewport?J4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function X4(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==Rr(t)?!1:e}function ao(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),o=Ov(t);let i=Bn(1);e&&(n?_n(n)&&(i=si(n)):i=si(t));const l=X4(o,r,n)?O1(o):Bn(0);let c=(s.left+l.x)/i.x,u=(s.top+l.y)/i.y,d=s.width/i.x,h=s.height/i.y;if(o){const m=Rr(o),p=n&&_n(n)?Rr(n):n;let v=m,g=Vp(v);for(;g&&n&&p!==v;){const w=si(g),y=g.getBoundingClientRect(),x=bn(g),_=y.left+(g.clientLeft+parseFloat(x.paddingLeft))*w.x,b=y.top+(g.clientTop+parseFloat(x.paddingTop))*w.y;c*=w.x,u*=w.y,d*=w.x,h*=w.y,c+=_,u+=b,v=Rr(g),g=Vp(v)}}return Wd({width:d,height:h,x:c,y:u})}function Dv(t,e){const r=kh(t).scrollLeft;return e?e.left+r:ao(Vn(t)).left+r}function D1(t,e,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),s=n.left+e.scrollLeft-(r?0:Dv(t,n)),o=n.top+e.scrollTop;return{x:s,y:o}}function Z4(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const o=s==="fixed",i=Vn(n),l=e?Nh(e.floating):!1;if(n===i||l&&o)return r;let c={scrollLeft:0,scrollTop:0},u=Bn(1);const d=Bn(0),h=zn(n);if((h||!h&&!o)&&((Gi(n)!=="body"||Oc(i))&&(c=kh(n)),zn(n))){const p=ao(n);u=si(n),d.x=p.x+n.clientLeft,d.y=p.y+n.clientTop}const m=i&&!h&&!o?D1(i,c,!0):Bn(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+m.x,y:r.y*u.y-c.scrollTop*u.y+d.y+m.y}}function eF(t){return Array.from(t.getClientRects())}function tF(t){const e=Vn(t),r=kh(t),n=t.ownerDocument.body,s=kr(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),o=kr(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+Dv(t);const l=-r.scrollTop;return bn(n).direction==="rtl"&&(i+=kr(e.clientWidth,n.clientWidth)-s),{width:s,height:o,x:i,y:l}}function rF(t,e){const r=Rr(t),n=Vn(t),s=r.visualViewport;let o=n.clientWidth,i=n.clientHeight,l=0,c=0;if(s){o=s.width,i=s.height;const u=Rv();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:o,height:i,x:l,y:c}}const nF=new Set(["absolute","fixed"]);function sF(t,e){const r=ao(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,o=zn(t)?si(t):Bn(1),i=t.clientWidth*o.x,l=t.clientHeight*o.y,c=s*o.x,u=n*o.y;return{width:i,height:l,x:c,y:u}}function m0(t,e,r){let n;if(e==="viewport")n=rF(t,r);else if(e==="document")n=tF(Vn(t));else if(_n(e))n=sF(e,r);else{const s=O1(t);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Wd(n)}function A1(t,e){const r=ha(t);return r===e||!_n(r)||Oi(r)?!1:bn(r).position==="fixed"||A1(r,e)}function aF(t,e){const r=e.get(t);if(r)return r;let n=hc(t,[],!1).filter(l=>_n(l)&&Gi(l)!=="body"),s=null;const o=bn(t).position==="fixed";let i=o?ha(t):t;for(;_n(i)&&!Oi(i);){const l=bn(i),c=Tv(i);!c&&l.position==="fixed"&&(s=null),(o?!c&&!s:!c&&l.position==="static"&&!!s&&nF.has(s.position)||Oc(i)&&!c&&A1(t,i))?n=n.filter(d=>d!==i):s=l,i=ha(i)}return e.set(t,n),n}function oF(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const i=[...r==="clippingAncestors"?Nh(e)?[]:aF(e,this._c):[].concat(r),n],l=i[0],c=i.reduce((u,d)=>{const h=m0(e,d,s);return u.top=kr(h.top,u.top),u.right=da(h.right,u.right),u.bottom=da(h.bottom,u.bottom),u.left=kr(h.left,u.left),u},m0(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function iF(t){const{width:e,height:r}=R1(t);return{width:e,height:r}}function lF(t,e,r){const n=zn(e),s=Vn(e),o=r==="fixed",i=ao(t,!0,o,e);let l={scrollLeft:0,scrollTop:0};const c=Bn(0);function u(){c.x=Dv(s)}if(n||!n&&!o)if((Gi(e)!=="body"||Oc(s))&&(l=kh(e)),n){const p=ao(e,!0,o,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&u();o&&!n&&s&&u();const d=s&&!n&&!o?D1(s,l):Bn(0),h=i.left+l.scrollLeft-c.x-d.x,m=i.top+l.scrollTop-c.y-d.y;return{x:h,y:m,width:i.width,height:i.height}}function Yf(t){return bn(t).position==="static"}function p0(t,e){if(!zn(t)||bn(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Vn(t)===r&&(r=r.ownerDocument.body),r}function M1(t,e){const r=Rr(t);if(Nh(t))return r;if(!zn(t)){let s=ha(t);for(;s&&!Oi(s);){if(_n(s)&&!Yf(s))return s;s=ha(s)}return r}let n=p0(t,e);for(;n&&V4(n)&&Yf(n);)n=p0(n,e);return n&&Oi(n)&&Yf(n)&&!Tv(n)?r:n||Y4(t)||r}const cF=async function(t){const e=this.getOffsetParent||M1,r=this.getDimensions,n=await r(t.floating);return{reference:lF(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function uF(t){return bn(t).direction==="rtl"}const dF={convertOffsetParentRelativeRectToViewportRelativeRect:Z4,getDocumentElement:Vn,getClippingRect:oF,getOffsetParent:M1,getElementRects:cF,getClientRects:eF,getDimensions:iF,getScale:si,isElement:_n,isRTL:uF};function I1(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function hF(t,e){let r=null,n;const s=Vn(t);function o(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const u=t.getBoundingClientRect(),{left:d,top:h,width:m,height:p}=u;if(l||e(),!m||!p)return;const v=Eu(h),g=Eu(s.clientWidth-(d+m)),w=Eu(s.clientHeight-(h+p)),y=Eu(d),_={rootMargin:-v+"px "+-g+"px "+-w+"px "+-y+"px",threshold:kr(0,da(1,c))||1};let b=!0;function j(N){const k=N[0].intersectionRatio;if(k!==c){if(!b)return i();k?i(!1,k):n=setTimeout(()=>{i(!1,1e-7)},1e3)}k===1&&!I1(u,t.getBoundingClientRect())&&i(),b=!1}try{r=new IntersectionObserver(j,{..._,root:s.ownerDocument})}catch{r=new IntersectionObserver(j,_)}r.observe(t)}return i(!0),o}function fF(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=Ov(t),d=s||o?[...u?hc(u):[],...hc(e)]:[];d.forEach(y=>{s&&y.addEventListener("scroll",r,{passive:!0}),o&&y.addEventListener("resize",r)});const h=u&&l?hF(u,r):null;let m=-1,p=null;i&&(p=new ResizeObserver(y=>{let[x]=y;x&&x.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(e)})),r()}),u&&!c&&p.observe(u),p.observe(e));let v,g=c?ao(t):null;c&&w();function w(){const y=ao(t);g&&!I1(g,y)&&r(),g=y,v=requestAnimationFrame(w)}return r(),()=>{var y;d.forEach(x=>{s&&x.removeEventListener("scroll",r),o&&x.removeEventListener("resize",r)}),h==null||h(),(y=p)==null||y.disconnect(),p=null,c&&cancelAnimationFrame(v)}}const mF=F4,pF=$4,gF=M4,vF=B4,xF=I4,g0=A4,yF=U4,wF=(t,e,r)=>{const n=new Map,s={platform:dF,...r},o={...s.platform,_c:n};return D4(t,e,{...s,platform:o})};var _F=typeof document<"u",bF=function(){},Yu=_F?f.useLayoutEffect:bF;function Vd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!Vd(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const o=s[n];if(!(o==="_owner"&&t.$$typeof)&&!Vd(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function L1(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function v0(t,e){const r=L1(t);return Math.round(e*r)/r}function Qf(t){const e=f.useRef(t);return Yu(()=>{e.current=t}),e}function jF(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,h]=f.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[m,p]=f.useState(n);Vd(m,n)||p(n);const[v,g]=f.useState(null),[w,y]=f.useState(null),x=f.useCallback(C=>{C!==N.current&&(N.current=C,g(C))},[]),_=f.useCallback(C=>{C!==k.current&&(k.current=C,y(C))},[]),b=o||v,j=i||w,N=f.useRef(null),k=f.useRef(null),E=f.useRef(d),T=c!=null,P=Qf(c),z=Qf(s),B=Qf(u),Q=f.useCallback(()=>{if(!N.current||!k.current)return;const C={placement:e,strategy:r,middleware:m};z.current&&(C.platform=z.current),wF(N.current,k.current,C).then(L=>{const I={...L,isPositioned:B.current!==!1};R.current&&!Vd(E.current,I)&&(E.current=I,Bi.flushSync(()=>{h(I)}))})},[m,e,r,z,B]);Yu(()=>{u===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,h(C=>({...C,isPositioned:!1})))},[u]);const R=f.useRef(!1);Yu(()=>(R.current=!0,()=>{R.current=!1}),[]),Yu(()=>{if(b&&(N.current=b),j&&(k.current=j),b&&j){if(P.current)return P.current(b,j,Q);Q()}},[b,j,Q,P,T]);const Y=f.useMemo(()=>({reference:N,floating:k,setReference:x,setFloating:_}),[x,_]),M=f.useMemo(()=>({reference:b,floating:j}),[b,j]),D=f.useMemo(()=>{const C={position:r,left:0,top:0};if(!M.floating)return C;const L=v0(M.floating,d.x),I=v0(M.floating,d.y);return l?{...C,transform:"translate("+L+"px, "+I+"px)",...L1(M.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:L,top:I}},[r,l,M.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:Q,refs:Y,elements:M,floatingStyles:D}),[d,Q,Y,M,D])}const SF=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:s}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?g0({element:n.current,padding:s}).fn(r):{}:n?g0({element:n,padding:s}).fn(r):{}}}},NF=(t,e)=>({...mF(t),options:[t,e]}),kF=(t,e)=>({...pF(t),options:[t,e]}),CF=(t,e)=>({...yF(t),options:[t,e]}),EF=(t,e)=>({...gF(t),options:[t,e]}),PF=(t,e)=>({...vF(t),options:[t,e]}),TF=(t,e)=>({...xF(t),options:[t,e]}),RF=(t,e)=>({...SF(t),options:[t,e]});var OF="Arrow",F1=f.forwardRef((t,e)=>{const{children:r,width:n=10,height:s=5,...o}=t;return a.jsx(be.svg,{...o,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});F1.displayName=OF;var DF=F1;function $1(t){const[e,r]=f.useState(void 0);return Et(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let i,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,l=u.blockSize}else i=t.offsetWidth,l=t.offsetHeight;r({width:i,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var Av="Popper",[U1,Yi]=jr(Av),[AF,B1]=U1(Av),z1=t=>{const{__scopePopper:e,children:r}=t,[n,s]=f.useState(null);return a.jsx(AF,{scope:e,anchor:n,onAnchorChange:s,children:r})};z1.displayName=Av;var W1="PopperAnchor",V1=f.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...s}=t,o=B1(W1,r),i=f.useRef(null),l=Ae(e,i);return f.useEffect(()=>{o.onAnchorChange((n==null?void 0:n.current)||i.current)}),n?null:a.jsx(be.div,{...s,ref:l})});V1.displayName=W1;var Mv="PopperContent",[MF,IF]=U1(Mv),H1=f.forwardRef((t,e)=>{var ae,ye,Ee,F,se,V;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:v,...g}=t,w=B1(Mv,r),[y,x]=f.useState(null),_=Ae(e,fe=>x(fe)),[b,j]=f.useState(null),N=$1(b),k=(N==null?void 0:N.width)??0,E=(N==null?void 0:N.height)??0,T=n+(o!=="center"?"-"+o:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},z=Array.isArray(u)?u:[u],B=z.length>0,Q={padding:P,boundary:z.filter(FF),altBoundary:B},{refs:R,floatingStyles:Y,placement:M,isPositioned:D,middlewareData:C}=jF({strategy:"fixed",placement:T,whileElementsMounted:(...fe)=>fF(...fe,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[NF({mainAxis:s+E,alignmentAxis:i}),c&&kF({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?CF():void 0,...Q}),c&&EF({...Q}),PF({...Q,apply:({elements:fe,rects:Re,availableWidth:Ke,availableHeight:et})=>{const{width:mt,height:Ut}=Re.reference,Gt=fe.floating.style;Gt.setProperty("--radix-popper-available-width",`${Ke}px`),Gt.setProperty("--radix-popper-available-height",`${et}px`),Gt.setProperty("--radix-popper-anchor-width",`${mt}px`),Gt.setProperty("--radix-popper-anchor-height",`${Ut}px`)}}),b&&RF({element:b,padding:l}),$F({arrowWidth:k,arrowHeight:E}),m&&TF({strategy:"referenceHidden",...Q})]}),[L,I]=G1(M),W=At(v);Et(()=>{D&&(W==null||W())},[D,W]);const K=(ae=C.arrow)==null?void 0:ae.x,te=(ye=C.arrow)==null?void 0:ye.y,O=((Ee=C.arrow)==null?void 0:Ee.centerOffset)!==0,[re,de]=f.useState();return Et(()=>{y&&de(window.getComputedStyle(y).zIndex)},[y]),a.jsx("div",{ref:R.setFloating,"data-radix-popper-content-wrapper":"",style:{...Y,transform:D?Y.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:re,"--radix-popper-transform-origin":[(F=C.transformOrigin)==null?void 0:F.x,(se=C.transformOrigin)==null?void 0:se.y].join(" "),...((V=C.hide)==null?void 0:V.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(MF,{scope:r,placedSide:L,onArrowChange:j,arrowX:K,arrowY:te,shouldHideArrow:O,children:a.jsx(be.div,{"data-side":L,"data-align":I,...g,ref:_,style:{...g.style,animation:D?void 0:"none"}})})})});H1.displayName=Mv;var q1="PopperArrow",LF={top:"bottom",right:"left",bottom:"top",left:"right"},K1=f.forwardRef(function(e,r){const{__scopePopper:n,...s}=e,o=IF(q1,n),i=LF[o.placedSide];return a.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:a.jsx(DF,{...s,ref:r,style:{...s.style,display:"block"}})})});K1.displayName=q1;function FF(t){return t!==null}var $F=t=>({name:"transformOrigin",options:t,fn(e){var w,y,x;const{placement:r,rects:n,middlewareData:s}=e,i=((w=s.arrow)==null?void 0:w.centerOffset)!==0,l=i?0:t.arrowWidth,c=i?0:t.arrowHeight,[u,d]=G1(r),h={start:"0%",center:"50%",end:"100%"}[d],m=(((y=s.arrow)==null?void 0:y.x)??0)+l/2,p=(((x=s.arrow)==null?void 0:x.y)??0)+c/2;let v="",g="";return u==="bottom"?(v=i?h:`${m}px`,g=`${-c}px`):u==="top"?(v=i?h:`${m}px`,g=`${n.floating.height+c}px`):u==="right"?(v=`${-c}px`,g=i?h:`${p}px`):u==="left"&&(v=`${n.floating.width+c}px`,g=i?h:`${p}px`),{data:{x:v,y:g}}}});function G1(t){const[e,r="center"]=t.split("-");return[e,r]}var Iv=z1,Ch=V1,Lv=H1,Fv=K1,UF="Portal",Dc=f.forwardRef((t,e)=>{var l;const{container:r,...n}=t,[s,o]=f.useState(!1);Et(()=>o(!0),[]);const i=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?ST.createPortal(a.jsx(be.div,{...n,ref:e}),i):null});Dc.displayName=UF;var BF=ig[" useInsertionEffect ".trim().toString()]||Et;function fa({prop:t,defaultProp:e,onChange:r=()=>{},caller:n}){const[s,o,i]=zF({defaultProp:e,onChange:r}),l=t!==void 0,c=l?t:s;{const d=f.useRef(t!==void 0);f.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=f.useCallback(d=>{var h;if(l){const m=WF(d)?d(t):d;m!==t&&((h=i.current)==null||h.call(i,m))}else o(d)},[l,t,o,i]);return[c,u]}function zF({defaultProp:t,onChange:e}){const[r,n]=f.useState(t),s=f.useRef(r),o=f.useRef(e);return BF(()=>{o.current=e},[e]),f.useEffect(()=>{var i;s.current!==r&&((i=o.current)==null||i.call(o,r),s.current=r)},[r,s]),[r,n,o]}function WF(t){return typeof t=="function"}function Y1(t){const e=f.useRef({value:t,previous:t});return f.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Q1=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),VF="VisuallyHidden",HF=f.forwardRef((t,e)=>a.jsx(be.span,{...t,ref:e,style:{...Q1,...t.style}}));HF.displayName=VF;var qF=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Co=new WeakMap,Pu=new WeakMap,Tu={},Jf=0,J1=function(t){return t&&(t.host||J1(t.parentNode))},KF=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=J1(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},GF=function(t,e,r,n){var s=KF(e,Array.isArray(t)?t:[t]);Tu[r]||(Tu[r]=new WeakMap);var o=Tu[r],i=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))d(m);else try{var p=m.getAttribute(n),v=p!==null&&p!=="false",g=(Co.get(m)||0)+1,w=(o.get(m)||0)+1;Co.set(m,g),o.set(m,w),i.push(m),g===1&&v&&Pu.set(m,!0),w===1&&m.setAttribute(r,"true"),v||m.setAttribute(n,"true")}catch(y){console.error("aria-hidden: cannot operate on ",m,y)}})};return d(e),l.clear(),Jf++,function(){i.forEach(function(h){var m=Co.get(h)-1,p=o.get(h)-1;Co.set(h,m),o.set(h,p),m||(Pu.has(h)||h.removeAttribute(n),Pu.delete(h)),p||h.removeAttribute(r)}),Jf--,Jf||(Co=new WeakMap,Co=new WeakMap,Pu=new WeakMap,Tu={})}},Eh=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),s=qF(t);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),GF(n,s,r,"aria-hidden")):function(){return null}},Qu="right-scroll-bar-position",Ju="width-before-scroll-bar",YF="with-scroll-bars-hidden",QF="--removed-body-scroll-bar-size";function Xf(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function JF(t,e){var r=f.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=e,r.facade}var XF=typeof window<"u"?f.useLayoutEffect:f.useEffect,x0=new WeakMap;function ZF(t,e){var r=JF(null,function(n){return t.forEach(function(s){return Xf(s,n)})});return XF(function(){var n=x0.get(r);if(n){var s=new Set(n),o=new Set(t),i=r.current;s.forEach(function(l){o.has(l)||Xf(l,null)}),o.forEach(function(l){s.has(l)||Xf(l,i)})}x0.set(r,t)},[t]),r}function e3(t){return t}function t3(t,e){e===void 0&&(e=e3);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(o){var i=e(o,n);return r.push(i),function(){r=r.filter(function(l){return l!==i})}},assignSyncMedium:function(o){for(n=!0;r.length;){var i=r;r=[],i.forEach(o)}r={push:function(l){return o(l)},filter:function(){return r}}},assignMedium:function(o){n=!0;var i=[];if(r.length){var l=r;r=[],l.forEach(o),i=r}var c=function(){var d=i;i=[],d.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){i.push(d),u()},filter:function(d){return i=i.filter(d),r}}}};return s}function r3(t){t===void 0&&(t={});var e=t3(null);return e.options=zr({async:!0,ssr:!1},t),e}var X1=function(t){var e=t.sideCar,r=ya(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return f.createElement(n,zr({},r))};X1.isSideCarExport=!0;function n3(t,e){return t.useMedium(e),X1}var Z1=r3(),Zf=function(){},Ph=f.forwardRef(function(t,e){var r=f.useRef(null),n=f.useState({onScrollCapture:Zf,onWheelCapture:Zf,onTouchMoveCapture:Zf}),s=n[0],o=n[1],i=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,m=t.sideCar,p=t.noRelative,v=t.noIsolation,g=t.inert,w=t.allowPinchZoom,y=t.as,x=y===void 0?"div":y,_=t.gapMode,b=ya(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=m,N=ZF([r,e]),k=zr(zr({},b),s);return f.createElement(f.Fragment,null,d&&f.createElement(j,{sideCar:Z1,removeScrollBar:u,shards:h,noRelative:p,noIsolation:v,inert:g,setCallbacks:o,allowPinchZoom:!!w,lockRef:r,gapMode:_}),i?f.cloneElement(f.Children.only(l),zr(zr({},k),{ref:N})):f.createElement(x,zr({},k,{className:c,ref:N}),l))});Ph.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ph.classNames={fullWidth:Ju,zeroRight:Qu};var s3=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function a3(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=s3();return e&&t.setAttribute("nonce",e),t}function o3(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function i3(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var l3=function(){var t=0,e=null;return{add:function(r){t==0&&(e=a3())&&(o3(e,r),i3(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},c3=function(){var t=l3();return function(e,r){f.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},eN=function(){var t=c3(),e=function(r){var n=r.styles,s=r.dynamic;return t(n,s),null};return e},u3={left:0,top:0,right:0,gap:0},em=function(t){return parseInt(t||"",10)||0},d3=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[em(r),em(n),em(s)]},h3=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return u3;var e=d3(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},f3=eN(),ai="data-scroll-locked",m3=function(t,e,r,n){var s=t.left,o=t.top,i=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(YF,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(ai,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Qu,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Ju,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Qu," .").concat(Qu,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Ju," .").concat(Ju,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(ai,`] {
    `).concat(QF,": ").concat(l,`px;
  }
`)},y0=function(){var t=parseInt(document.body.getAttribute(ai)||"0",10);return isFinite(t)?t:0},p3=function(){f.useEffect(function(){return document.body.setAttribute(ai,(y0()+1).toString()),function(){var t=y0()-1;t<=0?document.body.removeAttribute(ai):document.body.setAttribute(ai,t.toString())}},[])},g3=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,s=n===void 0?"margin":n;p3();var o=f.useMemo(function(){return h3(s)},[s]);return f.createElement(f3,{styles:m3(o,!e,s,r?"":"!important")})},Hp=!1;if(typeof window<"u")try{var Ru=Object.defineProperty({},"passive",{get:function(){return Hp=!0,!0}});window.addEventListener("test",Ru,Ru),window.removeEventListener("test",Ru,Ru)}catch{Hp=!1}var Eo=Hp?{passive:!1}:!1,v3=function(t){return t.tagName==="TEXTAREA"},tN=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!v3(t)&&r[e]==="visible")},x3=function(t){return tN(t,"overflowY")},y3=function(t){return tN(t,"overflowX")},w0=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=rN(t,n);if(s){var o=nN(t,n),i=o[1],l=o[2];if(i>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},w3=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},_3=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},rN=function(t,e){return t==="v"?x3(e):y3(e)},nN=function(t,e){return t==="v"?w3(e):_3(e)},b3=function(t,e){return t==="h"&&e==="rtl"?-1:1},j3=function(t,e,r,n,s){var o=b3(t,window.getComputedStyle(e).direction),i=o*n,l=r.target,c=e.contains(l),u=!1,d=i>0,h=0,m=0;do{if(!l)break;var p=nN(t,l),v=p[0],g=p[1],w=p[2],y=g-w-o*v;(v||y)&&rN(t,l)&&(h+=y,m+=v);var x=l.parentNode;l=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(m)<1||!s))&&(u=!0),u},Ou=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},_0=function(t){return[t.deltaX,t.deltaY]},b0=function(t){return t&&"current"in t?t.current:t},S3=function(t,e){return t[0]===e[0]&&t[1]===e[1]},N3=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},k3=0,Po=[];function C3(t){var e=f.useRef([]),r=f.useRef([0,0]),n=f.useRef(),s=f.useState(k3++)[0],o=f.useState(eN)[0],i=f.useRef(t);f.useEffect(function(){i.current=t},[t]),f.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var g=lv([t.lockRef.current],(t.shards||[]).map(b0),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=f.useCallback(function(g,w){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!i.current.allowPinchZoom;var y=Ou(g),x=r.current,_="deltaX"in g?g.deltaX:x[0]-y[0],b="deltaY"in g?g.deltaY:x[1]-y[1],j,N=g.target,k=Math.abs(_)>Math.abs(b)?"h":"v";if("touches"in g&&k==="h"&&N.type==="range")return!1;var E=w0(k,N);if(!E)return!0;if(E?j=k:(j=k==="v"?"h":"v",E=w0(k,N)),!E)return!1;if(!n.current&&"changedTouches"in g&&(_||b)&&(n.current=j),!j)return!0;var T=n.current||j;return j3(T,w,g,T==="h"?_:b,!0)},[]),c=f.useCallback(function(g){var w=g;if(!(!Po.length||Po[Po.length-1]!==o)){var y="deltaY"in w?_0(w):Ou(w),x=e.current.filter(function(j){return j.name===w.type&&(j.target===w.target||w.target===j.shadowParent)&&S3(j.delta,y)})[0];if(x&&x.should){w.cancelable&&w.preventDefault();return}if(!x){var _=(i.current.shards||[]).map(b0).filter(Boolean).filter(function(j){return j.contains(w.target)}),b=_.length>0?l(w,_[0]):!i.current.noIsolation;b&&w.cancelable&&w.preventDefault()}}},[]),u=f.useCallback(function(g,w,y,x){var _={name:g,delta:w,target:y,should:x,shadowParent:E3(y)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(b){return b!==_})},1)},[]),d=f.useCallback(function(g){r.current=Ou(g),n.current=void 0},[]),h=f.useCallback(function(g){u(g.type,_0(g),g.target,l(g,t.lockRef.current))},[]),m=f.useCallback(function(g){u(g.type,Ou(g),g.target,l(g,t.lockRef.current))},[]);f.useEffect(function(){return Po.push(o),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Eo),document.addEventListener("touchmove",c,Eo),document.addEventListener("touchstart",d,Eo),function(){Po=Po.filter(function(g){return g!==o}),document.removeEventListener("wheel",c,Eo),document.removeEventListener("touchmove",c,Eo),document.removeEventListener("touchstart",d,Eo)}},[]);var p=t.removeScrollBar,v=t.inert;return f.createElement(f.Fragment,null,v?f.createElement(o,{styles:N3(s)}):null,p?f.createElement(g3,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function E3(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const P3=n3(Z1,C3);var Ac=f.forwardRef(function(t,e){return f.createElement(Ph,zr({},t,{ref:e,sideCar:P3}))});Ac.classNames=Ph.classNames;var T3=[" ","Enter","ArrowUp","ArrowDown"],R3=[" ","Enter"],oo="Select",[Th,Rh,O3]=kv(oo),[Qi,jW]=jr(oo,[O3,Yi]),Oh=Yi(),[D3,ja]=Qi(oo),[A3,M3]=Qi(oo),sN=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:s,onOpenChange:o,value:i,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:m,required:p,form:v}=t,g=Oh(e),[w,y]=f.useState(null),[x,_]=f.useState(null),[b,j]=f.useState(!1),N=Pc(u),[k,E]=fa({prop:n,defaultProp:s??!1,onChange:o,caller:oo}),[T,P]=fa({prop:i,defaultProp:l,onChange:c,caller:oo}),z=f.useRef(null),B=w?v||!!w.closest("form"):!0,[Q,R]=f.useState(new Set),Y=Array.from(Q).map(M=>M.props.value).join(";");return a.jsx(Iv,{...g,children:a.jsxs(D3,{required:p,scope:e,trigger:w,onTriggerChange:y,valueNode:x,onValueNodeChange:_,valueNodeHasChildren:b,onValueNodeHasChildrenChange:j,contentId:vn(),value:T,onValueChange:P,open:k,onOpenChange:E,dir:N,triggerPointerDownPosRef:z,disabled:m,children:[a.jsx(Th.Provider,{scope:e,children:a.jsx(A3,{scope:t.__scopeSelect,onNativeOptionAdd:f.useCallback(M=>{R(D=>new Set(D).add(M))},[]),onNativeOptionRemove:f.useCallback(M=>{R(D=>{const C=new Set(D);return C.delete(M),C})},[]),children:r})}),B?a.jsxs(EN,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:h,value:T,onChange:M=>P(M.target.value),disabled:m,form:v,children:[T===void 0?a.jsx("option",{value:""}):null,Array.from(Q)]},Y):null]})})};sN.displayName=oo;var aN="SelectTrigger",oN=f.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...s}=t,o=Oh(r),i=ja(aN,r),l=i.disabled||n,c=Ae(e,i.onTriggerChange),u=Rh(r),d=f.useRef("touch"),[h,m,p]=TN(g=>{const w=u().filter(_=>!_.disabled),y=w.find(_=>_.value===i.value),x=RN(w,g,y);x!==void 0&&i.onValueChange(x.value)}),v=g=>{l||(i.onOpenChange(!0),p()),g&&(i.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return a.jsx(Ch,{asChild:!0,...o,children:a.jsx(be.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":PN(i.value)?"":void 0,...s,ref:c,onClick:ue(s.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&v(g)}),onPointerDown:ue(s.onPointerDown,g=>{d.current=g.pointerType;const w=g.target;w.hasPointerCapture(g.pointerId)&&w.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(v(g),g.preventDefault())}),onKeyDown:ue(s.onKeyDown,g=>{const w=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&m(g.key),!(w&&g.key===" ")&&T3.includes(g.key)&&(v(),g.preventDefault())})})})});oN.displayName=aN;var iN="SelectValue",lN=f.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,children:o,placeholder:i="",...l}=t,c=ja(iN,r),{onValueNodeHasChildrenChange:u}=c,d=o!==void 0,h=Ae(e,c.onValueNodeChange);return Et(()=>{u(d)},[u,d]),a.jsx(be.span,{...l,ref:h,style:{pointerEvents:"none"},children:PN(c.value)?a.jsx(a.Fragment,{children:i}):o})});lN.displayName=iN;var I3="SelectIcon",cN=f.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...s}=t;return a.jsx(be.span,{"aria-hidden":!0,...s,ref:e,children:n||""})});cN.displayName=I3;var L3="SelectPortal",uN=t=>a.jsx(Dc,{asChild:!0,...t});uN.displayName=L3;var io="SelectContent",dN=f.forwardRef((t,e)=>{const r=ja(io,t.__scopeSelect),[n,s]=f.useState();if(Et(()=>{s(new DocumentFragment)},[]),!r.open){const o=n;return o?Bi.createPortal(a.jsx(hN,{scope:t.__scopeSelect,children:a.jsx(Th.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),o):null}return a.jsx(fN,{...t,ref:e})});dN.displayName=io;var sn=10,[hN,Sa]=Qi(io),F3="SelectContentImpl",$3=ua("SelectContent.RemoveScroll"),fN=f.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:v,hideWhenDetached:g,avoidCollisions:w,...y}=t,x=ja(io,r),[_,b]=f.useState(null),[j,N]=f.useState(null),k=Ae(e,ae=>b(ae)),[E,T]=f.useState(null),[P,z]=f.useState(null),B=Rh(r),[Q,R]=f.useState(!1),Y=f.useRef(!1);f.useEffect(()=>{if(_)return Eh(_)},[_]),jh();const M=f.useCallback(ae=>{const[ye,...Ee]=B().map(V=>V.ref.current),[F]=Ee.slice(-1),se=document.activeElement;for(const V of ae)if(V===se||(V==null||V.scrollIntoView({block:"nearest"}),V===ye&&j&&(j.scrollTop=0),V===F&&j&&(j.scrollTop=j.scrollHeight),V==null||V.focus(),document.activeElement!==se))return},[B,j]),D=f.useCallback(()=>M([E,_]),[M,E,_]);f.useEffect(()=>{Q&&D()},[Q,D]);const{onOpenChange:C,triggerPointerDownPosRef:L}=x;f.useEffect(()=>{if(_){let ae={x:0,y:0};const ye=F=>{var se,V;ae={x:Math.abs(Math.round(F.pageX)-(((se=L.current)==null?void 0:se.x)??0)),y:Math.abs(Math.round(F.pageY)-(((V=L.current)==null?void 0:V.y)??0))}},Ee=F=>{ae.x<=10&&ae.y<=10?F.preventDefault():_.contains(F.target)||C(!1),document.removeEventListener("pointermove",ye),L.current=null};return L.current!==null&&(document.addEventListener("pointermove",ye),document.addEventListener("pointerup",Ee,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ye),document.removeEventListener("pointerup",Ee,{capture:!0})}}},[_,C,L]),f.useEffect(()=>{const ae=()=>C(!1);return window.addEventListener("blur",ae),window.addEventListener("resize",ae),()=>{window.removeEventListener("blur",ae),window.removeEventListener("resize",ae)}},[C]);const[I,W]=TN(ae=>{const ye=B().filter(se=>!se.disabled),Ee=ye.find(se=>se.ref.current===document.activeElement),F=RN(ye,ae,Ee);F&&setTimeout(()=>F.ref.current.focus())}),K=f.useCallback((ae,ye,Ee)=>{const F=!Y.current&&!Ee;(x.value!==void 0&&x.value===ye||F)&&(T(ae),F&&(Y.current=!0))},[x.value]),te=f.useCallback(()=>_==null?void 0:_.focus(),[_]),O=f.useCallback((ae,ye,Ee)=>{const F=!Y.current&&!Ee;(x.value!==void 0&&x.value===ye||F)&&z(ae)},[x.value]),re=n==="popper"?qp:mN,de=re===qp?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:v,hideWhenDetached:g,avoidCollisions:w}:{};return a.jsx(hN,{scope:r,content:_,viewport:j,onViewportChange:N,itemRefCallback:K,selectedItem:E,onItemLeave:te,itemTextRefCallback:O,focusSelectedItem:D,selectedItemText:P,position:n,isPositioned:Q,searchRef:I,children:a.jsx(Ac,{as:$3,allowPinchZoom:!0,children:a.jsx(Rc,{asChild:!0,trapped:x.open,onMountAutoFocus:ae=>{ae.preventDefault()},onUnmountAutoFocus:ue(s,ae=>{var ye;(ye=x.trigger)==null||ye.focus({preventScroll:!0}),ae.preventDefault()}),children:a.jsx(Tc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:ae=>ae.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:a.jsx(re,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:ae=>ae.preventDefault(),...y,...de,onPlaced:()=>R(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:ue(y.onKeyDown,ae=>{const ye=ae.ctrlKey||ae.altKey||ae.metaKey;if(ae.key==="Tab"&&ae.preventDefault(),!ye&&ae.key.length===1&&W(ae.key),["ArrowUp","ArrowDown","Home","End"].includes(ae.key)){let F=B().filter(se=>!se.disabled).map(se=>se.ref.current);if(["ArrowUp","End"].includes(ae.key)&&(F=F.slice().reverse()),["ArrowUp","ArrowDown"].includes(ae.key)){const se=ae.target,V=F.indexOf(se);F=F.slice(V+1)}setTimeout(()=>M(F)),ae.preventDefault()}})})})})})})});fN.displayName=F3;var U3="SelectItemAlignedPosition",mN=f.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...s}=t,o=ja(io,r),i=Sa(io,r),[l,c]=f.useState(null),[u,d]=f.useState(null),h=Ae(e,k=>d(k)),m=Rh(r),p=f.useRef(!1),v=f.useRef(!0),{viewport:g,selectedItem:w,selectedItemText:y,focusSelectedItem:x}=i,_=f.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&u&&g&&w&&y){const k=o.trigger.getBoundingClientRect(),E=u.getBoundingClientRect(),T=o.valueNode.getBoundingClientRect(),P=y.getBoundingClientRect();if(o.dir!=="rtl"){const se=P.left-E.left,V=T.left-se,fe=k.left-V,Re=k.width+fe,Ke=Math.max(Re,E.width),et=window.innerWidth-sn,mt=Up(V,[sn,Math.max(sn,et-Ke)]);l.style.minWidth=Re+"px",l.style.left=mt+"px"}else{const se=E.right-P.right,V=window.innerWidth-T.right-se,fe=window.innerWidth-k.right-V,Re=k.width+fe,Ke=Math.max(Re,E.width),et=window.innerWidth-sn,mt=Up(V,[sn,Math.max(sn,et-Ke)]);l.style.minWidth=Re+"px",l.style.right=mt+"px"}const z=m(),B=window.innerHeight-sn*2,Q=g.scrollHeight,R=window.getComputedStyle(u),Y=parseInt(R.borderTopWidth,10),M=parseInt(R.paddingTop,10),D=parseInt(R.borderBottomWidth,10),C=parseInt(R.paddingBottom,10),L=Y+M+Q+C+D,I=Math.min(w.offsetHeight*5,L),W=window.getComputedStyle(g),K=parseInt(W.paddingTop,10),te=parseInt(W.paddingBottom,10),O=k.top+k.height/2-sn,re=B-O,de=w.offsetHeight/2,ae=w.offsetTop+de,ye=Y+M+ae,Ee=L-ye;if(ye<=O){const se=z.length>0&&w===z[z.length-1].ref.current;l.style.bottom="0px";const V=u.clientHeight-g.offsetTop-g.offsetHeight,fe=Math.max(re,de+(se?te:0)+V+D),Re=ye+fe;l.style.height=Re+"px"}else{const se=z.length>0&&w===z[0].ref.current;l.style.top="0px";const fe=Math.max(O,Y+g.offsetTop+(se?K:0)+de)+Ee;l.style.height=fe+"px",g.scrollTop=ye-O+g.offsetTop}l.style.margin=`${sn}px 0`,l.style.minHeight=I+"px",l.style.maxHeight=B+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[m,o.trigger,o.valueNode,l,u,g,w,y,o.dir,n]);Et(()=>_(),[_]);const[b,j]=f.useState();Et(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const N=f.useCallback(k=>{k&&v.current===!0&&(_(),x==null||x(),v.current=!1)},[_,x]);return a.jsx(z3,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:N,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:a.jsx(be.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});mN.displayName=U3;var B3="SelectPopperPosition",qp=f.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=sn,...o}=t,i=Oh(r);return a.jsx(Lv,{...i,...o,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});qp.displayName=B3;var[z3,$v]=Qi(io,{}),Kp="SelectViewport",pN=f.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...s}=t,o=Sa(Kp,r),i=$v(Kp,r),l=Ae(e,o.onViewportChange),c=f.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),a.jsx(Th.Slot,{scope:r,children:a.jsx(be.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ue(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=i;if(m!=null&&m.current&&h){const p=Math.abs(c.current-d.scrollTop);if(p>0){const v=window.innerHeight-sn*2,g=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),y=Math.max(g,w);if(y<v){const x=y+p,_=Math.min(v,x),b=x-_;h.style.height=_+"px",h.style.bottom==="0px"&&(d.scrollTop=b>0?b:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});pN.displayName=Kp;var gN="SelectGroup",[W3,V3]=Qi(gN),H3=f.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=vn();return a.jsx(W3,{scope:r,id:s,children:a.jsx(be.div,{role:"group","aria-labelledby":s,...n,ref:e})})});H3.displayName=gN;var vN="SelectLabel",xN=f.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=V3(vN,r);return a.jsx(be.div,{id:s.id,...n,ref:e})});xN.displayName=vN;var Hd="SelectItem",[q3,yN]=Qi(Hd),wN=f.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:o,...i}=t,l=ja(Hd,r),c=Sa(Hd,r),u=l.value===n,[d,h]=f.useState(o??""),[m,p]=f.useState(!1),v=Ae(e,x=>{var _;return(_=c.itemRefCallback)==null?void 0:_.call(c,x,n,s)}),g=vn(),w=f.useRef("touch"),y=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(q3,{scope:r,value:n,disabled:s,textId:g,isSelected:u,onItemTextChange:f.useCallback(x=>{h(_=>_||((x==null?void 0:x.textContent)??"").trim())},[]),children:a.jsx(Th.ItemSlot,{scope:r,value:n,disabled:s,textValue:d,children:a.jsx(be.div,{role:"option","aria-labelledby":g,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:v,onFocus:ue(i.onFocus,()=>p(!0)),onBlur:ue(i.onBlur,()=>p(!1)),onClick:ue(i.onClick,()=>{w.current!=="mouse"&&y()}),onPointerUp:ue(i.onPointerUp,()=>{w.current==="mouse"&&y()}),onPointerDown:ue(i.onPointerDown,x=>{w.current=x.pointerType}),onPointerMove:ue(i.onPointerMove,x=>{var _;w.current=x.pointerType,s?(_=c.onItemLeave)==null||_.call(c):w.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ue(i.onPointerLeave,x=>{var _;x.currentTarget===document.activeElement&&((_=c.onItemLeave)==null||_.call(c))}),onKeyDown:ue(i.onKeyDown,x=>{var b;((b=c.searchRef)==null?void 0:b.current)!==""&&x.key===" "||(R3.includes(x.key)&&y(),x.key===" "&&x.preventDefault())})})})})});wN.displayName=Hd;var xl="SelectItemText",_N=f.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,...o}=t,i=ja(xl,r),l=Sa(xl,r),c=yN(xl,r),u=M3(xl,r),[d,h]=f.useState(null),m=Ae(e,y=>h(y),c.onItemTextChange,y=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,y,c.value,c.disabled)}),p=d==null?void 0:d.textContent,v=f.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:w}=u;return Et(()=>(g(v),()=>w(v)),[g,w,v]),a.jsxs(a.Fragment,{children:[a.jsx(be.span,{id:c.textId,...o,ref:m}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Bi.createPortal(o.children,i.valueNode):null]})});_N.displayName=xl;var bN="SelectItemIndicator",jN=f.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return yN(bN,r).isSelected?a.jsx(be.span,{"aria-hidden":!0,...n,ref:e}):null});jN.displayName=bN;var Gp="SelectScrollUpButton",SN=f.forwardRef((t,e)=>{const r=Sa(Gp,t.__scopeSelect),n=$v(Gp,t.__scopeSelect),[s,o]=f.useState(!1),i=Ae(e,n.onScrollButtonChange);return Et(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;o(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?a.jsx(kN,{...t,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});SN.displayName=Gp;var Yp="SelectScrollDownButton",NN=f.forwardRef((t,e)=>{const r=Sa(Yp,t.__scopeSelect),n=$v(Yp,t.__scopeSelect),[s,o]=f.useState(!1),i=Ae(e,n.onScrollButtonChange);return Et(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;o(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?a.jsx(kN,{...t,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});NN.displayName=Yp;var kN=f.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=t,o=Sa("SelectScrollButton",r),i=f.useRef(null),l=Rh(r),c=f.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return f.useEffect(()=>()=>c(),[c]),Et(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),a.jsx(be.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:ue(s.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(n,50))}),onPointerMove:ue(s.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),i.current===null&&(i.current=window.setInterval(n,50))}),onPointerLeave:ue(s.onPointerLeave,()=>{c()})})}),K3="SelectSeparator",CN=f.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return a.jsx(be.div,{"aria-hidden":!0,...n,ref:e})});CN.displayName=K3;var Qp="SelectArrow",G3=f.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=Oh(r),o=ja(Qp,r),i=Sa(Qp,r);return o.open&&i.position==="popper"?a.jsx(Fv,{...s,...n,ref:e}):null});G3.displayName=Qp;var Y3="SelectBubbleInput",EN=f.forwardRef(({__scopeSelect:t,value:e,...r},n)=>{const s=f.useRef(null),o=Ae(n,s),i=Y1(e);return f.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==e&&d){const h=new Event("change",{bubbles:!0});d.call(l,e),l.dispatchEvent(h)}},[i,e]),a.jsx(be.select,{...r,style:{...Q1,...r.style},ref:o,defaultValue:e})});EN.displayName=Y3;function PN(t){return t===""||t===void 0}function TN(t){const e=At(t),r=f.useRef(""),n=f.useRef(0),s=f.useCallback(i=>{const l=r.current+i;e(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),o=f.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,o]}function RN(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,o=r?t.indexOf(r):-1;let i=Q3(t,Math.max(o,0));s.length===1&&(i=i.filter(u=>u!==r));const c=i.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function Q3(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var J3=sN,ON=oN,X3=lN,Z3=cN,e$=uN,DN=dN,t$=pN,AN=xN,MN=wN,r$=_N,n$=jN,IN=SN,LN=NN,FN=CN;const We=J3,Ve=X3,Fe=f.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(ON,{ref:n,className:Z("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,a.jsx(Z3,{asChild:!0,children:a.jsx(c1,{className:"h-4 w-4 opacity-50"})})]}));Fe.displayName=ON.displayName;const $N=f.forwardRef(({className:t,...e},r)=>a.jsx(IN,{ref:r,className:Z("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(_L,{className:"h-4 w-4"})}));$N.displayName=IN.displayName;const UN=f.forwardRef(({className:t,...e},r)=>a.jsx(LN,{ref:r,className:Z("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(c1,{className:"h-4 w-4"})}));UN.displayName=LN.displayName;const $e=f.forwardRef(({className:t,children:e,position:r="popper",...n},s)=>a.jsx(e$,{children:a.jsxs(DN,{ref:s,className:Z("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[a.jsx($N,{}),a.jsx(t$,{className:Z("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(UN,{})]})}));$e.displayName=DN.displayName;const s$=f.forwardRef(({className:t,...e},r)=>a.jsx(AN,{ref:r,className:Z("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));s$.displayName=AN.displayName;const oe=f.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(MN,{ref:n,className:Z("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(n$,{children:a.jsx(l1,{className:"h-4 w-4"})})}),a.jsx(r$,{children:e})]}));oe.displayName=MN.displayName;const a$=f.forwardRef(({className:t,...e},r)=>a.jsx(FN,{ref:r,className:Z("-mx-1 my-1 h-px bg-muted",t),...e}));a$.displayName=FN.displayName;const BN=()=>{const{currentLanguage:t,changeLanguage:e,languages:r}=_a(),n=r.find(s=>s.code===t);return a.jsxs(We,{value:t,onValueChange:e,children:[a.jsx(Fe,{className:"w-[140px]",children:a.jsx(Ve,{children:a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{children:n==null?void 0:n.name})})})}),a.jsx($e,{children:r.map(s=>a.jsx(oe,{value:s.code,children:a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{children:s.name})})},s.code))})]})};function o$(t,e){return f.useReducer((r,n)=>e[r][n]??r,t)}var cr=t=>{const{present:e,children:r}=t,n=i$(e),s=typeof r=="function"?r({present:n.isPresent}):f.Children.only(r),o=Ae(n.ref,l$(s));return typeof r=="function"||n.isPresent?f.cloneElement(s,{ref:o}):null};cr.displayName="Presence";function i$(t){const[e,r]=f.useState(),n=f.useRef(null),s=f.useRef(t),o=f.useRef("none"),i=t?"mounted":"unmounted",[l,c]=o$(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const u=Du(n.current);o.current=l==="mounted"?u:"none"},[l]),Et(()=>{const u=n.current,d=s.current;if(d!==t){const m=o.current,p=Du(u);t?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),Et(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=p=>{const g=Du(n.current).includes(p.animationName);if(p.target===e&&g&&(c("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},m=p=>{p.target===e&&(o.current=Du(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function Du(t){return(t==null?void 0:t.animationName)||"none"}function l$(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var tm="rovingFocusGroup.onEntryFocus",c$={bubbles:!1,cancelable:!0},Mc="RovingFocusGroup",[Jp,zN,u$]=kv(Mc),[d$,Dh]=jr(Mc,[u$]),[h$,f$]=d$(Mc),WN=f.forwardRef((t,e)=>a.jsx(Jp.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(Jp.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(m$,{...t,ref:e})})}));WN.displayName=Mc;var m$=f.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,m=f.useRef(null),p=Ae(e,m),v=Pc(o),[g,w]=fa({prop:i,defaultProp:l??null,onChange:c,caller:Mc}),[y,x]=f.useState(!1),_=At(u),b=zN(r),j=f.useRef(!1),[N,k]=f.useState(0);return f.useEffect(()=>{const E=m.current;if(E)return E.addEventListener(tm,_),()=>E.removeEventListener(tm,_)},[_]),a.jsx(h$,{scope:r,orientation:n,dir:v,loop:s,currentTabStopId:g,onItemFocus:f.useCallback(E=>w(E),[w]),onItemShiftTab:f.useCallback(()=>x(!0),[]),onFocusableItemAdd:f.useCallback(()=>k(E=>E+1),[]),onFocusableItemRemove:f.useCallback(()=>k(E=>E-1),[]),children:a.jsx(be.div,{tabIndex:y||N===0?-1:0,"data-orientation":n,...h,ref:p,style:{outline:"none",...t.style},onMouseDown:ue(t.onMouseDown,()=>{j.current=!0}),onFocus:ue(t.onFocus,E=>{const T=!j.current;if(E.target===E.currentTarget&&T&&!y){const P=new CustomEvent(tm,c$);if(E.currentTarget.dispatchEvent(P),!P.defaultPrevented){const z=b().filter(M=>M.focusable),B=z.find(M=>M.active),Q=z.find(M=>M.id===g),Y=[B,Q,...z].filter(Boolean).map(M=>M.ref.current);qN(Y,d)}}j.current=!1}),onBlur:ue(t.onBlur,()=>x(!1))})})}),VN="RovingFocusGroupItem",HN=f.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:o,children:i,...l}=t,c=vn(),u=o||c,d=f$(VN,r),h=d.currentTabStopId===u,m=zN(r),{onFocusableItemAdd:p,onFocusableItemRemove:v,currentTabStopId:g}=d;return f.useEffect(()=>{if(n)return p(),()=>v()},[n,p,v]),a.jsx(Jp.ItemSlot,{scope:r,id:u,focusable:n,active:s,children:a.jsx(be.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:e,onMouseDown:ue(t.onMouseDown,w=>{n?d.onItemFocus(u):w.preventDefault()}),onFocus:ue(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:ue(t.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){d.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const y=v$(w,d.orientation,d.dir);if(y!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let _=m().filter(b=>b.focusable).map(b=>b.ref.current);if(y==="last")_.reverse();else if(y==="prev"||y==="next"){y==="prev"&&_.reverse();const b=_.indexOf(w.currentTarget);_=d.loop?x$(_,b+1):_.slice(b+1)}setTimeout(()=>qN(_))}}),children:typeof i=="function"?i({isCurrentTabStop:h,hasTabStop:g!=null}):i})})});HN.displayName=VN;var p$={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function g$(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function v$(t,e,r){const n=g$(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return p$[n]}function qN(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function x$(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var KN=WN,GN=HN,Xp=["Enter"," "],y$=["ArrowDown","PageUp","Home"],YN=["ArrowUp","PageDown","End"],w$=[...y$,...YN],_$={ltr:[...Xp,"ArrowRight"],rtl:[...Xp,"ArrowLeft"]},b$={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ic="Menu",[fc,j$,S$]=kv(Ic),[go,QN]=jr(Ic,[S$,Yi,Dh]),Ah=Yi(),JN=Dh(),[N$,vo]=go(Ic),[k$,Lc]=go(Ic),XN=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:s,onOpenChange:o,modal:i=!0}=t,l=Ah(e),[c,u]=f.useState(null),d=f.useRef(!1),h=At(o),m=Pc(s);return f.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),a.jsx(Iv,{...l,children:a.jsx(N$,{scope:e,open:r,onOpenChange:h,content:c,onContentChange:u,children:a.jsx(k$,{scope:e,onClose:f.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:i,children:n})})})};XN.displayName=Ic;var C$="MenuAnchor",Uv=f.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=Ah(r);return a.jsx(Ch,{...s,...n,ref:e})});Uv.displayName=C$;var Bv="MenuPortal",[E$,ZN]=go(Bv,{forceMount:void 0}),ek=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:s}=t,o=vo(Bv,e);return a.jsx(E$,{scope:e,forceMount:r,children:a.jsx(cr,{present:r||o.open,children:a.jsx(Dc,{asChild:!0,container:s,children:n})})})};ek.displayName=Bv;var Gr="MenuContent",[P$,zv]=go(Gr),tk=f.forwardRef((t,e)=>{const r=ZN(Gr,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,o=vo(Gr,t.__scopeMenu),i=Lc(Gr,t.__scopeMenu);return a.jsx(fc.Provider,{scope:t.__scopeMenu,children:a.jsx(cr,{present:n||o.open,children:a.jsx(fc.Slot,{scope:t.__scopeMenu,children:i.modal?a.jsx(T$,{...s,ref:e}):a.jsx(R$,{...s,ref:e})})})})}),T$=f.forwardRef((t,e)=>{const r=vo(Gr,t.__scopeMenu),n=f.useRef(null),s=Ae(e,n);return f.useEffect(()=>{const o=n.current;if(o)return Eh(o)},[]),a.jsx(Wv,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:ue(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),R$=f.forwardRef((t,e)=>{const r=vo(Gr,t.__scopeMenu);return a.jsx(Wv,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),O$=ua("MenuContent.ScrollLock"),Wv=f.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:p,disableOutsideScroll:v,...g}=t,w=vo(Gr,r),y=Lc(Gr,r),x=Ah(r),_=JN(r),b=j$(r),[j,N]=f.useState(null),k=f.useRef(null),E=Ae(e,k,w.onContentChange),T=f.useRef(0),P=f.useRef(""),z=f.useRef(0),B=f.useRef(null),Q=f.useRef("right"),R=f.useRef(0),Y=v?Ac:f.Fragment,M=v?{as:O$,allowPinchZoom:!0}:void 0,D=L=>{var ae,ye;const I=P.current+L,W=b().filter(Ee=>!Ee.disabled),K=document.activeElement,te=(ae=W.find(Ee=>Ee.ref.current===K))==null?void 0:ae.textValue,O=W.map(Ee=>Ee.textValue),re=V$(O,I,te),de=(ye=W.find(Ee=>Ee.textValue===re))==null?void 0:ye.ref.current;(function Ee(F){P.current=F,window.clearTimeout(T.current),F!==""&&(T.current=window.setTimeout(()=>Ee(""),1e3))})(I),de&&setTimeout(()=>de.focus())};f.useEffect(()=>()=>window.clearTimeout(T.current),[]),jh();const C=f.useCallback(L=>{var W,K;return Q.current===((W=B.current)==null?void 0:W.side)&&q$(L,(K=B.current)==null?void 0:K.area)},[]);return a.jsx(P$,{scope:r,searchRef:P,onItemEnter:f.useCallback(L=>{C(L)&&L.preventDefault()},[C]),onItemLeave:f.useCallback(L=>{var I;C(L)||((I=k.current)==null||I.focus(),N(null))},[C]),onTriggerLeave:f.useCallback(L=>{C(L)&&L.preventDefault()},[C]),pointerGraceTimerRef:z,onPointerGraceIntentChange:f.useCallback(L=>{B.current=L},[]),children:a.jsx(Y,{...M,children:a.jsx(Rc,{asChild:!0,trapped:s,onMountAutoFocus:ue(o,L=>{var I;L.preventDefault(),(I=k.current)==null||I.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:a.jsx(Tc,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:p,children:a.jsx(KN,{asChild:!0,..._,dir:y.dir,orientation:"vertical",loop:n,currentTabStopId:j,onCurrentTabStopIdChange:N,onEntryFocus:ue(c,L=>{y.isUsingKeyboardRef.current||L.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(Lv,{role:"menu","aria-orientation":"vertical","data-state":vk(w.open),"data-radix-menu-content":"",dir:y.dir,...x,...g,ref:E,style:{outline:"none",...g.style},onKeyDown:ue(g.onKeyDown,L=>{const W=L.target.closest("[data-radix-menu-content]")===L.currentTarget,K=L.ctrlKey||L.altKey||L.metaKey,te=L.key.length===1;W&&(L.key==="Tab"&&L.preventDefault(),!K&&te&&D(L.key));const O=k.current;if(L.target!==O||!w$.includes(L.key))return;L.preventDefault();const de=b().filter(ae=>!ae.disabled).map(ae=>ae.ref.current);YN.includes(L.key)&&de.reverse(),z$(de)}),onBlur:ue(t.onBlur,L=>{L.currentTarget.contains(L.target)||(window.clearTimeout(T.current),P.current="")}),onPointerMove:ue(t.onPointerMove,mc(L=>{const I=L.target,W=R.current!==L.clientX;if(L.currentTarget.contains(I)&&W){const K=L.clientX>R.current?"right":"left";Q.current=K,R.current=L.clientX}}))})})})})})})});tk.displayName=Gr;var D$="MenuGroup",Vv=f.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return a.jsx(be.div,{role:"group",...n,ref:e})});Vv.displayName=D$;var A$="MenuLabel",rk=f.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return a.jsx(be.div,{...n,ref:e})});rk.displayName=A$;var qd="MenuItem",j0="menu.itemSelect",Mh=f.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...s}=t,o=f.useRef(null),i=Lc(qd,t.__scopeMenu),l=zv(qd,t.__scopeMenu),c=Ae(e,o),u=f.useRef(!1),d=()=>{const h=o.current;if(!r&&h){const m=new CustomEvent(j0,{bubbles:!0,cancelable:!0});h.addEventListener(j0,p=>n==null?void 0:n(p),{once:!0}),n1(h,m),m.defaultPrevented?u.current=!1:i.onClose()}};return a.jsx(nk,{...s,ref:c,disabled:r,onClick:ue(t.onClick,d),onPointerDown:h=>{var m;(m=t.onPointerDown)==null||m.call(t,h),u.current=!0},onPointerUp:ue(t.onPointerUp,h=>{var m;u.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:ue(t.onKeyDown,h=>{const m=l.searchRef.current!=="";r||m&&h.key===" "||Xp.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Mh.displayName=qd;var nk=f.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...o}=t,i=zv(qd,r),l=JN(r),c=f.useRef(null),u=Ae(e,c),[d,h]=f.useState(!1),[m,p]=f.useState("");return f.useEffect(()=>{const v=c.current;v&&p((v.textContent??"").trim())},[o.children]),a.jsx(fc.ItemSlot,{scope:r,disabled:n,textValue:s??m,children:a.jsx(GN,{asChild:!0,...l,focusable:!n,children:a.jsx(be.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...o,ref:u,onPointerMove:ue(t.onPointerMove,mc(v=>{n?i.onItemLeave(v):(i.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ue(t.onPointerLeave,mc(v=>i.onItemLeave(v))),onFocus:ue(t.onFocus,()=>h(!0)),onBlur:ue(t.onBlur,()=>h(!1))})})})}),M$="MenuCheckboxItem",sk=f.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...s}=t;return a.jsx(ck,{scope:t.__scopeMenu,checked:r,children:a.jsx(Mh,{role:"menuitemcheckbox","aria-checked":Kd(r)?"mixed":r,...s,ref:e,"data-state":qv(r),onSelect:ue(s.onSelect,()=>n==null?void 0:n(Kd(r)?!0:!r),{checkForDefaultPrevented:!1})})})});sk.displayName=M$;var ak="MenuRadioGroup",[I$,L$]=go(ak,{value:void 0,onValueChange:()=>{}}),ok=f.forwardRef((t,e)=>{const{value:r,onValueChange:n,...s}=t,o=At(n);return a.jsx(I$,{scope:t.__scopeMenu,value:r,onValueChange:o,children:a.jsx(Vv,{...s,ref:e})})});ok.displayName=ak;var ik="MenuRadioItem",lk=f.forwardRef((t,e)=>{const{value:r,...n}=t,s=L$(ik,t.__scopeMenu),o=r===s.value;return a.jsx(ck,{scope:t.__scopeMenu,checked:o,children:a.jsx(Mh,{role:"menuitemradio","aria-checked":o,...n,ref:e,"data-state":qv(o),onSelect:ue(n.onSelect,()=>{var i;return(i=s.onValueChange)==null?void 0:i.call(s,r)},{checkForDefaultPrevented:!1})})})});lk.displayName=ik;var Hv="MenuItemIndicator",[ck,F$]=go(Hv,{checked:!1}),uk=f.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...s}=t,o=F$(Hv,r);return a.jsx(cr,{present:n||Kd(o.checked)||o.checked===!0,children:a.jsx(be.span,{...s,ref:e,"data-state":qv(o.checked)})})});uk.displayName=Hv;var $$="MenuSeparator",dk=f.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return a.jsx(be.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});dk.displayName=$$;var U$="MenuArrow",hk=f.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=Ah(r);return a.jsx(Fv,{...s,...n,ref:e})});hk.displayName=U$;var B$="MenuSub",[SW,fk]=go(B$),yl="MenuSubTrigger",mk=f.forwardRef((t,e)=>{const r=vo(yl,t.__scopeMenu),n=Lc(yl,t.__scopeMenu),s=fk(yl,t.__scopeMenu),o=zv(yl,t.__scopeMenu),i=f.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=o,u={__scopeMenu:t.__scopeMenu},d=f.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return f.useEffect(()=>d,[d]),f.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),a.jsx(Uv,{asChild:!0,...u,children:a.jsx(nk,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":vk(r.open),...t,ref:_h(e,s.onTriggerChange),onClick:h=>{var m;(m=t.onClick)==null||m.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:ue(t.onPointerMove,mc(h=>{o.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!r.open&&!i.current&&(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:ue(t.onPointerLeave,mc(h=>{var p,v;d();const m=(p=r.content)==null?void 0:p.getBoundingClientRect();if(m){const g=(v=r.content)==null?void 0:v.dataset.side,w=g==="right",y=w?-5:5,x=m[w?"left":"right"],_=m[w?"right":"left"];o.onPointerGraceIntentChange({area:[{x:h.clientX+y,y:h.clientY},{x,y:m.top},{x:_,y:m.top},{x:_,y:m.bottom},{x,y:m.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(h),h.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:ue(t.onKeyDown,h=>{var p;const m=o.searchRef.current!=="";t.disabled||m&&h.key===" "||_$[n.dir].includes(h.key)&&(r.onOpenChange(!0),(p=r.content)==null||p.focus(),h.preventDefault())})})})});mk.displayName=yl;var pk="MenuSubContent",gk=f.forwardRef((t,e)=>{const r=ZN(Gr,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,o=vo(Gr,t.__scopeMenu),i=Lc(Gr,t.__scopeMenu),l=fk(pk,t.__scopeMenu),c=f.useRef(null),u=Ae(e,c);return a.jsx(fc.Provider,{scope:t.__scopeMenu,children:a.jsx(cr,{present:n||o.open,children:a.jsx(fc.Slot,{scope:t.__scopeMenu,children:a.jsx(Wv,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;i.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:ue(t.onFocusOutside,d=>{d.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:ue(t.onEscapeKeyDown,d=>{i.onClose(),d.preventDefault()}),onKeyDown:ue(t.onKeyDown,d=>{var p;const h=d.currentTarget.contains(d.target),m=b$[i.dir].includes(d.key);h&&m&&(o.onOpenChange(!1),(p=l.trigger)==null||p.focus(),d.preventDefault())})})})})})});gk.displayName=pk;function vk(t){return t?"open":"closed"}function Kd(t){return t==="indeterminate"}function qv(t){return Kd(t)?"indeterminate":t?"checked":"unchecked"}function z$(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function W$(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function V$(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,o=r?t.indexOf(r):-1;let i=W$(t,Math.max(o,0));s.length===1&&(i=i.filter(u=>u!==r));const c=i.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function H$(t,e){const{x:r,y:n}=t;let s=!1;for(let o=0,i=e.length-1;o<e.length;i=o++){const l=e[o],c=e[i],u=l.x,d=l.y,h=c.x,m=c.y;d>n!=m>n&&r<(h-u)*(n-d)/(m-d)+u&&(s=!s)}return s}function q$(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return H$(r,e)}function mc(t){return e=>e.pointerType==="mouse"?t(e):void 0}var K$=XN,G$=Uv,Y$=ek,Q$=tk,J$=Vv,X$=rk,Z$=Mh,e5=sk,t5=ok,r5=lk,n5=uk,s5=dk,a5=hk,o5=mk,i5=gk,Ih="DropdownMenu",[l5,NW]=jr(Ih,[QN]),ur=QN(),[c5,xk]=l5(Ih),yk=t=>{const{__scopeDropdownMenu:e,children:r,dir:n,open:s,defaultOpen:o,onOpenChange:i,modal:l=!0}=t,c=ur(e),u=f.useRef(null),[d,h]=fa({prop:s,defaultProp:o??!1,onChange:i,caller:Ih});return a.jsx(c5,{scope:e,triggerId:vn(),triggerRef:u,contentId:vn(),open:d,onOpenChange:h,onOpenToggle:f.useCallback(()=>h(m=>!m),[h]),modal:l,children:a.jsx(K$,{...c,open:d,onOpenChange:h,dir:n,modal:l,children:r})})};yk.displayName=Ih;var wk="DropdownMenuTrigger",_k=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=t,o=xk(wk,r),i=ur(r);return a.jsx(G$,{asChild:!0,...i,children:a.jsx(be.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:_h(e,o.triggerRef),onPointerDown:ue(t.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:ue(t.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});_k.displayName=wk;var u5="DropdownMenuPortal",bk=t=>{const{__scopeDropdownMenu:e,...r}=t,n=ur(e);return a.jsx(Y$,{...n,...r})};bk.displayName=u5;var jk="DropdownMenuContent",Sk=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=xk(jk,r),o=ur(r),i=f.useRef(!1);return a.jsx(Q$,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...n,ref:e,onCloseAutoFocus:ue(t.onCloseAutoFocus,l=>{var c;i.current||(c=s.triggerRef.current)==null||c.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:ue(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(i.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Sk.displayName=jk;var d5="DropdownMenuGroup",h5=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=ur(r);return a.jsx(J$,{...s,...n,ref:e})});h5.displayName=d5;var f5="DropdownMenuLabel",Nk=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=ur(r);return a.jsx(X$,{...s,...n,ref:e})});Nk.displayName=f5;var m5="DropdownMenuItem",kk=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=ur(r);return a.jsx(Z$,{...s,...n,ref:e})});kk.displayName=m5;var p5="DropdownMenuCheckboxItem",Ck=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=ur(r);return a.jsx(e5,{...s,...n,ref:e})});Ck.displayName=p5;var g5="DropdownMenuRadioGroup",v5=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=ur(r);return a.jsx(t5,{...s,...n,ref:e})});v5.displayName=g5;var x5="DropdownMenuRadioItem",Ek=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=ur(r);return a.jsx(r5,{...s,...n,ref:e})});Ek.displayName=x5;var y5="DropdownMenuItemIndicator",Pk=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=ur(r);return a.jsx(n5,{...s,...n,ref:e})});Pk.displayName=y5;var w5="DropdownMenuSeparator",Tk=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=ur(r);return a.jsx(s5,{...s,...n,ref:e})});Tk.displayName=w5;var _5="DropdownMenuArrow",b5=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=ur(r);return a.jsx(a5,{...s,...n,ref:e})});b5.displayName=_5;var j5="DropdownMenuSubTrigger",Rk=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=ur(r);return a.jsx(o5,{...s,...n,ref:e})});Rk.displayName=j5;var S5="DropdownMenuSubContent",Ok=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=ur(r);return a.jsx(i5,{...s,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ok.displayName=S5;var N5=yk,k5=_k,C5=bk,Dk=Sk,Ak=Nk,Mk=kk,Ik=Ck,Lk=Ek,Fk=Pk,$k=Tk,Uk=Rk,Bk=Ok;const E5=N5,P5=k5,T5=f.forwardRef(({className:t,inset:e,children:r,...n},s)=>a.jsxs(Uk,{ref:s,className:Z("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",e&&"pl-8",t),...n,children:[r,a.jsx(cc,{className:"ml-auto h-4 w-4"})]}));T5.displayName=Uk.displayName;const R5=f.forwardRef(({className:t,...e},r)=>a.jsx(Bk,{ref:r,className:Z("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));R5.displayName=Bk.displayName;const zk=f.forwardRef(({className:t,sideOffset:e=4,...r},n)=>a.jsx(C5,{children:a.jsx(Dk,{ref:n,sideOffset:e,className:Z("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));zk.displayName=Dk.displayName;const Ao=f.forwardRef(({className:t,inset:e,...r},n)=>a.jsx(Mk,{ref:n,className:Z("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e&&"pl-8",t),...r}));Ao.displayName=Mk.displayName;const O5=f.forwardRef(({className:t,children:e,checked:r,...n},s)=>a.jsxs(Ik,{ref:s,className:Z("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),checked:r,...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(Fk,{children:a.jsx(l1,{className:"h-4 w-4"})})}),e]}));O5.displayName=Ik.displayName;const D5=f.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(Lk,{ref:n,className:Z("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(Fk,{children:a.jsx(u1,{className:"h-2 w-2 fill-current"})})}),e]}));D5.displayName=Lk.displayName;const A5=f.forwardRef(({className:t,inset:e,...r},n)=>a.jsx(Ak,{ref:n,className:Z("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));A5.displayName=Ak.displayName;const Zp=f.forwardRef(({className:t,...e},r)=>a.jsx($k,{ref:r,className:Z("-mx-1 my-1 h-px bg-muted",t),...e}));Zp.displayName=$k.displayName;var Lh="Dialog",[Wk,Vk]=jr(Lh),[M5,Nn]=Wk(Lh),Hk=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:i=!0}=t,l=f.useRef(null),c=f.useRef(null),[u,d]=fa({prop:n,defaultProp:s??!1,onChange:o,caller:Lh});return a.jsx(M5,{scope:e,triggerRef:l,contentRef:c,contentId:vn(),titleId:vn(),descriptionId:vn(),open:u,onOpenChange:d,onOpenToggle:f.useCallback(()=>d(h=>!h),[d]),modal:i,children:r})};Hk.displayName=Lh;var qk="DialogTrigger",Kk=f.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Nn(qk,r),o=Ae(e,s.triggerRef);return a.jsx(be.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Yv(s.open),...n,ref:o,onClick:ue(t.onClick,s.onOpenToggle)})});Kk.displayName=qk;var Kv="DialogPortal",[I5,Gk]=Wk(Kv,{forceMount:void 0}),Yk=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:s}=t,o=Nn(Kv,e);return a.jsx(I5,{scope:e,forceMount:r,children:f.Children.map(n,i=>a.jsx(cr,{present:r||o.open,children:a.jsx(Dc,{asChild:!0,container:s,children:i})}))})};Yk.displayName=Kv;var Gd="DialogOverlay",Qk=f.forwardRef((t,e)=>{const r=Gk(Gd,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,o=Nn(Gd,t.__scopeDialog);return o.modal?a.jsx(cr,{present:n||o.open,children:a.jsx(F5,{...s,ref:e})}):null});Qk.displayName=Gd;var L5=ua("DialogOverlay.RemoveScroll"),F5=f.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Nn(Gd,r);return a.jsx(Ac,{as:L5,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(be.div,{"data-state":Yv(s.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),lo="DialogContent",Jk=f.forwardRef((t,e)=>{const r=Gk(lo,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,o=Nn(lo,t.__scopeDialog);return a.jsx(cr,{present:n||o.open,children:o.modal?a.jsx($5,{...s,ref:e}):a.jsx(U5,{...s,ref:e})})});Jk.displayName=lo;var $5=f.forwardRef((t,e)=>{const r=Nn(lo,t.__scopeDialog),n=f.useRef(null),s=Ae(e,r.contentRef,n);return f.useEffect(()=>{const o=n.current;if(o)return Eh(o)},[]),a.jsx(Xk,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ue(t.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=r.triggerRef.current)==null||i.focus()}),onPointerDownOutside:ue(t.onPointerDownOutside,o=>{const i=o.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&o.preventDefault()}),onFocusOutside:ue(t.onFocusOutside,o=>o.preventDefault())})}),U5=f.forwardRef((t,e)=>{const r=Nn(lo,t.__scopeDialog),n=f.useRef(!1),s=f.useRef(!1);return a.jsx(Xk,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=t.onCloseAutoFocus)==null||i.call(t,o),o.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;((u=r.triggerRef.current)==null?void 0:u.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),Xk=f.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,...i}=t,l=Nn(lo,r),c=f.useRef(null),u=Ae(e,c);return jh(),a.jsxs(a.Fragment,{children:[a.jsx(Rc,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:a.jsx(Tc,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Yv(l.open),...i,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(z5,{titleId:l.titleId}),a.jsx(V5,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Gv="DialogTitle",Zk=f.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Nn(Gv,r);return a.jsx(be.h2,{id:s.titleId,...n,ref:e})});Zk.displayName=Gv;var eC="DialogDescription",tC=f.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Nn(eC,r);return a.jsx(be.p,{id:s.descriptionId,...n,ref:e})});tC.displayName=eC;var rC="DialogClose",nC=f.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Nn(rC,r);return a.jsx(be.button,{type:"button",...n,ref:e,onClick:ue(t.onClick,()=>s.onOpenChange(!1))})});nC.displayName=rC;function Yv(t){return t?"open":"closed"}var sC="DialogTitleWarning",[B5,aC]=QL(sC,{contentName:lo,titleName:Gv,docsSlug:"dialog"}),z5=({titleId:t})=>{const e=aC(sC),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return f.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},W5="DialogDescriptionWarning",V5=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${aC(W5).contentName}}.`;return f.useEffect(()=>{var o;const s=(o=t.current)==null?void 0:o.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},Qv=Hk,Jv=Kk,Xv=Yk,Fc=Qk,$c=Jk,Uc=Zk,Bc=tC,Fh=nC;const Ot=Qv,Ml=Jv,H5=Xv,oC=f.forwardRef(({className:t,...e},r)=>a.jsx(Fc,{ref:r,className:Z("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));oC.displayName=Fc.displayName;const Nt=f.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(H5,{children:[a.jsx(oC,{}),a.jsxs($c,{ref:n,className:Z("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-xl",t),...r,children:[e,a.jsxs(Fh,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[a.jsx(Ec,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Nt.displayName=$c.displayName;const kt=({className:t,...e})=>a.jsx("div",{className:Z("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});kt.displayName="DialogHeader";const ar=({className:t,...e})=>a.jsx("div",{className:Z("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});ar.displayName="DialogFooter";const Ct=f.forwardRef(({className:t,...e},r)=>a.jsx(Uc,{ref:r,className:Z("text-lg font-semibold leading-none tracking-tight",t),...e}));Ct.displayName=Uc.displayName;const or=f.forwardRef(({className:t,...e},r)=>a.jsx(Bc,{ref:r,className:Z("text-sm text-muted-foreground",t),...e}));or.displayName=Bc.displayName;function q5({onToggleSidebar:t}){var _,b,j;const{user:e,signOut:r}=yt(),{t:n}=Xe(),s=Zr(),{setTheme:o}=gI(),[i,l]=f.useState(!1),[c,u]=f.useState(""),[d,h]=f.useState(""),[m,p]=f.useState(""),[v,g]=f.useState(!1),w=async()=>{try{await r(),s("/login")}catch(N){console.error("Logout failed:",N),s("/login")}},y=()=>{l(!0)},x=async N=>{if(N.preventDefault(),!v){if(!c.trim()){p(n("settings.newPasswordRequired"));return}if(c.length<6){p(n("settings.passwordTooShort"));return}if(c!==d){p(n("settings.passwordsDoNotMatch"));return}p(""),g(!0);try{const{error:k}=await J.auth.updateUser({password:c});if(k)throw k;l(!1),u(""),h(""),alert(n("settings.passwordChangedSuccessfully"))}catch(k){console.error("Password change failed:",k),p(k.message||n("settings.passwordChangeFailed"))}finally{g(!1)}}};return a.jsxs("header",{className:"border-b bg-background/80 backdrop-blur-md sticky top-0 z-50 shadow-sm",children:[a.jsxs("div",{className:"h-16 flex items-center px-4 md:px-6 gap-4",children:[a.jsx("button",{onClick:t,className:"text-foreground hover:bg-accent hover:text-accent-foreground p-2 rounded-lg transition-all","aria-label":"Toggle sidebar",children:a.jsx(OL,{className:"h-5 w-5"})}),a.jsx("div",{className:"hidden md:flex flex-1 max-w-md",children:a.jsxs("div",{className:"relative w-full",children:[a.jsx(ba,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(je,{type:"search",placeholder:n("common.search","Search..."),className:"pl-10 pr-4 h-9 bg-muted/50 border-0 focus-visible:ring-1"}),a.jsxs("kbd",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none hidden lg:inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground opacity-100",children:[a.jsx("span",{className:"text-xs",children:""}),"K"]})]})}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"text-sm text-muted-foreground hidden md:block",children:H((e==null?void 0:e.profile)||{},"user_name")||(e==null?void 0:e.email)}),a.jsx(BN,{}),a.jsxs("button",{className:"text-foreground hover:text-muted-foreground relative transition-colors",title:n("common.notifications"),children:[a.jsx(vL,{className:"h-5 w-5"}),a.jsx("span",{className:"absolute -top-1 -right-1 h-3 w-3 rounded-full bg-primary flex items-center justify-center",children:a.jsx("span",{className:"h-2 w-2 rounded-full bg-primary-foreground"})}),a.jsx("span",{className:"sr-only",children:n("common.notifications")})]}),a.jsxs(E5,{children:[a.jsx(P5,{asChild:!0,children:a.jsxs(q,{variant:"ghost",size:"icon",className:"h-9 w-9 hover:bg-accent",title:n("navigation.settings"),children:[a.jsxs(Hr,{className:"h-8 w-8",children:[a.jsx(qr,{src:(_=e==null?void 0:e.profile)==null?void 0:_.avatar}),a.jsx(Kr,{className:"bg-primary/10 text-primary font-semibold text-sm",children:(b=e==null?void 0:e.email)==null?void 0:b.charAt(0).toUpperCase()})]}),a.jsx("span",{className:"sr-only",children:n("navigation.settings")})]})}),a.jsxs(zk,{align:"end",className:"w-56",children:[a.jsx("div",{className:"flex items-center justify-start gap-2 p-2",children:a.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[a.jsx("p",{className:"font-medium text-sm",children:H((e==null?void 0:e.profile)||{},"user_name")||((j=e==null?void 0:e.email)==null?void 0:j.split("@")[0])}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:e==null?void 0:e.email})]})}),a.jsx(Zp,{}),a.jsxs(Ao,{onClick:()=>o("light"),children:[a.jsx(FL,{className:"mr-2 h-4 w-4"}),a.jsx("span",{children:n("theme.light","Light")})]}),a.jsxs(Ao,{onClick:()=>o("dark"),children:[a.jsx(DL,{className:"mr-2 h-4 w-4"}),a.jsx("span",{children:n("theme.dark","Dark")})]}),a.jsxs(Ao,{onClick:()=>o("system"),children:[a.jsx(h1,{className:"mr-2 h-4 w-4"}),a.jsx("span",{children:n("theme.system","System")})]}),a.jsx(Zp,{}),a.jsxs(Ao,{onClick:y,children:[a.jsx(TL,{className:"h-4 w-4 mr-2"}),n("settings.changePassword")]}),a.jsxs(Ao,{onClick:w,className:"text-destructive focus:text-destructive",children:[a.jsx(HL,{className:"h-4 w-4 mr-2"}),n("buttons.logout")]})]})]})]})]}),a.jsx(Ot,{open:i,onOpenChange:l,children:a.jsxs(Nt,{className:"sm:max-w-[425px]",children:[a.jsxs(kt,{children:[a.jsx(Ct,{children:n("settings.changePassword")}),a.jsx(or,{children:n("settings.changePasswordDescription")})]}),a.jsxs("form",{onSubmit:x,className:"space-y-4",children:[m&&a.jsx(Ti,{variant:"destructive",children:a.jsx(Ri,{children:m})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"newPassword",children:n("settings.newPassword")}),a.jsx(je,{id:"newPassword",type:"password",value:c,onChange:N=>u(N.target.value),placeholder:n("settings.newPasswordPlaceholder"),required:!0,minLength:6})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"confirmPassword",children:n("settings.confirmPassword")}),a.jsx(je,{id:"confirmPassword",type:"password",value:d,onChange:N=>h(N.target.value),placeholder:n("settings.confirmPasswordPlaceholder"),required:!0,minLength:6})]}),a.jsxs(ar,{className:"flex flex-col-reverse sm:flex-row gap-2",children:[a.jsx(q,{type:"button",variant:"outline",onClick:()=>l(!1),className:"w-full sm:w-auto",children:n("buttons.cancel")}),a.jsx(q,{type:"submit",disabled:v||!c.trim()||!d.trim(),className:"w-full sm:w-auto",children:n(v?"settings.changingPassword":"settings.changePassword")})]})]})]})})]})}const $h=Qv,K5=Jv,G5=Xv,iC=f.forwardRef(({className:t,...e},r)=>a.jsx(Fc,{className:Z("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:r}));iC.displayName=Fc.displayName;const Y5=kc("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),zc=f.forwardRef(({side:t="right",className:e,children:r,...n},s)=>a.jsxs(G5,{children:[a.jsx(iC,{}),a.jsxs($c,{ref:s,className:Z(Y5({side:t}),e),...n,children:[r,a.jsxs(Fh,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[a.jsx(Ec,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));zc.displayName=$c.displayName;const Zv=({className:t,...e})=>a.jsx("div",{className:Z("flex flex-col space-y-2 text-center sm:text-left",t),...e});Zv.displayName="SheetHeader";const Uh=f.forwardRef(({className:t,...e},r)=>a.jsx(Uc,{ref:r,className:Z("text-lg font-semibold text-foreground",t),...e}));Uh.displayName=Uc.displayName;const Bh=f.forwardRef(({className:t,...e},r)=>a.jsx(Bc,{ref:r,className:Z("text-sm text-muted-foreground",t),...e}));Bh.displayName=Bc.displayName;function Jt({children:t}){const[e,r]=f.useState(!0),[n,s]=f.useState(!1);f.useEffect(()=>{const l=()=>{s(window.innerWidth<1024),window.innerWidth<1024?r(!1):r(!0)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]);const o=()=>{r(!e)},i=()=>{n&&r(!1)};return a.jsxs("div",{className:"h-screen bg-background w-full flex flex-col",children:[a.jsx(q5,{onToggleSidebar:o}),a.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[!n&&a.jsx("aside",{className:Z("bg-sidebar transition-all duration-300 ease-in-out hidden lg:block",e?"w-60":"w-0 overflow-hidden"),style:{height:"calc(100vh - 64px)"},children:a.jsx(e0,{onNavigate:i})}),n&&a.jsx($h,{open:e,onOpenChange:r,children:a.jsxs(zc,{side:gn()?"right":"left",className:"p-0 w-60 [&>button]:hidden",children:[a.jsx(Uh,{className:"sr-only",children:"Navigation Menu"}),a.jsx(Bh,{className:"sr-only",children:"Application navigation sidebar"}),a.jsx(e0,{onNavigate:i})]})}),a.jsx("main",{className:"flex-1 overflow-hidden bg-background pt-2",children:a.jsx("div",{className:"p-3 sm:p-4 md:p-6 w-full h-full overflow-y-auto",children:t})})]})]})}const pr={async getAll(){try{console.log("[stageService] Fetching all stages...");const{data:t,error:e}=await J.from("stages").select("*").order("stager_order_index",{ascending:!0});if(e)throw console.error("[stageService] Error fetching stages:",e),e;return console.log(`[stageService] Successfully fetched ${(t==null?void 0:t.length)||0} stages`),t||[]}catch(t){throw console.error("[stageService] Failed to fetch stages:",t),t}},async getGlobalStages(){try{console.log("[stageService] Fetching global stages...");const{data:t,error:e}=await J.from("stages").select("*").is("project_id",null).order("stager_order_index",{ascending:!0});if(e)throw console.error("[stageService] Error fetching global stages:",e),e;return console.log(`[stageService] Successfully fetched ${(t==null?void 0:t.length)||0} global stages`),t||[]}catch(t){throw console.error("[stageService] Failed to fetch global stages:",t),t}},async getByType(t){try{console.log(`[stageService] Fetching stages for type: ${t}...`);const{data:e,error:r}=await J.from("stages").select("*").eq("stage_type",t).is("project_id",null).order("stager_order_index",{ascending:!0});if(r)throw console.error(`[stageService] Error fetching ${t} stages: `,r),r;return console.log(`[stageService] Successfully fetched ${(e==null?void 0:e.length)||0} ${t} stages`),e||[]}catch(e){throw console.error(`[stageService] Failed to fetch ${t} stages: `,e),e}},async create(t){try{const{data:e}=await J.from("stages").select("stager_order_index").order("stager_order_index",{ascending:!1}).limit(1),r=e&&e.length>0?e[0].stager_order_index:-1,n=t.stager_order_index??r+1,s={stage_name:t.stage_name,stage_name_ar:t.stage_name_ar||null,stage_type:t.stage_type,stager_order_index:n,project_id:t.project_id,color:t.color,color_var:t.color_var},{data:o,error:i}=await J.from("stages").insert(s).select().single();if(i)throw i;return o}catch(e){throw console.error("[stageService] Failed to create stage:",e),e}},async update(t,e){try{const r=wn(e,{stage_name:"stage_name"}),{error:n}=await J.from("stages").update(r).eq("stage_id",t);if(n)throw n}catch(r){throw console.error("[stageService] Failed to update stage:",r),r}},async delete(t){try{const{error:e}=await J.from("stages").delete().eq("stage_id",t);if(e)throw e}catch(e){throw console.error("[stageService] Failed to delete stage:",e),e}}},qt={async getAll(){try{console.log("[userService] Fetching all users...");const{data:t,error:e}=await J.from("users").select("*");if(e)throw e;return console.log(`[userService] Successfully fetched ${(t==null?void 0:t.length)||0} users`),t||[]}catch(t){throw console.error("[userService] Failed to fetch users:",t),t}},async getById(t){try{const{data:e,error:r}=await J.from("users").select("*").eq("user_id",t).single();return r?null:e}catch(e){return console.error("[userService] Failed to fetch user:",e),null}},async getByAuthId(t){try{const{data:e,error:r}=await J.from("users").select("*").eq("auth_user_id",t).single();return r?null:e}catch(e){return console.error("[userService] Failed to fetch user by auth ID:",e),null}},async update(t,e){try{const r={};e.user_name!==void 0&&(r.user_name=e.user_name),e.user_name_ar!==void 0&&(r.user_name_ar=e.user_name_ar),e.user_email!==void 0&&(r.user_email=e.user_email),e.user_role!==void 0&&(r.user_role=e.user_role),e.avatar!==void 0&&(r.avatar=e.avatar),e.client_contact!==void 0&&(r.client_contact=e.client_contact),e.company_name!==void 0&&(r.company_name=e.company_name),e.company_name_ar!==void 0&&(r.company_name_ar=e.company_name_ar);const{error:n}=await J.from("users").update(r).eq("user_id",t);if(n)throw n;console.log(`[userService] Successfully updated user ${t} `)}catch(r){throw console.error("[userService] Failed to update user:",r),r}}},ex={async getAll(){try{console.log("[clientService] Fetching all clients...");const{data:t,error:e}=await J.from("users").select("*").eq("user_role","client");if(e)throw e;return console.log(`[clientService] Successfully fetched ${(t==null?void 0:t.length)||0} clients`),t||[]}catch(t){throw console.error("[clientService] Failed to fetch clients:",t),t}},async getById(t){try{const{data:e,error:r}=await J.from("users").select("*").eq("user_id",t).eq("user_role","client").single();return r?null:e}catch(e){return console.error("[clientService] Failed to fetch client:",e),null}},async create(t){try{const e=wn({user_name:t.user_name,user_email:t.user_email,user_role:"client",avatar:t.avatar,client_contact:t.client_contact,company_name:t.company_name},{user_name:"user_name",company_name:"company_name"}),{data:r,error:n}=await J.from("users").insert(e).select().single();if(n)throw n;return r}catch(e){throw console.error("[clientService] Failed to create client:",e),e}}},On={async getAll(){try{console.log("[projectService] Fetching all projects...");const{data:t,error:e}=await J.from("projects").select("*").order("created_date",{ascending:!1});if(e)throw e;return console.log(`[projectService] Successfully fetched ${(t==null?void 0:t.length)||0} projects`),t||[]}catch(t){throw console.error("[projectService] Failed to fetch projects:",t),t}},async getById(t){try{const{data:e,error:r}=await J.from("projects").select("*").eq("project_id",t).single();return r?null:e}catch(e){return console.error("[projectService] Failed to fetch project:",e),null}},async create(t){try{const{data:e,error:r}=await J.from("projects").insert({project_name:t.project_name,project_description:t.project_description,created_by:t.created_by,progress:t.progress||0,stage:t.stage,end_date:t.end_date}).select().single();if(r)throw r;return e}catch(e){throw console.error("[projectService] Failed to create project:",e),e}},async update(t,e){try{const r={};e.project_name&&(r.project_name=e.project_name),e.project_description!==void 0&&(r.project_description=e.project_description),e.progress!==void 0&&(r.progress=e.progress),e.stage!==void 0&&(r.stage=e.stage),e.end_date!==void 0&&(r.end_date=e.end_date);const{error:n}=await J.from("projects").update(r).eq("project_id",t);if(n)throw n}catch(r){throw console.error("[projectService] Failed to update project:",r),r}},async delete(t){try{const{error:e}=await J.from("projects").delete().eq("project_id",t);if(e)throw e}catch(e){throw console.error("[projectService] Failed to delete project:",e),e}},async getByUserAuthId(t){try{console.log("[projectService] Fetching projects for user:",t);const{data:e,error:r}=await J.from("project_users").select(`
project_id,
  projects(
    project_id,
    project_name,
    project_description,
    created_date,
    created_by,
    progress,
    stage,
    end_date,
    updated_at
  )
    `).eq("auth_user_id",t);if(r)throw r;const n=(e==null?void 0:e.map(s=>s.projects).filter(Boolean))||[];return console.log(`[projectService] Successfully fetched ${n.length} projects for user`),n}catch(e){throw console.error("[projectService] Failed to fetch projects for user:",e),e}}},Js={async getAll(){try{console.log("[taskService] Fetching all tasks...");const{data:t,error:e}=await J.from("tasks").select("*").order("created_at",{ascending:!1});if(e)throw e;return console.log(`[taskService] Successfully fetched ${(t==null?void 0:t.length)||0} tasks`),t||[]}catch(t){throw console.error("[taskService] Failed to fetch tasks:",t),t}},async getByStage(t){try{const{data:e,error:r}=await J.from("tasks").select("*").eq("stage_id",t);if(r)throw r;return e||[]}catch(e){throw console.error("[taskService] Failed to fetch tasks:",e),e}},async create(t){try{const e=wn({task_name:t.task_name,stage_id:t.stage_id,assigned_to:t.assigned_to,task_status:t.task_status,due_date:t.due_date,description:t.description,auth_user_id:t.auth_user_id},{task_name:"task_name",description:"description"}),{data:r,error:n}=await J.from("tasks").insert(e).select().single();if(n)throw n;return r}catch(e){throw console.error("[taskService] Failed to create task:",e),e}},async update(t,e){try{const r=wn(e,{task_name:"task_name",description:"description"}),{error:n}=await J.from("tasks").update(r).eq("task_id",t);if(n)throw n}catch(r){throw console.error("[taskService] Failed to update task:",r),r}},async delete(t){try{const{error:e}=await J.from("tasks").delete().eq("task_id",t);if(e)throw e}catch(e){throw console.error("[taskService] Failed to delete task:",e),e}}},eg={async getByTask(t){try{const{data:e,error:r}=await J.from("comments").select("*").eq("task_id",t).order("created_date",{ascending:!0});if(r)throw r;return e||[]}catch(e){throw console.error("[commentService] Failed to fetch comments:",e),e}},async create(t){try{const{data:e,error:r}=await J.from("comments").insert({task_id:t.task_id,auth_user_id:t.auth_user_id,message:t.message}).select().single();if(r)throw r;return e}catch(e){throw console.error("[commentService] Failed to create comment:",e),e}}},an={async getUserRooms(t){const{data:e,error:r}=await J.from("room_members").select("room_id").eq("auth_user_id",t);if(r)throw r;if(!e||e.length===0)return[];const n=e.map(i=>i.room_id),{data:s,error:o}=await J.from("rooms").select("*").in("room_id",n);if(o)throw o;return s||[]},async createRoom(t){let e=t.created_by;if(!e||e===0){const{data:s}=await J.from("users").select("user_id").eq("auth_user_id",t.auth_user_id).single();s&&(e=s.user_id)}const{data:r,error:n}=await J.from("rooms").insert({room_name:t.name,is_private:t.is_private??!0,project_id:t.project_id,created_by:e,auth_user_id:t.auth_user_id}).select().single();if(n)throw n;return r},async addMember(t,e){const{error:r}=await J.from("room_members").insert({room_id:t,auth_user_id:e});if(r)throw r},async getRoomMembers(t){const{data:e,error:r}=await J.from("room_members").select(`
auth_user_id,
  users(*)
    `).eq("room_id",t);if(r)throw r;return!e||e.length===0?[]:e.map(n=>n.users).filter(Boolean)},async markAsRead(t,e){const{error:r}=await J.from("room_members").update({last_read_at:new Date().toISOString()}).eq("room_id",t).eq("auth_user_id",e);r&&console.error("[roomService] Failed to mark room as read:",r)}},S0={async getProjectUsers(t){try{console.log("[projectUserService] Fetching users for project:",t);const{data:e,error:r}=await J.from("project_users").select(`
auth_user_id,
  users(
    user_id,
    user_name,
    user_email,
    user_role,
    avatar,
    auth_user_id,
    client_contact,
    company_name,
    created_at,
    updated_at
  )
    `).eq("project_id",t);if(r)throw r;const n=(e==null?void 0:e.map(s=>s.users).filter(Boolean))||[];return console.log(`[projectUserService] Found ${n.length} users for project ${t}`),n}catch(e){throw console.error("[projectUserService] Failed to fetch project users:",e),e}},async addUserToProject(t,e){try{console.log("[projectUserService] Adding user",e,"to project",t);const{error:r}=await J.from("project_users").insert({project_id:t,user_id:e});if(r)throw r;console.log("[projectUserService] Successfully added user to project")}catch(r){throw console.error("[projectUserService] Failed to add user to project:",r),r}},async removeUserFromProject(t,e){try{console.log("[projectUserService] Removing user",e,"from project",t);const{error:r}=await J.from("project_users").delete().eq("project_id",t).eq("user_id",e);if(r)throw r;console.log("[projectUserService] Successfully removed user from project")}catch(r){throw console.error("[projectUserService] Failed to remove user from project:",r),r}}},To={async getAll(){try{console.log("[teamService] Fetching all teams...");const{data:t,error:e}=await J.from("teams").select("*").order("created_at",{ascending:!1});if(e)throw e;return console.log(`[teamService] Successfully fetched ${(t==null?void 0:t.length)||0} teams`),t||[]}catch(t){throw console.error("[teamService] Failed to fetch teams:",t),t}},async getAllWithMembers(){try{console.log("[teamService] Fetching all teams with members...");const{data:t,error:e}=await J.from("teams").select(`
team_id,
  team_name,
  team_name_ar,
  partner_id,
  auth_user_id,
  team_leader_id,
  created_at
    `).order("created_at",{ascending:!1});if(e)throw e;if(!t||t.length===0)return[];const r=t.map(l=>l.team_id),{data:n,error:s}=await J.from("team_members").select(`
team_id,
  auth_user_id,
  joined_at
    `).in("team_id",r);if(s)throw s;const o=(n||[]).reduce((l,c)=>(l[c.team_id]||(l[c.team_id]=[]),l[c.team_id].push({auth_user_id:c.auth_user_id,joined_at:c.joined_at}),l),{}),i=t.map(l=>({...l,team_members:o[l.team_id]||[]}));return console.log(`[teamService] Successfully fetched ${i.length} teams with members`),i}catch(t){throw console.error("[teamService] Failed to fetch teams with members:",t),t}},async getAllTeamMembers(){try{console.log("[teamService] Fetching all team members with user details...");const{data:t,error:e}=await J.from("team_members").select(`
          team_id,
  users(
    user_id,
    user_name,
    user_email,
    user_role,
    avatar,
    auth_user_id,
    client_contact,
    company_name,
    created_at,
    updated_at
  )
    `);if(e)throw e;const r=(t||[]).reduce((n,s)=>{const o=s.team_id;return n[o]||(n[o]=[]),n[o].push(s.users),n},{});return console.log(`[teamService] Successfully fetched members for ${Object.keys(r).length} teams`),r}catch(t){throw console.error("[teamService] Failed to fetch all team members:",t),t}},async getById(t){try{const{data:e,error:r}=await J.from("teams").select("*").eq("team_id",t).single();return r?null:e}catch(e){return console.error("[teamService] Failed to fetch team:",e),null}},async create(t){try{const{data:e,error:r}=await J.from("teams").insert(t).select().single();if(r)throw r;if(e)try{let n=0;if(t.auth_user_id){const{data:o}=await J.from("users").select("user_id").eq("auth_user_id",t.auth_user_id).single();o&&(n=o.user_id)}const{error:s}=await J.from("rooms").insert({room_name:`General - ${e.team_name}`,is_private:!1,team_id:e.team_id,created_by:n,auth_user_id:t.auth_user_id||null});s&&console.error("[teamService] Failed to create default room for team:",s)}catch(n){console.error("[teamService] Error creating default room:",n)}return e}catch(e){throw console.error("[teamService] Failed to create team:",e),e}},async update(t,e){try{const r=wn(e,{team_name:"team_name"}),{error:n}=await J.from("teams").update(r).eq("team_id",t);if(n)throw n}catch(r){throw console.error("[teamService] Failed to update team:",r),r}},async delete(t){try{const{error:e}=await J.from("teams").delete().eq("team_id",t);if(e)throw e}catch(e){throw console.error("[teamService] Failed to delete team:",e),e}},async getTeamMembers(t){try{console.log("[teamService] Fetching members for team:",t);const{data:e,error:r}=await J.from("team_members").select(`
auth_user_id,
  users!auth_user_id(
    user_id,
    user_name,
    user_email,
    user_role,
    avatar,
    auth_user_id,
    client_contact,
    company_name,
    created_at,
    updated_at
  )
    `).eq("team_id",t);if(r)throw r;const n=(e==null?void 0:e.map(s=>s.users).filter(Boolean))||[];return console.log(`[teamService] Found ${n.length} members for team ${t}`),n}catch(e){throw console.error("[teamService] Failed to fetch team members:",e),e}},async addMember(t,e){try{console.log("[teamService] Adding member",e,"to team",t);const{error:r}=await J.from("team_members").insert({team_id:t,auth_user_id:e});if(r)throw r;console.log("[teamService] Successfully added member to team")}catch(r){throw console.error("[teamService] Failed to add member to team:",r),r}},async removeMember(t,e){try{console.log("[teamService] Removing member",e,"from team",t);const{error:r}=await J.from("team_members").delete().eq("team_id",t).eq("auth_user_id",e);if(r)throw r;console.log("[teamService] Successfully removed member from team")}catch(r){throw console.error("[teamService] Failed to remove member from team:",r),r}}},rm={async getAll(){try{console.log("[ticketService] Fetching all tickets...");const{data:t,error:e}=await J.from("tickets").select("*").order("created_date",{ascending:!1});if(e)throw e;return console.log(`[ticketService] Successfully fetched ${(t==null?void 0:t.length)||0} tickets`),t||[]}catch(t){throw console.error("[ticketService] Failed to fetch tickets:",t),t}},async getById(t){try{const{data:e,error:r}=await J.from("tickets").select("*").eq("ticket_id",t).single();return r?null:e}catch(e){return console.error("[ticketService] Failed to fetch ticket:",e),null}},async create(t){try{const{data:e,error:r}=await J.from("tickets").insert({created_by:t.created_by,assigned_to:t.assigned_to,subject:t.subject,description:t.description,priority:t.priority,status:t.status}).select().single();if(r)throw r;return e}catch(e){throw console.error("[ticketService] Failed to create ticket:",e),e}},async update(t,e){try{const r={};e.created_by!==void 0&&(r.created_by=e.created_by),e.assigned_to!==void 0&&(r.assigned_to=e.assigned_to),e.subject&&(r.subject=e.subject),e.description!==void 0&&(r.description=e.description),e.priority&&(r.priority=e.priority),e.status&&(r.status=e.status),e.resolved_date!==void 0&&(r.resolved_date=e.resolved_date);const{error:n}=await J.from("tickets").update(r).eq("ticket_id",t);if(n)throw n}catch(r){throw console.error("[ticketService] Failed to update ticket:",r),r}},async delete(t){try{const{error:e}=await J.from("tickets").delete().eq("ticket_id",t);if(e)throw e}catch(e){throw console.error("[ticketService] Failed to delete ticket:",e),e}}},Ko={async getByRoom(t,e){try{let r=J.from("messages").select(`
  *,
  sender: users!auth_user_id(
    user_id,
    user_name,
    avatar,
    auth_user_id
  )
    `).eq("room_id",t).order("created_at",{ascending:!1});e!=null&&e.limit&&(r=r.limit(e.limit)),e!=null&&e.before&&(r=r.lt("created_at",e.before));const{data:n,error:s}=await r;if(s)throw s;return(n||[]).reverse()}catch(r){throw console.error("[messageService] Failed to fetch messages:",r),r}},async create(t){try{const{data:e,error:r}=await J.from("messages").insert(t).select().single();if(r)throw r;return e}catch(e){throw console.error("[messageService] Failed to create message:",e),e}},async update(t,e){try{const{error:r}=await J.from("messages").update({content:e,is_edited:!0}).eq("message_id",t);if(r)throw r}catch(r){throw console.error("[messageService] Failed to update message:",r),r}},async delete(t){try{const{error:e}=await J.from("messages").delete().eq("message_id",t);if(e)throw e}catch(e){throw console.error("[messageService] Failed to delete message:",e),e}},async uploadAttachment(t){try{const e=t.name.split(".").pop(),n=`${`${Math.random().toString(36).substring(2)}_${Date.now()}.${e}`}`,{error:s}=await J.storage.from("chat-attachments").upload(n,t);if(s)throw s;const{data:o}=J.storage.from("chat-attachments").getPublicUrl(n);return o.publicUrl}catch(e){throw console.error("[messageService] Failed to upload attachment:",e),e}}},Fs={async getAll(){try{console.log("[leadService] Fetching all leads...");const{data:t,error:e}=await J.from("leads").select("*").order("created_date",{ascending:!1});if(e)throw e;return console.log(`[leadService] Successfully fetched ${(t==null?void 0:t.length)||0} leads`),t||[]}catch(t){throw console.error("[leadService] Failed to fetch leads:",t),t}},async getById(t){try{const{data:e,error:r}=await J.from("leads").select("*").eq("lead_id",t).single();return r?null:e}catch(e){return console.error("[leadService] Failed to fetch lead:",e),null}},async create(t){try{const{data:e,error:r}=await J.from("leads").insert({lead_name:t.lead_name,lead_description:t.lead_description,client_name:t.client_name,client_user_id:t.client_user_id,created_by:t.created_by,stage:t.stage,assigned_to:t.assigned_to,assigned_at:t.assigned_at,value:t.value||0,currency:t.currency||"SAR"}).select().single();if(r)throw r;return e}catch(e){throw console.error("[leadService] Failed to create lead:",e),e}},async update(t,e){try{const r={};e.lead_name&&(r.lead_name=e.lead_name),e.lead_description!==void 0&&(r.lead_description=e.lead_description),e.client_name&&(r.client_name=e.client_name),e.client_user_id&&(r.client_user_id=e.client_user_id),e.stage!==void 0&&(r.stage=e.stage),e.assigned_to!==void 0&&(r.assigned_to=e.assigned_to),e.assigned_at!==void 0&&(r.assigned_at=e.assigned_at),e.value!==void 0&&(r.value=e.value),e.currency!==void 0&&(r.currency=e.currency);const{error:n}=await J.from("leads").update(r).eq("lead_id",t);if(n)throw n}catch(r){throw console.error("[leadService] Failed to update lead:",r),r}},async delete(t){try{const{error:e}=await J.from("leads").delete().eq("lead_id",t);if(e)throw e}catch(e){throw console.error("[leadService] Failed to delete lead:",e),e}}},Xu={async getByRelated(t,e){try{console.log(`[noteService] Fetching notes for ${t} ${e}...`);const{data:r,error:n}=await J.from("notes").select(`
  *,
  user: created_by(
    user_id,
    user_name,
    user_name_ar,
    avatar
  )
    `).eq("related_to_type",t).eq("related_to_id",e).order("created_at",{ascending:!1});if(n)throw n;return console.log(`[noteService] Successfully fetched ${(r==null?void 0:r.length)||0} notes`),r||[]}catch(r){throw console.error("[noteService] Failed to fetch notes:",r),r}},async create(t){try{const{data:e,error:r}=await J.from("notes").insert({content:t.content,related_to_type:t.related_to_type,related_to_id:t.related_to_id,created_by:t.created_by}).select().single();if(r)throw r;return console.log("[noteService] Successfully created note"),e}catch(e){throw console.error("[noteService] Failed to create note:",e),e}},async update(t,e){try{const{error:r}=await J.from("notes").update({content:e,updated_at:new Date().toISOString()}).eq("note_id",t);if(r)throw r;console.log("[noteService] Successfully updated note")}catch(r){throw console.error("[noteService] Failed to update note:",r),r}},async delete(t){try{const{error:e}=await J.from("notes").delete().eq("note_id",t);if(e)throw e;console.log("[noteService] Successfully deleted note")}catch(e){throw console.error("[noteService] Failed to delete note:",e),e}}},Cn={async getAll(){try{console.log("[surveyTemplateService] Fetching all survey templates...");const{data:t,error:e}=await J.from("survey_templates").select("*").order("created_at",{ascending:!1});if(e)throw e;return console.log(`[surveyTemplateService] Successfully fetched ${(t==null?void 0:t.length)||0} templates`),t||[]}catch(t){throw console.error("[surveyTemplateService] Failed to fetch templates:",t),t}},async getById(t){try{const{data:e,error:r}=await J.from("survey_templates").select("*").eq("template_id",t).single();return r?null:e}catch(e){return console.error("[surveyTemplateService] Failed to fetch template:",e),null}},async create(t){try{const{data:e,error:r}=await J.from("survey_templates").insert(t).select().single();if(r)throw r;return e}catch(e){throw console.error("[surveyTemplateService] Failed to create template:",e),e}},async update(t,e){try{const r={};e.template_name&&(r.template_name=e.template_name),e.template_name_ar&&(r.template_name_ar=e.template_name_ar),e.template_description!==void 0&&(r.template_description=e.template_description),e.template_description_ar!==void 0&&(r.template_description_ar=e.template_description_ar),e.category&&(r.category=e.category),e.is_active!==void 0&&(r.is_active=e.is_active),e.is_default!==void 0&&(r.is_default=e.is_default);const{error:n}=await J.from("survey_templates").update(r).eq("template_id",t);if(n)throw n}catch(r){throw console.error("[surveyTemplateService] Failed to update template:",r),r}},async delete(t){try{const{error:e}=await J.from("survey_templates").delete().eq("template_id",t);if(e)throw e}catch(e){throw console.error("[surveyTemplateService] Failed to delete template:",e),e}},async getFields(t){try{console.log("[surveyTemplateService] Fetching fields for template:",t);const{data:e,error:r}=await J.from("survey_template_fields").select("*").eq("template_id",t).order("field_order",{ascending:!0});if(r)throw r;return console.log(`[surveyTemplateService] Successfully fetched ${(e==null?void 0:e.length)||0} fields`),e||[]}catch(e){throw console.error("[surveyTemplateService] Failed to fetch template fields:",e),e}},async createField(t){try{const{data:e,error:r}=await J.from("survey_template_fields").insert(t).select().single();if(r)throw r;return e}catch(e){throw console.error("[surveyTemplateService] Failed to create field:",e),e}},async updateField(t,e){try{const r={};e.field_order!==void 0&&(r.field_order=e.field_order),e.field_type&&(r.field_type=e.field_type),e.field_label&&(r.field_label=e.field_label),e.field_label_ar&&(r.field_label_ar=e.field_label_ar),e.help_text!==void 0&&(r.help_text=e.help_text),e.help_text_ar!==void 0&&(r.help_text_ar=e.help_text_ar),e.is_required!==void 0&&(r.is_required=e.is_required),e.field_options!==void 0&&(r.field_options=e.field_options),e.validation_rules!==void 0&&(r.validation_rules=e.validation_rules),e.default_value!==void 0&&(r.default_value=e.default_value),e.conditional_logic!==void 0&&(r.conditional_logic=e.conditional_logic);const{error:n}=await J.from("survey_template_fields").update(r).eq("field_id",t);if(n)throw n}catch(r){throw console.error("[surveyTemplateService] Failed to update field:",r),r}},async deleteField(t){try{const{error:e}=await J.from("survey_template_fields").delete().eq("field_id",t);if(e)throw e}catch(e){throw console.error("[surveyTemplateService] Failed to delete field:",e),e}}},Yd={async getAll(){try{console.log("[surveyService] Fetching all surveys...");const{data:t,error:e}=await J.from("surveys").select("*").order("created_at",{ascending:!1});if(e)throw e;return console.log(`[surveyService] Successfully fetched ${(t==null?void 0:t.length)||0} surveys`),t||[]}catch(t){throw console.error("[surveyService] Failed to fetch surveys:",t),t}},async getById(t){try{const{data:e,error:r}=await J.from("surveys").select("*").eq("survey_id",t).single();return r?null:e}catch(e){return console.error("[surveyService] Failed to fetch survey:",e),null}},async create(t){try{const{data:e,error:r}=await J.from("surveys").insert(t).select().single();if(r)throw r;return e}catch(e){throw console.error("[surveyService] Failed to create survey:",e),e}},async update(t,e){try{const r={};e.template_id!==void 0&&(r.template_id=e.template_id),e.survey_name&&(r.survey_name=e.survey_name),e.survey_description!==void 0&&(r.survey_description=e.survey_description),e.client_name&&(r.client_name=e.client_name),e.client_name_ar&&(r.client_name_ar=e.client_name_ar),e.client_contact!==void 0&&(r.client_contact=e.client_contact),e.client_email&&(r.client_email=e.client_email),e.client_address&&(r.client_address=e.client_address),e.client_company&&(r.client_company=e.client_company),e.client_company_ar&&(r.client_company_ar=e.client_company_ar),e.survey_responses!==void 0&&(r.survey_responses=e.survey_responses),e.location_latitude!==void 0&&(r.location_latitude=e.location_latitude),e.location_longitude!==void 0&&(r.location_longitude=e.location_longitude),e.location_accuracy!==void 0&&(r.location_accuracy=e.location_accuracy),e.location_address&&(r.location_address=e.location_address),e.status&&(r.status=e.status),e.lead_id!==void 0&&(r.lead_id=e.lead_id),e.converted_to_lead_at!==void 0&&(r.converted_to_lead_at=e.converted_to_lead_at),e.device_info!==void 0&&(r.device_info=e.device_info),e.completion_time_seconds!==void 0&&(r.completion_time_seconds=e.completion_time_seconds),e.notes&&(r.notes=e.notes),e.notes_ar&&(r.notes_ar=e.notes_ar);const{error:n}=await J.from("surveys").update(r).eq("survey_id",t);if(n)throw n}catch(r){throw console.error("[surveyService] Failed to update survey:",r),r}},async delete(t){try{const{error:e}=await J.from("surveys").delete().eq("survey_id",t);if(e)throw e}catch(e){throw console.error("[surveyService] Failed to delete survey:",e),e}}},xe=f.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:Z("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));xe.displayName="Card";const Ie=f.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:Z("flex flex-col space-y-1.5 p-6",t),...e}));Ie.displayName="CardHeader";const qe=f.forwardRef(({className:t,...e},r)=>a.jsx("h3",{ref:r,className:Z("text-2xl font-semibold leading-none tracking-tight",t),...e}));qe.displayName="CardTitle";const Q5=f.forwardRef(({className:t,...e},r)=>a.jsx("p",{ref:r,className:Z("text-sm text-muted-foreground",t),...e}));Q5.displayName="CardDescription";const _e=f.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:Z("p-6 pt-0",t),...e}));_e.displayName="CardContent";const J5=f.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:Z("flex items-center p-6 pt-0",t),...e}));J5.displayName="CardFooter";var tx="Progress",rx=100,[X5,kW]=jr(tx),[Z5,eU]=X5(tx),lC=f.forwardRef((t,e)=>{const{__scopeProgress:r,value:n=null,max:s,getValueLabel:o=tU,...i}=t;(s||s===0)&&!N0(s)&&console.error(rU(`${s}`,"Progress"));const l=N0(s)?s:rx;n!==null&&!k0(n,l)&&console.error(nU(`${n}`,"Progress"));const c=k0(n,l)?n:null,u=Qd(c)?o(c,l):void 0;return a.jsx(Z5,{scope:r,value:c,max:l,children:a.jsx(be.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Qd(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":dC(c,l),"data-value":c??void 0,"data-max":l,...i,ref:e})})});lC.displayName=tx;var cC="ProgressIndicator",uC=f.forwardRef((t,e)=>{const{__scopeProgress:r,...n}=t,s=eU(cC,r);return a.jsx(be.div,{"data-state":dC(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...n,ref:e})});uC.displayName=cC;function tU(t,e){return`${Math.round(t/e*100)}%`}function dC(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Qd(t){return typeof t=="number"}function N0(t){return Qd(t)&&!isNaN(t)&&t>0}function k0(t,e){return Qd(t)&&!isNaN(t)&&t<=e&&t>=0}function rU(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${rx}\`.`}function nU(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${rx} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var hC=lC,sU=uC;const fs=f.forwardRef(({className:t,value:e,...r},n)=>a.jsx(hC,{ref:n,className:Z("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:a.jsx(sU,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));fs.displayName=hC.displayName;function fC(){Xe();const[t,e]=f.useState(new Date);f.useEffect(()=>{const s=setInterval(()=>{e(new Date)},1e3);return()=>clearInterval(s)},[]);const r=s=>s.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"short",day:"numeric"}),n=s=>s.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"});return a.jsxs("div",{className:"flex items-center gap-3 text-muted-foreground",children:[a.jsx("div",{className:"text-lg font-mono font-semibold text-foreground",children:n(t)}),a.jsx("div",{className:"text-sm",children:r(t)})]})}function aU(){const{t}=Xe();_a();const[e,r]=f.useState([]),[n,s]=f.useState([]),[o,i]=f.useState([]),[l,c]=f.useState([]),[u,d]=f.useState([]),[h,m]=f.useState(!0),[p,v]=f.useState(null),{user:g,loading:w}=yt();console.log("[Dashboard] Rendering. Auth state:",{user:g?{id:g.id,email:g.email,role:g.role}:null,authLoading:w,hasUser:!!g,loading:h}),f.useEffect(()=>{console.log("[Dashboard] useEffect - User changed:",{hasUser:!!g,authLoading:w}),g&&!w&&(console.log("[Dashboard] User is authenticated, loading data..."),y())},[g,w]);const y=async()=>{console.log("[Dashboard] Starting to load data...");try{m(!0),v(null),console.log("[Dashboard] Fetching data...");const[z,B,Q,R,Y]=await Promise.all([On.getAll().catch(M=>(console.error("[Dashboard] Error fetching projects:",M),[])),ex.getAll().catch(M=>(console.error("[Dashboard] Error fetching clients:",M),[])),qt.getAll().catch(M=>(console.error("[Dashboard] Error fetching users:",M),[])),Fs.getAll().catch(M=>(console.error("[Dashboard] Error fetching leads:",M),[])),Yd.getAll().catch(M=>(console.error("[Dashboard] Error fetching surveys:",M),[]))]);console.log("[Dashboard] Data fetched successfully:",{projects:z.length,clients:B.length,users:Q.length,leads:R.length,surveys:Y.length}),r(z),s(B),i(Q),c(R),d(Y)}catch(z){console.error("[Dashboard] Failed to load data:",z),v(z.message||"Failed to load data")}finally{console.log("[Dashboard] Data loading completed"),m(!1)}};if(h||w||!g)return a.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:t("common.loading")})]})});if(p)return a.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-red-600",children:t("common.error")}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:p}),a.jsx(q,{onClick:y,className:"mt-4",children:"Retry"})]})});const x=e.length,_=e.filter(z=>z.progress===100).length,b=e.filter(z=>z.progress>0&&z.progress<100).length,j=e.filter(z=>z.progress===0).length,N=n.length,k=o.length,E=l.length,T=u.length,P=e.sort((z,B)=>new Date(B.created_date||"").getTime()-new Date(z.created_date||"").getTime()).slice(0,5);return a.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold tracking-tight",children:t("dashboard.title")}),a.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:t("dashboard.subtitle")})]}),a.jsx("div",{className:"flex-shrink-0",children:a.jsx(fC,{})})]}),a.jsxs("div",{className:"grid gap-4 sm:gap-6 grid-cols-2 md:grid-cols-3 lg:grid-cols-6",children:[a.jsxs(xe,{children:[a.jsxs(Ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(qe,{className:"text-xs sm:text-sm font-medium",children:t("dashboard.totalProjects")}),a.jsx(UL,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),a.jsxs(_e,{children:[a.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:x}),a.jsxs("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:[_," ",t("dashboard.completed")]})]})]}),a.jsxs(xe,{children:[a.jsxs(Ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(qe,{className:"text-xs sm:text-sm font-medium",children:t("dashboard.inProgress")}),a.jsx(Mr,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),a.jsxs(_e,{children:[a.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:b}),a.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:t("dashboard.activeProjects")})]})]}),a.jsxs(xe,{children:[a.jsxs(Ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(qe,{className:"text-xs sm:text-sm font-medium",children:t("dashboard.clients")}),a.jsx(po,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),a.jsxs(_e,{children:[a.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:N}),a.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:t("dashboard.totalClients")})]})]}),a.jsxs(xe,{children:[a.jsxs(Ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(qe,{className:"text-xs sm:text-sm font-medium",children:t("dashboard.teamMembers")}),a.jsx(Mr,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),a.jsxs(_e,{children:[a.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:k}),a.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:t("dashboard.activeUsers")})]})]}),a.jsxs(xe,{children:[a.jsxs(Ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(qe,{className:"text-xs sm:text-sm font-medium",children:t("dashboard.leads")}),a.jsx(Ud,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),a.jsxs(_e,{children:[a.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:E}),a.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:t("dashboard.totalLeads")})]})]}),a.jsxs(xe,{children:[a.jsxs(Ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(qe,{className:"text-xs sm:text-sm font-medium",children:t("dashboard.surveys")}),a.jsx(ni,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),a.jsxs(_e,{children:[a.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:T}),a.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:t("dashboard.totalSurveys")})]})]})]}),a.jsxs("div",{className:"grid gap-4 sm:gap-6 grid-cols-1 md:grid-cols-2",children:[a.jsxs(xe,{children:[a.jsx(Ie,{children:a.jsx(qe,{className:"text-base sm:text-lg",children:t("dashboard.recentProjects")})}),a.jsx(_e,{className:"space-y-3 sm:space-y-4",children:P.length>0?P.map(z=>{const B=n.find(Q=>Q.auth_user_id===z.created_by);return a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[a.jsxs("div",{className:"space-y-1 min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium leading-none truncate",children:H(z,"project_name")}),a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:B?H(B,"user_name"):"No client"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(fs,{value:z.progress,className:"w-16 sm:w-20 h-2"}),a.jsxs("span",{className:"text-xs sm:text-sm text-muted-foreground w-8",children:[z.progress,"%"]})]})]},z.project_id)}):a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:t("dashboard.noProjectsYet")})})]}),a.jsxs(xe,{children:[a.jsx(Ie,{children:a.jsx(qe,{className:"text-base sm:text-lg",children:t("dashboard.projectStatus")})}),a.jsxs(_e,{className:"space-y-3 sm:space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 rounded-full bg-green-500"}),a.jsx("span",{className:"text-xs sm:text-sm",children:t("dashboard.completedStatus")})]}),a.jsx("span",{className:"text-xs sm:text-sm font-medium",children:_})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 rounded-full bg-blue-500"}),a.jsx("span",{className:"text-xs sm:text-sm",children:t("dashboard.inProgressStatus")})]}),a.jsx("span",{className:"text-xs sm:text-sm font-medium",children:b})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 rounded-full bg-gray-500"}),a.jsx("span",{className:"text-xs sm:text-sm",children:t("dashboard.notStartedStatus")})]}),a.jsx("span",{className:"text-xs sm:text-sm font-medium",children:j})]})]})]})]})]})}const zh={users:["users"],projects:["projects"],tasks:["tasks"],stages:["stages"],globalStages:["stages","global"],clients:["clients"],teams:["teams"],teamMembers:["teams","members"],tickets:["tickets"],projectUsers:t=>["projects",t,"users"],comments:t=>["tasks",t,"comments"],rooms:t=>["rooms",t],messages:t=>["messages",t],userProjects:t=>["users",t,"projects"]},oU=()=>gh({queryKey:zh.users,queryFn:qt.getAll}),iU=t=>gh({queryKey:zh.userProjects(t),queryFn:()=>On.getByUserAuthId(t),enabled:!!t}),lU=()=>gh({queryKey:zh.tasks,queryFn:Js.getAll}),cU=()=>gh({queryKey:zh.globalStages,queryFn:pr.getGlobalStages}),uU=kc("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Me({className:t,variant:e,...r}){return a.jsx("div",{className:Z(uU({variant:e}),t),...r})}function dU(){var k;const{t}=Xe(),[e,r]=f.useState([]),[n,s]=f.useState([]),[o,i]=f.useState([]),[l,c]=f.useState([]),[u,d]=f.useState(!0),[h,m]=f.useState(null),{user:p,loading:v}=yt(),{data:g=[],isLoading:w}=iU((p==null?void 0:p.id)||"");f.useEffect(()=>{p&&!v&&y()},[p,v]);const y=async()=>{try{d(!0),m(null);const T=(await Js.getAll()).filter(Q=>{var R;return Q.assigned_to===((R=p==null?void 0:p.profile)==null?void 0:R.user_id)}),P=await qt.getAll(),z=await Fs.getAll(),B=await Yd.getAll().catch(Q=>(console.error("[EmployeeDashboard] Error fetching surveys:",Q),[]));r(T),s(P),i(z),c(B)}catch(E){console.error("Failed to load employee data:",E),m(E.message||"Failed to load data")}finally{d(!1)}};if(u||v||!p)return a.jsx("div",{className:"flex items-center justify-center flex-1",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:t("common.loading")})]})});if(h)return a.jsx("div",{className:"flex items-center justify-center flex-1",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-red-600",children:t("common.error")}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:h}),a.jsx(q,{onClick:y,className:"mt-4",children:t("dashboard.retry")})]})});const x=e.filter(E=>E.task_status==="completed").length,_=e.filter(E=>E.task_status==="in_progress").length;e.filter(E=>E.task_status==="pending").length;const b=g.filter(E=>E.progress!==void 0&&E.progress<100).length,j=l.length,N=e.sort((E,T)=>new Date(T.created_at||"").getTime()-new Date(E.created_at||"").getTime()).slice(0,5);return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold tracking-tight",children:t("employeeDashboard.title")}),a.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:t("employeeDashboard.subtitle",{name:H(p.profile||{},"user_name")||p.email})})]}),a.jsx("div",{className:"flex-shrink-0",children:a.jsx(fC,{})})]}),a.jsxs(xe,{children:[a.jsx(Ie,{children:a.jsxs(qe,{className:"flex items-center gap-2",children:[a.jsx(us,{className:"h-5 w-5"}),t("employeeDashboard.employeeInfo")]})}),a.jsx(_e,{children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:t("employeeDashboard.name")}),a.jsx("p",{className:"font-medium",children:H(p.profile||{},"user_name")||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:t("employeeDashboard.email")}),a.jsx("p",{className:"font-medium",children:p.email})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:t("employeeDashboard.role")}),a.jsx(Me,{variant:"secondary",className:"capitalize",children:p.role})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:t("employeeDashboard.memberSince")}),a.jsx("p",{className:"font-medium",children:(k=p.profile)!=null&&k.created_at?new Date(p.profile.created_at).toLocaleDateString():"N/A"})]})]})})]}),a.jsxs("div",{className:"grid gap-4 sm:gap-6 grid-cols-2 md:grid-cols-3 lg:grid-cols-6",children:[a.jsxs(xe,{children:[a.jsxs(Ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(qe,{className:"text-sm font-medium",children:t("employeeDashboard.myProjects")}),a.jsx(ri,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(_e,{children:[a.jsx("div",{className:"text-2xl font-bold",children:g.length}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[b," ",t("employeeDashboard.active")]})]})]}),a.jsxs(xe,{children:[a.jsxs(Ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(qe,{className:"text-sm font-medium",children:t("employeeDashboard.myTasks")}),a.jsx(Ud,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(_e,{children:[a.jsx("div",{className:"text-2xl font-bold",children:e.length}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[x," ",t("employeeDashboard.completed")]})]})]}),a.jsxs(xe,{children:[a.jsxs(Ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(qe,{className:"text-sm font-medium",children:t("employeeDashboard.inProgress")}),a.jsx(Qs,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(_e,{children:[a.jsx("div",{className:"text-2xl font-bold",children:_}),a.jsx("p",{className:"text-xs text-muted-foreground",children:t("employeeDashboard.activeTasks")})]})]}),a.jsxs(xe,{children:[a.jsxs(Ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(qe,{className:"text-sm font-medium",children:t("employeeDashboard.completedTasks")}),a.jsx(uc,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(_e,{children:[a.jsx("div",{className:"text-2xl font-bold",children:x}),a.jsx("p",{className:"text-xs text-muted-foreground",children:t("employeeDashboard.finishedTasks")})]})]}),a.jsxs(xe,{children:[a.jsxs(Ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(qe,{className:"text-sm font-medium",children:t("employeeDashboard.leads")}),a.jsx(Ud,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(_e,{children:[a.jsx("div",{className:"text-2xl font-bold",children:o.length}),a.jsx("p",{className:"text-xs text-muted-foreground",children:t("employeeDashboard.totalLeads")})]})]}),a.jsxs(xe,{children:[a.jsxs(Ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(qe,{className:"text-sm font-medium",children:t("employeeDashboard.surveys")}),a.jsx(ni,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(_e,{children:[a.jsx("div",{className:"text-2xl font-bold",children:j}),a.jsx("p",{className:"text-xs text-muted-foreground",children:t("employeeDashboard.totalSurveys")})]})]})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsxs(xe,{children:[a.jsx(Ie,{children:a.jsx(qe,{children:t("employeeDashboard.myProjects")})}),a.jsx(_e,{className:"space-y-4",children:g.length>0?g.slice(0,5).map(E=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-medium leading-none",children:E.project_name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:E.project_description||t("employeeDashboard.noDescription")})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(fs,{value:E.progress||0,className:"w-16 h-2"}),a.jsxs("span",{className:"text-sm text-muted-foreground w-8",children:[E.progress||0,"%"]})]})]},E.project_id)):a.jsx("p",{className:"text-sm text-muted-foreground",children:t("employeeDashboard.noProjectsAssigned")})})]}),a.jsxs(xe,{children:[a.jsx(Ie,{children:a.jsx(qe,{children:t("employeeDashboard.recentTasks")})}),a.jsx(_e,{className:"space-y-4",children:N.length>0?N.map(E=>{var T;return a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-medium leading-none",children:E.task_name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:E.description||t("employeeDashboard.noDescription")})]}),a.jsx(Me,{variant:E.task_status==="completed"?"default":E.task_status==="in_progress"?"secondary":"outline",className:"text-xs",children:(T=E.task_status)==null?void 0:T.replace("_"," ")})]},E.task_id)}):a.jsx("p",{className:"text-sm text-muted-foreground",children:t("employeeDashboard.noTasksAssigned")})})]})]})]})}const Wh=f.forwardRef(({className:t,...e},r)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:r,className:Z("w-full caption-bottom text-sm",t),...e})}));Wh.displayName="Table";const Vh=f.forwardRef(({className:t,...e},r)=>a.jsx("thead",{ref:r,className:Z("[&_tr]:border-b",t),...e}));Vh.displayName="TableHeader";const Hh=f.forwardRef(({className:t,...e},r)=>a.jsx("tbody",{ref:r,className:Z("[&_tr:last-child]:border-0",t),...e}));Hh.displayName="TableBody";const hU=f.forwardRef(({className:t,...e},r)=>a.jsx("tfoot",{ref:r,className:Z("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));hU.displayName="TableFooter";const ns=f.forwardRef(({className:t,...e},r)=>a.jsx("tr",{ref:r,className:Z("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",t),...e}));ns.displayName="TableRow";const wt=f.forwardRef(({className:t,...e},r)=>a.jsx("th",{ref:r,className:Z("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));wt.displayName="TableHead";const ut=f.forwardRef(({className:t,...e},r)=>a.jsx("td",{ref:r,className:Z("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));ut.displayName="TableCell";const fU=f.forwardRef(({className:t,...e},r)=>a.jsx("caption",{ref:r,className:Z("mt-4 text-sm text-muted-foreground",t),...e}));fU.displayName="TableCaption";var qh="Popover",[mC,CW]=jr(qh,[Yi]),Wc=Yi(),[mU,Na]=mC(qh),pC=t=>{const{__scopePopover:e,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:i=!1}=t,l=Wc(e),c=f.useRef(null),[u,d]=f.useState(!1),[h,m]=fa({prop:n,defaultProp:s??!1,onChange:o,caller:qh});return a.jsx(Iv,{...l,children:a.jsx(mU,{scope:e,contentId:vn(),triggerRef:c,open:h,onOpenChange:m,onOpenToggle:f.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:u,onCustomAnchorAdd:f.useCallback(()=>d(!0),[]),onCustomAnchorRemove:f.useCallback(()=>d(!1),[]),modal:i,children:r})})};pC.displayName=qh;var gC="PopoverAnchor",pU=f.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Na(gC,r),o=Wc(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=s;return f.useEffect(()=>(i(),()=>l()),[i,l]),a.jsx(Ch,{...o,...n,ref:e})});pU.displayName=gC;var vC="PopoverTrigger",xC=f.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Na(vC,r),o=Wc(r),i=Ae(e,s.triggerRef),l=a.jsx(be.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":jC(s.open),...n,ref:i,onClick:ue(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:a.jsx(Ch,{asChild:!0,...o,children:l})});xC.displayName=vC;var nx="PopoverPortal",[gU,vU]=mC(nx,{forceMount:void 0}),yC=t=>{const{__scopePopover:e,forceMount:r,children:n,container:s}=t,o=Na(nx,e);return a.jsx(gU,{scope:e,forceMount:r,children:a.jsx(cr,{present:r||o.open,children:a.jsx(Dc,{asChild:!0,container:s,children:n})})})};yC.displayName=nx;var Di="PopoverContent",wC=f.forwardRef((t,e)=>{const r=vU(Di,t.__scopePopover),{forceMount:n=r.forceMount,...s}=t,o=Na(Di,t.__scopePopover);return a.jsx(cr,{present:n||o.open,children:o.modal?a.jsx(yU,{...s,ref:e}):a.jsx(wU,{...s,ref:e})})});wC.displayName=Di;var xU=ua("PopoverContent.RemoveScroll"),yU=f.forwardRef((t,e)=>{const r=Na(Di,t.__scopePopover),n=f.useRef(null),s=Ae(e,n),o=f.useRef(!1);return f.useEffect(()=>{const i=n.current;if(i)return Eh(i)},[]),a.jsx(Ac,{as:xU,allowPinchZoom:!0,children:a.jsx(_C,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ue(t.onCloseAutoFocus,i=>{var l;i.preventDefault(),o.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:ue(t.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;o.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:ue(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),wU=f.forwardRef((t,e)=>{const r=Na(Di,t.__scopePopover),n=f.useRef(!1),s=f.useRef(!1);return a.jsx(_C,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=t.onCloseAutoFocus)==null||i.call(t,o),o.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;((u=r.triggerRef.current)==null?void 0:u.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),_C=f.forwardRef((t,e)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...h}=t,m=Na(Di,r),p=Wc(r);return jh(),a.jsx(Rc,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:a.jsx(Tc,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:a.jsx(Lv,{"data-state":jC(m.open),role:"dialog",id:m.contentId,...p,...h,ref:e,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),bC="PopoverClose",_U=f.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Na(bC,r);return a.jsx(be.button,{type:"button",...n,ref:e,onClick:ue(t.onClick,()=>s.onOpenChange(!1))})});_U.displayName=bC;var bU="PopoverArrow",jU=f.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Wc(r);return a.jsx(Fv,{...s,...n,ref:e})});jU.displayName=bU;function jC(t){return t?"open":"closed"}var SU=pC,NU=xC,kU=yC,SC=wC;const CU=SU,EU=NU,NC=f.forwardRef(({className:t,align:e="center",sideOffset:r=4,...n},s)=>a.jsx(kU,{children:a.jsx(SC,{ref:s,align:e,sideOffset:r,className:Z("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));NC.displayName=SC.displayName;function Te(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function br(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function rr(t,e){const r=Te(t);return isNaN(e)?br(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function jn(t,e){const r=Te(t);if(isNaN(e))return br(t,NaN);if(!e)return r;const n=r.getDate(),s=br(t,r.getTime());s.setMonth(r.getMonth()+e+1,0);const o=s.getDate();return n>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),n),r)}const sx=6048e5,PU=864e5,Au=43200,C0=1440;let TU={};function Ji(){return TU}function Wn(t,e){var l,c,u,d;const r=Ji(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Te(t),o=s.getDay(),i=(o<n?7:0)+o-n;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function co(t){return Wn(t,{weekStartsOn:1})}function kC(t){const e=Te(t),r=e.getFullYear(),n=br(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=co(n),o=br(t,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const i=co(o);return e.getTime()>=s.getTime()?r+1:e.getTime()>=i.getTime()?r:r-1}function Ai(t){const e=Te(t);return e.setHours(0,0,0,0),e}function Mi(t){const e=Te(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function Fn(t,e){const r=Ai(t),n=Ai(e),s=+r-Mi(r),o=+n-Mi(n);return Math.round((s-o)/PU)}function RU(t){const e=kC(t),r=br(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),co(r)}function tg(t,e){const r=e*7;return rr(t,r)}function OU(t,e){return jn(t,e*12)}function DU(t){let e;return t.forEach(function(r){const n=Te(r);(e===void 0||e<n||isNaN(Number(n)))&&(e=n)}),e||new Date(NaN)}function AU(t){let e;return t.forEach(r=>{const n=Te(r);(!e||e>n||isNaN(+n))&&(e=n)}),e||new Date(NaN)}function Zu(t,e){const r=Te(t),n=Te(e),s=r.getTime()-n.getTime();return s<0?-1:s>0?1:s}function MU(t){return br(t,Date.now())}function gr(t,e){const r=Ai(t),n=Ai(e);return+r==+n}function ax(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function IU(t){if(!ax(t)&&typeof t!="number")return!1;const e=Te(t);return!isNaN(Number(e))}function Ii(t,e){const r=Te(t),n=Te(e),s=r.getFullYear()-n.getFullYear(),o=r.getMonth()-n.getMonth();return s*12+o}function LU(t,e,r){const n=Wn(t,r),s=Wn(e,r),o=+n-Mi(n),i=+s-Mi(s);return Math.round((o-i)/sx)}function FU(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function $U(t,e){return+Te(t)-+Te(e)}function UU(t){const e=Te(t);return e.setHours(23,59,59,999),e}function Kh(t){const e=Te(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function BU(t){const e=Te(t);return+UU(e)==+Kh(e)}function zU(t,e){const r=Te(t),n=Te(e),s=Zu(r,n),o=Math.abs(Ii(r,n));let i;if(o<1)i=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*o);let l=Zu(r,n)===-s;BU(Te(t))&&o===1&&Zu(t,n)===1&&(l=!1),i=s*(o-Number(l))}return i===0?0:i}function WU(t,e,r){const n=$U(t,e)/1e3;return FU(r==null?void 0:r.roundingMethod)(n)}function _r(t){const e=Te(t);return e.setDate(1),e.setHours(0,0,0,0),e}function CC(t){const e=Te(t),r=br(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}function ox(t,e){var l,c,u,d;const r=Ji(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Te(t),o=s.getDay(),i=(o<n?-7:0)+6-(o-n);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s}function EC(t){return ox(t,{weekStartsOn:1})}const VU={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},HU=(t,e,r)=>{let n;const s=VU[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function oi(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const qU={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},KU={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},GU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},YU={date:oi({formats:qU,defaultWidth:"full"}),time:oi({formats:KU,defaultWidth:"full"}),dateTime:oi({formats:GU,defaultWidth:"full"})},QU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},JU=(t,e,r,n)=>QU[t];function An(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):i;s=t.formattingValues[l]||t.formattingValues[i]}else{const i=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[l]||t.values[i]}const o=t.argumentCallback?t.argumentCallback(e):e;return s[o]}}const XU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ZU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},e6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},t6={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},r6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},n6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},s6=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},a6={ordinalNumber:s6,era:An({values:XU,defaultWidth:"wide"}),quarter:An({values:ZU,defaultWidth:"wide",argumentCallback:t=>t-1}),month:An({values:e6,defaultWidth:"wide"}),day:An({values:t6,defaultWidth:"wide"}),dayPeriod:An({values:r6,defaultWidth:"wide",formattingValues:n6,defaultFormattingWidth:"wide"})};function Mn(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],o=e.match(s);if(!o)return null;const i=o[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?i6(l,h=>h.test(i)):o6(l,h=>h.test(i));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(i.length);return{value:u,rest:d}}}function o6(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function i6(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function PC(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],o=e.match(t.parsePattern);if(!o)return null;let i=t.valueCallback?t.valueCallback(o[0]):o[0];i=r.valueCallback?r.valueCallback(i):i;const l=e.slice(s.length);return{value:i,rest:l}}}const l6=/^(\d+)(th|st|nd|rd)?/i,c6=/\d+/i,u6={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},d6={any:[/^b/i,/^(a|c)/i]},h6={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},f6={any:[/1/i,/2/i,/3/i,/4/i]},m6={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},p6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},g6={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},v6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},x6={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},y6={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},w6={ordinalNumber:PC({matchPattern:l6,parsePattern:c6,valueCallback:t=>parseInt(t,10)}),era:Mn({matchPatterns:u6,defaultMatchWidth:"wide",parsePatterns:d6,defaultParseWidth:"any"}),quarter:Mn({matchPatterns:h6,defaultMatchWidth:"wide",parsePatterns:f6,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Mn({matchPatterns:m6,defaultMatchWidth:"wide",parsePatterns:p6,defaultParseWidth:"any"}),day:Mn({matchPatterns:g6,defaultMatchWidth:"wide",parsePatterns:v6,defaultParseWidth:"any"}),dayPeriod:Mn({matchPatterns:x6,defaultMatchWidth:"any",parsePatterns:y6,defaultParseWidth:"any"})},ix={code:"en-US",formatDistance:HU,formatLong:YU,formatRelative:JU,localize:a6,match:w6,options:{weekStartsOn:0,firstWeekContainsDate:1}};function _6(t){const e=Te(t);return Fn(e,CC(e))+1}function TC(t){const e=Te(t),r=+co(e)-+RU(e);return Math.round(r/sx)+1}function RC(t,e){var d,h,m,p;const r=Te(t),n=r.getFullYear(),s=Ji(),o=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(m=s.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,i=br(t,0);i.setFullYear(n+1,0,o),i.setHours(0,0,0,0);const l=Wn(i,e),c=br(t,0);c.setFullYear(n,0,o),c.setHours(0,0,0,0);const u=Wn(c,e);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function b6(t,e){var l,c,u,d;const r=Ji(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=RC(t,e),o=br(t,0);return o.setFullYear(s,0,n),o.setHours(0,0,0,0),Wn(o,e)}function OC(t,e){const r=Te(t),n=+Wn(r,e)-+b6(r,e);return Math.round(n/sx)+1}function Qe(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const Ps={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Qe(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Qe(r+1,2)},d(t,e){return Qe(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Qe(t.getHours()%12||12,e.length)},H(t,e){return Qe(t.getHours(),e.length)},m(t,e){return Qe(t.getMinutes(),e.length)},s(t,e){return Qe(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return Qe(s,e.length)}},Ro={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},E0={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return Ps.y(t,e)},Y:function(t,e,r,n){const s=RC(t,n),o=s>0?s:1-s;if(e==="YY"){const i=o%100;return Qe(i,2)}return e==="Yo"?r.ordinalNumber(o,{unit:"year"}):Qe(o,e.length)},R:function(t,e){const r=kC(t);return Qe(r,e.length)},u:function(t,e){const r=t.getFullYear();return Qe(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Qe(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Qe(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return Ps.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Qe(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const s=OC(t,n);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):Qe(s,e.length)},I:function(t,e,r){const n=TC(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Qe(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Ps.d(t,e)},D:function(t,e,r){const n=_6(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Qe(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const s=t.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Qe(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const s=t.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Qe(o,e.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return Qe(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let s;switch(n===12?s=Ro.noon:n===0?s=Ro.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let s;switch(n>=17?s=Ro.evening:n>=12?s=Ro.afternoon:n>=4?s=Ro.morning:s=Ro.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Ps.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Ps.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Qe(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Qe(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ps.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Ps.s(t,e)},S:function(t,e){return Ps.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return T0(n);case"XXXX":case"XX":return Aa(n);case"XXXXX":case"XXX":default:return Aa(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return T0(n);case"xxxx":case"xx":return Aa(n);case"xxxxx":case"xxx":default:return Aa(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+P0(n,":");case"OOOO":default:return"GMT"+Aa(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+P0(n,":");case"zzzz":default:return"GMT"+Aa(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return Qe(n,e.length)},T:function(t,e,r){const n=t.getTime();return Qe(n,e.length)}};function P0(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),o=n%60;return o===0?r+String(s):r+String(s)+e+Qe(o,2)}function T0(t,e){return t%60===0?(t>0?"-":"+")+Qe(Math.abs(t)/60,2):Aa(t,e)}function Aa(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Qe(Math.trunc(n/60),2),o=Qe(n%60,2);return r+s+e+o}const R0=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},DC=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},j6=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return R0(t,e);let o;switch(n){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",R0(n,e)).replace("{{time}}",DC(s,e))},S6={p:DC,P:j6},N6=/^D+$/,k6=/^Y+$/,C6=["D","DD","YY","YYYY"];function E6(t){return N6.test(t)}function P6(t){return k6.test(t)}function T6(t,e,r){const n=R6(t,e,r);if(console.warn(n),C6.includes(t))throw new RangeError(n)}function R6(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const O6=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,D6=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,A6=/^'([^]*?)'?$/,M6=/''/g,I6=/[a-zA-Z]/;function xn(t,e,r){var d,h,m,p,v,g,w,y;const n=Ji(),s=(r==null?void 0:r.locale)??n.locale??ix,o=(r==null?void 0:r.firstWeekContainsDate)??((h=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(m=n.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,i=(r==null?void 0:r.weekStartsOn)??((g=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:g.weekStartsOn)??n.weekStartsOn??((y=(w=n.locale)==null?void 0:w.options)==null?void 0:y.weekStartsOn)??0,l=Te(t);if(!IU(l))throw new RangeError("Invalid time value");let c=e.match(D6).map(x=>{const _=x[0];if(_==="p"||_==="P"){const b=S6[_];return b(x,s.formatLong)}return x}).join("").match(O6).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const _=x[0];if(_==="'")return{isToken:!1,value:L6(x)};if(E0[_])return{isToken:!0,value:x};if(_.match(I6))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:x}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:o,weekStartsOn:i,locale:s};return c.map(x=>{if(!x.isToken)return x.value;const _=x.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&P6(_)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&E6(_))&&T6(_,e,String(t));const b=E0[_[0]];return b(l,_,s.localize,u)}).join("")}function L6(t){const e=t.match(A6);return e?e[1].replace(M6,"'"):t}function F6(t,e,r){const n=Ji(),s=(r==null?void 0:r.locale)??n.locale??ix,o=2520,i=Zu(t,e);if(isNaN(i))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:i});let c,u;i>0?(c=Te(e),u=Te(t)):(c=Te(t),u=Te(e));const d=WU(u,c),h=(Mi(u)-Mi(c))/1e3,m=Math.round((d-h)/60);let p;if(m<2)return r!=null&&r.includeSeconds?d<5?s.formatDistance("lessThanXSeconds",5,l):d<10?s.formatDistance("lessThanXSeconds",10,l):d<20?s.formatDistance("lessThanXSeconds",20,l):d<40?s.formatDistance("halfAMinute",0,l):d<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):m===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",m,l);if(m<45)return s.formatDistance("xMinutes",m,l);if(m<90)return s.formatDistance("aboutXHours",1,l);if(m<C0){const v=Math.round(m/60);return s.formatDistance("aboutXHours",v,l)}else{if(m<o)return s.formatDistance("xDays",1,l);if(m<Au){const v=Math.round(m/C0);return s.formatDistance("xDays",v,l)}else if(m<Au*2)return p=Math.round(m/Au),s.formatDistance("aboutXMonths",p,l)}if(p=zU(u,c),p<12){const v=Math.round(m/Au);return s.formatDistance("xMonths",v,l)}else{const v=p%12,g=Math.trunc(p/12);return v<3?s.formatDistance("aboutXYears",g,l):v<9?s.formatDistance("overXYears",g,l):s.formatDistance("almostXYears",g+1,l)}}function $6(t,e){return F6(t,MU(t),e)}function U6(t){const e=Te(t),r=e.getFullYear(),n=e.getMonth(),s=br(t,0);return s.setFullYear(r,n+1,0),s.setHours(0,0,0,0),s.getDate()}function B6(t){return Math.trunc(+Te(t)/1e3)}function z6(t){const e=Te(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(0,0,0,0),e}function W6(t,e){return LU(z6(t),_r(t),e)+1}function rg(t,e){const r=Te(t),n=Te(e);return r.getTime()>n.getTime()}function AC(t,e){const r=Te(t),n=Te(e);return+r<+n}function lx(t,e){const r=Te(t),n=Te(e);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function V6(t,e){const r=Te(t),n=Te(e);return r.getFullYear()===n.getFullYear()}function nm(t,e){return rr(t,-e)}function sm(t,e){const r=Te(t),n=r.getFullYear(),s=r.getDate(),o=br(t,0);o.setFullYear(n,e,15),o.setHours(0,0,0,0);const i=U6(o);return r.setMonth(e,Math.min(s,i)),r}function O0(t,e){const r=Te(t);return isNaN(+r)?br(t,NaN):(r.setFullYear(e),r)}const H6={lessThanXSeconds:{one:"  ",two:"  ",threeToTen:"  {{count}} ",other:"  {{count}} "},xSeconds:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},halfAMinute:" ",lessThanXMinutes:{one:"  ",two:"  ",threeToTen:"  {{count}} ",other:"  {{count}} "},xMinutes:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},aboutXHours:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "},xHours:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},xDays:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},aboutXWeeks:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "},xWeeks:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},aboutXMonths:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "},xMonths:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},aboutXYears:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "},xYears:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},overXYears:{one:"  ",two:"  ",threeToTen:"  {{count}} ",other:"  {{count}} "},almostXYears:{one:"   ",two:"  ",threeToTen:"  {{count}} ",other:"  {{count}} "}},q6=(t,e,r)=>{const n=H6[t];let s;return typeof n=="string"?s=n:e===1?s=n.one:e===2?s=n.two:e<=10?s=n.threeToTen.replace("{{count}}",String(e)):s=n.other.replace("{{count}}",String(e)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?" "+s:" "+s:s},K6={full:"EEEE do MMMM y",long:"do MMMM y",medium:"d MMM y",short:"dd/MM/yyyy"},G6={full:"HH:mm:ss",long:"HH:mm:ss",medium:"HH:mm:ss",short:"HH:mm"},Y6={full:"{{date}} ' ' {{time}}",long:"{{date}} ' ' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Q6={date:oi({formats:K6,defaultWidth:"full"}),time:oi({formats:G6,defaultWidth:"full"}),dateTime:oi({formats:Y6,defaultWidth:"full"})},J6={lastWeek:"eeee '  ' p",yesterday:"'  ' p",today:"'  ' p",tomorrow:"'  ' p",nextWeek:"eeee '  ' p",other:"P"},X6=t=>J6[t],Z6={narrow:["",""],abbreviated:["..",".."],wide:[" "," "]},e8={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:[" "," "," "," "]},t8={narrow:["","","","","","","","","","","",""],abbreviated:["","","","","","","","","","","",""],wide:["","","","","","","","","","","",""]},r8={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},n8={narrow:{am:"",pm:"",morning:"",noon:"",afternoon:" ",evening:"",night:"",midnight:" "},abbreviated:{am:"",pm:"",morning:"",noon:"",afternoon:" ",evening:"",night:"",midnight:" "},wide:{am:"",pm:"",morning:"",noon:"",afternoon:" ",evening:"",night:"",midnight:" "}},s8={narrow:{am:"",pm:"",morning:" ",noon:"",afternoon:" ",evening:" ",night:" ",midnight:" "},abbreviated:{am:"",pm:"",morning:" ",noon:"",afternoon:" ",evening:" ",night:" ",midnight:" "},wide:{am:"",pm:"",morning:" ",noon:"",afternoon:" ",evening:" ",night:" ",midnight:" "}},a8=t=>String(t),o8={ordinalNumber:a8,era:An({values:Z6,defaultWidth:"wide"}),quarter:An({values:e8,defaultWidth:"wide",argumentCallback:t=>t-1}),month:An({values:t8,defaultWidth:"wide"}),day:An({values:r8,defaultWidth:"wide"}),dayPeriod:An({values:n8,defaultWidth:"wide",formattingValues:s8,defaultFormattingWidth:"wide"})},i8=/^(\d+)(th|st|nd|rd)?/i,l8=/\d+/i,c8={narrow:/[]/,abbreviated:/[]\.\./,wide:/(|) /},u8={any:[//,//]},d8={narrow:/^[1234]/i,abbreviated:/[1234]/,wide:/ (|||)/},h8={any:[/1/i,/2/i,/3/i,/4/i]},f8={narrow:/^[]/,abbreviated:/^(|||||||||||)/,wide:/^(|||||||||||)/},m8={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],any:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i]},p8={narrow:/^[]/i,short:/^(||||||)/i,abbreviated:/^(||||||)/i,wide:/^(||||||)/i},g8={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],wide:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],any:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i]},v8={narrow:/^(|| || | | | )/,any:/^(|| || | | | )/},x8={any:{am:/^/,pm:/^/,midnight:/ /,noon://,afternoon:/ /,morning:/ /,evening:/ /,night:/ /}},y8={ordinalNumber:PC({matchPattern:i8,parsePattern:l8,valueCallback:t=>parseInt(t,10)}),era:Mn({matchPatterns:c8,defaultMatchWidth:"wide",parsePatterns:u8,defaultParseWidth:"any"}),quarter:Mn({matchPatterns:d8,defaultMatchWidth:"wide",parsePatterns:h8,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Mn({matchPatterns:f8,defaultMatchWidth:"wide",parsePatterns:m8,defaultParseWidth:"any"}),day:Mn({matchPatterns:p8,defaultMatchWidth:"wide",parsePatterns:g8,defaultParseWidth:"any"}),dayPeriod:Mn({matchPatterns:v8,defaultMatchWidth:"any",parsePatterns:x8,defaultParseWidth:"any"})},w8={code:"ar",formatDistance:q6,formatLong:Q6,formatRelative:X6,localize:o8,match:y8,options:{weekStartsOn:6,firstWeekContainsDate:1}};var Ce=function(){return Ce=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ce.apply(this,arguments)};function _8(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function MC(t,e,r){for(var n=0,s=e.length,o;n<s;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function Vc(t){return t.mode==="multiple"}function Hc(t){return t.mode==="range"}function Gh(t){return t.mode==="single"}var b8={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function j8(t,e){return xn(t,"LLLL y",e)}function S8(t,e){return xn(t,"d",e)}function N8(t,e){return xn(t,"LLLL",e)}function k8(t){return"".concat(t)}function C8(t,e){return xn(t,"cccccc",e)}function E8(t,e){return xn(t,"yyyy",e)}var P8=Object.freeze({__proto__:null,formatCaption:j8,formatDay:S8,formatMonthCaption:N8,formatWeekNumber:k8,formatWeekdayName:C8,formatYearCaption:E8}),T8=function(t,e,r){return xn(t,"do MMMM (EEEE)",r)},R8=function(){return"Month: "},O8=function(){return"Go to next month"},D8=function(){return"Go to previous month"},A8=function(t,e){return xn(t,"cccc",e)},M8=function(t){return"Week n. ".concat(t)},I8=function(){return"Year: "},L8=Object.freeze({__proto__:null,labelDay:T8,labelMonthDropdown:R8,labelNext:O8,labelPrevious:D8,labelWeekNumber:M8,labelWeekday:A8,labelYearDropdown:I8});function F8(){var t="buttons",e=b8,r=ix,n={},s={},o=1,i={},l=new Date;return{captionLayout:t,classNames:e,formatters:P8,labels:L8,locale:r,modifiersClassNames:n,modifiers:s,numberOfMonths:o,styles:i,today:l,mode:"default"}}function $8(t){var e=t.fromYear,r=t.toYear,n=t.fromMonth,s=t.toMonth,o=t.fromDate,i=t.toDate;return n?o=_r(n):e&&(o=new Date(e,0,1)),s?i=Kh(s):r&&(i=new Date(r,11,31)),{fromDate:o?Ai(o):void 0,toDate:i?Ai(i):void 0}}var IC=f.createContext(void 0);function U8(t){var e,r=t.initialProps,n=F8(),s=$8(r),o=s.fromDate,i=s.toDate,l=(e=r.captionLayout)!==null&&e!==void 0?e:n.captionLayout;l!=="buttons"&&(!o||!i)&&(l="buttons");var c;(Gh(r)||Vc(r)||Hc(r))&&(c=r.onSelect);var u=Ce(Ce(Ce({},n),r),{captionLayout:l,classNames:Ce(Ce({},n.classNames),r.classNames),components:Ce({},r.components),formatters:Ce(Ce({},n.formatters),r.formatters),fromDate:o,labels:Ce(Ce({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:Ce(Ce({},n.modifiers),r.modifiers),modifiersClassNames:Ce(Ce({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:Ce(Ce({},n.styles),r.styles),toDate:i});return a.jsx(IC.Provider,{value:u,children:t.children})}function nt(){var t=f.useContext(IC);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function LC(t){var e=nt(),r=e.locale,n=e.classNames,s=e.styles,o=e.formatters.formatCaption;return a.jsx("div",{className:n.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:o(t.displayMonth,{locale:r})})}function B8(t){return a.jsx("svg",Ce({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:a.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function FC(t){var e,r,n=t.onChange,s=t.value,o=t.children,i=t.caption,l=t.className,c=t.style,u=nt(),d=(r=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&r!==void 0?r:B8;return a.jsxs("div",{className:l,style:c,children:[a.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),a.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:s,onChange:n,children:o}),a.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[i,a.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function z8(t){var e,r=nt(),n=r.fromDate,s=r.toDate,o=r.styles,i=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!n)return a.jsx(a.Fragment,{});if(!s)return a.jsx(a.Fragment,{});var h=[];if(V6(n,s))for(var m=_r(n),p=n.getMonth();p<=s.getMonth();p++)h.push(sm(m,p));else for(var m=_r(new Date),p=0;p<=11;p++)h.push(sm(m,p));var v=function(w){var y=Number(w.target.value),x=sm(_r(t.displayMonth),y);t.onChange(x)},g=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:FC;return a.jsx(g,{name:"months","aria-label":d(),className:c.dropdown_month,style:o.dropdown_month,onChange:v,value:t.displayMonth.getMonth(),caption:l(t.displayMonth,{locale:i}),children:h.map(function(w){return a.jsx("option",{value:w.getMonth(),children:l(w,{locale:i})},w.getMonth())})})}function W8(t){var e,r=t.displayMonth,n=nt(),s=n.fromDate,o=n.toDate,i=n.locale,l=n.styles,c=n.classNames,u=n.components,d=n.formatters.formatYearCaption,h=n.labels.labelYearDropdown,m=[];if(!s)return a.jsx(a.Fragment,{});if(!o)return a.jsx(a.Fragment,{});for(var p=s.getFullYear(),v=o.getFullYear(),g=p;g<=v;g++)m.push(O0(CC(new Date),g));var w=function(x){var _=O0(_r(r),Number(x.target.value));t.onChange(_)},y=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:FC;return a.jsx(y,{name:"years","aria-label":h(),className:c.dropdown_year,style:l.dropdown_year,onChange:w,value:r.getFullYear(),caption:d(r,{locale:i}),children:m.map(function(x){return a.jsx("option",{value:x.getFullYear(),children:d(x,{locale:i})},x.getFullYear())})})}function V8(t,e){var r=f.useState(t),n=r[0],s=r[1],o=e===void 0?n:e;return[o,s]}function H8(t){var e=t.month,r=t.defaultMonth,n=t.today,s=e||r||n||new Date,o=t.toDate,i=t.fromDate,l=t.numberOfMonths,c=l===void 0?1:l;if(o&&Ii(o,s)<0){var u=-1*(c-1);s=jn(o,u)}return i&&Ii(s,i)<0&&(s=i),_r(s)}function q8(){var t=nt(),e=H8(t),r=V8(e,t.month),n=r[0],s=r[1],o=function(i){var l;if(!t.disableNavigation){var c=_r(i);s(c),(l=t.onMonthChange)===null||l===void 0||l.call(t,c)}};return[n,o]}function K8(t,e){for(var r=e.reverseMonths,n=e.numberOfMonths,s=_r(t),o=_r(jn(s,n)),i=Ii(o,s),l=[],c=0;c<i;c++){var u=jn(s,c);l.push(u)}return r&&(l=l.reverse()),l}function G8(t,e){if(!e.disableNavigation){var r=e.toDate,n=e.pagedNavigation,s=e.numberOfMonths,o=s===void 0?1:s,i=n?o:1,l=_r(t);if(!r)return jn(l,i);var c=Ii(r,t);if(!(c<o))return jn(l,i)}}function Y8(t,e){if(!e.disableNavigation){var r=e.fromDate,n=e.pagedNavigation,s=e.numberOfMonths,o=s===void 0?1:s,i=n?o:1,l=_r(t);if(!r)return jn(l,-i);var c=Ii(l,r);if(!(c<=0))return jn(l,-i)}}var $C=f.createContext(void 0);function Q8(t){var e=nt(),r=q8(),n=r[0],s=r[1],o=K8(n,e),i=G8(n,e),l=Y8(n,e),c=function(h){return o.some(function(m){return lx(h,m)})},u=function(h,m){c(h)||(m&&AC(h,m)?s(jn(h,1+e.numberOfMonths*-1)):s(h))},d={currentMonth:n,displayMonths:o,goToMonth:s,goToDate:u,previousMonth:l,nextMonth:i,isDateDisplayed:c};return a.jsx($C.Provider,{value:d,children:t.children})}function qc(){var t=f.useContext($C);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function D0(t){var e,r=nt(),n=r.classNames,s=r.styles,o=r.components,i=qc().goToMonth,l=function(d){i(jn(d,t.displayIndex?-t.displayIndex:0))},c=(e=o==null?void 0:o.CaptionLabel)!==null&&e!==void 0?e:LC,u=a.jsx(c,{id:t.id,displayMonth:t.displayMonth});return a.jsxs("div",{className:n.caption_dropdowns,style:s.caption_dropdowns,children:[a.jsx("div",{className:n.vhidden,children:u}),a.jsx(z8,{onChange:l,displayMonth:t.displayMonth}),a.jsx(W8,{onChange:l,displayMonth:t.displayMonth})]})}function J8(t){return a.jsx("svg",Ce({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:a.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function X8(t){return a.jsx("svg",Ce({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:a.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Jd=f.forwardRef(function(t,e){var r=nt(),n=r.classNames,s=r.styles,o=[n.button_reset,n.button];t.className&&o.push(t.className);var i=o.join(" "),l=Ce(Ce({},s.button_reset),s.button);return t.style&&Object.assign(l,t.style),a.jsx("button",Ce({},t,{ref:e,type:"button",className:i,style:l}))});function Z8(t){var e,r,n=nt(),s=n.dir,o=n.locale,i=n.classNames,l=n.styles,c=n.labels,u=c.labelPrevious,d=c.labelNext,h=n.components;if(!t.nextMonth&&!t.previousMonth)return a.jsx(a.Fragment,{});var m=u(t.previousMonth,{locale:o}),p=[i.nav_button,i.nav_button_previous].join(" "),v=d(t.nextMonth,{locale:o}),g=[i.nav_button,i.nav_button_next].join(" "),w=(e=h==null?void 0:h.IconRight)!==null&&e!==void 0?e:X8,y=(r=h==null?void 0:h.IconLeft)!==null&&r!==void 0?r:J8;return a.jsxs("div",{className:i.nav,style:l.nav,children:[!t.hidePrevious&&a.jsx(Jd,{name:"previous-month","aria-label":m,className:p,style:l.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:s==="rtl"?a.jsx(w,{className:i.nav_icon,style:l.nav_icon}):a.jsx(y,{className:i.nav_icon,style:l.nav_icon})}),!t.hideNext&&a.jsx(Jd,{name:"next-month","aria-label":v,className:g,style:l.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:s==="rtl"?a.jsx(y,{className:i.nav_icon,style:l.nav_icon}):a.jsx(w,{className:i.nav_icon,style:l.nav_icon})})]})}function A0(t){var e=nt().numberOfMonths,r=qc(),n=r.previousMonth,s=r.nextMonth,o=r.goToMonth,i=r.displayMonths,l=i.findIndex(function(v){return lx(t.displayMonth,v)}),c=l===0,u=l===i.length-1,d=e>1&&(c||!u),h=e>1&&(u||!c),m=function(){n&&o(n)},p=function(){s&&o(s)};return a.jsx(Z8,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:h,nextMonth:s,previousMonth:n,onPreviousClick:m,onNextClick:p})}function eB(t){var e,r=nt(),n=r.classNames,s=r.disableNavigation,o=r.styles,i=r.captionLayout,l=r.components,c=(e=l==null?void 0:l.CaptionLabel)!==null&&e!==void 0?e:LC,u;return s?u=a.jsx(c,{id:t.id,displayMonth:t.displayMonth}):i==="dropdown"?u=a.jsx(D0,{displayMonth:t.displayMonth,id:t.id}):i==="dropdown-buttons"?u=a.jsxs(a.Fragment,{children:[a.jsx(D0,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),a.jsx(A0,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=a.jsxs(a.Fragment,{children:[a.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),a.jsx(A0,{displayMonth:t.displayMonth,id:t.id})]}),a.jsx("div",{className:n.caption,style:o.caption,children:u})}function tB(t){var e=nt(),r=e.footer,n=e.styles,s=e.classNames.tfoot;return r?a.jsx("tfoot",{className:s,style:n.tfoot,children:a.jsx("tr",{children:a.jsx("td",{colSpan:8,children:r})})}):a.jsx(a.Fragment,{})}function rB(t,e,r){for(var n=r?co(new Date):Wn(new Date,{locale:t,weekStartsOn:e}),s=[],o=0;o<7;o++){var i=rr(n,o);s.push(i)}return s}function nB(){var t=nt(),e=t.classNames,r=t.styles,n=t.showWeekNumber,s=t.locale,o=t.weekStartsOn,i=t.ISOWeek,l=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,u=rB(s,o,i);return a.jsxs("tr",{style:r.head_row,className:e.head_row,children:[n&&a.jsx("td",{style:r.head_cell,className:e.head_cell}),u.map(function(d,h){return a.jsx("th",{scope:"col",className:e.head_cell,style:r.head_cell,"aria-label":c(d,{locale:s}),children:l(d,{locale:s})},h)})]})}function sB(){var t,e=nt(),r=e.classNames,n=e.styles,s=e.components,o=(t=s==null?void 0:s.HeadRow)!==null&&t!==void 0?t:nB;return a.jsx("thead",{style:n.head,className:r.head,children:a.jsx(o,{})})}function aB(t){var e=nt(),r=e.locale,n=e.formatters.formatDay;return a.jsx(a.Fragment,{children:n(t.date,{locale:r})})}var cx=f.createContext(void 0);function oB(t){if(!Vc(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return a.jsx(cx.Provider,{value:e,children:t.children})}return a.jsx(iB,{initialProps:t.initialProps,children:t.children})}function iB(t){var e=t.initialProps,r=t.children,n=e.selected,s=e.min,o=e.max,i=function(u,d,h){var m,p;(m=e.onDayClick)===null||m===void 0||m.call(e,u,d,h);var v=!!(d.selected&&s&&(n==null?void 0:n.length)===s);if(!v){var g=!!(!d.selected&&o&&(n==null?void 0:n.length)===o);if(!g){var w=n?MC([],n):[];if(d.selected){var y=w.findIndex(function(x){return gr(u,x)});w.splice(y,1)}else w.push(u);(p=e.onSelect)===null||p===void 0||p.call(e,w,u,d,h)}}},l={disabled:[]};n&&l.disabled.push(function(u){var d=o&&n.length>o-1,h=n.some(function(m){return gr(m,u)});return!!(d&&!h)});var c={selected:n,onDayClick:i,modifiers:l};return a.jsx(cx.Provider,{value:c,children:r})}function ux(){var t=f.useContext(cx);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function lB(t,e){var r=e||{},n=r.from,s=r.to;return n&&s?gr(s,t)&&gr(n,t)?void 0:gr(s,t)?{from:s,to:void 0}:gr(n,t)?void 0:rg(n,t)?{from:t,to:s}:{from:n,to:t}:s?rg(t,s)?{from:s,to:t}:{from:t,to:s}:n?AC(t,n)?{from:t,to:n}:{from:n,to:t}:{from:t,to:void 0}}var dx=f.createContext(void 0);function cB(t){if(!Hc(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return a.jsx(dx.Provider,{value:e,children:t.children})}return a.jsx(uB,{initialProps:t.initialProps,children:t.children})}function uB(t){var e=t.initialProps,r=t.children,n=e.selected,s=n||{},o=s.from,i=s.to,l=e.min,c=e.max,u=function(p,v,g){var w,y;(w=e.onDayClick)===null||w===void 0||w.call(e,p,v,g);var x=lB(p,n);(y=e.onSelect)===null||y===void 0||y.call(e,x,p,v,g)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(o?(d.range_start=[o],i?(d.range_end=[i],gr(o,i)||(d.range_middle=[{after:o,before:i}])):d.range_end=[o]):i&&(d.range_start=[i],d.range_end=[i]),l&&(o&&!i&&d.disabled.push({after:nm(o,l-1),before:rr(o,l-1)}),o&&i&&d.disabled.push({after:o,before:rr(o,l-1)}),!o&&i&&d.disabled.push({after:nm(i,l-1),before:rr(i,l-1)})),c){if(o&&!i&&(d.disabled.push({before:rr(o,-c+1)}),d.disabled.push({after:rr(o,c-1)})),o&&i){var h=Fn(i,o)+1,m=c-h;d.disabled.push({before:nm(o,m)}),d.disabled.push({after:rr(i,m)})}!o&&i&&(d.disabled.push({before:rr(i,-c+1)}),d.disabled.push({after:rr(i,c-1)}))}return a.jsx(dx.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:r})}function hx(){var t=f.useContext(dx);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function ed(t){return Array.isArray(t)?MC([],t):t!==void 0?[t]:[]}function dB(t){var e={};return Object.entries(t).forEach(function(r){var n=r[0],s=r[1];e[n]=ed(s)}),e}var Sn;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(Sn||(Sn={}));var hB=Sn.Selected,Gn=Sn.Disabled,fB=Sn.Hidden,mB=Sn.Today,am=Sn.RangeEnd,om=Sn.RangeMiddle,im=Sn.RangeStart,pB=Sn.Outside;function gB(t,e,r){var n,s=(n={},n[hB]=ed(t.selected),n[Gn]=ed(t.disabled),n[fB]=ed(t.hidden),n[mB]=[t.today],n[am]=[],n[om]=[],n[im]=[],n[pB]=[],n);return t.fromDate&&s[Gn].push({before:t.fromDate}),t.toDate&&s[Gn].push({after:t.toDate}),Vc(t)?s[Gn]=s[Gn].concat(e.modifiers[Gn]):Hc(t)&&(s[Gn]=s[Gn].concat(r.modifiers[Gn]),s[im]=r.modifiers[im],s[om]=r.modifiers[om],s[am]=r.modifiers[am]),s}var UC=f.createContext(void 0);function vB(t){var e=nt(),r=ux(),n=hx(),s=gB(e,r,n),o=dB(e.modifiers),i=Ce(Ce({},s),o);return a.jsx(UC.Provider,{value:i,children:t.children})}function BC(){var t=f.useContext(UC);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function xB(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function yB(t){return!!(t&&typeof t=="object"&&"from"in t)}function wB(t){return!!(t&&typeof t=="object"&&"after"in t)}function _B(t){return!!(t&&typeof t=="object"&&"before"in t)}function bB(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function jB(t,e){var r,n=e.from,s=e.to;if(n&&s){var o=Fn(s,n)<0;o&&(r=[s,n],n=r[0],s=r[1]);var i=Fn(t,n)>=0&&Fn(s,t)>=0;return i}return s?gr(s,t):n?gr(n,t):!1}function SB(t){return ax(t)}function NB(t){return Array.isArray(t)&&t.every(ax)}function kB(t,e){return e.some(function(r){if(typeof r=="boolean")return r;if(SB(r))return gr(t,r);if(NB(r))return r.includes(t);if(yB(r))return jB(t,r);if(bB(r))return r.dayOfWeek.includes(t.getDay());if(xB(r)){var n=Fn(r.before,t),s=Fn(r.after,t),o=n>0,i=s<0,l=rg(r.before,r.after);return l?i&&o:o||i}return wB(r)?Fn(t,r.after)>0:_B(r)?Fn(r.before,t)>0:typeof r=="function"?r(t):!1})}function fx(t,e,r){var n=Object.keys(e).reduce(function(o,i){var l=e[i];return kB(t,l)&&o.push(i),o},[]),s={};return n.forEach(function(o){return s[o]=!0}),r&&!lx(t,r)&&(s.outside=!0),s}function CB(t,e){for(var r=_r(t[0]),n=Kh(t[t.length-1]),s,o,i=r;i<=n;){var l=fx(i,e),c=!l.disabled&&!l.hidden;if(!c){i=rr(i,1);continue}if(l.selected)return i;l.today&&!o&&(o=i),s||(s=i),i=rr(i,1)}return o||s}var EB=365;function zC(t,e){var r=e.moveBy,n=e.direction,s=e.context,o=e.modifiers,i=e.retry,l=i===void 0?{count:0,lastFocused:t}:i,c=s.weekStartsOn,u=s.fromDate,d=s.toDate,h=s.locale,m={day:rr,week:tg,month:jn,year:OU,startOfWeek:function(w){return s.ISOWeek?co(w):Wn(w,{locale:h,weekStartsOn:c})},endOfWeek:function(w){return s.ISOWeek?EC(w):ox(w,{locale:h,weekStartsOn:c})}},p=m[r](t,n==="after"?1:-1);n==="before"&&u?p=DU([u,p]):n==="after"&&d&&(p=AU([d,p]));var v=!0;if(o){var g=fx(p,o);v=!g.disabled&&!g.hidden}return v?p:l.count>EB?l.lastFocused:zC(p,{moveBy:r,direction:n,context:s,modifiers:o,retry:Ce(Ce({},l),{count:l.count+1})})}var WC=f.createContext(void 0);function PB(t){var e=qc(),r=BC(),n=f.useState(),s=n[0],o=n[1],i=f.useState(),l=i[0],c=i[1],u=CB(e.displayMonths,r),d=s??(l&&e.isDateDisplayed(l))?l:u,h=function(){c(s),o(void 0)},m=function(w){o(w)},p=nt(),v=function(w,y){if(s){var x=zC(s,{moveBy:w,direction:y,context:p,modifiers:r});gr(s,x)||(e.goToDate(x,s),m(x))}},g={focusedDay:s,focusTarget:d,blur:h,focus:m,focusDayAfter:function(){return v("day","after")},focusDayBefore:function(){return v("day","before")},focusWeekAfter:function(){return v("week","after")},focusWeekBefore:function(){return v("week","before")},focusMonthBefore:function(){return v("month","before")},focusMonthAfter:function(){return v("month","after")},focusYearBefore:function(){return v("year","before")},focusYearAfter:function(){return v("year","after")},focusStartOfWeek:function(){return v("startOfWeek","before")},focusEndOfWeek:function(){return v("endOfWeek","after")}};return a.jsx(WC.Provider,{value:g,children:t.children})}function mx(){var t=f.useContext(WC);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function TB(t,e){var r=BC(),n=fx(t,r,e);return n}var px=f.createContext(void 0);function RB(t){if(!Gh(t.initialProps)){var e={selected:void 0};return a.jsx(px.Provider,{value:e,children:t.children})}return a.jsx(OB,{initialProps:t.initialProps,children:t.children})}function OB(t){var e=t.initialProps,r=t.children,n=function(o,i,l){var c,u,d;if((c=e.onDayClick)===null||c===void 0||c.call(e,o,i,l),i.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,o,i,l);return}(d=e.onSelect)===null||d===void 0||d.call(e,o,o,i,l)},s={selected:e.selected,onDayClick:n};return a.jsx(px.Provider,{value:s,children:r})}function VC(){var t=f.useContext(px);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function DB(t,e){var r=nt(),n=VC(),s=ux(),o=hx(),i=mx(),l=i.focusDayAfter,c=i.focusDayBefore,u=i.focusWeekAfter,d=i.focusWeekBefore,h=i.blur,m=i.focus,p=i.focusMonthBefore,v=i.focusMonthAfter,g=i.focusYearBefore,w=i.focusYearAfter,y=i.focusStartOfWeek,x=i.focusEndOfWeek,_=function(D){var C,L,I,W;Gh(r)?(C=n.onDayClick)===null||C===void 0||C.call(n,t,e,D):Vc(r)?(L=s.onDayClick)===null||L===void 0||L.call(s,t,e,D):Hc(r)?(I=o.onDayClick)===null||I===void 0||I.call(o,t,e,D):(W=r.onDayClick)===null||W===void 0||W.call(r,t,e,D)},b=function(D){var C;m(t),(C=r.onDayFocus)===null||C===void 0||C.call(r,t,e,D)},j=function(D){var C;h(),(C=r.onDayBlur)===null||C===void 0||C.call(r,t,e,D)},N=function(D){var C;(C=r.onDayMouseEnter)===null||C===void 0||C.call(r,t,e,D)},k=function(D){var C;(C=r.onDayMouseLeave)===null||C===void 0||C.call(r,t,e,D)},E=function(D){var C;(C=r.onDayPointerEnter)===null||C===void 0||C.call(r,t,e,D)},T=function(D){var C;(C=r.onDayPointerLeave)===null||C===void 0||C.call(r,t,e,D)},P=function(D){var C;(C=r.onDayTouchCancel)===null||C===void 0||C.call(r,t,e,D)},z=function(D){var C;(C=r.onDayTouchEnd)===null||C===void 0||C.call(r,t,e,D)},B=function(D){var C;(C=r.onDayTouchMove)===null||C===void 0||C.call(r,t,e,D)},Q=function(D){var C;(C=r.onDayTouchStart)===null||C===void 0||C.call(r,t,e,D)},R=function(D){var C;(C=r.onDayKeyUp)===null||C===void 0||C.call(r,t,e,D)},Y=function(D){var C;switch(D.key){case"ArrowLeft":D.preventDefault(),D.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":D.preventDefault(),D.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":D.preventDefault(),D.stopPropagation(),u();break;case"ArrowUp":D.preventDefault(),D.stopPropagation(),d();break;case"PageUp":D.preventDefault(),D.stopPropagation(),D.shiftKey?g():p();break;case"PageDown":D.preventDefault(),D.stopPropagation(),D.shiftKey?w():v();break;case"Home":D.preventDefault(),D.stopPropagation(),y();break;case"End":D.preventDefault(),D.stopPropagation(),x();break}(C=r.onDayKeyDown)===null||C===void 0||C.call(r,t,e,D)},M={onClick:_,onFocus:b,onBlur:j,onKeyDown:Y,onKeyUp:R,onMouseEnter:N,onMouseLeave:k,onPointerEnter:E,onPointerLeave:T,onTouchCancel:P,onTouchEnd:z,onTouchMove:B,onTouchStart:Q};return M}function AB(){var t=nt(),e=VC(),r=ux(),n=hx(),s=Gh(t)?e.selected:Vc(t)?r.selected:Hc(t)?n.selected:void 0;return s}function MB(t){return Object.values(Sn).includes(t)}function IB(t,e){var r=[t.classNames.day];return Object.keys(e).forEach(function(n){var s=t.modifiersClassNames[n];if(s)r.push(s);else if(MB(n)){var o=t.classNames["day_".concat(n)];o&&r.push(o)}}),r}function LB(t,e){var r=Ce({},t.styles.day);return Object.keys(e).forEach(function(n){var s;r=Ce(Ce({},r),(s=t.modifiersStyles)===null||s===void 0?void 0:s[n])}),r}function FB(t,e,r){var n,s,o,i=nt(),l=mx(),c=TB(t,e),u=DB(t,c),d=AB(),h=!!(i.onDayClick||i.mode!=="default");f.useEffect(function(){var N;c.outside||l.focusedDay&&h&&gr(l.focusedDay,t)&&((N=r.current)===null||N===void 0||N.focus())},[l.focusedDay,t,r,h,c.outside]);var m=IB(i,c).join(" "),p=LB(i,c),v=!!(c.outside&&!i.showOutsideDays||c.hidden),g=(o=(s=i.components)===null||s===void 0?void 0:s.DayContent)!==null&&o!==void 0?o:aB,w=a.jsx(g,{date:t,displayMonth:e,activeModifiers:c}),y={style:p,className:m,children:w,role:"gridcell"},x=l.focusTarget&&gr(l.focusTarget,t)&&!c.outside,_=l.focusedDay&&gr(l.focusedDay,t),b=Ce(Ce(Ce({},y),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=_||x?0:-1,n)),u),j={isButton:h,isHidden:v,activeModifiers:c,selectedDays:d,buttonProps:b,divProps:y};return j}function $B(t){var e=f.useRef(null),r=FB(t.date,t.displayMonth,e);return r.isHidden?a.jsx("div",{role:"gridcell"}):r.isButton?a.jsx(Jd,Ce({name:"day",ref:e},r.buttonProps)):a.jsx("div",Ce({},r.divProps))}function UB(t){var e=t.number,r=t.dates,n=nt(),s=n.onWeekNumberClick,o=n.styles,i=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(e),{locale:l});if(!s)return a.jsx("span",{className:i.weeknumber,style:o.weeknumber,children:d});var h=c(Number(e),{locale:l}),m=function(p){s(e,r,p)};return a.jsx(Jd,{name:"week-number","aria-label":h,className:i.weeknumber,style:o.weeknumber,onClick:m,children:d})}function BB(t){var e,r,n=nt(),s=n.styles,o=n.classNames,i=n.showWeekNumber,l=n.components,c=(e=l==null?void 0:l.Day)!==null&&e!==void 0?e:$B,u=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:UB,d;return i&&(d=a.jsx("td",{className:o.cell,style:s.cell,children:a.jsx(u,{number:t.weekNumber,dates:t.dates})})),a.jsxs("tr",{className:o.row,style:s.row,children:[d,t.dates.map(function(h){return a.jsx("td",{className:o.cell,style:s.cell,role:"presentation",children:a.jsx(c,{displayMonth:t.displayMonth,date:h})},B6(h))})]})}function M0(t,e,r){for(var n=r!=null&&r.ISOWeek?EC(e):ox(e,r),s=r!=null&&r.ISOWeek?co(t):Wn(t,r),o=Fn(n,s),i=[],l=0;l<=o;l++)i.push(rr(s,l));var c=i.reduce(function(u,d){var h=r!=null&&r.ISOWeek?TC(d):OC(d,r),m=u.find(function(p){return p.weekNumber===h});return m?(m.dates.push(d),u):(u.push({weekNumber:h,dates:[d]}),u)},[]);return c}function zB(t,e){var r=M0(_r(t),Kh(t),e);if(e!=null&&e.useFixedWeeks){var n=W6(t,e);if(n<6){var s=r[r.length-1],o=s.dates[s.dates.length-1],i=tg(o,6-n),l=M0(tg(o,1),i,e);r.push.apply(r,l)}}return r}function WB(t){var e,r,n,s=nt(),o=s.locale,i=s.classNames,l=s.styles,c=s.hideHead,u=s.fixedWeeks,d=s.components,h=s.weekStartsOn,m=s.firstWeekContainsDate,p=s.ISOWeek,v=zB(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:p,locale:o,weekStartsOn:h,firstWeekContainsDate:m}),g=(e=d==null?void 0:d.Head)!==null&&e!==void 0?e:sB,w=(r=d==null?void 0:d.Row)!==null&&r!==void 0?r:BB,y=(n=d==null?void 0:d.Footer)!==null&&n!==void 0?n:tB;return a.jsxs("table",{id:t.id,className:i.table,style:l.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&a.jsx(g,{}),a.jsx("tbody",{className:i.tbody,style:l.tbody,children:v.map(function(x){return a.jsx(w,{displayMonth:t.displayMonth,dates:x.dates,weekNumber:x.weekNumber},x.weekNumber)})}),a.jsx(y,{displayMonth:t.displayMonth})]})}function VB(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var HB=VB()?f.useLayoutEffect:f.useEffect,lm=!1,qB=0;function I0(){return"react-day-picker-".concat(++qB)}function KB(t){var e,r=t??(lm?I0():null),n=f.useState(r),s=n[0],o=n[1];return HB(function(){s===null&&o(I0())},[]),f.useEffect(function(){lm===!1&&(lm=!0)},[]),(e=t??s)!==null&&e!==void 0?e:void 0}function GB(t){var e,r,n=nt(),s=n.dir,o=n.classNames,i=n.styles,l=n.components,c=qc().displayMonths,u=KB(n.id?"".concat(n.id,"-").concat(t.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(t.displayIndex):void 0,h=[o.month],m=i.month,p=t.displayIndex===0,v=t.displayIndex===c.length-1,g=!p&&!v;s==="rtl"&&(e=[p,v],v=e[0],p=e[1]),p&&(h.push(o.caption_start),m=Ce(Ce({},m),i.caption_start)),v&&(h.push(o.caption_end),m=Ce(Ce({},m),i.caption_end)),g&&(h.push(o.caption_between),m=Ce(Ce({},m),i.caption_between));var w=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:eB;return a.jsxs("div",{className:h.join(" "),style:m,children:[a.jsx(w,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),a.jsx(WB,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function YB(t){var e=nt(),r=e.classNames,n=e.styles;return a.jsx("div",{className:r.months,style:n.months,children:t.children})}function QB(t){var e,r,n=t.initialProps,s=nt(),o=mx(),i=qc(),l=f.useState(!1),c=l[0],u=l[1];f.useEffect(function(){s.initialFocus&&o.focusTarget&&(c||(o.focus(o.focusTarget),u(!0)))},[s.initialFocus,c,o.focus,o.focusTarget,o]);var d=[s.classNames.root,s.className];s.numberOfMonths>1&&d.push(s.classNames.multiple_months),s.showWeekNumber&&d.push(s.classNames.with_weeknumber);var h=Ce(Ce({},s.styles.root),s.style),m=Object.keys(n).filter(function(v){return v.startsWith("data-")}).reduce(function(v,g){var w;return Ce(Ce({},v),(w={},w[g]=n[g],w))},{}),p=(r=(e=n.components)===null||e===void 0?void 0:e.Months)!==null&&r!==void 0?r:YB;return a.jsx("div",Ce({className:d.join(" "),style:h,dir:s.dir,id:s.id,nonce:n.nonce,title:n.title,lang:n.lang},m,{children:a.jsx(p,{children:i.displayMonths.map(function(v,g){return a.jsx(GB,{displayIndex:g,displayMonth:v},g)})})}))}function JB(t){var e=t.children,r=_8(t,["children"]);return a.jsx(U8,{initialProps:r,children:a.jsx(Q8,{children:a.jsx(RB,{initialProps:r,children:a.jsx(oB,{initialProps:r,children:a.jsx(cB,{initialProps:r,children:a.jsx(vB,{children:a.jsx(PB,{children:e})})})})})})})}function XB(t){return a.jsx(JB,Ce({},t,{children:a.jsx(QB,{initialProps:t})}))}function HC({className:t,classNames:e,showOutsideDays:r=!0,...n}){return a.jsx(XB,{showOutsideDays:r,className:Z("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Z(lc({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Z(lc({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...s})=>a.jsx(wL,{className:"h-4 w-4"}),IconRight:({...s})=>a.jsx(cc,{className:"h-4 w-4"})},...n})}HC.displayName="Calendar";function gx({onSearch:t,onFilterStatus:e,onFilterAssignee:r,onFilterDateRange:n,users:s=[],statuses:o=[],placeholder:i,className:l}){const{t:c}=Xe(),{currentLanguage:u}=_a(),[d,h]=f.useState(""),[m,p]=f.useState({from:void 0,to:void 0}),v=u==="ar"?w8:void 0;f.useEffect(()=>{const y=setTimeout(()=>{t(d)},300);return()=>clearTimeout(y)},[d,t]);const g=y=>{p(y),n&&n(y)},w=()=>{h(""),p({from:void 0,to:void 0}),e&&e("all"),r&&r("all"),n&&n({from:void 0,to:void 0})};return a.jsxs("div",{className:Z("flex flex-col sm:flex-row gap-3 mb-6",l),children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(ba,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground rtl:right-2.5 rtl:left-auto"}),a.jsx(je,{placeholder:i||c("common.search","Search..."),value:d,onChange:y=>h(y.target.value),className:"pl-9 rtl:pr-9 rtl:pl-3"})]}),a.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 sm:pb-0",children:[e&&o.length>0&&a.jsxs(We,{onValueChange:e,children:[a.jsxs(Fe,{className:"w-[140px]",children:[a.jsx(kL,{className:"mr-2 h-4 w-4"}),a.jsx(Ve,{placeholder:c("common.status","Status")})]}),a.jsxs($e,{children:[a.jsx(oe,{value:"all",children:c("common.all","All")}),o.map(y=>a.jsx(oe,{value:y.value,children:y.label},y.value))]})]}),r&&s.length>0&&a.jsxs(We,{onValueChange:r,children:[a.jsxs(Fe,{className:"w-[140px]",children:[a.jsx(ZB,{className:"mr-2 h-4 w-4"}),a.jsx(Ve,{placeholder:c("common.assignee","Assignee")})]}),a.jsxs($e,{children:[a.jsx(oe,{value:"all",children:c("common.all","All")}),s.filter(y=>["employee","admin","manager","team_leader"].includes(y.user_role)).map(y=>a.jsx(oe,{value:y.user_id.toString(),children:H(y,"user_name")},y.user_id))]})]}),n&&a.jsxs(CU,{children:[a.jsx(EU,{asChild:!0,children:a.jsxs(q,{variant:"outline",className:Z("w-[240px] justify-start text-left font-normal",!m.from&&"text-muted-foreground"),children:[a.jsx(ls,{className:"mr-2 h-4 w-4"}),m.from?m.to?a.jsxs(a.Fragment,{children:[xn(m.from,"LLL dd, y",{locale:v})," -"," ",xn(m.to,"LLL dd, y",{locale:v})]}):xn(m.from,"LLL dd, y",{locale:v}):a.jsx("span",{children:c("common.pickDate","Pick a date")})]})}),a.jsx(NC,{className:"w-auto p-0",align:"start",children:a.jsx(HC,{initialFocus:!0,mode:"range",defaultMonth:m.from,selected:m,onSelect:g,numberOfMonths:2})})]}),a.jsx(q,{variant:"ghost",size:"icon",onClick:w,title:c("common.clearFilters","Clear filters"),children:a.jsx(Ec,{className:"h-4 w-4"})})]})]})}function ZB(t){return a.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}const cm=1024;function xo(){const[t,e]=f.useState(void 0);return f.useEffect(()=>{const r=window.matchMedia(`(max-width: ${cm-1}px)`),n=()=>{e(window.innerWidth<cm)};return r.addEventListener("change",n),e(window.innerWidth<cm),()=>r.removeEventListener("change",n)},[]),!!t}var qC="AlertDialog",[ez,EW]=jr(qC,[Vk]),gs=Vk(),KC=t=>{const{__scopeAlertDialog:e,...r}=t,n=gs(e);return a.jsx(Qv,{...n,...r,modal:!0})};KC.displayName=qC;var tz="AlertDialogTrigger",GC=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=gs(r);return a.jsx(Jv,{...s,...n,ref:e})});GC.displayName=tz;var rz="AlertDialogPortal",YC=t=>{const{__scopeAlertDialog:e,...r}=t,n=gs(e);return a.jsx(Xv,{...n,...r})};YC.displayName=rz;var nz="AlertDialogOverlay",QC=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=gs(r);return a.jsx(Fc,{...s,...n,ref:e})});QC.displayName=nz;var ii="AlertDialogContent",[sz,az]=ez(ii),oz=SI("AlertDialogContent"),JC=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,children:n,...s}=t,o=gs(r),i=f.useRef(null),l=Ae(e,i),c=f.useRef(null);return a.jsx(B5,{contentName:ii,titleName:XC,docsSlug:"alert-dialog",children:a.jsx(sz,{scope:r,cancelRef:c,children:a.jsxs($c,{role:"alertdialog",...o,...s,ref:l,onOpenAutoFocus:ue(s.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[a.jsx(oz,{children:n}),a.jsx(lz,{contentRef:i})]})})})});JC.displayName=ii;var XC="AlertDialogTitle",ZC=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=gs(r);return a.jsx(Uc,{...s,...n,ref:e})});ZC.displayName=XC;var eE="AlertDialogDescription",tE=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=gs(r);return a.jsx(Bc,{...s,...n,ref:e})});tE.displayName=eE;var iz="AlertDialogAction",rE=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=gs(r);return a.jsx(Fh,{...s,...n,ref:e})});rE.displayName=iz;var nE="AlertDialogCancel",sE=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,{cancelRef:s}=az(nE,r),o=gs(r),i=Ae(e,s);return a.jsx(Fh,{...o,...n,ref:i})});sE.displayName=nE;var lz=({contentRef:t})=>{const e=`\`${ii}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ii}\` by passing a \`${eE}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ii}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return f.useEffect(()=>{var n;document.getElementById((n=t.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},cz=KC,uz=GC,dz=YC,aE=QC,oE=JC,iE=rE,lE=sE,cE=ZC,uE=tE;const ka=cz,Kc=uz,hz=dz,dE=f.forwardRef(({className:t,...e},r)=>a.jsx(aE,{className:Z("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:r}));dE.displayName=aE.displayName;const vs=f.forwardRef(({className:t,...e},r)=>a.jsxs(hz,{children:[a.jsx(dE,{}),a.jsx(oE,{ref:r,className:Z("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));vs.displayName=oE.displayName;const xs=({className:t,...e})=>a.jsx("div",{className:Z("flex flex-col space-y-2 text-center sm:text-left",t),...e});xs.displayName="AlertDialogHeader";const ys=({className:t,...e})=>a.jsx("div",{className:Z("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});ys.displayName="AlertDialogFooter";const ws=f.forwardRef(({className:t,...e},r)=>a.jsx(cE,{ref:r,className:Z("text-lg font-semibold",t),...e}));ws.displayName=cE.displayName;const _s=f.forwardRef(({className:t,...e},r)=>a.jsx(uE,{ref:r,className:Z("text-sm text-muted-foreground",t),...e}));_s.displayName=uE.displayName;const bs=f.forwardRef(({className:t,...e},r)=>a.jsx(iE,{ref:r,className:Z(lc(),t),...e}));bs.displayName=iE.displayName;const js=f.forwardRef(({className:t,...e},r)=>a.jsx(lE,{ref:r,className:Z(lc({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));js.displayName=lE.displayName;const Or=f.forwardRef(({className:t,...e},r)=>a.jsx("textarea",{className:Z("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));Or.displayName="Textarea";function vx({stages:t,currentStageId:e,onStageChange:r,children:n}){const s=xo(),o=f.useRef(null),i=t.find(l=>l.id===e)??t[0];return f.useEffect(()=>{s&&o.current&&o.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},[i==null?void 0:i.id,s]),s?a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsx("div",{className:"border-b bg-background/95 backdrop-blur sticky top-0 z-20 shadow-sm",children:a.jsx("div",{className:"w-full overflow-x-auto scrollbar-hide",dir:gn()?"ltr":"rtl",children:a.jsx("div",{className:"flex gap-2 p-3 min-w-max rtl:flex-row-reverse",children:[...t].sort((l,c)=>(gn(),l.id-c.id)).map(l=>{const c=l.id===i.id;return a.jsxs("button",{ref:c?o:null,onClick:()=>r(l.id),className:Z("inline-flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all font-medium text-sm border-2 flex-shrink-0",c?"bg-primary text-primary-foreground shadow-md border-primary":"bg-card text-muted-foreground hover:bg-accent hover:text-accent-foreground border-border"),children:[a.jsx("span",{className:"truncate max-w-[140px]",children:l.name}),a.jsx(Me,{variant:"secondary",className:Z("h-5 min-w-5 px-1.5 text-xs font-semibold",c?"bg-primary-foreground/20 text-primary-foreground border-primary-foreground/30":"bg-muted"),children:l.count})]},l.id)})})})}),a.jsx("div",{className:"flex-1 overflow-auto scrollbar-hide",children:a.jsx("div",{className:"p-2",children:n})})]}):a.jsx(a.Fragment,{children:n})}var Yh="Tabs",[fz,PW]=jr(Yh,[Dh]),hE=Dh(),[mz,xx]=fz(Yh),fE=f.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=Pc(l),[h,m]=fa({prop:n,onChange:s,defaultProp:o??"",caller:Yh});return a.jsx(mz,{scope:r,baseId:vn(),value:h,onValueChange:m,orientation:i,dir:d,activationMode:c,children:a.jsx(be.div,{dir:d,"data-orientation":i,...u,ref:e})})});fE.displayName=Yh;var mE="TabsList",pE=f.forwardRef((t,e)=>{const{__scopeTabs:r,loop:n=!0,...s}=t,o=xx(mE,r),i=hE(r);return a.jsx(KN,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:n,children:a.jsx(be.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:e})})});pE.displayName=mE;var gE="TabsTrigger",vE=f.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...o}=t,i=xx(gE,r),l=hE(r),c=wE(i.baseId,n),u=_E(i.baseId,n),d=n===i.value;return a.jsx(GN,{asChild:!0,...l,focusable:!s,active:d,children:a.jsx(be.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...o,ref:e,onMouseDown:ue(t.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?i.onValueChange(n):h.preventDefault()}),onKeyDown:ue(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&i.onValueChange(n)}),onFocus:ue(t.onFocus,()=>{const h=i.activationMode!=="manual";!d&&!s&&h&&i.onValueChange(n)})})})});vE.displayName=gE;var xE="TabsContent",yE=f.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,forceMount:s,children:o,...i}=t,l=xx(xE,r),c=wE(l.baseId,n),u=_E(l.baseId,n),d=n===l.value,h=f.useRef(d);return f.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),a.jsx(cr,{present:s||d,children:({present:m})=>a.jsx(be.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...i,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:m&&o})})});yE.displayName=xE;function wE(t,e){return`${t}-trigger-${e}`}function _E(t,e){return`${t}-content-${e}`}var pz=fE,bE=pE,jE=vE,SE=yE;const Gc=pz,Xi=f.forwardRef(({className:t,...e},r)=>a.jsx(bE,{ref:r,className:Z("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Xi.displayName=bE.displayName;const Yr=f.forwardRef(({className:t,...e},r)=>a.jsx(jE,{ref:r,className:Z("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...e}));Yr.displayName=jE.displayName;const Qr=f.forwardRef(({className:t,...e},r)=>a.jsx(SE,{ref:r,className:Z("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Qr.displayName=SE.displayName;function gz({relatedType:t,relatedId:e,notes:r,onNotesChange:n}){const{t:s}=Xe(),{user:o}=yt(),[i,l]=f.useState(""),[c,u]=f.useState(null),[d,h]=f.useState(""),[m,p]=f.useState(null),[v,g]=f.useState(!1),w=async()=>{if(!(!i.trim()||!(o!=null&&o.id))){g(!0);try{await Xu.create({content:i.trim(),related_to_type:t,related_to_id:e,created_by:o.id}),l(""),n()}catch(b){console.error("Failed to create note:",b)}finally{g(!1)}}},y=async b=>{if(d.trim()){g(!0);try{await Xu.update(b,d.trim()),u(null),h(""),n()}catch(j){console.error("Failed to update note:",j)}finally{g(!1)}}},x=async()=>{if(m){g(!0);try{await Xu.delete(m),p(null),n()}catch(b){console.error("Failed to delete note:",b)}finally{g(!1)}}},_=b=>{if(!b)return"";try{return $6(new Date(b),{addSuffix:!0})}catch{return b}};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Or,{value:i,onChange:b=>l(b.target.value),placeholder:s("notes.placeholder"),rows:3,className:"resize-none"}),a.jsxs(q,{onClick:w,disabled:!i.trim()||v,className:"w-full",children:[a.jsx(cs,{className:"h-4 w-4 mr-2"}),s("notes.save")]})]}),a.jsx("div",{className:"space-y-3",children:r.length===0?a.jsx("p",{className:"text-center text-muted-foreground py-8",children:s("notes.noNotes")}):r.map(b=>{var k;const j=c===b.note_id,N=b.created_by===(o==null?void 0:o.id);return a.jsxs("div",{className:"border rounded-lg p-4 space-y-2 bg-card",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[(k=b.user)!=null&&k.avatar?a.jsx("img",{src:b.user.avatar,alt:H(b.user,"user_name"),className:"h-8 w-8 rounded-full flex-shrink-0"}):a.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-xs font-semibold text-primary",children:b.user?H(b.user,"user_name")[0]:"?"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:b.user?H(b.user,"user_name"):s("notes.unknown")}),a.jsx("p",{className:"text-xs text-muted-foreground",children:_(b.created_at)})]})]}),N&&!j&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>{u(b.note_id),h(b.content)},children:a.jsx(bh,{className:"h-3.5 w-3.5"})}),a.jsx(q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-destructive",onClick:()=>p(b.note_id),children:a.jsx(wr,{className:"h-3.5 w-3.5"})})]})]}),j?a.jsxs("div",{className:"space-y-2",children:[a.jsx(Or,{value:d,onChange:E=>h(E.target.value),rows:3,className:"resize-none"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(q,{size:"sm",onClick:()=>y(b.note_id),disabled:!d.trim()||v,children:[a.jsx(cs,{className:"h-3.5 w-3.5 mr-1"}),s("notes.save")]}),a.jsxs(q,{size:"sm",variant:"outline",onClick:()=>{u(null),h("")},children:[a.jsx(Ec,{className:"h-3.5 w-3.5 mr-1"}),s("buttons.cancel")]})]})]}):a.jsx("p",{className:"text-sm whitespace-pre-wrap",children:b.content})]},b.note_id)})}),a.jsx(ka,{open:!!m,onOpenChange:()=>p(null),children:a.jsxs(vs,{children:[a.jsxs(xs,{children:[a.jsx(ws,{children:s("notes.delete")}),a.jsx(_s,{children:s("notes.deleteConfirmation")})]}),a.jsxs(ys,{children:[a.jsx(js,{children:s("buttons.cancel")}),a.jsx(bs,{onClick:x,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:s("buttons.delete")})]})]})})]})}function vz({leadId:t}){const{t:e}=Xe(),[r,n]=f.useState(null),[s,o]=f.useState(null),[i,l]=f.useState(null),[c,u]=f.useState(null),[d,h]=f.useState(""),[m,p]=f.useState([]),[v,g]=f.useState(!0);f.useEffect(()=>{w()},[t]);const w=async()=>{try{g(!0);const b=await Fs.getById(t);if(n(b),!b)return;if(b.client_user_id){const j=await qt.getByAuthId(b.client_user_id);o(j)}if(b.created_by){const j=await qt.getByAuthId(b.created_by);l(j)}if(b.assigned_to){const j=await qt.getByAuthId(b.assigned_to);u(j)}if(b.stage){const N=(await pr.getAll()).find(k=>k.stage_id===b.stage);N&&h(H(N,"stage_name"))}y()}catch(b){console.error("Failed to load lead data:",b)}finally{g(!1)}},y=async()=>{try{const b=await Xu.getByRelated("lead",t);p(b)}catch(b){console.error("Failed to load notes:",b)}},x=(b,j)=>{if(b===null)return"-";const N=j||"SAR";return new Intl.NumberFormat("en-US",{style:"currency",currency:N==="SAR"?"SAR":N}).format(b)},_=b=>b?new Date(b).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-";return v?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):r?a.jsxs(Gc,{defaultValue:"overview",className:"w-full",children:[a.jsxs(Xi,{className:"grid w-full grid-cols-2",children:[a.jsx(Yr,{value:"overview",children:e("common.overview")}),a.jsx(Yr,{value:"notes",children:e("notes.title")})]}),a.jsxs(Qr,{value:"overview",className:"space-y-4 mt-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold",children:H(r,"lead_name")}),H(r,"lead_description")&&a.jsx("p",{className:"text-muted-foreground mt-1",children:H(r,"lead_description")})]}),a.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/50",children:[a.jsx(Al,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:e("leads.value")}),a.jsx("p",{className:"text-lg font-semibold",children:x(r.value,r.currency)})]})]}),s&&a.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border",children:[a.jsx(po,{className:"h-5 w-5 text-primary mt-0.5"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:e("leads.client")}),a.jsx("p",{className:"font-medium truncate",children:H(s,"user_name")}),s.user_email&&a.jsx("p",{className:"text-sm text-muted-foreground truncate",children:s.user_email})]})]}),a.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg border",children:[a.jsx($L,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:e("common.stage")}),a.jsx(Me,{variant:"secondary",children:d||"-"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg border",children:[a.jsx(us,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:e("leads.assignedTo")}),a.jsx("p",{className:"font-medium",children:c?H(c,"user_name"):e("common.unassigned")})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"p-3 rounded-lg border",children:[a.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[a.jsx(ls,{className:"h-3.5 w-3.5"}),e("common.created")]}),a.jsx("p",{className:"text-sm font-medium mt-1",children:_(r.created_date)})]}),i&&a.jsxs("div",{className:"p-3 rounded-lg border",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:e("leads.createdBy")}),a.jsx("p",{className:"text-sm font-medium mt-1 truncate",children:H(i,"user_name")})]})]})]}),a.jsx(Qr,{value:"notes",className:"mt-4",children:a.jsx(gz,{relatedType:"lead",relatedId:t,notes:m,onNotesChange:y})})]}):a.jsx("div",{className:"text-center py-12 text-muted-foreground",children:e("leads.notFound")})}function xz({priority:t=3,size:e="sm",showCount:r=!1,className:n}){const s=t||3,o={sm:"h-3 w-3",md:"h-4 w-4",lg:"h-5 w-5"};return a.jsxs("div",{className:Z("flex items-center gap-0.5",n),children:[[1,2,3,4,5].map(i=>a.jsx(m1,{className:Z(o[e],i<=s?"fill-yellow-400 text-yellow-400":"fill-none text-gray-300 dark:text-gray-600")},i)),r&&a.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",s,"/5)"]})]})}function Qh({title:t,description:e,icon:r,actions:n,breadcrumbs:s,stats:o,className:i=""}){return a.jsxs("div",{className:Z("mb-6",i),children:[s&&s.length>0&&a.jsx("nav",{className:"flex items-center gap-2 text-sm mb-3",children:s.map((l,c)=>a.jsxs(f.Fragment,{children:[c>0&&a.jsx(cc,{className:"h-3.5 w-3.5 text-muted-foreground/50"}),l.href?a.jsx(Uj,{to:l.href,className:"text-muted-foreground hover:text-foreground transition-colors",children:l.label}):a.jsx("span",{className:"font-medium text-foreground",children:l.label})]},c))}),a.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[r&&a.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary/10 to-primary/5 flex items-center justify-center flex-shrink-0 border border-primary/10 ring-4 ring-primary/5",children:r}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight text-foreground",children:t}),e&&a.jsx("p",{className:"text-muted-foreground mt-1 max-w-2xl text-sm",children:e})]})]}),n&&a.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:n})]}),o&&o.length>0&&a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:o.map((l,c)=>a.jsx(xe,{className:"p-3 hover:shadow-md transition-all hover:-translate-y-0.5 border-border/50",children:a.jsxs("div",{className:"flex items-center gap-3",children:[l.icon&&a.jsx("div",{className:"h-9 w-9 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:l.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wide",children:l.label}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("p",{className:"text-xl font-bold text-foreground truncate",children:l.value}),l.trend&&a.jsxs("span",{className:Z("text-xs font-medium",l.trend.isPositive?"text-green-600":"text-red-600"),children:[l.trend.isPositive?"+":"",l.trend.value,"%"]})]})]})]})},c))})]})}function Jh({message:t="Loading...",className:e=""}){return a.jsxs("div",{className:`flex flex-col items-center justify-center py-16 ${e}`,children:[a.jsxs("div",{className:"relative",children:[a.jsx(PL,{className:"h-16 w-16 text-primary animate-spin"}),a.jsx("div",{className:"absolute inset-0 h-16 w-16 rounded-full border-4 border-muted opacity-25"})]}),a.jsx("p",{className:"mt-6 text-sm text-muted-foreground animate-pulse font-medium",children:t})]})}function yz({lead:t,client:e,creator:r,assignedUser:n,userRole:s,users:o=[],onDelete:i,onAssign:l,onClick:c,onDragStart:u,isDragging:d=!1}){const{t:h}=Xe(),m=xo(),p=g=>g?new Date(g).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):h("leads.unknown"),v=(g,w)=>{if(g===null)return"-";const y=w||"SAR";return new Intl.NumberFormat("en-US",{style:"currency",currency:y}).format(g)};return a.jsxs(xe,{className:Z("group relative hover:shadow-lg transition-all duration-200 cursor-pointer",m?"w-full border-l-4 border-l-blue-500 rtl:border-l-0 rtl:border-r-4 rtl:border-r-blue-500":"w-[280px] sm:w-[300px]",d&&"opacity-50 rotate-2 scale-105"),onClick:c,draggable:!!u,onDragStart:g=>{u&&(g.dataTransfer.effectAllowed="move",g.dataTransfer.setData("text/plain",t.lead_id.toString()),u(t.lead_id))},children:[a.jsxs(Ie,{className:"pb-3 px-4 pt-4",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-base mb-1 truncate group-hover:text-primary transition-colors",children:H(t,"lead_name")}),H(t,"lead_description")&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:H(t,"lead_description")})]}),i&&a.jsxs(ka,{children:[a.jsx(Kc,{asChild:!0,onClick:g=>g.stopPropagation(),children:a.jsx(q,{variant:"ghost",size:"sm",className:Z("h-8 w-8 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10",m?"opacity-100":"opacity-0 group-hover:opacity-100 transition-opacity"),children:a.jsx(wr,{className:"h-4 w-4"})})}),a.jsxs(vs,{onClick:g=>g.stopPropagation(),children:[a.jsxs(xs,{children:[a.jsx(ws,{children:h("leads.deleteLead")}),a.jsx(_s,{children:h("leads.deleteConfirmation",{name:H(t,"lead_name")})})]}),a.jsxs(ys,{children:[a.jsx(js,{children:h("buttons.cancel")}),a.jsx(bs,{onClick:g=>{g.stopPropagation(),i(t.lead_id)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:h("buttons.delete")})]})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between gap-2 mt-2",children:[a.jsx(xz,{priority:t.priority,size:"sm"}),t.expected_close_date&&a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(ls,{className:"h-3 w-3"}),a.jsx("span",{children:p(t.expected_close_date)})]})]})]}),a.jsxs(_e,{className:"px-4 pb-4 space-y-3",children:[t.value!==null&&t.value!==void 0&&t.value>0&&a.jsxs("div",{className:"flex items-center gap-2 p-2.5 rounded-lg bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20 border border-green-200 dark:border-green-800/50",children:[a.jsx("div",{className:"h-8 w-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:a.jsx(Al,{className:"h-4 w-4 text-green-600 dark:text-green-500"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-[10px] uppercase tracking-wide text-green-700/70 dark:text-green-400/70 font-medium",children:h("leads.value")}),a.jsx("p",{className:"text-base font-bold text-green-700 dark:text-green-400 truncate",children:v(t.value,t.currency)})]})]}),e&&a.jsxs("div",{className:"flex items-center gap-2 p-2.5 rounded-lg bg-muted/30 hover:bg-muted/50 transition-colors border border-border/50",children:[a.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:a.jsx(po,{className:"h-4 w-4 text-primary"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-[10px] uppercase tracking-wide text-muted-foreground font-medium",children:h("leads.client")}),a.jsx("p",{className:"text-sm font-semibold truncate",children:H(e,"user_name")})]})]}),(s==="admin"||s==="manager")&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r&&a.jsxs("div",{className:"flex items-start gap-1.5",children:[a.jsx(us,{className:"h-3.5 w-3.5 text-muted-foreground mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-[10px] text-muted-foreground",children:h("leads.createdBy")}),a.jsx("p",{className:"text-xs font-medium truncate",children:H(r,"user_name")})]})]}),a.jsxs("div",{className:"flex items-start gap-1.5",children:[a.jsx(us,{className:"h-3.5 w-3.5 text-muted-foreground mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-[10px] text-muted-foreground",children:h("leads.assignedTo")}),a.jsx("p",{className:"text-xs font-medium truncate",children:n?H(n,"user_name"):h("common.all","Unassigned")})]})]})]}),a.jsx("div",{className:"pt-1",children:a.jsxs(We,{value:t.assigned_to||"unassigned",onValueChange:g=>l&&l(t.lead_id,g==="unassigned"?"":g),children:[a.jsx(Fe,{className:"h-7 text-xs",children:a.jsx(Ve,{placeholder:h("leads.selectAssignee","Select assignee")})}),a.jsxs($e,{children:[a.jsx(oe,{value:"unassigned",children:h("common.all","Unassigned")}),o.filter(g=>["employee","admin","manager","team_leader"].includes(g.user_role)&&g.auth_user_id).map(g=>a.jsx(oe,{value:g.auth_user_id,children:H(g,"user_name")},g.user_id))]})]})})]}),a.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[a.jsx(ls,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:p(t.created_date)})]}),a.jsx(Me,{variant:"secondary",className:"text-xs",children:h("leads.lead")})]})]})]})}function wz(){var Ut,Gt,qn;Zr();const{hasRole:t,user:e}=yt(),r=xo(),{t:n}=Xe(),[s,o]=f.useState([]),[i,l]=f.useState([]),[c,u]=f.useState([]),[d,h]=f.useState([]),[m,p]=f.useState(!0);f.useState(!1),f.useState("");const[v,g]=f.useState(null),[w,y]=f.useState(""),[x,_]=f.useState(null),[b,j]=f.useState(null),[N,k]=f.useState(!1),[E,T]=f.useState(null),[P,z]=f.useState("kanban"),[B,Q]=f.useState(null),[R,Y]=f.useState(""),[M,D]=f.useState("all"),[C,L]=f.useState("all"),[I,W]=f.useState({from:void 0,to:void 0}),K=f.useMemo(()=>s.filter(U=>{const le=(U.lead_name||"").toLowerCase().includes(R.toLowerCase())||(U.lead_description||"").toLowerCase().includes(R.toLowerCase())||(U.client_name||"").toLowerCase().includes(R.toLowerCase()),Se=C==="all"||U.assigned_to&&U.assigned_to===C;let Ze=!0;if(I.from&&U.created_date){const Bt=new Date(U.created_date),Ue=new Date(I.from);Ue.setHours(0,0,0,0);const ee=new Date(Bt);if(ee.setHours(0,0,0,0),Ze=ee>=Ue,Ze&&I.to){const S=new Date(I.to);S.setHours(23,59,59,999),Ze=ee<=S}}else I.from&&!U.created_date&&(Ze=!1);return le&&Se&&Ze}),[s,R,M,C,I]),[te,O]=f.useState({lead_name:"",lead_description:"",client_name:"",client_user_id:"",stage:"1",assigned_to:"",value:"",currency:"SAR",priority:"3",expected_close_date:""});f.useEffect(()=>{re()},[]),f.useEffect(()=>{if(d.length>0&&E===null){const U=d.find(le=>le.stage_id===1);U&&T(U.stage_id)}},[d,E]);const re=async()=>{try{p(!0);const[U,le,Se,Ze]=await Promise.all([Fs.getAll(),qt.getAll(),ex.getAll(),pr.getByType("leads")]);console.log("[Leads] Loaded data:",{leads:U.length,clients:Se.length,users:le.length,stages:Ze.length}),console.log("[Leads] Leads data:",U),console.log("[Leads] Stages data:",Ze),o(U),l(Se),u(le),h(Ze)}catch(U){console.error("Failed to load data:",U)}finally{p(!1)}},de=async U=>{if(w.trim())try{await pr.update(U,{stage_name:w.trim()}),h(d.map(le=>le.stage_id===U?{...le,stage_name:w.trim()}:le)),g(null),y("")}catch(le){console.error("Failed to update stage:",le)}},ae=async U=>{if(s.filter(Se=>Se.stage===U).length>0){_(U);return}try{await pr.delete(U),h(d.filter(Se=>Se.stage_id!==U))}catch(Se){console.error("Failed to delete stage:",Se)}},ye=async()=>{if(x)try{await pr.delete(x),h(d.filter(U=>U.stage_id!==x)),_(null),re()}catch(U){console.error("Failed to delete stage:",U)}},Ee=U=>{j(U)},F=U=>{U.preventDefault(),U.dataTransfer.dropEffect="move"},se=async U=>{if(!b)return;const le=s.find(Se=>Se.lead_id===b);if(le&&le.stage!==U)try{await Fs.update(b,{stage:U}),o(s.map(Se=>Se.lead_id===b?{...Se,stage:U}:Se))}catch(Se){console.error("Failed to update lead stage:",Se)}j(null)},V=async U=>{try{await Fs.delete(U),o(s.filter(le=>le.lead_id!==U))}catch(le){console.error("Failed to delete lead:",le)}},fe=async(U,le)=>{const Se=le||null,Ze=Se?new Date().toISOString():null,Bt=s.find(Ue=>Ue.lead_id===U);if(Bt){o(s.map(Ue=>Ue.lead_id===U?{...Ue,assigned_to:Se,assigned_at:Ze}:Ue));try{await Fs.update(U,{assigned_to:Se,assigned_at:Ze})}catch(Ue){console.error("Failed to assign lead:",Ue),o(s.map(ee=>ee.lead_id===U?{...ee,assigned_to:Bt.assigned_to,assigned_at:Bt.assigned_at}:ee))}}},Re=U=>{O(le=>({...le,stage:U.toString()})),k(!0)},Ke=async()=>{if(te.lead_name.trim())try{const U=te.assigned_to&&te.assigned_to!=="unassigned"?te.assigned_to:null,le=U?new Date().toISOString():null,Se=wn({lead_name:te.lead_name.trim(),lead_description:te.lead_description.trim()||null,client_name:te.client_name.trim()||null,client_user_id:te.client_user_id||null,created_by:(e==null?void 0:e.id)||null,stage:parseInt(te.stage),assigned_to:U,assigned_at:le,value:te.value?parseFloat(te.value):null,currency:te.currency||"SAR",priority:te.priority?parseInt(te.priority):3,expected_close_date:te.expected_close_date||null},{lead_name:"lead_name",lead_description:"lead_description",client_name:"client_name"}),Ze=await Fs.create(Se);o([...s,Ze]),O({lead_name:"",lead_description:"",client_name:"",client_user_id:"",stage:"1",assigned_to:"",value:"",currency:"SAR",priority:"3",expected_close_date:""}),k(!1)}catch(U){console.error("Failed to create lead:",U)}},et=d.filter(U=>U.stage_type==="leads").sort((U,le)=>{const Se=U.stager_order_index??0,Ze=le.stager_order_index??0;return gn()?Ze-Se:Se-Ze}),mt=et.map(U=>({id:U.stage_id,name:H(U,"stage_name"),color:U.color,count:K.filter(le=>le.stage===U.stage_id).length}));return m?a.jsx(Jh,{message:n("leads.loading","Loading leads...")}):a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsx(Qh,{title:n("leads.title"),description:n("leads.description","Manage and track all your sales leads"),icon:a.jsx(Mr,{className:"h-6 w-6 text-primary"}),breadcrumbs:[{label:n("navigation.dashboard"),href:"/dashboard"},{label:n("navigation.leads")}],actions:a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-muted p-1 rounded-lg flex items-center gap-1",children:[a.jsx(q,{variant:P==="kanban"?"default":"ghost",size:"sm",onClick:()=>z("kanban"),className:"h-8 w-8 p-0",children:a.jsx(bv,{className:"h-4 w-4"})}),a.jsx(q,{variant:P==="list"?"default":"ghost",size:"sm",onClick:()=>z("list"),className:"h-8 w-8 p-0",children:a.jsx(jv,{className:"h-4 w-4"})})]}),a.jsxs(q,{onClick:()=>k(!0),children:[a.jsx(xt,{className:"mr-2 h-4 w-4"})," ",n("leads.newLead")]})]}),stats:[{label:n("leads.totalLeads","Total Leads"),value:s.length,icon:a.jsx(Mr,{className:"h-5 w-5 text-primary"})},{label:n("leads.thisMonth","This Month"),value:s.filter(U=>{const le=new Date(U.created_date),Se=new Date;return le.getMonth()===Se.getMonth()&&le.getFullYear()===Se.getFullYear()}).length,icon:a.jsx(ls,{className:"h-5 w-5 text-green-500"})},{label:n("leads.totalValue","Total Value"),value:`SAR ${s.reduce((U,le)=>U+(le.value||0),0).toLocaleString()}`,icon:a.jsx(Al,{className:"h-5 w-5 text-green-600"})},{label:n("leads.avgValue","Avg Value"),value:s.length>0?`SAR ${Math.round(s.reduce((U,le)=>U+(le.value||0),0)/s.length).toLocaleString()}`:"SAR 0",icon:a.jsx(Al,{className:"h-5 w-5 text-blue-500"})}]}),a.jsx(gx,{onSearch:Y,onFilterAssignee:L,onFilterDateRange:W,users:c}),P==="kanban"?a.jsxs(vx,{stages:mt,currentStageId:E||((Ut=mt[0])==null?void 0:Ut.id),onStageChange:T,children:[a.jsx(Ot,{open:N,onOpenChange:k,children:a.jsxs(Nt,{className:"w-[95vw] sm:w-full sm:max-w-[500px] max-h-[85vh] overflow-y-auto",children:[a.jsxs(kt,{children:[a.jsx(Ct,{children:n("leads.createLead")}),a.jsx(or,{children:n("leads.createLeadDesc")})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-sm font-medium",children:[n("leads.leadName")," *"]}),a.jsx(je,{value:te.lead_name,onChange:U=>O(le=>({...le,lead_name:U.target.value})),placeholder:n("leads.leadNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.description")}),a.jsx(Or,{value:te.lead_description,onChange:U=>O(le=>({...le,lead_description:U.target.value})),placeholder:n("leads.descriptionPlaceholder"),rows:3})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.clientName")}),a.jsx(je,{value:te.client_name,onChange:U=>O(le=>({...le,client_name:U.target.value})),placeholder:n("leads.clientNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.client")}),a.jsxs(We,{value:te.client_user_id,onValueChange:U=>O(le=>({...le,client_user_id:U})),children:[a.jsx(Fe,{children:a.jsx(Ve,{placeholder:n("leads.selectClient")})}),a.jsx($e,{children:i.filter(U=>U.auth_user_id).map(U=>a.jsx(oe,{value:U.auth_user_id,children:H(U,"user_name")},U.user_id))})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.value")}),a.jsx(je,{type:"number",min:"0",step:"0.01",value:te.value,onChange:U=>O(le=>({...le,value:U.target.value})),placeholder:"0.00"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.currency")}),a.jsxs(We,{value:te.currency,onValueChange:U=>O(le=>({...le,currency:U})),children:[a.jsx(Fe,{children:a.jsx(Ve,{})}),a.jsxs($e,{children:[a.jsx(oe,{value:"SAR",children:"SAR (.)"}),a.jsx(oe,{value:"USD",children:"USD ($)"}),a.jsx(oe,{value:"EUR",children:"EUR ()"}),a.jsx(oe,{value:"GBP",children:"GBP ()"})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("common.priority")}),a.jsxs(We,{value:te.priority,onValueChange:U=>O(le=>({...le,priority:U})),children:[a.jsx(Fe,{children:a.jsx(Ve,{})}),a.jsxs($e,{children:[a.jsxs(oe,{value:"1",children:[" ",n("common.veryLow")]}),a.jsxs(oe,{value:"2",children:[" ",n("common.low")]}),a.jsxs(oe,{value:"3",children:[" ",n("common.medium")]}),a.jsxs(oe,{value:"4",children:[" ",n("common.high")]}),a.jsxs(oe,{value:"5",children:[" ",n("common.veryHigh")]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.expectedCloseDate")}),a.jsx(je,{type:"date",value:te.expected_close_date,onChange:U=>O(le=>({...le,expected_close_date:U.target.value}))})]})]}),((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="manager")&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.assignToEmployee")}),a.jsxs(We,{value:te.assigned_to,onValueChange:U=>O(le=>({...le,assigned_to:U})),children:[a.jsx(Fe,{children:a.jsx(Ve,{placeholder:n("leads.selectAssignee","Select assignee")})}),a.jsxs($e,{children:[a.jsx(oe,{value:"unassigned",children:n("common.all","Unassigned")}),c.filter(U=>["employee","admin","manager","team_leader"].includes(U.user_role)&&U.auth_user_id).map(U=>a.jsx(oe,{value:U.auth_user_id,children:H(U,"user_name")},U.user_id))]})]})]})]}),a.jsxs(ar,{children:[a.jsx(q,{variant:"outline",onClick:()=>k(!1),children:n("buttons.cancel")}),a.jsxs(q,{onClick:Ke,disabled:!((Gt=te.lead_name)!=null&&Gt.trim()),children:[a.jsx(cs,{className:"h-4 w-4 mr-2"}),n("leads.createLead")]})]})]})}),a.jsx("div",{className:"flex gap-6 pb-6 overflow-x-auto scrollbar-hide max-w-full pl-6 rtl:pr-6 rtl:pl-0 flex-1",children:et.filter(U=>{var le;return r?U.stage_id===(E||((le=mt[0])==null?void 0:le.id)):!0}).map((U,le)=>{var S,$,X;const Se=K.filter(G=>G.stage===U.stage_id),Ze=Se.reduce((G,ge)=>G+(ge.value||0),0),Bt=new Set(Se.filter(G=>G.value!==null&&G.currency).map(G=>G.currency)),Ue=Bt.size===1?Array.from(Bt)[0]:((S=Se.find(G=>G.currency))==null?void 0:S.currency)||"SAR",ee=(G,ge)=>new Intl.NumberFormat("en-US",{style:"currency",currency:ge}).format(G);return console.log(`[Leads] Stage ${U.stage_name} (${U.stage_id}): ${Se.length} leads`),console.log("[Leads] Stage leads:",Se),a.jsxs("div",{className:Z("flex-shrink-0 animate-fade-in h-full flex flex-col",r?"w-full":"w-[280px] sm:w-[300px]"),style:{animationDelay:`${le*.1}s`},onDragOver:F,onDrop:()=>se(U.stage_id),children:[a.jsx("div",{className:Z("rounded-xl bg-muted/30 backdrop-blur p-2 mb-5 shadow-soft","sticky top-0 z-10",U.color||"border-l-4 border-primary/50","hidden md:block"),children:a.jsx("div",{className:"flex items-center justify-between mb-2 rtl:flex-row-reverse",children:v===U.stage_id?a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(je,{value:w,onChange:G=>y(G.target.value),onKeyDown:G=>{G.key==="Enter"&&de(U.stage_id),G.key==="Escape"&&(g(null),y(""))},className:"h-8 text-sm font-bold",autoFocus:!0}),a.jsx(q,{size:"sm",variant:"ghost",onClick:()=>de(U.stage_id),className:"h-8 w-8 p-0",children:""})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("h2",{className:"font-bold text-base",children:H(U,"stage_name")})}),a.jsxs("div",{className:"flex items-center gap-2 rtl:flex-row-reverse",children:[a.jsx("span",{className:"text-sm font-bold px-3 py-1 rounded-full bg-background shadow-sm border",children:Se.length}),a.jsxs(a.Fragment,{children:[a.jsx(q,{size:"sm",variant:"ghost",onClick:()=>Re(U.stage_id),className:"h-8 w-8 p-0 hover:bg-primary/10 hover:text-primary",title:n("leads.addLead"),children:a.jsx(xt,{className:"h-4 w-4"})}),a.jsx(q,{size:"sm",variant:"ghost",onClick:()=>{g(U.stage_id),y(H(U,"stage_name"))},className:"h-6 w-6 p-0",title:n("buttons.edit"),children:a.jsx(bh,{className:"h-3 w-3"})}),a.jsx(q,{size:"sm",variant:"ghost",onClick:()=>ae(U.stage_id),className:"h-6 w-6 p-0 text-destructive",title:n("buttons.delete"),children:a.jsx(wr,{className:"h-3 w-3"})})]})]})]})})}),a.jsxs("div",{className:"space-y-4 flex-1 overflow-y-auto pr-2 rtl:pr-0 rtl:pl-2 scrollbar-hide",children:[(($=d.sort((G,ge)=>(G.stager_order_index||0)-(ge.stager_order_index||0))[0])==null?void 0:$.stage_id)===U.stage_id&&a.jsx("div",{className:"mb-4",children:a.jsx(xe,{className:Z("group relative hover:shadow-lg transition-all duration-200 cursor-pointer","border-l-4 border-l-gray-300 rtl:border-l-0 rtl:border-r-4 rtl:border-r-gray-300","flex items-center justify-center bg-muted/20",r?"w-full h-[100px]":"w-[280px] sm:w-[300px] h-[120px]"),onClick:()=>Re(U.stage_id),children:a.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[a.jsx(xt,{className:"h-8 w-8"}),a.jsx("span",{className:"text-sm font-medium",children:n("leads.addNewLeadCard")})]})})}),Se.map(G=>{const ge=i.find(Ge=>Ge.auth_user_id===G.client_user_id),ie=c.find(Ge=>Ge.auth_user_id===G.created_by),De=c.find(Ge=>Ge.auth_user_id===G.assigned_to);return a.jsx("div",{children:a.jsx(yz,{lead:G,client:ge||null,creator:ie||null,assignedUser:De||null,userRole:e==null?void 0:e.role,users:c,onDelete:()=>V(G.lead_id),onAssign:fe,onClick:()=>Q(G.lead_id),onDragStart:Ee,isDragging:b===G.lead_id})},G.lead_id)}),((X=d.sort((G,ge)=>(G.stager_order_index||0)-(ge.stager_order_index||0))[0])==null?void 0:X.stage_id)!==U.stage_id&&a.jsx("div",{className:"mt-2",children:a.jsxs(q,{variant:"outline",size:"sm",className:"w-full h-12 border-dashed text-muted-foreground hover:text-foreground",onClick:()=>Re(U.stage_id),children:[a.jsx(xt,{className:"h-4 w-4 mr-2"}),n("leads.addLead")]})})]}),Se.length>0&&Ze>0&&a.jsx("div",{className:Z("rounded-xl bg-muted/30 backdrop-blur p-3 mt-2 shadow-soft","sticky bottom-0 z-10","border-t-4 border-t-primary/30","hidden md:block"),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Al,{className:"h-4 w-4 text-primary"}),a.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:n("leads.stageTotal",{amount:""}).replace(":","").trim()})]}),a.jsx("span",{className:"text-lg font-bold text-primary",children:ee(Ze,Ue)})]})})]},U.stage_id)})}),a.jsx(ka,{open:!!x,onOpenChange:()=>_(null),children:a.jsxs(vs,{children:[a.jsxs(xs,{children:[a.jsx(ws,{children:n("leads.deleteStage")}),a.jsx(_s,{children:n("leads.deleteStageConfirmation",{count:s.filter(U=>U.stage===x).length})})]}),a.jsxs(ys,{children:[a.jsx(js,{children:n("buttons.cancel")}),a.jsx(bs,{onClick:ye,className:"bg-destructive text-destructive-foreground",children:n("buttons.delete")})]})]})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-lg font-semibold",children:[n("leads.title")," (",s.length,")"]}),a.jsx(Ot,{open:N,onOpenChange:k,children:a.jsxs(Nt,{className:"w-[95vw] sm:w-full sm:max-w-[500px] max-h-[85vh] overflow-y-auto",children:[a.jsxs(kt,{children:[a.jsx(Ct,{children:n("leads.createLead")}),a.jsx(or,{children:n("leads.createLeadDesc")})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-sm font-medium",children:[n("leads.leadName")," *"]}),a.jsx(je,{value:te.lead_name,onChange:U=>O(le=>({...le,lead_name:U.target.value})),placeholder:n("leads.leadNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.description")}),a.jsx(Or,{value:te.lead_description,onChange:U=>O(le=>({...le,lead_description:U.target.value})),placeholder:n("leads.descriptionPlaceholder"),rows:3})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.clientName")}),a.jsx(je,{value:te.client_name,onChange:U=>O(le=>({...le,client_name:U.target.value})),placeholder:n("leads.clientNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.client")}),a.jsxs(We,{value:te.client_user_id,onValueChange:U=>O(le=>({...le,client_user_id:U})),children:[a.jsx(Fe,{children:a.jsx(Ve,{placeholder:n("leads.selectClient")})}),a.jsx($e,{children:i.filter(U=>U.auth_user_id).map(U=>a.jsx(oe,{value:U.auth_user_id,children:H(U,"user_name")},U.user_id))})]})]}),((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="manager")&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.assignToEmployee")}),a.jsxs(We,{value:te.assigned_to,onValueChange:U=>O(le=>({...le,assigned_to:U})),children:[a.jsx(Fe,{children:a.jsx(Ve,{placeholder:n("leads.selectAssignee","Select assignee")})}),a.jsxs($e,{children:[a.jsx(oe,{value:"unassigned",children:n("common.all","Unassigned")}),c.filter(U=>["employee","admin","manager","team_leader"].includes(U.user_role)&&U.auth_user_id).map(U=>a.jsx(oe,{value:U.auth_user_id,children:H(U,"user_name")},U.user_id))]})]})]})]}),a.jsxs(ar,{children:[a.jsx(q,{variant:"outline",onClick:()=>k(!1),children:n("buttons.cancel")}),a.jsxs(q,{onClick:Ke,disabled:!((qn=te.lead_name)!=null&&qn.trim()),children:[a.jsx(cs,{className:"h-4 w-4 mr-2"}),n("leads.createLead")]})]})]})})]}),a.jsxs(xe,{className:"max-h-[calc(100vh-300px)] flex flex-col",children:[a.jsx(Ie,{className:"flex-shrink-0",children:a.jsx(qe,{children:n("leads.title")})}),a.jsx(_e,{className:"flex-1 overflow-y-auto",children:a.jsxs(Wh,{children:[a.jsx(Vh,{children:a.jsxs(ns,{children:[a.jsx(wt,{children:n("leads.leadName")}),a.jsx(wt,{children:n("leads.client")}),a.jsx(wt,{children:n("leads.createdBy")}),a.jsx(wt,{children:n("leads.assignedTo")}),a.jsx(wt,{children:n("common.created")}),a.jsx(wt,{children:n("tasks.stage")}),a.jsx(wt,{className:"w-[100px]",children:n("common.actions")})]})}),a.jsx(Hh,{children:s.length===0?a.jsx(ns,{children:a.jsx(ut,{colSpan:7,className:"text-center py-12",children:a.jsx("div",{className:"text-muted-foreground",children:n("leads.noLeadsYet")})})}):s.map(U=>{const le=i.find(Ue=>Ue.auth_user_id===U.client_user_id),Se=c.find(Ue=>Ue.auth_user_id===U.created_by),Ze=c.find(Ue=>Ue.auth_user_id===U.assigned_to),Bt=d.find(Ue=>Ue.stage_id===U.stage);return a.jsxs(ns,{className:"cursor-pointer hover:bg-muted/50",children:[a.jsx(ut,{children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:H(U,"lead_name")}),H(U,"lead_description")&&a.jsx("div",{className:"text-sm text-muted-foreground truncate max-w-xs",children:H(U,"lead_description")})]})}),a.jsx(ut,{children:le?H(le,"user_name"):n("leads.unknown")}),a.jsx(ut,{children:Se?H(Se,"user_name"):n("leads.unknown")}),a.jsx(ut,{children:(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="manager"?a.jsxs(We,{value:U.assigned_to||"unassigned",onValueChange:Ue=>fe(U.lead_id,Ue==="unassigned"?"":Ue),children:[a.jsx(Fe,{className:"w-full h-8",children:a.jsx(Ve,{placeholder:n("leads.selectAssignee","Select assignee")})}),a.jsxs($e,{children:[a.jsx(oe,{value:"unassigned",children:n("common.all","Unassigned")}),c.filter(Ue=>["employee","admin","manager","team_leader"].includes(Ue.user_role)&&Ue.auth_user_id).map(Ue=>a.jsx(oe,{value:Ue.auth_user_id,children:H(Ue,"user_name")},Ue.user_id))]})]}):Ze?H(Ze,"user_name"):n("common.all","Unassigned")}),a.jsx(ut,{children:U.created_date?new Date(U.created_date).toLocaleDateString():n("leads.notSet")}),a.jsx(ut,{children:Bt?H(Bt,"stage_name"):n("leads.unknown")}),a.jsx(ut,{children:a.jsx(q,{variant:"ghost",size:"sm",children:n("common.view")})})]},U.lead_id)})})]})})]})]}),a.jsx($h,{open:!!B,onOpenChange:()=>Q(null),children:a.jsxs(zc,{className:"w-full sm:max-w-[540px] overflow-y-auto",children:[a.jsxs(Zv,{children:[a.jsx(Uh,{children:n("leads.leadDetails")}),a.jsx(Bh,{children:n("leads.leadDetailsDesc")})]}),a.jsx("div",{className:"mt-6",children:B&&a.jsx(vz,{leadId:B})})]})})]})}function yx({title:t="Something went wrong",message:e,onRetry:r,className:n=""}){return a.jsxs("div",{className:`flex flex-col items-center justify-center py-12 ${n}`,children:[a.jsx("div",{className:"h-20 w-20 rounded-full bg-destructive/10 flex items-center justify-center mb-6 ring-4 ring-destructive/5",children:a.jsx(wv,{className:"h-10 w-10 text-destructive"})}),a.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:t}),a.jsx("p",{className:"text-sm text-muted-foreground text-center max-w-md mb-6",children:e}),r&&a.jsxs(q,{onClick:r,variant:"outline",className:"gap-2",children:[a.jsx(IL,{className:"h-4 w-4"}),"Try Again"]})]})}function _z({task:t,assignedUser:e,stages:r=[],onDelete:n,onClick:s,onDragStart:o,onStageChange:i,isDragging:l=!1}){var g,w;const{t:c}=Xe(),u=xo(),d=y=>y?new Date(y).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Not set",h=y=>{switch(y){case"done":return a.jsx(uc,{className:"h-3 w-3 text-green-500"});case"in_progress":return a.jsx(Qs,{className:"h-3 w-3 text-blue-500"});case"todo":default:return a.jsx(wv,{className:"h-3 w-3 text-gray-500"})}},m=y=>{switch(y){case"done":return"border-l-green-500 rtl:border-r-green-500";case"in_progress":return"border-l-blue-500 rtl:border-r-blue-500";case"todo":default:return"border-l-gray-500 rtl:border-r-gray-500"}},p=y=>{if(!y)return null;const x=new Date,b=(new Date(y).getTime()-x.getTime())/(1e3*60*60);return b<0?"overdue":b<24?"urgent":b<72?"soon":null},v=y=>{switch(p(y)){case"overdue":return"border-destructive ring-1 ring-destructive";case"urgent":return"border-orange-500 ring-1 ring-orange-500";case"soon":return"border-yellow-500";default:return""}};return a.jsxs(xe,{className:Z("group relative hover:shadow-lg transition-all duration-200","border-l-4 rtl:border-l-0 rtl:border-r-4",u?"w-full":"w-[280px] h-[180px]",m(t.task_status),v(t.due_date),l&&"opacity-50 rotate-2 scale-105"),draggable:!!o,onDragStart:y=>{o&&(y.dataTransfer.effectAllowed="move",y.dataTransfer.setData("text/plain",t.task_id.toString()),o(t.task_id))},children:[a.jsx(Ie,{className:"pb-3 px-4 pt-4 cursor-pointer",onClick:s,children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-base mb-1 truncate group-hover:text-primary transition-colors",children:t.task_name}),t.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:t.description})]}),n&&a.jsxs(ka,{children:[a.jsx(Kc,{asChild:!0,onClick:y=>y.stopPropagation(),children:a.jsx(q,{variant:"ghost",size:"sm",className:Z("h-8 w-8 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10",u?"opacity-100":"opacity-0 group-hover:opacity-100 transition-opacity"),children:a.jsx(wr,{className:"h-4 w-4"})})}),a.jsxs(vs,{onClick:y=>y.stopPropagation(),children:[a.jsxs(xs,{children:[a.jsx(ws,{children:"Delete Task"}),a.jsxs(_s,{children:['Are you sure you want to delete "',t.task_name,'"?']})]}),a.jsxs(ys,{children:[a.jsx(js,{children:"Cancel"}),a.jsx(bs,{onClick:y=>{y.stopPropagation(),n(t.task_id)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})]})}),a.jsxs(_e,{className:"px-4 pb-3 space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("div",{className:"space-y-1.5 flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(us,{className:"h-3 w-3 text-muted-foreground flex-shrink-0"}),a.jsx("p",{className:"text-xs font-medium truncate",children:e?H(e,"user_name"):c("common.all","Unassigned")})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex items-center gap-1",children:[h(t.task_status),a.jsx("span",{className:"text-xs font-medium capitalize",children:((g=t.task_status)==null?void 0:g.replace("_"," "))||"Todo"})]})})]}),u&&i&&a.jsx("div",{className:"pt-1",children:a.jsxs(We,{value:((w=t.stage_id)==null?void 0:w.toString())||"",onValueChange:y=>i(t.task_id,parseInt(y)),children:[a.jsx(Fe,{className:"h-7 text-xs",children:a.jsx(Ve,{placeholder:c("tasks.selectStage","Select stage")})}),a.jsx($e,{children:r.map(y=>a.jsx(oe,{value:y.stage_id.toString(),children:H(y,"stage_name")},y.stage_id))})]})}),t.due_date&&a.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-muted-foreground pt-1 border-t",children:[a.jsx(ls,{className:"h-3 w-3 flex-shrink-0"}),a.jsxs("span",{children:["Due: ",d(t.due_date)]})]})]})]})}function bz(){var Ee;Zr();const{hasRole:t,user:e,loading:r}=yt(),{t:n}=Xe(),s=xo(),[o,i]=f.useState(null),[l,c]=f.useState("kanban");f.useState(!1);const u=F=>{switch(F==null?void 0:F.toLowerCase()){case"done":case"completed":return"default";case"in_progress":return"secondary";case"pending":case"todo":return"outline";default:return"secondary"}};f.useState(""),f.useState(null),f.useState(""),f.useState(null);const[d,h]=f.useState(null),[m,p]=f.useState(!1),[v,g]=f.useState({task_name:"",description:"",assigned_to:"",task_status:"todo",due_date:"",stage_id:""}),[w,y]=f.useState(""),[x,_]=f.useState("all"),[b,j]=f.useState("all"),[N,k]=f.useState({from:void 0,to:void 0}),{data:E=[],isLoading:T,error:P}=lU(),{data:z=[],isLoading:B,error:Q}=oU(),{data:R=[],isLoading:Y,error:M}=cU(),D=f.useMemo(()=>E.filter(F=>{const se=F.task_name.toLowerCase().includes(w.toLowerCase())||F.description&&F.description.toLowerCase().includes(w.toLowerCase()),V=x==="all"||F.task_status===x,fe=b==="all"||F.assigned_to&&F.assigned_to.toString()===b;let Re=!0;if(N.from&&F.due_date){const Ke=new Date(F.due_date),et=new Date(N.from);et.setHours(0,0,0,0);const mt=new Date(Ke);if(mt.setHours(0,0,0,0),Re=mt>=et,Re&&N.to){const Ut=new Date(N.to);Ut.setHours(23,59,59,999),Re=mt<=Ut}}else N.from&&!F.due_date&&(Re=!1);return se&&V&&fe&&Re}),[E,w,x,b,N]),C=R.filter(F=>F.stage_type==="tasks").sort((F,se)=>{const V=F.stager_order_index??0,fe=se.stager_order_index??0;return gn()?fe-V:V-fe}).map(F=>({id:F.stage_id,name:H(F,"stage_name"),color:F.color,count:D.filter(se=>se.stage_id===F.stage_id).length})),L=T||B||Y||r,I=(P==null?void 0:P.message)||(Q==null?void 0:Q.message)||(M==null?void 0:M.message)||null;console.log("[Tasks] Rendering. Auth state:",{user:e?{id:e.id,email:e.email,role:e.role}:null,authLoading:r,hasUser:!!e,loading:L,data:{tasks:E.length,users:z.length,stages:R.length}});const W=()=>{},K=async F=>{try{await Js.delete(F),W()}catch(se){console.error("Failed to delete task:",se)}},te=F=>{h(F)},O=F=>{F.preventDefault(),F.dataTransfer.dropEffect="move"},re=async F=>{if(!d)return;const se=E.find(V=>V.task_id===d);if(se&&se.stage_id!==F)try{await Js.update(d,{stage_id:F}),W()}catch(V){console.error("Failed to update task stage:",V)}h(null)},de=async(F,se)=>{const V=E.find(fe=>fe.task_id===F);if(V&&V.stage_id!==se)try{await Js.update(F,{stage_id:se}),W()}catch(fe){console.error("Failed to update task stage:",fe)}},ae=async()=>{if(v.task_name.trim())try{const F=wn({task_name:v.task_name.trim(),stage_id:v.stage_id?parseInt(v.stage_id):null,assigned_to:v.assigned_to?parseInt(v.assigned_to):null,task_status:v.task_status,due_date:v.due_date?new Date(v.due_date).toISOString():null,description:v.description.trim()||null,auth_user_id:(e==null?void 0:e.id)||null},{task_name:"task_name",description:"description"});await Js.create(F),W(),g({task_name:"",description:"",assigned_to:"",task_status:"todo",due_date:"",stage_id:""}),p(!1)}catch(F){console.error("Failed to create task:",F)}},ye=!0;return f.useEffect(()=>{if(R.length>0&&o===null){const F=R.find(se=>se.stage_id===5);F&&i(F.stage_id)}},[R,o,gn]),L||r||!e?a.jsx(Jh,{message:n("tasks.loading","Loading tasks...")}):I?a.jsx(yx,{message:I}):a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsx(Qh,{title:n("tasks.title"),description:n("tasks.description","Manage and track all your tasks"),icon:a.jsx($d,{className:"h-5 w-5 text-primary"}),breadcrumbs:[{label:n("navigation.dashboard"),href:"/dashboard"},{label:n("navigation.tasks")}],actions:a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-muted p-1 rounded-lg flex items-center gap-1",children:[a.jsx(q,{variant:l==="kanban"?"default":"ghost",size:"sm",onClick:()=>c("kanban"),className:"h-8 w-8 p-0",children:a.jsx(bv,{className:"h-4 w-4"})}),a.jsx(q,{variant:l==="list"?"default":"ghost",size:"sm",onClick:()=>c("list"),className:"h-8 w-8 p-0",children:a.jsx(jv,{className:"h-4 w-4"})})]}),a.jsxs(q,{onClick:()=>p(!0),children:[a.jsx(xt,{className:"mr-2 h-4 w-4"})," ",n("tasks.addNewTask")]})]}),stats:[{label:n("tasks.total","Total Tasks"),value:E.length,icon:a.jsx($d,{className:"h-4 w-4 text-primary"})},{label:n("tasks.todo","To Do"),value:E.filter(F=>F.task_status==="todo").length,icon:a.jsx(wv,{className:"h-4 w-4 text-gray-500"})},{label:n("tasks.inProgress","In Progress"),value:E.filter(F=>F.task_status==="in_progress").length,icon:a.jsx(Qs,{className:"h-4 w-4 text-blue-500"})},{label:n("tasks.done","Done"),value:E.filter(F=>F.task_status==="done").length,icon:a.jsx(uc,{className:"h-4 w-4 text-green-500"})}]}),a.jsx(gx,{onSearch:y,onFilterStatus:_,onFilterAssignee:j,onFilterDateRange:k,users:z,statuses:[{value:"todo",label:n("tasks.todo")},{value:"in_progress",label:n("tasks.inProgress")},{value:"done",label:n("tasks.done")}]}),l==="kanban"?a.jsxs(vx,{stages:C,currentStageId:o||((Ee=C[0])==null?void 0:Ee.id),onStageChange:i,children:[a.jsx(Ot,{open:m,onOpenChange:p,children:a.jsxs(Nt,{className:"w-[95vw] sm:w-full sm:max-w-[500px] max-h-[85vh] overflow-y-auto",children:[a.jsxs(kt,{children:[a.jsx(Ct,{children:n("tasks.createTask")}),a.jsx(or,{children:n("tasks.createTaskDesc")})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-sm font-medium",children:[n("tasks.taskName")," *"]}),a.jsx(je,{value:v.task_name,onChange:F=>g(se=>({...se,task_name:F.target.value})),placeholder:n("tasks.taskNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.description")}),a.jsx(Or,{value:v.description,onChange:F=>g(se=>({...se,description:F.target.value})),placeholder:n("tasks.descriptionPlaceholder"),rows:3})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.selectUser")}),a.jsxs(We,{value:v.assigned_to,onValueChange:F=>g(se=>({...se,assigned_to:F})),children:[a.jsx(Fe,{children:a.jsx(Ve,{placeholder:n("tasks.selectUser")})}),a.jsx($e,{children:z.map(F=>a.jsx(oe,{value:F.user_id.toString(),children:H(F,"user_name")},F.user_id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.selectStage")}),a.jsxs(We,{value:v.stage_id,onValueChange:F=>g(se=>({...se,stage_id:F})),children:[a.jsx(Fe,{children:a.jsx(Ve,{placeholder:n("tasks.selectStage")})}),a.jsx($e,{children:R.filter(F=>["New","In Progress","Overdue","Completed"].includes(F.stage_name)).map(F=>a.jsx(oe,{value:F.stage_id.toString(),children:H(F,"stage_name")},F.stage_id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.selectStatus")}),a.jsxs(We,{value:v.task_status,onValueChange:F=>g(se=>({...se,task_status:F})),children:[a.jsx(Fe,{children:a.jsx(Ve,{placeholder:n("tasks.selectStatus")})}),a.jsxs($e,{children:[a.jsx(oe,{value:"todo",children:n("tasks.todo")}),a.jsx(oe,{value:"in_progress",children:n("tasks.inProgress")}),a.jsx(oe,{value:"done",children:n("tasks.done")})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.dueDate")}),a.jsx(je,{type:"date",value:v.due_date,onChange:F=>g(se=>({...se,due_date:F.target.value}))})]})]}),a.jsxs(ar,{children:[a.jsx(q,{variant:"outline",onClick:()=>p(!1),children:n("buttons.cancel")}),a.jsxs(q,{onClick:ae,disabled:!v.task_name.trim(),children:[a.jsx(cs,{className:"h-4 w-4 mr-2"}),n("tasks.createTask")]})]})]})}),a.jsx("div",{className:"flex gap-6 pb-6 overflow-x-auto scrollbar-hide max-w-full pl-6 rtl:pr-6 rtl:pl-0",children:R.filter(F=>F.stage_type==="tasks").sort((F,se)=>{const V=F.stager_order_index??0,fe=se.stager_order_index??0;return gn()?fe-V:V-fe}).filter(F=>{var se;return s?F.stage_id===(o||((se=C[0])==null?void 0:se.id)):!0}).map((F,se)=>{var fe,Re;const V=D.filter(Ke=>Ke.stage_id===F.stage_id);return a.jsxs("div",{className:Z("flex-shrink-0 animate-fade-in",s?"w-full":"w-[300px]"),style:{animationDelay:`${se*.1}s`},onDragOver:O,onDrop:()=>re(F.stage_id),children:[a.jsx("div",{className:Z("rounded-xl bg-muted/30 backdrop-blur p-2 mb-5 shadow-soft hidden md:block",F.color||"border-l-4 border-primary/50"),children:a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_v,{className:"h-4 w-4 text-muted-foreground cursor-move"}),a.jsx("h2",{className:"font-bold text-base",children:H(F,"stage_name")})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"text-sm font-bold px-3 py-1 rounded-full bg-background shadow-sm",children:V.length})})]})}),a.jsxs("div",{className:"space-y-4 max-h-[calc(100vh-300px)] overflow-y-auto pr-2 custom-scrollbar",children:[((fe=R.sort((Ke,et)=>(Ke.stager_order_index||0)-(et.stager_order_index||0))[0])==null?void 0:fe.stage_id)===F.stage_id&&a.jsx("div",{className:"mb-4",children:a.jsx(xe,{className:Z("group relative hover:shadow-lg transition-all duration-200 cursor-pointer","border-l-4 border-l-gray-300 rtl:border-l-0 rtl:border-r-4 rtl:border-r-gray-300","flex items-center justify-center bg-muted/20",s?"w-full h-[100px]":"w-[280px] h-[120px]"),onClick:()=>p(!0),children:a.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[a.jsx(xt,{className:"h-8 w-8"}),a.jsx("span",{className:"text-sm font-medium",children:n("tasks.addNewTask")})]})})}),V.map(Ke=>{const et=z.find(mt=>mt.user_id===Ke.assigned_to);return a.jsx("div",{draggable:ye,onDragStart:()=>te(Ke.task_id),className:"cursor-move",children:a.jsx(_z,{task:Ke,assignedUser:et||null,stages:R,onDelete:()=>K(Ke.task_id),onClick:()=>{console.log("Task clicked:",Ke.task_id)},onDragStart:te,onStageChange:de,isDragging:d===Ke.task_id})},Ke.task_id)}),((Re=R.sort((Ke,et)=>(Ke.stager_order_index||0)-(et.stager_order_index||0))[0])==null?void 0:Re.stage_id)!==F.stage_id&&a.jsx("div",{className:"mt-2",children:a.jsxs(q,{variant:"outline",size:"sm",className:"w-full h-12 border-dashed text-muted-foreground hover:text-foreground",onClick:()=>p(!0),children:[a.jsx(xt,{className:"h-4 w-4 mr-2"}),n("tasks.addTask")]})})]})]},F.stage_id)})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-lg font-semibold",children:[n("tasks.allTasks")," (",E.length,")"]}),a.jsx(Ot,{open:m,onOpenChange:p,children:a.jsxs(Nt,{className:"w-[95vw] sm:w-full sm:max-w-[500px] max-h-[85vh] overflow-y-auto",children:[a.jsxs(kt,{children:[a.jsx(Ct,{children:n("tasks.createTask")}),a.jsx(or,{children:n("tasks.createTaskDesc")})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-sm font-medium",children:[n("tasks.taskName")," *"]}),a.jsx(je,{value:v.task_name,onChange:F=>g(se=>({...se,task_name:F.target.value})),placeholder:n("tasks.taskNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.description")}),a.jsx(Or,{value:v.description,onChange:F=>g(se=>({...se,description:F.target.value})),placeholder:n("tasks.descriptionPlaceholder"),rows:3})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.selectUser")}),a.jsxs(We,{value:v.assigned_to,onValueChange:F=>g(se=>({...se,assigned_to:F})),children:[a.jsx(Fe,{children:a.jsx(Ve,{placeholder:n("tasks.selectUser")})}),a.jsx($e,{children:z.map(F=>a.jsx(oe,{value:F.user_id.toString(),children:H(F,"user_name")},F.user_id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.selectStage")}),a.jsxs(We,{value:v.stage_id,onValueChange:F=>g(se=>({...se,stage_id:F})),children:[a.jsx(Fe,{children:a.jsx(Ve,{placeholder:n("tasks.selectStage")})}),a.jsx($e,{children:R.map(F=>a.jsx(oe,{value:F.stage_id.toString(),children:H(F,"stage_name")},F.stage_id))})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.selectStatus")}),a.jsxs(We,{value:v.task_status,onValueChange:F=>g(se=>({...se,task_status:F})),children:[a.jsx(Fe,{children:a.jsx(Ve,{placeholder:n("tasks.selectStatus")})}),a.jsxs($e,{children:[a.jsx(oe,{value:"todo",children:n("tasks.todo")}),a.jsx(oe,{value:"in_progress",children:n("tasks.inProgress")}),a.jsx(oe,{value:"done",children:n("tasks.done")})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.dueDate")}),a.jsx(je,{type:"date",value:v.due_date,onChange:F=>g(se=>({...se,due_date:F.target.value}))})]})]})]}),a.jsxs(ar,{children:[a.jsx(q,{variant:"outline",onClick:()=>p(!1),children:n("buttons.cancel")}),a.jsxs(q,{onClick:ae,disabled:!v.task_name.trim(),children:[a.jsx(cs,{className:"h-4 w-4 mr-2"}),n("tasks.createTask")]})]})]})})]}),a.jsx(xe,{className:"max-h-[calc(100vh-300px)] flex flex-col",children:a.jsx(_e,{className:"p-0 flex-1 overflow-y-auto",children:a.jsxs(Wh,{children:[a.jsx(Vh,{children:a.jsxs(ns,{children:[a.jsx(wt,{children:n("tasks.taskName")}),a.jsx(wt,{children:n("tasks.assignedTo")}),a.jsx(wt,{children:n("tasks.status")}),a.jsx(wt,{children:n("tasks.dueDate")}),a.jsx(wt,{children:n("tasks.stage")}),a.jsx(wt,{className:"w-[100px]",children:n("common.actions")})]})}),a.jsx(Hh,{children:E.length===0?a.jsx(ns,{children:a.jsx(ut,{colSpan:6,className:"text-center py-12",children:a.jsx("div",{className:"text-muted-foreground",children:n("tasks.noTasksYet")})})}):E.map(F=>{const se=z.find(fe=>fe.user_id===F.assigned_to),V=R.find(fe=>fe.stage_id===F.stage_id);return a.jsxs(ns,{className:"cursor-pointer hover:bg-muted/50",children:[a.jsx(ut,{children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:F.task_name}),F.description&&a.jsx("div",{className:"text-sm text-muted-foreground truncate max-w-xs",children:F.description})]})}),a.jsx(ut,{children:se?H(se,"user_name"):n("common.all","Unassigned")}),a.jsx(ut,{children:a.jsx(Me,{variant:u(F.task_status),children:F.task_status||n("leads.unknown")})}),a.jsx(ut,{children:F.due_date?new Date(F.due_date).toLocaleDateString():n("leads.notSet")}),a.jsx(ut,{children:V?H(V,"stage_name"):n("leads.unknown")}),a.jsx(ut,{children:a.jsx(q,{variant:"ghost",size:"sm",children:n("common.view")})})]},F.task_id)})})]})})})]})]})}function NE({icon:t,title:e,description:r,action:n,className:s=""}){return a.jsxs("div",{className:`flex flex-col items-center justify-center py-12 px-4 ${s}`,children:[t&&a.jsx("div",{className:"h-24 w-24 rounded-full bg-muted/50 flex items-center justify-center mb-6 ring-4 ring-muted/20",children:t}),a.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2 text-center",children:e}),a.jsx("p",{className:"text-sm text-muted-foreground text-center max-w-md mb-6",children:r}),n]})}function jz(){const[t,e]=f.useState([]),[r,n]=f.useState([]),[s,o]=f.useState(!0),[i,l]=f.useState(null),[c,u]=f.useState(""),[d,h]=f.useState("all"),[m,p]=f.useState("all"),[v,g]=f.useState("all"),[w,y]=f.useState(!1),[x,_]=f.useState(null),[b,j]=f.useState(!1),[N,k]=f.useState({subject:"",description:"",priority:"medium",ticket_type:"request",assigned_to:""}),[E,T]=f.useState(""),[P,z]=f.useState(!1),{user:B,loading:Q}=yt(),{t:R}=Xe();f.useEffect(()=>{B&&!Q&&Y()},[B,Q]);const Y=async()=>{try{o(!0),l(null);const[O,re]=await Promise.all([rm.getAll().catch(de=>(console.error("[Tickets] Error fetching tickets:",de),[])),qt.getAll().catch(de=>(console.error("[Tickets] Error fetching users:",de),[]))]);e(O),n(re)}catch(O){console.error("[Tickets] Failed to load data:",O),l(O.message||R("common.error"))}finally{o(!1)}},M=O=>{if(!O)return R("leads.unknown");const re=r.find(de=>de.user_id===O);return re?H(re,"user_name"):R("leads.unknown")},D=O=>{switch(O==null?void 0:O.toLowerCase()){case"open":return"destructive";case"in_progress":return"default";case"resolved":return"secondary";case"closed":return"outline";default:return"secondary"}},C=O=>{switch(O==null?void 0:O.toLowerCase()){case"urgent":return"destructive";case"high":return"default";case"medium":return"secondary";case"low":return"outline";default:return"secondary"}},L=async O=>{var re;if(O.preventDefault(),!(P||!B)){T(""),z(!0);try{const de={subject:N.subject,description:N.description||null,priority:N.priority,ticket_type:N.ticket_type,status:"open",created_by:((re=B.profile)==null?void 0:re.user_id)||null,assigned_to:N.assigned_to?parseInt(N.assigned_to):null,auth_user_id:B.id,resolved_date:null,closed_at:null,closed_by:null,room_id:null,task_id:null};await rm.create(de),k({subject:"",description:"",priority:"medium",ticket_type:"request",assigned_to:""}),y(!1),Y()}catch(de){T(de.message||R("tickets.createError"))}finally{z(!1)}}},I=O=>{_(O),j(!0)},W=async O=>{if(confirm(R("tickets.deleteConfirmation",{name:"this ticket"})))try{await rm.delete(O),Y()}catch(re){alert(`${R("tickets.deleteError")}: ${re.message}`)}},K=t.filter(O=>{var Ee,F;const re=((Ee=O.subject)==null?void 0:Ee.toLowerCase().includes(c.toLowerCase()))||((F=O.description)==null?void 0:F.toLowerCase().includes(c.toLowerCase()))||M(O.assigned_to).toLowerCase().includes(c.toLowerCase()),de=d==="all"||O.status===d,ae=m==="all"||O.priority===m,ye=v==="all"||O.ticket_type===v;return re&&de&&ae&&ye}),te=()=>{if(s||Q||!B)return a.jsx(Jh,{message:R("tickets.loading","Loading tickets...")});if(i)return a.jsx(yx,{title:R("tickets.errorTitle","Error loading tickets"),message:i,onRetry:Y});if(K.length===0){const O=c||d!=="all"||v!=="all"||m!=="all";return a.jsx(NE,{icon:a.jsx(Gu,{className:"h-12 w-12 text-muted-foreground/50"}),title:R("tickets.noTicketsFound","No tickets found"),description:O?R("tickets.noTicketsFoundDesc","Try adjusting your filters"):R("tickets.noTicketsYet","Create your first ticket to get started"),action:O?void 0:a.jsxs(q,{onClick:()=>y(!0),children:[a.jsx(xt,{className:"h-4 w-4 mr-2"}),R("tickets.newTicket","New Ticket")]})})}return a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:K.map(O=>a.jsxs(xe,{className:"cursor-pointer hover:shadow-lg transition-all duration-200",onClick:()=>I(O),children:[a.jsx(Ie,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-base truncate",children:O.subject}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["#",O.ticket_id]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Me,{variant:D(O.status),className:"shrink-0",children:O.status||R("leads.unknown")}),(B==null?void 0:B.role)==="admin"&&a.jsx(q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:re=>{re.stopPropagation(),W(O.ticket_id)},children:a.jsx(wr,{className:"h-4 w-4"})})]})]})}),a.jsxs(_e,{className:"pt-0",children:[O.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:O.description}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("span",{className:"font-medium",children:[R("tickets.priority"),":"]}),a.jsx(Me,{variant:C(O.priority),className:"text-xs",children:O.priority||R("leads.unknown")})]})}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{children:M(O.assigned_to)}),a.jsx("div",{children:O.created_date?new Date(O.created_date).toLocaleDateString():"N/A"})]})]})]})]},O.ticket_id))})};return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsx(Qh,{title:R("tickets.title"),description:R("tickets.description","Manage and track support tickets"),icon:a.jsx(Gu,{className:"h-5 w-5 text-primary"}),breadcrumbs:[{label:R("navigation.dashboard"),href:"/dashboard"},{label:R("navigation.tickets")}],actions:a.jsxs(q,{onClick:()=>y(!0),children:[a.jsx(xt,{className:"h-4 w-4 mr-2"}),R("tickets.newTicket")]}),stats:[{label:R("tickets.total","Total Tickets"),value:t.length,icon:a.jsx(Gu,{className:"h-4 w-4 text-primary"})},{label:R("tickets.statusOpen","Open"),value:t.filter(O=>O.status==="open").length,icon:a.jsx(u1,{className:"h-4 w-4 text-red-500"})},{label:R("tickets.statusInProgress","In Progress"),value:t.filter(O=>O.status==="in_progress").length,icon:a.jsx(Qs,{className:"h-4 w-4 text-blue-500"})},{label:R("tickets.statusResolved","Resolved"),value:t.filter(O=>O.status==="resolved"||O.status==="closed").length,icon:a.jsx(bL,{className:"h-4 w-4 text-green-500"})}]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 pb-2",children:[a.jsxs("div",{className:"relative flex-1 max-w-sm",children:[a.jsx(ba,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(je,{placeholder:R("tickets.searchPlaceholder","Search tickets..."),value:c,onChange:O=>u(O.target.value),className:"pl-10 h-9"})]}),a.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto flex-wrap",children:[a.jsxs(We,{value:d,onValueChange:h,children:[a.jsx(Fe,{className:"w-[130px] h-9",children:a.jsx(Ve,{})}),a.jsxs($e,{children:[a.jsx(oe,{value:"all",children:R("tickets.allStatuses","All Statuses")}),a.jsx(oe,{value:"open",children:R("tickets.statusOpen","Open")}),a.jsx(oe,{value:"in_progress",children:R("tickets.statusInProgress","In Progress")}),a.jsx(oe,{value:"resolved",children:R("tickets.statusResolved","Resolved")}),a.jsx(oe,{value:"closed",children:R("tickets.statusClosed","Closed")})]})]}),a.jsxs(We,{value:v,onValueChange:g,children:[a.jsx(Fe,{className:"w-[130px] h-9",children:a.jsx(Ve,{})}),a.jsxs($e,{children:[a.jsx(oe,{value:"all",children:R("tickets.allTypes","All Types")}),a.jsx(oe,{value:"issue",children:R("tickets.typeIssue","Issue")}),a.jsx(oe,{value:"request",children:R("tickets.typeRequest","Request")}),a.jsx(oe,{value:"follow_up",children:R("tickets.typeFollowUp","Follow Up")}),a.jsx(oe,{value:"internal_task",children:R("tickets.typeInternalTask","Internal Task")})]})]}),a.jsxs(We,{value:m,onValueChange:p,children:[a.jsx(Fe,{className:"w-[130px] h-9",children:a.jsx(Ve,{})}),a.jsxs($e,{children:[a.jsx(oe,{value:"all",children:R("tickets.allPriorities","All Priorities")}),a.jsx(oe,{value:"low",children:R("tickets.priorityLow","Low")}),a.jsx(oe,{value:"medium",children:R("tickets.priorityMedium","Medium")}),a.jsx(oe,{value:"high",children:R("tickets.priorityHigh","High")}),a.jsx(oe,{value:"urgent",children:R("tickets.priorityUrgent","Urgent")})]})]})]})]}),a.jsx("div",{className:"flex-1 overflow-auto",children:te()}),a.jsx(Ot,{open:w,onOpenChange:y,children:a.jsxs(Nt,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[a.jsxs(kt,{children:[a.jsx(Ct,{children:R("tickets.createNewTicket")}),a.jsx(or,{children:R("tickets.createTicketDesc")})]}),a.jsxs("form",{onSubmit:L,className:"space-y-4",children:[E&&a.jsx(Ti,{variant:"destructive",children:a.jsx(Ri,{children:E})}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(he,{htmlFor:"subject",children:[R("tickets.subject")," *"]}),a.jsx(je,{id:"subject",value:N.subject,onChange:O=>k(re=>({...re,subject:O.target.value})),placeholder:R("tickets.subjectPlaceholder"),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"description",children:R("tickets.description")}),a.jsx(Or,{id:"description",value:N.description,onChange:O=>k(re=>({...re,description:O.target.value})),placeholder:R("tickets.descriptionPlaceholder"),rows:3})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(he,{htmlFor:"priority",children:[R("tickets.priority")," *"]}),a.jsxs(We,{value:N.priority,onValueChange:O=>k(re=>({...re,priority:O})),children:[a.jsx(Fe,{children:a.jsx(Ve,{})}),a.jsxs($e,{children:[a.jsx(oe,{value:"low",children:R("tickets.priorityLow")}),a.jsx(oe,{value:"medium",children:R("tickets.priorityMedium")}),a.jsx(oe,{value:"high",children:R("tickets.priorityHigh")}),a.jsx(oe,{value:"urgent",children:R("tickets.priorityUrgent")})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(he,{htmlFor:"ticket_type",children:[R("tickets.ticketType")," *"]}),a.jsxs(We,{value:N.ticket_type,onValueChange:O=>k(re=>({...re,ticket_type:O})),children:[a.jsx(Fe,{children:a.jsx(Ve,{})}),a.jsxs($e,{children:[a.jsx(oe,{value:"request",children:R("tickets.typeRequest")}),a.jsx(oe,{value:"follow_up",children:R("tickets.typeFollowUp")}),a.jsx(oe,{value:"issue",children:R("tickets.typeIssue")}),a.jsx(oe,{value:"internal_task",children:R("tickets.typeInternalTask")})]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"assigned_to",children:R("tickets.assignTo")}),a.jsxs(We,{value:N.assigned_to,onValueChange:O=>k(re=>({...re,assigned_to:O})),children:[a.jsx(Fe,{children:a.jsx(Ve,{placeholder:R("tickets.selectAssignee")})}),a.jsx($e,{children:r.map(O=>a.jsx(oe,{value:O.user_id.toString(),children:H(O,"user_name")},O.user_id))})]})]}),a.jsxs(ar,{className:"flex flex-col-reverse sm:flex-row gap-2",children:[a.jsx(q,{type:"button",variant:"outline",onClick:()=>y(!1),className:"w-full sm:w-auto",children:R("buttons.cancel")}),a.jsx(q,{type:"submit",disabled:P||!N.subject.trim(),className:"w-full sm:w-auto",children:R(P?"tickets.creatingTicket":"tickets.createTicket")})]})]})]})}),a.jsx(Ot,{open:b,onOpenChange:j,children:a.jsxs(Nt,{className:"w-[95vw] max-w-[700px] max-h-[90vh] overflow-y-auto p-4 sm:p-6",children:[a.jsxs(kt,{className:"space-y-3",children:[a.jsx(Ct,{className:"text-lg sm:text-xl leading-tight",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[a.jsx("span",{className:"break-words",children:x==null?void 0:x.subject}),a.jsx(Me,{variant:D(x==null?void 0:x.status),className:"self-start sm:self-center shrink-0",children:(x==null?void 0:x.status)||R("leads.unknown")})]})}),a.jsxs(or,{className:"text-sm",children:[R("tickets.ticketId"),": #",x==null?void 0:x.ticket_id]})]}),x&&a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium",children:R("tickets.priority")}),a.jsx("div",{className:"mt-1",children:a.jsx(Me,{variant:C(x.priority),className:"text-xs",children:x.priority||R("leads.unknown")})})]}),a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium",children:R("tickets.ticketType")}),a.jsx("div",{className:"mt-1",children:a.jsx(Me,{variant:"outline",className:"text-xs",children:x.ticket_type||R("leads.unknown")})})]})]}),a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium",children:R("tickets.assignedTo")}),a.jsx("div",{className:"mt-1 text-sm break-words",children:M(x.assigned_to)})]}),a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium",children:R("tickets.createdDate")}),a.jsx("div",{className:"mt-1 text-sm",children:x.created_date?new Date(x.created_date).toLocaleString():"N/A"})]})]}),x.description&&a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium",children:R("tickets.description")}),a.jsx("div",{className:"mt-2 p-3 bg-muted rounded-md text-sm whitespace-pre-wrap break-words",children:x.description})]}),a.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium",children:R("tickets.createdBy")}),a.jsx("div",{className:"mt-1 text-sm break-words",children:M(x.created_by)})]}),x.resolved_date&&a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium",children:R("tickets.resolvedDate")}),a.jsx("div",{className:"mt-1 text-sm",children:new Date(x.resolved_date).toLocaleString()})]}),x.closed_at&&a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium",children:R("tickets.closedDate")}),a.jsx("div",{className:"mt-1 text-sm",children:new Date(x.closed_at).toLocaleString()})]})]})]}),a.jsx(ar,{className:"flex flex-col-reverse sm:flex-row gap-2 pt-4",children:a.jsx(q,{variant:"outline",onClick:()=>j(!1),className:"w-full sm:w-auto",children:R("buttons.cancel")})})]})})]})}function kE({projectId:t,onClose:e}){const{id:r}=mD(),n=Zr(),{user:s}=yt(),[o,i]=f.useState([]),[l,c]=f.useState(""),[u,d]=f.useState(!0),[h,m]=f.useState(null),[p,v]=f.useState(null),[g,w]=f.useState(null),[y,x]=f.useState(null),[_,b]=f.useState([]),[j,N]=f.useState([]),k=t||(r?parseInt(r):null),E=!!t;f.useEffect(()=>{(async()=>{if(!(!k||!s)){if(s.role==="admin"||s.role==="manager"){m(!0);return}if(s.role==="employee")try{const D=(await S0.getProjectUsers(k)).some(C=>C.auth_user_id===s.id);m(D)}catch(M){console.error("Failed to check project access:",M),m(!1)}else m(!0)}})()},[k,s]),f.useEffect(()=>{k&&h&&T()},[k,h]);const T=async()=>{if(k)try{d(!0);const Y=await On.getById(k);if(v(Y),Y){if(Y.created_by)try{const M=await qt.getByAuthId(Y.created_by);w(M)}catch(M){console.error("Failed to fetch client:",M)}if(Y.created_by)try{const M=await qt.getByAuthId(Y.created_by);x(M)}catch(M){console.error("Failed to fetch manager:",M)}try{const D=(await S0.getProjectUsers(k)).map(L=>L.auth_user_id),C=await Promise.all(D.map(L=>qt.getByAuthId(L).catch(()=>null)));b(C.filter(L=>L!==null))}catch(M){console.error("Failed to fetch project users:",M)}try{const C=(await pr.getAll()).filter(W=>W.project_id===k).map(W=>W.stage_id),I=(await Promise.all(C.map(W=>Js.getByStage(W)))).flat();N(I)}catch(M){console.error("Failed to fetch tasks:",M)}}}catch(Y){console.error("Failed to load project data:",Y)}finally{d(!1)}};f.useEffect(()=>{k&&p&&j.length>0&&P()},[k,p,j]);const P=async()=>{if(!(!k||!p||j.length===0))try{const Y=[];for(const M of j){const D=await eg.getByTask(M.task_id);Y.push(...D)}i(Y)}catch(Y){console.error("Failed to load comments:",Y)}},z=async Y=>{if(!(!l.trim()||!s))try{const M=await eg.create({task_id:Y,auth_user_id:s.id,message:l.trim()});i(D=>[...D,M]),c("")}catch(M){console.error("Failed to add comment:",M)}},B=()=>{e?e():n("/projects")},Q=({children:Y})=>E?a.jsx("div",{className:"h-full overflow-y-auto p-1",children:Y}):a.jsx(Jt,{children:Y});if(h===!1)return a.jsx(Q,{children:a.jsx("div",{className:"flex items-center justify-center h-full py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"You don't have permission to view this project."}),a.jsx(q,{onClick:B,children:"Back to Projects"})]})})});if(h===null||!p||!g||!y)return u?a.jsx(Q,{children:a.jsx("div",{className:"flex items-center justify-center h-full py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})}):a.jsx(Q,{children:a.jsx("div",{children:"Project not found"})});const R={todo:"bg-slate-200 text-slate-700",in_progress:"bg-blue-200 text-blue-700",done:"bg-green-200 text-green-700"};return a.jsx(Q,{children:a.jsxs("div",{className:"space-y-6 pb-10",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(q,{variant:"ghost",size:"icon",onClick:B,children:a.jsx(i1,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:H(p,"project_name")}),a.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:H(g,"company_name")})]})]}),a.jsx(q,{variant:"outline",className:"self-start sm:self-auto",children:"Settings"})]}),a.jsx(xe,{children:a.jsxs(_e,{className:"pt-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"Overall Progress"}),a.jsxs("span",{className:"text-sm font-bold",children:[p.progress||0,"%"]})]}),a.jsx(fs,{value:p.progress||0,className:"h-3"})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[a.jsx("div",{className:"lg:col-span-2 space-y-4 lg:space-y-6",children:a.jsxs(Gc,{defaultValue:"tasks",children:[a.jsxs(Xi,{className:"w-full sm:w-auto",children:[a.jsx(Yr,{value:"tasks",className:"flex-1 sm:flex-none",children:"Tasks"}),a.jsx(Yr,{value:"images",className:"flex-1 sm:flex-none",children:"Images"}),a.jsx(Yr,{value:"comments",className:"flex-1 sm:flex-none",children:"Comments"})]}),a.jsxs(Qr,{value:"tasks",className:"space-y-3",children:[j.map(Y=>{var D;const M=_.find(C=>C.user_id===Y.assigned_to);return a.jsx(xe,{children:a.jsx(_e,{className:"pt-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold",children:H(Y,"task_name")}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:H(Y,"description")}),a.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[a.jsx(Me,{className:Z("text-xs",R[Y.task_status]),children:((D=Y.task_status)==null?void 0:D.replace("_"," "))||"todo"}),Y.due_date&&a.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[a.jsx(ls,{className:"h-3 w-3"}),"Due: ",new Date(Y.due_date).toLocaleDateString()]})]})]}),M&&a.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[a.jsx("div",{className:"text-2xl mb-1",children:M.avatar||""}),H(M,"user_name")]})]})})},Y.task_id)}),a.jsx(q,{variant:"outline",className:"w-full",children:"+ Add New Task"})]}),a.jsx(Qr,{value:"images",children:a.jsx(xe,{children:a.jsxs(_e,{className:"pt-6",children:[a.jsx("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(Y=>a.jsx("div",{className:"aspect-square bg-muted rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-4xl",children:""})},Y))}),a.jsxs(q,{variant:"outline",className:"w-full mt-4",children:[a.jsx(BL,{className:"h-4 w-4 mr-2"}),"Upload Images"]})]})})}),a.jsxs(Qr,{value:"comments",className:"space-y-3",children:[o.map(Y=>{const M=[..._,g,y].find(D=>D&&D.auth_user_id===Y.auth_user_id);return a.jsx(xe,{children:a.jsx(_e,{className:"pt-6",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"text-2xl",children:(M==null?void 0:M.avatar)||""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-semibold text-sm",children:M?H(M,"user_name"):"Unknown"}),a.jsx("p",{className:"text-sm mt-1",children:Y.message}),a.jsx("span",{className:"text-xs text-muted-foreground mt-2 block",children:new Date(Y.created_date||"").toLocaleString()})]})]})})},Y.comment_id)}),j.length>0&&a.jsx(xe,{children:a.jsx(_e,{className:"pt-6",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(je,{placeholder:"Add a comment...",value:l,onChange:Y=>c(Y.target.value),onKeyDown:Y=>{Y.key==="Enter"&&!Y.shiftKey&&(Y.preventDefault(),z(j[0].task_id))}}),a.jsx(q,{size:"icon",onClick:()=>z(j[0].task_id),children:a.jsx(Sv,{className:"h-4 w-4"})})]})})})]})]})}),a.jsxs("div",{className:"space-y-4 lg:order-last",children:[a.jsxs(xe,{children:[a.jsx(Ie,{children:a.jsx(qe,{className:"text-base sm:text-lg",children:"Project Summary"})}),a.jsxs(_e,{className:"space-y-3 sm:space-y-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-1",children:"Client"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xl",children:g.avatar}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold",children:H(g,"user_name")}),a.jsx("div",{className:"text-xs text-muted-foreground",children:H(g,"company_name")})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-1",children:"Project Manager"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xl",children:y.avatar}),a.jsx("div",{className:"text-sm",children:H(y,"user_name")})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:"Team"}),a.jsx("div",{className:"space-y-2",children:_.map(Y=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xl",children:Y.avatar||""}),a.jsx("div",{className:"text-sm",children:H(Y,"user_name")})]},Y.user_id))})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-1",children:"Timeline"}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Start: ",p.created_date?new Date(p.created_date).toLocaleDateString():"Not set",p.end_date&&a.jsxs("div",{children:["End: ",new Date(p.end_date).toLocaleDateString()]})]})]})]})]}),a.jsxs(xe,{children:[a.jsx(Ie,{children:a.jsx(qe,{className:"text-base sm:text-lg",children:"Recent Activity"})}),a.jsx(_e,{children:a.jsxs("div",{className:"space-y-3 text-xs",children:[a.jsxs("div",{className:"pb-2 border-b",children:[a.jsx("div",{className:"font-medium",children:"Task completed"}),a.jsx("div",{className:"text-muted-foreground",children:"2 hours ago"})]}),a.jsxs("div",{className:"pb-2 border-b",children:[a.jsx("div",{className:"font-medium",children:"New comment added"}),a.jsx("div",{className:"text-muted-foreground",children:"5 hours ago"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Images uploaded"}),a.jsx("div",{className:"text-muted-foreground",children:"1 day ago"})]})]})})]})]})]})]})})}function Sz({project:t,client:e,manager:r,stages:n,onDelete:s,onClick:o,onDragStart:i,onStageChange:l,isDragging:c=!1}){const{t:u}=Xe(),d=xo(),h=t.progress||0,m=g=>g?new Date(g).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):u("leads.notSet","Not set"),p=g=>{if(!g)return null;const w=new Date,x=(new Date(g).getTime()-w.getTime())/(1e3*60*60);return x<0?"overdue":x<24?"urgent":x<72?"soon":null},v=g=>{switch(p(g)){case"overdue":return"border-destructive ring-1 ring-destructive";case"urgent":return"border-orange-500 ring-1 ring-orange-500";case"soon":return"border-yellow-500";default:return""}};return a.jsxs(xe,{className:Z("group relative hover:shadow-lg transition-all duration-200",d?"w-full border-l-4 border-l-blue-500 rtl:border-l-0 rtl:border-r-4 rtl:border-r-blue-500":"w-[280px] sm:w-[300px] border-l-4 rtl:border-l-0 rtl:border-r-4",!d&&(h===100?"border-l-green-500 rtl:border-r-green-500":"border-l-blue-500 rtl:border-r-blue-500"),v(t.end_date),c&&"opacity-50 rotate-2 scale-105"),draggable:!!i,onDragStart:g=>{i&&(g.dataTransfer.effectAllowed="move",g.dataTransfer.setData("text/plain",t.project_id.toString()),i(t.project_id))},children:[a.jsx(Ie,{className:"pb-3 px-4 pt-4 cursor-pointer",onClick:o,children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-base mb-1 truncate group-hover:text-primary transition-colors",children:H(t,"project_name")}),H(t,"project_description")&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:H(t,"project_description")})]}),s&&a.jsxs(ka,{children:[a.jsx(Kc,{asChild:!0,onClick:g=>g.stopPropagation(),children:a.jsx(q,{variant:"ghost",size:"sm",className:Z("h-8 w-8 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10",d?"opacity-100":"opacity-0 group-hover:opacity-100 transition-opacity"),children:a.jsx(wr,{className:"h-4 w-4"})})}),a.jsxs(vs,{onClick:g=>g.stopPropagation(),children:[a.jsxs(xs,{children:[a.jsx(ws,{children:u("projects.deleteProject")}),a.jsx(_s,{children:u("projects.deleteConfirmation",{name:H(t,"project_name")})})]}),a.jsxs(ys,{children:[a.jsx(js,{children:u("buttons.cancel")}),a.jsx(bs,{onClick:g=>{g.stopPropagation(),s(t.project_id)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:u("buttons.delete")})]})]})]})]})}),a.jsxs(_e,{className:"px-4 pb-4 space-y-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[a.jsx("span",{children:u("projects.progress")}),a.jsxs("span",{className:"font-medium",children:[h,"%"]})]}),a.jsx(fs,{value:h,className:"h-2"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e&&a.jsxs("div",{className:"flex items-start gap-1.5",children:[a.jsx(po,{className:"h-3.5 w-3.5 text-muted-foreground mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Client"}),a.jsx("p",{className:"text-xs font-medium truncate",children:e.user_name})]})]}),a.jsxs("div",{className:"flex items-start gap-1.5",children:[a.jsx(us,{className:"h-3.5 w-3.5 text-muted-foreground mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Manager"}),a.jsx("p",{className:"text-xs font-medium truncate",children:r?r.user_name:u("common.all","Unassigned")})]})]})]}),d&&l&&a.jsx("div",{className:"pt-1",children:a.jsxs(We,{value:t.stage.toString(),onValueChange:g=>l(t.project_id,parseInt(g)),children:[a.jsx(Fe,{className:"h-7 text-xs",children:a.jsx(Ve,{placeholder:u("projects.selectStage","Select stage")})}),a.jsx($e,{children:n.filter(g=>["New","In Progress","Overdue","Completed"].includes(g.stage_name)).map(g=>a.jsx(oe,{value:g.stage_id.toString(),children:H(g,"stage_name")},g.stage_id))})]})}),a.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[a.jsx(ls,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:m(t.created_date)})]}),h===100?a.jsx(Me,{variant:"default",className:"bg-green-500 text-xs",children:"Completed"}):h>0?a.jsx(Me,{variant:"default",className:"text-xs",children:"In Progress"}):a.jsx(Me,{variant:"secondary",className:"text-xs",children:"Not Started"})]})]})]})}function Nz(){var Bt,Ue;Zr();const{hasRole:t,user:e}=yt();_a();const{t:r}=Xe(),n=xo(),[s,o]=f.useState([]),[i,l]=f.useState([]),[c,u]=f.useState([]),[d,h]=f.useState([]),[m,p]=f.useState(!0),[v,g]=f.useState(null);f.useState(!1),f.useState("");const[w,y]=f.useState(null),[x,_]=f.useState(""),[b,j]=f.useState(null),[N,k]=f.useState(null),[E,T]=f.useState(!1),[P,z]=f.useState(null),[B,Q]=f.useState({project_name:"",project_description:"",client_id:"",progress:0,stage:"1"}),[R,Y]=f.useState(!1),[M,D]=f.useState({project_name:"",project_description:"",client_id:""}),[C,L]=f.useState("kanban"),[I,W]=f.useState(null),[K,te]=f.useState(""),[O,re]=f.useState("all"),[de,ae]=f.useState("all"),[ye,Ee]=f.useState({from:void 0,to:void 0}),F=f.useMemo(()=>s.filter(ee=>{const S=(ee.project_name||"").toLowerCase().includes(K.toLowerCase())||(ee.project_description||"").toLowerCase().includes(K.toLowerCase());let $=!0;O==="todo"?$=(ee.progress||0)===0:O==="in_progress"?$=(ee.progress||0)>0&&(ee.progress||0)<100:O==="done"&&($=(ee.progress||0)===100);const X=de==="all"||ee.created_by&&ee.created_by.toString()===de;let G=!0;if(ye.from&&ee.end_date){const ge=new Date(ee.end_date),ie=new Date(ye.from);ie.setHours(0,0,0,0);const De=new Date(ge);if(De.setHours(0,0,0,0),G=De>=ie,G&&ye.to){const Ge=new Date(ye.to);Ge.setHours(23,59,59,999),G=De<=Ge}}else ye.from&&!ee.end_date&&(G=!1);return S&&$&&X&&G}),[s,K,O,de,ye]);f.useEffect(()=>{se()},[]),f.useEffect(()=>{if(d.length>0&&P===null){const ee=d.find(S=>S.stage_id===5);ee&&z(ee.stage_id)}},[d,P]);const se=async()=>{try{p(!0),g(null);const[ee,S,$,X]=await Promise.all([On.getAll(),ex.getAll(),qt.getAll(),pr.getByType("projects")]);console.log("[Projects] Loaded data:",{projects:ee.length,clients:S.length,users:$.length,stages:X.length}),console.log("[Projects] Projects data:",ee),console.log("[Projects] Stages data:",X),o(ee),l(S),u($),h(X)}catch(ee){console.error("Failed to load data:",ee),g(r("projects.loadError","Failed to load projects. Please try again."))}finally{p(!1)}},V=async ee=>{if(x.trim())try{await pr.update(ee,{stage_name:x.trim()}),h(d.map(S=>S.stage_id===ee?{...S,stage_name:x.trim()}:S)),y(null),_("")}catch(S){console.error("Failed to update stage:",S)}},fe=async ee=>{if(s.filter($=>$.stage===ee).length>0){j(ee);return}try{await pr.delete(ee),h(d.filter($=>$.stage_id!==ee))}catch($){console.error("Failed to delete stage:",$)}},Re=ee=>{k(ee)},Ke=ee=>{ee.preventDefault(),ee.dataTransfer.dropEffect="move"},et=async ee=>{if(!N)return;const S=s.find($=>$.project_id===N);if(S&&S.stage!==ee)try{await On.update(N,{stage:ee}),o(s.map($=>$.project_id===N?{...$,stage:ee}:$))}catch($){console.error("Failed to update project stage:",$)}k(null)},mt=async(ee,S)=>{const $=s.find(X=>X.project_id===ee);if($&&$.stage!==S)try{await On.update(ee,{stage:S}),o(s.map(X=>X.project_id===ee?{...X,stage:S}:X))}catch(X){console.error("Failed to update project stage:",X)}},Ut=async ee=>{try{await On.delete(ee),o(s.filter(S=>S.project_id!==ee))}catch(S){console.error("Failed to delete project:",S)}},Gt=ee=>{Q(S=>({...S,stage:ee.toString()})),T(!0)},qn=async()=>{var ee;if(B.project_name.trim())try{const S=wn({project_name:B.project_name.trim(),project_description:B.project_description.trim()||null,created_by:((ee=e==null?void 0:e.profile)==null?void 0:ee.user_id)||1,progress:B.progress,stage:parseInt(B.stage),end_date:null,auth_user_id:(e==null?void 0:e.id)||""},{project_name:"project_name",project_description:"project_description"}),$=await On.create(S);o([...s,$]),Q({project_name:"",project_description:"",client_id:"",progress:0,stage:"1"}),T(!1)}catch(S){console.error("Failed to create project:",S)}},U=async()=>{var ee;if(M.project_name.trim())try{const S=wn({project_name:M.project_name.trim(),project_description:M.project_description.trim()||null,created_by:((ee=e==null?void 0:e.profile)==null?void 0:ee.user_id)||1,progress:0,stage:1,end_date:null,auth_user_id:(e==null?void 0:e.id)||""},{project_name:"project_name",project_description:"project_description"}),$=await On.create(S);o([...s,$]),D({project_name:"",project_description:"",client_id:""}),Y(!1)}catch(S){console.error("Failed to create lead:",S)}},le=d.filter(ee=>ee.stage_type==="projects").sort((ee,S)=>{const $=ee.stager_order_index??0,X=S.stager_order_index??0;return gn()?X-$:$-X}),Se=le.map(ee=>({id:ee.stage_id,name:H(ee,"stage_name"),color:ee.color,count:F.filter(S=>S.stage===ee.stage_id).length})),Ze=()=>{var ee;return m?a.jsx(Jh,{message:r("projects.loading","Loading projects...")}):v?a.jsx(yx,{title:r("projects.errorTitle","Error loading projects"),message:v,onRetry:se}):s.length===0&&!K&&O==="all"&&de==="all"?a.jsx(NE,{title:r("projects.emptyTitle","No projects found"),description:r("projects.emptyDescription","Get started by creating your first project."),icon:a.jsx(ri,{className:"h-10 w-10 text-muted-foreground"}),action:a.jsxs(q,{onClick:()=>Y(!0),children:[a.jsx(xt,{className:"mr-2 h-4 w-4"})," ",r("projects.createProject")]})}):a.jsxs(a.Fragment,{children:[a.jsx(gx,{onSearch:te,onFilterStatus:re,onFilterAssignee:ae,onFilterDateRange:Ee,users:c,statuses:[{value:"todo",label:"Not Started"},{value:"in_progress",label:"In Progress"},{value:"done",label:"Completed"}]}),C==="kanban"?a.jsx(a.Fragment,{children:a.jsx(vx,{stages:Se,currentStageId:P||((ee=Se[0])==null?void 0:ee.id),onStageChange:z,children:a.jsx("div",{className:"flex gap-6 pb-6 overflow-x-auto scrollbar-hide max-w-full pl-6 rtl:pr-6 rtl:pl-0",children:le.sort((S,$)=>S.stage_id-$.stage_id).filter(S=>{var X;return window.innerWidth<1024?S.stage_id===(P||((X=Se[0])==null?void 0:X.id)):!0}).map((S,$)=>{var G,ge;const X=F.filter(ie=>ie.stage===S.stage_id);return console.log(`[Projects] Stage ${S.stage_name} (${S.stage_id}): ${X.length} projects`),console.log("[Projects] Stage projects:",X),a.jsxs("div",{className:Z("flex-shrink-0 animate-fade-in h-[calc(100vh-300px)]",n?"w-full":"w-[280px] sm:w-[300px]"),style:{animationDelay:`${$*.1}s`},onDragOver:Ke,onDrop:()=>et(S.stage_id),children:[!n&&a.jsx("div",{className:Z("rounded-xl bg-muted/30 backdrop-blur p-2 mb-5 shadow-soft",S.color||"border-l-4 border-primary/50"),children:a.jsx("div",{className:"flex items-center justify-between mb-2",children:w===S.stage_id?a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(je,{value:x,onChange:ie=>_(ie.target.value),onKeyDown:ie=>{ie.key==="Enter"&&V(S.stage_id),ie.key==="Escape"&&(y(null),_(""))},className:"h-8 text-sm font-bold",autoFocus:!0}),a.jsx(q,{size:"sm",variant:"ghost",onClick:()=>V(S.stage_id),className:"h-8 w-8 p-0",children:""})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_v,{className:"h-4 w-4 text-muted-foreground cursor-move"}),a.jsx("h2",{className:"font-bold text-base",children:H(S,"stage_name")})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-bold px-3 py-1 rounded-full bg-background shadow-sm",children:X.length}),a.jsxs(a.Fragment,{children:[a.jsx(q,{size:"sm",variant:"ghost",onClick:()=>{y(S.stage_id),_(H(S,"stage_name"))},className:"h-6 w-6 p-0",title:r("buttons.edit"),children:a.jsx(bh,{className:"h-3 w-3"})}),a.jsx(q,{size:"sm",variant:"ghost",onClick:()=>fe(S.stage_id),className:"h-6 w-6 p-0 text-destructive",title:r("buttons.delete"),children:a.jsx(wr,{className:"h-3 w-3"})})]})]})]})})}),a.jsxs("div",{className:"space-y-4 max-h-[calc(100vh-300px)] overflow-y-auto scrollbar-hide",children:[((G=d.sort((ie,De)=>(ie.stager_order_index||0)-(De.stager_order_index||0))[0])==null?void 0:G.stage_id)===S.stage_id&&a.jsx("div",{className:"mb-4",children:a.jsx(xe,{className:Z("group relative hover:shadow-lg transition-all duration-200 cursor-pointer","border-l-4 border-l-gray-300 rtl:border-l-0 rtl:border-r-4 rtl:border-r-gray-300","flex items-center justify-center bg-muted/20",n?"w-full h-[100px]":"w-[280px] sm:w-[300px] h-[120px]"),onClick:()=>Gt(S.stage_id),children:a.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[a.jsx(xt,{className:"h-8 w-8"}),a.jsx("span",{className:"text-sm font-medium",children:r("projects.addNewProjectCard")})]})})}),X.map(ie=>{const De=c.find(Ge=>Ge.auth_user_id===ie.created_by);return a.jsx(Sz,{project:ie,client:i.find(Ge=>Ge.user_id.toString()===ie.client_id)||null,manager:De||null,stages:d,onDelete:Ut,onClick:()=>W(ie.project_id),onDragStart:Re,onStageChange:mt,isDragging:N===ie.project_id},ie.project_id)}),((ge=d.sort((ie,De)=>(ie.stager_order_index||0)-(De.stager_order_index||0))[0])==null?void 0:ge.stage_id)!==S.stage_id&&a.jsx("div",{className:"mt-2",children:a.jsxs(q,{variant:"outline",size:"sm",className:"w-full h-12 border-dashed text-muted-foreground hover:text-foreground",onClick:()=>Gt(S.stage_id),children:[a.jsx(xt,{className:"h-4 w-4 mr-2"}),r("projects.addProject")]})})]})]},S.stage_id)})})})}):a.jsx("div",{className:"bg-card rounded-lg border shadow-sm",children:a.jsxs(Wh,{children:[a.jsx(Vh,{children:a.jsxs(ns,{children:[a.jsx(wt,{children:r("projects.projectName")}),a.jsx(wt,{children:r("projects.client")}),a.jsx(wt,{children:r("projects.manager")}),a.jsx(wt,{children:r("projects.stage")}),a.jsx(wt,{children:r("projects.progress")}),a.jsx(wt,{children:r("projects.dueDate")}),a.jsx(wt,{className:"w-[50px]"})]})}),a.jsx(Hh,{children:F.map(S=>{const $=c.find(ge=>ge.auth_user_id===S.created_by),X=i.find(ge=>ge.user_id.toString()===S.client_id),G=d.find(ge=>ge.stage_id===S.stage);return a.jsxs(ns,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>W(S.project_id),children:[a.jsx(ut,{className:"font-medium",children:H(S,"project_name")}),a.jsx(ut,{children:X?H(X,"user_name"):"-"}),a.jsx(ut,{children:$?H($,"user_name"):"-"}),a.jsx(ut,{children:a.jsx(Me,{variant:"outline",className:"bg-background",children:G?H(G,"stage_name"):"-"})}),a.jsx(ut,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(fs,{value:S.progress||0,className:"w-16 h-2"}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:[S.progress,"%"]})]})}),a.jsx(ut,{className:"text-muted-foreground text-sm",children:S.end_date?new Date(S.end_date).toLocaleDateString():"-"}),a.jsx(ut,{children:a.jsx(q,{variant:"ghost",size:"icon",onClick:ge=>{ge.stopPropagation(),Ut(S.project_id)},className:"h-8 w-8 text-muted-foreground hover:text-destructive",children:a.jsx(wr,{className:"h-4 w-4"})})})]},S.project_id)})})]})})]})};return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsx(Qh,{title:r("projects.title"),description:r("projects.description","Manage and track all your projects"),icon:a.jsx(ri,{className:"h-5 w-5 text-primary"}),breadcrumbs:[{label:r("navigation.dashboard"),href:"/dashboard"},{label:r("navigation.projects")}],actions:a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-muted p-1 rounded-lg flex items-center gap-1",children:[a.jsx(q,{variant:C==="kanban"?"default":"ghost",size:"sm",onClick:()=>L("kanban"),className:"h-8 w-8 p-0",children:a.jsx(bv,{className:"h-4 w-4"})}),a.jsx(q,{variant:C==="list"?"default":"ghost",size:"sm",onClick:()=>L("list"),className:"h-8 w-8 p-0",children:a.jsx(jv,{className:"h-4 w-4"})})]}),a.jsxs(q,{onClick:()=>Y(!0),children:[a.jsx(xt,{className:"mr-2 h-4 w-4"})," ",r("projects.newProject")]})]}),stats:[{label:r("projects.total","Total Projects"),value:s.length,icon:a.jsx(ri,{className:"h-4 w-4 text-primary"})},{label:r("projects.inProgress","In Progress"),value:s.filter(ee=>(ee.progress||0)>0&&(ee.progress||0)<100).length,icon:a.jsx(ls,{className:"h-4 w-4 text-blue-500"})},{label:r("projects.completed","Completed"),value:s.filter(ee=>(ee.progress||0)===100).length,icon:a.jsx(po,{className:"h-4 w-4 text-green-600"})},{label:r("projects.avgProgress","Avg Progress"),value:s.length>0?`${Math.round(s.reduce((ee,S)=>ee+(S.progress||0),0)/s.length)}%`:"0%",icon:a.jsx(fs,{className:"h-4 w-4 text-blue-500"})}]}),Ze(),a.jsx(Ot,{open:E,onOpenChange:T,children:a.jsxs(Nt,{className:"w-[95vw] sm:w-full sm:max-w-[500px] max-h-[85vh] overflow-y-auto",children:[a.jsxs(kt,{children:[a.jsx(Ct,{children:r("projects.createProject")}),a.jsx(or,{children:r("projects.createProjectDesc")})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-sm font-medium",children:[r("projects.projectName")," *"]}),a.jsx(je,{value:B.project_name,onChange:ee=>Q(S=>({...S,project_name:ee.target.value})),placeholder:r("projects.projectNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:r("projects.description")}),a.jsx(Or,{value:B.project_description,onChange:ee=>Q(S=>({...S,project_description:ee.target.value})),placeholder:r("projects.descriptionPlaceholder"),rows:3})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:r("projects.client")}),a.jsxs(We,{value:B.client_id,onValueChange:ee=>Q(S=>({...S,client_id:ee})),children:[a.jsx(Fe,{children:a.jsx(Ve,{placeholder:r("projects.selectClient")})}),a.jsx($e,{children:i.map(ee=>a.jsx(oe,{value:ee.user_id.toString(),children:H(ee,"user_name")},ee.user_id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:r("projects.initialProgress")}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"range",min:"0",max:"100",value:B.progress,onChange:ee=>Q(S=>({...S,progress:parseInt(ee.target.value)})),className:"w-full h-1.5"}),a.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[a.jsx("span",{children:"0%"}),a.jsxs("span",{children:[B.progress,"%"]}),a.jsx("span",{children:"100%"})]})]})]})]}),a.jsxs(ar,{children:[a.jsx(q,{variant:"outline",onClick:()=>T(!1),children:r("buttons.cancel")}),a.jsxs(q,{onClick:qn,disabled:!((Bt=B.project_name)!=null&&Bt.trim()),children:[a.jsx(cs,{className:"h-4 w-4 mr-2"}),r("projects.createProject")]})]})]})}),a.jsx(Ot,{open:R,onOpenChange:Y,children:a.jsxs(Nt,{className:"w-[95vw] sm:w-full sm:max-w-[500px] max-h-[85vh] overflow-y-auto",children:[a.jsxs(kt,{children:[a.jsx(Ct,{children:r("projects.createProject")}),a.jsx(or,{children:r("projects.createProjectDesc")})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-sm font-medium",children:[r("projects.projectName")," *"]}),a.jsx(je,{value:M.project_name,onChange:ee=>D(S=>({...S,project_name:ee.target.value})),placeholder:r("projects.projectNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:r("projects.description")}),a.jsx(Or,{value:M.project_description,onChange:ee=>D(S=>({...S,project_description:ee.target.value})),placeholder:r("projects.descriptionPlaceholder"),rows:3})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:r("projects.client")}),a.jsxs(We,{value:M.client_id,onValueChange:ee=>D(S=>({...S,client_id:ee})),children:[a.jsx(Fe,{children:a.jsx(Ve,{placeholder:r("projects.selectClient")})}),a.jsx($e,{children:i.map(ee=>a.jsx(oe,{value:ee.user_id.toString(),children:H(ee,"user_name")},ee.user_id))})]})]})]}),a.jsxs(ar,{children:[a.jsx(q,{variant:"outline",onClick:()=>Y(!1),children:r("buttons.cancel")}),a.jsxs(q,{onClick:U,disabled:!((Ue=M.project_name)!=null&&Ue.trim()),children:[a.jsx(cs,{className:"h-4 w-4 mr-2"}),r("projects.createProject")]})]})]})}),a.jsx($h,{open:!!I,onOpenChange:ee=>!ee&&W(null),children:a.jsxs(zc,{side:"right",className:"w-full sm:max-w-2xl p-0 overflow-hidden sm:w-[800px]",children:[a.jsxs(Zv,{className:"sr-only",children:[a.jsx(Uh,{children:"Project Details"}),a.jsx(Bh,{children:"View and manage project information"})]}),I&&a.jsx(kE,{projectId:I,onClose:()=>W(null)})]})})]})}function kz(t,e){return f.useReducer((r,n)=>e[r][n]??r,t)}var wx="ScrollArea",[CE,TW]=jr(wx),[Cz,en]=CE(wx),EE=f.forwardRef((t,e)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:o=600,...i}=t,[l,c]=f.useState(null),[u,d]=f.useState(null),[h,m]=f.useState(null),[p,v]=f.useState(null),[g,w]=f.useState(null),[y,x]=f.useState(0),[_,b]=f.useState(0),[j,N]=f.useState(!1),[k,E]=f.useState(!1),T=Ae(e,z=>c(z)),P=Pc(s);return a.jsx(Cz,{scope:r,type:n,dir:P,scrollHideDelay:o,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:m,scrollbarX:p,onScrollbarXChange:v,scrollbarXEnabled:j,onScrollbarXEnabledChange:N,scrollbarY:g,onScrollbarYChange:w,scrollbarYEnabled:k,onScrollbarYEnabledChange:E,onCornerWidthChange:x,onCornerHeightChange:b,children:a.jsx(be.div,{dir:P,...i,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":_+"px",...t.style}})})});EE.displayName=wx;var PE="ScrollAreaViewport",TE=f.forwardRef((t,e)=>{const{__scopeScrollArea:r,children:n,nonce:s,...o}=t,i=en(PE,r),l=f.useRef(null),c=Ae(e,l,i.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),a.jsx(be.div,{"data-radix-scroll-area-viewport":"",...o,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t.style},children:a.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});TE.displayName=PE;var Hn="ScrollAreaScrollbar",_x=f.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=en(Hn,t.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:i}=s,l=t.orientation==="horizontal";return f.useEffect(()=>(l?o(!0):i(!0),()=>{l?o(!1):i(!1)}),[l,o,i]),s.type==="hover"?a.jsx(Ez,{...n,ref:e,forceMount:r}):s.type==="scroll"?a.jsx(Pz,{...n,ref:e,forceMount:r}):s.type==="auto"?a.jsx(RE,{...n,ref:e,forceMount:r}):s.type==="always"?a.jsx(bx,{...n,ref:e}):null});_x.displayName=Hn;var Ez=f.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=en(Hn,t.__scopeScrollArea),[o,i]=f.useState(!1);return f.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),i(!0)},d=()=>{c=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),a.jsx(cr,{present:r||o,children:a.jsx(RE,{"data-state":o?"visible":"hidden",...n,ref:e})})}),Pz=f.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=en(Hn,t.__scopeScrollArea),o=t.orientation==="horizontal",i=Zh(()=>c("SCROLL_END"),100),[l,c]=kz("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),f.useEffect(()=>{const u=s.viewport,d=o?"scrollLeft":"scrollTop";if(u){let h=u[d];const m=()=>{const p=u[d];h!==p&&(c("SCROLL"),i()),h=p};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[s.viewport,o,c,i]),a.jsx(cr,{present:r||l!=="hidden",children:a.jsx(bx,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:ue(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ue(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),RE=f.forwardRef((t,e)=>{const r=en(Hn,t.__scopeScrollArea),{forceMount:n,...s}=t,[o,i]=f.useState(!1),l=t.orientation==="horizontal",c=Zh(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;i(l?u:d)}},10);return Li(r.viewport,c),Li(r.content,c),a.jsx(cr,{present:n||o,children:a.jsx(bx,{"data-state":o?"visible":"hidden",...s,ref:e})})}),bx=f.forwardRef((t,e)=>{const{orientation:r="vertical",...n}=t,s=en(Hn,t.__scopeScrollArea),o=f.useRef(null),i=f.useRef(0),[l,c]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=IE(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>o.current=m,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:m=>i.current=m};function h(m,p){return Mz(m,i.current,l,p)}return r==="horizontal"?a.jsx(Tz,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const m=s.viewport.scrollLeft,p=L0(m,l,s.dir);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=h(m,s.dir))}}):r==="vertical"?a.jsx(Rz,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const m=s.viewport.scrollTop,p=L0(m,l);o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=h(m))}}):null}),Tz=f.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...s}=t,o=en(Hn,t.__scopeScrollArea),[i,l]=f.useState(),c=f.useRef(null),u=Ae(e,c,o.onScrollbarXChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(DE,{"data-orientation":"horizontal",...s,ref:u,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Xh(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(o.viewport){const m=o.viewport.scrollLeft+d.deltaX;t.onWheelScroll(m),FE(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Zd(i.paddingLeft),paddingEnd:Zd(i.paddingRight)}})}})}),Rz=f.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...s}=t,o=en(Hn,t.__scopeScrollArea),[i,l]=f.useState(),c=f.useRef(null),u=Ae(e,c,o.onScrollbarYChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(DE,{"data-orientation":"vertical",...s,ref:u,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Xh(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(o.viewport){const m=o.viewport.scrollTop+d.deltaY;t.onWheelScroll(m),FE(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Zd(i.paddingTop),paddingEnd:Zd(i.paddingBottom)}})}})}),[Oz,OE]=CE(Hn),DE=f.forwardRef((t,e)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:o,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...m}=t,p=en(Hn,r),[v,g]=f.useState(null),w=Ae(e,T=>g(T)),y=f.useRef(null),x=f.useRef(""),_=p.viewport,b=n.content-n.viewport,j=At(d),N=At(c),k=Zh(h,10);function E(T){if(y.current){const P=T.clientX-y.current.left,z=T.clientY-y.current.top;u({x:P,y:z})}}return f.useEffect(()=>{const T=P=>{const z=P.target;(v==null?void 0:v.contains(z))&&j(P,b)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[_,v,b,j]),f.useEffect(N,[n,N]),Li(v,k),Li(p.content,k),a.jsx(Oz,{scope:r,scrollbar:v,hasThumb:s,onThumbChange:At(o),onThumbPointerUp:At(i),onThumbPositionChange:N,onThumbPointerDown:At(l),children:a.jsx(be.div,{...m,ref:w,style:{position:"absolute",...m.style},onPointerDown:ue(t.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),y.current=v.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),E(T))}),onPointerMove:ue(t.onPointerMove,E),onPointerUp:ue(t.onPointerUp,T=>{const P=T.target;P.hasPointerCapture(T.pointerId)&&P.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=x.current,p.viewport&&(p.viewport.style.scrollBehavior=""),y.current=null})})})}),Xd="ScrollAreaThumb",AE=f.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=OE(Xd,t.__scopeScrollArea);return a.jsx(cr,{present:r||s.hasThumb,children:a.jsx(Dz,{ref:e,...n})})}),Dz=f.forwardRef((t,e)=>{const{__scopeScrollArea:r,style:n,...s}=t,o=en(Xd,r),i=OE(Xd,r),{onThumbPositionChange:l}=i,c=Ae(e,h=>i.onThumbChange(h)),u=f.useRef(void 0),d=Zh(()=>{u.current&&(u.current(),u.current=void 0)},100);return f.useEffect(()=>{const h=o.viewport;if(h){const m=()=>{if(d(),!u.current){const p=Iz(h,l);u.current=p,l()}};return l(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[o.viewport,d,l]),a.jsx(be.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:ue(t.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),v=h.clientX-p.left,g=h.clientY-p.top;i.onThumbPointerDown({x:v,y:g})}),onPointerUp:ue(t.onPointerUp,i.onThumbPointerUp)})});AE.displayName=Xd;var jx="ScrollAreaCorner",ME=f.forwardRef((t,e)=>{const r=en(jx,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?a.jsx(Az,{...t,ref:e}):null});ME.displayName=jx;var Az=f.forwardRef((t,e)=>{const{__scopeScrollArea:r,...n}=t,s=en(jx,r),[o,i]=f.useState(0),[l,c]=f.useState(0),u=!!(o&&l);return Li(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),Li(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),i(d)}),u?a.jsx(be.div,{...n,ref:e,style:{width:o,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Zd(t){return t?parseInt(t,10):0}function IE(t,e){const r=t/e;return isNaN(r)?0:r}function Xh(t){const e=IE(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*e;return Math.max(n,18)}function Mz(t,e,r,n="ltr"){const s=Xh(r),o=s/2,i=e||o,l=s-i,c=r.scrollbar.paddingStart+i,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,h=n==="ltr"?[0,d]:[d*-1,0];return LE([c,u],h)(t)}function L0(t,e,r="ltr"){const n=Xh(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=e.scrollbar.size-s,i=e.content-e.viewport,l=o-n,c=r==="ltr"?[0,i]:[i*-1,0],u=Up(t,c);return LE([0,i],[0,l])(u)}function LE(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function FE(t,e){return t>0&&t<e}var Iz=(t,e=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function s(){const o={left:t.scrollLeft,top:t.scrollTop},i=r.left!==o.left,l=r.top!==o.top;(i||l)&&e(),r=o,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function Zh(t,e){const r=At(t),n=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(n.current),[]),f.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,e)},[r,e])}function Li(t,e){const r=At(e);Et(()=>{let n=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(t),()=>{window.cancelAnimationFrame(n),s.unobserve(t)}}},[t,r])}var $E=EE,Lz=TE,Fz=ME;const Dr=f.forwardRef(({className:t,children:e,...r},n)=>a.jsxs($E,{ref:n,className:Z("relative overflow-hidden",t),...r,children:[a.jsx(Lz,{className:"h-full w-full rounded-[inherit]",children:e}),a.jsx(UE,{}),a.jsx(Fz,{})]}));Dr.displayName=$E.displayName;const UE=f.forwardRef(({className:t,orientation:e="vertical",...r},n)=>a.jsx(_x,{ref:n,orientation:e,className:Z("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:a.jsx(AE,{className:"relative flex-1 rounded-full bg-border"})}));UE.displayName=_x.displayName;function $z(){const{user:t,createStaffUser:e,deleteUser:r,updateUserRole:n,updateUser:s}=yt();_a();const{t:o}=Xe(),[i,l]=f.useState([]),[c,u]=f.useState(!0),[d,h]=f.useState(""),[m,p]=f.useState(!1),[v,g]=f.useState(""),[w,y]=f.useState(""),[x,_]=f.useState(""),[b,j]=f.useState("employee"),[N,k]=f.useState(""),[E,T]=f.useState(!1),[P,z]=f.useState("employees"),[B,Q]=f.useState(!1),[R,Y]=f.useState(null),[M,D]=f.useState(!1),[C,L]=f.useState({user_name:"",user_email:"",user_phone:"",user_role:""}),[I,W]=f.useState(!1),[K,te]=f.useState("");f.useEffect(()=>{O()},[]);const O=async()=>{try{u(!0);const V=await qt.getAll();l(V)}catch(V){console.error("Failed to load users:",V)}finally{u(!1)}},re=i.filter(V=>{var Gt,qn,U;const fe=P==="employees",Re=P==="clients";if(fe&&V.user_role==="client"||Re&&V.user_role!=="client")return!1;const Ke=((Gt=H(V,"user_name"))==null?void 0:Gt.toLowerCase())||"",et=((qn=V.user_email)==null?void 0:qn.toLowerCase())||"",mt=((U=V.user_role)==null?void 0:U.toLowerCase())||"",Ut=d.toLowerCase();return Ke.includes(Ut)||et.includes(Ut)||mt.includes(Ut)}),de=V=>{switch(V){case"admin":return"destructive";case"manager":return"default";case"employee":return"secondary";case"client":return"outline";default:return"secondary"}},ae=async V=>{if(V.preventDefault(),!E){k(""),T(!0);try{const fe=wn({user_name:v,user_email:w,user_role:b},{user_name:"user_name"});await e(w,x,{name:v,role:b,localizedData:fe}),p(!1),g(""),y(""),_(""),j("employee"),O()}catch(fe){k(fe.message||o("users.addUserError"))}finally{T(!1)}}},ye=async(V,fe)=>{if(confirm(o("users.deleteConfirmation",{name:fe})))try{await r(V),O()}catch(Re){alert(`${o("users.deleteError")}: ${Re.message}`)}},Ee=async(V,fe)=>{try{await n(V,fe),O()}catch(Re){alert(`${o("users.updateRoleError")}: ${Re.message}`)}},F=async V=>{var fe;if(V.preventDefault(),!(I||!R)){te(""),W(!0);try{const Re={};C.user_name!==H(R,"user_name")&&(Re.user_name=C.user_name),C.user_email!==R.user_email&&(Re.user_email=C.user_email),C.user_phone!==((fe=R.user_phone)==null?void 0:fe.toString())&&(Re.user_phone=C.user_phone?parseInt(C.user_phone):null),C.user_role!==R.user_role&&(Re.user_role=C.user_role),Object.keys(Re).length>0?(await s(R.auth_user_id||"",Re),D(!1),O()):D(!1)}catch(Re){te(Re.message||o("users.updateUserError"))}finally{W(!1)}}},se=V=>{var fe;Y(V),L({user_name:H(V,"user_name")||"",user_email:V.user_email||"",user_phone:((fe=V.user_phone)==null?void 0:fe.toString())||"",user_role:V.user_role||""}),D(!1),te(""),Q(!0)};return c?a.jsx("div",{className:"flex items-center justify-center h-full py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between md:justify-start gap-4",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:o("users.title")}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mr,{className:"h-5 w-5"}),a.jsxs("span",{className:"text-sm font-medium",children:[i.length," ",o("users.totalUsers")]})]}),a.jsx("p",{className:"hidden md:block text-muted-foreground",children:o("users.subtitle")})]}),a.jsxs("div",{className:"flex flex-row items-center border rounded-lg p-1 bg-muted/50 w-fit",children:[a.jsxs(q,{variant:P==="employees"?"default":"ghost",size:"sm",onClick:()=>z("employees"),className:"h-8 px-3",children:[a.jsx(zL,{className:"h-4 w-4 mr-2"}),o("users.employees")]}),a.jsxs(q,{variant:P==="clients"?"default":"ghost",size:"sm",onClick:()=>z("clients"),className:"h-8 px-3",children:[a.jsx(us,{className:"h-4 w-4 mr-2"}),o("users.clients")]})]}),P==="employees"&&a.jsxs("div",{className:"space-y-6",children:[(t==null?void 0:t.role)!=="manager"&&a.jsxs(Ot,{open:m,onOpenChange:p,children:[a.jsx(Ml,{asChild:!0,children:a.jsxs(q,{className:"w-full",children:[a.jsx(xt,{className:"h-4 w-4 mr-2"}),o("users.addUser")]})}),a.jsxs(Nt,{children:[a.jsxs(kt,{children:[a.jsx(Ct,{children:o("users.addNewUser")}),a.jsx(or,{children:o("users.addUserDescription")})]}),a.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[N&&a.jsx(Ti,{variant:"destructive",children:a.jsx(Ri,{children:N})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"formName",children:o("users.fullName")}),a.jsx(je,{id:"formName",value:v,onChange:V=>g(V.target.value),placeholder:o("users.fullName"),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"formEmail",children:o("users.email")}),a.jsx(je,{id:"formEmail",type:"email",value:w,onChange:V=>y(V.target.value),placeholder:o("users.email"),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"formPassword",children:o("users.password")}),a.jsx(je,{id:"formPassword",type:"password",value:x,onChange:V=>_(V.target.value),placeholder:o("users.password"),required:!0,minLength:6})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"formRole",children:o("users.role")}),a.jsxs(We,{value:b,onValueChange:V=>j(V),children:[a.jsx(Fe,{children:a.jsx(Ve,{})}),a.jsxs($e,{children:[a.jsx(oe,{value:"employee",children:o("users.employee")}),a.jsx(oe,{value:"manager",children:o("users.manager")}),a.jsx(oe,{value:"admin",children:o("users.admin")})]})]})]}),a.jsx(q,{type:"submit",className:"w-full",disabled:E,children:o(E?"users.addingUser":"users.addUser")})]})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ba,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(je,{placeholder:o("users.searchPlaceholder"),value:d,onChange:V=>h(V.target.value),className:"pl-10"})]}),a.jsxs(Dr,{className:"flex-1",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:re.map(V=>a.jsxs(xe,{className:"hover:shadow-md transition-shadow",children:[a.jsx(Ie,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(Hr,{className:"h-12 w-12",children:[a.jsx(qr,{src:V.avatar||""}),a.jsx(Kr,{children:H(V,"user_name").charAt(0).toUpperCase()})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx(qe,{className:"text-lg truncate",children:H(V,"user_name")}),a.jsx(Me,{variant:de(V.user_role),className:"mt-1",children:o(`users.${V.user_role}`)})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>se(V),children:a.jsx(Fd,{className:"h-4 w-4"})}),(t==null?void 0:t.role)==="admin"&&a.jsx(q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>ye(V.auth_user_id||"",H(V,"user_name")),children:a.jsx(wr,{className:"h-4 w-4"})})]})]})}),a.jsxs(_e,{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Qw,{className:"h-4 w-4"}),a.jsx("span",{className:"truncate",children:V.user_email})]}),V.client_contact&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx($p,{className:"h-4 w-4"}),a.jsx("span",{children:V.client_contact})]}),V.company_name&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Gw,{className:"h-4 w-4"}),a.jsx("span",{className:"truncate",children:V.company_name})]}),(V.user_role==="employee"||V.user_role==="manager")&&(t==null?void 0:t.role)==="admin"&&a.jsxs("div",{className:"pt-2 border-t",children:[a.jsx("div",{className:"text-xs font-medium mb-1",children:o("users.changeRole")}),a.jsxs(We,{value:V.user_role,onValueChange:fe=>Ee(V.auth_user_id||"",fe),children:[a.jsx(Fe,{className:"w-full h-8",children:a.jsx(Ve,{})}),a.jsxs($e,{children:[a.jsx(oe,{value:"employee",children:o("users.employee")}),a.jsx(oe,{value:"manager",children:o("users.manager")})]})]})]}),a.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[o("users.joined")," ",new Date(V.created_at).toLocaleDateString()]})]})]},V.user_id))}),re.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Mr,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:o("users.noUsersFound")}),a.jsx("p",{className:"text-muted-foreground",children:o(d?"users.noUsersFoundDesc":"users.noUsersAvailable")})]})]})]}),P==="clients"&&a.jsx("div",{className:"space-y-6",children:a.jsxs(Dr,{className:"flex-1",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:re.map(V=>a.jsxs(xe,{className:"hover:shadow-md transition-shadow",children:[a.jsx(Ie,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(Hr,{className:"h-12 w-12",children:[a.jsx(qr,{src:V.avatar||""}),a.jsx(Kr,{children:H(V,"user_name").charAt(0).toUpperCase()})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx(qe,{className:"text-lg truncate",children:H(V,"user_name")}),a.jsx(Me,{variant:"outline",className:"mt-1",children:o("users.client")})]})]})}),a.jsxs(_e,{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Qw,{className:"h-4 w-4"}),a.jsx("span",{className:"truncate",children:V.user_email})]}),V.client_contact&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx($p,{className:"h-4 w-4"}),a.jsx("span",{children:V.client_contact})]}),V.company_name&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Gw,{className:"h-4 w-4"}),a.jsx("span",{className:"truncate",children:V.company_name})]}),a.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[o("users.joined")," ",new Date(V.created_at).toLocaleDateString()]})]})]},V.user_id))}),re.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(us,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:o("clients.noClientsFound")}),a.jsx("p",{className:"text-muted-foreground",children:o("clients.noClientsYet")})]})]})}),a.jsx(Ot,{open:B,onOpenChange:Q,children:a.jsxs(Nt,{className:"max-w-2xl max-h-[80vh]",children:[a.jsxs(kt,{children:[a.jsx(Ct,{children:o("users.userDetails")}),a.jsx(or,{children:o("users.userDetailsDescription")})]}),R&&a.jsx(Dr,{className:"max-h-[60vh] pr-4",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(Hr,{className:"h-16 w-16",children:[a.jsx(qr,{src:R.avatar||""}),a.jsx(Kr,{className:"text-lg",children:H(R,"user_name").charAt(0).toUpperCase()})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold",children:H(R,"user_name")}),a.jsx(Me,{variant:de(R.user_role),className:"mt-1",children:o(`users.${R.user_role}`)}),R.avatar&&a.jsx("p",{className:"text-xs text-muted-foreground mt-1 break-all",children:R.avatar})]})]}),M?a.jsxs("form",{onSubmit:F,className:"space-y-4",children:[K&&a.jsx(Ti,{variant:"destructive",children:a.jsx(Ri,{children:K})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"editName",children:o("users.fullName")}),a.jsx(je,{id:"editName",value:C.user_name,onChange:V=>L(fe=>({...fe,user_name:V.target.value})),placeholder:o("users.fullName")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"editEmail",children:o("users.email")}),a.jsx(je,{id:"editEmail",type:"email",value:C.user_email,onChange:V=>L(fe=>({...fe,user_email:V.target.value})),placeholder:o("users.email")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"editRole",children:o("users.role")}),a.jsxs(We,{value:C.user_role,onValueChange:V=>L(fe=>({...fe,user_role:V})),children:[a.jsx(Fe,{children:a.jsx(Ve,{})}),a.jsxs($e,{children:[a.jsx(oe,{value:"employee",children:o("users.employee")}),a.jsx(oe,{value:"manager",children:o("users.manager")}),a.jsx(oe,{value:"admin",children:o("users.admin")}),a.jsx(oe,{value:"client",children:o("users.client")})]})]})]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsx(he,{className:"text-sm font-medium",children:o("users.joined")}),a.jsx("p",{className:"text-sm",children:new Date(R.created_at).toLocaleDateString()})]}),R.updated_at&&a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsx(he,{className:"text-sm font-medium",children:o("users.updated")}),a.jsx("p",{className:"text-sm",children:new Date(R.updated_at).toLocaleDateString()})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"editPhone",children:o("users.phone")}),a.jsx(je,{id:"editPhone",type:"tel",value:C.user_phone,onChange:V=>L(fe=>({...fe,user_phone:V.target.value})),placeholder:o("users.phone")})]}),R.client_contact&&a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsx(he,{className:"text-sm font-medium",children:o("users.contact")}),a.jsx("p",{className:"text-sm",children:R.client_contact})]}),R.company_name&&a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsx(he,{className:"text-sm font-medium",children:o("users.company")}),a.jsx("p",{className:"text-sm",children:H(R,"company_name")})]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsx(he,{className:"text-sm font-medium",children:o("users.userId")}),a.jsx("p",{className:"text-sm font-mono text-xs",children:R.user_id})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(q,{type:"button",variant:"outline",onClick:()=>D(!1),children:o("buttons.cancel")}),a.jsx(q,{type:"submit",disabled:I,children:o(I?"buttons.saving":"buttons.save")})]})]}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:o("users.fullName")}),a.jsx("p",{className:"text-sm",children:H(R,"user_name")})]}),a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:o("users.email")}),a.jsx("p",{className:"text-sm",children:R.user_email||o("common.na")})]}),a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:o("users.role")}),a.jsx("p",{className:"text-sm",children:o(`users.${R.user_role}`)})]}),a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:o("users.joined")}),a.jsx("p",{className:"text-sm",children:new Date(R.created_at).toLocaleDateString()})]}),R.updated_at&&a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:o("users.updated")}),a.jsx("p",{className:"text-sm",children:new Date(R.updated_at).toLocaleDateString()})]})]}),a.jsxs("div",{className:"space-y-3",children:[R.user_phone&&a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:o("users.phone")}),a.jsx("p",{className:"text-sm",children:R.user_phone})]}),R.client_contact&&a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:o("users.contact")}),a.jsx("p",{className:"text-sm",children:R.client_contact})]}),R.company_name&&a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:o("users.company")}),a.jsx("p",{className:"text-sm",children:H(R,"company_name")})]}),a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:o("users.userId")}),a.jsx("p",{className:"text-sm font-mono text-xs",children:R.user_id})]})]})]}),R.auth_user_id&&a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:o("users.authUserId")}),a.jsx("p",{className:"text-sm font-mono text-xs break-all",children:R.auth_user_id})]})]})}),a.jsxs(ar,{children:[!M&&(t==null?void 0:t.role)==="admin"&&a.jsx(q,{variant:"outline",onClick:()=>D(!0),children:o("buttons.edit")}),a.jsx(q,{onClick:()=>Q(!1),children:o("buttons.close")})]})]})})]})}function Uz(){const{user:t}=yt(),{t:e}=Xe(),{isRTL:r}=_a(),n=Zr();console.log("Teams Page - isRTL:",r);const[s,o]=f.useState([]),[i,l]=f.useState([]),[c,u]=f.useState({}),[d,h]=f.useState(!0),[m,p]=f.useState(""),[v,g]=f.useState(!1),[w,y]=f.useState(""),[x,_]=f.useState(""),[b,j]=f.useState(null),N=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="manager";(t==null?void 0:t.role)==="employee"||(t==null||t.role),f.useEffect(()=>{E(),T()},[]);const k=D=>{n("/chats",{state:{teamId:D}})},E=async()=>{try{h(!0);const D=await To.getAll(),C=await To.getAllTeamMembers();o(D),u(C)}catch(D){console.error("Failed to load teams:",D)}finally{h(!1)}},T=async()=>{try{const D=await qt.getAll();l(D)}catch(D){console.error("Failed to load users:",D)}},P=async()=>{if(w.trim())try{const D=wn({team_name:w.trim(),team_leader_id:x||null,partner_id:null,auth_user_id:null},{team_name:"team_name"});await To.create(D),y(""),_(""),g(!1),await E()}catch(D){console.error("Failed to create team:",D)}},z=async(D,C)=>{try{await To.addMember(D,C);const L=i.find(I=>I.auth_user_id===C);L&&u(I=>({...I,[D]:[...I[D]||[],L]}))}catch(L){console.error("Failed to add team member:",L)}},B=async(D,C)=>{try{await To.removeMember(D,C),u(L=>({...L,[D]:(L[D]||[]).filter(I=>I.auth_user_id!==C)}))}catch(L){console.error("Failed to remove team member:",L)}},Q=async D=>{try{await To.delete(D),o(C=>C.filter(L=>L.team_id!==D)),u(C=>{const L={...C};return delete L[D],L}),j(null)}catch(C){console.error("Failed to delete team:",C)}},R=s.filter(D=>(H(D,"team_name")||"").toLowerCase().includes(m.toLowerCase())),Y=D=>i.find(C=>C.auth_user_id===D),M=i.filter(D=>D.user_role==="employee");return d?a.jsx("div",{className:"flex items-center justify-center h-full py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):a.jsxs("div",{className:"space-y-6",dir:r?"rtl":"ltr",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:e("teams.title")}),a.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:e("teams.subtitle")})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mr,{className:"h-5 w-5"}),a.jsx("span",{className:"text-sm font-medium",children:e("teams.memberCount_plural",{count:s.length})})]}),N&&a.jsxs(Ot,{open:v,onOpenChange:g,children:[a.jsx(Ml,{asChild:!0,children:a.jsxs(q,{children:[a.jsx(xt,{className:"h-4 w-4 mr-2"}),e("teams.createTeam")]})}),a.jsxs(Nt,{className:"sm:max-w-[425px]",children:[a.jsxs(kt,{children:[a.jsx(Ct,{children:e("teams.createTeamTitle")}),a.jsx(or,{children:e("teams.createTeamDesc")})]}),a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[a.jsx(he,{htmlFor:"team-name",className:"text-right rtl:text-left",children:e("teams.teamName")}),a.jsx(je,{id:"team-name",value:w,onChange:D=>y(D.target.value),className:"col-span-3",placeholder:e("teams.teamNamePlaceholder")})]}),a.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[a.jsx(he,{htmlFor:"team-leader",className:"text-right rtl:text-left",children:e("teams.teamLeader")}),a.jsxs(We,{value:x,onValueChange:_,children:[a.jsx(Fe,{className:"col-span-3",children:a.jsx(Ve,{placeholder:e("teams.selectTeamLeader")})}),a.jsx($e,{children:M.map(D=>a.jsx(oe,{value:D.auth_user_id,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:D.avatar||""}),a.jsx("span",{children:H(D,"user_name")}),a.jsx(Me,{variant:"outline",className:"text-xs",children:D.user_role})]})},D.auth_user_id))})]})]})]}),a.jsx(ar,{children:a.jsx(q,{type:"submit",onClick:P,disabled:!w.trim(),children:e("teams.createTeam")})})]})]})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ba,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(je,{placeholder:e("teams.searchPlaceholder"),value:m,onChange:D=>p(D.target.value),className:"pl-10"})]}),a.jsxs(Dr,{className:"flex-1",dir:r?"rtl":"ltr",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",dir:r?"rtl":"ltr",children:R.map(D=>{const C=Y(D.team_leader_id||""),L=c[D.team_id]||[];return a.jsxs(xe,{className:"hover:shadow-md transition-shadow",children:[a.jsxs(Ie,{className:"pb-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(qe,{className:"text-lg",children:H(D,"team_name")}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(q,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-primary",onClick:()=>k(D.team_id),title:e("teams.chat","Chat"),children:a.jsx(Cc,{className:"h-4 w-4"})}),a.jsx(Me,{variant:"outline",children:e("teams.memberCount_plural",{count:L.length})}),N&&a.jsxs(ka,{children:[a.jsx(Kc,{asChild:!0,children:a.jsx(q,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-red-500 hover:text-red-700",onClick:I=>{I.stopPropagation(),j(D.team_id)},children:a.jsx(wr,{className:"h-3 w-3"})})}),a.jsxs(vs,{onClick:I=>I.stopPropagation(),children:[a.jsxs(xs,{children:[a.jsx(ws,{children:e("teams.deleteTeam")}),a.jsx(_s,{children:e("teams.deleteConfirmation",{name:H(D,"team_name")})})]}),a.jsxs(ys,{children:[a.jsx(js,{children:e("buttons.cancel")}),a.jsx(bs,{onClick:I=>{I.stopPropagation(),Q(D.team_id)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:e("buttons.delete")})]})]})]})]})]}),C&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsxs("span",{children:[e("teams.teamLeader"),":"]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{children:C.avatar||""}),a.jsx("span",{children:H(C,"user_name")})]})]})]}),a.jsxs(_e,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:e("teams.members")}),a.jsxs("div",{className:"space-y-2",children:[L.slice(0,4).map(I=>a.jsxs("div",{className:`flex items-center ${N?"justify-between":"gap-2"} bg-muted/50 p-2 rounded`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(Hr,{className:"h-6 w-6",children:[a.jsx(qr,{src:I.avatar||""}),a.jsx(Kr,{className:"text-xs",children:H(I,"user_name").charAt(0).toUpperCase()})]}),a.jsx("span",{className:"text-sm",children:H(I,"user_name")})]}),N&&a.jsx(q,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-red-500 hover:text-red-700",onClick:()=>B(D.team_id,I.auth_user_id),children:a.jsx(VL,{className:"h-3 w-3"})})]},I.auth_user_id)),L.length>4&&a.jsx("div",{className:"text-xs text-muted-foreground text-center",children:e("teams.moreMembers",{count:L.length-4})}),L.length===0&&a.jsx("div",{className:"text-xs text-muted-foreground text-center py-2",children:e("teams.noMembersYet")})]})]}),N&&a.jsx("div",{children:a.jsxs(We,{onValueChange:I=>{I&&z(D.team_id,I)},children:[a.jsx(Fe,{className:"w-full",children:a.jsx(Ve,{placeholder:e("teams.addMember")})}),a.jsx($e,{children:i.filter(I=>I.auth_user_id&&I.user_role==="employee"&&!L.some(W=>W.auth_user_id===I.auth_user_id)).map(I=>a.jsx(oe,{value:I.auth_user_id,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:I.avatar||""}),a.jsx("span",{children:H(I,"user_name")}),a.jsx(Me,{variant:"outline",className:"text-xs",children:I.user_role})]})},I.auth_user_id))})]})}),a.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[e("teams.created")," ",D.created_at?new Date(D.created_at).toLocaleDateString():"N/A"]})]})]},D.team_id)})}),R.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Mr,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:e(m?"teams.noTeamsFound":"teams.noTeamsYet")}),a.jsx("p",{className:"text-muted-foreground mb-4",children:e(m?"tickets.noTicketsFoundDesc":"teams.createFirstTeam")}),!m&&N&&a.jsxs(q,{onClick:()=>g(!0),children:[a.jsx(xt,{className:"h-4 w-4 mr-2"}),e("teams.createFirstTeam")]})]})]})]})}function Bz({rooms:t,selectedRoom:e,onSelectRoom:r,currentUser:n,onNewChannel:s,onNewDM:o,className:i}){const{t:l}=Xe(),[c,u]=f.useState(""),d=t.filter(g=>{const w=g.is_private&&H(g.other_user||{},"user_name")||g.room_name;return w==null?void 0:w.toLowerCase().includes(c.toLowerCase())}),h=d.filter(g=>!g.is_private&&!g.team_id),m=d.filter(g=>g.is_private),p=d.filter(g=>g.team_id),v=g=>{var j;const w=(e==null?void 0:e.room_id)===g.room_id,y=g.is_private,x=y&&H(g.other_user||{},"user_name")||g.room_name,_=y?(j=g.other_user)==null?void 0:j.avatar:null,b=(x==null?void 0:x.charAt(0).toUpperCase())||"?";return a.jsxs("button",{onClick:()=>r(g),className:Z("w-full flex items-center gap-2 px-2 py-1.5 rounded-md transition-colors text-sm mb-0.5",w?"bg-primary/10 text-primary font-medium":"text-muted-foreground hover:bg-muted/50 hover:text-foreground"),children:[a.jsxs("div",{className:"relative flex-shrink-0",children:[y?a.jsxs(Hr,{className:"h-6 w-6",children:[a.jsx(qr,{src:_}),a.jsx(Kr,{className:"text-[10px]",children:b})]}):g.team_id?a.jsx("div",{className:"h-6 w-6 rounded bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:a.jsx(Mr,{className:"h-3.5 w-3.5"})}):a.jsx("div",{className:"h-6 w-6 rounded bg-muted flex items-center justify-center",children:a.jsx(d1,{className:"h-3.5 w-3.5"})}),y&&a.jsx("span",{className:"absolute -bottom-0.5 -right-0.5 h-2 w-2 rounded-full bg-green-500 border-2 border-background"})]}),a.jsx("span",{className:"truncate flex-1 text-left",children:x}),g.unreadCount&&g.unreadCount>0?a.jsx(Me,{variant:"destructive",className:"h-5 min-w-[1.25rem] px-1 flex items-center justify-center text-[10px]",children:g.unreadCount}):null]},g.room_id)};return a.jsxs("div",{className:Z("flex flex-col h-screen bg-background border-r",i),children:[a.jsxs("div",{className:"p-3 border-b",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h2",{className:"font-semibold text-lg",children:l("chat.title","Messages")}),a.jsx(q,{variant:"ghost",size:"icon",className:"h-8 w-8",children:a.jsx(SL,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ba,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(je,{placeholder:l("common.search","Jump to..."),value:c,onChange:g=>u(g.target.value),className:"pl-9 h-8 bg-muted/50 border-0"})]})]}),a.jsxs(Dr,{className:"flex-1 px-2 py-3",children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between px-2 mb-1 group",children:[a.jsx("h3",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:l("chat.channels","Channels")}),((n==null?void 0:n.role)==="admin"||(n==null?void 0:n.role)==="manager")&&a.jsx(q,{variant:"ghost",size:"icon",className:"h-4 w-4 hover:bg-muted",onClick:s,title:l("chat.createChannel","Create Channel"),children:a.jsx(xt,{className:"h-3 w-3"})})]}),a.jsxs("div",{className:"space-y-0.5",children:[h.map(v),h.length===0&&a.jsx("div",{className:"px-2 py-1 text-sm text-muted-foreground italic",children:l("chat.noChannels","No channels")})]})]}),p.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"flex items-center justify-between px-2 mb-1",children:a.jsx("h3",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:l("chat.teams","Teams")})}),a.jsx("div",{className:"space-y-0.5",children:p.map(v)})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between px-2 mb-1 group",children:[a.jsx("h3",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:l("chat.directMessages","Direct Messages")}),a.jsx(q,{variant:"ghost",size:"icon",className:"h-4 w-4 opacity-0 group-hover:opacity-100 transition-opacity",onClick:o,children:a.jsx(xt,{className:"h-3 w-3"})})]}),a.jsxs("div",{className:"space-y-0.5",children:[m.map(v),m.length===0&&a.jsx("div",{className:"px-2 py-1 text-sm text-muted-foreground italic",children:l("chat.noMessages","No messages")})]})]})]})]})}function zz({room:t,messages:e,currentUser:r,onSendMessage:n,onBack:s,loading:o,onLoadMore:i,hasMoreMessages:l,isLoadingMore:c,onEditMessage:u,onDeleteMessage:d,className:h}){var te;const{t:m}=Xe(),[p,v]=f.useState(""),g=f.useRef(null),[w,y]=f.useState(!1),[x,_]=f.useState(null),[b,j]=f.useState(""),[N,k]=f.useState(!1),E=f.useRef(null);f.useEffect(()=>{if(g.current&&!c){const O=g.current.querySelector("[data-radix-scroll-area-viewport]");O&&(O.scrollTop=O.scrollHeight)}},[e,c]);const T=O=>{const re=O.target;if(!re)return;const ae=re.scrollTop<100;y(ae),ae&&l&&i&&!c&&i()};f.useEffect(()=>{var re;const O=(re=g.current)==null?void 0:re.querySelector("[data-radix-scroll-area-viewport]");if(O)return O.addEventListener("scroll",T),()=>O.removeEventListener("scroll",T)},[l,c,i]);const P=O=>{_(O.message_id),j(O.content)},z=()=>{_(null),j("")},B=()=>{x&&b.trim()&&u&&(u(x,b),_(null),j(""))},Q=()=>{p.trim()&&(n(p),v(""))},R=O=>{O.key==="Enter"&&!O.shiftKey&&(O.preventDefault(),Q())},Y=async O=>{var de;const re=(de=O.target.files)==null?void 0:de[0];if(!(!re||!n))try{k(!0);const ae=await messageService.uploadAttachment(re),Ee=re.type.startsWith("image/")?`![${re.name}](${ae})`:`[${re.name}](${ae})`;n(Ee)}catch(ae){console.error("Failed to upload file:",ae),alert(m("chat.uploadError","Failed to upload file"))}finally{k(!1),E.current&&(E.current.value="")}},M=()=>{var O;(O=E.current)==null||O.click()},D=O=>{const re=/!\[(.*?)\]\((.*?)\)/g,de=/\[(.*?)\]\((.*?)\)/g,ae=re.exec(O);if(ae)return a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("img",{src:ae[2],alt:ae[1],className:"max-w-full rounded-lg max-h-[300px] object-cover cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(ae[2],"_blank")}),O.replace(ae[0],"").trim()&&a.jsx("span",{children:O.replace(ae[0],"").trim()})]});const ye=de.exec(O);return ye?a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("a",{href:ye[2],target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-500 hover:underline bg-background/50 p-2 rounded",children:[a.jsx(Xw,{className:"h-4 w-4"}),ye[1]]}),O.replace(ye[0],"").trim()&&a.jsx("span",{children:O.replace(ye[0],"").trim()})]}):O};if(o)return a.jsx("div",{className:Z("flex items-center justify-center h-full bg-background",h),children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});if(!t)return a.jsxs("div",{className:Z("flex flex-col items-center justify-center h-full bg-background text-muted-foreground p-4 text-center",h),children:[a.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center mb-4",children:a.jsx(Cc,{className:"h-8 w-8"})}),a.jsx("h3",{className:"font-semibold text-lg mb-2",children:m("chat.welcome","Welcome to Chat")}),a.jsx("p",{className:"max-w-xs",children:m("chat.selectRoomDesc","Select a channel or direct message to start chatting.")})]});const C=t.is_private,L=C&&H(t.other_user||{},"user_name")||t.room_name,I=C?(te=t.other_user)==null?void 0:te.avatar:null,W=(L==null?void 0:L.charAt(0).toUpperCase())||"?",K=e.reduce((O,re)=>{const de=new Date(re.created_at).toLocaleDateString();return O[de]||(O[de]=[]),O[de].push(re),O},{});return a.jsxs("div",{className:Z("flex flex-col h-full bg-background",h),children:[a.jsxs("div",{className:"h-16 border-b flex items-center justify-between px-4 flex-shrink-0 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 sticky top-0 z-10",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[s&&a.jsx(q,{variant:"ghost",size:"icon",className:"md:hidden -ml-2",onClick:s,children:a.jsx(i1,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex items-center gap-3",children:[C?a.jsxs(Hr,{className:"h-9 w-9",children:[a.jsx(qr,{src:I}),a.jsx(Kr,{children:W})]}):a.jsx("div",{className:"h-9 w-9 rounded-md bg-muted flex items-center justify-center",children:t.team_id?a.jsx(Mr,{className:"h-5 w-5"}):a.jsx(d1,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsxs("h2",{className:"font-semibold text-sm flex items-center gap-2",children:[L,C&&a.jsx("span",{className:"h-2 w-2 rounded-full bg-green-500"})]}),!C&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:[m("chat.membersCount",{count:3})," "]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(q,{variant:"ghost",size:"icon",className:"text-muted-foreground",children:a.jsx($p,{className:"h-5 w-5"})}),a.jsx(q,{variant:"ghost",size:"icon",className:"text-muted-foreground",children:a.jsx(qL,{className:"h-5 w-5"})}),a.jsx(q,{variant:"ghost",size:"icon",className:"text-muted-foreground",children:a.jsx(EL,{className:"h-5 w-5"})})]})]}),a.jsx(Dr,{className:"flex-1 p-4",ref:g,children:a.jsxs("div",{className:"space-y-6 pb-4",children:[c&&a.jsx("div",{className:"flex justify-center py-4",children:a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}),!l&&e.length>10&&a.jsx("div",{className:"text-center py-4",children:a.jsx("p",{className:"text-xs text-muted-foreground",children:m("chat.beginningOfConversation","Beginning of conversation")})}),Object.entries(K).map(([O,re])=>a.jsxs("div",{children:[a.jsxs("div",{className:"relative flex items-center justify-center mb-6",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("span",{className:"w-full border-t"})}),a.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:a.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:O===new Date().toLocaleDateString()?m("common.today","Today"):O})})]}),a.jsx("div",{className:"space-y-4",children:re.map((de,ae)=>{var V;const ye=de.auth_user_id===(r==null?void 0:r.id),Ee=ae===0||re[ae-1].auth_user_id!==de.auth_user_id,F=de.sender,se=x===de.message_id;return a.jsxs("div",{className:Z("flex gap-3 group",ye?"flex-row-reverse":""),children:[Ee?a.jsxs(Hr,{className:"h-8 w-8 mt-0.5 flex-shrink-0",children:[a.jsx(qr,{src:F==null?void 0:F.avatar}),a.jsx(Kr,{children:((V=F==null?void 0:F.user_name)==null?void 0:V.charAt(0))||"?"})]}):a.jsx("div",{className:"w-8 flex-shrink-0"}),a.jsxs("div",{className:Z("flex flex-col max-w-[75%]",ye?"items-end":"items-start"),children:[Ee&&a.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-semibold",children:F==null?void 0:F.user_name}),a.jsx("span",{className:"text-[10px] text-muted-foreground",children:xn(new Date(de.created_at),"h:mm a")})]}),a.jsx("div",{className:Z("px-4 py-2 rounded-2xl text-sm shadow-sm relative group",ye?"bg-primary text-primary-foreground rounded-tr-none":"bg-muted text-foreground rounded-tl-none",se?"w-full min-w-[200px]":""),children:se?a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("textarea",{value:b,onChange:fe=>j(fe.target.value),className:"w-full bg-transparent border rounded p-1 text-foreground min-h-[60px]",autoFocus:!0}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(q,{size:"sm",variant:"ghost",onClick:z,className:"h-6 px-2 text-xs",children:m("common.cancel","Cancel")}),a.jsx(q,{size:"sm",variant:"secondary",onClick:B,className:"h-6 px-2 text-xs",children:m("common.save","Save")})]})]}):a.jsxs(a.Fragment,{children:[D(de.content),ye&&!se&&a.jsxs("div",{className:"absolute top-0 right-0 -mt-2 -mr-2 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1 bg-background rounded-md shadow-sm border p-0.5",children:[a.jsxs(q,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-primary",onClick:()=>P(de),children:[a.jsx("span",{className:"sr-only",children:"Edit"}),a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3",children:[a.jsx("path",{d:"M5.433 13.917l1.262-3.155A4 4 0 017.58 9.42l6.92-6.918a2.121 2.121 0 013 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 01-.65-.65z"}),a.jsx("path",{d:"M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0010 3H4.75A2.75 2.75 0 002 5.75v9.5A2.75 2.75 0 004.75 18h9.5A2.75 2.75 0 0017 15.25V10a.75.75 0 00-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5z"})]})]}),a.jsxs(q,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-destructive",onClick:()=>d&&d(de.message_id),children:[a.jsx("span",{className:"sr-only",children:"Delete"}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3",children:a.jsx("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.52.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z",clipRule:"evenodd"})})]})]})]})})]})]},de.message_id)})})]},O))]})}),a.jsxs("div",{className:"p-4 bg-background border-t",children:[a.jsxs("div",{className:"flex items-end gap-2 bg-muted/50 p-2 rounded-xl border focus-within:border-primary/50 focus-within:ring-1 focus-within:ring-primary/20 transition-all",children:[a.jsx(q,{variant:"ghost",size:"icon",className:"h-9 w-9 text-muted-foreground hover:text-primary flex-shrink-0",onClick:M,disabled:N,children:N?a.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}):a.jsx(Xw,{className:"h-5 w-5"})}),a.jsx("input",{type:"file",ref:E,className:"hidden",onChange:Y,accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx,.txt"}),a.jsx("textarea",{value:p,onChange:O=>v(O.target.value),onKeyDown:R,placeholder:m("chat.typeMessage","Type a message..."),className:"flex-1 bg-transparent border-0 focus:ring-0 resize-none max-h-32 min-h-[36px] py-2 text-sm",rows:1,style:{height:"auto",minHeight:"36px"},onInput:O=>{const re=O.target;re.style.height="auto",re.style.height=`${Math.min(re.scrollHeight,128)}px`}}),a.jsxs("div",{className:"flex items-center gap-1 pb-1",children:[a.jsx(q,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-primary hidden sm:flex",children:a.jsx(LL,{className:"h-5 w-5"})}),a.jsx(q,{size:"icon",className:Z("h-8 w-8 transition-all",p.trim()?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"),onClick:Q,disabled:!p.trim()&&!N,children:a.jsx(Sv,{className:"h-4 w-4"})})]})]}),a.jsx("div",{className:"flex justify-between items-center mt-2 px-1",children:a.jsx("p",{className:"text-[10px] text-muted-foreground"})})]})]})}function Wz({open:t,onOpenChange:e,onSelectUser:r,currentUserId:n}){const{t:s}=Xe(),[o,i]=f.useState([]),[l,c]=f.useState(""),[u,d]=f.useState(!1);f.useEffect(()=>{t&&h()},[t]);const h=async()=>{try{d(!0);const p=await qt.getAll();i(p.filter(v=>v.auth_user_id!==n))}catch(p){console.error("Failed to load users:",p)}finally{d(!1)}},m=o.filter(p=>{var v,g;return((v=p.user_name)==null?void 0:v.toLowerCase().includes(l.toLowerCase()))||((g=p.user_email)==null?void 0:g.toLowerCase().includes(l.toLowerCase()))});return a.jsx(Ot,{open:t,onOpenChange:e,children:a.jsxs(Nt,{className:"sm:max-w-[425px]",children:[a.jsx(kt,{children:a.jsx(Ct,{children:s("chat.newDirectMessage","New Direct Message")})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(ba,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),a.jsx(je,{placeholder:s("chat.searchUsers","Search users..."),value:l,onChange:p=>c(p.target.value),className:"pl-8"})]}),a.jsx(Dr,{className:"h-[300px]",children:u?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):m.length===0?a.jsx("div",{className:"text-center text-muted-foreground py-8",children:s("chat.noUsersFound","No users found")}):a.jsx("div",{className:"space-y-1",children:m.map(p=>{var v;return a.jsxs("button",{onClick:()=>{r(p),e(!1)},className:"w-full flex items-center gap-3 p-2 hover:bg-muted rounded-md transition-colors text-left",children:[a.jsxs(Hr,{children:[a.jsx(qr,{src:p.avatar}),a.jsx(Kr,{children:((v=p.user_name)==null?void 0:v.charAt(0))||"?"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm",children:p.user_name}),a.jsx("p",{className:"text-xs text-muted-foreground",children:p.user_email})]})]},p.user_id)})})})]})]})})}var ef="Switch",[Vz,RW]=jr(ef),[Hz,qz]=Vz(ef),BE=f.forwardRef((t,e)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[m,p]=f.useState(null),v=Ae(e,_=>p(_)),g=f.useRef(!1),w=m?d||!!m.closest("form"):!0,[y,x]=fa({prop:s,defaultProp:o??!1,onChange:u,caller:ef});return a.jsxs(Hz,{scope:r,checked:y,disabled:l,children:[a.jsx(be.button,{type:"button",role:"switch","aria-checked":y,"aria-required":i,"data-state":HE(y),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:v,onClick:ue(t.onClick,_=>{x(b=>!b),w&&(g.current=_.isPropagationStopped(),g.current||_.stopPropagation())})}),w&&a.jsx(VE,{control:m,bubbles:!g.current,name:n,value:c,checked:y,required:i,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});BE.displayName=ef;var zE="SwitchThumb",WE=f.forwardRef((t,e)=>{const{__scopeSwitch:r,...n}=t,s=qz(zE,r);return a.jsx(be.span,{"data-state":HE(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:e})});WE.displayName=zE;var Kz="SwitchBubbleInput",VE=f.forwardRef(({__scopeSwitch:t,control:e,checked:r,bubbles:n=!0,...s},o)=>{const i=f.useRef(null),l=Ae(i,o),c=Y1(r),u=$1(e);return f.useEffect(()=>{const d=i.current;if(!d)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&p){const v=new Event("click",{bubbles:n});p.call(d,r),d.dispatchEvent(v)}},[c,r,n]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});VE.displayName=Kz;function HE(t){return t?"checked":"unchecked"}var qE=BE,Gz=WE;const KE=f.forwardRef(({className:t,...e},r)=>a.jsx(qE,{className:Z("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:r,children:a.jsx(Gz,{className:Z("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));KE.displayName=qE.displayName;function Yz({open:t,onOpenChange:e,onCreate:r}){const{t:n}=Xe(),[s,o]=f.useState(""),[i,l]=f.useState(!1),[c,u]=f.useState(!1),d=async h=>{if(h.preventDefault(),!!s.trim())try{u(!0),await r(s,i),e(!1),o(""),l(!1)}catch(m){console.error("Failed to create channel:",m)}finally{u(!1)}};return a.jsx(Ot,{open:t,onOpenChange:e,children:a.jsxs(Nt,{children:[a.jsx(kt,{children:a.jsx(Ct,{children:n("chat.createRoomTitle","Create New Room")})}),a.jsxs("form",{onSubmit:d,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"name",children:n("chat.roomName","Room Name")}),a.jsx(je,{id:"name",value:s,onChange:h=>o(h.target.value),placeholder:n("chat.roomNamePlaceholder","Enter room name"),disabled:c})]}),a.jsxs("div",{className:"flex items-center justify-between space-x-2",children:[a.jsxs(he,{htmlFor:"private",className:"flex flex-col space-y-1",children:[a.jsx("span",{children:n("chat.privateRoom","Private Room")}),a.jsx("span",{className:"font-normal text-xs text-muted-foreground",children:n("chat.privateRoomDesc","Only invited members can view this room.")})]}),a.jsx(KE,{id:"private",checked:i,onCheckedChange:l,disabled:c})]}),a.jsxs(ar,{children:[a.jsx(q,{type:"button",variant:"outline",onClick:()=>e(!1),disabled:c,children:n("common.cancel","Cancel")}),a.jsx(q,{type:"submit",disabled:!s.trim()||c,children:c?n("common.creating","Creating..."):n("chat.createRoom","Create Room")})]})]})]})})}function Qz(){const{user:t}=yt(),{t:e}=Xe(),[r,n]=f.useState([]),[s,o]=f.useState(null),[i,l]=f.useState([]),[c,u]=f.useState(!0),[d,h]=f.useState(!1),[m,p]=f.useState(!0),[v,g]=f.useState(!0),[w,y]=f.useState(!1),[x,_]=f.useState([]),[b,j]=f.useState(!1),[N,k]=f.useState(!1),E=f.useRef(!1),T=f.useRef(null);f.useRef(null);const P=f.useRef(null);f.useEffect(()=>{const I=()=>{const W=window.innerWidth<768;h(W),W||p(!0)};return I(),window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)},[]),f.useEffect(()=>{t&&!E.current&&Q()},[t]),f.useEffect(()=>{var W;const I=(W=window.history.state)==null?void 0:W.usr;if(I!=null&&I.teamId&&r.length>0){const K=r.find(te=>te.team_id===I.teamId);K&&o(K)}},[r]),f.useEffect(()=>{s&&(T.current!==s.room_id&&(g(!0),y(!1),R(s.room_id),t&&(an.markAsRead(s.room_id,t.id),n(I=>I.map(W=>W.room_id===s.room_id?{...W,unreadCount:0}:W)))),d&&p(!1))},[s,d,t]),f.useEffect(()=>{if(!t)return;P.current&&J.removeChannel(P.current);const I=J.channel(`room:${(s==null?void 0:s.room_id)||"global"}`);return P.current=I,I.on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},async W=>{const K=W.new,te={...K};K.auth_user_id===t.id&&(te.sender=t.profile),(s==null?void 0:s.room_id)===K.room_id&&(l(O=>[...O,te]),document.visibilityState==="visible"&&await an.markAsRead(K.room_id,t.id)),n(O=>O.map(re=>re.room_id===K.room_id?{...re,lastMessage:K,unreadCount:(s==null?void 0:s.room_id)===K.room_id?0:(re.unreadCount||0)+1}:re))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages"},W=>{const K=W.new;l(te=>te.map(O=>O.message_id===K.message_id?{...O,...K,sender:O.sender}:O)),n(te=>te.map(O=>{var re;return((re=O.lastMessage)==null?void 0:re.message_id)===K.message_id?{...O,lastMessage:{...O.lastMessage,...K}}:O}))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"messages"},W=>{const K=W.old.message_id;l(te=>te.filter(O=>O.message_id!==K)),n(te=>te.map(O=>{var re;return((re=O.lastMessage)==null?void 0:re.message_id)===K?{...O,lastMessage:void 0}:O}))}).on("broadcast",{event:"typing"},W=>{W.payload.roomId===(s==null?void 0:s.room_id)&&W.payload.userId!==t.id&&(_(K=>K.includes(W.payload.userName)?K:[...K,W.payload.userName]),setTimeout(()=>{_(K=>K.filter(te=>te!==W.payload.userName))},3e3))}).subscribe(async W=>{W==="SUBSCRIBED"&&await I.track({user_id:t.id,online_at:new Date().toISOString()})}),()=>{P.current&&J.removeChannel(P.current)}},[t,s]);const z=async(I,W)=>{try{await Ko.update(I,W)}catch(K){console.error("Failed to edit message:",K)}},B=async I=>{if(confirm(e("chat.deleteConfirm","Are you sure you want to delete this message?")))try{await Ko.delete(I)}catch(W){console.error("Failed to delete message:",W)}},Q=async()=>{try{u(!0);const I=await an.getUserRooms(t==null?void 0:t.id),W=await Promise.all(I.map(async K=>{if(K.is_private){const O=(await an.getRoomMembers(K.room_id)).find(re=>re.auth_user_id!==(t==null?void 0:t.id));return{...K,other_user:O}}return K}));n(W),E.current=!0}catch(I){console.error("Failed to load rooms:",I)}finally{u(!1)}},R=async(I,W=!1)=>{try{W&&y(!0);const K=10,te=W&&i.length>0?i[0].created_at:void 0,O=await Ko.getByRoom(I,{limit:K,before:te});W?(l(re=>[...O,...re]),g(O.length===K)):(l(O),g(O.length===K),T.current=I)}catch(K){console.error("Failed to load messages:",K)}finally{W&&y(!1)}},Y=async()=>{!s||w||!v||await R(s.room_id,!0)},M=async I=>{if(!(!s||!t))try{await Ko.create({room_id:s.room_id,auth_user_id:t.id,content:I,metadata:{}}),P.current}catch(W){console.error("Failed to send message:",W)}},D=()=>{p(!0)},C=async(I,W)=>{if(t)try{const K=await an.createRoom({name:I,is_private:W,created_by:t.profile.user_id||0,auth_user_id:t.id});await an.addMember(K.room_id,t.id),await Q();const te={...K};o(te)}catch(K){console.error("Failed to create channel:",K)}},L=async I=>{if(!t)return;const W=r.find(K=>{var te;return K.is_private&&((te=K.other_user)==null?void 0:te.auth_user_id)===I.auth_user_id});if(W){o(W);return}try{const K=await an.createRoom({name:"DM",is_private:!0,created_by:t.profile.user_id||0,auth_user_id:t.id});await an.addMember(K.room_id,t.id),await an.addMember(K.room_id,I.auth_user_id),await Q();const te={...K,other_user:I};o(te)}catch(K){console.error("Failed to create DM:",K)}};return a.jsxs("div",{className:"h-full flex overflow-hidden bg-background",children:[a.jsx("div",{className:Z("w-full md:w-80 flex-shrink-0 transition-all duration-300 ease-in-out absolute md:relative z-20 h-full bg-background border-r",m?"translate-x-0":"-translate-x-full md:translate-x-0",d&&!m&&"hidden"),children:a.jsx(Bz,{rooms:r,selectedRoom:s,onSelectRoom:o,currentUser:t,onNewChannel:()=>j(!0),onNewDM:()=>k(!0)})}),a.jsx("div",{className:Z("flex-1 flex flex-col min-w-0 bg-background transition-all duration-300",d&&m?"hidden":"flex"),children:a.jsx(zz,{room:s,messages:i,currentUser:t,onSendMessage:M,onBack:D,loading:c,onLoadMore:Y,hasMoreMessages:v,isLoadingMore:w,onEditMessage:z,onDeleteMessage:B})}),a.jsx(Yz,{open:b,onOpenChange:j,onCreate:C}),a.jsx(Wz,{open:N,onOpenChange:k,onSelectUser:L,currentUserId:t==null?void 0:t.id})]})}function Jz(){const{user:t}=yt(),{t:e}=Xe(),[r,n]=f.useState([]),[s,o]=f.useState(null),[i,l]=f.useState([]),[c,u]=f.useState([]),[d,h]=f.useState(""),[m,p]=f.useState(!0),[v,g]=f.useState(!1),[w,y]=f.useState(null),[x,_]=f.useState(null),[b,j]=f.useState(!1),[N,k]=f.useState(!0),E=f.useRef(!1),T=f.useRef(null),P=f.useRef(null);f.useEffect(()=>{t&&!E.current&&z()},[t]),f.useEffect(()=>{s&&(P.current!==s.room_id&&Q(),T.current!==s.room_id&&B())},[s]),f.useEffect(()=>{s&&(async()=>{try{await J.realtime.setAuth(await Sr.getFreshJwt());const D=`room:${s.room_id}:messages`,C=J.channel(D,{config:{broadcast:{self:!0,ack:!0},private:!0}});return C.on("broadcast",{event:"*"},L=>{var W;const I=(W=L.payload)==null?void 0:W.record;I&&I.message_id&&l(K=>K.some(O=>O.message_id===I.message_id)?K:[...K.filter(O=>!(O.message_id.startsWith("temp-")&&O.auth_user_id===I.auth_user_id&&O.content===I.content)),I])}),await C.subscribe(),()=>{C.unsubscribe()}}catch(D){console.error("Failed to setup realtime:",D)}})()},[s]),f.useEffect(()=>{g(!1),y(null),_(null),E.current=!1,T.current=null,P.current=null},[t]);const z=async()=>{if(!E.current)try{p(!0);const M=await an.getUserRooms((t==null?void 0:t.id)||"");n(M),M.length>0&&o(M[0]),g(!0),E.current=!0}catch(M){console.error("Failed to load rooms:",M)}finally{p(!1)}},B=async()=>{if(!(!s||T.current===s.room_id))try{const M=await Ko.getByRoom(s.room_id);l(M),y(s.room_id),T.current=s.room_id}catch(M){console.error("Failed to load messages:",M)}},Q=async()=>{if(!(!s||P.current===s.room_id))try{const M=await an.getRoomMembers(s.room_id);u(M),_(s.room_id),P.current=s.room_id}catch(M){console.error("Failed to load room members:",M)}},R=async()=>{if(!d.trim()||!s||!t)return;const M=d.trim(),D={message_id:`temp-${Date.now()}`,room_id:s.room_id,auth_user_id:t.id,content:M,created_at:new Date().toISOString(),metadata:null};l(C=>[...C,D]),h("");try{await Ko.create({room_id:s.room_id,auth_user_id:t.id,content:M,metadata:null})}catch(C){console.error("Failed to send message:",C),l(L=>L.filter(I=>I.message_id!==D.message_id)),h(M)}},Y=M=>new Date(M).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return m?a.jsx("div",{className:"flex items-center justify-center h-full py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):a.jsxs("div",{className:"flex flex-col md:flex-row h-[calc(100vh-120px)] gap-4 sm:gap-6 pb-6",children:[a.jsxs("div",{className:`flex-col border rounded-lg ${N?"flex w-80":"hidden"} lg:flex lg:w-80`,children:[a.jsx("div",{className:"p-4 border-b",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h2",{className:"text-xl font-semibold",children:e("chats.myChatRooms")})})}),a.jsx(Dr,{className:"flex-1 p-4",children:a.jsx("div",{className:"space-y-2",children:r.map(M=>a.jsx(xe,{className:`cursor-pointer transition-colors ${(s==null?void 0:s.room_id)===M.room_id?"bg-primary/10 border-primary":""}`,onClick:()=>o(M),children:a.jsx(_e,{className:"p-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Cu,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium truncate",children:M.room_name||`Room ${M.room_id.slice(0,8)}`}),a.jsx("p",{className:"text-xs text-muted-foreground",children:M.is_private?e("chats.private"):e("chats.publicRoom")})]})]})})},M.room_id))})})]}),s&&a.jsx("div",{className:"md:hidden mb-4",children:a.jsxs($h,{open:b,onOpenChange:j,children:[a.jsx(K5,{asChild:!0,children:a.jsxs(q,{variant:"outline",className:"w-full justify-between",children:[a.jsx("span",{className:"truncate",children:s.room_name||`Room ${s.room_id.slice(0,8)}`}),a.jsx(Cu,{className:"h-4 w-4 ml-2"})]})}),a.jsx(zc,{side:"left",className:"w-80 p-4",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:e("chats.myChatRooms")}),a.jsx(Dr,{className:"h-[60vh]",children:a.jsx("div",{className:"space-y-2",children:r.map(M=>a.jsx(xe,{className:`cursor-pointer transition-colors ${(s==null?void 0:s.room_id)===M.room_id?"bg-primary/10 border-primary":""}`,onClick:()=>{o(M),j(!1)},children:a.jsx(_e,{className:"p-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Cu,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium truncate",children:M.room_name||`Room ${M.room_id.slice(0,8)}`}),a.jsx("p",{className:"text-xs text-muted-foreground",children:M.is_private?e("chats.private"):e("chats.publicRoom")})]})]})})},M.room_id))})})]})})]})}),a.jsx("div",{className:"flex-1 flex flex-col",children:s?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 pb-4 border-b",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold",children:s.room_name||`Room ${s.room_id.slice(0,8)}`}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Mr,{className:"h-4 w-4"}),a.jsxs("span",{children:[c.length," ",e("chats.members")]}),s.is_private&&a.jsx("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:e("chats.private")})]})]}),a.jsx(q,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-all",onClick:()=>k(!N),children:a.jsx(AL,{className:"h-4 w-4"})})]}),a.jsx(Dr,{className:"flex-1 mb-4",children:a.jsx("div",{className:"space-y-4 p-4",children:x===s.room_id&&i.map(M=>{var C,L,I,W;let D;return M.auth_user_id===(t==null?void 0:t.id)?D={auth_user_id:t.id,user_name:((C=t.profile)==null?void 0:C.user_name)||t.email||e("chats.you"),avatar:(L=t.profile)==null?void 0:L.avatar,user_id:((I=t.profile)==null?void 0:I.user_id)||0,user_email:t.email}:D=c.find(K=>K.auth_user_id===M.auth_user_id),D||(D={auth_user_id:M.auth_user_id,user_name:e("chats.unknownUser"),avatar:"",user_id:0}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs(Hr,{className:"h-8 w-8",children:[a.jsx(qr,{src:D.avatar||""}),a.jsx(Kr,{children:((W=D.user_name)==null?void 0:W.charAt(0))||"?"})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"font-medium text-sm",children:D.user_name}),a.jsx("span",{className:"text-xs text-muted-foreground",children:Y(M.created_at)})]}),a.jsx("p",{className:"text-sm",children:M.content})]})]},M.message_id)})})}),a.jsxs("div",{className:"flex gap-2 p-4 border-t",children:[a.jsx(je,{value:d,onChange:M=>h(M.target.value),placeholder:e("chats.typeMessage"),onKeyPress:M=>M.key==="Enter"&&R(),className:"flex-1"}),a.jsx(q,{onClick:R,disabled:!d.trim(),children:a.jsx(Sv,{className:"h-4 w-4"})})]})]}):a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-muted-foreground",children:[a.jsx(Cu,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:e("chats.selectRoom")})]})})})]})}function Xz(){const[t,e]=f.useState(null),[r,n]=f.useState([]),[s,o]=f.useState([]),[i,l]=f.useState([]),[c,u]=f.useState(!0),{user:d,signOut:h}=yt();f.useEffect(()=>{(async()=>{if(d!=null&&d.id)try{u(!0);const v=await On.getByUserAuthId(d.id);n(v)}catch(v){console.error("Failed to fetch user projects:",v)}finally{u(!1)}})()},[d==null?void 0:d.id]),f.useEffect(()=>{(async()=>{if(t)try{const[v,g]=await Promise.all([Js.getAll(),eg.getByTask(0)]),w=v.filter(y=>!0);o(w),l(g)}catch(v){console.error("Failed to fetch project data:",v)}})()},[t]);const m=t?r.find(p=>p.project_id===t):null;return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx("header",{className:"border-b bg-card",children:a.jsxs("div",{className:"container mx-auto px-6 py-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsx("h1",{className:"text-xl font-bold",children:"Client Portal"})]}),a.jsxs(q,{variant:"ghost",size:"sm",children:[a.jsx(RL,{className:"h-4 w-4 mr-2"}),"Logout"]})]})}),a.jsxs("div",{className:"container mx-auto px-6 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold",children:["Hello, ",H((d==null?void 0:d.profile)||{},"user_name"),"! "]}),a.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:"Here's your project progress"})]}),m?a.jsxs("div",{children:[a.jsx(q,{variant:"ghost",className:"mb-4",onClick:()=>e(null),children:" Back to Projects"}),a.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs(xe,{children:[a.jsx(Ie,{children:a.jsx(qe,{children:m.project_name})}),a.jsxs(_e,{children:[a.jsx("p",{className:"text-muted-foreground",children:m.project_description||"No description available"}),a.jsxs("div",{className:"mt-4",children:[a.jsx(fs,{value:m.progress||0,className:"h-3"}),a.jsxs("div",{className:"text-right mt-2 text-sm font-semibold",children:[m.progress||0,"% Complete"]})]})]})]}),a.jsxs(Gc,{defaultValue:"tasks",children:[a.jsxs(Xi,{children:[a.jsx(Yr,{value:"tasks",children:"Tasks"}),a.jsx(Yr,{value:"images",children:"Gallery"}),a.jsx(Yr,{value:"comments",children:"Comments"})]}),a.jsx(Qr,{value:"tasks",className:"space-y-3",children:s.filter(p=>p.stage_id!==null).map(p=>{var v;return a.jsx(xe,{children:a.jsx(_e,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:p.task_name}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:p.description||"No description"})]}),a.jsxs(Me,{variant:p.task_status==="completed"?"default":"secondary",children:[p.task_status==="completed"?"":""," ",((v=p.task_status)==null?void 0:v.replace("_"," "))||"pending"]})]})})},p.task_id)})}),a.jsx(Qr,{value:"images",children:a.jsx(xe,{children:a.jsx(_e,{className:"pt-6",children:a.jsx("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(p=>a.jsx("div",{className:"aspect-square bg-muted rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-4xl",children:""})},p))})})})}),a.jsx(Qr,{value:"comments",children:a.jsx(xe,{children:a.jsxs(_e,{className:"pt-6 space-y-4",children:[i.map(p=>a.jsxs("div",{className:"flex gap-3 pb-4 border-b last:border-0",children:[a.jsx("div",{className:"text-2xl",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-semibold text-sm",children:"Team Member"}),a.jsx("p",{className:"text-sm mt-1",children:p.message||"No message"}),a.jsx("span",{className:"text-xs text-muted-foreground mt-2 block",children:p.created_date?new Date(p.created_date).toLocaleString():"Unknown date"})]})]},p.comment_id)),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsx(je,{placeholder:"Add a comment..."}),a.jsx(q,{children:a.jsx(Cc,{className:"h-4 w-4"})})]})]})})})]})]}),a.jsx("div",{children:a.jsxs(xe,{children:[a.jsx(Ie,{children:a.jsx(qe,{className:"text-lg",children:"Timeline"})}),a.jsxs(_e,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Created Date"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:m.created_date?new Date(m.created_date).toLocaleDateString():"N/A"})]}),m.end_date&&a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"End Date"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(m.end_date).toLocaleDateString()})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:"Milestones"}),a.jsxs("div",{className:"space-y-2 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-green-500",children:""}),a.jsx("span",{children:"Project Kickoff"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-green-500",children:""}),a.jsx("span",{children:"Design Phase"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-blue-500",children:""}),a.jsx("span",{children:"Development Phase"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-muted-foreground",children:""}),a.jsx("span",{children:"Testing & Launch"})]})]})]})]})]})})]})]}):c?a.jsxs("div",{className:"flex justify-center items-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"}),a.jsx("span",{className:"sr-only",children:"Loading projects..."})]}):r.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Projects Found"}),a.jsx("p",{className:"text-muted-foreground",children:"You don't have any projects assigned yet."})]}):a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(p=>a.jsxs(xe,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e(p.project_id),children:[a.jsxs(Ie,{children:[a.jsx(qe,{className:"text-lg",children:p.project_name}),a.jsxs(Me,{className:"w-fit mt-2",variant:"secondary",children:["Stage ",p.stage||"N/A"]})]}),a.jsx(_e,{children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[a.jsx("span",{className:"text-muted-foreground",children:"Progress"}),a.jsxs("span",{className:"font-semibold",children:[p.progress||0,"%"]})]}),a.jsx(fs,{value:p.progress||0,className:"h-2"})]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Created: ",p.created_date?new Date(p.created_date).toLocaleDateString():"N/A"]}),a.jsx(q,{className:"w-full",variant:"outline",children:"View Details "})]})})]},p.project_id))})]})]})}const Zz=()=>{const t=Zr(),{t:e}=Xe(),r=[{icon:a.jsx(ri,{className:"h-6 w-6"}),title:e("landing.features.projectManagement.title"),description:e("landing.features.projectManagement.description")},{icon:a.jsx(Mr,{className:"h-6 w-6"}),title:e("landing.features.leadManagement.title"),description:e("landing.features.leadManagement.description")},{icon:a.jsx(xL,{className:"h-6 w-6"}),title:e("landing.features.analytics.title"),description:e("landing.features.analytics.description")},{icon:a.jsx(Cc,{className:"h-6 w-6"}),title:e("landing.features.communication.title"),description:e("landing.features.communication.description")},{icon:a.jsx($d,{className:"h-6 w-6"}),title:e("landing.features.taskManagement.title"),description:e("landing.features.taskManagement.description")},{icon:a.jsx(f1,{className:"h-6 w-6"}),title:e("landing.features.security.title"),description:e("landing.features.security.description")}];return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:[a.jsx("header",{className:"relative z-10 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between py-4 sm:py-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-8 w-8 rounded-lg bg-primary flex items-center justify-center",children:a.jsx("span",{className:"text-primary-foreground font-bold text-lg",children:"M"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:e("landing.brandName")})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(BN,{}),a.jsx(q,{onClick:()=>t("/login"),className:"shadow-lg hover:shadow-xl transition-all duration-200",children:e("buttons.login")})]})]})}),a.jsxs("section",{className:"relative px-4 sm:px-6 lg:px-8 pb-12 sm:pb-16 lg:pb-20",children:[a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center",children:[a.jsxs(Me,{variant:"secondary",className:"mb-4 px-3 py-1 text-sm font-medium",children:[a.jsx(m1,{className:"h-3 w-3 mr-1"}),e("landing.badge")]}),a.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 mb-6 leading-tight",children:[e("landing.hero.title.line1"),a.jsx("span",{className:"text-primary block",children:e("landing.hero.title.line2")})]}),a.jsx("p",{className:"text-lg sm:text-xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed",children:e("landing.hero.description")}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center mb-12",children:[a.jsxs(q,{size:"lg",onClick:()=>t("/login"),className:"px-8 py-3 text-lg shadow-lg hover:shadow-xl transition-all duration-200 group",children:[e("landing.hero.cta.primary"),a.jsx(pL,{className:"ml-2 h-5 w-5 group-hover:translate-x-1 transition-transform"})]}),a.jsx(q,{variant:"outline",size:"lg",className:"px-8 py-3 text-lg",children:e("landing.hero.cta.secondary")})]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-6 max-w-2xl mx-auto",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-primary",children:e("landing.stats.users")}),a.jsx("div",{className:"text-sm text-gray-600",children:e("landing.stats.usersLabel")})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-primary",children:e("landing.stats.projects")}),a.jsx("div",{className:"text-sm text-gray-600",children:e("landing.stats.projectsLabel")})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-primary",children:e("landing.stats.uptime")}),a.jsx("div",{className:"text-sm text-gray-600",children:e("landing.stats.uptimeLabel")})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-primary",children:e("landing.stats.support")}),a.jsx("div",{className:"text-sm text-gray-600",children:e("landing.stats.supportLabel")})]})]})]})}),a.jsxs("div",{className:"absolute inset-0 -z-10 overflow-hidden",children:[a.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-primary/10 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-400/10 rounded-full blur-3xl"})]})]}),a.jsx("section",{className:"px-4 sm:px-6 lg:px-8 py-12 sm:py-16 lg:py-20 bg-white/50 backdrop-blur-sm",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:e("landing.features.title")}),a.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:e("landing.features.subtitle")})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8",children:r.map((n,s)=>a.jsx(xe,{className:"group hover:shadow-lg transition-all duration-200 border-0 shadow-md bg-white/80 backdrop-blur-sm",children:a.jsxs(_e,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"p-2 rounded-lg bg-primary/10 text-primary group-hover:bg-primary group-hover:text-primary-foreground transition-colors",children:n.icon}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n.title})]}),a.jsx("p",{className:"text-gray-600 leading-relaxed",children:n.description})]})},s))})]})}),a.jsx("section",{className:"px-4 sm:px-6 lg:px-8 py-12 sm:py-16 lg:py-20",children:a.jsx("div",{className:"max-w-4xl mx-auto text-center",children:a.jsx(xe,{className:"bg-gradient-to-r from-primary to-blue-600 text-white border-0 shadow-2xl",children:a.jsxs(_e,{className:"p-8 sm:p-12",children:[a.jsx(KL,{className:"h-12 w-12 mx-auto mb-6 text-primary-foreground/80"}),a.jsx("h3",{className:"text-2xl sm:text-3xl font-bold mb-4",children:e("landing.cta.title")}),a.jsx("p",{className:"text-lg mb-8 text-primary-foreground/90 max-w-2xl mx-auto",children:e("landing.cta.description")}),a.jsxs(q,{size:"lg",variant:"secondary",onClick:()=>t("/login"),className:"px-8 py-3 text-lg shadow-lg hover:shadow-xl transition-all duration-200 group",children:[e("landing.cta.button"),a.jsx(Ud,{className:"ml-2 h-5 w-5 group-hover:scale-110 transition-transform"})]})]})})})}),a.jsx("footer",{className:"px-4 sm:px-6 lg:px-8 py-8 border-t border-gray-200 bg-white/50 backdrop-blur-sm",children:a.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[a.jsx("div",{className:"h-6 w-6 rounded bg-primary flex items-center justify-center",children:a.jsx("span",{className:"text-primary-foreground font-bold text-sm",children:"M"})}),a.jsxs("span",{className:"font-semibold text-gray-900",children:[e("landing.brandName")," CRM"]})]}),a.jsx("p",{className:"text-sm text-gray-600",children:e("landing.footer.copyright",{brand:e("landing.brandName")})})]})})]})},eW=()=>{const[t,e]=f.useState("loading"),[r,n]=f.useState("Processing authentication..."),s=Zr(),{user:o}=yt();return f.useEffect(()=>{let i;return(async()=>{try{if(console.log("[AuthCallback] Handling OAuth callback"),o){console.log("[AuthCallback] User already authenticated by auth context:",o.role),e("success"),n("Authentication successful! Redirecting..."),setTimeout(()=>{o.role==="client"?s("/client-portal"):o.role==="employee"||o.role==="team_leader"?window.location.href="/#/employee_dashboard":window.location.href="/#/dashboard"},1500);return}console.log("[AuthCallback] Waiting for OAuth session to establish...");let c=0;const u=20,d=async()=>{c++,console.log(`[AuthCallback] Checking session and profile (attempt ${c}/${u})`);try{const{data:{user:h},error:m}=await J.auth.getUser();if(m&&console.error("[AuthCallback] User error:",m),h){console.log("[AuthCallback] Found authenticated user:",h.id);const{data:g}=await J.from("users").select("user_id").eq("auth_user_id",h.id).maybeSingle();if(g){console.log("[AuthCallback] User profile exists, fetching user data...");const w=await Sr.getCurrentUser(h.id);if(w){localStorage.removeItem("oauth_intended_role"),e("success"),n("Authentication successful! Redirecting..."),setTimeout(()=>{w.role==="client"?s("/client-portal"):w.role==="employee"||w.role==="team_leader"?window.location.href="/#/employee_dashboard":window.location.href="/#/dashboard"},1500);return}}else console.log("[AuthCallback] Profile not yet created by trigger, waiting...")}const{data:{session:p},error:v}=await J.auth.getSession();if(v&&console.error("[AuthCallback] Session error:",v),p!=null&&p.user){console.log("[AuthCallback] Found session user:",p.user.id);const{data:g}=await J.from("users").select("user_id").eq("auth_user_id",p.user.id).maybeSingle();if(g){console.log("[AuthCallback] User profile exists, fetching user data...");const w=await Sr.getCurrentUser(p.user.id);if(w){localStorage.removeItem("oauth_intended_role"),e("success"),n("Authentication successful! Redirecting..."),setTimeout(()=>{w.role==="client"?s("/client-portal"):w.role==="employee"||w.role==="team_leader"?window.location.href="/#/employee_dashboard":window.location.href="/#/dashboard"},1500);return}}else console.log("[AuthCallback] Profile not yet created by trigger, waiting...")}c<u?(console.log("[AuthCallback] No session or profile found, waiting and retrying..."),i=setTimeout(d,1e3)):(console.error("[AuthCallback] No session or profile found after maximum attempts"),e("error"),n("Authentication session not established. Please try signing in again."),setTimeout(()=>s("/login"),3e3))}catch(h){console.error("[AuthCallback] Error checking session and profile:",h),c<u?i=setTimeout(d,1e3):(e("error"),n("Authentication failed. Please try again."),setTimeout(()=>s("/login"),3e3))}};d()}catch(c){console.error("[AuthCallback] Error handling callback:",c),e("error"),n("Authentication failed. Please try again."),setTimeout(()=>s("/login"),3e3)}})(),()=>{i&&clearTimeout(i)}},[o,s]),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:a.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md text-center max-w-md",children:[t==="loading"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Completing Sign In"}),a.jsx("p",{className:"text-gray-600",children:r})]}),t==="success"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("h2",{className:"text-xl font-semibold mb-2 text-green-600",children:"Success!"}),a.jsx("p",{className:"text-gray-600",children:r})]}),t==="error"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsx("h2",{className:"text-xl font-semibold mb-2 text-red-600",children:"Authentication Failed"}),a.jsx("p",{className:"text-gray-600",children:r})]})]})})};function tW(){return a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold tracking-tight",children:"Partner Dashboard"}),a.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:"Welcome to your partner portal"})]})}),a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"w-24 h-24 bg-primary/10 rounded-full flex items-center justify-center mx-auto",children:a.jsx("svg",{className:"w-12 h-12 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),a.jsx("h2",{className:"text-2xl font-semibold",children:"Coming Soon"}),a.jsx("p",{className:"text-muted-foreground max-w-md",children:"We're working hard to bring you an amazing partner experience. Check back soon for updates and new features."})]})})]})}function rW(){return a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Partner Employee Dashboard"}),a.jsx("p",{className:"text-muted-foreground mt-2 text-base",children:"Welcome to your partner employee portal"})]})}),a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"w-24 h-24 bg-primary/10 rounded-full flex items-center justify-center mx-auto",children:a.jsx("svg",{className:"w-12 h-12 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),a.jsx("h2",{className:"text-2xl font-semibold",children:"Coming Soon"}),a.jsx("p",{className:"text-muted-foreground max-w-md",children:"We're working hard to bring you an amazing partner employee experience. Check back soon for updates and new features."})]})})]})}const nW=1,sW=1e6;let um=0;function aW(){return um=(um+1)%Number.MAX_SAFE_INTEGER,um.toString()}const dm=new Map,F0=t=>{if(dm.has(t))return;const e=setTimeout(()=>{dm.delete(t),Il({type:"REMOVE_TOAST",toastId:t})},sW);dm.set(t,e)},oW=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,nW)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?F0(r):t.toasts.forEach(n=>{F0(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},td=[];let rd={toasts:[]};function Il(t){rd=oW(rd,t),td.forEach(e=>{e(rd)})}function iW({...t}){const e=aW(),r=s=>Il({type:"UPDATE_TOAST",toast:{...s,id:e}}),n=()=>Il({type:"DISMISS_TOAST",toastId:e});return Il({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||n()}}}),{id:e,dismiss:n,update:r}}function lW(){const[t,e]=f.useState(rd);return f.useEffect(()=>(td.push(e),()=>{const r=td.indexOf(e);r>-1&&td.splice(r,1)}),[t]),{...t,toast:iW,dismiss:r=>Il({type:"DISMISS_TOAST",toastId:r})}}function cW(){var ee;const{t}=Xe(),{user:e}=yt(),{isRTL:r}=_a(),{toast:n}=lW(),[s,o]=f.useState([]),[i,l]=f.useState([]),[c,u]=f.useState({}),[d,h]=f.useState(!0),[m,p]=f.useState(""),[v,g]=f.useState(null),[w,y]=f.useState(null),[x,_]=f.useState([]);f.useState(!1);const[b,j]=f.useState(!1),[N,k]=f.useState(null),[E,T]=f.useState({}),[P,z]=f.useState({}),[B,Q]=f.useState([]),[R,Y]=f.useState(!1),[M,D]=f.useState(null),[C,L]=f.useState(null),[I,W]=f.useState({template_name:"",template_name_ar:"",template_description:"",template_description_ar:"",category:"",is_active:!0,is_default:!1}),[K,te]=f.useState([]);f.useState({template_name:"",template_name_ar:"",template_description:"",template_description_ar:"",category:"",is_active:!0,is_default:!1});const[O,re]=f.useState({}),[de,ae]=f.useState(!1);f.useEffect(()=>{ye()},[]);const ye=async()=>{try{h(!0);const[S,$,X]=await Promise.all([Yd.getAll().catch(De=>(console.error("[Surveys] Error fetching surveys:",De),[])),Cn.getAll().catch(De=>(console.error("[Surveys] Error fetching templates:",De),[])),qt.getAll().catch(De=>(console.error("[Surveys] Error fetching users:",De),[]))]),G=$.map(async De=>{try{const Ge=await Cn.getFields(De.template_id);return{templateId:De.template_id,fields:Ge}}catch(Ge){return console.error(`[Surveys] Error fetching fields for template ${De.template_id}:`,Ge),{templateId:De.template_id,fields:[]}}}),ge=await Promise.all(G),ie={};ge.forEach(De=>{ie[De.templateId]=De.fields}),o(S),l($),Q(X),u(ie)}catch(S){console.error("Failed to load surveys data:",S)}finally{h(!1)}},Ee=s.filter(S=>{var $,X;return S.client_name.toLowerCase().includes(m.toLowerCase())||(($=S.client_company)==null?void 0:$.toLowerCase().includes(m.toLowerCase()))||((X=S.survey_name)==null?void 0:X.toLowerCase().includes(m.toLowerCase()))}),F=i.filter(S=>{var $;return H(S,"template_name").toLowerCase().includes(m.toLowerCase())||(($=S.category)==null?void 0:$.toLowerCase().includes(m.toLowerCase()))}),se=S=>{if(!S)return t("surveys.unknownCreator");const $=B.find(X=>X.auth_user_id===S);return $?H($,"user_name"):t("surveys.unknownCreator")},V=S=>{switch(S.toLowerCase()){case"completed":return a.jsxs(Me,{variant:"default",className:"bg-green-500",children:[a.jsx(uc,{className:"h-3 w-3 mr-1"}),t("surveys.completed")]});case"in_progress":return a.jsxs(Me,{variant:"secondary",children:[a.jsx(Qs,{className:"h-3 w-3 mr-1"}),t("surveys.inProgress")]});case"pending":return a.jsxs(Me,{variant:"outline",children:[a.jsx(Qs,{className:"h-3 w-3 mr-1"}),t("surveys.pending")]});default:return a.jsx(Me,{variant:"outline",children:S})}},fe=async S=>{if(y(S),c[S.template_id])_(c[S.template_id]);else try{const $=await Cn.getFields(S.template_id);u(X=>({...X,[S.template_id]:$})),_($)}catch($){console.error("Failed to load template fields:",$),_([])}},Re=()=>{const S={field_type:"text",field_label:"",is_required:!1,field_options:null,validation_rules:null,conditional_logic:null};te($=>[...$,S])},Ke=S=>{te($=>$.filter((X,G)=>G!==S))},et=(S,$)=>{te(X=>X.map((G,ge)=>ge===S?{...G,...$}:G))},mt=(S,$)=>{te(X=>{const G=[...X],[ge]=G.splice(S,1);return G.splice($,0,ge),G})},Ut=()=>{W({template_name:"",template_name_ar:"",template_description:"",template_description_ar:"",category:"",is_active:!0,is_default:!1}),te([]),D(null)},Gt=async S=>{W({template_name:S.template_name||"",template_name_ar:S.template_name_ar||"",template_description:S.template_description||"",template_description_ar:S.template_description_ar||"",category:S.category||"",is_active:S.is_active,is_default:S.is_default||!1});const X=(c[S.template_id]||[]).map(G=>({field_type:G.field_type,field_label:G.field_label||"",field_label_ar:G.field_label_ar||"",help_text:G.help_text||"",help_text_ar:G.help_text_ar||"",is_required:G.is_required||!1,field_options:G.field_options,validation_rules:G.validation_rules,default_value:G.default_value,conditional_logic:G.conditional_logic,image_path:G.image_path}));te(X),D(S.template_id),Y(!0)},qn=()=>{const S={};return I.template_name.trim()||(S.template_name=t("surveys.templateNameRequired")),K.length===0?S.fields=t("surveys.atLeastOneFieldRequired"):K.forEach(($,X)=>{$.field_label.trim()||(S[`field_${X}`]=t("surveys.fieldLabelRequired",{number:X+1}))}),re(S),Object.keys(S).length===0},U=async()=>{if(!qn()){n({title:t("common.error"),description:t("surveys.templateValidationFailed"),variant:"destructive"});return}ae(!0);try{if(M){await Cn.update(M,I);const S=c[M]||[];for(const $ of S)$.field_id&&await Cn.deleteField($.field_id);for(let $=0;$<K.length;$++){const X=K[$];await Cn.createField({template_id:M,field_order:$+1,field_type:X.field_type,field_label:X.field_label,field_label_ar:X.field_label_ar||"",help_text:X.help_text||null,help_text_ar:X.help_text_ar||null,is_required:X.is_required,field_options:X.field_options,validation_rules:X.validation_rules,default_value:X.default_value||null,conditional_logic:X.conditional_logic,image_path:X.image_path||null})}n({title:t("common.success"),description:t("surveys.templateUpdated")})}else{const S={...I,created_by:e==null?void 0:e.id},$=await Cn.create(S);for(let X=0;X<K.length;X++){const G=K[X];await Cn.createField({template_id:$.template_id,field_order:X+1,field_type:G.field_type,field_label:G.field_label,field_label_ar:G.field_label_ar||"",help_text:G.help_text||null,help_text_ar:G.help_text_ar||null,is_required:G.is_required,field_options:G.field_options,validation_rules:G.validation_rules,default_value:G.default_value||null,conditional_logic:G.conditional_logic,image_path:G.image_path||null})}n({title:t("common.success"),description:t("surveys.templateCreated")})}Ut(),Y(!1),ye()}catch(S){console.error("Failed to save template:",S),n({title:t("common.error"),description:t("surveys.templateSaveError",{action:t(M?"surveys.updateTemplate":"surveys.createTemplate")}),variant:"destructive"})}},le=async S=>{if(k(S),!c[S.template_id])try{const G=await Cn.getFields(S.template_id);u(ge=>({...ge,[S.template_id]:G}))}catch(G){console.error("Failed to load template fields:",G)}const $={};(c[S.template_id]||[]).forEach(G=>{G.default_value!==null&&G.default_value!==void 0&&($[G.field_id.toString()]=G.default_value)}),T($)},Se=async S=>{try{await Cn.delete(S),l($=>$.filter(X=>X.template_id!==S)),L(null),u($=>{const X={...$};return delete X[S],X})}catch($){console.error("Failed to delete template:",$),alert("Failed to delete template. Please try again.")}},Ze=()=>new Promise((S,$)=>{if(!navigator.geolocation){$(new Error("Geolocation is not supported by this browser"));return}navigator.geolocation.getCurrentPosition(X=>{S({latitude:X.coords.latitude,longitude:X.coords.longitude,accuracy:X.coords.accuracy})},X=>{$(X)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}),Bt=async()=>{if(!(!N||!e))try{let S={latitude:0,longitude:0,accuracy:0};try{S=await Ze()}catch(Yt){console.warn("Could not get location:",Yt)}const $=c[N.template_id]||[],X=new Map($.map(Yt=>[Yt.field_id.toString(),Yt.field_label])),G={};for(const[Yt,Yc]of Object.entries(E)){const Ea=X.get(Yt)||Yt;G[Ea]=Yc}const ge=G["Customer Name"]||G["Client Name"]||G.client_name||G.customer_name||"Anonymous",ie=G["Customer Company"]||G["Client Company"]||G.Company||G.company||G.client_company||null,De=G["Contact Number"]||G["Contact Email"]||G.Contact||G.contact||G.phone||null,Ge=G["Contact Email"]||G.Email||G.email||G.client_email||null,Ca=G.Address||G.address||G.client_address||null,Zi=G["Additional Notes"]||G.Notes||G.notes||null,el={},GE=Object.keys(P);for(const[Yt,Yc]of Object.entries(E))if(!GE.includes(Yt)){const Ea=X.get(Yt)||Yt;el[Ea]=Yc}const YE={template_id:N.template_id,survey_name:`${H(N,"template_name")} - ${new Date().toLocaleDateString()}`,survey_description:H(N,"template_description")||null,client_name:ge,client_name_ar:null,client_contact:De,client_email:Ge,client_address:Ca,client_company:ie,client_company_ar:null,survey_responses:el,location_latitude:S.latitude,location_longitude:S.longitude,location_accuracy:S.accuracy,location_address:Ca,status:"collected",created_by:e.id,lead_id:null,converted_to_lead_at:null,device_info:navigator.userAgent,completion_time_seconds:null,notes:Zi,notes_ar:null,updated_by:null,reviewed_by:null,reviewed_at:null};console.log("[Survey] Creating survey...");const yo=await Yd.create(YE);if(console.log("[Survey] Survey created with ID:",yo.survey_id),Object.keys(P).length>0){console.log("[Survey] Uploading images...",Object.keys(P));const Yt={...el};for(const[Ss,tf]of Object.entries(P))try{const Qc=tf.name.split(".").pop(),QE=`${Ss.replace(/[^a-zA-Z0-9]/g,"_")}_${Date.now()}.${Qc}`,Jc=`surveys/survey_${yo.survey_id}/${QE}`;console.log(`[Survey] Uploading image for field "${Ss}" to path: ${Jc}`);const{data:JE,error:rf}=await J.storage.from("survey-uploads").upload(Jc,tf,{cacheControl:"3600",upsert:!0,contentType:tf.type});if(rf)throw console.error(`[Survey] Failed to upload image for field ${Ss}:`,rf),rf;console.log(`[Survey] Upload successful for field "${Ss}":`,JE);const{data:{publicUrl:Sx}}=J.storage.from("survey-uploads").getPublicUrl(Jc);console.log(`[Survey] Public URL for field "${Ss}":`,Sx);const XE=X.get(Ss)||Ss;Yt[XE]={bucket:"survey-uploads",path:Jc,url:Sx}}catch(Qc){throw console.error(`[Survey] Error processing image for field ${Ss}:`,Qc),Qc}console.log("[Survey] Updating survey with image references...");const{data:Yc,error:Ea}=await J.from("surveys").update({survey_responses:Yt}).eq("survey_id",yo.survey_id).select().single();if(Ea)throw console.error("[Survey] Failed to update survey with images:",Ea),Ea;console.log("[Survey] Survey updated successfully with images"),yo.survey_responses=Yt}o([yo,...s]),k(null),T({}),z({}),j(!1),console.log("[Survey] Survey creation complete:",yo)}catch(S){console.error("[Survey] Failed to create survey:",S),alert(`Failed to create survey: ${S.message}`)}},Ue=S=>{const $=S.field_id.toString(),X=E[$]||"";switch(S.field_type.toLowerCase()){case"text":return a.jsx(je,{id:$,value:X,onChange:ge=>T(ie=>({...ie,[$]:ge.target.value})),placeholder:H(S,"help_text")||S.field_label,required:S.is_required});case"textarea":return a.jsx(Or,{id:$,value:X,onChange:ge=>T(ie=>({...ie,[$]:ge.target.value})),placeholder:H(S,"help_text")||S.field_label,required:S.is_required,rows:3});case"number":return a.jsx(je,{id:$,type:"number",value:X,onChange:ge=>T(ie=>({...ie,[$]:ge.target.value})),placeholder:H(S,"help_text")||S.field_label,required:S.is_required});case"email":return a.jsx(je,{id:$,type:"email",value:X,onChange:ge=>T(ie=>({...ie,[$]:ge.target.value})),placeholder:H(S,"help_text")||S.field_label,required:S.is_required});case"select":if(S.field_options&&typeof S.field_options=="object"&&!Array.isArray(S.field_options)&&"options"in S.field_options&&Array.isArray(S.field_options.options)){const ge=S.field_options.options.filter(ie=>typeof ie=="string");return a.jsxs(We,{value:X,onValueChange:ie=>T(De=>({...De,[$]:ie})),children:[a.jsx(Fe,{children:a.jsx(Ve,{placeholder:H(S,"help_text")||`${t("common.select")} ${H(S,"field_label")}`})}),a.jsx($e,{children:ge.map((ie,De)=>a.jsx(oe,{value:ie,children:ie},De))})]})}return a.jsx(je,{id:$,value:X,onChange:ge=>T(ie=>({...ie,[$]:ge.target.value})),placeholder:H(S,"help_text")||S.field_label,required:S.is_required});case"radio":if(S.field_options&&typeof S.field_options=="object"&&!Array.isArray(S.field_options)&&"options"in S.field_options&&Array.isArray(S.field_options.options)){const ge=S.field_options.options.filter(ie=>typeof ie=="string");return a.jsx("div",{className:"space-y-2",children:ge.map((ie,De)=>a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"radio",name:$,value:ie,checked:X===ie,onChange:Ge=>T(Ca=>({...Ca,[$]:Ge.target.value}))}),a.jsx("span",{className:"text-sm",children:ie})]},De))})}return a.jsx(je,{id:$,value:X,onChange:ge=>T(ie=>({...ie,[$]:ge.target.value})),placeholder:H(S,"help_text")||S.field_label,required:S.is_required});case"multiselect":case"checkbox":if(S.field_options&&typeof S.field_options=="object"&&!Array.isArray(S.field_options)&&"options"in S.field_options&&Array.isArray(S.field_options.options)){const ge=S.field_options.options.filter(ie=>typeof ie=="string");return a.jsx("div",{className:"space-y-2",children:ge.map((ie,De)=>a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:Array.isArray(X)?X.includes(ie):!1,onChange:Ge=>{const Ca=Array.isArray(X)?X:[];Ge.target.checked?T(Zi=>({...Zi,[$]:[...Ca,ie]})):T(Zi=>({...Zi,[$]:Ca.filter(el=>el!==ie)}))}}),a.jsx("span",{className:"text-sm",children:ie})]},De))})}return a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:!!X,onChange:ge=>T(ie=>({...ie,[$]:ge.target.checked}))}),a.jsx("span",{className:"text-sm",children:H(S,"field_label")})]});case"image":const G=E[$];return a.jsxs("div",{className:"space-y-2",children:[a.jsx(je,{id:$,type:"file",accept:"image/*",onChange:ge=>{var De;const ie=(De=ge.target.files)==null?void 0:De[0];ie&&(z(Ge=>({...Ge,[$]:ie})),T(Ge=>({...Ge,[$]:{preview:URL.createObjectURL(ie),filename:ie.name}})))},required:S.is_required}),(G==null?void 0:G.preview)&&a.jsxs("div",{className:"relative w-full",children:[a.jsx("img",{src:G.preview,alt:"Preview",className:"w-full h-48 object-cover rounded-lg border"}),a.jsx(q,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:()=>{z(ge=>{const ie={...ge};return delete ie[$],ie}),T(ge=>{const ie={...ge};return delete ie[$],ie})},children:a.jsx(wr,{className:"h-4 w-4"})})]})]});default:return a.jsx(je,{id:$,value:X,onChange:ge=>T(ie=>({...ie,[$]:ge.target.value})),placeholder:H(S,"help_text")||S.field_label,required:S.is_required})}};return d?a.jsx("div",{className:"flex items-center justify-center h-full py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):a.jsxs("div",{className:`h-full flex flex-col space-y-6 ${r?"rtl":"ltr"}`,children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold tracking-tight",children:t("surveys.title")}),a.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:t("surveys.subtitle")})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ni,{className:"h-5 w-5"}),a.jsxs("span",{className:"text-sm font-medium",children:[s.length," ",t("surveys.totalSurveys")]})]})})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ba,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(je,{placeholder:t("surveys.searchPlaceholder"),value:m,onChange:S=>p(S.target.value),className:"pl-10"})]}),a.jsxs(Gc,{defaultValue:"surveys",className:"w-full flex-1 flex flex-col",children:[a.jsxs(Xi,{className:"grid w-full grid-cols-2",children:[a.jsxs(Yr,{value:"surveys",children:[t("surveys.surveys")," (",Ee.length,")"]}),a.jsxs(Yr,{value:"templates",children:[t("surveys.templates")," (",F.length,")"]})]}),a.jsxs(Qr,{value:"surveys",className:"space-y-4 flex-1 flex flex-col",children:[a.jsx("div",{className:"flex justify-end",children:a.jsxs(Ot,{open:b,onOpenChange:j,children:[a.jsx(Ml,{asChild:!0,children:a.jsxs(q,{size:"lg",className:"w-full shadow-lg hover:shadow-xl transition-all",children:[a.jsx(xt,{className:"h-5 w-5 mr-2"}),t("surveys.newSurvey")]})}),a.jsxs(Nt,{className:"w-[95vw] sm:w-full sm:max-w-2xl lg:max-w-4xl max-h-[85vh] overflow-y-auto",children:[a.jsx(kt,{children:a.jsx(Ct,{children:t("surveys.createNewSurvey")})}),a.jsx("div",{className:"space-y-6 py-4",children:N?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium",children:H(N,"template_name")}),a.jsx("p",{className:"text-sm text-muted-foreground",children:t("surveys.fillSurveyDetails")})]}),a.jsx(q,{variant:"outline",size:"sm",onClick:()=>{k(null),T({})},children:t("surveys.changeTemplate")})]}),a.jsx("div",{className:"space-y-4",children:(ee=c[N.template_id])==null?void 0:ee.map(S=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs(he,{htmlFor:S.field_label,className:"text-sm font-medium",children:[H(S,"field_label"),S.is_required&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),Ue(S),H(S,"help_text")&&a.jsx("p",{className:"text-xs text-muted-foreground",children:H(S,"help_text")})]},S.field_id))}),a.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-700 dark:text-blue-300",children:[a.jsx(Jw,{className:"h-4 w-4"}),a.jsx("span",{children:t("surveys.locationWillBeCaptured")})]})})]}):a.jsxs("div",{children:[a.jsx(he,{className:"text-base font-medium mb-4 block",children:t("surveys.selectTemplate")}),a.jsx("div",{className:"w-full max-w-full grid gap-4 grid-cols-1 md:grid-cols-2",children:i.filter(S=>S.is_active).map(S=>a.jsx(xe,{className:`w-full overflow-hidden cursor-pointer transition-all hover:shadow-md ${(N==null?void 0:N.template_id)===S.template_id?"ring-2 ring-primary":""}`,onClick:()=>le(S),children:a.jsx(_e,{className:"p-4",children:a.jsx("div",{className:"flex items-start gap-3",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-medium text-sm truncate",children:H(S,"template_name")}),S.category&&a.jsx(Me,{variant:"outline",className:"mt-1 text-xs",children:S.category}),H(S,"template_description")&&a.jsx("p",{className:"text-xs text-muted-foreground mt-2 line-clamp-2",children:H(S,"template_description")})]})})})},S.template_id))})]})}),a.jsxs("div",{className:"flex flex-col-reverse sm:flex-row gap-2",children:[a.jsx(q,{variant:"outline",onClick:()=>{j(!1),k(null),T({})},className:"w-full sm:w-auto",children:t("buttons.cancel")}),N&&a.jsx(q,{onClick:Bt,disabled:!N,className:"w-full sm:w-auto",children:t("surveys.submitSurvey")})]})]})]})}),a.jsx(Dr,{className:"flex-1",children:Ee.length===0?a.jsx(xe,{children:a.jsxs(_e,{className:"text-center py-12",children:[a.jsx(ni,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:t("surveys.noSurveysFound")}),a.jsx("p",{className:"text-muted-foreground",children:t(m?"surveys.noSurveysFoundDesc":"surveys.noSurveysYet")})]})}):a.jsx("div",{className:`w-full max-w-full grid gap-4 md:grid-cols-2 lg:grid-cols-3 ${r?"rtl":""}`,children:Ee.map(S=>a.jsxs(xe,{className:"w-full overflow-hidden hover:shadow-lg transition-all duration-200 cursor-pointer",children:[a.jsx(Ie,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-base truncate",children:S.survey_name||`${t("surveys.survey")} #${S.survey_id}`}),a.jsx("p",{className:"text-sm text-muted-foreground truncate",children:H(S,"client_name")})]}),V(S.status)]})}),a.jsxs(_e,{className:"pt-0 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(po,{className:"h-4 w-4"}),a.jsx("span",{className:"truncate",children:S.client_company||t("surveys.noCompany")})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Jw,{className:"h-4 w-4"}),a.jsx("span",{className:"truncate",children:S.location_address||`${S.location_latitude.toFixed(4)}, ${S.location_longitude.toFixed(4)}`})]}),a.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(us,{className:"h-4 w-4"}),a.jsxs("span",{children:[t("surveys.createdBy"),": ",se(S.created_by)]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Qs,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:new Date(S.created_at).toLocaleDateString()})]}),a.jsxs(Ot,{children:[a.jsx(Ml,{asChild:!0,children:a.jsxs(q,{variant:"outline",size:"sm",onClick:()=>g(S),children:[a.jsx(Fd,{className:"h-4 w-4 mr-1"}),t("common.view")]})}),a.jsxs(Nt,{className:"w-[95vw] sm:w-full sm:max-w-2xl lg:max-w-4xl max-h-[85vh] overflow-y-auto",children:[a.jsx(kt,{children:a.jsx(Ct,{children:S.survey_name||`${t("surveys.survey")} #${S.survey_id}`})}),v&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium",children:t("surveys.clientName")}),a.jsx("p",{className:"text-sm",children:H(v,"client_name")})]}),a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium",children:t("surveys.clientCompany")}),a.jsx("p",{className:"text-sm",children:v.client_company||t("surveys.noCompany")})]}),a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium",children:t("surveys.contact")}),a.jsx("p",{className:"text-sm",children:v.client_contact||t("surveys.noContact")})]}),a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium",children:t("surveys.email")}),a.jsx("p",{className:"text-sm",children:v.client_email||t("surveys.noEmail")})]})]}),a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium",children:t("surveys.location")}),a.jsx("p",{className:"text-sm",children:a.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${v.location_latitude},${v.location_longitude}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:["https://www.google.com/maps/place/",v.location_address||`${v.location_latitude.toFixed(6)}, ${v.location_longitude.toFixed(6)}`]})})]}),a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium",children:t("surveys.responses")}),a.jsx("div",{className:"mt-2 space-y-2",children:v.survey_responses&&Object.keys(v.survey_responses).length>0?Object.entries(v.survey_responses).map(([$,X])=>{const G=typeof X=="object"&&X!==null&&"bucket"in X&&"path"in X&&"url"in X;return a.jsxs("div",{className:"flex flex-col gap-2 p-3 bg-muted/30 rounded-lg",children:[a.jsxs("div",{className:"font-medium text-sm text-primary",children:[$,":"]}),G?a.jsx("div",{className:"mt-2",children:a.jsx("img",{src:X.url,alt:$,className:"w-full max-w-md h-auto rounded-lg border object-cover"})}):a.jsx("div",{className:"text-sm text-muted-foreground break-words",children:Array.isArray(X)?X.join(", "):typeof X=="object"?JSON.stringify(X):String(X||"N/A")})]},$)}):a.jsx("div",{className:"text-sm text-muted-foreground italic p-3 bg-muted/30 rounded-lg",children:"No responses recorded"})})]})]})]})]})]})]})]})]},S.survey_id))})})]}),a.jsxs(Qr,{value:"templates",className:"space-y-4 flex-1 flex flex-col",children:[((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="manager")&&a.jsx("div",{className:"flex justify-end p-4 pb-0",children:a.jsxs(q,{onClick:()=>Y(!0),size:"lg",className:"w-full shadow-lg hover:shadow-xl transition-all",children:[a.jsx(xt,{className:"h-5 w-5 mr-2"}),t("surveys.createTemplate")]})}),a.jsx(Dr,{className:"flex-1",children:F.length===0?a.jsx(xe,{children:a.jsxs(_e,{className:"text-center py-12",children:[a.jsx(ni,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:t("surveys.noTemplatesFound")}),a.jsx("p",{className:"text-muted-foreground",children:t(m?"surveys.noTemplatesFoundDesc":"surveys.noTemplatesYet")})]})}):a.jsx("div",{className:`w-full max-w-full grid gap-4 md:grid-cols-2 lg:grid-cols-3 ${r?"rtl":""}`,children:F.map(S=>a.jsxs(xe,{className:"w-full overflow-hidden hover:shadow-lg transition-all duration-200",children:[a.jsx(Ie,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-base truncate",children:H(S,"template_name")}),S.category&&a.jsx(Me,{variant:"outline",className:"mt-1 text-xs",children:S.category})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[S.is_default&&a.jsx(Me,{variant:"default",className:"text-xs",children:t("surveys.default")}),S.is_active?a.jsx(uc,{className:"h-4 w-4 text-green-500"}):a.jsx(jL,{className:"h-4 w-4 text-red-500"})]})]})}),a.jsxs(_e,{className:"pt-0 space-y-3",children:[H(S,"template_description")&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:H(S,"template_description")}),a.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Qs,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:new Date(S.created_at).toLocaleDateString()})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(Ot,{children:[a.jsx(Ml,{asChild:!0,children:a.jsxs(q,{variant:"outline",size:"sm",onClick:()=>fe(S),children:[a.jsx(Fd,{className:"h-4 w-4 mr-1"}),t("common.view")]})}),a.jsxs(Nt,{className:"w-[95vw] sm:w-full sm:max-w-2xl lg:max-w-4xl max-h-[85vh] overflow-y-auto",children:[a.jsx(kt,{children:a.jsx(Ct,{children:H(w||S,"template_name")})}),w&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium",children:t("surveys.category")}),a.jsx("p",{className:"text-sm",children:w.category||t("surveys.noCategory")})]}),a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium",children:t("surveys.status")}),a.jsxs("div",{className:"flex items-center gap-2",children:[w.is_active?a.jsx(Me,{variant:"default",className:"bg-green-500",children:t("surveys.active")}):a.jsx(Me,{variant:"secondary",children:t("surveys.inactive")}),w.is_default&&a.jsx(Me,{variant:"default",children:t("surveys.default")})]})]})]}),a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium",children:t("surveys.description")}),a.jsx("p",{className:"text-sm mt-1",children:H(w,"template_description")||t("surveys.noDescription")})]}),a.jsxs("div",{children:[a.jsxs(he,{className:"text-sm font-medium",children:[t("surveys.fields")," (",x.length,")"]}),a.jsx("div",{className:"mt-2 space-y-2",children:x.length===0?a.jsx("p",{className:"text-sm text-muted-foreground",children:t("surveys.noFields")}):x.sort(($,X)=>$.field_order-X.field_order).map($=>a.jsx("div",{className:"border rounded-lg p-3 bg-muted/30",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(Me,{variant:"outline",className:"text-xs",children:$.field_type}),a.jsx("span",{className:"text-sm font-medium",children:H($,"field_label")}),$.is_required&&a.jsx("span",{className:"text-red-500 text-sm",children:"*"})]}),H($,"help_text")&&a.jsx("p",{className:"text-xs text-muted-foreground",children:H($,"help_text")})]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["#",$.field_order]})]})},$.field_id))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium",children:t("surveys.created")}),a.jsx("p",{children:new Date(w.created_at).toLocaleString()})]}),a.jsxs("div",{children:[a.jsx(he,{className:"text-sm font-medium",children:t("surveys.updated")}),a.jsx("p",{children:new Date(w.updated_at).toLocaleString()})]})]})]})]})]}),((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="manager")&&a.jsxs(a.Fragment,{children:[a.jsx(q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-blue-50",onClick:$=>{$.stopPropagation(),Gt(S)},children:a.jsx(ML,{className:"h-4 w-4"})}),a.jsxs(ka,{children:[a.jsx(Kc,{asChild:!0,children:a.jsx(q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:$=>{$.stopPropagation(),L(S.template_id)},children:a.jsx(wr,{className:"h-4 w-4"})})}),a.jsxs(vs,{onClick:$=>$.stopPropagation(),children:[a.jsxs(xs,{children:[a.jsx(ws,{children:t("surveys.deleteTemplate")}),a.jsx(_s,{children:t("surveys.deleteTemplateConfirmation",{name:H(S,"template_name")})})]}),a.jsxs(ys,{children:[a.jsx(js,{children:t("buttons.cancel")}),a.jsx(bs,{onClick:$=>{$.stopPropagation(),Se(S.template_id)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:t("buttons.delete")})]})]})]})]})]})]})]})]},S.template_id))})})]})]}),a.jsx(Ot,{open:R,onOpenChange:Y,children:a.jsxs(Nt,{className:"w-[95vw] sm:w-full sm:max-w-2xl lg:max-w-4xl max-h-[85vh] overflow-y-auto",children:[a.jsxs(kt,{children:[a.jsx(Ct,{children:t(M?"surveys.editTemplateTitle":"surveys.createTemplateTitle")}),a.jsx(or,{children:t("surveys.createTemplateDesc")})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(he,{htmlFor:"template_name",children:[t("surveys.templateName")," *"]}),a.jsx(je,{id:"template_name",value:I.template_name,onChange:S=>W($=>({...$,template_name:S.target.value})),placeholder:t("surveys.templateName"),className:O.template_name?"border-red-500":""}),O.template_name&&a.jsx("p",{className:"text-sm text-red-500",children:O.template_name})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"category",children:t("surveys.category")}),a.jsxs(We,{value:I.category,onValueChange:S=>W($=>({...$,category:S})),children:[a.jsx(Fe,{children:a.jsx(Ve,{placeholder:t("surveys.selectCategory")})}),a.jsxs($e,{children:[a.jsx(oe,{value:"customer_satisfaction",children:t("surveys.customerSatisfaction")}),a.jsx(oe,{value:"product_feedback",children:t("surveys.productFeedback")}),a.jsx(oe,{value:"service_quality",children:t("surveys.serviceQuality")}),a.jsx(oe,{value:"general",children:t("surveys.general")})]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"template_description",children:t("surveys.description")}),a.jsx(Or,{id:"template_description",value:I.template_description,onChange:S=>W($=>({...$,template_description:S.target.value})),placeholder:t("surveys.description"),rows:3})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"is_active",checked:I.is_active,onChange:S=>W($=>({...$,is_active:S.target.checked})),className:"rounded"}),a.jsx(he,{htmlFor:"is_active",children:t("surveys.isActive")})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h3",{className:"text-lg font-semibold",children:t("surveys.fields")})}),O.fields&&a.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-sm text-red-600",children:O.fields})}),a.jsx("div",{className:"space-y-3",children:K.map((S,$)=>{var X,G,ge;return a.jsx(xe,{className:"p-4",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[a.jsx(q,{variant:"ghost",size:"sm",onClick:()=>mt($,Math.max(0,$-1)),disabled:$===0,children:a.jsx(gL,{className:"h-4 w-4"})}),a.jsx(q,{variant:"ghost",size:"sm",onClick:()=>mt($,Math.min(K.length-1,$+1)),disabled:$===K.length-1,children:a.jsx(mL,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex-1 space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(he,{children:[t("surveys.fieldLabel")," *"]}),a.jsx(je,{value:S.field_label,onChange:ie=>et($,{field_label:ie.target.value}),placeholder:t("surveys.fieldLabel"),className:O[`field_${$}`]?"border-red-500":""}),O[`field_${$}`]&&a.jsx("p",{className:"text-sm text-red-500",children:O[`field_${$}`]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(he,{children:[t("surveys.fieldType")," *"]}),a.jsxs(We,{value:S.field_type,onValueChange:ie=>et($,{field_type:ie}),children:[a.jsx(Fe,{children:a.jsx(Ve,{})}),a.jsxs($e,{children:[a.jsx(oe,{value:"text",children:t("surveys.text")}),a.jsx(oe,{value:"textarea",children:t("surveys.textarea")}),a.jsx(oe,{value:"email",children:t("surveys.email")}),a.jsx(oe,{value:"select",children:t("surveys.select")}),a.jsx(oe,{value:"multiselect",children:t("surveys.multiselect")}),a.jsx(oe,{value:"radio",children:t("surveys.radio")}),a.jsx(oe,{value:"checkbox",children:t("surveys.checkbox")}),a.jsx(oe,{value:"image",children:t("surveys.image")})]})]})]})]}),(S.field_type==="select"||S.field_type==="multiselect"||S.field_type==="radio")&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{children:t("surveys.options")}),a.jsx(Or,{defaultValue:((G=(X=S.field_options)==null?void 0:X.options)==null?void 0:G.join(`
`))||"",onBlur:ie=>{const De=ie.target.value.split(/[\n\s]+/).filter(Ge=>Ge.trim()).map(Ge=>Ge.trim());et($,{field_options:{options:De,allow_multiple:S.field_type==="multiselect"}})},placeholder:"Enter options separated by spaces or new lines (e.g., POS CRM ERP)",rows:3}),((ge=S.field_options)==null?void 0:ge.options)&&S.field_options.options.length>0&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:[S.field_options.options.length," option(s): ",S.field_options.options.join(", ")]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:`required-${$}`,checked:S.is_required,onChange:ie=>et($,{is_required:ie.target.checked}),className:"rounded"}),a.jsx(he,{htmlFor:`required-${$}`,children:t("surveys.isRequired")})]})]}),a.jsx(q,{variant:"ghost",size:"sm",onClick:()=>Ke($),className:"text-red-500 hover:text-red-700",children:a.jsx(wr,{className:"h-4 w-4"})})]})},$)})}),a.jsx("div",{className:"flex justify-center pt-4",children:a.jsxs(q,{onClick:Re,size:"sm",variant:"outline",children:[a.jsx(xt,{className:"h-4 w-4 mr-2"}),t("surveys.addField")]})})]})]}),a.jsxs(ar,{children:[a.jsx(q,{variant:"outline",onClick:()=>Y(!1),disabled:de,children:t("buttons.cancel")}),a.jsx(q,{onClick:U,disabled:!I.template_name.trim()||de,children:t(de?"buttons.saving":M?"surveys.updateTemplate":"surveys.createTemplate")})]})]})})]})}function uW(){const{t}=Xe(),{user:e}=yt(),[r,n]=f.useState([]),[s,o]=f.useState(!0),[i,l]=f.useState(null),[c,u]=f.useState(""),[d,h]=f.useState(null),[m,p]=f.useState(!1),[v,g]=f.useState("leads"),[w,y]=f.useState(""),[x,_]=f.useState("");if((e==null?void 0:e.role)!=="admin")return a.jsx(bp,{to:"/",replace:!0});f.useEffect(()=>{b()},[]);const b=async()=>{try{o(!0);const P=await pr.getAll();n(P.filter(z=>z.project_id===null))}catch(P){console.error("Failed to load stages:",P)}finally{o(!1)}},j=P=>r.filter(z=>z.stage_type===P).sort((z,B)=>(z.stager_order_index??0)-(B.stager_order_index??0)),N=async()=>{if(w.trim())try{const P=j(v),z=P.length>0?Math.max(...P.map(Q=>Q.stager_order_index||0)):-1,B={stage_name:w.trim(),stage_name_ar:x.trim()||null,stage_type:v,stager_order_index:z+1,project_id:null,color:"border-l-4 border-gray-400",color_var:"--gray-400"};await pr.create(B),await b(),y(""),_(""),p(!1)}catch(P){console.error("Failed to create stage:",P)}},k=async(P,z)=>{try{await pr.update(P.stage_id,z),await b(),l(null),u("")}catch(B){console.error("Failed to update stage:",B)}},E=async P=>{try{await pr.delete(P),await b(),h(null)}catch(z){console.error("Failed to delete stage:",z)}},T=P=>{const z=j(P);return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:t(`settings.${P}`)}),a.jsxs(q,{size:"sm",onClick:()=>{g(P),p(!0)},children:[a.jsx(xt,{className:"h-4 w-4 mr-2"}),t("settings.addStage")]})]}),z.length===0?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:t("settings.noStages")}):a.jsx("div",{className:"space-y-2",children:z.map((B,Q)=>a.jsx(xe,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(_v,{className:"h-5 w-5 text-muted-foreground cursor-move"}),(i==null?void 0:i.stage_id)===B.stage_id?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx(je,{value:i.stage_name,onChange:R=>l({...i,stage_name:R.target.value}),placeholder:t("settings.englishName"),autoFocus:!0}),a.jsx(je,{value:c,onChange:R=>u(R.target.value),placeholder:t("settings.arabicName"),dir:"rtl"})]}),a.jsx(q,{size:"sm",variant:"ghost",onClick:()=>k(B,{stage_name:i.stage_name,stage_name_ar:c||null}),children:a.jsx(cs,{className:"h-4 w-4"})}),a.jsx(q,{size:"sm",variant:"ghost",onClick:()=>{l(null),u("")},children:a.jsx(Ec,{className:"h-4 w-4"})})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium",children:H(B,"stage_name")}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[t("settings.order"),": ",B.stager_order_index]})]}),a.jsx(q,{size:"sm",variant:"ghost",onClick:()=>{l(B),u(B.stage_name_ar||"")},children:a.jsx(bh,{className:"h-4 w-4"})}),a.jsx(q,{size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive",onClick:()=>h(B.stage_id),children:a.jsx(wr,{className:"h-4 w-4"})})]})]})},B.stage_id))})]})};return s?a.jsx("div",{className:"flex items-center justify-center h-full py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:t("settings.title")}),a.jsx("p",{className:"text-muted-foreground",children:t("settings.description")})]}),a.jsxs(Gc,{defaultValue:"stages",className:"space-y-4",children:[a.jsx(Xi,{children:a.jsx(Yr,{value:"stages",children:t("settings.stageManagement")})}),a.jsx(Qr,{value:"stages",className:"space-y-6",children:a.jsxs("div",{className:"grid gap-6",children:[a.jsxs(xe,{children:[a.jsx(Ie,{children:a.jsx(qe,{children:t("settings.leads")})}),a.jsx(_e,{children:T("leads")})]}),a.jsxs(xe,{children:[a.jsx(Ie,{children:a.jsx(qe,{children:t("settings.projects")})}),a.jsx(_e,{children:T("projects")})]}),a.jsxs(xe,{children:[a.jsx(Ie,{children:a.jsx(qe,{children:t("settings.tasks")})}),a.jsx(_e,{children:T("tasks")})]}),a.jsxs(xe,{children:[a.jsx(Ie,{children:a.jsx(qe,{children:t("settings.tickets")})}),a.jsx(_e,{children:T("tickets")})]})]})})]}),a.jsx(Ot,{open:m,onOpenChange:p,children:a.jsxs(Nt,{children:[a.jsxs(kt,{children:[a.jsx(Ct,{children:t("settings.addStage")}),a.jsx(or,{children:t("settings.addStageDesc",{type:t(`settings.${v}`)})})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"stage-name",children:t("settings.englishName")}),a.jsx(je,{id:"stage-name",value:w,onChange:P=>y(P.target.value),placeholder:t("settings.stageNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"stage-name-ar",children:t("settings.arabicName")}),a.jsx(je,{id:"stage-name-ar",value:x,onChange:P=>_(P.target.value),placeholder:t("settings.stageNamePlaceholder"),dir:"rtl"})]})]}),a.jsxs(ar,{children:[a.jsx(q,{variant:"outline",onClick:()=>p(!1),children:t("buttons.cancel")}),a.jsx(q,{onClick:N,disabled:!w.trim(),children:t("buttons.create")})]})]})}),a.jsx(ka,{open:!!d,onOpenChange:P=>!P&&h(null),children:a.jsxs(vs,{children:[a.jsxs(xs,{children:[a.jsx(ws,{children:t("settings.deleteStage")}),a.jsx(_s,{children:t("settings.deleteStageConfirmation")})]}),a.jsxs(ys,{children:[a.jsx(js,{children:t("buttons.cancel")}),a.jsx(bs,{onClick:()=>d&&E(d),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:t("buttons.delete")})]})]})})]})}const dW=()=>a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Unauthorized Access"}),a.jsx("p",{className:"mb-4",children:"You don't have permission to view this page."}),a.jsx("button",{onClick:()=>window.history.back(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Go Back"})]})});console.log(" SUPABASE URL (runtime):","https://studio.middar.com/");const hW=()=>{const{user:t}=yt();return(t==null?void 0:t.role)==="client"?a.jsx(Jz,{}):a.jsx(Qz,{})},$0=({children:t})=>a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-900 dark:to-slate-800",children:t});function fW(){return a.jsx(ID,{children:a.jsx(GS,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:a.jsx(fI,{children:a.jsx(dI,{children:a.jsx(mW,{})})})})})}function mW(){const{isRTL:t}=_a(),e=xa(),{t:r}=Xe();return f.useEffect(()=>{document.documentElement.dir=t?"rtl":"ltr"},[t]),f.useEffect(()=>{const n=e.pathname.split("/").filter(c=>c),s="Middar CRM";if(n.length===0){document.title=s;return}const o=n[n.length-1],i={dashboard:"navigation.dashboard",projects:"navigation.projects",users:"navigation.users",settings:"navigation.settings",leads:"navigation.leads",tickets:"navigation.tickets",tasks:"navigation.tasks",teams:"navigation.teams",clients:"navigation.clients",chats:"navigation.chats",surveys:"navigation.surveys","client-portal":"navigation.clientPortal","partner-dashboard":"navigation.partnerDashboard",employee_dashboard:"navigation.empDashboard","partner-employee-dashboard":"auth.partnerEmployee"};let l="";if(i[o])l=r(i[o]);else if(/^\d+$/.test(o)||o.length>20)if(n.length>1){const c=n[n.length-2];i[c]?l=`${r(i[c])} - ${o}`:l=o}else l=o;else l=o.split("-").map(c=>c.charAt(0).toUpperCase()+c.slice(1)).join(" ");document.title=`${l} | ${s}`},[e,r]),a.jsxs(PD,{children:[a.jsx(pt,{path:"/login",element:a.jsx($0,{children:a.jsx(GL,{})})}),a.jsx(pt,{path:"/signup",element:a.jsx($0,{children:a.jsx(YL,{})})}),a.jsx(pt,{path:"/unauthorized",element:a.jsx(dW,{})}),a.jsx(pt,{path:"/auth/callback",element:a.jsx(eW,{})}),a.jsx(pt,{path:"/",element:a.jsx(Zz,{})}),a.jsx(pt,{path:"/dashboard",element:a.jsx(Qt,{allowedRoles:["admin","manager"],children:a.jsx(Jt,{children:a.jsx(aU,{})})})}),a.jsx(pt,{path:"/employee_dashboard",element:a.jsx(Qt,{allowedRoles:["employee","team_leader"],children:a.jsx(Jt,{children:a.jsx(dU,{})})})}),a.jsx(pt,{path:"/leads",element:a.jsx(Qt,{allowedRoles:["admin","manager","employee","team_leader"],children:a.jsx(Jt,{children:a.jsx(wz,{})})})}),a.jsx(pt,{path:"/projects",element:a.jsx(Qt,{allowedRoles:["admin","manager","employee","team_leader"],children:a.jsx(Jt,{children:a.jsx(Nz,{})})})}),a.jsx(pt,{path:"/tasks",element:a.jsx(Qt,{allowedRoles:["admin","manager","employee","team_leader"],children:a.jsx(Jt,{children:a.jsx(bz,{})})})}),a.jsx(pt,{path:"/tickets",element:a.jsx(Qt,{allowedRoles:["admin","manager","employee","team_leader","client"],children:a.jsx(Jt,{children:a.jsx(jz,{})})})}),a.jsx(pt,{path:"/users",element:a.jsx(Qt,{allowedRoles:["admin"],children:a.jsx(Jt,{children:a.jsx($z,{})})})}),a.jsx(pt,{path:"/settings",element:a.jsx(Qt,{allowedRoles:["admin"],children:a.jsx(Jt,{children:a.jsx(uW,{})})})}),a.jsx(pt,{path:"/teams",element:a.jsx(Qt,{allowedRoles:["admin","manager","employee","team_leader"],children:a.jsx(Jt,{children:a.jsx(Uz,{})})})}),a.jsx(pt,{path:"/chats",element:a.jsx(Qt,{allowedRoles:["admin","manager","employee","team_leader","client"],children:a.jsx(Jt,{children:a.jsx(hW,{})})})}),a.jsx(pt,{path:"/client-portal",element:a.jsx(Qt,{allowedRoles:["client"],children:a.jsx(Jt,{children:a.jsx(Xz,{})})})}),a.jsx(pt,{path:"/partner-dashboard",element:a.jsx(Qt,{allowedRoles:["partner"],children:a.jsx(Jt,{children:a.jsx(tW,{})})})}),a.jsx(pt,{path:"/partner-employee-dashboard",element:a.jsx(Qt,{allowedRoles:["partner_employee"],children:a.jsx(Jt,{children:a.jsx(rW,{})})})}),a.jsx(pt,{path:"/project/:id",element:a.jsx(Qt,{allowedRoles:["admin","manager"],children:a.jsx(kE,{})})}),a.jsx(pt,{path:"/surveys",element:a.jsx(Qt,{allowedRoles:["admin","manager","employee","team_leader"],children:a.jsx(Jt,{children:a.jsx(cW,{})})})}),a.jsx(pt,{path:"*",element:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("h1",{children:"404 - Page Not Found"})})})]})}const pW=new zT({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:10*60*1e3}}});uj(document.getElementById("root")).render(a.jsx(QR,{i18n:dt,children:a.jsx(KT,{client:pW,children:a.jsx(GS,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:a.jsx(fW,{})})})}));
