var bg=t=>{throw TypeError(t)};var _d=(t,e,r)=>e.has(t)||bg("Cannot "+r);var R=(t,e,r)=>(_d(t,e,"read from private field"),r?r.call(t):e.get(t)),le=(t,e,r)=>e.has(t)?bg("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),te=(t,e,r,n)=>(_d(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),je=(t,e,r)=>(_d(t,e,"access private method"),r);var Dl=(t,e,r,n)=>({set _(s){te(t,e,s,r)},get _(){return R(t,e,n)}});function Ty(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();function Ry(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Oy(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var Ay={exports:{}},Nu={},Iy={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ml=Symbol.for("react.element"),rk=Symbol.for("react.portal"),nk=Symbol.for("react.fragment"),sk=Symbol.for("react.strict_mode"),ok=Symbol.for("react.profiler"),ak=Symbol.for("react.provider"),ik=Symbol.for("react.context"),lk=Symbol.for("react.forward_ref"),ck=Symbol.for("react.suspense"),uk=Symbol.for("react.memo"),dk=Symbol.for("react.lazy"),_g=Symbol.iterator;function hk(t){return t===null||typeof t!="object"?null:(t=_g&&t[_g]||t["@@iterator"],typeof t=="function"?t:null)}var Dy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ly=Object.assign,My={};function Fa(t,e,r){this.props=t,this.context=e,this.refs=My,this.updater=r||Dy}Fa.prototype.isReactComponent={};Fa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function $y(){}$y.prototype=Fa.prototype;function um(t,e,r){this.props=t,this.context=e,this.refs=My,this.updater=r||Dy}var dm=um.prototype=new $y;dm.constructor=um;Ly(dm,Fa.prototype);dm.isPureReactComponent=!0;var jg=Array.isArray,Fy=Object.prototype.hasOwnProperty,hm={current:null},Uy={key:!0,ref:!0,__self:!0,__source:!0};function By(t,e,r){var n,s={},o=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(o=""+e.key),e)Fy.call(e,n)&&!Uy.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:ml,type:t,key:o,ref:i,props:s,_owner:hm.current}}function fk(t,e){return{$$typeof:ml,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fm(t){return typeof t=="object"&&t!==null&&t.$$typeof===ml}function mk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Sg=/\/+/g;function jd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mk(""+t.key):e.toString(36)}function gc(t,e,r,n,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case ml:case rk:i=!0}}if(i)return i=t,s=s(i),t=n===""?"."+jd(i,0):n,jg(s)?(r="",t!=null&&(r=t.replace(Sg,"$&/")+"/"),gc(s,e,r,"",function(u){return u})):s!=null&&(fm(s)&&(s=fk(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Sg,"$&/")+"/")+t)),e.push(s)),1;if(i=0,n=n===""?".":n+":",jg(t))for(var l=0;l<t.length;l++){o=t[l];var c=n+jd(o,l);i+=gc(o,e,r,c,s)}else if(c=hk(t),typeof c=="function")for(t=c.call(t),l=0;!(o=t.next()).done;)o=o.value,c=n+jd(o,l++),i+=gc(o,e,r,c,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Ll(t,e,r){if(t==null)return t;var n=[],s=0;return gc(t,n,"","",function(o){return e.call(r,o,s++)}),n}function pk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Lt={current:null},vc={transition:null},gk={ReactCurrentDispatcher:Lt,ReactCurrentBatchConfig:vc,ReactCurrentOwner:hm};function zy(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:Ll,forEach:function(t,e,r){Ll(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Ll(t,function(){e++}),e},toArray:function(t){return Ll(t,function(e){return e})||[]},only:function(t){if(!fm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_e.Component=Fa;_e.Fragment=nk;_e.Profiler=ok;_e.PureComponent=um;_e.StrictMode=sk;_e.Suspense=ck;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gk;_e.act=zy;_e.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Ly({},t.props),s=t.key,o=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,i=hm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Fy.call(e,c)&&!Uy.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:ml,type:t.type,key:s,ref:o,props:n,_owner:i}};_e.createContext=function(t){return t={$$typeof:ik,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ak,_context:t},t.Consumer=t};_e.createElement=By;_e.createFactory=function(t){var e=By.bind(null,t);return e.type=t,e};_e.createRef=function(){return{current:null}};_e.forwardRef=function(t){return{$$typeof:lk,render:t}};_e.isValidElement=fm;_e.lazy=function(t){return{$$typeof:dk,_payload:{_status:-1,_result:t},_init:pk}};_e.memo=function(t,e){return{$$typeof:uk,type:t,compare:e===void 0?null:e}};_e.startTransition=function(t){var e=vc.transition;vc.transition={};try{t()}finally{vc.transition=e}};_e.unstable_act=zy;_e.useCallback=function(t,e){return Lt.current.useCallback(t,e)};_e.useContext=function(t){return Lt.current.useContext(t)};_e.useDebugValue=function(){};_e.useDeferredValue=function(t){return Lt.current.useDeferredValue(t)};_e.useEffect=function(t,e){return Lt.current.useEffect(t,e)};_e.useId=function(){return Lt.current.useId()};_e.useImperativeHandle=function(t,e,r){return Lt.current.useImperativeHandle(t,e,r)};_e.useInsertionEffect=function(t,e){return Lt.current.useInsertionEffect(t,e)};_e.useLayoutEffect=function(t,e){return Lt.current.useLayoutEffect(t,e)};_e.useMemo=function(t,e){return Lt.current.useMemo(t,e)};_e.useReducer=function(t,e,r){return Lt.current.useReducer(t,e,r)};_e.useRef=function(t){return Lt.current.useRef(t)};_e.useState=function(t){return Lt.current.useState(t)};_e.useSyncExternalStore=function(t,e,r){return Lt.current.useSyncExternalStore(t,e,r)};_e.useTransition=function(){return Lt.current.useTransition()};_e.version="18.3.1";Iy.exports=_e;var f=Iy.exports;const An=Ry(f),mm=Ty({__proto__:null,default:An},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vk=f,xk=Symbol.for("react.element"),yk=Symbol.for("react.fragment"),wk=Object.prototype.hasOwnProperty,bk=vk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_k={key:!0,ref:!0,__self:!0,__source:!0};function Vy(t,e,r){var n,s={},o=null,i=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)wk.call(e,n)&&!_k.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:xk,type:t,key:o,ref:i,props:s,_owner:bk.current}}Nu.Fragment=yk;Nu.jsx=Vy;Nu.jsxs=Vy;Ay.exports=Nu;var a=Ay.exports,Wy={exports:{}},sr={},Hy={exports:{}},qy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,$){var S=D.length;D.push($);e:for(;0<S;){var M=S-1>>>1,Y=D[M];if(0<s(Y,$))D[M]=$,D[S]=Y,S=M;else break e}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var $=D[0],S=D.pop();if(S!==$){D[0]=S;e:for(var M=0,Y=D.length,ye=Y>>>1;M<ye;){var pe=2*(M+1)-1,ve=D[pe],ke=pe+1,Z=D[ke];if(0>s(ve,S))ke<Y&&0>s(Z,ve)?(D[M]=Z,D[ke]=S,M=ke):(D[M]=ve,D[pe]=S,M=pe);else if(ke<Y&&0>s(Z,S))D[M]=Z,D[ke]=S,M=ke;else break e}}return $}function s(D,$){var S=D.sortIndex-$.sortIndex;return S!==0?S:D.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,h=null,m=3,p=!1,y=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var $=r(u);$!==null;){if($.callback===null)n(u);else if($.startTime<=D)n(u),$.sortIndex=$.expirationTime,e(c,$);else break;$=r(u)}}function _(D){if(g=!1,w(D),!y)if(r(c)!==null)y=!0,I(j);else{var $=r(u);$!==null&&U(_,$.startTime-D)}}function j(D,$){y=!1,g&&(g=!1,b(P),P=-1),p=!0;var S=m;try{for(w($),h=r(c);h!==null&&(!(h.expirationTime>$)||D&&!L());){var M=h.callback;if(typeof M=="function"){h.callback=null,m=h.priorityLevel;var Y=M(h.expirationTime<=$);$=t.unstable_now(),typeof Y=="function"?h.callback=Y:h===r(c)&&n(c),w($)}else n(c);h=r(c)}if(h!==null)var ye=!0;else{var pe=r(u);pe!==null&&U(_,pe.startTime-$),ye=!1}return ye}finally{h=null,m=S,p=!1}}var k=!1,C=null,P=-1,N=5,E=-1;function L(){return!(t.unstable_now()-E<N)}function T(){if(C!==null){var D=t.unstable_now();E=D;var $=!0;try{$=C(!0,D)}finally{$?W():(k=!1,C=null)}}else k=!1}var W;if(typeof v=="function")W=function(){v(T)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,H=O.port2;O.port1.onmessage=T,W=function(){H.postMessage(null)}}else W=function(){x(T,0)};function I(D){C=D,k||(k=!0,W())}function U(D,$){P=x(function(){D(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,I(j))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(D){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var S=m;m=$;try{return D()}finally{m=S}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,$){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var S=m;m=D;try{return $()}finally{m=S}},t.unstable_scheduleCallback=function(D,$,S){var M=t.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?M+S:M):S=M,D){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=S+Y,D={id:d++,callback:$,priorityLevel:D,startTime:S,expirationTime:Y,sortIndex:-1},S>M?(D.sortIndex=S,e(u,D),r(c)===null&&D===r(u)&&(g?(b(P),P=-1):g=!0,U(_,S-M))):(D.sortIndex=Y,e(c,D),y||p||(y=!0,I(j))),D},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(D){var $=m;return function(){var S=m;m=$;try{return D.apply(this,arguments)}finally{m=S}}}})(qy);Hy.exports=qy;var jk=Hy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sk=f,nr=jk;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ky=new Set,Oi={};function co(t,e){ba(t,e),ba(t+"Capture",e)}function ba(t,e){for(Oi[t]=e,t=0;t<e.length;t++)Ky.add(e[t])}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bh=Object.prototype.hasOwnProperty,Nk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ng={},kg={};function kk(t){return bh.call(kg,t)?!0:bh.call(Ng,t)?!1:Nk.test(t)?kg[t]=!0:(Ng[t]=!0,!1)}function Ck(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ek(t,e,r,n){if(e===null||typeof e>"u"||Ck(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mt(t,e,r,n,s,o,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=i}var wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){wt[t]=new Mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];wt[e]=new Mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){wt[t]=new Mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){wt[t]=new Mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){wt[t]=new Mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){wt[t]=new Mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){wt[t]=new Mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){wt[t]=new Mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){wt[t]=new Mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var pm=/[\-:]([a-z])/g;function gm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(pm,gm);wt[e]=new Mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(pm,gm);wt[e]=new Mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(pm,gm);wt[e]=new Mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){wt[t]=new Mt(t,1,!1,t.toLowerCase(),null,!1,!1)});wt.xlinkHref=new Mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){wt[t]=new Mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function vm(t,e,r,n){var s=wt.hasOwnProperty(e)?wt[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ek(e,r,s,n)&&(r=null),n||s===null?kk(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var kn=Sk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ml=Symbol.for("react.element"),$o=Symbol.for("react.portal"),Fo=Symbol.for("react.fragment"),xm=Symbol.for("react.strict_mode"),_h=Symbol.for("react.profiler"),Gy=Symbol.for("react.provider"),Qy=Symbol.for("react.context"),ym=Symbol.for("react.forward_ref"),jh=Symbol.for("react.suspense"),Sh=Symbol.for("react.suspense_list"),wm=Symbol.for("react.memo"),Ln=Symbol.for("react.lazy"),Yy=Symbol.for("react.offscreen"),Cg=Symbol.iterator;function Xa(t){return t===null||typeof t!="object"?null:(t=Cg&&t[Cg]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,Sd;function ci(t){if(Sd===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Sd=e&&e[1]||""}return`
`+Sd+t}var Nd=!1;function kd(t,e){if(!t||Nd)return"";Nd=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=n.stack.split(`
`),i=s.length-1,l=o.length-1;1<=i&&0<=l&&s[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==o[l]){var c=`
`+s[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=l);break}}}finally{Nd=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ci(t):""}function Pk(t){switch(t.tag){case 5:return ci(t.type);case 16:return ci("Lazy");case 13:return ci("Suspense");case 19:return ci("SuspenseList");case 0:case 2:case 15:return t=kd(t.type,!1),t;case 11:return t=kd(t.type.render,!1),t;case 1:return t=kd(t.type,!0),t;default:return""}}function Nh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fo:return"Fragment";case $o:return"Portal";case _h:return"Profiler";case xm:return"StrictMode";case jh:return"Suspense";case Sh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Qy:return(t.displayName||"Context")+".Consumer";case Gy:return(t._context.displayName||"Context")+".Provider";case ym:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wm:return e=t.displayName||null,e!==null?e:Nh(t.type)||"Memo";case Ln:e=t._payload,t=t._init;try{return Nh(t(e))}catch{}}return null}function Tk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nh(e);case 8:return e===xm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Jy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Rk(t){var e=Jy(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,o.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $l(t){t._valueTracker||(t._valueTracker=Rk(t))}function Xy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Jy(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Ac(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function kh(t,e){var r=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Eg(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=cs(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Zy(t,e){e=e.checked,e!=null&&vm(t,"checked",e,!1)}function Ch(t,e){Zy(t,e);var r=cs(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Eh(t,e.type,r):e.hasOwnProperty("defaultValue")&&Eh(t,e.type,cs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Pg(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Eh(t,e,r){(e!=="number"||Ac(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var ui=Array.isArray;function Xo(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+cs(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ph(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Tg(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(q(92));if(ui(r)){if(1<r.length)throw Error(q(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:cs(r)}}function ew(t,e){var r=cs(e.value),n=cs(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Rg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function tw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Th(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?tw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fl,rw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fl=Fl||document.createElement("div"),Fl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ai(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var vi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ok=["Webkit","ms","Moz","O"];Object.keys(vi).forEach(function(t){Ok.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vi[e]=vi[t]})});function nw(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||vi.hasOwnProperty(t)&&vi[t]?(""+e).trim():e+"px"}function sw(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=nw(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var Ak=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rh(t,e){if(e){if(Ak[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function Oh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ah=null;function bm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ih=null,Zo=null,ea=null;function Og(t){if(t=vl(t)){if(typeof Ih!="function")throw Error(q(280));var e=t.stateNode;e&&(e=Tu(e),Ih(t.stateNode,t.type,e))}}function ow(t){Zo?ea?ea.push(t):ea=[t]:Zo=t}function aw(){if(Zo){var t=Zo,e=ea;if(ea=Zo=null,Og(t),e)for(t=0;t<e.length;t++)Og(e[t])}}function iw(t,e){return t(e)}function lw(){}var Cd=!1;function cw(t,e,r){if(Cd)return t(e,r);Cd=!0;try{return iw(t,e,r)}finally{Cd=!1,(Zo!==null||ea!==null)&&(lw(),aw())}}function Ii(t,e){var r=t.stateNode;if(r===null)return null;var n=Tu(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(q(231,e,typeof r));return r}var Dh=!1;if(wn)try{var Za={};Object.defineProperty(Za,"passive",{get:function(){Dh=!0}}),window.addEventListener("test",Za,Za),window.removeEventListener("test",Za,Za)}catch{Dh=!1}function Ik(t,e,r,n,s,o,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var xi=!1,Ic=null,Dc=!1,Lh=null,Dk={onError:function(t){xi=!0,Ic=t}};function Lk(t,e,r,n,s,o,i,l,c){xi=!1,Ic=null,Ik.apply(Dk,arguments)}function Mk(t,e,r,n,s,o,i,l,c){if(Lk.apply(this,arguments),xi){if(xi){var u=Ic;xi=!1,Ic=null}else throw Error(q(198));Dc||(Dc=!0,Lh=u)}}function uo(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function uw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ag(t){if(uo(t)!==t)throw Error(q(188))}function $k(t){var e=t.alternate;if(!e){if(e=uo(t),e===null)throw Error(q(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return Ag(s),t;if(o===n)return Ag(s),e;o=o.sibling}throw Error(q(188))}if(r.return!==n.return)r=s,n=o;else{for(var i=!1,l=s.child;l;){if(l===r){i=!0,r=s,n=o;break}if(l===n){i=!0,n=s,r=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===r){i=!0,r=o,n=s;break}if(l===n){i=!0,n=o,r=s;break}l=l.sibling}if(!i)throw Error(q(189))}}if(r.alternate!==n)throw Error(q(190))}if(r.tag!==3)throw Error(q(188));return r.stateNode.current===r?t:e}function dw(t){return t=$k(t),t!==null?hw(t):null}function hw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=hw(t);if(e!==null)return e;t=t.sibling}return null}var fw=nr.unstable_scheduleCallback,Ig=nr.unstable_cancelCallback,Fk=nr.unstable_shouldYield,Uk=nr.unstable_requestPaint,rt=nr.unstable_now,Bk=nr.unstable_getCurrentPriorityLevel,_m=nr.unstable_ImmediatePriority,mw=nr.unstable_UserBlockingPriority,Lc=nr.unstable_NormalPriority,zk=nr.unstable_LowPriority,pw=nr.unstable_IdlePriority,ku=null,Xr=null;function Vk(t){if(Xr&&typeof Xr.onCommitFiberRoot=="function")try{Xr.onCommitFiberRoot(ku,t,void 0,(t.current.flags&128)===128)}catch{}}var Dr=Math.clz32?Math.clz32:qk,Wk=Math.log,Hk=Math.LN2;function qk(t){return t>>>=0,t===0?32:31-(Wk(t)/Hk|0)|0}var Ul=64,Bl=4194304;function di(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Mc(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,o=t.pingedLanes,i=r&268435455;if(i!==0){var l=i&~s;l!==0?n=di(l):(o&=i,o!==0&&(n=di(o)))}else i=r&~s,i!==0?n=di(i):o!==0&&(n=di(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Dr(e),s=1<<r,n|=t[r],e&=~s;return n}function Kk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gk(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var i=31-Dr(o),l=1<<i,c=s[i];c===-1?(!(l&r)||l&n)&&(s[i]=Kk(l,e)):c<=e&&(t.expiredLanes|=l),o&=~l}}function Mh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function gw(){var t=Ul;return Ul<<=1,!(Ul&4194240)&&(Ul=64),t}function Ed(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function pl(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Dr(e),t[e]=r}function Qk(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Dr(r),o=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~o}}function jm(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Dr(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Ae=0;function vw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xw,Sm,yw,ww,bw,$h=!1,zl=[],Zn=null,es=null,ts=null,Di=new Map,Li=new Map,$n=[],Yk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dg(t,e){switch(t){case"focusin":case"focusout":Zn=null;break;case"dragenter":case"dragleave":es=null;break;case"mouseover":case"mouseout":ts=null;break;case"pointerover":case"pointerout":Di.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Li.delete(e.pointerId)}}function ei(t,e,r,n,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[s]},e!==null&&(e=vl(e),e!==null&&Sm(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Jk(t,e,r,n,s){switch(e){case"focusin":return Zn=ei(Zn,t,e,r,n,s),!0;case"dragenter":return es=ei(es,t,e,r,n,s),!0;case"mouseover":return ts=ei(ts,t,e,r,n,s),!0;case"pointerover":var o=s.pointerId;return Di.set(o,ei(Di.get(o)||null,t,e,r,n,s)),!0;case"gotpointercapture":return o=s.pointerId,Li.set(o,ei(Li.get(o)||null,t,e,r,n,s)),!0}return!1}function _w(t){var e=Rs(t.target);if(e!==null){var r=uo(e);if(r!==null){if(e=r.tag,e===13){if(e=uw(r),e!==null){t.blockedOn=e,bw(t.priority,function(){yw(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Fh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Ah=n,r.target.dispatchEvent(n),Ah=null}else return e=vl(r),e!==null&&Sm(e),t.blockedOn=r,!1;e.shift()}return!0}function Lg(t,e,r){xc(t)&&r.delete(e)}function Xk(){$h=!1,Zn!==null&&xc(Zn)&&(Zn=null),es!==null&&xc(es)&&(es=null),ts!==null&&xc(ts)&&(ts=null),Di.forEach(Lg),Li.forEach(Lg)}function ti(t,e){t.blockedOn===e&&(t.blockedOn=null,$h||($h=!0,nr.unstable_scheduleCallback(nr.unstable_NormalPriority,Xk)))}function Mi(t){function e(s){return ti(s,t)}if(0<zl.length){ti(zl[0],t);for(var r=1;r<zl.length;r++){var n=zl[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Zn!==null&&ti(Zn,t),es!==null&&ti(es,t),ts!==null&&ti(ts,t),Di.forEach(e),Li.forEach(e),r=0;r<$n.length;r++)n=$n[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<$n.length&&(r=$n[0],r.blockedOn===null);)_w(r),r.blockedOn===null&&$n.shift()}var ta=kn.ReactCurrentBatchConfig,$c=!0;function Zk(t,e,r,n){var s=Ae,o=ta.transition;ta.transition=null;try{Ae=1,Nm(t,e,r,n)}finally{Ae=s,ta.transition=o}}function eC(t,e,r,n){var s=Ae,o=ta.transition;ta.transition=null;try{Ae=4,Nm(t,e,r,n)}finally{Ae=s,ta.transition=o}}function Nm(t,e,r,n){if($c){var s=Fh(t,e,r,n);if(s===null)$d(t,e,n,Fc,r),Dg(t,n);else if(Jk(s,t,e,r,n))n.stopPropagation();else if(Dg(t,n),e&4&&-1<Yk.indexOf(t)){for(;s!==null;){var o=vl(s);if(o!==null&&xw(o),o=Fh(t,e,r,n),o===null&&$d(t,e,n,Fc,r),o===s)break;s=o}s!==null&&n.stopPropagation()}else $d(t,e,n,null,r)}}var Fc=null;function Fh(t,e,r,n){if(Fc=null,t=bm(n),t=Rs(t),t!==null)if(e=uo(t),e===null)t=null;else if(r=e.tag,r===13){if(t=uw(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Fc=t,null}function jw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bk()){case _m:return 1;case mw:return 4;case Lc:case zk:return 16;case pw:return 536870912;default:return 16}default:return 16}}var Qn=null,km=null,yc=null;function Sw(){if(yc)return yc;var t,e=km,r=e.length,n,s="value"in Qn?Qn.value:Qn.textContent,o=s.length;for(t=0;t<r&&e[t]===s[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===s[o-n];n++);return yc=s.slice(t,1<n?1-n:void 0)}function wc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Vl(){return!0}function Mg(){return!1}function or(t){function e(r,n,s,o,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Vl:Mg,this.isPropagationStopped=Mg,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Vl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Vl)},persist:function(){},isPersistent:Vl}),e}var Ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cm=or(Ua),gl=Ge({},Ua,{view:0,detail:0}),tC=or(gl),Pd,Td,ri,Cu=Ge({},gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Em,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ri&&(ri&&t.type==="mousemove"?(Pd=t.screenX-ri.screenX,Td=t.screenY-ri.screenY):Td=Pd=0,ri=t),Pd)},movementY:function(t){return"movementY"in t?t.movementY:Td}}),$g=or(Cu),rC=Ge({},Cu,{dataTransfer:0}),nC=or(rC),sC=Ge({},gl,{relatedTarget:0}),Rd=or(sC),oC=Ge({},Ua,{animationName:0,elapsedTime:0,pseudoElement:0}),aC=or(oC),iC=Ge({},Ua,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lC=or(iC),cC=Ge({},Ua,{data:0}),Fg=or(cC),uC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hC[t])?!!e[t]:!1}function Em(){return fC}var mC=Ge({},gl,{key:function(t){if(t.key){var e=uC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Em,charCode:function(t){return t.type==="keypress"?wc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pC=or(mC),gC=Ge({},Cu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ug=or(gC),vC=Ge({},gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Em}),xC=or(vC),yC=Ge({},Ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),wC=or(yC),bC=Ge({},Cu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_C=or(bC),jC=[9,13,27,32],Pm=wn&&"CompositionEvent"in window,yi=null;wn&&"documentMode"in document&&(yi=document.documentMode);var SC=wn&&"TextEvent"in window&&!yi,Nw=wn&&(!Pm||yi&&8<yi&&11>=yi),Bg=" ",zg=!1;function kw(t,e){switch(t){case"keyup":return jC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Uo=!1;function NC(t,e){switch(t){case"compositionend":return Cw(e);case"keypress":return e.which!==32?null:(zg=!0,Bg);case"textInput":return t=e.data,t===Bg&&zg?null:t;default:return null}}function kC(t,e){if(Uo)return t==="compositionend"||!Pm&&kw(t,e)?(t=Sw(),yc=km=Qn=null,Uo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Nw&&e.locale!=="ko"?null:e.data;default:return null}}var CC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!CC[t.type]:e==="textarea"}function Ew(t,e,r,n){ow(n),e=Uc(e,"onChange"),0<e.length&&(r=new Cm("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var wi=null,$i=null;function EC(t){Fw(t,0)}function Eu(t){var e=Vo(t);if(Xy(e))return t}function PC(t,e){if(t==="change")return e}var Pw=!1;if(wn){var Od;if(wn){var Ad="oninput"in document;if(!Ad){var Wg=document.createElement("div");Wg.setAttribute("oninput","return;"),Ad=typeof Wg.oninput=="function"}Od=Ad}else Od=!1;Pw=Od&&(!document.documentMode||9<document.documentMode)}function Hg(){wi&&(wi.detachEvent("onpropertychange",Tw),$i=wi=null)}function Tw(t){if(t.propertyName==="value"&&Eu($i)){var e=[];Ew(e,$i,t,bm(t)),cw(EC,e)}}function TC(t,e,r){t==="focusin"?(Hg(),wi=e,$i=r,wi.attachEvent("onpropertychange",Tw)):t==="focusout"&&Hg()}function RC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Eu($i)}function OC(t,e){if(t==="click")return Eu(e)}function AC(t,e){if(t==="input"||t==="change")return Eu(e)}function IC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mr=typeof Object.is=="function"?Object.is:IC;function Fi(t,e){if(Mr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!bh.call(e,s)||!Mr(t[s],e[s]))return!1}return!0}function qg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kg(t,e){var r=qg(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=qg(r)}}function Rw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Rw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ow(){for(var t=window,e=Ac();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Ac(t.document)}return e}function Tm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function DC(t){var e=Ow(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Rw(r.ownerDocument.documentElement,r)){if(n!==null&&Tm(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,o=Math.min(n.start,s);n=n.end===void 0?o:Math.min(n.end,s),!t.extend&&o>n&&(s=n,n=o,o=s),s=Kg(r,o);var i=Kg(r,n);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var LC=wn&&"documentMode"in document&&11>=document.documentMode,Bo=null,Uh=null,bi=null,Bh=!1;function Gg(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Bh||Bo==null||Bo!==Ac(n)||(n=Bo,"selectionStart"in n&&Tm(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),bi&&Fi(bi,n)||(bi=n,n=Uc(Uh,"onSelect"),0<n.length&&(e=new Cm("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Bo)))}function Wl(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var zo={animationend:Wl("Animation","AnimationEnd"),animationiteration:Wl("Animation","AnimationIteration"),animationstart:Wl("Animation","AnimationStart"),transitionend:Wl("Transition","TransitionEnd")},Id={},Aw={};wn&&(Aw=document.createElement("div").style,"AnimationEvent"in window||(delete zo.animationend.animation,delete zo.animationiteration.animation,delete zo.animationstart.animation),"TransitionEvent"in window||delete zo.transitionend.transition);function Pu(t){if(Id[t])return Id[t];if(!zo[t])return t;var e=zo[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Aw)return Id[t]=e[r];return t}var Iw=Pu("animationend"),Dw=Pu("animationiteration"),Lw=Pu("animationstart"),Mw=Pu("transitionend"),$w=new Map,Qg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ms(t,e){$w.set(t,e),co(e,[t])}for(var Dd=0;Dd<Qg.length;Dd++){var Ld=Qg[Dd],MC=Ld.toLowerCase(),$C=Ld[0].toUpperCase()+Ld.slice(1);ms(MC,"on"+$C)}ms(Iw,"onAnimationEnd");ms(Dw,"onAnimationIteration");ms(Lw,"onAnimationStart");ms("dblclick","onDoubleClick");ms("focusin","onFocus");ms("focusout","onBlur");ms(Mw,"onTransitionEnd");ba("onMouseEnter",["mouseout","mouseover"]);ba("onMouseLeave",["mouseout","mouseover"]);ba("onPointerEnter",["pointerout","pointerover"]);ba("onPointerLeave",["pointerout","pointerover"]);co("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));co("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));co("onBeforeInput",["compositionend","keypress","textInput","paste"]);co("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));co("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));co("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FC=new Set("cancel close invalid load scroll toggle".split(" ").concat(hi));function Yg(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Mk(n,e,void 0,t),t.currentTarget=null}function Fw(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;Yg(s,l,u),o=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;Yg(s,l,u),o=c}}}if(Dc)throw t=Lh,Dc=!1,Lh=null,t}function Me(t,e){var r=e[qh];r===void 0&&(r=e[qh]=new Set);var n=t+"__bubble";r.has(n)||(Uw(e,t,2,!1),r.add(n))}function Md(t,e,r){var n=0;e&&(n|=4),Uw(r,t,n,e)}var Hl="_reactListening"+Math.random().toString(36).slice(2);function Ui(t){if(!t[Hl]){t[Hl]=!0,Ky.forEach(function(r){r!=="selectionchange"&&(FC.has(r)||Md(r,!1,t),Md(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Hl]||(e[Hl]=!0,Md("selectionchange",!1,e))}}function Uw(t,e,r,n){switch(jw(e)){case 1:var s=Zk;break;case 4:s=eC;break;default:s=Nm}r=s.bind(null,e,r,t),s=void 0,!Dh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function $d(t,e,r,n,s){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;l!==null;){if(i=Rs(l),i===null)return;if(c=i.tag,c===5||c===6){n=o=i;continue e}l=l.parentNode}}n=n.return}cw(function(){var u=o,d=bm(r),h=[];e:{var m=$w.get(t);if(m!==void 0){var p=Cm,y=t;switch(t){case"keypress":if(wc(r)===0)break e;case"keydown":case"keyup":p=pC;break;case"focusin":y="focus",p=Rd;break;case"focusout":y="blur",p=Rd;break;case"beforeblur":case"afterblur":p=Rd;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=$g;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=nC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=xC;break;case Iw:case Dw:case Lw:p=aC;break;case Mw:p=wC;break;case"scroll":p=tC;break;case"wheel":p=_C;break;case"copy":case"cut":case"paste":p=lC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Ug}var g=(e&4)!==0,x=!g&&t==="scroll",b=g?m!==null?m+"Capture":null:m;g=[];for(var v=u,w;v!==null;){w=v;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,b!==null&&(_=Ii(v,b),_!=null&&g.push(Bi(v,_,w)))),x)break;v=v.return}0<g.length&&(m=new p(m,y,null,r,d),h.push({event:m,listeners:g}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&r!==Ah&&(y=r.relatedTarget||r.fromElement)&&(Rs(y)||y[bn]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(y=r.relatedTarget||r.toElement,p=u,y=y?Rs(y):null,y!==null&&(x=uo(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(g=$g,_="onMouseLeave",b="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=Ug,_="onPointerLeave",b="onPointerEnter",v="pointer"),x=p==null?m:Vo(p),w=y==null?m:Vo(y),m=new g(_,v+"leave",p,r,d),m.target=x,m.relatedTarget=w,_=null,Rs(d)===u&&(g=new g(b,v+"enter",y,r,d),g.target=w,g.relatedTarget=x,_=g),x=_,p&&y)t:{for(g=p,b=y,v=0,w=g;w;w=No(w))v++;for(w=0,_=b;_;_=No(_))w++;for(;0<v-w;)g=No(g),v--;for(;0<w-v;)b=No(b),w--;for(;v--;){if(g===b||b!==null&&g===b.alternate)break t;g=No(g),b=No(b)}g=null}else g=null;p!==null&&Jg(h,m,p,g,!1),y!==null&&x!==null&&Jg(h,x,y,g,!0)}}e:{if(m=u?Vo(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var j=PC;else if(Vg(m))if(Pw)j=AC;else{j=RC;var k=TC}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=OC);if(j&&(j=j(t,u))){Ew(h,j,r,d);break e}k&&k(t,m,u),t==="focusout"&&(k=m._wrapperState)&&k.controlled&&m.type==="number"&&Eh(m,"number",m.value)}switch(k=u?Vo(u):window,t){case"focusin":(Vg(k)||k.contentEditable==="true")&&(Bo=k,Uh=u,bi=null);break;case"focusout":bi=Uh=Bo=null;break;case"mousedown":Bh=!0;break;case"contextmenu":case"mouseup":case"dragend":Bh=!1,Gg(h,r,d);break;case"selectionchange":if(LC)break;case"keydown":case"keyup":Gg(h,r,d)}var C;if(Pm)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Uo?kw(t,r)&&(P="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(Nw&&r.locale!=="ko"&&(Uo||P!=="onCompositionStart"?P==="onCompositionEnd"&&Uo&&(C=Sw()):(Qn=d,km="value"in Qn?Qn.value:Qn.textContent,Uo=!0)),k=Uc(u,P),0<k.length&&(P=new Fg(P,t,null,r,d),h.push({event:P,listeners:k}),C?P.data=C:(C=Cw(r),C!==null&&(P.data=C)))),(C=SC?NC(t,r):kC(t,r))&&(u=Uc(u,"onBeforeInput"),0<u.length&&(d=new Fg("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=C))}Fw(h,e)})}function Bi(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Uc(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Ii(t,r),o!=null&&n.unshift(Bi(t,o,s)),o=Ii(t,e),o!=null&&n.push(Bi(t,o,s))),t=t.return}return n}function No(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Jg(t,e,r,n,s){for(var o=e._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Ii(r,o),c!=null&&i.unshift(Bi(r,c,l))):s||(c=Ii(r,o),c!=null&&i.push(Bi(r,c,l)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var UC=/\r\n?/g,BC=/\u0000|\uFFFD/g;function Xg(t){return(typeof t=="string"?t:""+t).replace(UC,`
`).replace(BC,"")}function ql(t,e,r){if(e=Xg(e),Xg(t)!==e&&r)throw Error(q(425))}function Bc(){}var zh=null,Vh=null;function Wh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Hh=typeof setTimeout=="function"?setTimeout:void 0,zC=typeof clearTimeout=="function"?clearTimeout:void 0,Zg=typeof Promise=="function"?Promise:void 0,VC=typeof queueMicrotask=="function"?queueMicrotask:typeof Zg<"u"?function(t){return Zg.resolve(null).then(t).catch(WC)}:Hh;function WC(t){setTimeout(function(){throw t})}function Fd(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Mi(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Mi(e)}function rs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ev(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ba=Math.random().toString(36).slice(2),Gr="__reactFiber$"+Ba,zi="__reactProps$"+Ba,bn="__reactContainer$"+Ba,qh="__reactEvents$"+Ba,HC="__reactListeners$"+Ba,qC="__reactHandles$"+Ba;function Rs(t){var e=t[Gr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[bn]||r[Gr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=ev(t);t!==null;){if(r=t[Gr])return r;t=ev(t)}return e}t=r,r=t.parentNode}return null}function vl(t){return t=t[Gr]||t[bn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function Tu(t){return t[zi]||null}var Kh=[],Wo=-1;function ps(t){return{current:t}}function Fe(t){0>Wo||(t.current=Kh[Wo],Kh[Wo]=null,Wo--)}function De(t,e){Wo++,Kh[Wo]=t.current,t.current=e}var us={},kt=ps(us),Wt=ps(!1),Ys=us;function _a(t,e){var r=t.type.contextTypes;if(!r)return us;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ht(t){return t=t.childContextTypes,t!=null}function zc(){Fe(Wt),Fe(kt)}function tv(t,e,r){if(kt.current!==us)throw Error(q(168));De(kt,e),De(Wt,r)}function Bw(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(q(108,Tk(t)||"Unknown",s));return Ge({},r,n)}function Vc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||us,Ys=kt.current,De(kt,t),De(Wt,Wt.current),!0}function rv(t,e,r){var n=t.stateNode;if(!n)throw Error(q(169));r?(t=Bw(t,e,Ys),n.__reactInternalMemoizedMergedChildContext=t,Fe(Wt),Fe(kt),De(kt,t)):Fe(Wt),De(Wt,r)}var hn=null,Ru=!1,Ud=!1;function zw(t){hn===null?hn=[t]:hn.push(t)}function KC(t){Ru=!0,zw(t)}function gs(){if(!Ud&&hn!==null){Ud=!0;var t=0,e=Ae;try{var r=hn;for(Ae=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}hn=null,Ru=!1}catch(s){throw hn!==null&&(hn=hn.slice(t+1)),fw(_m,gs),s}finally{Ae=e,Ud=!1}}return null}var Ho=[],qo=0,Wc=null,Hc=0,dr=[],hr=0,Js=null,pn=1,gn="";function ks(t,e){Ho[qo++]=Hc,Ho[qo++]=Wc,Wc=t,Hc=e}function Vw(t,e,r){dr[hr++]=pn,dr[hr++]=gn,dr[hr++]=Js,Js=t;var n=pn;t=gn;var s=32-Dr(n)-1;n&=~(1<<s),r+=1;var o=32-Dr(e)+s;if(30<o){var i=s-s%5;o=(n&(1<<i)-1).toString(32),n>>=i,s-=i,pn=1<<32-Dr(e)+s|r<<s|n,gn=o+t}else pn=1<<o|r<<s|n,gn=t}function Rm(t){t.return!==null&&(ks(t,1),Vw(t,1,0))}function Om(t){for(;t===Wc;)Wc=Ho[--qo],Ho[qo]=null,Hc=Ho[--qo],Ho[qo]=null;for(;t===Js;)Js=dr[--hr],dr[hr]=null,gn=dr[--hr],dr[hr]=null,pn=dr[--hr],dr[hr]=null}var tr=null,er=null,Ue=!1,Ir=null;function Ww(t,e){var r=mr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function nv(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,tr=t,er=rs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,tr=t,er=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Js!==null?{id:pn,overflow:gn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=mr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,tr=t,er=null,!0):!1;default:return!1}}function Gh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Qh(t){if(Ue){var e=er;if(e){var r=e;if(!nv(t,e)){if(Gh(t))throw Error(q(418));e=rs(r.nextSibling);var n=tr;e&&nv(t,e)?Ww(n,r):(t.flags=t.flags&-4097|2,Ue=!1,tr=t)}}else{if(Gh(t))throw Error(q(418));t.flags=t.flags&-4097|2,Ue=!1,tr=t}}}function sv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tr=t}function Kl(t){if(t!==tr)return!1;if(!Ue)return sv(t),Ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Wh(t.type,t.memoizedProps)),e&&(e=er)){if(Gh(t))throw Hw(),Error(q(418));for(;e;)Ww(t,e),e=rs(e.nextSibling)}if(sv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){er=rs(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}er=null}}else er=tr?rs(t.stateNode.nextSibling):null;return!0}function Hw(){for(var t=er;t;)t=rs(t.nextSibling)}function ja(){er=tr=null,Ue=!1}function Am(t){Ir===null?Ir=[t]:Ir.push(t)}var GC=kn.ReactCurrentBatchConfig;function ni(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(q(309));var n=r.stateNode}if(!n)throw Error(q(147,t));var s=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(i){var l=s.refs;i===null?delete l[o]:l[o]=i},e._stringRef=o,e)}if(typeof t!="string")throw Error(q(284));if(!r._owner)throw Error(q(290,t))}return t}function Gl(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ov(t){var e=t._init;return e(t._payload)}function qw(t){function e(b,v){if(t){var w=b.deletions;w===null?(b.deletions=[v],b.flags|=16):w.push(v)}}function r(b,v){if(!t)return null;for(;v!==null;)e(b,v),v=v.sibling;return null}function n(b,v){for(b=new Map;v!==null;)v.key!==null?b.set(v.key,v):b.set(v.index,v),v=v.sibling;return b}function s(b,v){return b=as(b,v),b.index=0,b.sibling=null,b}function o(b,v,w){return b.index=w,t?(w=b.alternate,w!==null?(w=w.index,w<v?(b.flags|=2,v):w):(b.flags|=2,v)):(b.flags|=1048576,v)}function i(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,v,w,_){return v===null||v.tag!==6?(v=Kd(w,b.mode,_),v.return=b,v):(v=s(v,w),v.return=b,v)}function c(b,v,w,_){var j=w.type;return j===Fo?d(b,v,w.props.children,_,w.key):v!==null&&(v.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ln&&ov(j)===v.type)?(_=s(v,w.props),_.ref=ni(b,v,w),_.return=b,_):(_=Cc(w.type,w.key,w.props,null,b.mode,_),_.ref=ni(b,v,w),_.return=b,_)}function u(b,v,w,_){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Gd(w,b.mode,_),v.return=b,v):(v=s(v,w.children||[]),v.return=b,v)}function d(b,v,w,_,j){return v===null||v.tag!==7?(v=Hs(w,b.mode,_,j),v.return=b,v):(v=s(v,w),v.return=b,v)}function h(b,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Kd(""+v,b.mode,w),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ml:return w=Cc(v.type,v.key,v.props,null,b.mode,w),w.ref=ni(b,null,v),w.return=b,w;case $o:return v=Gd(v,b.mode,w),v.return=b,v;case Ln:var _=v._init;return h(b,_(v._payload),w)}if(ui(v)||Xa(v))return v=Hs(v,b.mode,w,null),v.return=b,v;Gl(b,v)}return null}function m(b,v,w,_){var j=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(b,v,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ml:return w.key===j?c(b,v,w,_):null;case $o:return w.key===j?u(b,v,w,_):null;case Ln:return j=w._init,m(b,v,j(w._payload),_)}if(ui(w)||Xa(w))return j!==null?null:d(b,v,w,_,null);Gl(b,w)}return null}function p(b,v,w,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return b=b.get(w)||null,l(v,b,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ml:return b=b.get(_.key===null?w:_.key)||null,c(v,b,_,j);case $o:return b=b.get(_.key===null?w:_.key)||null,u(v,b,_,j);case Ln:var k=_._init;return p(b,v,w,k(_._payload),j)}if(ui(_)||Xa(_))return b=b.get(w)||null,d(v,b,_,j,null);Gl(v,_)}return null}function y(b,v,w,_){for(var j=null,k=null,C=v,P=v=0,N=null;C!==null&&P<w.length;P++){C.index>P?(N=C,C=null):N=C.sibling;var E=m(b,C,w[P],_);if(E===null){C===null&&(C=N);break}t&&C&&E.alternate===null&&e(b,C),v=o(E,v,P),k===null?j=E:k.sibling=E,k=E,C=N}if(P===w.length)return r(b,C),Ue&&ks(b,P),j;if(C===null){for(;P<w.length;P++)C=h(b,w[P],_),C!==null&&(v=o(C,v,P),k===null?j=C:k.sibling=C,k=C);return Ue&&ks(b,P),j}for(C=n(b,C);P<w.length;P++)N=p(C,b,P,w[P],_),N!==null&&(t&&N.alternate!==null&&C.delete(N.key===null?P:N.key),v=o(N,v,P),k===null?j=N:k.sibling=N,k=N);return t&&C.forEach(function(L){return e(b,L)}),Ue&&ks(b,P),j}function g(b,v,w,_){var j=Xa(w);if(typeof j!="function")throw Error(q(150));if(w=j.call(w),w==null)throw Error(q(151));for(var k=j=null,C=v,P=v=0,N=null,E=w.next();C!==null&&!E.done;P++,E=w.next()){C.index>P?(N=C,C=null):N=C.sibling;var L=m(b,C,E.value,_);if(L===null){C===null&&(C=N);break}t&&C&&L.alternate===null&&e(b,C),v=o(L,v,P),k===null?j=L:k.sibling=L,k=L,C=N}if(E.done)return r(b,C),Ue&&ks(b,P),j;if(C===null){for(;!E.done;P++,E=w.next())E=h(b,E.value,_),E!==null&&(v=o(E,v,P),k===null?j=E:k.sibling=E,k=E);return Ue&&ks(b,P),j}for(C=n(b,C);!E.done;P++,E=w.next())E=p(C,b,P,E.value,_),E!==null&&(t&&E.alternate!==null&&C.delete(E.key===null?P:E.key),v=o(E,v,P),k===null?j=E:k.sibling=E,k=E);return t&&C.forEach(function(T){return e(b,T)}),Ue&&ks(b,P),j}function x(b,v,w,_){if(typeof w=="object"&&w!==null&&w.type===Fo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ml:e:{for(var j=w.key,k=v;k!==null;){if(k.key===j){if(j=w.type,j===Fo){if(k.tag===7){r(b,k.sibling),v=s(k,w.props.children),v.return=b,b=v;break e}}else if(k.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ln&&ov(j)===k.type){r(b,k.sibling),v=s(k,w.props),v.ref=ni(b,k,w),v.return=b,b=v;break e}r(b,k);break}else e(b,k);k=k.sibling}w.type===Fo?(v=Hs(w.props.children,b.mode,_,w.key),v.return=b,b=v):(_=Cc(w.type,w.key,w.props,null,b.mode,_),_.ref=ni(b,v,w),_.return=b,b=_)}return i(b);case $o:e:{for(k=w.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){r(b,v.sibling),v=s(v,w.children||[]),v.return=b,b=v;break e}else{r(b,v);break}else e(b,v);v=v.sibling}v=Gd(w,b.mode,_),v.return=b,b=v}return i(b);case Ln:return k=w._init,x(b,v,k(w._payload),_)}if(ui(w))return y(b,v,w,_);if(Xa(w))return g(b,v,w,_);Gl(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(r(b,v.sibling),v=s(v,w),v.return=b,b=v):(r(b,v),v=Kd(w,b.mode,_),v.return=b,b=v),i(b)):r(b,v)}return x}var Sa=qw(!0),Kw=qw(!1),qc=ps(null),Kc=null,Ko=null,Im=null;function Dm(){Im=Ko=Kc=null}function Lm(t){var e=qc.current;Fe(qc),t._currentValue=e}function Yh(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ra(t,e){Kc=t,Im=Ko=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vt=!0),t.firstContext=null)}function wr(t){var e=t._currentValue;if(Im!==t)if(t={context:t,memoizedValue:e,next:null},Ko===null){if(Kc===null)throw Error(q(308));Ko=t,Kc.dependencies={lanes:0,firstContext:t}}else Ko=Ko.next=t;return e}var Os=null;function Mm(t){Os===null?Os=[t]:Os.push(t)}function Gw(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Mm(e)):(r.next=s.next,s.next=r),e.interleaved=r,_n(t,n)}function _n(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Mn=!1;function $m(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ns(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ce&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,_n(t,r)}return s=n.interleaved,s===null?(e.next=e,Mm(n)):(e.next=s.next,s.next=e),n.interleaved=e,_n(t,r)}function bc(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,jm(t,r)}}function av(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=i:o=o.next=i,r=r.next}while(r!==null);o===null?s=o=e:o=o.next=e}else s=o=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Gc(t,e,r,n){var s=t.updateQueue;Mn=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?o=u:i.next=u,i=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(o!==null){var h=s.baseState;i=0,d=u=c=null,l=o;do{var m=l.lane,p=l.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,g=l;switch(m=e,p=r,g.tag){case 1:if(y=g.payload,typeof y=="function"){h=y.call(p,h,m);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,m=typeof y=="function"?y.call(p,h,m):y,m==null)break e;h=Ge({},h,m);break e;case 2:Mn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,i|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Zs|=i,t.lanes=i,t.memoizedState=h}}function iv(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(q(191,s));s.call(n)}}}var xl={},Zr=ps(xl),Vi=ps(xl),Wi=ps(xl);function As(t){if(t===xl)throw Error(q(174));return t}function Fm(t,e){switch(De(Wi,e),De(Vi,t),De(Zr,xl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Th(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Th(e,t)}Fe(Zr),De(Zr,e)}function Na(){Fe(Zr),Fe(Vi),Fe(Wi)}function Yw(t){As(Wi.current);var e=As(Zr.current),r=Th(e,t.type);e!==r&&(De(Vi,t),De(Zr,r))}function Um(t){Vi.current===t&&(Fe(Zr),Fe(Vi))}var ze=ps(0);function Qc(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bd=[];function Bm(){for(var t=0;t<Bd.length;t++)Bd[t]._workInProgressVersionPrimary=null;Bd.length=0}var _c=kn.ReactCurrentDispatcher,zd=kn.ReactCurrentBatchConfig,Xs=0,Ke=null,ct=null,ft=null,Yc=!1,_i=!1,Hi=0,QC=0;function bt(){throw Error(q(321))}function zm(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Mr(t[r],e[r]))return!1;return!0}function Vm(t,e,r,n,s,o){if(Xs=o,Ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_c.current=t===null||t.memoizedState===null?ZC:eE,t=r(n,s),_i){o=0;do{if(_i=!1,Hi=0,25<=o)throw Error(q(301));o+=1,ft=ct=null,e.updateQueue=null,_c.current=tE,t=r(n,s)}while(_i)}if(_c.current=Jc,e=ct!==null&&ct.next!==null,Xs=0,ft=ct=Ke=null,Yc=!1,e)throw Error(q(300));return t}function Wm(){var t=Hi!==0;return Hi=0,t}function Wr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Ke.memoizedState=ft=t:ft=ft.next=t,ft}function br(){if(ct===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var e=ft===null?Ke.memoizedState:ft.next;if(e!==null)ft=e,ct=t;else{if(t===null)throw Error(q(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},ft===null?Ke.memoizedState=ft=t:ft=ft.next=t}return ft}function qi(t,e){return typeof e=="function"?e(t):e}function Vd(t){var e=br(),r=e.queue;if(r===null)throw Error(q(311));r.lastRenderedReducer=t;var n=ct,s=n.baseQueue,o=r.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}n.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,n=n.baseState;var l=i=null,c=null,u=o;do{var d=u.lane;if((Xs&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,i=n):c=c.next=h,Ke.lanes|=d,Zs|=d}u=u.next}while(u!==null&&u!==o);c===null?i=n:c.next=l,Mr(n,e.memoizedState)||(Vt=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do o=s.lane,Ke.lanes|=o,Zs|=o,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Wd(t){var e=br(),r=e.queue;if(r===null)throw Error(q(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,o=e.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do o=t(o,i.action),i=i.next;while(i!==s);Mr(o,e.memoizedState)||(Vt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function Jw(){}function Xw(t,e){var r=Ke,n=br(),s=e(),o=!Mr(n.memoizedState,s);if(o&&(n.memoizedState=s,Vt=!0),n=n.queue,Hm(t0.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||ft!==null&&ft.memoizedState.tag&1){if(r.flags|=2048,Ki(9,e0.bind(null,r,n,s,e),void 0,null),pt===null)throw Error(q(349));Xs&30||Zw(r,e,s)}return s}function Zw(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function e0(t,e,r,n){e.value=r,e.getSnapshot=n,r0(e)&&n0(t)}function t0(t,e,r){return r(function(){r0(e)&&n0(t)})}function r0(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Mr(t,r)}catch{return!0}}function n0(t){var e=_n(t,1);e!==null&&Lr(e,t,1,-1)}function lv(t){var e=Wr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:t},e.queue=t,t=t.dispatch=XC.bind(null,Ke,t),[e.memoizedState,t]}function Ki(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function s0(){return br().memoizedState}function jc(t,e,r,n){var s=Wr();Ke.flags|=t,s.memoizedState=Ki(1|e,r,void 0,n===void 0?null:n)}function Ou(t,e,r,n){var s=br();n=n===void 0?null:n;var o=void 0;if(ct!==null){var i=ct.memoizedState;if(o=i.destroy,n!==null&&zm(n,i.deps)){s.memoizedState=Ki(e,r,o,n);return}}Ke.flags|=t,s.memoizedState=Ki(1|e,r,o,n)}function cv(t,e){return jc(8390656,8,t,e)}function Hm(t,e){return Ou(2048,8,t,e)}function o0(t,e){return Ou(4,2,t,e)}function a0(t,e){return Ou(4,4,t,e)}function i0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function l0(t,e,r){return r=r!=null?r.concat([t]):null,Ou(4,4,i0.bind(null,e,t),r)}function qm(){}function c0(t,e){var r=br();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&zm(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function u0(t,e){var r=br();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&zm(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function d0(t,e,r){return Xs&21?(Mr(r,e)||(r=gw(),Ke.lanes|=r,Zs|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vt=!0),t.memoizedState=r)}function YC(t,e){var r=Ae;Ae=r!==0&&4>r?r:4,t(!0);var n=zd.transition;zd.transition={};try{t(!1),e()}finally{Ae=r,zd.transition=n}}function h0(){return br().memoizedState}function JC(t,e,r){var n=os(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},f0(t))m0(e,r);else if(r=Gw(t,e,r,n),r!==null){var s=Ot();Lr(r,t,n,s),p0(r,e,n)}}function XC(t,e,r){var n=os(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(f0(t))m0(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var i=e.lastRenderedState,l=o(i,r);if(s.hasEagerState=!0,s.eagerState=l,Mr(l,i)){var c=e.interleaved;c===null?(s.next=s,Mm(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=Gw(t,e,s,n),r!==null&&(s=Ot(),Lr(r,t,n,s),p0(r,e,n))}}function f0(t){var e=t.alternate;return t===Ke||e!==null&&e===Ke}function m0(t,e){_i=Yc=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function p0(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,jm(t,r)}}var Jc={readContext:wr,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},ZC={readContext:wr,useCallback:function(t,e){return Wr().memoizedState=[t,e===void 0?null:e],t},useContext:wr,useEffect:cv,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,jc(4194308,4,i0.bind(null,e,t),r)},useLayoutEffect:function(t,e){return jc(4194308,4,t,e)},useInsertionEffect:function(t,e){return jc(4,2,t,e)},useMemo:function(t,e){var r=Wr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Wr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=JC.bind(null,Ke,t),[n.memoizedState,t]},useRef:function(t){var e=Wr();return t={current:t},e.memoizedState=t},useState:lv,useDebugValue:qm,useDeferredValue:function(t){return Wr().memoizedState=t},useTransition:function(){var t=lv(!1),e=t[0];return t=YC.bind(null,t[1]),Wr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Ke,s=Wr();if(Ue){if(r===void 0)throw Error(q(407));r=r()}else{if(r=e(),pt===null)throw Error(q(349));Xs&30||Zw(n,e,r)}s.memoizedState=r;var o={value:r,getSnapshot:e};return s.queue=o,cv(t0.bind(null,n,o,t),[t]),n.flags|=2048,Ki(9,e0.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=Wr(),e=pt.identifierPrefix;if(Ue){var r=gn,n=pn;r=(n&~(1<<32-Dr(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Hi++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=QC++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eE={readContext:wr,useCallback:c0,useContext:wr,useEffect:Hm,useImperativeHandle:l0,useInsertionEffect:o0,useLayoutEffect:a0,useMemo:u0,useReducer:Vd,useRef:s0,useState:function(){return Vd(qi)},useDebugValue:qm,useDeferredValue:function(t){var e=br();return d0(e,ct.memoizedState,t)},useTransition:function(){var t=Vd(qi)[0],e=br().memoizedState;return[t,e]},useMutableSource:Jw,useSyncExternalStore:Xw,useId:h0,unstable_isNewReconciler:!1},tE={readContext:wr,useCallback:c0,useContext:wr,useEffect:Hm,useImperativeHandle:l0,useInsertionEffect:o0,useLayoutEffect:a0,useMemo:u0,useReducer:Wd,useRef:s0,useState:function(){return Wd(qi)},useDebugValue:qm,useDeferredValue:function(t){var e=br();return ct===null?e.memoizedState=t:d0(e,ct.memoizedState,t)},useTransition:function(){var t=Wd(qi)[0],e=br().memoizedState;return[t,e]},useMutableSource:Jw,useSyncExternalStore:Xw,useId:h0,unstable_isNewReconciler:!1};function Er(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Jh(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Ge({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Au={isMounted:function(t){return(t=t._reactInternals)?uo(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Ot(),s=os(t),o=vn(n,s);o.payload=e,r!=null&&(o.callback=r),e=ns(t,o,s),e!==null&&(Lr(e,t,s,n),bc(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Ot(),s=os(t),o=vn(n,s);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=ns(t,o,s),e!==null&&(Lr(e,t,s,n),bc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Ot(),n=os(t),s=vn(r,n);s.tag=2,e!=null&&(s.callback=e),e=ns(t,s,n),e!==null&&(Lr(e,t,n,r),bc(e,t,n))}};function uv(t,e,r,n,s,o,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,i):e.prototype&&e.prototype.isPureReactComponent?!Fi(r,n)||!Fi(s,o):!0}function g0(t,e,r){var n=!1,s=us,o=e.contextType;return typeof o=="object"&&o!==null?o=wr(o):(s=Ht(e)?Ys:kt.current,n=e.contextTypes,o=(n=n!=null)?_a(t,s):us),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Au,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function dv(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Au.enqueueReplaceState(e,e.state,null)}function Xh(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},$m(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=wr(o):(o=Ht(e)?Ys:kt.current,s.context=_a(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Jh(t,e,o,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Au.enqueueReplaceState(s,s.state,null),Gc(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ka(t,e){try{var r="",n=e;do r+=Pk(n),n=n.return;while(n);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function Hd(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Zh(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var rE=typeof WeakMap=="function"?WeakMap:Map;function v0(t,e,r){r=vn(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Zc||(Zc=!0,uf=n),Zh(t,e)},r}function x0(t,e,r){r=vn(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Zh(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Zh(t,e),typeof n!="function"&&(ss===null?ss=new Set([this]):ss.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function hv(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new rE;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=gE.bind(null,t,e,r),e.then(t,t))}function fv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mv(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=vn(-1,1),e.tag=2,ns(r,e,1))),r.lanes|=1),t)}var nE=kn.ReactCurrentOwner,Vt=!1;function Tt(t,e,r,n){e.child=t===null?Kw(e,null,r,n):Sa(e,t.child,r,n)}function pv(t,e,r,n,s){r=r.render;var o=e.ref;return ra(e,s),n=Vm(t,e,r,n,o,s),r=Wm(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,jn(t,e,s)):(Ue&&r&&Rm(e),e.flags|=1,Tt(t,e,n,s),e.child)}function gv(t,e,r,n,s){if(t===null){var o=r.type;return typeof o=="function"&&!ep(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,y0(t,e,o,n,s)):(t=Cc(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var i=o.memoizedProps;if(r=r.compare,r=r!==null?r:Fi,r(i,n)&&t.ref===e.ref)return jn(t,e,s)}return e.flags|=1,t=as(o,n),t.ref=e.ref,t.return=e,e.child=t}function y0(t,e,r,n,s){if(t!==null){var o=t.memoizedProps;if(Fi(o,n)&&t.ref===e.ref)if(Vt=!1,e.pendingProps=n=o,(t.lanes&s)!==0)t.flags&131072&&(Vt=!0);else return e.lanes=t.lanes,jn(t,e,s)}return ef(t,e,r,n,s)}function w0(t,e,r){var n=e.pendingProps,s=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(Qo,Yt),Yt|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,De(Qo,Yt),Yt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,De(Qo,Yt),Yt|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,De(Qo,Yt),Yt|=n;return Tt(t,e,s,r),e.child}function b0(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function ef(t,e,r,n,s){var o=Ht(r)?Ys:kt.current;return o=_a(e,o),ra(e,s),r=Vm(t,e,r,n,o,s),n=Wm(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,jn(t,e,s)):(Ue&&n&&Rm(e),e.flags|=1,Tt(t,e,r,s),e.child)}function vv(t,e,r,n,s){if(Ht(r)){var o=!0;Vc(e)}else o=!1;if(ra(e,s),e.stateNode===null)Sc(t,e),g0(e,r,n),Xh(e,r,n,s),n=!0;else if(t===null){var i=e.stateNode,l=e.memoizedProps;i.props=l;var c=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=wr(u):(u=Ht(r)?Ys:kt.current,u=_a(e,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==u)&&dv(e,i,n,u),Mn=!1;var m=e.memoizedState;i.state=m,Gc(e,n,i,s),c=e.memoizedState,l!==n||m!==c||Wt.current||Mn?(typeof d=="function"&&(Jh(e,r,d,n),c=e.memoizedState),(l=Mn||uv(e,r,l,n,m,c,u))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),i.props=n,i.state=c,i.context=u,n=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,Qw(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Er(e.type,l),i.props=u,h=e.pendingProps,m=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=wr(c):(c=Ht(r)?Ys:kt.current,c=_a(e,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==h||m!==c)&&dv(e,i,n,c),Mn=!1,m=e.memoizedState,i.state=m,Gc(e,n,i,s);var y=e.memoizedState;l!==h||m!==y||Wt.current||Mn?(typeof p=="function"&&(Jh(e,r,p,n),y=e.memoizedState),(u=Mn||uv(e,r,u,n,m,y,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,y,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,y,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),i.props=n,i.state=y,i.context=c,n=u):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return tf(t,e,r,n,o,s)}function tf(t,e,r,n,s,o){b0(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return s&&rv(e,r,!1),jn(t,e,o);n=e.stateNode,nE.current=e;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=Sa(e,t.child,null,o),e.child=Sa(e,null,l,o)):Tt(t,e,l,o),e.memoizedState=n.state,s&&rv(e,r,!0),e.child}function _0(t){var e=t.stateNode;e.pendingContext?tv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&tv(t,e.context,!1),Fm(t,e.containerInfo)}function xv(t,e,r,n,s){return ja(),Am(s),e.flags|=256,Tt(t,e,r,n),e.child}var rf={dehydrated:null,treeContext:null,retryLane:0};function nf(t){return{baseLanes:t,cachePool:null,transitions:null}}function j0(t,e,r){var n=e.pendingProps,s=ze.current,o=!1,i=(e.flags&128)!==0,l;if((l=i)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),De(ze,s&1),t===null)return Qh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,o?(n=e.mode,o=e.child,i={mode:"hidden",children:i},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Lu(i,n,0,null),t=Hs(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=nf(r),e.memoizedState=rf,t):Km(e,i));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return sE(t,e,i,n,l,s,r);if(o){o=n.fallback,i=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=as(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=as(l,o):(o=Hs(o,i,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,i=t.child.memoizedState,i=i===null?nf(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=t.childLanes&~r,e.memoizedState=rf,n}return o=t.child,t=o.sibling,n=as(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Km(t,e){return e=Lu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ql(t,e,r,n){return n!==null&&Am(n),Sa(e,t.child,null,r),t=Km(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sE(t,e,r,n,s,o,i){if(r)return e.flags&256?(e.flags&=-257,n=Hd(Error(q(422))),Ql(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,s=e.mode,n=Lu({mode:"visible",children:n.children},s,0,null),o=Hs(o,s,i,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&Sa(e,t.child,null,i),e.child.memoizedState=nf(i),e.memoizedState=rf,o);if(!(e.mode&1))return Ql(t,e,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,o=Error(q(419)),n=Hd(o,n,void 0),Ql(t,e,i,n)}if(l=(i&t.childLanes)!==0,Vt||l){if(n=pt,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,_n(t,s),Lr(n,t,s,-1))}return Zm(),n=Hd(Error(q(421))),Ql(t,e,i,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=vE.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,er=rs(s.nextSibling),tr=e,Ue=!0,Ir=null,t!==null&&(dr[hr++]=pn,dr[hr++]=gn,dr[hr++]=Js,pn=t.id,gn=t.overflow,Js=e),e=Km(e,n.children),e.flags|=4096,e)}function yv(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Yh(t.return,e,r)}function qd(t,e,r,n,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s)}function S0(t,e,r){var n=e.pendingProps,s=n.revealOrder,o=n.tail;if(Tt(t,e,n.children,r),n=ze.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yv(t,r,e);else if(t.tag===19)yv(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(De(ze,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Qc(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),qd(e,!1,s,r,o);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Qc(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}qd(e,!0,r,null,o);break;case"together":qd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function jn(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Zs|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,r=as(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=as(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function oE(t,e,r){switch(e.tag){case 3:_0(e),ja();break;case 5:Yw(e);break;case 1:Ht(e.type)&&Vc(e);break;case 4:Fm(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;De(qc,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(De(ze,ze.current&1),e.flags|=128,null):r&e.child.childLanes?j0(t,e,r):(De(ze,ze.current&1),t=jn(t,e,r),t!==null?t.sibling:null);De(ze,ze.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return S0(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),De(ze,ze.current),n)break;return null;case 22:case 23:return e.lanes=0,w0(t,e,r)}return jn(t,e,r)}var N0,sf,k0,C0;N0=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};sf=function(){};k0=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,As(Zr.current);var o=null;switch(r){case"input":s=kh(t,s),n=kh(t,n),o=[];break;case"select":s=Ge({},s,{value:void 0}),n=Ge({},n,{value:void 0}),o=[];break;case"textarea":s=Ph(t,s),n=Ph(t,n),o=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Bc)}Rh(r,n);var i;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Oi.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(o||(o=[]),o.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Oi.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Me("scroll",t),o||l===c||(o=[])):(o=o||[]).push(u,c))}r&&(o=o||[]).push("style",r);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};C0=function(t,e,r,n){r!==n&&(e.flags|=4)};function si(t,e){if(!Ue)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function _t(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function aE(t,e,r){var n=e.pendingProps;switch(Om(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(e),null;case 1:return Ht(e.type)&&zc(),_t(e),null;case 3:return n=e.stateNode,Na(),Fe(Wt),Fe(kt),Bm(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Kl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ir!==null&&(ff(Ir),Ir=null))),sf(t,e),_t(e),null;case 5:Um(e);var s=As(Wi.current);if(r=e.type,t!==null&&e.stateNode!=null)k0(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(q(166));return _t(e),null}if(t=As(Zr.current),Kl(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[Gr]=e,n[zi]=o,t=(e.mode&1)!==0,r){case"dialog":Me("cancel",n),Me("close",n);break;case"iframe":case"object":case"embed":Me("load",n);break;case"video":case"audio":for(s=0;s<hi.length;s++)Me(hi[s],n);break;case"source":Me("error",n);break;case"img":case"image":case"link":Me("error",n),Me("load",n);break;case"details":Me("toggle",n);break;case"input":Eg(n,o),Me("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Me("invalid",n);break;case"textarea":Tg(n,o),Me("invalid",n)}Rh(r,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?n.textContent!==l&&(o.suppressHydrationWarning!==!0&&ql(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&ql(n.textContent,l,t),s=["children",""+l]):Oi.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Me("scroll",n)}switch(r){case"input":$l(n),Pg(n,o,!0);break;case"textarea":$l(n),Rg(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Bc)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=tw(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[Gr]=e,t[zi]=n,N0(t,e,!1,!1),e.stateNode=t;e:{switch(i=Oh(r,n),r){case"dialog":Me("cancel",t),Me("close",t),s=n;break;case"iframe":case"object":case"embed":Me("load",t),s=n;break;case"video":case"audio":for(s=0;s<hi.length;s++)Me(hi[s],t);s=n;break;case"source":Me("error",t),s=n;break;case"img":case"image":case"link":Me("error",t),Me("load",t),s=n;break;case"details":Me("toggle",t),s=n;break;case"input":Eg(t,n),s=kh(t,n),Me("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Ge({},n,{value:void 0}),Me("invalid",t);break;case"textarea":Tg(t,n),s=Ph(t,n),Me("invalid",t);break;default:s=n}Rh(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?sw(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&rw(t,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ai(t,c):typeof c=="number"&&Ai(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Oi.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Me("scroll",t):c!=null&&vm(t,o,c,i))}switch(r){case"input":$l(t),Pg(t,n,!1);break;case"textarea":$l(t),Rg(t);break;case"option":n.value!=null&&t.setAttribute("value",""+cs(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?Xo(t,!!n.multiple,o,!1):n.defaultValue!=null&&Xo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Bc)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _t(e),null;case 6:if(t&&e.stateNode!=null)C0(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(q(166));if(r=As(Wi.current),As(Zr.current),Kl(e)){if(n=e.stateNode,r=e.memoizedProps,n[Gr]=e,(o=n.nodeValue!==r)&&(t=tr,t!==null))switch(t.tag){case 3:ql(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ql(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Gr]=e,e.stateNode=n}return _t(e),null;case 13:if(Fe(ze),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&er!==null&&e.mode&1&&!(e.flags&128))Hw(),ja(),e.flags|=98560,o=!1;else if(o=Kl(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(q(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(q(317));o[Gr]=e}else ja(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_t(e),o=!1}else Ir!==null&&(ff(Ir),Ir=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ze.current&1?dt===0&&(dt=3):Zm())),e.updateQueue!==null&&(e.flags|=4),_t(e),null);case 4:return Na(),sf(t,e),t===null&&Ui(e.stateNode.containerInfo),_t(e),null;case 10:return Lm(e.type._context),_t(e),null;case 17:return Ht(e.type)&&zc(),_t(e),null;case 19:if(Fe(ze),o=e.memoizedState,o===null)return _t(e),null;if(n=(e.flags&128)!==0,i=o.rendering,i===null)if(n)si(o,!1);else{if(dt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Qc(t),i!==null){for(e.flags|=128,si(o,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,t=i.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return De(ze,ze.current&1|2),e.child}t=t.sibling}o.tail!==null&&rt()>Ca&&(e.flags|=128,n=!0,si(o,!1),e.lanes=4194304)}else{if(!n)if(t=Qc(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),si(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!Ue)return _t(e),null}else 2*rt()-o.renderingStartTime>Ca&&r!==1073741824&&(e.flags|=128,n=!0,si(o,!1),e.lanes=4194304);o.isBackwards?(i.sibling=e.child,e.child=i):(r=o.last,r!==null?r.sibling=i:e.child=i,o.last=i)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=rt(),e.sibling=null,r=ze.current,De(ze,n?r&1|2:r&1),e):(_t(e),null);case 22:case 23:return Xm(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Yt&1073741824&&(_t(e),e.subtreeFlags&6&&(e.flags|=8192)):_t(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function iE(t,e){switch(Om(e),e.tag){case 1:return Ht(e.type)&&zc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Na(),Fe(Wt),Fe(kt),Bm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Um(e),null;case 13:if(Fe(ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));ja()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe(ze),null;case 4:return Na(),null;case 10:return Lm(e.type._context),null;case 22:case 23:return Xm(),null;case 24:return null;default:return null}}var Yl=!1,Nt=!1,lE=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Go(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Je(t,e,n)}else r.current=null}function of(t,e,r){try{r()}catch(n){Je(t,e,n)}}var wv=!1;function cE(t,e){if(zh=$c,t=Ow(),Tm(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,u=0,d=0,h=t,m=null;t:for(;;){for(var p;h!==r||s!==0&&h.nodeType!==3||(l=i+s),h!==o||n!==0&&h.nodeType!==3||(c=i+n),h.nodeType===3&&(i+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===t)break t;if(m===r&&++u===s&&(l=i),m===o&&++d===n&&(c=i),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Vh={focusedElem:t,selectionRange:r},$c=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,x=y.memoizedState,b=e.stateNode,v=b.getSnapshotBeforeUpdate(e.elementType===e.type?g:Er(e.type,g),x);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(_){Je(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return y=wv,wv=!1,y}function ji(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&of(e,r,o)}s=s.next}while(s!==n)}}function Iu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function af(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function E0(t){var e=t.alternate;e!==null&&(t.alternate=null,E0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Gr],delete e[zi],delete e[qh],delete e[HC],delete e[qC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function P0(t){return t.tag===5||t.tag===3||t.tag===4}function bv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||P0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lf(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Bc));else if(n!==4&&(t=t.child,t!==null))for(lf(t,e,r),t=t.sibling;t!==null;)lf(t,e,r),t=t.sibling}function cf(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(cf(t,e,r),t=t.sibling;t!==null;)cf(t,e,r),t=t.sibling}var gt=null,Or=!1;function Pn(t,e,r){for(r=r.child;r!==null;)T0(t,e,r),r=r.sibling}function T0(t,e,r){if(Xr&&typeof Xr.onCommitFiberUnmount=="function")try{Xr.onCommitFiberUnmount(ku,r)}catch{}switch(r.tag){case 5:Nt||Go(r,e);case 6:var n=gt,s=Or;gt=null,Pn(t,e,r),gt=n,Or=s,gt!==null&&(Or?(t=gt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):gt.removeChild(r.stateNode));break;case 18:gt!==null&&(Or?(t=gt,r=r.stateNode,t.nodeType===8?Fd(t.parentNode,r):t.nodeType===1&&Fd(t,r),Mi(t)):Fd(gt,r.stateNode));break;case 4:n=gt,s=Or,gt=r.stateNode.containerInfo,Or=!0,Pn(t,e,r),gt=n,Or=s;break;case 0:case 11:case 14:case 15:if(!Nt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&of(r,e,i),s=s.next}while(s!==n)}Pn(t,e,r);break;case 1:if(!Nt&&(Go(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Je(r,e,l)}Pn(t,e,r);break;case 21:Pn(t,e,r);break;case 22:r.mode&1?(Nt=(n=Nt)||r.memoizedState!==null,Pn(t,e,r),Nt=n):Pn(t,e,r);break;default:Pn(t,e,r)}}function _v(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new lE),e.forEach(function(n){var s=xE.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Sr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var o=t,i=e,l=i;e:for(;l!==null;){switch(l.tag){case 5:gt=l.stateNode,Or=!1;break e;case 3:gt=l.stateNode.containerInfo,Or=!0;break e;case 4:gt=l.stateNode.containerInfo,Or=!0;break e}l=l.return}if(gt===null)throw Error(q(160));T0(o,i,s),gt=null,Or=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Je(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)R0(e,t),e=e.sibling}function R0(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Sr(e,t),Vr(t),n&4){try{ji(3,t,t.return),Iu(3,t)}catch(g){Je(t,t.return,g)}try{ji(5,t,t.return)}catch(g){Je(t,t.return,g)}}break;case 1:Sr(e,t),Vr(t),n&512&&r!==null&&Go(r,r.return);break;case 5:if(Sr(e,t),Vr(t),n&512&&r!==null&&Go(r,r.return),t.flags&32){var s=t.stateNode;try{Ai(s,"")}catch(g){Je(t,t.return,g)}}if(n&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,i=r!==null?r.memoizedProps:o,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Zy(s,o),Oh(l,i);var u=Oh(l,o);for(i=0;i<c.length;i+=2){var d=c[i],h=c[i+1];d==="style"?sw(s,h):d==="dangerouslySetInnerHTML"?rw(s,h):d==="children"?Ai(s,h):vm(s,d,h,u)}switch(l){case"input":Ch(s,o);break;case"textarea":ew(s,o);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Xo(s,!!o.multiple,p,!1):m!==!!o.multiple&&(o.defaultValue!=null?Xo(s,!!o.multiple,o.defaultValue,!0):Xo(s,!!o.multiple,o.multiple?[]:"",!1))}s[zi]=o}catch(g){Je(t,t.return,g)}}break;case 6:if(Sr(e,t),Vr(t),n&4){if(t.stateNode===null)throw Error(q(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(g){Je(t,t.return,g)}}break;case 3:if(Sr(e,t),Vr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Mi(e.containerInfo)}catch(g){Je(t,t.return,g)}break;case 4:Sr(e,t),Vr(t);break;case 13:Sr(e,t),Vr(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Ym=rt())),n&4&&_v(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Nt=(u=Nt)||d,Sr(e,t),Nt=u):Sr(e,t),Vr(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(ee=t,d=t.child;d!==null;){for(h=ee=d;ee!==null;){switch(m=ee,p=m.child,m.tag){case 0:case 11:case 14:case 15:ji(4,m,m.return);break;case 1:Go(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(g){Je(n,r,g)}}break;case 5:Go(m,m.return);break;case 22:if(m.memoizedState!==null){Sv(h);continue}}p!==null?(p.return=m,ee=p):Sv(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,c=h.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=nw("display",i))}catch(g){Je(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Je(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Sr(e,t),Vr(t),n&4&&_v(t);break;case 21:break;default:Sr(e,t),Vr(t)}}function Vr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(P0(r)){var n=r;break e}r=r.return}throw Error(q(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Ai(s,""),n.flags&=-33);var o=bv(t);cf(t,o,s);break;case 3:case 4:var i=n.stateNode.containerInfo,l=bv(t);lf(t,l,i);break;default:throw Error(q(161))}}catch(c){Je(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uE(t,e,r){ee=t,O0(t)}function O0(t,e,r){for(var n=(t.mode&1)!==0;ee!==null;){var s=ee,o=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||Yl;if(!i){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Nt;l=Yl;var u=Nt;if(Yl=i,(Nt=c)&&!u)for(ee=s;ee!==null;)i=ee,c=i.child,i.tag===22&&i.memoizedState!==null?Nv(s):c!==null?(c.return=i,ee=c):Nv(s);for(;o!==null;)ee=o,O0(o),o=o.sibling;ee=s,Yl=l,Nt=u}jv(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ee=o):jv(t)}}function jv(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nt||Iu(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Nt)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Er(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&iv(e,o,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}iv(e,i,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Mi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Nt||e.flags&512&&af(e)}catch(m){Je(e,e.return,m)}}if(e===t){ee=null;break}if(r=e.sibling,r!==null){r.return=e.return,ee=r;break}ee=e.return}}function Sv(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ee=r;break}ee=e.return}}function Nv(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Iu(4,e)}catch(c){Je(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){Je(e,s,c)}}var o=e.return;try{af(e)}catch(c){Je(e,o,c)}break;case 5:var i=e.return;try{af(e)}catch(c){Je(e,i,c)}}}catch(c){Je(e,e.return,c)}if(e===t){ee=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ee=l;break}ee=e.return}}var dE=Math.ceil,Xc=kn.ReactCurrentDispatcher,Gm=kn.ReactCurrentOwner,pr=kn.ReactCurrentBatchConfig,Ce=0,pt=null,ot=null,xt=0,Yt=0,Qo=ps(0),dt=0,Gi=null,Zs=0,Du=0,Qm=0,Si=null,zt=null,Ym=0,Ca=1/0,un=null,Zc=!1,uf=null,ss=null,Jl=!1,Yn=null,eu=0,Ni=0,df=null,Nc=-1,kc=0;function Ot(){return Ce&6?rt():Nc!==-1?Nc:Nc=rt()}function os(t){return t.mode&1?Ce&2&&xt!==0?xt&-xt:GC.transition!==null?(kc===0&&(kc=gw()),kc):(t=Ae,t!==0||(t=window.event,t=t===void 0?16:jw(t.type)),t):1}function Lr(t,e,r,n){if(50<Ni)throw Ni=0,df=null,Error(q(185));pl(t,r,n),(!(Ce&2)||t!==pt)&&(t===pt&&(!(Ce&2)&&(Du|=r),dt===4&&Fn(t,xt)),qt(t,n),r===1&&Ce===0&&!(e.mode&1)&&(Ca=rt()+500,Ru&&gs()))}function qt(t,e){var r=t.callbackNode;Gk(t,e);var n=Mc(t,t===pt?xt:0);if(n===0)r!==null&&Ig(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Ig(r),e===1)t.tag===0?KC(kv.bind(null,t)):zw(kv.bind(null,t)),VC(function(){!(Ce&6)&&gs()}),r=null;else{switch(vw(n)){case 1:r=_m;break;case 4:r=mw;break;case 16:r=Lc;break;case 536870912:r=pw;break;default:r=Lc}r=U0(r,A0.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function A0(t,e){if(Nc=-1,kc=0,Ce&6)throw Error(q(327));var r=t.callbackNode;if(na()&&t.callbackNode!==r)return null;var n=Mc(t,t===pt?xt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=tu(t,n);else{e=n;var s=Ce;Ce|=2;var o=D0();(pt!==t||xt!==e)&&(un=null,Ca=rt()+500,Ws(t,e));do try{mE();break}catch(l){I0(t,l)}while(!0);Dm(),Xc.current=o,Ce=s,ot!==null?e=0:(pt=null,xt=0,e=dt)}if(e!==0){if(e===2&&(s=Mh(t),s!==0&&(n=s,e=hf(t,s))),e===1)throw r=Gi,Ws(t,0),Fn(t,n),qt(t,rt()),r;if(e===6)Fn(t,n);else{if(s=t.current.alternate,!(n&30)&&!hE(s)&&(e=tu(t,n),e===2&&(o=Mh(t),o!==0&&(n=o,e=hf(t,o))),e===1))throw r=Gi,Ws(t,0),Fn(t,n),qt(t,rt()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(q(345));case 2:Cs(t,zt,un);break;case 3:if(Fn(t,n),(n&130023424)===n&&(e=Ym+500-rt(),10<e)){if(Mc(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Ot(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Hh(Cs.bind(null,t,zt,un),e);break}Cs(t,zt,un);break;case 4:if(Fn(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var i=31-Dr(n);o=1<<i,i=e[i],i>s&&(s=i),n&=~o}if(n=s,n=rt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*dE(n/1960))-n,10<n){t.timeoutHandle=Hh(Cs.bind(null,t,zt,un),n);break}Cs(t,zt,un);break;case 5:Cs(t,zt,un);break;default:throw Error(q(329))}}}return qt(t,rt()),t.callbackNode===r?A0.bind(null,t):null}function hf(t,e){var r=Si;return t.current.memoizedState.isDehydrated&&(Ws(t,e).flags|=256),t=tu(t,e),t!==2&&(e=zt,zt=r,e!==null&&ff(e)),t}function ff(t){zt===null?zt=t:zt.push.apply(zt,t)}function hE(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],o=s.getSnapshot;s=s.value;try{if(!Mr(o(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fn(t,e){for(e&=~Qm,e&=~Du,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Dr(e),n=1<<r;t[r]=-1,e&=~n}}function kv(t){if(Ce&6)throw Error(q(327));na();var e=Mc(t,0);if(!(e&1))return qt(t,rt()),null;var r=tu(t,e);if(t.tag!==0&&r===2){var n=Mh(t);n!==0&&(e=n,r=hf(t,n))}if(r===1)throw r=Gi,Ws(t,0),Fn(t,e),qt(t,rt()),r;if(r===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Cs(t,zt,un),qt(t,rt()),null}function Jm(t,e){var r=Ce;Ce|=1;try{return t(e)}finally{Ce=r,Ce===0&&(Ca=rt()+500,Ru&&gs())}}function eo(t){Yn!==null&&Yn.tag===0&&!(Ce&6)&&na();var e=Ce;Ce|=1;var r=pr.transition,n=Ae;try{if(pr.transition=null,Ae=1,t)return t()}finally{Ae=n,pr.transition=r,Ce=e,!(Ce&6)&&gs()}}function Xm(){Yt=Qo.current,Fe(Qo)}function Ws(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,zC(r)),ot!==null)for(r=ot.return;r!==null;){var n=r;switch(Om(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&zc();break;case 3:Na(),Fe(Wt),Fe(kt),Bm();break;case 5:Um(n);break;case 4:Na();break;case 13:Fe(ze);break;case 19:Fe(ze);break;case 10:Lm(n.type._context);break;case 22:case 23:Xm()}r=r.return}if(pt=t,ot=t=as(t.current,null),xt=Yt=e,dt=0,Gi=null,Qm=Du=Zs=0,zt=Si=null,Os!==null){for(e=0;e<Os.length;e++)if(r=Os[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,o=r.pending;if(o!==null){var i=o.next;o.next=s,n.next=i}r.pending=n}Os=null}return t}function I0(t,e){do{var r=ot;try{if(Dm(),_c.current=Jc,Yc){for(var n=Ke.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Yc=!1}if(Xs=0,ft=ct=Ke=null,_i=!1,Hi=0,Gm.current=null,r===null||r.return===null){dt=1,Gi=e,ot=null;break}e:{var o=t,i=r.return,l=r,c=e;if(e=xt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=fv(i);if(p!==null){p.flags&=-257,mv(p,i,l,o,e),p.mode&1&&hv(o,u,e),e=p,c=u;var y=e.updateQueue;if(y===null){var g=new Set;g.add(c),e.updateQueue=g}else y.add(c);break e}else{if(!(e&1)){hv(o,u,e),Zm();break e}c=Error(q(426))}}else if(Ue&&l.mode&1){var x=fv(i);if(x!==null){!(x.flags&65536)&&(x.flags|=256),mv(x,i,l,o,e),Am(ka(c,l));break e}}o=c=ka(c,l),dt!==4&&(dt=2),Si===null?Si=[o]:Si.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=v0(o,c,e);av(o,b);break e;case 1:l=c;var v=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ss===null||!ss.has(w)))){o.flags|=65536,e&=-e,o.lanes|=e;var _=x0(o,l,e);av(o,_);break e}}o=o.return}while(o!==null)}M0(r)}catch(j){e=j,ot===r&&r!==null&&(ot=r=r.return);continue}break}while(!0)}function D0(){var t=Xc.current;return Xc.current=Jc,t===null?Jc:t}function Zm(){(dt===0||dt===3||dt===2)&&(dt=4),pt===null||!(Zs&268435455)&&!(Du&268435455)||Fn(pt,xt)}function tu(t,e){var r=Ce;Ce|=2;var n=D0();(pt!==t||xt!==e)&&(un=null,Ws(t,e));do try{fE();break}catch(s){I0(t,s)}while(!0);if(Dm(),Ce=r,Xc.current=n,ot!==null)throw Error(q(261));return pt=null,xt=0,dt}function fE(){for(;ot!==null;)L0(ot)}function mE(){for(;ot!==null&&!Fk();)L0(ot)}function L0(t){var e=F0(t.alternate,t,Yt);t.memoizedProps=t.pendingProps,e===null?M0(t):ot=e,Gm.current=null}function M0(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=iE(r,e),r!==null){r.flags&=32767,ot=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dt=6,ot=null;return}}else if(r=aE(r,e,Yt),r!==null){ot=r;return}if(e=e.sibling,e!==null){ot=e;return}ot=e=t}while(e!==null);dt===0&&(dt=5)}function Cs(t,e,r){var n=Ae,s=pr.transition;try{pr.transition=null,Ae=1,pE(t,e,r,n)}finally{pr.transition=s,Ae=n}return null}function pE(t,e,r,n){do na();while(Yn!==null);if(Ce&6)throw Error(q(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(Qk(t,o),t===pt&&(ot=pt=null,xt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Jl||(Jl=!0,U0(Lc,function(){return na(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=pr.transition,pr.transition=null;var i=Ae;Ae=1;var l=Ce;Ce|=4,Gm.current=null,cE(t,r),R0(r,t),DC(Vh),$c=!!zh,Vh=zh=null,t.current=r,uE(r),Uk(),Ce=l,Ae=i,pr.transition=o}else t.current=r;if(Jl&&(Jl=!1,Yn=t,eu=s),o=t.pendingLanes,o===0&&(ss=null),Vk(r.stateNode),qt(t,rt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Zc)throw Zc=!1,t=uf,uf=null,t;return eu&1&&t.tag!==0&&na(),o=t.pendingLanes,o&1?t===df?Ni++:(Ni=0,df=t):Ni=0,gs(),null}function na(){if(Yn!==null){var t=vw(eu),e=pr.transition,r=Ae;try{if(pr.transition=null,Ae=16>t?16:t,Yn===null)var n=!1;else{if(t=Yn,Yn=null,eu=0,Ce&6)throw Error(q(331));var s=Ce;for(Ce|=4,ee=t.current;ee!==null;){var o=ee,i=o.child;if(ee.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ee=u;ee!==null;){var d=ee;switch(d.tag){case 0:case 11:case 15:ji(8,d,o)}var h=d.child;if(h!==null)h.return=d,ee=h;else for(;ee!==null;){d=ee;var m=d.sibling,p=d.return;if(E0(d),d===u){ee=null;break}if(m!==null){m.return=p,ee=m;break}ee=p}}}var y=o.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}ee=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,ee=i;else e:for(;ee!==null;){if(o=ee,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ji(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,ee=b;break e}ee=o.return}}var v=t.current;for(ee=v;ee!==null;){i=ee;var w=i.child;if(i.subtreeFlags&2064&&w!==null)w.return=i,ee=w;else e:for(i=v;ee!==null;){if(l=ee,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Iu(9,l)}}catch(j){Je(l,l.return,j)}if(l===i){ee=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,ee=_;break e}ee=l.return}}if(Ce=s,gs(),Xr&&typeof Xr.onPostCommitFiberRoot=="function")try{Xr.onPostCommitFiberRoot(ku,t)}catch{}n=!0}return n}finally{Ae=r,pr.transition=e}}return!1}function Cv(t,e,r){e=ka(r,e),e=v0(t,e,1),t=ns(t,e,1),e=Ot(),t!==null&&(pl(t,1,e),qt(t,e))}function Je(t,e,r){if(t.tag===3)Cv(t,t,r);else for(;e!==null;){if(e.tag===3){Cv(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ss===null||!ss.has(n))){t=ka(r,t),t=x0(e,t,1),e=ns(e,t,1),t=Ot(),e!==null&&(pl(e,1,t),qt(e,t));break}}e=e.return}}function gE(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Ot(),t.pingedLanes|=t.suspendedLanes&r,pt===t&&(xt&r)===r&&(dt===4||dt===3&&(xt&130023424)===xt&&500>rt()-Ym?Ws(t,0):Qm|=r),qt(t,e)}function $0(t,e){e===0&&(t.mode&1?(e=Bl,Bl<<=1,!(Bl&130023424)&&(Bl=4194304)):e=1);var r=Ot();t=_n(t,e),t!==null&&(pl(t,e,r),qt(t,r))}function vE(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),$0(t,r)}function xE(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(q(314))}n!==null&&n.delete(e),$0(t,r)}var F0;F0=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wt.current)Vt=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Vt=!1,oE(t,e,r);Vt=!!(t.flags&131072)}else Vt=!1,Ue&&e.flags&1048576&&Vw(e,Hc,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Sc(t,e),t=e.pendingProps;var s=_a(e,kt.current);ra(e,r),s=Vm(null,e,n,t,s,r);var o=Wm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ht(n)?(o=!0,Vc(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,$m(e),s.updater=Au,e.stateNode=s,s._reactInternals=e,Xh(e,n,t,r),e=tf(null,e,n,!0,o,r)):(e.tag=0,Ue&&o&&Rm(e),Tt(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Sc(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=wE(n),t=Er(n,t),s){case 0:e=ef(null,e,n,t,r);break e;case 1:e=vv(null,e,n,t,r);break e;case 11:e=pv(null,e,n,t,r);break e;case 14:e=gv(null,e,n,Er(n.type,t),r);break e}throw Error(q(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Er(n,s),ef(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Er(n,s),vv(t,e,n,s,r);case 3:e:{if(_0(e),t===null)throw Error(q(387));n=e.pendingProps,o=e.memoizedState,s=o.element,Qw(t,e),Gc(e,n,null,r);var i=e.memoizedState;if(n=i.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=ka(Error(q(423)),e),e=xv(t,e,n,r,s);break e}else if(n!==s){s=ka(Error(q(424)),e),e=xv(t,e,n,r,s);break e}else for(er=rs(e.stateNode.containerInfo.firstChild),tr=e,Ue=!0,Ir=null,r=Kw(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ja(),n===s){e=jn(t,e,r);break e}Tt(t,e,n,r)}e=e.child}return e;case 5:return Yw(e),t===null&&Qh(e),n=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,i=s.children,Wh(n,s)?i=null:o!==null&&Wh(n,o)&&(e.flags|=32),b0(t,e),Tt(t,e,i,r),e.child;case 6:return t===null&&Qh(e),null;case 13:return j0(t,e,r);case 4:return Fm(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Sa(e,null,n,r):Tt(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Er(n,s),pv(t,e,n,s,r);case 7:return Tt(t,e,e.pendingProps,r),e.child;case 8:return Tt(t,e,e.pendingProps.children,r),e.child;case 12:return Tt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,o=e.memoizedProps,i=s.value,De(qc,n._currentValue),n._currentValue=i,o!==null)if(Mr(o.value,i)){if(o.children===s.children&&!Wt.current){e=jn(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=vn(-1,r&-r),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Yh(o.return,r,e),l.lanes|=r;break}c=c.next}}else if(o.tag===10)i=o.type===e.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(q(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Yh(i,r,e),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===e){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Tt(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,ra(e,r),s=wr(s),n=n(s),e.flags|=1,Tt(t,e,n,r),e.child;case 14:return n=e.type,s=Er(n,e.pendingProps),s=Er(n.type,s),gv(t,e,n,s,r);case 15:return y0(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Er(n,s),Sc(t,e),e.tag=1,Ht(n)?(t=!0,Vc(e)):t=!1,ra(e,r),g0(e,n,s),Xh(e,n,s,r),tf(null,e,n,!0,t,r);case 19:return S0(t,e,r);case 22:return w0(t,e,r)}throw Error(q(156,e.tag))};function U0(t,e){return fw(t,e)}function yE(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(t,e,r,n){return new yE(t,e,r,n)}function ep(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wE(t){if(typeof t=="function")return ep(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ym)return 11;if(t===wm)return 14}return 2}function as(t,e){var r=t.alternate;return r===null?(r=mr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Cc(t,e,r,n,s,o){var i=2;if(n=t,typeof t=="function")ep(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Fo:return Hs(r.children,s,o,e);case xm:i=8,s|=8;break;case _h:return t=mr(12,r,e,s|2),t.elementType=_h,t.lanes=o,t;case jh:return t=mr(13,r,e,s),t.elementType=jh,t.lanes=o,t;case Sh:return t=mr(19,r,e,s),t.elementType=Sh,t.lanes=o,t;case Yy:return Lu(r,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Gy:i=10;break e;case Qy:i=9;break e;case ym:i=11;break e;case wm:i=14;break e;case Ln:i=16,n=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=mr(i,r,e,s),e.elementType=t,e.type=n,e.lanes=o,e}function Hs(t,e,r,n){return t=mr(7,t,n,e),t.lanes=r,t}function Lu(t,e,r,n){return t=mr(22,t,n,e),t.elementType=Yy,t.lanes=r,t.stateNode={isHidden:!1},t}function Kd(t,e,r){return t=mr(6,t,null,e),t.lanes=r,t}function Gd(t,e,r){return e=mr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bE(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ed(0),this.expirationTimes=Ed(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ed(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function tp(t,e,r,n,s,o,i,l,c){return t=new bE(t,e,r,l,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=mr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},$m(o),t}function _E(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$o,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function B0(t){if(!t)return us;t=t._reactInternals;e:{if(uo(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ht(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var r=t.type;if(Ht(r))return Bw(t,r,e)}return e}function z0(t,e,r,n,s,o,i,l,c){return t=tp(r,n,!0,t,s,o,i,l,c),t.context=B0(null),r=t.current,n=Ot(),s=os(r),o=vn(n,s),o.callback=e??null,ns(r,o,s),t.current.lanes=s,pl(t,s,n),qt(t,n),t}function Mu(t,e,r,n){var s=e.current,o=Ot(),i=os(s);return r=B0(r),e.context===null?e.context=r:e.pendingContext=r,e=vn(o,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ns(s,e,i),t!==null&&(Lr(t,s,i,o),bc(t,s,i)),i}function ru(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ev(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function rp(t,e){Ev(t,e),(t=t.alternate)&&Ev(t,e)}function jE(){return null}var V0=typeof reportError=="function"?reportError:function(t){console.error(t)};function np(t){this._internalRoot=t}$u.prototype.render=np.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));Mu(t,e,null,null)};$u.prototype.unmount=np.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;eo(function(){Mu(null,t,null,null)}),e[bn]=null}};function $u(t){this._internalRoot=t}$u.prototype.unstable_scheduleHydration=function(t){if(t){var e=ww();t={blockedOn:null,target:t,priority:e};for(var r=0;r<$n.length&&e!==0&&e<$n[r].priority;r++);$n.splice(r,0,t),r===0&&_w(t)}};function sp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Pv(){}function SE(t,e,r,n,s){if(s){if(typeof n=="function"){var o=n;n=function(){var u=ru(i);o.call(u)}}var i=z0(e,n,t,0,null,!1,!1,"",Pv);return t._reactRootContainer=i,t[bn]=i.current,Ui(t.nodeType===8?t.parentNode:t),eo(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=ru(c);l.call(u)}}var c=tp(t,0,!1,null,null,!1,!1,"",Pv);return t._reactRootContainer=c,t[bn]=c.current,Ui(t.nodeType===8?t.parentNode:t),eo(function(){Mu(e,c,r,n)}),c}function Uu(t,e,r,n,s){var o=r._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var l=s;s=function(){var c=ru(i);l.call(c)}}Mu(e,i,t,s)}else i=SE(r,e,t,s,n);return ru(i)}xw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=di(e.pendingLanes);r!==0&&(jm(e,r|1),qt(e,rt()),!(Ce&6)&&(Ca=rt()+500,gs()))}break;case 13:eo(function(){var n=_n(t,1);if(n!==null){var s=Ot();Lr(n,t,1,s)}}),rp(t,1)}};Sm=function(t){if(t.tag===13){var e=_n(t,134217728);if(e!==null){var r=Ot();Lr(e,t,134217728,r)}rp(t,134217728)}};yw=function(t){if(t.tag===13){var e=os(t),r=_n(t,e);if(r!==null){var n=Ot();Lr(r,t,e,n)}rp(t,e)}};ww=function(){return Ae};bw=function(t,e){var r=Ae;try{return Ae=t,e()}finally{Ae=r}};Ih=function(t,e,r){switch(e){case"input":if(Ch(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Tu(n);if(!s)throw Error(q(90));Xy(n),Ch(n,s)}}}break;case"textarea":ew(t,r);break;case"select":e=r.value,e!=null&&Xo(t,!!r.multiple,e,!1)}};iw=Jm;lw=eo;var NE={usingClientEntryPoint:!1,Events:[vl,Vo,Tu,ow,aw,Jm]},oi={findFiberByHostInstance:Rs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kE={bundleType:oi.bundleType,version:oi.version,rendererPackageName:oi.rendererPackageName,rendererConfig:oi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=dw(t),t===null?null:t.stateNode},findFiberByHostInstance:oi.findFiberByHostInstance||jE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xl.isDisabled&&Xl.supportsFiber)try{ku=Xl.inject(kE),Xr=Xl}catch{}}sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NE;sr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sp(e))throw Error(q(200));return _E(t,e,null,r)};sr.createRoot=function(t,e){if(!sp(t))throw Error(q(299));var r=!1,n="",s=V0;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=tp(t,1,!1,null,null,r,!1,n,s),t[bn]=e.current,Ui(t.nodeType===8?t.parentNode:t),new np(e)};sr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=dw(e),t=t===null?null:t.stateNode,t};sr.flushSync=function(t){return eo(t)};sr.hydrate=function(t,e,r){if(!Fu(e))throw Error(q(200));return Uu(null,t,e,!0,r)};sr.hydrateRoot=function(t,e,r){if(!sp(t))throw Error(q(405));var n=r!=null&&r.hydratedSources||null,s=!1,o="",i=V0;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=z0(e,null,t,1,r??null,s,!1,o,i),t[bn]=e.current,Ui(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new $u(e)};sr.render=function(t,e,r){if(!Fu(e))throw Error(q(200));return Uu(null,t,e,!1,r)};sr.unmountComponentAtNode=function(t){if(!Fu(t))throw Error(q(40));return t._reactRootContainer?(eo(function(){Uu(null,null,t,!1,function(){t._reactRootContainer=null,t[bn]=null})}),!0):!1};sr.unstable_batchedUpdates=Jm;sr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Fu(r))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return Uu(t,e,r,!1,n)};sr.version="18.3.1-next-f1338f8080-20240426";function W0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(W0)}catch(t){console.error(t)}}W0(),Wy.exports=sr;var za=Wy.exports;const CE=Ry(za);var H0,Tv=za;H0=Tv.createRoot,Tv.hydrateRoot;var yl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},to=typeof window>"u"||"Deno"in globalThis;function Bt(){}function EE(t,e){return typeof t=="function"?t(e):t}function mf(t){return typeof t=="number"&&t>=0&&t!==1/0}function q0(t,e){return Math.max(t+(e||0)-Date.now(),0)}function is(t,e){return typeof t=="function"?t(e):t}function ur(t,e){return typeof t=="function"?t(e):t}function Rv(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:o,queryKey:i,stale:l}=t;if(i){if(n){if(e.queryHash!==op(i,e.options))return!1}else if(!Yi(e.queryKey,i))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||o&&!o(e))}function Ov(t,e){const{exact:r,status:n,predicate:s,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(r){if(Qi(e.options.mutationKey)!==Qi(o))return!1}else if(!Yi(e.options.mutationKey,o))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function op(t,e){return((e==null?void 0:e.queryKeyHashFn)||Qi)(t)}function Qi(t){return JSON.stringify(t,(e,r)=>gf(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Yi(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>Yi(t[r],e[r])):!1}function K0(t,e){if(t===e)return t;const r=Av(t)&&Av(e);if(r||gf(t)&&gf(e)){const n=r?t:Object.keys(t),s=n.length,o=r?e:Object.keys(e),i=o.length,l=r?[]:{},c=new Set(n);let u=0;for(let d=0;d<i;d++){const h=r?d:o[d];(!r&&c.has(h)||r)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,u++):(l[h]=K0(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&u++)}return s===i&&u===s?t:l}return e}function pf(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function Av(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function gf(t){if(!Iv(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!Iv(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Iv(t){return Object.prototype.toString.call(t)==="[object Object]"}function PE(t){return new Promise(e=>{setTimeout(e,t)})}function vf(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?K0(t,e):e}function TE(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function RE(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var ap=Symbol();function G0(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===ap?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function OE(t,e){return typeof t=="function"?t(...e):!!t}var Ds,Bn,ca,by,AE=(by=class extends yl{constructor(){super();le(this,Ds);le(this,Bn);le(this,ca);te(this,ca,e=>{if(!to&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){R(this,Bn)||this.setEventListener(R(this,ca))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,Bn))==null||e.call(this),te(this,Bn,void 0))}setEventListener(e){var r;te(this,ca,e),(r=R(this,Bn))==null||r.call(this),te(this,Bn,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){R(this,Ds)!==e&&(te(this,Ds,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof R(this,Ds)=="boolean"?R(this,Ds):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ds=new WeakMap,Bn=new WeakMap,ca=new WeakMap,by),ip=new AE,ua,zn,da,_y,IE=(_y=class extends yl{constructor(){super();le(this,ua,!0);le(this,zn);le(this,da);te(this,da,e=>{if(!to&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){R(this,zn)||this.setEventListener(R(this,da))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,zn))==null||e.call(this),te(this,zn,void 0))}setEventListener(e){var r;te(this,da,e),(r=R(this,zn))==null||r.call(this),te(this,zn,e(this.setOnline.bind(this)))}setOnline(e){R(this,ua)!==e&&(te(this,ua,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return R(this,ua)}},ua=new WeakMap,zn=new WeakMap,da=new WeakMap,_y),nu=new IE;function xf(){let t,e;const r=new Promise((s,o)=>{t=s,e=o});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),t(s)},r.reject=s=>{n({status:"rejected",reason:s}),e(s)},r}function DE(t){return Math.min(1e3*2**t,3e4)}function Q0(t){return(t??"online")==="online"?nu.isOnline():!0}var Y0=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Qd(t){return t instanceof Y0}function J0(t){let e=!1,r=0,n=!1,s;const o=xf(),i=g=>{var x;n||(m(new Y0(g)),(x=t.abort)==null||x.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>ip.isFocused()&&(t.networkMode==="always"||nu.isOnline())&&t.canRun(),d=()=>Q0(t.networkMode)&&t.canRun(),h=g=>{var x;n||(n=!0,(x=t.onSuccess)==null||x.call(t,g),s==null||s(),o.resolve(g))},m=g=>{var x;n||(n=!0,(x=t.onError)==null||x.call(t,g),s==null||s(),o.reject(g))},p=()=>new Promise(g=>{var x;s=b=>{(n||u())&&g(b)},(x=t.onPause)==null||x.call(t)}).then(()=>{var g;s=void 0,n||(g=t.onContinue)==null||g.call(t)}),y=()=>{if(n)return;let g;const x=r===0?t.initialPromise:void 0;try{g=x??t.fn()}catch(b){g=Promise.reject(b)}Promise.resolve(g).then(h).catch(b=>{var k;if(n)return;const v=t.retry??(to?0:3),w=t.retryDelay??DE,_=typeof w=="function"?w(r,b):w,j=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,b);if(e||!j){m(b);return}r++,(k=t.onFail)==null||k.call(t,r,b),PE(_).then(()=>u()?void 0:p()).then(()=>{e?m(b):y()})})};return{promise:o,cancel:i,continue:()=>(s==null||s(),o),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?y():p().then(y),o)}}var LE=t=>setTimeout(t,0);function ME(){let t=[],e=0,r=l=>{l()},n=l=>{l()},s=LE;const o=l=>{e?t.push(l):s(()=>{r(l)})},i=()=>{const l=t;t=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||i()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var vt=ME(),Ls,jy,X0=(jy=class{constructor(){le(this,Ls)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),mf(this.gcTime)&&te(this,Ls,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(to?1/0:5*60*1e3))}clearGcTimeout(){R(this,Ls)&&(clearTimeout(R(this,Ls)),te(this,Ls,void 0))}},Ls=new WeakMap,jy),ha,Ms,lr,$s,St,ul,Fs,Tr,cn,Sy,$E=(Sy=class extends X0{constructor(e){super();le(this,Tr);le(this,ha);le(this,Ms);le(this,lr);le(this,$s);le(this,St);le(this,ul);le(this,Fs);te(this,Fs,!1),te(this,ul,e.defaultOptions),this.setOptions(e.options),this.observers=[],te(this,$s,e.client),te(this,lr,R(this,$s).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,te(this,ha,FE(this.options)),this.state=e.state??R(this,ha),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=R(this,St))==null?void 0:e.promise}setOptions(e){this.options={...R(this,ul),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&R(this,lr).remove(this)}setData(e,r){const n=vf(this.state.data,e,this.options);return je(this,Tr,cn).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){je(this,Tr,cn).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,s;const r=(n=R(this,St))==null?void 0:n.promise;return(s=R(this,St))==null||s.cancel(e),r?r.then(Bt).catch(Bt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(R(this,ha))}isActive(){return this.observers.some(e=>ur(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ap||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>is(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!q0(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=R(this,St))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=R(this,St))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),R(this,lr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(R(this,St)&&(R(this,Fs)?R(this,St).cancel({revert:!0}):R(this,St).cancelRetry()),this.scheduleGc()),R(this,lr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||je(this,Tr,cn).call(this,{type:"invalidate"})}fetch(e,r){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(R(this,St))return R(this,St).continueRetry(),R(this,St).promise}if(e&&this.setOptions(e),!this.options.queryFn){const m=this.observers.find(p=>p.options.queryFn);m&&this.setOptions(m.options)}const n=new AbortController,s=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(te(this,Fs,!0),n.signal)})},o=()=>{const m=G0(this.options,r),y=(()=>{const g={client:R(this,$s),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return te(this,Fs,!1),this.options.persister?this.options.persister(m,y,this):m(y)},l=(()=>{const m={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:R(this,$s),state:this.state,fetchFn:o};return s(m),m})();(u=this.options.behavior)==null||u.onFetch(l,this),te(this,Ms,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&je(this,Tr,cn).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=m=>{var p,y,g,x;Qd(m)&&m.silent||je(this,Tr,cn).call(this,{type:"error",error:m}),Qd(m)||((y=(p=R(this,lr).config).onError)==null||y.call(p,m,this),(x=(g=R(this,lr).config).onSettled)==null||x.call(g,this.state.data,m,this)),this.scheduleGc()};return te(this,St,J0({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:m=>{var p,y,g,x;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(b){c(b);return}(y=(p=R(this,lr).config).onSuccess)==null||y.call(p,m,this),(x=(g=R(this,lr).config).onSettled)==null||x.call(g,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,p)=>{je(this,Tr,cn).call(this,{type:"failed",failureCount:m,error:p})},onPause:()=>{je(this,Tr,cn).call(this,{type:"pause"})},onContinue:()=>{je(this,Tr,cn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),R(this,St).start()}},ha=new WeakMap,Ms=new WeakMap,lr=new WeakMap,$s=new WeakMap,St=new WeakMap,ul=new WeakMap,Fs=new WeakMap,Tr=new WeakSet,cn=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Z0(n.data,this.options),fetchMeta:e.meta??null};case"success":return te(this,Ms,void 0),{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Qd(s)&&s.revert&&R(this,Ms)?{...R(this,Ms),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),vt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),R(this,lr).notify({query:this,type:"updated",action:e})})},Sy);function Z0(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Q0(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function FE(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Hr,Ny,UE=(Ny=class extends yl{constructor(e={}){super();le(this,Hr);this.config=e,te(this,Hr,new Map)}build(e,r,n){const s=r.queryKey,o=r.queryHash??op(s,r);let i=this.get(o);return i||(i=new $E({client:e,queryKey:s,queryHash:o,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(i)),i}add(e){R(this,Hr).has(e.queryHash)||(R(this,Hr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=R(this,Hr).get(e.queryHash);r&&(e.destroy(),r===e&&R(this,Hr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){vt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return R(this,Hr).get(e)}getAll(){return[...R(this,Hr).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>Rv(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>Rv(e,n)):r}notify(e){vt.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){vt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){vt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Hr=new WeakMap,Ny),qr,Et,Us,Kr,In,ky,BE=(ky=class extends X0{constructor(e){super();le(this,Kr);le(this,qr);le(this,Et);le(this,Us);this.mutationId=e.mutationId,te(this,Et,e.mutationCache),te(this,qr,[]),this.state=e.state||zE(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){R(this,qr).includes(e)||(R(this,qr).push(e),this.clearGcTimeout(),R(this,Et).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){te(this,qr,R(this,qr).filter(r=>r!==e)),this.scheduleGc(),R(this,Et).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){R(this,qr).length||(this.state.status==="pending"?this.scheduleGc():R(this,Et).remove(this))}continue(){var e;return((e=R(this,Us))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,i,l,c,u,d,h,m,p,y,g,x,b,v,w,_,j,k,C,P;const r=()=>{je(this,Kr,In).call(this,{type:"continue"})};te(this,Us,J0({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(N,E)=>{je(this,Kr,In).call(this,{type:"failed",failureCount:N,error:E})},onPause:()=>{je(this,Kr,In).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>R(this,Et).canRun(this)}));const n=this.state.status==="pending",s=!R(this,Us).canStart();try{if(n)r();else{je(this,Kr,In).call(this,{type:"pending",variables:e,isPaused:s}),await((i=(o=R(this,Et).config).onMutate)==null?void 0:i.call(o,e,this));const E=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e));E!==this.state.context&&je(this,Kr,In).call(this,{type:"pending",context:E,variables:e,isPaused:s})}const N=await R(this,Us).start();return await((d=(u=R(this,Et).config).onSuccess)==null?void 0:d.call(u,N,e,this.state.context,this)),await((m=(h=this.options).onSuccess)==null?void 0:m.call(h,N,e,this.state.context)),await((y=(p=R(this,Et).config).onSettled)==null?void 0:y.call(p,N,null,this.state.variables,this.state.context,this)),await((x=(g=this.options).onSettled)==null?void 0:x.call(g,N,null,e,this.state.context)),je(this,Kr,In).call(this,{type:"success",data:N}),N}catch(N){try{throw await((v=(b=R(this,Et).config).onError)==null?void 0:v.call(b,N,e,this.state.context,this)),await((_=(w=this.options).onError)==null?void 0:_.call(w,N,e,this.state.context)),await((k=(j=R(this,Et).config).onSettled)==null?void 0:k.call(j,void 0,N,this.state.variables,this.state.context,this)),await((P=(C=this.options).onSettled)==null?void 0:P.call(C,void 0,N,e,this.state.context)),N}finally{je(this,Kr,In).call(this,{type:"error",error:N})}}finally{R(this,Et).runNext(this)}}},qr=new WeakMap,Et=new WeakMap,Us=new WeakMap,Kr=new WeakSet,In=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),vt.batch(()=>{R(this,qr).forEach(n=>{n.onMutationUpdate(e)}),R(this,Et).notify({mutation:this,type:"updated",action:e})})},ky);function zE(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var fn,Rr,dl,Cy,VE=(Cy=class extends yl{constructor(e={}){super();le(this,fn);le(this,Rr);le(this,dl);this.config=e,te(this,fn,new Set),te(this,Rr,new Map),te(this,dl,0)}build(e,r,n){const s=new BE({mutationCache:this,mutationId:++Dl(this,dl)._,options:e.defaultMutationOptions(r),state:n});return this.add(s),s}add(e){R(this,fn).add(e);const r=Zl(e);if(typeof r=="string"){const n=R(this,Rr).get(r);n?n.push(e):R(this,Rr).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(R(this,fn).delete(e)){const r=Zl(e);if(typeof r=="string"){const n=R(this,Rr).get(r);if(n)if(n.length>1){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}else n[0]===e&&R(this,Rr).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=Zl(e);if(typeof r=="string"){const n=R(this,Rr).get(r),s=n==null?void 0:n.find(o=>o.state.status==="pending");return!s||s===e}else return!0}runNext(e){var n;const r=Zl(e);if(typeof r=="string"){const s=(n=R(this,Rr).get(r))==null?void 0:n.find(o=>o!==e&&o.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){vt.batch(()=>{R(this,fn).forEach(e=>{this.notify({type:"removed",mutation:e})}),R(this,fn).clear(),R(this,Rr).clear()})}getAll(){return Array.from(R(this,fn))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>Ov(r,n))}findAll(e={}){return this.getAll().filter(r=>Ov(e,r))}notify(e){vt.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return vt.batch(()=>Promise.all(e.map(r=>r.continue().catch(Bt))))}},fn=new WeakMap,Rr=new WeakMap,dl=new WeakMap,Cy);function Zl(t){var e;return(e=t.options.scope)==null?void 0:e.id}function Dv(t){return{onFetch:(e,r)=>{var d,h,m,p,y;const n=e.options,s=(m=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,o=((p=e.state.data)==null?void 0:p.pages)||[],i=((y=e.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const x=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},b=G0(e.options,e.fetchOptions),v=async(w,_,j)=>{if(g)return Promise.reject();if(_==null&&w.pages.length)return Promise.resolve(w);const C=(()=>{const L={client:e.client,queryKey:e.queryKey,pageParam:_,direction:j?"backward":"forward",meta:e.options.meta};return x(L),L})(),P=await b(C),{maxPages:N}=e.options,E=j?RE:TE;return{pages:E(w.pages,P,N),pageParams:E(w.pageParams,_,N)}};if(s&&o.length){const w=s==="backward",_=w?WE:Lv,j={pages:o,pageParams:i},k=_(n,j);l=await v(j,k,w)}else{const w=t??o.length;do{const _=c===0?i[0]??n.initialPageParam:Lv(n,l);if(c>0&&_==null)break;l=await v(l,_),c++}while(c<w)}return l};e.options.persister?e.fetchFn=()=>{var g,x;return(x=(g=e.options).persister)==null?void 0:x.call(g,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function Lv(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function WE(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var Ye,Vn,Wn,fa,ma,Hn,pa,ga,Ey,HE=(Ey=class{constructor(t={}){le(this,Ye);le(this,Vn);le(this,Wn);le(this,fa);le(this,ma);le(this,Hn);le(this,pa);le(this,ga);te(this,Ye,t.queryCache||new UE),te(this,Vn,t.mutationCache||new VE),te(this,Wn,t.defaultOptions||{}),te(this,fa,new Map),te(this,ma,new Map),te(this,Hn,0)}mount(){Dl(this,Hn)._++,R(this,Hn)===1&&(te(this,pa,ip.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,Ye).onFocus())})),te(this,ga,nu.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,Ye).onOnline())})))}unmount(){var t,e;Dl(this,Hn)._--,R(this,Hn)===0&&((t=R(this,pa))==null||t.call(this),te(this,pa,void 0),(e=R(this,ga))==null||e.call(this),te(this,ga,void 0))}isFetching(t){return R(this,Ye).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return R(this,Vn).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=R(this,Ye).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=R(this,Ye).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(is(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return R(this,Ye).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),s=R(this,Ye).get(n.queryHash),o=s==null?void 0:s.state.data,i=EE(e,o);if(i!==void 0)return R(this,Ye).build(this,n).setData(i,{...r,manual:!0})}setQueriesData(t,e,r){return vt.batch(()=>R(this,Ye).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=R(this,Ye).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=R(this,Ye);vt.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=R(this,Ye);return vt.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=vt.batch(()=>R(this,Ye).findAll(t).map(s=>s.cancel(r)));return Promise.all(n).then(Bt).catch(Bt)}invalidateQueries(t,e={}){return vt.batch(()=>(R(this,Ye).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=vt.batch(()=>R(this,Ye).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,r);return r.throwOnError||(o=o.catch(Bt)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(Bt)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=R(this,Ye).build(this,e);return r.isStaleByTime(is(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Bt).catch(Bt)}fetchInfiniteQuery(t){return t.behavior=Dv(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Bt).catch(Bt)}ensureInfiniteQueryData(t){return t.behavior=Dv(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return nu.isOnline()?R(this,Vn).resumePausedMutations():Promise.resolve()}getQueryCache(){return R(this,Ye)}getMutationCache(){return R(this,Vn)}getDefaultOptions(){return R(this,Wn)}setDefaultOptions(t){te(this,Wn,t)}setQueryDefaults(t,e){R(this,fa).set(Qi(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...R(this,fa).values()],r={};return e.forEach(n=>{Yi(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){R(this,ma).set(Qi(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...R(this,ma).values()],r={};return e.forEach(n=>{Yi(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...R(this,Wn).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=op(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ap&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...R(this,Wn).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){R(this,Ye).clear(),R(this,Vn).clear()}},Ye=new WeakMap,Vn=new WeakMap,Wn=new WeakMap,fa=new WeakMap,ma=new WeakMap,Hn=new WeakMap,pa=new WeakMap,ga=new WeakMap,Ey),Ut,Se,hl,Pt,Bs,va,qn,Kn,fl,xa,ya,zs,Vs,Gn,wa,Oe,fi,yf,wf,bf,_f,jf,Sf,Nf,eb,Py,qE=(Py=class extends yl{constructor(e,r){super();le(this,Oe);le(this,Ut);le(this,Se);le(this,hl);le(this,Pt);le(this,Bs);le(this,va);le(this,qn);le(this,Kn);le(this,fl);le(this,xa);le(this,ya);le(this,zs);le(this,Vs);le(this,Gn);le(this,wa,new Set);this.options=r,te(this,Ut,e),te(this,Kn,null),te(this,qn,xf()),this.options.experimental_prefetchInRender||R(this,qn).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(R(this,Se).addObserver(this),Mv(R(this,Se),this.options)?je(this,Oe,fi).call(this):this.updateResult(),je(this,Oe,_f).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return kf(R(this,Se),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return kf(R(this,Se),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,je(this,Oe,jf).call(this),je(this,Oe,Sf).call(this),R(this,Se).removeObserver(this)}setOptions(e){const r=this.options,n=R(this,Se);if(this.options=R(this,Ut).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ur(this.options.enabled,R(this,Se))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");je(this,Oe,Nf).call(this),R(this,Se).setOptions(this.options),r._defaulted&&!pf(this.options,r)&&R(this,Ut).getQueryCache().notify({type:"observerOptionsUpdated",query:R(this,Se),observer:this});const s=this.hasListeners();s&&$v(R(this,Se),n,this.options,r)&&je(this,Oe,fi).call(this),this.updateResult(),s&&(R(this,Se)!==n||ur(this.options.enabled,R(this,Se))!==ur(r.enabled,R(this,Se))||is(this.options.staleTime,R(this,Se))!==is(r.staleTime,R(this,Se)))&&je(this,Oe,yf).call(this);const o=je(this,Oe,wf).call(this);s&&(R(this,Se)!==n||ur(this.options.enabled,R(this,Se))!==ur(r.enabled,R(this,Se))||o!==R(this,Gn))&&je(this,Oe,bf).call(this,o)}getOptimisticResult(e){const r=R(this,Ut).getQueryCache().build(R(this,Ut),e),n=this.createResult(r,e);return GE(this,n)&&(te(this,Pt,n),te(this,va,this.options),te(this,Bs,R(this,Se).state)),n}getCurrentResult(){return R(this,Pt)}trackResult(e,r){return new Proxy(e,{get:(n,s)=>(this.trackProp(s),r==null||r(s),Reflect.get(n,s))})}trackProp(e){R(this,wa).add(e)}getCurrentQuery(){return R(this,Se)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=R(this,Ut).defaultQueryOptions(e),n=R(this,Ut).getQueryCache().build(R(this,Ut),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(e){return je(this,Oe,fi).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),R(this,Pt)))}createResult(e,r){var N;const n=R(this,Se),s=this.options,o=R(this,Pt),i=R(this,Bs),l=R(this,va),u=e!==n?e.state:R(this,hl),{state:d}=e;let h={...d},m=!1,p;if(r._optimisticResults){const E=this.hasListeners(),L=!E&&Mv(e,r),T=E&&$v(e,n,r,s);(L||T)&&(h={...h,...Z0(d.data,e.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:y,errorUpdatedAt:g,status:x}=h;p=h.data;let b=!1;if(r.placeholderData!==void 0&&p===void 0&&x==="pending"){let E;o!=null&&o.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(E=o.data,b=!0):E=typeof r.placeholderData=="function"?r.placeholderData((N=R(this,ya))==null?void 0:N.state.data,R(this,ya)):r.placeholderData,E!==void 0&&(x="success",p=vf(o==null?void 0:o.data,E,r),m=!0)}if(r.select&&p!==void 0&&!b)if(o&&p===(i==null?void 0:i.data)&&r.select===R(this,fl))p=R(this,xa);else try{te(this,fl,r.select),p=r.select(p),p=vf(o==null?void 0:o.data,p,r),te(this,xa,p),te(this,Kn,null)}catch(E){te(this,Kn,E)}R(this,Kn)&&(y=R(this,Kn),p=R(this,xa),g=Date.now(),x="error");const v=h.fetchStatus==="fetching",w=x==="pending",_=x==="error",j=w&&v,k=p!==void 0,P={status:x,fetchStatus:h.fetchStatus,isPending:w,isSuccess:x==="success",isError:_,isInitialLoading:j,isLoading:j,data:p,dataUpdatedAt:h.dataUpdatedAt,error:y,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:v,isRefetching:v&&!w,isLoadingError:_&&!k,isPaused:h.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:_&&k,isStale:lp(e,r),refetch:this.refetch,promise:R(this,qn),isEnabled:ur(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const E=W=>{P.status==="error"?W.reject(P.error):P.data!==void 0&&W.resolve(P.data)},L=()=>{const W=te(this,qn,P.promise=xf());E(W)},T=R(this,qn);switch(T.status){case"pending":e.queryHash===n.queryHash&&E(T);break;case"fulfilled":(P.status==="error"||P.data!==T.value)&&L();break;case"rejected":(P.status!=="error"||P.error!==T.reason)&&L();break}}return P}updateResult(){const e=R(this,Pt),r=this.createResult(R(this,Se),this.options);if(te(this,Bs,R(this,Se).state),te(this,va,this.options),R(this,Bs).data!==void 0&&te(this,ya,R(this,Se)),pf(r,e))return;te(this,Pt,r);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!R(this,wa).size)return!0;const i=new Set(o??R(this,wa));return this.options.throwOnError&&i.add("error"),Object.keys(R(this,Pt)).some(l=>{const c=l;return R(this,Pt)[c]!==e[c]&&i.has(c)})};je(this,Oe,eb).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&je(this,Oe,_f).call(this)}},Ut=new WeakMap,Se=new WeakMap,hl=new WeakMap,Pt=new WeakMap,Bs=new WeakMap,va=new WeakMap,qn=new WeakMap,Kn=new WeakMap,fl=new WeakMap,xa=new WeakMap,ya=new WeakMap,zs=new WeakMap,Vs=new WeakMap,Gn=new WeakMap,wa=new WeakMap,Oe=new WeakSet,fi=function(e){je(this,Oe,Nf).call(this);let r=R(this,Se).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(Bt)),r},yf=function(){je(this,Oe,jf).call(this);const e=is(this.options.staleTime,R(this,Se));if(to||R(this,Pt).isStale||!mf(e))return;const n=q0(R(this,Pt).dataUpdatedAt,e)+1;te(this,zs,setTimeout(()=>{R(this,Pt).isStale||this.updateResult()},n))},wf=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(R(this,Se)):this.options.refetchInterval)??!1},bf=function(e){je(this,Oe,Sf).call(this),te(this,Gn,e),!(to||ur(this.options.enabled,R(this,Se))===!1||!mf(R(this,Gn))||R(this,Gn)===0)&&te(this,Vs,setInterval(()=>{(this.options.refetchIntervalInBackground||ip.isFocused())&&je(this,Oe,fi).call(this)},R(this,Gn)))},_f=function(){je(this,Oe,yf).call(this),je(this,Oe,bf).call(this,je(this,Oe,wf).call(this))},jf=function(){R(this,zs)&&(clearTimeout(R(this,zs)),te(this,zs,void 0))},Sf=function(){R(this,Vs)&&(clearInterval(R(this,Vs)),te(this,Vs,void 0))},Nf=function(){const e=R(this,Ut).getQueryCache().build(R(this,Ut),this.options);if(e===R(this,Se))return;const r=R(this,Se);te(this,Se,e),te(this,hl,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},eb=function(e){vt.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(R(this,Pt))}),R(this,Ut).getQueryCache().notify({query:R(this,Se),type:"observerResultsUpdated"})})},Py);function KE(t,e){return ur(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Mv(t,e){return KE(t,e)||t.state.data!==void 0&&kf(t,e,e.refetchOnMount)}function kf(t,e,r){if(ur(e.enabled,t)!==!1&&is(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&lp(t,e)}return!1}function $v(t,e,r,n){return(t!==e||ur(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&lp(t,r)}function lp(t,e){return ur(e.enabled,t)!==!1&&t.isStaleByTime(is(e.staleTime,t))}function GE(t,e){return!pf(t.getCurrentResult(),e)}var tb=f.createContext(void 0),QE=t=>{const e=f.useContext(tb);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},YE=({client:t,children:e})=>(f.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(tb.Provider,{value:t,children:e})),rb=f.createContext(!1),JE=()=>f.useContext(rb);rb.Provider;function XE(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var ZE=f.createContext(XE()),eP=()=>f.useContext(ZE),tP=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},rP=t=>{f.useEffect(()=>{t.clearReset()},[t])},nP=({result:t,errorResetBoundary:e,throwOnError:r,query:n,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(s&&t.data===void 0||OE(r,[t.error,n])),sP=t=>{if(t.suspense){const e=n=>n==="static"?n:Math.max(n??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...n)=>e(r(...n)):e(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},oP=(t,e)=>t.isLoading&&t.isFetching&&!e,aP=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Fv=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function iP(t,e,r){var h,m,p,y,g;const n=JE(),s=eP(),o=QE(),i=o.defaultQueryOptions(t);(m=(h=o.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||m.call(h,i),i._optimisticResults=n?"isRestoring":"optimistic",sP(i),tP(i,s),rP(s);const l=!o.getQueryCache().get(i.queryHash),[c]=f.useState(()=>new e(o,i)),u=c.getOptimisticResult(i),d=!n&&t.subscribed!==!1;if(f.useSyncExternalStore(f.useCallback(x=>{const b=d?c.subscribe(vt.batchCalls(x)):Bt;return c.updateResult(),b},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),f.useEffect(()=>{c.setOptions(i)},[i,c]),aP(i,u))throw Fv(i,c,s);if(nP({result:u,errorResetBoundary:s,throwOnError:i.throwOnError,query:o.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw u.error;if((y=(p=o.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||y.call(p,i,u),i.experimental_prefetchInRender&&!to&&oP(u,n)){const x=l?Fv(i,c,s):(g=o.getQueryCache().get(i.queryHash))==null?void 0:g.promise;x==null||x.catch(Bt).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?u:c.trackResult(u)}function wl(t,e){return iP(t,qE)}const he=t=>typeof t=="string",ai=()=>{let t,e;const r=new Promise((n,s)=>{t=n,e=s});return r.resolve=t,r.reject=e,r},Uv=t=>t==null?"":""+t,lP=(t,e,r)=>{t.forEach(n=>{e[n]&&(r[n]=e[n])})},cP=/###/g,Bv=t=>t&&t.indexOf("###")>-1?t.replace(cP,"."):t,zv=t=>!t||he(t),ki=(t,e,r)=>{const n=he(e)?e.split("."):e;let s=0;for(;s<n.length-1;){if(zv(t))return{};const o=Bv(n[s]);!t[o]&&r&&(t[o]=new r),Object.prototype.hasOwnProperty.call(t,o)?t=t[o]:t={},++s}return zv(t)?{}:{obj:t,k:Bv(n[s])}},Vv=(t,e,r)=>{const{obj:n,k:s}=ki(t,e,Object);if(n!==void 0||e.length===1){n[s]=r;return}let o=e[e.length-1],i=e.slice(0,e.length-1),l=ki(t,i,Object);for(;l.obj===void 0&&i.length;)o=`${i[i.length-1]}.${o}`,i=i.slice(0,i.length-1),l=ki(t,i,Object),l!=null&&l.obj&&typeof l.obj[`${l.k}.${o}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${o}`]=r},uP=(t,e,r,n)=>{const{obj:s,k:o}=ki(t,e,Object);s[o]=s[o]||[],s[o].push(r)},su=(t,e)=>{const{obj:r,k:n}=ki(t,e);if(r&&Object.prototype.hasOwnProperty.call(r,n))return r[n]},dP=(t,e,r)=>{const n=su(t,r);return n!==void 0?n:su(e,r)},nb=(t,e,r)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in t?he(t[n])||t[n]instanceof String||he(e[n])||e[n]instanceof String?r&&(t[n]=e[n]):nb(t[n],e[n],r):t[n]=e[n]);return t},ko=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var hP={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const fP=t=>he(t)?t.replace(/[&<>"'\/]/g,e=>hP[e]):t;class mP{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const r=this.regExpMap.get(e);if(r!==void 0)return r;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const pP=[" ",",","?","!",";"],gP=new mP(20),vP=(t,e,r)=>{e=e||"",r=r||"";const n=pP.filter(i=>e.indexOf(i)<0&&r.indexOf(i)<0);if(n.length===0)return!0;const s=gP.getRegExp(`(${n.map(i=>i==="?"?"\\?":i).join("|")})`);let o=!s.test(t);if(!o){const i=t.indexOf(r);i>0&&!s.test(t.substring(0,i))&&(o=!0)}return o},Cf=(t,e,r=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const n=e.split(r);let s=t;for(let o=0;o<n.length;){if(!s||typeof s!="object")return;let i,l="";for(let c=o;c<n.length;++c)if(c!==o&&(l+=r),l+=n[c],i=s[l],i!==void 0){if(["string","number","boolean"].indexOf(typeof i)>-1&&c<n.length-1)continue;o+=c-o+1;break}s=i}return s},Ji=t=>t==null?void 0:t.replace("_","-"),xP={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var r,n;(n=(r=console==null?void 0:console[t])==null?void 0:r.apply)==null||n.call(r,console,e)}};class ou{constructor(e,r={}){this.init(e,r)}init(e,r={}){this.prefix=r.prefix||"i18next:",this.logger=e||xP,this.options=r,this.debug=r.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,r,n,s){return s&&!this.debug?null:(he(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[r](e))}create(e){return new ou(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new ou(this.logger,e)}}var Qr=new ou;class Bu{constructor(){this.observers={}}on(e,r){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const s=this.observers[n].get(r)||0;this.observers[n].set(r,s+1)}),this}off(e,r){if(this.observers[e]){if(!r){delete this.observers[e];return}this.observers[e].delete(r)}}emit(e,...r){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([s,o])=>{for(let i=0;i<o;i++)s(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([s,o])=>{for(let i=0;i<o;i++)s.apply(s,[e,...r])})}}class Wv extends Bu{constructor(e,r={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const r=this.options.ns.indexOf(e);r>-1&&this.options.ns.splice(r,1)}getResource(e,r,n,s={}){var u,d;const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,i=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,r],n&&(Array.isArray(n)?l.push(...n):he(n)&&o?l.push(...n.split(o)):l.push(n)));const c=su(this.data,l);return!c&&!r&&!n&&e.indexOf(".")>-1&&(e=l[0],r=l[1],n=l.slice(2).join(".")),c||!i||!he(n)?c:Cf((d=(u=this.data)==null?void 0:u[e])==null?void 0:d[r],n,o)}addResource(e,r,n,s,o={silent:!1}){const i=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let l=[e,r];n&&(l=l.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(l=e.split("."),s=r,r=l[1]),this.addNamespaces(r),Vv(this.data,l,s),o.silent||this.emit("added",e,r,n,s)}addResources(e,r,n,s={silent:!1}){for(const o in n)(he(n[o])||Array.isArray(n[o]))&&this.addResource(e,r,o,n[o],{silent:!0});s.silent||this.emit("added",e,r,n)}addResourceBundle(e,r,n,s,o,i={silent:!1,skipCopy:!1}){let l=[e,r];e.indexOf(".")>-1&&(l=e.split("."),s=n,n=r,r=l[1]),this.addNamespaces(r);let c=su(this.data,l)||{};i.skipCopy||(n=JSON.parse(JSON.stringify(n))),s?nb(c,n,o):c={...c,...n},Vv(this.data,l,c),i.silent||this.emit("added",e,r,n)}removeResourceBundle(e,r){this.hasResourceBundle(e,r)&&delete this.data[e][r],this.removeNamespaces(r),this.emit("removed",e,r)}hasResourceBundle(e,r){return this.getResource(e,r)!==void 0}getResourceBundle(e,r){return r||(r=this.options.defaultNS),this.getResource(e,r)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const r=this.getDataByLanguage(e);return!!(r&&Object.keys(r)||[]).find(s=>r[s]&&Object.keys(r[s]).length>0)}toJSON(){return this.data}}var sb={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,r,n,s){return t.forEach(o=>{var i;e=((i=this.processors[o])==null?void 0:i.process(e,r,n,s))??e}),e}};const ob=Symbol("i18next/PATH_KEY");function yP(){const t=[],e=Object.create(null);let r;return e.get=(n,s)=>{var o;return(o=r==null?void 0:r.revoke)==null||o.call(r),s===ob?t:(t.push(s),r=Proxy.revocable(n,e),r.proxy)},Proxy.revocable(Object.create(null),e).proxy}function Ef(t,e){const{[ob]:r}=t(yP());return r.join((e==null?void 0:e.keySeparator)??".")}const Hv={},Yd=t=>!he(t)&&typeof t!="boolean"&&typeof t!="number";class au extends Bu{constructor(e,r={}){super(),lP(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Qr.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,r={interpolation:{}}){const n={...r};if(e==null)return!1;const s=this.resolve(e,n);if((s==null?void 0:s.res)===void 0)return!1;const o=Yd(s.res);return!(n.returnObjects===!1&&o)}extractFromKey(e,r){let n=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const s=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let o=r.ns||this.options.defaultNS||[];const i=n&&e.indexOf(n)>-1,l=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!vP(e,n,s);if(i&&!l){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:he(o)?[o]:o};const u=e.split(n);(n!==s||n===s&&this.options.ns.indexOf(u[0])>-1)&&(o=u.shift()),e=u.join(s)}return{key:e,namespaces:he(o)?[o]:o}}translate(e,r,n){let s=typeof r=="object"?{...r}:r;if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),e==null)return"";typeof e=="function"&&(e=Ef(e,{...this.options,...s})),Array.isArray(e)||(e=[String(e)]);const o=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:l,namespaces:c}=this.extractFromKey(e[e.length-1],s),u=c[c.length-1];let d=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");const h=s.lng||this.language,m=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((h==null?void 0:h.toLowerCase())==="cimode")return m?o?{res:`${u}${d}${l}`,usedKey:l,exactUsedKey:l,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(s)}:`${u}${d}${l}`:o?{res:l,usedKey:l,exactUsedKey:l,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(s)}:l;const p=this.resolve(e,s);let y=p==null?void 0:p.res;const g=(p==null?void 0:p.usedKey)||l,x=(p==null?void 0:p.exactUsedKey)||l,b=["[object Number]","[object Function]","[object RegExp]"],v=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject,_=s.count!==void 0&&!he(s.count),j=au.hasDefaultValue(s),k=_?this.pluralResolver.getSuffix(h,s.count,s):"",C=s.ordinal&&_?this.pluralResolver.getSuffix(h,s.count,{ordinal:!1}):"",P=_&&!s.ordinal&&s.count===0,N=P&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${k}`]||s[`defaultValue${C}`]||s.defaultValue;let E=y;w&&!y&&j&&(E=N);const L=Yd(E),T=Object.prototype.toString.apply(E);if(w&&E&&L&&b.indexOf(T)<0&&!(he(v)&&Array.isArray(E))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const W=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,E,{...s,ns:c}):`key '${l} (${this.language})' returned an object instead of string.`;return o?(p.res=W,p.usedParams=this.getUsedParamsDetails(s),p):W}if(i){const W=Array.isArray(E),O=W?[]:{},H=W?x:g;for(const I in E)if(Object.prototype.hasOwnProperty.call(E,I)){const U=`${H}${i}${I}`;j&&!y?O[I]=this.translate(U,{...s,defaultValue:Yd(N)?N[I]:void 0,joinArrays:!1,ns:c}):O[I]=this.translate(U,{...s,joinArrays:!1,ns:c}),O[I]===U&&(O[I]=E[I])}y=O}}else if(w&&he(v)&&Array.isArray(y))y=y.join(v),y&&(y=this.extendTranslation(y,e,s,n));else{let W=!1,O=!1;!this.isValidLookup(y)&&j&&(W=!0,y=N),this.isValidLookup(y)||(O=!0,y=l);const I=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&O?void 0:y,U=j&&N!==y&&this.options.updateMissing;if(O||W||U){if(this.logger.log(U?"updateKey":"missingKey",h,u,l,U?N:y),i){const M=this.resolve(l,{...s,keySeparator:!1});M&&M.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let D=[];const $=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&$&&$[0])for(let M=0;M<$.length;M++)D.push($[M]);else this.options.saveMissingTo==="all"?D=this.languageUtils.toResolveHierarchy(s.lng||this.language):D.push(s.lng||this.language);const S=(M,Y,ye)=>{var ve;const pe=j&&ye!==y?ye:I;this.options.missingKeyHandler?this.options.missingKeyHandler(M,u,Y,pe,U,s):(ve=this.backendConnector)!=null&&ve.saveMissing&&this.backendConnector.saveMissing(M,u,Y,pe,U,s),this.emit("missingKey",M,u,Y,y)};this.options.saveMissing&&(this.options.saveMissingPlurals&&_?D.forEach(M=>{const Y=this.pluralResolver.getSuffixes(M,s);P&&s[`defaultValue${this.options.pluralSeparator}zero`]&&Y.indexOf(`${this.options.pluralSeparator}zero`)<0&&Y.push(`${this.options.pluralSeparator}zero`),Y.forEach(ye=>{S([M],l+ye,s[`defaultValue${ye}`]||N)})}):S(D,l,N))}y=this.extendTranslation(y,e,s,p,n),O&&y===l&&this.options.appendNamespaceToMissingKey&&(y=`${u}${d}${l}`),(O||W)&&this.options.parseMissingKeyHandler&&(y=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${d}${l}`:l,W?y:void 0,s))}return o?(p.res=y,p.usedParams=this.getUsedParamsDetails(s),p):y}extendTranslation(e,r,n,s,o){var c,u;if((c=this.i18nFormat)!=null&&c.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const d=he(e)&&(((u=n==null?void 0:n.interpolation)==null?void 0:u.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(d){const p=e.match(this.interpolator.nestingRegexp);h=p&&p.length}let m=n.replace&&!he(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(m={...this.options.interpolation.defaultVariables,...m}),e=this.interpolator.interpolate(e,m,n.lng||this.language||s.usedLng,n),d){const p=e.match(this.interpolator.nestingRegexp),y=p&&p.length;h<y&&(n.nest=!1)}!n.lng&&s&&s.res&&(n.lng=this.language||s.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,(...p)=>(o==null?void 0:o[0])===p[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${r[0]}`),null):this.translate(...p,r),n)),n.interpolation&&this.interpolator.reset()}const i=n.postProcess||this.options.postProcess,l=he(i)?[i]:i;return e!=null&&(l!=null&&l.length)&&n.applyPostProcessor!==!1&&(e=sb.handle(l,e,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e,r={}){let n,s,o,i,l;return he(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(n))return;const u=this.extractFromKey(c,r),d=u.key;s=d;let h=u.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const m=r.count!==void 0&&!he(r.count),p=m&&!r.ordinal&&r.count===0,y=r.context!==void 0&&(he(r.context)||typeof r.context=="number")&&r.context!=="",g=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);h.forEach(x=>{var b,v;this.isValidLookup(n)||(l=x,!Hv[`${g[0]}-${x}`]&&((b=this.utils)!=null&&b.hasLoadedNamespace)&&!((v=this.utils)!=null&&v.hasLoadedNamespace(l))&&(Hv[`${g[0]}-${x}`]=!0,this.logger.warn(`key "${s}" for languages "${g.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach(w=>{var k;if(this.isValidLookup(n))return;i=w;const _=[d];if((k=this.i18nFormat)!=null&&k.addLookupKeys)this.i18nFormat.addLookupKeys(_,d,w,x,r);else{let C;m&&(C=this.pluralResolver.getSuffix(w,r.count,r));const P=`${this.options.pluralSeparator}zero`,N=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&(r.ordinal&&C.indexOf(N)===0&&_.push(d+C.replace(N,this.options.pluralSeparator)),_.push(d+C),p&&_.push(d+P)),y){const E=`${d}${this.options.contextSeparator||"_"}${r.context}`;_.push(E),m&&(r.ordinal&&C.indexOf(N)===0&&_.push(E+C.replace(N,this.options.pluralSeparator)),_.push(E+C),p&&_.push(E+P))}}let j;for(;j=_.pop();)this.isValidLookup(n)||(o=j,n=this.getResource(w,x,j,r))}))})}),{res:n,usedKey:s,exactUsedKey:o,usedLng:i,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,r,n,s={}){var o;return(o=this.i18nFormat)!=null&&o.getResource?this.i18nFormat.getResource(e,r,n,s):this.resourceStore.getResource(e,r,n,s)}getUsedParamsDetails(e={}){const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!he(e.replace);let s=n?e.replace:e;if(n&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!n){s={...s};for(const o of r)delete s[o]}return s}static hasDefaultValue(e){const r="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&r===n.substring(0,r.length)&&e[n]!==void 0)return!0;return!1}}class qv{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Qr.create("languageUtils")}getScriptPartFromCode(e){if(e=Ji(e),!e||e.indexOf("-")<0)return null;const r=e.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(e){if(e=Ji(e),!e||e.indexOf("-")<0)return e;const r=e.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(e){if(he(e)&&e.indexOf("-")>-1){let r;try{r=Intl.getCanonicalLocales(e)[0]}catch{}return r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let r;return e.forEach(n=>{if(r)return;const s=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(s))&&(r=s)}),!r&&this.options.supportedLngs&&e.forEach(n=>{if(r)return;const s=this.getScriptPartFromCode(n);if(this.isSupportedCode(s))return r=s;const o=this.getLanguagePartFromCode(n);if(this.isSupportedCode(o))return r=o;r=this.options.supportedLngs.find(i=>{if(i===o)return i;if(!(i.indexOf("-")<0&&o.indexOf("-")<0)&&(i.indexOf("-")>0&&o.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===o||i.indexOf(o)===0&&o.length>1))return i})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(e,r){if(!e)return[];if(typeof e=="function"&&(e=e(r)),he(e)&&(e=[e]),Array.isArray(e))return e;if(!r)return e.default||[];let n=e[r];return n||(n=e[this.getScriptPartFromCode(r)]),n||(n=e[this.formatLanguageCode(r)]),n||(n=e[this.getLanguagePartFromCode(r)]),n||(n=e.default),n||[]}toResolveHierarchy(e,r){const n=this.getFallbackCodes((r===!1?[]:r)||this.options.fallbackLng||[],e),s=[],o=i=>{i&&(this.isSupportedCode(i)?s.push(i):this.logger.warn(`rejecting language code not found in supportedLngs: ${i}`))};return he(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):he(e)&&o(this.formatLanguageCode(e)),n.forEach(i=>{s.indexOf(i)<0&&o(this.formatLanguageCode(i))}),s}}const Kv={zero:0,one:1,two:2,few:3,many:4,other:5},Gv={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class wP{constructor(e,r={}){this.languageUtils=e,this.options=r,this.logger=Qr.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,r){this.rules[e]=r}clearCache(){this.pluralRulesCache={}}getRule(e,r={}){const n=Ji(e==="dev"?"en":e),s=r.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:n,type:s});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let i;try{i=new Intl.PluralRules(n,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Gv;if(!e.match(/-|_/))return Gv;const c=this.languageUtils.getLanguagePartFromCode(e);i=this.getRule(c,r)}return this.pluralRulesCache[o]=i,i}needsPlural(e,r={}){let n=this.getRule(e,r);return n||(n=this.getRule("dev",r)),(n==null?void 0:n.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,r,n={}){return this.getSuffixes(e,n).map(s=>`${r}${s}`)}getSuffixes(e,r={}){let n=this.getRule(e,r);return n||(n=this.getRule("dev",r)),n?n.resolvedOptions().pluralCategories.sort((s,o)=>Kv[s]-Kv[o]).map(s=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,r,n={}){const s=this.getRule(e,n);return s?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s.select(r)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",r,n))}}const Qv=(t,e,r,n=".",s=!0)=>{let o=dP(t,e,r);return!o&&s&&he(r)&&(o=Cf(t,r,n),o===void 0&&(o=Cf(e,r,n))),o},Jd=t=>t.replace(/\$/g,"$$$$");class bP{constructor(e={}){var r;this.logger=Qr.create("interpolator"),this.options=e,this.format=((r=e==null?void 0:e.interpolation)==null?void 0:r.format)||(n=>n),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:r,escapeValue:n,useRawValueToEscape:s,prefix:o,prefixEscaped:i,suffix:l,suffixEscaped:c,formatSeparator:u,unescapeSuffix:d,unescapePrefix:h,nestingPrefix:m,nestingPrefixEscaped:p,nestingSuffix:y,nestingSuffixEscaped:g,nestingOptionsSeparator:x,maxReplaces:b,alwaysFormat:v}=e.interpolation;this.escape=r!==void 0?r:fP,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=o?ko(o):i||"{{",this.suffix=l?ko(l):c||"}}",this.formatSeparator=u||",",this.unescapePrefix=d?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=m?ko(m):p||ko("$t("),this.nestingSuffix=y?ko(y):g||ko(")"),this.nestingOptionsSeparator=x||",",this.maxReplaces=b||1e3,this.alwaysFormat=v!==void 0?v:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(r,n)=>(r==null?void 0:r.source)===n?(r.lastIndex=0,r):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,r,n,s){var p;let o,i,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=y=>{if(y.indexOf(this.formatSeparator)<0){const v=Qv(r,c,y,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(v,void 0,n,{...s,...r,interpolationkey:y}):v}const g=y.split(this.formatSeparator),x=g.shift().trim(),b=g.join(this.formatSeparator).trim();return this.format(Qv(r,c,x,this.options.keySeparator,this.options.ignoreJSONStructure),b,n,{...s,...r,interpolationkey:x})};this.resetRegExp();const d=(s==null?void 0:s.missingInterpolationHandler)||this.options.missingInterpolationHandler,h=((p=s==null?void 0:s.interpolation)==null?void 0:p.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:y=>Jd(y)},{regex:this.regexp,safeValue:y=>this.escapeValue?Jd(this.escape(y)):Jd(y)}].forEach(y=>{for(l=0;o=y.regex.exec(e);){const g=o[1].trim();if(i=u(g),i===void 0)if(typeof d=="function"){const b=d(e,o,s);i=he(b)?b:""}else if(s&&Object.prototype.hasOwnProperty.call(s,g))i="";else if(h){i=o[0];continue}else this.logger.warn(`missed to pass in variable ${g} for interpolating ${e}`),i="";else!he(i)&&!this.useRawValueToEscape&&(i=Uv(i));const x=y.safeValue(i);if(e=e.replace(o[0],x),h?(y.regex.lastIndex+=i.length,y.regex.lastIndex-=o[0].length):y.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,r,n={}){let s,o,i;const l=(c,u)=>{const d=this.nestingOptionsSeparator;if(c.indexOf(d)<0)return c;const h=c.split(new RegExp(`${d}[ ]*{`));let m=`{${h[1]}`;c=h[0],m=this.interpolate(m,i);const p=m.match(/'/g),y=m.match(/"/g);(((p==null?void 0:p.length)??0)%2===0&&!y||y.length%2!==0)&&(m=m.replace(/'/g,'"'));try{i=JSON.parse(m),u&&(i={...u,...i})}catch(g){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,g),`${c}${d}${m}`}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,c};for(;s=this.nestingRegexp.exec(e);){let c=[];i={...n},i=i.replace&&!he(i.replace)?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;const u=/{.*}/.test(s[1])?s[1].lastIndexOf("}")+1:s[1].indexOf(this.formatSeparator);if(u!==-1&&(c=s[1].slice(u).split(this.formatSeparator).map(d=>d.trim()).filter(Boolean),s[1]=s[1].slice(0,u)),o=r(l.call(this,s[1].trim(),i),i),o&&s[0]===e&&!he(o))return o;he(o)||(o=Uv(o)),o||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),o=""),c.length&&(o=c.reduce((d,h)=>this.format(d,h,n.lng,{...n,interpolationkey:s[1].trim()}),o.trim())),e=e.replace(s[0],o),this.regexp.lastIndex=0}return e}}const _P=t=>{let e=t.toLowerCase().trim();const r={};if(t.indexOf("(")>-1){const n=t.split("(");e=n[0].toLowerCase().trim();const s=n[1].substring(0,n[1].length-1);e==="currency"&&s.indexOf(":")<0?r.currency||(r.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?r.range||(r.range=s.trim()):s.split(";").forEach(i=>{if(i){const[l,...c]=i.split(":"),u=c.join(":").trim().replace(/^'+|'+$/g,""),d=l.trim();r[d]||(r[d]=u),u==="false"&&(r[d]=!1),u==="true"&&(r[d]=!0),isNaN(u)||(r[d]=parseInt(u,10))}})}return{formatName:e,formatOptions:r}},Yv=t=>{const e={};return(r,n,s)=>{let o=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(o={...o,[s.interpolationkey]:void 0});const i=n+JSON.stringify(o);let l=e[i];return l||(l=t(Ji(n),s),e[i]=l),l(r)}},jP=t=>(e,r,n)=>t(Ji(r),n)(e);class SP{constructor(e={}){this.logger=Qr.create("formatter"),this.options=e,this.init(e)}init(e,r={interpolation:{}}){this.formatSeparator=r.interpolation.formatSeparator||",";const n=r.cacheInBuiltFormats?Yv:jP;this.formats={number:n((s,o)=>{const i=new Intl.NumberFormat(s,{...o});return l=>i.format(l)}),currency:n((s,o)=>{const i=new Intl.NumberFormat(s,{...o,style:"currency"});return l=>i.format(l)}),datetime:n((s,o)=>{const i=new Intl.DateTimeFormat(s,{...o});return l=>i.format(l)}),relativetime:n((s,o)=>{const i=new Intl.RelativeTimeFormat(s,{...o});return l=>i.format(l,o.range||"day")}),list:n((s,o)=>{const i=new Intl.ListFormat(s,{...o});return l=>i.format(l)})}}add(e,r){this.formats[e.toLowerCase().trim()]=r}addCached(e,r){this.formats[e.toLowerCase().trim()]=Yv(r)}format(e,r,n,s={}){const o=r.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(l=>l.indexOf(")")>-1)){const l=o.findIndex(c=>c.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,l)].join(this.formatSeparator)}return o.reduce((l,c)=>{var h;const{formatName:u,formatOptions:d}=_P(c);if(this.formats[u]){let m=l;try{const p=((h=s==null?void 0:s.formatParams)==null?void 0:h[s.interpolationkey])||{},y=p.locale||p.lng||s.locale||s.lng||n;m=this.formats[u](l,y,{...d,...s,...p})}catch(p){this.logger.warn(p)}return m}else this.logger.warn(`there was no format function for ${u}`);return l},e)}}const NP=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class kP extends Bu{constructor(e,r,n,s={}){var o,i;super(),this.backend=e,this.store=r,this.services=n,this.languageUtils=n.languageUtils,this.options=s,this.logger=Qr.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],(i=(o=this.backend)==null?void 0:o.init)==null||i.call(o,n,s.backend,s)}queueLoad(e,r,n,s){const o={},i={},l={},c={};return e.forEach(u=>{let d=!0;r.forEach(h=>{const m=`${u}|${h}`;!n.reload&&this.store.hasResourceBundle(u,h)?this.state[m]=2:this.state[m]<0||(this.state[m]===1?i[m]===void 0&&(i[m]=!0):(this.state[m]=1,d=!1,i[m]===void 0&&(i[m]=!0),o[m]===void 0&&(o[m]=!0),c[h]===void 0&&(c[h]=!0)))}),d||(l[u]=!0)}),(Object.keys(o).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(o),pending:Object.keys(i),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(e,r,n){const s=e.split("|"),o=s[0],i=s[1];r&&this.emit("failedLoading",o,i,r),!r&&n&&this.store.addResourceBundle(o,i,n,void 0,void 0,{skipCopy:!0}),this.state[e]=r?-1:2,r&&n&&(this.state[e]=0);const l={};this.queue.forEach(c=>{uP(c.loaded,[o],i),NP(c,e),r&&c.errors.push(r),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(u=>{l[u]||(l[u]={});const d=c.loaded[u];d.length&&d.forEach(h=>{l[u][h]===void 0&&(l[u][h]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(e,r,n,s=0,o=this.retryTimeout,i){if(!e.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:r,fcName:n,tried:s,wait:o,callback:i});return}this.readingCalls++;const l=(u,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(u&&d&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,r,n,s+1,o*2,i)},o);return}i(u,d)},c=this.backend[n].bind(this.backend);if(c.length===2){try{const u=c(e,r);u&&typeof u.then=="function"?u.then(d=>l(null,d)).catch(l):l(null,u)}catch(u){l(u)}return}return c(e,r,l)}prepareLoading(e,r,n={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();he(e)&&(e=this.languageUtils.toResolveHierarchy(e)),he(r)&&(r=[r]);const o=this.queueLoad(e,r,n,s);if(!o.toLoad.length)return o.pending.length||s(),null;o.toLoad.forEach(i=>{this.loadOne(i)})}load(e,r,n){this.prepareLoading(e,r,{},n)}reload(e,r,n){this.prepareLoading(e,r,{reload:!0},n)}loadOne(e,r=""){const n=e.split("|"),s=n[0],o=n[1];this.read(s,o,"read",void 0,void 0,(i,l)=>{i&&this.logger.warn(`${r}loading namespace ${o} for language ${s} failed`,i),!i&&l&&this.logger.log(`${r}loaded namespace ${o} for language ${s}`,l),this.loaded(e,i,l)})}saveMissing(e,r,n,s,o,i={},l=()=>{}){var c,u,d,h,m;if((u=(c=this.services)==null?void 0:c.utils)!=null&&u.hasLoadedNamespace&&!((h=(d=this.services)==null?void 0:d.utils)!=null&&h.hasLoadedNamespace(r))){this.logger.warn(`did not save key "${n}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if((m=this.backend)!=null&&m.create){const p={...i,isUpdate:o},y=this.backend.create.bind(this.backend);if(y.length<6)try{let g;y.length===5?g=y(e,r,n,s,p):g=y(e,r,n,s),g&&typeof g.then=="function"?g.then(x=>l(null,x)).catch(l):l(null,g)}catch(g){l(g)}else y(e,r,n,s,l,p)}!e||!e[0]||this.store.addResource(e[0],r,n,s)}}}const Jv=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),he(t[1])&&(e.defaultValue=t[1]),he(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const r=t[3]||t[2];Object.keys(r).forEach(n=>{e[n]=r[n]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Xv=t=>{var e,r;return he(t.ns)&&(t.ns=[t.ns]),he(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),he(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((r=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:r.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},ec=()=>{},CP=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(r=>{typeof t[r]=="function"&&(t[r]=t[r].bind(t))})};class Ci extends Bu{constructor(e={},r){if(super(),this.options=Xv(e),this.services={},this.logger=Qr,this.modules={external:[]},CP(this),r&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,r),this;setTimeout(()=>{this.init(e,r)},0)}}init(e={},r){this.isInitializing=!0,typeof e=="function"&&(r=e,e={}),e.defaultNS==null&&e.ns&&(he(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const n=Jv();this.options={...n,...this.options,...Xv(e)},this.options.interpolation={...n.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const s=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?Qr.init(s(this.modules.logger),this.options):Qr.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=SP;const d=new qv(this.options);this.store=new Wv(this.options.resources,this.options);const h=this.services;h.logger=Qr,h.resourceStore=this.store,h.languageUtils=d,h.pluralResolver=new wP(d,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(h.formatter=s(u),h.formatter.init&&h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new bP(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new kP(s(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",(p,...y)=>{this.emit(p,...y)}),this.modules.languageDetector&&(h.languageDetector=s(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=s(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new au(this.services,this.options),this.translator.on("*",(p,...y)=>{this.emit(p,...y)}),this.modules.external.forEach(p=>{p.init&&p.init(this)})}if(this.format=this.options.interpolation.format,r||(r=ec),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...d)=>this.store[u](...d)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...d)=>(this.store[u](...d),this)});const l=ai(),c=()=>{const u=(d,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(h),r(d,h)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),l}loadResources(e,r=ec){var o,i;let n=r;const s=he(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if((s==null?void 0:s.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const l=[],c=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(h=>{h!=="cimode"&&l.indexOf(h)<0&&l.push(h)})};s?c(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>c(d)),(i=(o=this.options.preload)==null?void 0:o.forEach)==null||i.call(o,u=>c(u)),this.services.backendConnector.load(l,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(u)})}else n(null)}reloadResources(e,r,n){const s=ai();return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r=void 0),e||(e=this.languages),r||(r=this.options.ns),n||(n=ec),this.services.backendConnector.reload(e,r,o=>{s.resolve(),n(o)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&sb.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let r=0;r<this.languages.length;r++){const n=this.languages[r];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,r){this.isLanguageChangingTo=e;const n=ai();this.emit("languageChanging",e);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,c)=>{c?this.isLanguageChangingTo===e&&(s(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,n.resolve((...u)=>this.t(...u)),r&&r(l,(...u)=>this.t(...u))},i=l=>{var d,h;!e&&!l&&this.services.languageDetector&&(l=[]);const c=he(l)?l:l&&l[0],u=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(he(l)?[l]:l);u&&(this.language||s(u),this.translator.language||this.translator.changeLanguage(u),(h=(d=this.services.languageDetector)==null?void 0:d.cacheUserLanguage)==null||h.call(d,u)),this.loadResources(u,m=>{o(m,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?i(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(i):this.services.languageDetector.detect(i):i(e),n}getFixedT(e,r,n){const s=(o,i,...l)=>{let c;typeof i!="object"?c=this.options.overloadTranslationOptionHandler([o,i].concat(l)):c={...i},c.lng=c.lng||s.lng,c.lngs=c.lngs||s.lngs,c.ns=c.ns||s.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||n||s.keyPrefix);const u=this.options.keySeparator||".";let d;return c.keyPrefix&&Array.isArray(o)?d=o.map(h=>(typeof h=="function"&&(h=Ef(h,{...this.options,...i})),`${c.keyPrefix}${u}${h}`)):(typeof o=="function"&&(o=Ef(o,{...this.options,...i})),d=c.keyPrefix?`${c.keyPrefix}${u}${o}`:o),this.t(d,c)};return he(e)?s.lng=e:s.lngs=e,s.ns=r,s.keyPrefix=n,s}t(...e){var r;return(r=this.translator)==null?void 0:r.translate(...e)}exists(...e){var r;return(r=this.translator)==null?void 0:r.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,r={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=r.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const i=(l,c)=>{const u=this.services.backendConnector.state[`${l}|${c}`];return u===-1||u===0||u===2};if(r.precheck){const l=r.precheck(this,i);if(l!==void 0)return l}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||i(n,e)&&(!s||i(o,e)))}loadNamespaces(e,r){const n=ai();return this.options.ns?(he(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{n.resolve(),r&&r(s)}),n):(r&&r(),Promise.resolve())}loadLanguages(e,r){const n=ai();he(e)&&(e=[e]);const s=this.options.preload||[],o=e.filter(i=>s.indexOf(i)<0&&this.services.languageUtils.isSupportedCode(i));return o.length?(this.options.preload=s.concat(o),this.loadResources(i=>{n.resolve(),r&&r(i)}),n):(r&&r(),Promise.resolve())}dir(e){var s,o;if(e||(e=this.resolvedLanguage||(((s=this.languages)==null?void 0:s.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const i=new Intl.Locale(e);if(i&&i.getTextInfo){const l=i.getTextInfo();if(l&&l.direction)return l.direction}}catch{}const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=((o=this.services)==null?void 0:o.languageUtils)||new qv(Jv());return e.toLowerCase().indexOf("-latn")>1?"ltr":r.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},r){const n=new Ci(e,r);return n.createInstance=Ci.createInstance,n}cloneInstance(e={},r=ec){const n=e.forkResourceStore;n&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},o=new Ci(s);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(l=>{o[l]=this[l]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},n){const l=Object.keys(this.store.data).reduce((c,u)=>(c[u]={...this.store.data[u]},c[u]=Object.keys(c[u]).reduce((d,h)=>(d[h]={...c[u][h]},d),c[u]),c),{});o.store=new Wv(l,s),o.services.resourceStore=o.store}return o.translator=new au(o.services,s),o.translator.on("*",(l,...c)=>{o.emit(l,...c)}),o.init(s,r),o.translator.options=s,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const qe=Ci.createInstance();qe.createInstance;qe.dir;qe.init;qe.loadResources;qe.reloadResources;qe.use;qe.changeLanguage;qe.getFixedT;qe.t;qe.exists;qe.setDefaultNamespace;qe.hasLoadedNamespace;qe.loadNamespaces;qe.loadLanguages;const EP=(t,e,r,n)=>{var o,i,l,c;const s=[r,{code:e,...n||{}}];if((i=(o=t==null?void 0:t.services)==null?void 0:o.logger)!=null&&i.forward)return t.services.logger.forward(s,"warn","react-i18next::",!0);ro(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),(c=(l=t==null?void 0:t.services)==null?void 0:l.logger)!=null&&c.warn?t.services.logger.warn(...s):console!=null&&console.warn&&console.warn(...s)},Zv={},ab=(t,e,r,n)=>{ro(r)&&Zv[r]||(ro(r)&&(Zv[r]=new Date),EP(t,e,r,n))},ib=(t,e)=>()=>{if(t.isInitialized)e();else{const r=()=>{setTimeout(()=>{t.off("initialized",r)},0),e()};t.on("initialized",r)}},Pf=(t,e,r)=>{t.loadNamespaces(e,ib(t,r))},ex=(t,e,r,n)=>{if(ro(r)&&(r=[r]),t.options.preload&&t.options.preload.indexOf(e)>-1)return Pf(t,r,n);r.forEach(s=>{t.options.ns.indexOf(s)<0&&t.options.ns.push(s)}),t.loadLanguages(e,ib(t,n))},PP=(t,e,r={})=>!e.languages||!e.languages.length?(ab(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:r.lng,precheck:(n,s)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!s(n.isLanguageChangingTo,t))return!1}}),ro=t=>typeof t=="string",TP=t=>typeof t=="object"&&t!==null,RP=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,OP={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},AP=t=>OP[t],IP=t=>t.replace(RP,AP);let Tf={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:IP};const DP=(t={})=>{Tf={...Tf,...t}},LP=()=>Tf;let lb;const MP=t=>{lb=t},$P=()=>lb,FP={type:"3rdParty",init(t){DP(t.options.react),MP(t)}},cb=f.createContext();class UP{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var ub={exports:{}},db={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ea=f;function BP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zP=typeof Object.is=="function"?Object.is:BP,VP=Ea.useState,WP=Ea.useEffect,HP=Ea.useLayoutEffect,qP=Ea.useDebugValue;function KP(t,e){var r=e(),n=VP({inst:{value:r,getSnapshot:e}}),s=n[0].inst,o=n[1];return HP(function(){s.value=r,s.getSnapshot=e,Xd(s)&&o({inst:s})},[t,r,e]),WP(function(){return Xd(s)&&o({inst:s}),t(function(){Xd(s)&&o({inst:s})})},[t]),qP(r),r}function Xd(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!zP(t,r)}catch{return!0}}function GP(t,e){return e()}var QP=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?GP:KP;db.useSyncExternalStore=Ea.useSyncExternalStore!==void 0?Ea.useSyncExternalStore:QP;ub.exports=db;var hb=ub.exports;const YP=(t,e)=>ro(e)?e:TP(e)&&ro(e.defaultValue)?e.defaultValue:Array.isArray(t)?t[t.length-1]:t,JP={t:YP,ready:!1},XP=()=>()=>{},it=(t,e={})=>{var C,P;const{i18n:r}=e,{i18n:n,defaultNS:s}=f.useContext(cb)||{},o=r||n||$P();o&&!o.reportNamespaces&&(o.reportNamespaces=new UP),o||ab(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const i=f.useMemo(()=>{var N;return{...LP(),...(N=o==null?void 0:o.options)==null?void 0:N.react,...e}},[o,e]),{useSuspense:l,keyPrefix:c}=i,u=f.useMemo(()=>{var E;const N=s||((E=o==null?void 0:o.options)==null?void 0:E.defaultNS);return ro(N)?[N]:N||["translation"]},[t,s,o]);(P=(C=o==null?void 0:o.reportNamespaces)==null?void 0:C.addUsedNamespaces)==null||P.call(C,u);const d=f.useRef(0),h=f.useCallback(N=>{if(!o)return XP;const{bindI18n:E,bindI18nStore:L}=i,T=()=>{d.current+=1,N()};return E&&o.on(E,T),L&&o.store.on(L,T),()=>{E&&E.split(" ").forEach(W=>o.off(W,T)),L&&L.split(" ").forEach(W=>o.store.off(W,T))}},[o,i]),m=f.useRef(),p=f.useCallback(()=>{if(!o)return JP;const N=!!(o.isInitialized||o.initializedStoreOnce)&&u.every(H=>PP(H,o,i)),E=e.lng||o.language,L=d.current,T=m.current;if(T&&T.ready===N&&T.lng===E&&T.keyPrefix===c&&T.revision===L)return T;const O={t:o.getFixedT(E,i.nsMode==="fallback"?u:u[0],c),ready:N,lng:E,keyPrefix:c,revision:L};return m.current=O,O},[o,u,c,i,e.lng]),[y,g]=f.useState(0),{t:x,ready:b}=hb.useSyncExternalStore(h,p,p);f.useEffect(()=>{if(o&&!b&&!l){const N=()=>g(E=>E+1);e.lng?ex(o,e.lng,u,N):Pf(o,u,N)}},[o,e.lng,u,b,l,y]);const v=o||{},w=f.useRef(null),_=f.useRef(),j=N=>{const E=Object.getOwnPropertyDescriptors(N);E.__original&&delete E.__original;const L=Object.create(Object.getPrototypeOf(N),E);if(!Object.prototype.hasOwnProperty.call(L,"__original"))try{Object.defineProperty(L,"__original",{value:N,writable:!1,enumerable:!1,configurable:!1})}catch{}return L},k=f.useMemo(()=>{const N=v,E=N==null?void 0:N.language;let L=N;N&&(w.current&&w.current.__original===N?_.current!==E?(L=j(N),w.current=L,_.current=E):L=w.current:(L=j(N),w.current=L,_.current=E));const T=[x,L,b];return T.t=x,T.i18n=L,T.ready=b,T},[x,v,b,v.resolvedLanguage,v.language,v.languages]);if(o&&l&&!b)throw new Promise(N=>{const E=()=>N();e.lng?ex(o,e.lng,u,E):Pf(o,u,E)});return k};function ZP({i18n:t,defaultNS:e,children:r}){const n=f.useMemo(()=>({i18n:t,defaultNS:e}),[t,e]);return f.createElement(cb.Provider,{value:n},r)}const eT={home:"Home",dashboard:"Dashboard",projects:"Projects",users:"Users",settings:"Settings",leads:"Leads",tickets:"Tickets",tasks:"Tasks",teams:"Teams",clients:"Clients",chats:"Chats",clientPortal:"CLIENT PORTAL",partnerDashboard:"PARTNER DASHBOARD",empDashboard:"EMP DASHBOARD"},tT={save:"Save",cancel:"Cancel",submit:"Submit",delete:"Delete",edit:"Edit",add:"Add",login:"Login",signup:"Sign Up",logout:"Logout"},rT={name:"Name",email:"Email",password:"Password",confirmPassword:"Confirm Password",phone:"Phone",message:"Message"},nT={signIn:"Sign In",signUp:"Sign Up",createAccount:"Create Account",enterCredentials:"Enter your credentials to continue",signUpToGetStarted:"Sign up to get started",chooseAccountType:"Choose your account type to continue with Google",chooseAccountTypeSignUp:"Choose your account type to sign up with Google",client:"Client",partner:"Partner",partnerEmployee:"Partner Employee",redirectingToGoogle:"Redirecting to Google...",orContinueWith:"Or continue with",email:"Email",password:"Password",signingIn:"Signing in...",signInButton:"Sign In",signUpButton:"Sign Up",dontHaveAccount:"Don't have an account?",alreadyHaveAccount:"Already have an account?",clientPortal:"Client Portal",failedToSignIn:"Failed to sign in",failedToSignInWithGoogle:"Failed to sign in with Google"},sT={welcome:"Welcome",loading:"Loading...",error:"Error",success:"Success",search:"Search",filter:"Filter",notifications:"Notifications",kanban:"Kanban",list:"List"},oT={title:"Dashboard",subtitle:"Welcome back! Here's an overview of your projects.",totalProjects:"Total Projects",completed:"completed",inProgress:"In Progress",activeProjects:"Active projects",clients:"Clients",totalClients:"Total clients",teamMembers:"Team Members",activeUsers:"Active users",leads:"Leads",totalLeads:"Total leads",recentProjects:"Recent Projects",projectStatus:"Project Status",noProjectsYet:"No projects yet",retry:"Retry",completedStatus:"Completed",inProgressStatus:"In Progress",notStartedStatus:"Not Started"},aT={title:"Leads",subtitle:"Manage and track all your leads",newLead:"New Lead",addLead:"Add Lead",createLead:"Create New Lead",createLeadDesc:"Add a new lead to the selected stage.",leadName:"Lead Name",leadNamePlaceholder:"Enter lead name",description:"Description",descriptionPlaceholder:"Enter lead description",clientName:"Client Name",clientNamePlaceholder:"Enter client name",client:"Client",selectClient:"Select a client (optional)",noClient:"No client",unknown:"Unknown",created:"Created",updated:"Updated",createdBy:"Created by",assignedTo:"Assigned to",lead:"Lead",deleteLead:"Delete Lead",deleteConfirmation:'Are you sure you want to delete "{{name}}"?',addStage:"Add Stage",stageNamePlaceholder:"Stage name...",deleteStage:"Delete Stage",deleteStageConfirmation:"This stage contains {{count}} lead(s). Deleting this stage will also remove all leads in it. This action cannot be undone.",addNewLeadCard:"Add New Lead",noLeadsYet:"No leads have been created yet."},iT={title:"Projects",subtitle:"Manage and track all your projects",newProject:"New Project",createProject:"Create New Project",createProjectDesc:"Add a new project to the selected stage.",projectName:"Project Name",projectNamePlaceholder:"Enter project name",description:"Description",descriptionPlaceholder:"Enter project description",client:"Client",selectClient:"Select a client",initialProgress:"Initial Progress",addProject:"Add Project",addNewProjectCard:"Add New Project",progress:"Progress",started:"Started",due:"Due",deleteProject:"Delete Project",deleteConfirmation:'Are you sure you want to delete "{{name}}"?',noProjectsYet:"No projects have been created yet."},lT={title:"Tickets",subtitle:"Manage and track all support tickets.",newTicket:"New Ticket",createNewTicket:"Create New Ticket",createTicketDesc:"Fill in the details to create a new support ticket.",searchPlaceholder:"Search tickets...",allTickets:"All Tickets",noTicketsFound:"No Tickets Found",noTicketsFoundDesc:"Try adjusting your search terms.",noTicketsYet:"No tickets have been created yet.",id:"ID",subject:"Subject",subjectPlaceholder:"Enter ticket subject",description:"Description",descriptionPlaceholder:"Describe the issue or request",status:"Status",priority:"Priority",priorityLow:"Low",priorityMedium:"Medium",priorityHigh:"High",priorityUrgent:"Urgent",ticketType:"Ticket Type",typeRequest:"Request",typeFollowUp:"Follow Up",typeIssue:"Issue",typeInternalTask:"Internal Task",assignTo:"Assign To",selectAssignee:"Select assignee (optional)",assignedTo:"Assigned To",createdDate:"Created Date",actions:"Actions",view:"View",loading:"Loading tickets...",createTicket:"Create Ticket",creatingTicket:"Creating...",createError:"Failed to create ticket",allStatuses:"All Statuses",allPriorities:"All Priorities",statusOpen:"Open",statusInProgress:"In Progress",statusResolved:"Resolved",statusClosed:"Closed",ticketId:"Ticket ID",createdBy:"Created By",resolvedDate:"Resolved Date",closedDate:"Closed Date"},cT={title:"Teams",subtitle:"Manage teams and team members",createTeam:"Create Team",createTeamTitle:"Create New Team",createTeamDesc:"Create a new team and assign a team leader. You can add members after creation.",teamName:"Team Name",teamNamePlaceholder:"Enter team name",team_leader:"Team Leader",selectTeamLeader:"Select a team leader (optional)",searchPlaceholder:"Search teams...",members:"Members",memberCount:"{{count}} member",memberCount_plural:"{{count}} members",addMember:"Add member",created:"Created",noTeamsFound:"No teams found",noTeamsYet:"No teams yet",createFirstTeam:"Create Your First Team",deleteTeam:"Delete Team",deleteConfirmation:'Are you sure you want to delete "{{name}}"? This will also remove all team members. This action cannot be undone.',moreMembers:"+{{count}} more members",noMembersYet:"No members yet"},uT={title:"Tasks",subtitle:"Manage and track all your tasks in one place.",loading:"Loading...",error:"Error",deleteTask:"Delete Task",createTask:"Create New Task",createTaskDesc:"Add a new task to the selected stage.",newTask:"New Task",addNewTask:"Add New Task",addTask:"Add Task",taskName:"Task Name",taskNamePlaceholder:"Enter task name",descriptionPlaceholder:"Enter task description",dueDate:"Due Date",selectUser:"Select a user",selectStage:"Select a stage",selectStatus:"Select status",todo:"Todo",inProgress:"In Progress",done:"Done",allTasks:"All Tasks",noTasksYet:"No tasks have been created yet."},dT={brandName:"Middar",badge:" New Feature",hero:{title:{line1:"Streamline Your",line2:"Business Operations"},description:"Powerful CRM solution to manage projects, leads, tasks, and teams all in one place. Boost productivity and grow your business with our comprehensive platform.",cta:{primary:"Get Started",secondary:"Learn More"}},stats:{users:"10K+",usersLabel:"Active Users",projects:"50K+",projectsLabel:"Projects Managed",uptime:"99.9%",uptimeLabel:"Uptime",support:"24/7",supportLabel:"Support"},features:{title:"Everything you need to succeed",subtitle:"Comprehensive tools designed for modern businesses",projectManagement:{title:"Project Management",description:"Track projects from inception to completion with detailed progress monitoring and team collaboration."},leadManagement:{title:"Lead Management",description:"Convert more leads with our advanced CRM tools and automated follow-up systems."},analytics:{title:"Analytics & Insights",description:"Make data-driven decisions with comprehensive analytics and reporting dashboards."},communication:{title:"Team Communication",description:"Keep your team connected with integrated chat, notifications, and collaboration tools."},taskManagement:{title:"Task Management",description:"Organize and prioritize tasks with our intuitive kanban board and deadline tracking."},security:{title:"Enterprise Security",description:"Your data is protected with enterprise-grade security and compliance standards."}},cta:{title:"Ready to transform your business?",description:"Join thousands of businesses already using our platform to streamline their operations and boost productivity.",button:"Start Free Trial"},footer:{copyright:" 2025 {{brand}} CRM. All rights reserved."}},hT={title:"Users",subtitle:"Manage system users and their roles",totalUsers:"Total Users",addUser:"Add User",addNewUser:"Add New User",fullName:"Full Name",email:"Email",password:"Password",role:"Role",admin:"Admin",manager:"Manager",employee:"Employee",teamLeader:"Team Leader",client:"Client",addingUser:"Adding user...",addUserError:"Failed to add user",deleteUser:"Delete User",deleteConfirmation:'Are you sure you want to delete "{{name}}"?',deleteError:"Failed to delete user",updateRoleError:"Failed to update user role",changeRole:"Change Role",searchPlaceholder:"Search users...",noUsersFound:"No users found",noUsersFoundDesc:"Try adjusting your search terms.",noUsersAvailable:"No users available",joined:"Joined"},fT={title:"Clients",subtitle:"Manage and view all your clients",newClient:"New Client",loading:"Loading clients...",noClientsFound:"No clients found",noClientsYet:"No clients have been added yet",active:"active",totalProjects:"Total Projects",activeProjects:"Active Projects",completedProjects:"Completed Projects",noCompany:"No company",noEmail:"No email",projects:"projects",viewDetails:"View Details",clientDetails:"Client Details",userId:"User ID",emailLabel:"Email",contactLabel:"Contact",companyLabel:"Company",createdLabel:"Created",updatedLabel:"Updated",projectSummary:"Project Summary"},mT={title:"My Dashboard",subtitle:"Welcome back, {{name}}! Here's your work overview.",employeeInfo:"Employee Information",name:"Name",email:"Email",role:"Role",memberSince:"Member Since",myProjects:"My Projects",active:"active",myTasks:"My Tasks",completed:"completed",inProgress:"In Progress",activeTasks:"Active tasks",completedTasks:"Completed",finishedTasks:"Finished tasks",leads:"Leads",totalLeads:"Total leads",recentTasks:"Recent Tasks",noDescription:"No description",noProjectsAssigned:"No projects assigned yet",noTasksAssigned:"No tasks assigned yet"},pT={navigation:eT,buttons:tT,forms:rT,auth:nT,common:sT,dashboard:oT,leads:aT,projects:iT,tickets:lT,teams:cT,tasks:uT,landing:dT,users:hT,clients:fT,employeeDashboard:mT},gT={home:"",dashboard:" ",projects:"",users:"",settings:"",leads:" ",tickets:"",tasks:"",teams:"",clients:"",chats:"",clientPortal:" ",partnerDashboard:"  ",empDashboard:"  "},vT={save:"",cancel:"",submit:"",delete:"",edit:"",add:"",login:" ",signup:" ",logout:" "},xT={name:"",email:" ",password:" ",confirmPassword:"  ",phone:"",message:""},yT={signIn:" ",signUp:" ",createAccount:" ",enterCredentials:"  ",signUpToGetStarted:" ",chooseAccountType:"     ",chooseAccountTypeSignUp:"     ",client:"",partner:"",partnerEmployee:" ",redirectingToGoogle:"    ...",orContinueWith:"  ",email:" ",password:" ",signingIn:"  ...",signInButton:" ",signUpButton:" ",dontHaveAccount:"  ",alreadyHaveAccount:"  ",clientPortal:" ",failedToSignIn:"  ",failedToSignInWithGoogle:"    "},wT={welcome:"",loading:" ...",error:"",success:"",search:"",filter:"",notifications:"",kanban:"",list:""},bT={title:" ",subtitle:" !     .",totalProjects:" ",completed:"",inProgress:" ",activeProjects:" ",clients:"",totalClients:" ",teamMembers:" ",activeUsers:" ",leads:" ",totalLeads:"  ",recentProjects:" ",projectStatus:" ",noProjectsYet:"   ",retry:" ",completedStatus:"",inProgressStatus:" ",notStartedStatus:" "},_T={title:" ",subtitle:"    ",newLead:"  ",addLead:"  ",createLead:"   ",createLeadDesc:"      .",leadName:"  ",leadNamePlaceholder:"   ",description:"",descriptionPlaceholder:"   ",clientName:" ",clientNamePlaceholder:"  ",client:"",selectClient:"  ()",noClient:" ",unknown:" ",created:" ",updated:" ",createdBy:"  ",assignedTo:" ",lead:" ",deleteLead:"  ",deleteConfirmation:'      "{{name}}"',addStage:" ",stageNamePlaceholder:" ...",deleteStage:" ",deleteStageConfirmation:"    {{count}}  .           .      .",addNewLeadCard:"   ",noLeadsYet:"      ."},jT={title:"",subtitle:"   ",newProject:" ",createProject:"  ",createProjectDesc:"     .",projectName:" ",projectNamePlaceholder:"  ",description:"",descriptionPlaceholder:"  ",client:"",selectClient:" ",initialProgress:" ",addProject:" ",addNewProjectCard:"  ",progress:"",started:"",due:"",deleteProject:" ",deleteConfirmation:'      "{{name}}"',noProjectsYet:"     ."},ST={title:"",subtitle:"    .",newTicket:" ",createNewTicket:"  ",createTicketDesc:"     .",searchPlaceholder:"  ...",allTickets:" ",noTicketsFound:"  ",noTicketsFoundDesc:"   .",noTicketsYet:"     .",id:"",subject:"",subjectPlaceholder:"  ",description:"",descriptionPlaceholder:"   ",status:"",priority:"",priorityLow:"",priorityMedium:"",priorityHigh:"",priorityUrgent:"",ticketType:" ",typeRequest:"",typeFollowUp:"",typeIssue:"",typeInternalTask:" ",assignTo:" ",selectAssignee:"   ()",assignedTo:" ",createdDate:" ",actions:"",view:"",loading:"  ...",createTicket:" ",creatingTicket:" ...",createError:"   ",allStatuses:" ",allPriorities:" ",statusOpen:"",statusInProgress:" ",statusResolved:" ",statusClosed:"",ticketId:" ",createdBy:"  ",resolvedDate:" ",closedDate:" "},NT={title:"",subtitle:"   ",createTeam:" ",createTeamTitle:"  ",createTeamDesc:"     .     .",teamName:" ",teamNamePlaceholder:"  ",team_leader:" ",selectTeamLeader:"   ()",teamLeader:" ",searchPlaceholder:"  ...",members:"",memberCount:"{{count}} ",memberCount_plural:"{{count}} ",addMember:" ",created:" ",noTeamsFound:"  ",noTeamsYet:"   ",createFirstTeam:"  ",deleteTeam:" ",deleteConfirmation:'      "{{name}}"        .      .',moreMembers:"+{{count}}  ",noMembersYet:"   "},kT={title:"",subtitle:"      .",loading:" ...",error:"",deleteTask:" ",createTask:"  ",createTaskDesc:"     .",newTask:" ",addNewTask:"  ",addTask:" ",taskName:" ",taskNamePlaceholder:"  ",descriptionPlaceholder:"  ",dueDate:" ",selectUser:" ",selectStage:" ",selectStatus:" ",todo:"",inProgress:" ",done:"",stage:"",allTasks:" ",noTasksYet:"     ."},CT={brandName:"",badge:"  ",hero:{title:{line1:"",line2:" "},description:" CRM           .       .",cta:{primary:" ",secondary:" "}},stats:{users:"10 +",usersLabel:" ",projects:"50 +",projectsLabel:" ",uptime:"99.9%",uptimeLabel:" ",support:"24/7",supportLabel:""},features:{title:"   ",subtitle:"    ",projectManagement:{title:" ",description:"           ."},leadManagement:{title:"  ",description:"       CRM    ."},analytics:{title:" ",description:"        ."},communication:{title:" ",description:"         ."},taskManagement:{title:" ",description:"         ."},security:{title:" ",description:"       ."}},cta:{title:"  ",description:"           .",button:"  "},footer:{copyright:" 2025 {{brand}} CRM.   ."}},ET={title:"",subtitle:"   ",totalUsers:" ",addUser:" ",addNewUser:"  ",fullName:" ",email:" ",password:" ",role:"",admin:"",manager:"",employee:"",team_leader:" ",client:"",addingUser:"  ...",addUserError:"   ",deleteUser:" ",deleteConfirmation:'      "{{name}}"',deleteError:"   ",updateRoleError:"    ",changeRole:" ",searchPlaceholder:"  ...",noUsersFound:"  ",noUsersFoundDesc:"   .",noUsersAvailable:"   ",joined:""},PT={title:"",subtitle:"   ",newClient:" ",loading:"  ...",noClientsFound:"  ",noClientsYet:"     ",active:"",totalProjects:" ",activeProjects:" ",completedProjects:" ",noCompany:" ",noEmail:"  ",projects:"",viewDetails:" ",clientDetails:" ",userId:" ",emailLabel:" ",contactLabel:"",companyLabel:"",createdLabel:" ",updatedLabel:" ",projectSummary:" "},TT={title:"   ",subtitle:"  {{name}}!     .",employeeInfo:" ",name:"",email:" ",role:"",memberSince:" ",myProjects:"",active:"",myTasks:"",completed:"",inProgress:" ",activeTasks:" ",completedTasks:"",finishedTasks:" ",leads:" ",totalLeads:"  ",recentTasks:" ",noDescription:" ",noProjectsAssigned:"    ",noTasksAssigned:"    "},RT={chatRooms:" ",createRoomTitle:"  ",createRoomDesc:"    ",roomName:" ",roomNamePlaceholder:"  ",private:"",privateRoom:" ",publicRoom:" ",project:"",projectIdPlaceholder:"  ()",createRoom:" ",selectRoom:"   ",members:"",typeMessage:" ...",you:"",unknownUser:"  ",justNow:"",online:"",someoneTyping:"  ...",searchConversations:"  ...",searchRooms:"  ..."},OT={navigation:gT,buttons:vT,forms:xT,auth:yT,common:wT,dashboard:bT,leads:_T,projects:jT,tickets:ST,teams:NT,tasks:kT,landing:CT,users:ET,clients:PT,employeeDashboard:TT,chats:RT},AT={en:{translation:pT},ar:{translation:OT}};qe.use(FP).init({resources:AT,lng:"ar",fallbackLng:"ar",interpolation:{escapeValue:!1}});const J=(t,e)=>{if(qe.language==="ar"){const s=`${e}_ar`;if(t[s]&&t[s].trim())return t[s]}if(t[e]&&t[e].trim())return t[e];const n=`${e}_ar`;return t[n]&&t[n].trim()?t[n]:""},_r=(t,e)=>{const r=qe.language,n={...t};return Object.entries(e).forEach(([s,o])=>{r==="ar"?(n[`${o}_ar`]=t[s],n[o]=t[s]):(n[o]=t[s],n[`${o}_ar`]=t[s])}),n},Kt=()=>qe.dir()==="rtl";/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xi(){return Xi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xi.apply(this,arguments)}var Jn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Jn||(Jn={}));const tx="popstate";function IT(t){t===void 0&&(t={});function e(s,o){let{pathname:i="/",search:l="",hash:c=""}=ho(s.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),Rf("",{pathname:i,search:l,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(s,o){let i=s.document.querySelector("base"),l="";if(i&&i.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof o=="string"?o:iu(o))}function n(s,o){cp(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return LT(e,r,n,t)}function nt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function DT(){return Math.random().toString(36).substr(2,8)}function rx(t,e){return{usr:t.state,key:t.key,idx:e}}function Rf(t,e,r,n){return r===void 0&&(r=null),Xi({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ho(e):e,{state:r,key:e&&e.key||n||DT()})}function iu(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ho(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function LT(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:o=!1}=n,i=s.history,l=Jn.Pop,c=null,u=d();u==null&&(u=0,i.replaceState(Xi({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function h(){l=Jn.Pop;let x=d(),b=x==null?null:x-u;u=x,c&&c({action:l,location:g.location,delta:b})}function m(x,b){l=Jn.Push;let v=Rf(g.location,x,b);r&&r(v,x),u=d()+1;let w=rx(v,u),_=g.createHref(v);try{i.pushState(w,"",_)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(_)}o&&c&&c({action:l,location:g.location,delta:1})}function p(x,b){l=Jn.Replace;let v=Rf(g.location,x,b);r&&r(v,x),u=d();let w=rx(v,u),_=g.createHref(v);i.replaceState(w,"",_),o&&c&&c({action:l,location:g.location,delta:0})}function y(x){let b=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof x=="string"?x:iu(x);return v=v.replace(/ $/,"%20"),nt(b,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,b)}let g={get action(){return l},get location(){return t(s,i)},listen(x){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(tx,h),c=x,()=>{s.removeEventListener(tx,h),c=null}},createHref(x){return e(s,x)},createURL:y,encodeLocation(x){let b=y(x);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:p,go(x){return i.go(x)}};return g}var nx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(nx||(nx={}));function MT(t,e,r){return r===void 0&&(r="/"),$T(t,e,r,!1)}function $T(t,e,r,n){let s=typeof e=="string"?ho(e):e,o=up(s.pathname||"/",r);if(o==null)return null;let i=fb(t);FT(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let u=YT(o);l=GT(i[c],u,n)}return l}function fb(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(nt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=ls([n,c.relativePath]),d=r.concat(c);o.children&&o.children.length>0&&(nt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),fb(o.children,e,d,u)),!(o.path==null&&!o.index)&&e.push({path:u,score:qT(u,o.index),routesMeta:d})};return t.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,i);else for(let c of mb(o.path))s(o,i,c)}),e}function mb(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let i=mb(n.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),s&&l.push(...i),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function FT(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:KT(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const UT=/^:[\w-]+$/,BT=3,zT=2,VT=1,WT=10,HT=-2,sx=t=>t==="*";function qT(t,e){let r=t.split("/"),n=r.length;return r.some(sx)&&(n+=HT),e&&(n+=zT),r.filter(s=>!sx(s)).reduce((s,o)=>s+(UT.test(o)?BT:o===""?VT:WT),n)}function KT(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function GT(t,e,r){let{routesMeta:n}=t,s={},o="/",i=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=o==="/"?e:e.slice(o.length)||"/",h=ox({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=ox({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),i.push({params:s,pathname:ls([o,h.pathname]),pathnameBase:e2(ls([o,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(o=ls([o,h.pathnameBase]))}return i}function ox(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=QT(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:m,isOptional:p}=d;if(m==="*"){let g=l[h]||"";i=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const y=l[h];return p&&!y?u[m]=void 0:u[m]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:i,pattern:t}}function QT(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),cp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function YT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function up(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function JT(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?ho(t):t;return{pathname:r?r.startsWith("/")?r:XT(r,e):e,search:t2(n),hash:r2(s)}}function XT(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Zd(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ZT(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function dp(t,e){let r=ZT(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function hp(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=ho(t):(s=Xi({},t),nt(!s.pathname||!s.pathname.includes("?"),Zd("?","pathname","search",s)),nt(!s.pathname||!s.pathname.includes("#"),Zd("#","pathname","hash",s)),nt(!s.search||!s.search.includes("#"),Zd("#","search","hash",s)));let o=t===""||s.pathname==="",i=o?"/":s.pathname,l;if(i==null)l=r;else{let h=e.length-1;if(!n&&i.startsWith("..")){let m=i.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}l=h>=0?e[h]:"/"}let c=JT(s,l),u=i&&i!=="/"&&i.endsWith("/"),d=(o||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const ls=t=>t.join("/").replace(/\/\/+/g,"/"),e2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),t2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,r2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function n2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const pb=["post","put","patch","delete"];new Set(pb);const s2=["get",...pb];new Set(s2);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zi(){return Zi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zi.apply(this,arguments)}const fp=f.createContext(null),o2=f.createContext(null),vs=f.createContext(null),zu=f.createContext(null),Cn=f.createContext({outlet:null,matches:[],isDataRoute:!1}),gb=f.createContext(null);function a2(t,e){let{relative:r}=e===void 0?{}:e;Va()||nt(!1);let{basename:n,navigator:s}=f.useContext(vs),{hash:o,pathname:i,search:l}=xb(t,{relative:r}),c=i;return n!=="/"&&(c=i==="/"?n:ls([n,i])),s.createHref({pathname:c,search:l,hash:o})}function Va(){return f.useContext(zu)!=null}function xs(){return Va()||nt(!1),f.useContext(zu).location}function vb(t){f.useContext(vs).static||f.useLayoutEffect(t)}function Ur(){let{isDataRoute:t}=f.useContext(Cn);return t?w2():i2()}function i2(){Va()||nt(!1);let t=f.useContext(fp),{basename:e,future:r,navigator:n}=f.useContext(vs),{matches:s}=f.useContext(Cn),{pathname:o}=xs(),i=JSON.stringify(dp(s,r.v7_relativeSplatPath)),l=f.useRef(!1);return vb(()=>{l.current=!0}),f.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=hp(u,JSON.parse(i),o,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ls([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,o,t])}function l2(){let{matches:t}=f.useContext(Cn),e=t[t.length-1];return e?e.params:{}}function xb(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=f.useContext(vs),{matches:s}=f.useContext(Cn),{pathname:o}=xs(),i=JSON.stringify(dp(s,n.v7_relativeSplatPath));return f.useMemo(()=>hp(t,JSON.parse(i),o,r==="path"),[t,i,o,r])}function c2(t,e){return u2(t,e)}function u2(t,e,r,n){Va()||nt(!1);let{navigator:s}=f.useContext(vs),{matches:o}=f.useContext(Cn),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let u=xs(),d;if(e){var h;let x=typeof e=="string"?ho(e):e;c==="/"||(h=x.pathname)!=null&&h.startsWith(c)||nt(!1),d=x}else d=u;let m=d.pathname||"/",p=m;if(c!=="/"){let x=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(x.length).join("/")}let y=MT(t,{pathname:p}),g=p2(y&&y.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:ls([c,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:ls([c,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),o,r,n);return e&&g?f.createElement(zu.Provider,{value:{location:Zi({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Jn.Pop}},g):g}function d2(){let t=y2(),e=n2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},e),r?f.createElement("pre",{style:s},r):null,null)}const h2=f.createElement(d2,null);class f2 extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?f.createElement(Cn.Provider,{value:this.props.routeContext},f.createElement(gb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function m2(t){let{routeContext:e,match:r,children:n}=t,s=f.useContext(fp);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),f.createElement(Cn.Provider,{value:e},n)}function p2(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var o;if(!r)return null;if(r.errors)t=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=i.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||nt(!1),i=i.slice(0,Math.min(i.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:p}=r,y=h.route.loader&&m[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||y){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,h,m)=>{let p,y=!1,g=null,x=null;r&&(p=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||h2,c&&(u<0&&m===0?(y=!0,x=null):u===m&&(y=!0,x=h.route.hydrateFallbackElement||null)));let b=e.concat(i.slice(0,m+1)),v=()=>{let w;return p?w=g:y?w=x:h.route.Component?w=f.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,f.createElement(m2,{match:h,routeContext:{outlet:d,matches:b,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?f.createElement(f2,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:v(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):v()},null)}var yb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(yb||{}),lu=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(lu||{});function g2(t){let e=f.useContext(fp);return e||nt(!1),e}function v2(t){let e=f.useContext(o2);return e||nt(!1),e}function x2(t){let e=f.useContext(Cn);return e||nt(!1),e}function wb(t){let e=x2(),r=e.matches[e.matches.length-1];return r.route.id||nt(!1),r.route.id}function y2(){var t;let e=f.useContext(gb),r=v2(lu.UseRouteError),n=wb(lu.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function w2(){let{router:t}=g2(yb.UseNavigateStable),e=wb(lu.UseNavigateStable),r=f.useRef(!1);return vb(()=>{r.current=!0}),f.useCallback(function(s,o){o===void 0&&(o={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Zi({fromRouteId:e},o)))},[t,e])}function b2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function ax(t){let{to:e,replace:r,state:n,relative:s}=t;Va()||nt(!1);let{future:o,static:i}=f.useContext(vs),{matches:l}=f.useContext(Cn),{pathname:c}=xs(),u=Ur(),d=hp(e,dp(l,o.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return f.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:s}),[u,h,s,r,n]),null}function tt(t){nt(!1)}function _2(t){let{basename:e="/",children:r=null,location:n,navigationType:s=Jn.Pop,navigator:o,static:i=!1,future:l}=t;Va()&&nt(!1);let c=e.replace(/^\/*/,"/"),u=f.useMemo(()=>({basename:c,navigator:o,static:i,future:Zi({v7_relativeSplatPath:!1},l)}),[c,l,o,i]);typeof n=="string"&&(n=ho(n));let{pathname:d="/",search:h="",hash:m="",state:p=null,key:y="default"}=n,g=f.useMemo(()=>{let x=up(d,c);return x==null?null:{location:{pathname:x,search:h,hash:m,state:p,key:y},navigationType:s}},[c,d,h,m,p,y,s]);return g==null?null:f.createElement(vs.Provider,{value:u},f.createElement(zu.Provider,{children:r,value:g}))}function j2(t){let{children:e,location:r}=t;return c2(Of(e),r)}new Promise(()=>{});function Of(t,e){e===void 0&&(e=[]);let r=[];return f.Children.forEach(t,(n,s)=>{if(!f.isValidElement(n))return;let o=[...e,s];if(n.type===f.Fragment){r.push.apply(r,Of(n.props.children,o));return}n.type!==tt&&nt(!1),!n.props.index||!n.props.children||nt(!1);let i={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Of(n.props.children,o)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Af(){return Af=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Af.apply(this,arguments)}function S2(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,o;for(o=0;o<n.length;o++)s=n[o],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function N2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function k2(t,e){return t.button===0&&(!e||e==="_self")&&!N2(t)}const C2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],E2="6";try{window.__reactRouterVersion=E2}catch{}const P2="startTransition",ix=mm[P2];function T2(t){let{basename:e,children:r,future:n,window:s}=t,o=f.useRef();o.current==null&&(o.current=IT({window:s,v5Compat:!0}));let i=o.current,[l,c]=f.useState({action:i.action,location:i.location}),{v7_startTransition:u}=n||{},d=f.useCallback(h=>{u&&ix?ix(()=>c(h)):c(h)},[c,u]);return f.useLayoutEffect(()=>i.listen(d),[i,d]),f.useEffect(()=>b2(n),[n]),f.createElement(_2,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:i,future:n})}const R2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",O2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,If=f.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:o,replace:i,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,m=S2(e,C2),{basename:p}=f.useContext(vs),y,g=!1;if(typeof u=="string"&&O2.test(u)&&(y=u,R2))try{let w=new URL(window.location.href),_=u.startsWith("//")?new URL(w.protocol+u):new URL(u),j=up(_.pathname,p);_.origin===w.origin&&j!=null?u=j+_.search+_.hash:g=!0}catch{}let x=a2(u,{relative:s}),b=A2(u,{replace:i,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function v(w){n&&n(w),w.defaultPrevented||b(w)}return f.createElement("a",Af({},m,{href:y||x,onClick:g||o?n:v,ref:r,target:c}))});var lx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(lx||(lx={}));var cx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(cx||(cx={}));function A2(t,e){let{target:r,replace:n,state:s,preventScrollReset:o,relative:i,viewTransition:l}=e===void 0?{}:e,c=Ur(),u=xs(),d=xb(t,{relative:i});return f.useCallback(h=>{if(k2(h,r)){h.preventDefault();let m=n!==void 0?n:iu(u)===iu(d);c(t,{replace:m,state:s,preventScrollReset:o,relative:i,viewTransition:l})}},[u,c,d,n,s,r,t,o,i,l])}var Df=function(t,e){return Df=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Df(t,e)};function bb(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Df(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var fr=function(){return fr=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},fr.apply(this,arguments)};function ys(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function _b(t,e,r,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(o=(s<3?i(o):s>3?i(e,r,o):i(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}function jb(t,e){return function(r,n){e(r,n,t)}}function Sb(t,e,r,n,s,o){function i(b){if(b!==void 0&&typeof b!="function")throw new TypeError("Function expected");return b}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,d=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),h,m=!1,p=r.length-1;p>=0;p--){var y={};for(var g in n)y[g]=g==="access"?{}:n[g];for(var g in n.access)y.access[g]=n.access[g];y.addInitializer=function(b){if(m)throw new TypeError("Cannot add initializers after decoration has completed");o.push(i(b||null))};var x=(0,r[p])(l==="accessor"?{get:d.get,set:d.set}:d[c],y);if(l==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(h=i(x.get))&&(d.get=h),(h=i(x.set))&&(d.set=h),(h=i(x.init))&&s.unshift(h)}else(h=i(x))&&(l==="field"?s.unshift(h):d[c]=h)}u&&Object.defineProperty(u,n.name,d),m=!0}function Nb(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0}function kb(t){return typeof t=="symbol"?t:"".concat(t)}function Cb(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function Eb(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function re(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(d){try{u(n.next(d))}catch(h){i(h)}}function c(d){try{u(n.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})}function Pb(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(o=u[0]&2?s.return:u[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,u[1])).done)return o;switch(s=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],s=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Vu=Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function Tb(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Vu(e,t,r)}function cu(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mp(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,o=[],i;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(l){i={error:l}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return o}function Rb(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(mp(arguments[e]));return t}function Ob(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],i=0,l=o.length;i<l;i++,s++)n[s]=o[i];return n}function pp(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,o;n<s;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function Pa(t){return this instanceof Pa?(this.v=t,this):new Pa(t)}function Ab(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",i),s[Symbol.asyncIterator]=function(){return this},s;function i(p){return function(y){return Promise.resolve(y).then(p,h)}}function l(p,y){n[p]&&(s[p]=function(g){return new Promise(function(x,b){o.push([p,g,x,b])>1||c(p,g)})},y&&(s[p]=y(s[p])))}function c(p,y){try{u(n[p](y))}catch(g){m(o[0][3],g)}}function u(p){p.value instanceof Pa?Promise.resolve(p.value.v).then(d,h):m(o[0][2],p)}function d(p){c("next",p)}function h(p){c("throw",p)}function m(p,y){p(y),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Ib(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,o){e[s]=t[s]?function(i){return(r=!r)?{value:Pa(t[s](i)),done:!1}:o?o(i):i}:o}}function Db(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof cu=="function"?cu(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(i){return new Promise(function(l,c){i=t[o](i),s(l,c,i.done,i.value)})}}function s(o,i,l,c){Promise.resolve(c).then(function(u){o({value:u,done:l})},i)}}function Lb(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var I2=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Lf=function(t){return Lf=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Lf(t)};function Mb(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Lf(t),n=0;n<r.length;n++)r[n]!=="default"&&Vu(e,t,r[n]);return I2(e,t),e}function $b(t){return t&&t.__esModule?t:{default:t}}function Fb(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function Ub(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function Bb(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function zb(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var D2=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function Vb(t){function e(o){t.error=t.hasError?new D2(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(s,function(i){return e(i),s()})}else n|=1}catch(i){e(i)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function Wb(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,o,i){return n?e?".jsx":".js":s&&(!o||!i)?r:s+o+"."+i.toLowerCase()+"js"}):t}const L2={__extends:bb,__assign:fr,__rest:ys,__decorate:_b,__param:jb,__esDecorate:Sb,__runInitializers:Nb,__propKey:kb,__setFunctionName:Cb,__metadata:Eb,__awaiter:re,__generator:Pb,__createBinding:Vu,__exportStar:Tb,__values:cu,__read:mp,__spread:Rb,__spreadArrays:Ob,__spreadArray:pp,__await:Pa,__asyncGenerator:Ab,__asyncDelegator:Ib,__asyncValues:Db,__makeTemplateObject:Lb,__importStar:Mb,__importDefault:$b,__classPrivateFieldGet:Fb,__classPrivateFieldSet:Ub,__classPrivateFieldIn:Bb,__addDisposableResource:zb,__disposeResources:Vb,__rewriteRelativeImportExtension:Wb},M2=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:zb,get __assign(){return fr},__asyncDelegator:Ib,__asyncGenerator:Ab,__asyncValues:Db,__await:Pa,__awaiter:re,__classPrivateFieldGet:Fb,__classPrivateFieldIn:Bb,__classPrivateFieldSet:Ub,__createBinding:Vu,__decorate:_b,__disposeResources:Vb,__esDecorate:Sb,__exportStar:Tb,__extends:bb,__generator:Pb,__importDefault:$b,__importStar:Mb,__makeTemplateObject:Lb,__metadata:Eb,__param:jb,__propKey:kb,__read:mp,__rest:ys,__rewriteRelativeImportExtension:Wb,__runInitializers:Nb,__setFunctionName:Cb,__spread:Rb,__spreadArray:pp,__spreadArrays:Ob,__values:cu,default:L2},Symbol.toStringTag,{value:"Module"})),$2="modulepreload",F2=function(t){return"/"+t},ux={},Wa=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=F2(c),c in ux)return;ux[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":$2,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,p)=>{h.addEventListener("load",m),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})},U2=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Wa(async()=>{const{default:n}=await Promise.resolve().then(()=>fo);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class gp extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class dx extends gp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class hx extends gp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class fx extends gp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Mf;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Mf||(Mf={}));class B2{constructor(e,{headers:r={},customFetch:n,region:s=Mf.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=U2(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return re(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:o,method:i,body:l,signal:c}=n;let u={},{region:d}=n;d||(d=this.region);const h=new URL(`${this.url}/${r}`);d&&d!=="any"&&(u["x-region"]=d,h.searchParams.set("forceFunctionRegion",d));let m;l&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",m=l):typeof l=="string"?(u["Content-Type"]="text/plain",m=l):typeof FormData<"u"&&l instanceof FormData?m=l:(u["Content-Type"]="application/json",m=JSON.stringify(l)):m=l;const p=yield this.fetch(h.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),o),body:m,signal:c}).catch(b=>{throw b.name==="AbortError"?b:new dx(b)}),y=p.headers.get("x-relay-error");if(y&&y==="true")throw new hx(p);if(!p.ok)throw new fx(p);let g=((s=p.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),x;return g==="application/json"?x=yield p.json():g==="application/octet-stream"||g==="application/pdf"?x=yield p.blob():g==="text/event-stream"?x=p:g==="multipart/form-data"?x=yield p.formData():x=yield p.text(),{data:x,error:null,response:p}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new dx(o)}:{data:null,error:o,response:o instanceof fx||o instanceof hx?o.context:void 0}}})}}var Rt={};const Ha=Oy(M2);var tc={},rc={},nc={},sc={},oc={},z2=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ta=z2();const V2=Ta.fetch,Hb=Ta.fetch.bind(Ta),qb=Ta.Headers,W2=Ta.Request,H2=Ta.Response,fo=Object.freeze(Object.defineProperty({__proto__:null,Headers:qb,Request:W2,Response:H2,default:Hb,fetch:V2},Symbol.toStringTag,{value:"Module"})),q2=Oy(fo);var ac={},mx;function Kb(){if(mx)return ac;mx=1,Object.defineProperty(ac,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return ac.default=t,ac}var px;function Gb(){if(px)return oc;px=1,Object.defineProperty(oc,"__esModule",{value:!0});const t=Ha,e=t.__importDefault(q2),r=t.__importDefault(Kb());class n{constructor(o){var i,l;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(i=o.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=o.signal,this.isMaybeSingle=(l=o.isMaybeSingle)!==null&&l!==void 0?l:!1,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,i){return this.headers=new Headers(this.headers),this.headers.set(o,i),this}then(o,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var d,h,m,p;let y=null,g=null,x=null,b=u.status,v=u.statusText;if(u.ok){if(this.method!=="HEAD"){const k=await u.text();k===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?g=k:g=JSON.parse(k))}const _=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),j=(m=u.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");_&&j&&j.length>1&&(x=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(y={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,x=null,b=406,v="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const _=await u.text();try{y=JSON.parse(_),Array.isArray(y)&&u.status===404&&(g=[],y=null,b=200,v="OK")}catch{u.status===404&&_===""?(b=204,v="No Content"):y={message:_}}if(y&&this.isMaybeSingle&&(!((p=y==null?void 0:y.details)===null||p===void 0)&&p.includes("0 rows"))&&(y=null,b=200,v="OK"),y&&this.shouldThrowOnError)throw new r.default(y)}return{error:y,data:g,count:x,status:b,statusText:v}});return this.shouldThrowOnError||(c=c.catch(u=>{var d,h,m;return{error:{message:`${(d=u==null?void 0:u.name)!==null&&d!==void 0?d:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(h=u==null?void 0:u.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(m=u==null?void 0:u.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),c.then(o,i)}returns(){return this}overrideTypes(){return this}}return oc.default=n,oc}var gx;function Qb(){if(gx)return sc;gx=1,Object.defineProperty(sc,"__esModule",{value:!0});const e=Ha.__importDefault(Gb());class r extends e.default{select(s){let o=!1;const i=(s??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:o=!0,nullsFirst:i,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${s}.${o?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:o,referencedTable:i=o}={}){const l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,o,{foreignTable:i,referencedTable:l=i}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(u,`${o-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:o=!1,settings:i=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var d;const h=[s?"analyze":null,o?"verbose":null,i?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),m=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${h};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return sc.default=r,sc}var vx;function vp(){if(vx)return nc;vx=1,Object.defineProperty(nc,"__esModule",{value:!0});const e=Ha.__importDefault(Qb()),r=new RegExp("[,()]");class n extends e.default{eq(o,i){return this.url.searchParams.append(o,`eq.${i}`),this}neq(o,i){return this.url.searchParams.append(o,`neq.${i}`),this}gt(o,i){return this.url.searchParams.append(o,`gt.${i}`),this}gte(o,i){return this.url.searchParams.append(o,`gte.${i}`),this}lt(o,i){return this.url.searchParams.append(o,`lt.${i}`),this}lte(o,i){return this.url.searchParams.append(o,`lte.${i}`),this}like(o,i){return this.url.searchParams.append(o,`like.${i}`),this}likeAllOf(o,i){return this.url.searchParams.append(o,`like(all).{${i.join(",")}}`),this}likeAnyOf(o,i){return this.url.searchParams.append(o,`like(any).{${i.join(",")}}`),this}ilike(o,i){return this.url.searchParams.append(o,`ilike.${i}`),this}ilikeAllOf(o,i){return this.url.searchParams.append(o,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(o,i){return this.url.searchParams.append(o,`ilike(any).{${i.join(",")}}`),this}is(o,i){return this.url.searchParams.append(o,`is.${i}`),this}in(o,i){const l=Array.from(new Set(i)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(o,`in.(${l})`),this}contains(o,i){return typeof i=="string"?this.url.searchParams.append(o,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(o,`cs.{${i.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(i)}`),this}containedBy(o,i){return typeof i=="string"?this.url.searchParams.append(o,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(o,`cd.{${i.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(i)}`),this}rangeGt(o,i){return this.url.searchParams.append(o,`sr.${i}`),this}rangeGte(o,i){return this.url.searchParams.append(o,`nxl.${i}`),this}rangeLt(o,i){return this.url.searchParams.append(o,`sl.${i}`),this}rangeLte(o,i){return this.url.searchParams.append(o,`nxr.${i}`),this}rangeAdjacent(o,i){return this.url.searchParams.append(o,`adj.${i}`),this}overlaps(o,i){return typeof i=="string"?this.url.searchParams.append(o,`ov.${i}`):this.url.searchParams.append(o,`ov.{${i.join(",")}}`),this}textSearch(o,i,{config:l,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const d=l===void 0?"":`(${l})`;return this.url.searchParams.append(o,`${u}fts${d}.${i}`),this}match(o){return Object.entries(o).forEach(([i,l])=>{this.url.searchParams.append(i,`eq.${l}`)}),this}not(o,i,l){return this.url.searchParams.append(o,`not.${i}.${l}`),this}or(o,{foreignTable:i,referencedTable:l=i}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${o})`),this}filter(o,i,l){return this.url.searchParams.append(o,`${i}.${l}`),this}}return nc.default=n,nc}var xx;function Yb(){if(xx)return rc;xx=1,Object.defineProperty(rc,"__esModule",{value:!0});const e=Ha.__importDefault(vp());class r{constructor(s,{headers:o={},schema:i,fetch:l}){this.url=s,this.headers=new Headers(o),this.schema=i,this.fetch=l}select(s,o){const{head:i=!1,count:l}=o??{},c=i?"HEAD":"GET";let u=!1;const d=(s??"*").split("").map(h=>/\s/.test(h)&&!u?"":(h==='"'&&(u=!u),h)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:o,defaultToNull:i=!0}={}){var l;const c="POST";if(o&&this.headers.append("Prefer",`count=${o}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const u=s.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:o,ignoreDuplicates:i=!1,count:l,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((m,p)=>m.concat(Object.keys(p)),[]);if(h.length>0){const m=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(s,{count:o}={}){var i;const l="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:s}={}){var o;const i="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return rc.default=r,rc}var yx;function K2(){if(yx)return tc;yx=1,Object.defineProperty(tc,"__esModule",{value:!0});const t=Ha,e=t.__importDefault(Yb()),r=t.__importDefault(vp());class n{constructor(o,{headers:i={},schema:l,fetch:c}={}){this.url=o,this.headers=new Headers(i),this.schemaName=l,this.fetch=c}from(o){const i=new URL(`${this.url}/${o}`);return new e.default(i,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new n(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,i={},{head:l=!1,get:c=!1,count:u}={}){var d;let h;const m=new URL(`${this.url}/rpc/${o}`);let p;l||c?(h=l?"HEAD":"GET",Object.entries(i).filter(([g,x])=>x!==void 0).map(([g,x])=>[g,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([g,x])=>{m.searchParams.append(g,x)})):(h="POST",p=i);const y=new Headers(this.headers);return u&&y.set("Prefer",`count=${u}`),new r.default({method:h,url:m,headers:y,schema:this.schemaName,body:p,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return tc.default=n,tc}Object.defineProperty(Rt,"__esModule",{value:!0});var Jb=Rt.PostgrestError=i_=Rt.PostgrestBuilder=o_=Rt.PostgrestTransformBuilder=n_=Rt.PostgrestFilterBuilder=t_=Rt.PostgrestQueryBuilder=Zb=Rt.PostgrestClient=void 0;const qa=Ha,Xb=qa.__importDefault(K2());var Zb=Rt.PostgrestClient=Xb.default;const e_=qa.__importDefault(Yb());var t_=Rt.PostgrestQueryBuilder=e_.default;const r_=qa.__importDefault(vp());var n_=Rt.PostgrestFilterBuilder=r_.default;const s_=qa.__importDefault(Qb());var o_=Rt.PostgrestTransformBuilder=s_.default;const a_=qa.__importDefault(Gb());var i_=Rt.PostgrestBuilder=a_.default;const l_=qa.__importDefault(Kb());Jb=Rt.PostgrestError=l_.default;var c_=Rt.default={PostgrestClient:Xb.default,PostgrestQueryBuilder:e_.default,PostgrestFilterBuilder:r_.default,PostgrestTransformBuilder:s_.default,PostgrestBuilder:a_.default,PostgrestError:l_.default};const G2=Ty({__proto__:null,get PostgrestBuilder(){return i_},get PostgrestClient(){return Zb},get PostgrestError(){return Jb},get PostgrestFilterBuilder(){return n_},get PostgrestQueryBuilder(){return t_},get PostgrestTransformBuilder(){return o_},default:c_},[Rt]),{PostgrestClient:Q2,PostgrestQueryBuilder:nU,PostgrestFilterBuilder:sU,PostgrestTransformBuilder:oU,PostgrestBuilder:aU,PostgrestError:iU}=c_||G2;class Y2{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const J2="2.78.0",X2=`realtime-js/${J2}`,Z2="1.0.0",$f=1e4,eR=1e3,tR=100;var Ei;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ei||(Ei={}));var lt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(lt||(lt={}));var Ar;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ar||(Ar={}));var Ff;(function(t){t.websocket="websocket"})(Ff||(Ff={}));var Ps;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ps||(Ps={}));class rR{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),o=r.getUint8(2);let i=this.HEADER_LENGTH+2;const l=n.decode(e.slice(i,i+s));i=i+s;const c=n.decode(e.slice(i,i+o));i=i+o;const u=JSON.parse(n.decode(e.slice(i,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class u_{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ie;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ie||(Ie={}));const wx=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((o,i)=>(o[i]=nR(i,t,e,s),o),{}):{}},nR=(t,e,r,n)=>{const s=e.find(l=>l.name===t),o=s==null?void 0:s.type,i=r[t];return o&&!n.includes(o)?d_(o,i):Uf(i)},d_=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return iR(e,r)}switch(t){case Ie.bool:return sR(e);case Ie.float4:case Ie.float8:case Ie.int2:case Ie.int4:case Ie.int8:case Ie.numeric:case Ie.oid:return oR(e);case Ie.json:case Ie.jsonb:return aR(e);case Ie.timestamp:return lR(e);case Ie.abstime:case Ie.date:case Ie.daterange:case Ie.int4range:case Ie.int8range:case Ie.money:case Ie.reltime:case Ie.text:case Ie.time:case Ie.timestamptz:case Ie.timetz:case Ie.tsrange:case Ie.tstzrange:return Uf(e);default:return Uf(e)}},Uf=t=>t,sR=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},oR=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},aR=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},iR=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let o;const i=t.slice(1,r);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(l=>d_(e,l))}return t},lR=t=>typeof t=="string"?t.replace(" ","T"):t,h_=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class eh{constructor(e,r,n={},s=$f){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var bx;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(bx||(bx={}));class Pi{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Pi.syncState(this.state,s,o,i),this.pendingDiffs.forEach(c=>{this.state=Pi.syncDiff(this.state,c,o,i)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Pi.syncDiff(this.state,s,o,i),l())}),this.onJoin((s,o,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:i})}),this.onLeave((s,o,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const o=this.cloneDeep(e),i=this.transformState(r),l={},c={};return this.map(o,(u,d)=>{i[u]||(c[u]=d)}),this.map(i,(u,d)=>{const h=o[u];if(h){const m=d.map(x=>x.presence_ref),p=h.map(x=>x.presence_ref),y=d.filter(x=>p.indexOf(x.presence_ref)<0),g=h.filter(x=>m.indexOf(x.presence_ref)<0);y.length>0&&(l[u]=y),g.length>0&&(c[u]=g)}else l[u]=d}),this.syncDiff(o,{joins:l,leaves:c},n,s)}static syncDiff(e,r,n,s){const{joins:o,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(o,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(p=>p.presence_ref),m=d.filter(p=>h.indexOf(p.presence_ref)<0);e[l].unshift(...m)}n(l,d,c)}),this.map(i,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,s(l,u,c),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _x;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(_x||(_x={}));var Ti;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ti||(Ti={}));var dn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(dn||(dn={}));class xp{constructor(e,r={config:{}},n){var s,o;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=lt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new eh(this,Ar.join,this.params,this.timeout),this.rejoinTimer=new u_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=lt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=lt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ar.reply,{},(i,l)=>{this._trigger(this._replyEventName(l),i)}),this.presence=new Pi(this),this.broadcastEndpointURL=h_(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==lt.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Ti.PRESENCE]&&this.bindings[Ti.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,h={},m={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(dn.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(dn.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var y;if(this.socket.setAuth(),p===void 0){e==null||e(dn.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,x=(y=g==null?void 0:g.length)!==null&&y!==void 0?y:0,b=[];for(let v=0;v<x;v++){const w=g[v],{filter:{event:_,schema:j,table:k,filter:C}}=w,P=p&&p[v];if(P&&P.event===_&&P.schema===j&&P.table===k&&P.filter===C)b.push(Object.assign(Object.assign({},w),{id:P.id}));else{this.unsubscribe(),this.state=lt.errored,e==null||e(dn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(dn.SUBSCRIBED);return}}).receive("error",p=>{this.state=lt.errored,e==null||e(dn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(dn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===lt.joined&&e===Ti.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var s;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const i={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,i,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:i}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,l,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=lt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ar.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new eh(this,Ar.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=lt.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,o=setTimeout(()=>s.abort(),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(o),i}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new eh(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>tR){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,o;const i=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Ar;if(n&&[l,c,u,d].indexOf(i)>=0&&n!==this._joinRef())return;let m=this._onMessage(i,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var y,g,x;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((x=(g=p.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===i}).map(p=>p.callback(m,n)):(o=this.bindings[i])===null||o===void 0||o.filter(p=>{var y,g,x,b,v,w;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const _=p.id,j=(y=p.filter)===null||y===void 0?void 0:y.event;return _&&((g=r.ids)===null||g===void 0?void 0:g.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const _=(v=(b=p==null?void 0:p.filter)===null||b===void 0?void 0:b.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return _==="*"||_===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof m=="object"&&"ids"in m){const y=m.data,{schema:g,table:x,commit_timestamp:b,type:v,errors:w}=y;m=Object.assign(Object.assign({},{schema:g,table:x,commit_timestamp:b,eventType:v,new:{},old:{},errors:w}),this._getPayloadRecords(y))}p.callback(m,n)})}_isClosed(){return this.state===lt.closed}_isJoined(){return this.state===lt.joined}_isJoining(){return this.state===lt.joining}_isLeaving(){return this.state===lt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),o={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&xp.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ar.close,{},e)}_onError(e){this._on(Ar.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=lt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=wx(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=wx(e.columns,e.old_record)),r}}const th=()=>{},ic={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},cR=[1e3,2e3,5e3,1e4],uR=1e4,dR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class hR{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=$f,this.transport=null,this.heartbeatIntervalMs=ic.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=th,this.ref=0,this.reconnectTimer=null,this.logger=th,this.conn=null,this.sendBuffer=[],this.serializer=new rR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...i)=>Wa(async()=>{const{default:l}=await Promise.resolve().then(()=>fo);return{default:l}},void 0).then(({default:l})=>l(...i)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...i)=>o(...i)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Ff.websocket}`,this.httpEndpoint=h_(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Y2.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Z2}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ei.connecting:return Ps.Connecting;case Ei.open:return Ps.Open;case Ei.closing:return Ps.Closing;default:return Ps.Closed}}isConnected(){return this.connectionState()===Ps.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(o=>o.topic===n);if(s)return s;{const o=new xp(`realtime:${e}`,r,this);return this.channels.push(o),o}}push(e){const{topic:r,event:n,payload:s,ref:o}=e,i=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${o})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(eR,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ic.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:o,ref:i}=r,l=i?`(${i})`:"",c=o.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),o),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,o,i)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ar.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([dR],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:X2};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Ar.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new u_(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ic.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,o,i,l,c,u,d;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:$f,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:ic.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(i=e==null?void 0:e.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:th,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:h=>cR[h-1]||uR,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(h,m)=>m(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class yp extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Be(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class fR extends yp{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Bf extends yp{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const wp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Wa(async()=>{const{default:n}=await Promise.resolve().then(()=>fo);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},mR=()=>re(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Wa(()=>Promise.resolve().then(()=>fo),void 0)).Response:Response}),zf=t=>{if(Array.isArray(t))return t.map(r=>zf(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=zf(n)}),e},pR=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},rh=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},gR=(t,e,r)=>re(void 0,void 0,void 0,function*(){const n=yield mR();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const o=t.status||500,i=(s==null?void 0:s.statusCode)||o+"";e(new fR(rh(s),o,i))}).catch(s=>{e(new Bf(rh(s),s))}):e(new Bf(rh(t),t))}),vR=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(pR(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function bl(t,e,r,n,s,o){return re(this,void 0,void 0,function*(){return new Promise((i,l)=>{t(r,vR(e,n,s,o)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>gR(c,l,n))})})}function el(t,e,r,n){return re(this,void 0,void 0,function*(){return bl(t,"GET",e,r,n)})}function Pr(t,e,r,n,s){return re(this,void 0,void 0,function*(){return bl(t,"POST",e,n,s,r)})}function Vf(t,e,r,n,s){return re(this,void 0,void 0,function*(){return bl(t,"PUT",e,n,s,r)})}function xR(t,e,r,n){return re(this,void 0,void 0,function*(){return bl(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function bp(t,e,r,n,s){return re(this,void 0,void 0,function*(){return bl(t,"DELETE",e,n,s,r)})}class yR{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return re(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Be(e))return{data:null,error:e};throw e}})}}var f_;class wR{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[f_]="BlobDownloadBuilder",this.promise=null}asStream(){return new yR(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return re(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Be(e))return{data:null,error:e};throw e}})}}f_=Symbol.toStringTag;const bR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},jx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class _R{constructor(e,r={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=wp(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,s){return re(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},jx),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=n,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(e=="PUT"?Vf:Pr)(this.fetch,`${this.url}/object/${d}`,o,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Be(o))return{data:null,error:o};throw o}})}upload(e,r,n){return re(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return re(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),i=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:jx.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Vf(this.fetch,l.toString(),c,{headers:d});return{data:{path:o,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Be(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return re(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const o=yield Pr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),i=new URL(this.url+o.url),l=i.searchParams.get("token");if(!l)throw new yp("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}update(e,r,n){return re(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return re(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Be(s))return{data:null,error:s};throw s}})}copy(e,r,n){return re(this,void 0,void 0,function*(){try{return{data:{path:(yield Pr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Be(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return re(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield Pr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Be(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return re(this,void 0,void 0,function*(){try{const s=yield Pr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Be(s))return{data:null,error:s};throw s}})}download(e,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=o?`?${o}`:"",l=this._getFinalPath(e),c=()=>el(this.fetch,`${this.url}/${s}/${l}${i}`,{headers:this.headers,noResolveJson:!0});return new wR(c,this.shouldThrowOnError)}info(e){return re(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield el(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:zf(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}exists(e){return re(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield xR(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n)&&n instanceof Bf){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&s.push(o);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return re(this,void 0,void 0,function*(){try{return{data:yield bp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}list(e,r,n){return re(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},bR),r),{prefix:e||""});return{data:yield Pr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Be(s))return{data:null,error:s};throw s}})}listV2(e,r){return re(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Pr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const m_="2.78.0",p_={"X-Client-Info":`storage-js/${m_}`};class jR{constructor(e,r={},n,s){this.shouldThrowOnError=!1;const o=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},p_),r),this.fetch=wp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return re(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield el(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}getBucket(e){return re(this,void 0,void 0,function*(){try{return{data:yield el(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}createBucket(e){return re(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Pr(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Be(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return re(this,void 0,void 0,function*(){try{return{data:yield Vf(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}emptyBucket(e){return re(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}deleteBucket(e){return re(this,void 0,void 0,function*(){try{return{data:yield bp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class SR{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},p_),r),this.fetch=wp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return re(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}listBuckets(e){return re(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield el(this.fetch,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}deleteBucket(e){return re(this,void 0,void 0,function*(){try{return{data:yield bp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}}const _p={"X-Client-Info":`storage-js/${m_}`,"Content-Type":"application/json"};class g_ extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Xt(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class nh extends g_{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class NR extends g_{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var Sx;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Sx||(Sx={}));const jp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Wa(async()=>{const{default:n}=await Promise.resolve().then(()=>fo);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},kR=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Nx=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),CR=(t,e,r)=>re(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const s=t.status||500,o=t;if(typeof o.json=="function")o.json().then(i=>{const l=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||s+"";e(new nh(Nx(i),s,l))}).catch(()=>{const i=s+"",l=o.statusText||`HTTP ${s} error`;e(new nh(l,s,i))});else{const i=s+"",l=o.statusText||`HTTP ${s} error`;e(new nh(l,s,i))}}else e(new NR(Nx(t),t))}),ER=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(kR(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r)):s};function PR(t,e,r,n,s,o){return re(this,void 0,void 0,function*(){return new Promise((i,l)=>{t(r,ER(e,n,s,o)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>i(c)).catch(c=>CR(c,l,n))})})}function Zt(t,e,r,n,s){return re(this,void 0,void 0,function*(){return PR(t,"POST",e,n,s,r)})}class TR{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_p),r),this.fetch=jp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return re(this,void 0,void 0,function*(){try{return{data:(yield Zt(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}})}getIndex(e,r){return re(this,void 0,void 0,function*(){try{return{data:yield Zt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xt(n))return{data:null,error:n};throw n}})}listIndexes(e){return re(this,void 0,void 0,function*(){try{return{data:yield Zt(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return re(this,void 0,void 0,function*(){try{return{data:(yield Zt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xt(n))return{data:null,error:n};throw n}})}}class RR{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_p),r),this.fetch=jp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return re(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Zt(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}})}getVectors(e){return re(this,void 0,void 0,function*(){try{return{data:yield Zt(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}})}listVectors(e){return re(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Zt(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}})}queryVectors(e){return re(this,void 0,void 0,function*(){try{return{data:yield Zt(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}})}deleteVectors(e){return re(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Zt(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}})}}class OR{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_p),r),this.fetch=jp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return re(this,void 0,void 0,function*(){try{return{data:(yield Zt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}})}getBucket(e){return re(this,void 0,void 0,function*(){try{return{data:yield Zt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}})}listBuckets(){return re(this,arguments,void 0,function*(e={}){try{return{data:yield Zt(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return re(this,void 0,void 0,function*(){try{return{data:(yield Zt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}})}}class AR extends OR{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new IR(this.url,this.headers,e,this.fetch)}}class IR extends TR{constructor(e,r,n,s){super(e,r,s),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return re(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return re(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return re(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return re(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new DR(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class DR extends RR{constructor(e,r,n,s,o){super(e,r,o),this.vectorBucketName=n,this.indexName=s}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return re(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return re(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return re(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return re(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return re(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class LR extends jR{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new _R(this.url,this.headers,e,this.fetch)}get vectors(){return new AR(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new SR(this.url+"/iceberg",this.headers,this.fetch)}}const MR="2.78.0";let mi="";typeof Deno<"u"?mi="deno":typeof document<"u"?mi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?mi="react-native":mi="node";const $R={"X-Client-Info":`supabase-js-${mi}/${MR}`},FR={headers:$R},UR={schema:"public"},BR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},zR={},VR=t=>{let e;return t?e=t:typeof fetch>"u"?e=Hb:e=fetch,(...r)=>e(...r)},WR=()=>typeof Headers>"u"?qb:Headers,HR=(t,e,r)=>{const n=VR(r),s=WR();return async(o,i)=>{var l;const c=(l=await e())!==null&&l!==void 0?l:t;let u=new s(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(o,Object.assign(Object.assign({},i),{headers:u}))}};function qR(t){return t.endsWith("/")?t:t+"/"}function KR(t,e){var r,n;const{db:s,auth:o,realtime:i,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),o),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}function GR(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(qR(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const v_="2.78.0",Lo=30*1e3,Wf=3,sh=Wf*Lo,QR="http://localhost:9999",YR="supabase.auth.token",JR={"X-Client-Info":`gotrue-js/${v_}`},Hf="X-Supabase-Api-Version",x_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},XR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ZR=10*60*1e3;class tl extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function oe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class eO extends tl{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function tO(t){return oe(t)&&t.name==="AuthApiError"}class Ts extends tl{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class ws extends tl{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Nr extends ws{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function rO(t){return oe(t)&&t.name==="AuthSessionMissingError"}class Co extends ws{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class lc extends ws{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class cc extends ws{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function nO(t){return oe(t)&&t.name==="AuthImplicitGrantRedirectError"}class kx extends ws{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class qf extends ws{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function oh(t){return oe(t)&&t.name==="AuthRetryableFetchError"}class Cx extends ws{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Kf extends ws{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const uu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ex=` 	
\r=`.split(""),sO=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Ex.length;e+=1)t[Ex[e].charCodeAt(0)]=-2;for(let e=0;e<uu.length;e+=1)t[uu[e].charCodeAt(0)]=e;return t})();function Px(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(uu[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(uu[n]),e.queuedBits-=6}}function y_(t,e,r){const n=sO[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Tx(t){const e=[],r=i=>{e.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=i=>{iO(i,n,r)};for(let i=0;i<t.length;i+=1)y_(t.charCodeAt(i),s,o);return e.join("")}function oO(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function aO(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}oO(n,e)}}function iO(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function sa(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)y_(t.charCodeAt(s),r,n);return new Uint8Array(e)}function lO(t){const e=[];return aO(t,r=>e.push(r)),new Uint8Array(e)}function Is(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>Px(s,r,n)),Px(null,r,n),e.join("")}function cO(t){return Math.round(Date.now()/1e3)+t}function uO(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ct=()=>typeof window<"u"&&typeof document<"u",Ss={tested:!1,writable:!1},w_=()=>{if(!Ct())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ss.tested)return Ss.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ss.tested=!0,Ss.writable=!0}catch{Ss.tested=!0,Ss.writable=!1}return Ss.writable};function dO(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const b_=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Wa(async()=>{const{default:n}=await Promise.resolve().then(()=>fo);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},hO=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Mo=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Ns=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Tn=async(t,e)=>{await t.removeItem(e)};class Wu{constructor(){this.promise=new Wu.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Wu.promiseConstructor=Promise;function ah(t){const e=t.split(".");if(e.length!==3)throw new Kf("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!XR.test(e[n]))throw new Kf("JWT not in base64url format");return{header:JSON.parse(Tx(e[0])),payload:JSON.parse(Tx(e[1])),signature:sa(e[2]),raw:{header:e[0],payload:e[1]}}}async function fO(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function mO(t,e){return new Promise((n,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await t(o);if(!e(o,null,i)){n(i);return}}catch(i){if(!e(o,i)){s(i);return}}})()})}function pO(t){return("0"+t.toString(16)).substr(-2)}function gO(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let o=0;o<56;o++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,pO).join("")}async function vO(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function xO(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await vO(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Eo(t,e,r=!1){const n=gO();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Mo(t,`${e}-code-verifier`,s);const o=await xO(n);return[o,n===o?"plain":"s256"]}const yO=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function wO(t){const e=t.headers.get(Hf);if(!e||!e.match(yO))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function bO(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function _O(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const jO=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Po(t){if(!jO.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ih(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function SO(t,e){return new Proxy(t,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,s)}})}function Rx(t){return JSON.parse(JSON.stringify(t))}const Es=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),NO=[502,503,504];async function Ox(t){var e;if(!hO(t))throw new qf(Es(t),0);if(NO.includes(t.status))throw new qf(Es(t),t.status);let r;try{r=await t.json()}catch(o){throw new Ts(Es(o),o)}let n;const s=wO(t);if(s&&s.getTime()>=x_["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Cx(Es(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Nr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new Cx(Es(r),t.status,r.weak_password.reasons);throw new eO(Es(r),t.status||500,n)}const kO=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function ce(t,e,r,n){var s;const o=Object.assign({},n==null?void 0:n.headers);o[Hf]||(o[Hf]=x_["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const i=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await CO(t,e,r+l,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function CO(t,e,r,n,s,o){const i=kO(e,n,s,o);let l;try{l=await t(r,Object.assign({},i))}catch(c){throw console.error(c),new qf(Es(c),0)}if(l.ok||await Ox(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Ox(c)}}function kr(t){var e;let r=null;TO(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=cO(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Ax(t){const e=kr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Un(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function EO(t){return{data:t,error:null}}function PO(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o}=t,i=ys(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function Ix(t){return t}function TO(t){return t.access_token&&t.refresh_token&&t.expires_in}const lh=["global","local","others"];class RO{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=b_(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=lh[0]){if(lh.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${lh.join(", ")}`);try{return await ce(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Un})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=ys(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:PO,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(oe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await ce(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Un})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,o,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:Ix});if(d.error)throw d.error;const h=await d.json(),m=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(y.split(";")[1].split("=")[1]);u[`${x}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(oe(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Po(e);try{return await ce(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Un})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Po(e);try{return await ce(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Un})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Po(e);try{return await ce(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Un})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Po(e.userId);try{const{data:r,error:n}=await ce(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Po(e.userId),Po(e.id);try{return{data:await ce(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,o,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ce(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:Ix});if(d.error)throw d.error;const h=await d.json(),m=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(y.split(";")[1].split("=")[1]);u[`${x}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(oe(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await ce(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await ce(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await ce(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await ce(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await ce(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}}function Dx(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const To={debug:!!(globalThis&&w_()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class __ extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class OO extends __{}async function AO(t,e,r){To.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),To.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){To.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{To.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw To.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new OO(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(To.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function IO(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function j_(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function DO(t){return parseInt(t,16)}function LO(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function MO(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:o=new Date,nonce:i,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:m}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=j_(t.address),y=d?`${d}://${n}`:n,g=t.statement?`${t.statement}
`:"",x=`${y} wants you to sign in with your Ethereum account:
${p}

${g}`;let b=`URI: ${h}
Version: ${m}
Chain ID: ${r}${i?`
Nonce: ${i}`:""}
Issued At: ${o.toISOString()}`;if(s&&(b+=`
Expiration Time: ${s.toISOString()}`),l&&(b+=`
Not Before: ${l.toISOString()}`),c&&(b+=`
Request ID: ${c}`),u){let v=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);v+=`
- ${w}`}b+=v}return`${x}
${b}`}class st extends Error{constructor({message:e,code:r,cause:n,name:s}){var o;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(o=s??(n instanceof Error?n.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class du extends st{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function $O({error:t,options:e}){var r,n,s;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new st({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new st({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new st({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new st({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new st({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new st({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new st({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new st({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const i=window.location.hostname;if(S_(i)){if(o.rp.id!==i)return new st({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new st({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new st({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new st({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new st({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function FO({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new st({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new st({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(S_(n)){if(r.rpId!==n)return new st({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new st({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new st({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new st({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class UO{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const BO=new UO;function zO(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=ys(t,["challenge","user","excludeCredentials"]),o=sa(e).buffer,i=Object.assign(Object.assign({},r),{id:sa(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:o,user:i});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:sa(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function VO(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=ys(t,["challenge","allowCredentials"]),s=sa(e).buffer,o=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let i=0;i<r.length;i++){const l=r[i];o.allowCredentials[i]=Object.assign(Object.assign({},l),{id:sa(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return o}function WO(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Is(new Uint8Array(t.response.attestationObject)),clientDataJSON:Is(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function HO(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Is(new Uint8Array(s.authenticatorData)),clientDataJSON:Is(new Uint8Array(s.clientDataJSON)),signature:Is(new Uint8Array(s.signature)),userHandle:s.userHandle?Is(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function S_(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Lx(){var t,e;return!!(Ct()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function qO(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new du("Browser returned unexpected credential type",e)}:{data:null,error:new du("Empty credential response",e)}}catch(e){return{data:null,error:$O({error:e,options:t})}}}async function KO(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new du("Browser returned unexpected credential type",e)}:{data:null,error:new du("Empty credential response",e)}}catch(e){return{data:null,error:FO({error:e,options:t})}}}const GO={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},QO={userVerification:"preferred",hints:["security-key"]};function hu(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const o in s){const i=s[o];if(i!==void 0)if(Array.isArray(i))n[o]=i;else if(r(i))n[o]=i;else if(e(i)){const l=n[o];e(l)?n[o]=hu(l,i):n[o]=hu(i)}else n[o]=i}return n}function YO(t,e){return hu(GO,t,e||{})}function JO(t,e){return hu(QO,t,e||{})}class XO{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},o){try{const{data:i,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!i)return{data:null,error:l};const c=s??BO.createNewAbortSignal();if(i.webauthn.type==="create"){const{user:u}=i.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(i.webauthn.type){case"create":{const u=YO(i.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:d,error:h}=await qO({publicKey:u,signal:c});return d?{data:{factorId:e,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=JO(i.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:d,error:h}=await KO(Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:e,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(i){return oe(i)?{data:null,error:i}:{data:null,error:new Ts("Unexpected error in challenge",i)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},o){if(!r)return{data:null,error:new tl("rpId is required for WebAuthn authentication")};try{if(!Lx())return{data:null,error:new Ts("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:o});if(!i)return{data:null,error:l};const{webauthn:c}=i;return this._verify({factorId:e,challengeId:i.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(i){return oe(i)?{data:null,error:i}:{data:null,error:new Ts("Unexpected error in authenticate",i)}}}async _register({friendlyName:e,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},o){if(!r)return{data:null,error:new tl("rpId is required for WebAuthn registration")};try{if(!Lx())return{data:null,error:new Ts("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this._enroll({friendlyName:e});if(!i)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===e&&m.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:i.id,friendlyName:i.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:o});return c?this._verify({factorId:i.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(i){return oe(i)?{data:null,error:i}:{data:null,error:new Ts("Unexpected error in register",i)}}}}IO();const ZO={url:QR,storageKey:YR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:JR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Mx(t,e,r){return await r()}const Ro={};class rl{get jwks(){var e,r;return(r=(e=Ro[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Ro[this.storageKey]=Object.assign(Object.assign({},Ro[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Ro[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ro[this.storageKey]=Object.assign(Object.assign({},Ro[this.storageKey]),{cachedAt:e})}constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=rl.nextInstanceID,rl.nextInstanceID+=1,this.instanceID>0&&Ct()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},ZO),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new RO({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=b_(s.fetch),this.lock=s.lock||Mx,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ct()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=AO:this.lock=Mx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new XO(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:w_()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Dx(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Dx(this.memoryStorage)),Ct()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${v_}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=dO(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ct()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),nO(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return oe(r)?{error:r}:{error:new Ts("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const o=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:kr}),{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(oe(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var r,n,s;try{let o;if("email"in e){const{email:d,password:h,options:m}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Eo(this.storage,this.storageKey)),o=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:y},xform:kr})}else if("phone"in e){const{phone:d,password:h,options:m}=e;o=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:kr})}else throw new lc("You must provide either an email or phone number and a password");const{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(oe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let r;if("email"in e){const{email:o,password:i,options:l}=e;r=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ax})}else if("phone"in e){const{phone:o,password:i,options:l}=e;r=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ax})}else throw new lc("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Co}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(oe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,o,i,l,c,u,d,h,m;let p,y;if("message"in e)p=e.message,y=e.signature;else{const{chain:g,wallet:x,statement:b,options:v}=e;let w;if(Ct())if(typeof x=="object")w=x;else{const N=window;if("ethereum"in N&&typeof N.ethereum=="object"&&"request"in N.ethereum&&typeof N.ethereum.request=="function")w=N.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=x}const _=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href),j=await w.request({method:"eth_requestAccounts"}).then(N=>N).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const k=j_(j[0]);let C=(n=v==null?void 0:v.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!C){const N=await w.request({method:"eth_chainId"});C=DO(N)}const P={domain:_.host,address:k,statement:b,uri:_.href,version:"1",chainId:C,nonce:(s=v==null?void 0:v.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(i=(o=v==null?void 0:v.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&i!==void 0?i:new Date,expirationTime:(l=v==null?void 0:v.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=v==null?void 0:v.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=v==null?void 0:v.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=v==null?void 0:v.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=MO(P),y=await w.request({method:"personal_sign",params:[LO(p),k]})}try{const{data:g,error:x}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:y},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:kr});if(x)throw x;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new Co}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:x})}catch(g){if(oe(g))return{data:{user:null,session:null},error:g};throw g}}async signInWithSolana(e){var r,n,s,o,i,l,c,u,d,h,m,p;let y,g;if("message"in e)y=e.message,g=e.signature;else{const{chain:x,wallet:b,statement:v,options:w}=e;let _;if(Ct())if(typeof b=="object")_=b;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))_=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=b}const j=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const k=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),v?{statement:v}:null));let C;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")C=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)C=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)y=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),g=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const k=await _.signMessage(new TextEncoder().encode(y),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=k}}try{const{data:x,error:b}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Is(g)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:kr});if(b)throw b;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new Co}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:b})}catch(x){if(oe(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(e){const r=await Ns(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:o,error:i}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:kr});if(await Tn(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Co}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:i})}catch(o){if(oe(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:o,nonce:i}=e,l=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:kr}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Co}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(oe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,o,i;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Eo(this.storage,this.storageKey));const{error:h}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new lc("You must provide either an email or phone number.")}catch(l){if(oe(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let s,o;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:l}=await ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:kr});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,u=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(oe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await Eo(this.storage,this.storageKey)),await ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:EO})}catch(o){if(oe(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Nr;const{error:s}=await ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(oe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:o}=e,{error:i}=await ce(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:n,type:s,options:o}=e,{data:i,error:l}=await ce(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new lc("You must provide either an email or phone number and a type")}catch(r){if(oe(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Ns(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<sh:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const i=await Ns(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=ih()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const i={value:this.suppressGetSessionWarning};e.user=SO(e.user,i),i.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Un}):await this._useSession(async r=>{var n,s,o;const{data:i,error:l}=r;if(l)throw l;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Nr}:await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Un})})}catch(r){if(oe(r))return rO(r)&&(await this._removeSession(),await Tn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:o}=n;if(o)throw o;if(!s.session)throw new Nr;const i=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Eo(this.storage,this.storageKey));const{data:u,error:d}=await ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:Un});if(d)throw d;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Nr;const r=Date.now()/1e3;let n=r,s=!0,o=null;const{payload:i}=ah(e.access_token);if(i.exp&&(n=i.exp,s=n<=r),s){const{data:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(oe(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:i,error:l}=r;if(l)throw l;e=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Nr;const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(oe(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Ct())throw new cc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new cc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new kx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new cc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new kx("No code detected.");const{data:v,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:o,refresh_token:i,expires_in:l,expires_at:c,token_type:u}=e;if(!o||!l||!i||!u)throw new cc("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const p=m-d;p*1e3<=Lo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const y=m-h;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,m,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,m,d);const{data:g,error:x}=await this._getUser(o);if(x)throw x;const b={provider_token:n,provider_refresh_token:s,access_token:o,expires_in:h,expires_at:m,refresh_token:i,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(n){if(oe(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Ns(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{error:o};const i=(n=s.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:l}=await this.admin.signOut(i,e);if(l&&!(tO(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Tn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=uO(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:o},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Eo(this.storage,this.storageKey,!0));try{return await ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(oe(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async o=>{var i,l,c,u,d;const{data:h,error:m}=o;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ce(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Ct()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(oe(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:o}}=r;if(s)throw s;const{options:i,provider:l,token:c,access_token:u,nonce:d}=e,h=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=o==null?void 0:o.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:kr}),{data:m,error:p}=h;return p?{data:{user:null,session:null},error:p}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new Co}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),{data:m,error:p})}catch(s){if(oe(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)throw i;return await ce(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await mO(async s=>(s>0&&await fO(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:kr})),(s,o)=>{const i=200*Math.pow(2,s);return o&&oh(o)&&Date.now()+i-n<Lo})}catch(n){if(this._debug(r,"error",n),oe(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Ct()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Ns(this.storage,this.storageKey);if(s&&this.userStorage){let i=await Ns(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await Mo(this.userStorage,this.storageKey+"-user",i)),s.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:ih()}else if(s&&!s.user&&!s.user){const i=await Ns(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await Tn(this.storage,this.storageKey+"-user"),await Mo(this.storage,this.storageKey,s)):s.user=ih()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const o=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<sh;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${sh}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),oh(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(s.access_token);!l&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Nr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Wu;const{data:o,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!o.session)throw new Nr;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={data:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),oe(o)){const i={data:null,error:o};return oh(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){o.push(c)}});if(await Promise.all(i),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Mo(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const o=Rx(s);await Mo(this.storage,this.storageKey,o)}else{const s=Rx(r);await Mo(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Tn(this.storage,this.storageKey),await Tn(this.storage,this.storageKey+"-code-verifier"),await Tn(this.storage,this.storageKey+"-user"),this.userStorage&&await Tn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ct()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Lo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Lo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Lo}ms, refresh threshold is ${Wf} ticks`),s<=Wf&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof __)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ct()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,i]=await Eo(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);s.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await ce(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:u}=await ce(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{data:null,error:o};const i=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?WO(e.webauthn.credential_response):HO(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:i,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(r){if(oe(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{data:null,error:o};const i=await ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(i.error)return i;const{data:l}=i;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:zO(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:VO(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(oe(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])s.all.push(o),o.status==="verified"&&s[o.factor_type].push(o);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:s}=await this.getSession();if(s)return{data:null,error:s};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=ah(n.access_token);let i=null;o.aal&&(i=o.aal);let l=i;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:i,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?{data:null,error:s}:n?await ce(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):{data:null,error:new Nr}})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;if(o)return{data:null,error:o};if(!s)return{data:null,error:new Nr};const i=await ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&Ct()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;if(o)return{data:null,error:o};if(!s)return{data:null,error:new Nr};const i=await ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&Ct()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+ZR>s)return n;const{data:o,error:i}=await ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,n=o.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:p,error:y}=await this.getSession();if(y||!p.session)return{data:null,error:y};n=p.session.access_token}const{header:s,payload:o,signature:i,raw:{header:l,payload:c}}=ah(n);r!=null&&r.allowExpired||bO(o.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:o,header:s,signature:i},error:null}}const d=_O(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,i,lO(`${l}.${c}`)))throw new Kf("Invalid JWT signature");return{data:{claims:o,header:s,signature:i},error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}}rl.nextInstanceID=0;const eA=rl;class tA extends eA{constructor(e){super(e)}}class rA{constructor(e,r,n){var s,o,i;this.supabaseUrl=e,this.supabaseKey=r;const l=GR(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:UR,realtime:zR,auth:Object.assign(Object.assign({},BR),{storageKey:c}),global:FR},d=KR(n??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=d.global.headers)!==null&&o!==void 0?o:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=d.auth)!==null&&i!==void 0?i:{},this.headers,d.global.fetch),this.fetch=HR(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Q2(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new LR(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new B2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:o,storageKey:i,flowType:l,lock:c,debug:u},d,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new tA({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),d),storageKey:i,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:o,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new hR(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const nA=(t,e,r)=>new rA(t,e,r);function sA(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}sA()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const N_="https://qaqrnyyhctqqvnpiqnjm.supabase.co",Ec="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFhcXJueXloY3RxcXZucGlxbmptIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4MDU5NzEsImV4cCI6MjA3ODM4MTk3MX0.4lOTNnZpZvvqv4LUBAWWpqd1D4O6SRVwOjJfWeeCbDA";console.log(" SUPABASE URL at runtime:",N_);console.log(" SUPABASE KEY (first 8):",Ec==null?void 0:Ec.slice(0,8));const Q=nA(N_,Ec,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storageKey:"middar_crm_session"},global:{headers:{"Content-Type":"application/json"}}}),cr={async signUpStaff(t,e,r){console.log("[authService] Creating staff user:",{email:t,userData:r});try{const{data:n,error:s}=await Q.auth.signUp({email:t,password:e});if(s)throw s;if(!n.user)throw new Error("No user data returned from sign up");console.log("[authService] Auth user created:",n.user.id);const{data:o,error:i}=await Q.from("users").upsert({user_name:r.name,user_email:t,user_role:r.role,avatar:r.avatar,auth_user_id:n.user.id},{onConflict:"auth_user_id"}).select("*").single();if(i)throw console.error("[authService] Error creating user profile:",i),new Error(`Failed to create user profile: ${i.message}`);return console.log("[authService] User profile created:",o),console.log("[authService] User profile created:",o),{id:n.user.id,email:t,role:r.role,profile:{user_id:o.user_id||parseInt(n.user.id),user_name:o.user_name||r.name,user_email:o.user_email||t,user_role:o.user_role||r.role,avatar:o.avatar||r.avatar,auth_user_id:o.auth_user_id||n.user.id,client_contact:o.client_contact||null,company_name:o.company_name||null,company_name_ar:o.company_name_ar||null,user_name_ar:o.user_name_ar||null,created_at:o.created_at||new Date().toISOString(),updated_at:o.updated_at||new Date().toISOString()}}}catch(n){throw console.error("[authService] Error in signUpStaff:",n),n}},async createStaffUser(t,e,r){console.log("[authService] Creating staff user via Edge Function:",{email:t,userData:r});try{const{data:{session:n},error:s}=await Q.auth.getSession();if(s||!(n!=null&&n.access_token))throw new Error("No active session found");const i="https://qaqrnyyhctqqvnpiqnjm.supabase.co".includes("127.0.0.1")?"http://127.0.0.1:54321/functions/v1/create-staff-user":"https://qaqrnyyhctqqvnpiqnjm.supabase.co/functions/v1/create-staff-user",l=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.access_token}`,"x-user-id":n.user.id},body:JSON.stringify({email:t,password:e,user_role:r.role,avatar:r.avatar,...r.localizedData||{user_name:r.name}})});if(!l.ok){const u=await l.json();throw new Error(u.error||`HTTP ${l.status}`)}const c=await l.json();return console.log("[authService] Staff user created successfully:",c),{id:c.auth_id,email:t,role:r.role,profile:{user_id:c.profile.user_id,user_name:c.profile.user_name,user_email:c.profile.user_email,user_role:c.profile.user_role,avatar:c.profile.avatar,auth_user_id:c.profile.auth_user_id,client_contact:c.profile.client_contact||null,company_name:c.profile.company_name||null,company_name_ar:c.profile.company_name_ar||null,user_name_ar:c.profile.user_name_ar||null,created_at:c.profile.created_at,updated_at:c.profile.updated_at}}}catch(n){throw console.error("[authService] Error in createStaffUser:",n),n}},async deleteUser(t){console.log("[authService] Deleting user:",t);try{const{data:{session:e},error:r}=await Q.auth.getSession();if(r||!(e!=null&&e.access_token))throw new Error("No active session found");const s="https://qaqrnyyhctqqvnpiqnjm.supabase.co".includes("127.0.0.1")?"http://127.0.0.1:54321/functions/v1/delete-user":"https://qaqrnyyhctqqvnpiqnjm.supabase.co/functions/v1/delete-user",o=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.access_token}`,"x-user-id":e.user.id},body:JSON.stringify({user_id:t})});if(!o.ok){const i=await o.json();throw new Error(i.error||`HTTP ${o.status}`)}console.log("[authService] User deleted successfully")}catch(e){throw console.error("[authService] Error in deleteUser:",e),e}},async signUpClient(t,e,r){console.log("[authService] Signing up client:",{email:t,...r});const{data:n,error:s}=await Q.auth.signUp({email:t,password:e});if(s)throw s;if(!n.user)throw new Error("User creation failed");console.log("[authService] Auth user created:",n.user.id);const{data:o,error:i}=await Q.from("users").upsert({user_name:r.name,user_email:t,user_role:"client",avatar:r.avatar,client_contact:r.contact,company_name:r.company,auth_user_id:n.user.id},{onConflict:"auth_user_id"}).select().single();if(i)throw console.error("[authService] Error creating user profile:",i),i;return console.log("[authService] User profile created:",o),{id:n.user.id,email:t,role:"client",profile:{user_id:o.user_id,user_name:o.user_name||r.name,user_email:o.user_email||t,user_role:"client",avatar:o.avatar||r.avatar,client_contact:o.client_contact||r.contact||null,company_name:o.company_name||r.company||null,company_name_ar:o.company_name_ar||null,user_name_ar:o.user_name_ar||null,auth_user_id:n.user.id,created_at:o.created_at||new Date().toISOString(),updated_at:o.updated_at||new Date().toISOString()}}},async signIn(t,e){console.log("[authService] Signing in with email:",t);try{const{data:r,error:n}=await Q.auth.signInWithPassword({email:t,password:e});if(n)throw console.error("[authService] Authentication error:",n),n;if(!r.user)throw new Error("Sign in failed: No user data returned");console.log("[authService] User authenticated, fetching profile...");const{data:s,error:o}=await Q.from("users").select("*").eq("auth_user_id",r.user.id).maybeSingle();if(o)throw console.error("[authService] Error fetching user profile:",o),new Error("Failed to fetch user profile");if(!s)throw console.error("[authService] User profile not found for user:",r.user.id),new Error("User profile not found");return console.log("[authService] User profile found:",s),{id:r.user.id,email:r.user.email,role:s.user_role||"client",profile:{...s}}}catch(r){throw console.error("[authService] Error in signIn:",r),r}},async signOut(){console.log("[authService] Signing out...");try{const{data:{session:t}}=await Q.auth.getSession();if(!t){console.warn("[authService] No active session found  skipping signOut()");return}const{error:e}=await Q.auth.signOut();if(e)throw console.error("[authService] Error signing out:",e),e;console.log("[authService] Sign out successful")}catch(t){throw console.error("[authService] Error in signOut:",t),t}},async signInWithGoogle(t="client"){console.log("[authService] Starting Google OAuth sign-in with role:",t);try{localStorage.setItem("oauth_intended_role",t);const{data:e,error:r}=await Q.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`,data:{intended_role:t},queryParams:{access_type:"offline",prompt:"consent select_account"}}});if(r)throw console.error("[authService] Google OAuth error:",r),localStorage.removeItem("oauth_intended_role"),r;console.log("[authService] Google OAuth initiated successfully with role:",t)}catch(e){throw console.error("[authService] Error in Google sign-in:",e),localStorage.removeItem("oauth_intended_role"),e}},async getCurrentUser(t){console.log("[authService] Getting current user",{authUserId:t});try{let e;if(t)e={id:t},console.log("[authService] Using provided auth user ID:",t);else{console.log("[authService] Fetching auth user from session");const l=Q.auth.getUser(),c=new Promise((u,d)=>setTimeout(()=>d(new Error("getUser timeout")),3e3));try{const{data:{user:u},error:d}=await Promise.race([l,c]);if(d||!u)return console.log("[authService] No authenticated user found"),null;e=u}catch(u){return console.warn("[authService] Failed to get user from session:",u),null}}console.log("[authService] Found auth user:",{id:e.id}),console.log("[authService] Checking users table for user:",e.id);const r=Q.from("users").select("*").eq("auth_user_id",e.id).maybeSingle(),n=new Promise((l,c)=>setTimeout(()=>c(new Error("Database query timeout")),3e3));let s,o;try{const l=await Promise.race([r,n]);s=l.data,o=l.error}catch(l){return console.error("[authService] Database query timed out:",l),{id:e.id,email:"",role:"client",profile:{user_id:0,user_name:"User",user_email:"",user_role:"client",auth_user_id:e.id,avatar:"",client_contact:null,company_name:null,company_name_ar:null,user_name_ar:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}}if(console.log("[authService] Database query completed:",{hasData:!!s,hasError:!!o}),o&&console.error("[authService] Error fetching user from users table:",o),s)return console.log("[authService] Found user in users table:",s),{id:e.id,email:s.user_email||"",role:s.user_role||"client",profile:{...s}};console.warn("[authService] User authenticated but not found in users table, creating minimal user object",{userId:e.id});const i={id:e.id,email:"",role:"client",profile:{user_id:0,user_name:"User",user_email:"",user_role:"client",auth_user_id:e.id,avatar:"",client_contact:null,company_name:null,company_name_ar:null,user_name_ar:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}};return console.log("[authService] Returning minimal user object"),i}catch(e){return console.error("[authService] Error in getCurrentUser:",e),null}},async getFreshJwt(){const{data:{session:t},error:e}=await Q.auth.getSession();if(e)throw e;if(!(t!=null&&t.access_token))throw new Error("No access token available");return t.access_token},onAuthStateChange(t){console.log("[authService] Setting up auth state change listener");let e=null;const r=async(s,o)=>{var l;console.log("[authService] Auth state changed:",{event:s,hasSession:!!o,userId:(l=o==null?void 0:o.user)==null?void 0:l.id});const i=async c=>{const u=this.getCurrentUser(c),d=new Promise((h,m)=>setTimeout(()=>m(new Error("getCurrentUser timeout")),3e3));return Promise.race([u,d])};if(s==="SIGNED_IN"&&(o!=null&&o.user))try{console.log("[authService] Fetching user profile for SIGNED_IN event");const c=await i(o.user.id);if(console.log("[authService] User profile fetched:",{hasUser:!!c}),c){const u=c.profile.user_name==="User",d=e&&e.profile.user_name!=="User";u&&d?console.log("[authService] Skipping update to minimal user, keeping full user"):JSON.stringify(c)!==JSON.stringify(e)&&(e=c,t(c))}}catch(c){if(console.error("[authService] Error or timeout getting current user:",c),!e){const u={id:o.user.id,email:o.user.email||"",role:"client",profile:{user_id:0,user_name:"User",user_email:o.user.email||"",user_role:"client",auth_user_id:o.user.id,avatar:"",client_contact:null,company_name:null,company_name_ar:null,user_name_ar:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}};e=u,t(u)}}else if(s==="INITIAL_SESSION")if(o!=null&&o.user)try{console.log("[authService] Fetching user profile for INITIAL_SESSION event"),await new Promise(u=>setTimeout(u,100));const c=await i(o.user.id);if(console.log("[authService] User profile fetched:",{hasUser:!!c}),c){const u=c.profile.user_name==="User",d=e&&e.profile.user_name!=="User";u&&d?console.log("[authService] Skipping update to minimal user, keeping full user"):JSON.stringify(c)!==JSON.stringify(e)&&(e=c,t(c))}}catch(c){if(console.error("[authService] Error or timeout getting current user:",c),!e){const u={id:o.user.id,email:o.user.email||"",role:"client",profile:{user_id:0,user_name:"User",user_email:o.user.email||"",user_role:"client",auth_user_id:o.user.id,avatar:"",client_contact:null,company_name:null,company_name_ar:null,user_name_ar:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}};e=u,t(u)}}else console.log("[authService] No session on initial check"),e=null,t(null);else s==="SIGNED_OUT"&&(console.log("[authService] User signed out"),e=null,t(null))},{data:{subscription:n}}=Q.auth.onAuthStateChange(r);return console.log("[authService] Auth state change listener set up"),{data:{subscription:n}}}},k_=f.createContext(void 0),oA=({children:t})=>{const[e,r]=f.useState(null),[n,s]=f.useState(!0),[o,i]=f.useState(!1);f.useEffect(()=>{let x=!0,b=null,v=!1;const w=j=>{if(x){if(console.log("[AuthContext] Auth state changed:",{hasUser:!!j,isSigningUp:o}),o){console.log("[AuthContext] Skipping auth state change during signup");return}r(j),v||(v=!0,s(!1))}};console.log("[AuthContext] Initializing auth state...");const{data:{subscription:_}}=cr.onAuthStateChange(w);return b=_,()=>{console.log("[AuthContext] Cleaning up auth state change listener"),x=!1,b&&b.unsubscribe()}},[]);const l=async(x,b)=>{console.log("[AuthContext] Signing in..."),s(!0);try{const v=await cr.signIn(x,b);return console.log("[AuthContext] Sign in successful:",v),r(v),s(!1),v}catch(v){throw console.error("[AuthContext] Sign in failed:",v),s(!1),r(null),v}},c=async(x="client")=>{console.log("[AuthContext] Starting Google sign-in with role:",x),s(!0);try{await cr.signInWithGoogle(x)}catch(b){throw console.error("[AuthContext] Google sign-in failed:",b),s(!1),b}},u=async()=>{console.log("[AuthContext] Signing out...");try{r(null),await cr.signOut(),console.log("[AuthContext] Sign out successful")}catch(x){throw console.error("[AuthContext] Sign out failed:",x),r(null),x}},d=async(x,b,v)=>{console.log("[AuthContext] Signing up staff..."),s(!0),i(!0);try{const w=await cr.signUpStaff(x,b,v);return console.log("[AuthContext] Staff sign up successful:",w),r(w),s(!1),w}catch(w){throw console.error("[AuthContext] Staff sign up failed:",w),s(!1),w}finally{i(!1)}},h=async(x,b,v)=>{console.log("[AuthContext] Creating staff user..."),s(!0);try{const w=await cr.createStaffUser(x,b,v);return console.log("[AuthContext] Staff user creation successful:",w),s(!1),w}catch(w){throw console.error("[AuthContext] Staff user creation failed:",w),s(!1),w}},m=async x=>{console.log("[AuthContext] Deleting user..."),s(!0);try{await cr.deleteUser(x),console.log("[AuthContext] User deletion successful"),s(!1)}catch(b){throw console.error("[AuthContext] User deletion failed:",b),s(!1),b}},p=async(x,b,v)=>{console.log("[AuthContext] Signing up client..."),s(!0),i(!0);try{const w=await cr.signUpClient(x,b,v);return console.log("[AuthContext] Client sign up successful:",w),r(w),s(!1),w}catch(w){throw console.error("[AuthContext] Client sign up failed:",w),s(!1),w}finally{i(!1)}},y=x=>e?x.includes(e.role):!1,g={user:e,loading:n,signIn:l,signInWithGoogle:c,signOut:u,signUpStaff:d,createStaffUser:h,deleteUser:m,signUpClient:p,isAuthenticated:!!e,isClient:(e==null?void 0:e.role)==="client",isStaff:e?["admin","manager","employee","team_leader"].includes(e.role):!1,hasRole:y};return a.jsx(k_.Provider,{value:g,children:t})},ht=()=>{const t=f.useContext(k_);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},C_=f.createContext(void 0),aA=[{code:"en",name:"English",flag:""},{code:"ar",name:"",flag:""}],iA=({children:t})=>{const[e,r]=f.useState(qe.language||"ar"),[n,s]=f.useState(Kt());f.useEffect(()=>{const l=c=>{r(c),s(Kt())};return qe.on("languageChanged",l),()=>{qe.off("languageChanged",l)}},[]);const i={currentLanguage:e,changeLanguage:async l=>{try{await qe.changeLanguage(l),r(l),s(Kt())}catch(c){console.error("Failed to change language:",c)}},isRTL:n,languages:aA};return a.jsx(C_.Provider,{value:i,children:t})},_l=()=>{const t=f.useContext(C_);if(t===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return t},lA=()=>a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"}),a.jsx("span",{className:"sr-only",children:"Loading..."})]}),Ft=({children:t,allowedRoles:e,requireAuth:r=!0})=>{const n=xs(),{user:s,loading:o,hasRole:i}=ht(),l=s&&s.role&&s.profile.user_name!=="User",c=f.useMemo(()=>e?i(e):!0,[e,i]);return f.useMemo(()=>({loading:o,user:s?{id:s.id,email:s.email,role:s.role}:null,hasRequiredRole:c}),[o,s,c]),console.log("[ProtectedRoute]",{path:n.pathname,loading:o,hasUser:!!s,isUserProfileLoaded:l,requireAuth:r,hasRequiredRole:c,userRole:s==null?void 0:s.role}),o||s&&!l?(console.log("[ProtectedRoute] Showing loading spinner - waiting for profile"),a.jsx(lA,{})):r&&!s?(console.log("[ProtectedRoute] No user, redirecting to login"),a.jsx(ax,{to:"/login",state:{from:n},replace:!0})):e&&!c?(console.log("[ProtectedRoute] User does not have required role"),a.jsx(ax,{to:"/unauthorized",replace:!0})):(console.log("[ProtectedRoute] Rendering protected content"),a.jsx(a.Fragment,{children:t}))};function $x(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Hu(...t){return e=>{let r=!1;const n=t.map(s=>{const o=$x(s,e);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let s=0;s<n.length;s++){const o=n[s];typeof o=="function"?o():$x(t[s],null)}}}}function be(...t){return f.useCallback(Hu(...t),t)}function no(t){const e=uA(t),r=f.forwardRef((n,s)=>{const{children:o,...i}=n,l=f.Children.toArray(o),c=l.find(hA);if(c){const u=c.props.children,d=l.map(h=>h===c?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:h);return a.jsx(e,{...i,ref:s,children:f.isValidElement(u)?f.cloneElement(u,void 0,d):null})}return a.jsx(e,{...i,ref:s,children:o})});return r.displayName=`${t}.Slot`,r}var cA=no("Slot");function uA(t){const e=f.forwardRef((r,n)=>{const{children:s,...o}=r;if(f.isValidElement(s)){const i=mA(s),l=fA(o,s.props);return s.type!==f.Fragment&&(l.ref=n?Hu(n,i):i),f.cloneElement(s,l)}return f.Children.count(s)>1?f.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var E_=Symbol("radix.slottable");function dA(t){const e=({children:r})=>a.jsx(a.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=E_,e}function hA(t){return f.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===E_}function fA(t,e){const r={...e};for(const n in e){const s=t[n],o=e[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...l)=>{const c=o(...l);return s(...l),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...t,...r}}function mA(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function P_(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=P_(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function T_(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=P_(t))&&(n&&(n+=" "),n+=e);return n}const Fx=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Ux=T_,jl=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return Ux(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:o}=e,i=Object.keys(s).map(u=>{const d=r==null?void 0:r[u],h=o==null?void 0:o[u];if(d===null)return null;const m=Fx(d)||Fx(h);return s[u][m]}),l=r&&Object.entries(r).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:h,className:m,...p}=d;return Object.entries(p).every(y=>{let[g,x]=y;return Array.isArray(x)?x.includes({...o,...l}[g]):{...o,...l}[g]===x})?[...u,h,m]:u},[]);return Ux(t,i,c,r==null?void 0:r.class,r==null?void 0:r.className)},Sp="-",pA=t=>{const e=vA(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:i=>{const l=i.split(Sp);return l[0]===""&&l.length!==1&&l.shift(),R_(l,e)||gA(i)},getConflictingClassGroupIds:(i,l)=>{const c=r[i]||[];return l&&n[i]?[...c,...n[i]]:c}}},R_=(t,e)=>{var i;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?R_(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const o=t.join(Sp);return(i=e.validators.find(({validator:l})=>l(o)))==null?void 0:i.classGroupId},Bx=/^\[(.+)\]$/,gA=t=>{if(Bx.test(t)){const e=Bx.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},vA=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return yA(Object.entries(t.classGroups),r).forEach(([o,i])=>{Gf(i,n,o,e)}),n},Gf=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const o=s===""?e:zx(e,s);o.classGroupId=r;return}if(typeof s=="function"){if(xA(s)){Gf(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([o,i])=>{Gf(i,zx(e,o),r,n)})})},zx=(t,e)=>{let r=t;return e.split(Sp).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},xA=t=>t.isThemeGetter,yA=(t,e)=>e?t.map(([r,n])=>{const s=n.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,l])=>[e+i,l])):o);return[r,s]}):t,wA=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(o,i)=>{r.set(o,i),e++,e>t&&(e=0,n=r,r=new Map)};return{get(o){let i=r.get(o);if(i!==void 0)return i;if((i=n.get(o))!==void 0)return s(o,i),i},set(o,i){r.has(o)?r.set(o,i):s(o,i)}}},O_="!",bA=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],o=e.length,i=l=>{const c=[];let u=0,d=0,h;for(let x=0;x<l.length;x++){let b=l[x];if(u===0){if(b===s&&(n||l.slice(x,x+o)===e)){c.push(l.slice(d,x)),d=x+o;continue}if(b==="/"){h=x;continue}}b==="["?u++:b==="]"&&u--}const m=c.length===0?l:l.substring(d),p=m.startsWith(O_),y=p?m.substring(1):m,g=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:y,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:i}):i},_A=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},jA=t=>({cache:wA(t.cacheSize),parseClassName:bA(t),...pA(t)}),SA=/\s+/,NA=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,o=[],i=t.trim().split(SA);let l="";for(let c=i.length-1;c>=0;c-=1){const u=i[c],{modifiers:d,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:p}=r(u);let y=!!p,g=n(y?m.substring(0,p):m);if(!g){if(!y){l=u+(l.length>0?" "+l:l);continue}if(g=n(m),!g){l=u+(l.length>0?" "+l:l);continue}y=!1}const x=_A(d).join(":"),b=h?x+O_:x,v=b+g;if(o.includes(v))continue;o.push(v);const w=s(g,y);for(let _=0;_<w.length;++_){const j=w[_];o.push(b+j)}l=u+(l.length>0?" "+l:l)}return l};function kA(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=A_(e))&&(n&&(n+=" "),n+=r);return n}const A_=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=A_(t[n]))&&(r&&(r+=" "),r+=e);return r};function CA(t,...e){let r,n,s,o=i;function i(c){const u=e.reduce((d,h)=>h(d),t());return r=jA(u),n=r.cache.get,s=r.cache.set,o=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=NA(c,r);return s(c,d),d}return function(){return o(kA.apply(null,arguments))}}const Le=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},I_=/^\[(?:([a-z-]+):)?(.+)\]$/i,EA=/^\d+\/\d+$/,PA=new Set(["px","full","screen"]),TA=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,RA=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,OA=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,AA=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,IA=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ln=t=>oa(t)||PA.has(t)||EA.test(t),Rn=t=>Ka(t,"length",zA),oa=t=>!!t&&!Number.isNaN(Number(t)),ch=t=>Ka(t,"number",oa),ii=t=>!!t&&Number.isInteger(Number(t)),DA=t=>t.endsWith("%")&&oa(t.slice(0,-1)),xe=t=>I_.test(t),On=t=>TA.test(t),LA=new Set(["length","size","percentage"]),MA=t=>Ka(t,LA,D_),$A=t=>Ka(t,"position",D_),FA=new Set(["image","url"]),UA=t=>Ka(t,FA,WA),BA=t=>Ka(t,"",VA),li=()=>!0,Ka=(t,e,r)=>{const n=I_.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},zA=t=>RA.test(t)&&!OA.test(t),D_=()=>!1,VA=t=>AA.test(t),WA=t=>IA.test(t),HA=()=>{const t=Le("colors"),e=Le("spacing"),r=Le("blur"),n=Le("brightness"),s=Le("borderColor"),o=Le("borderRadius"),i=Le("borderSpacing"),l=Le("borderWidth"),c=Le("contrast"),u=Le("grayscale"),d=Le("hueRotate"),h=Le("invert"),m=Le("gap"),p=Le("gradientColorStops"),y=Le("gradientColorStopPositions"),g=Le("inset"),x=Le("margin"),b=Le("opacity"),v=Le("padding"),w=Le("saturate"),_=Le("scale"),j=Le("sepia"),k=Le("skew"),C=Le("space"),P=Le("translate"),N=()=>["auto","contain","none"],E=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto",xe,e],T=()=>[xe,e],W=()=>["",ln,Rn],O=()=>["auto",oa,xe],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],I=()=>["solid","dashed","dotted","double","none"],U=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",xe],S=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>[oa,xe];return{cacheSize:500,separator:":",theme:{colors:[li],spacing:[ln,Rn],blur:["none","",On,xe],brightness:M(),borderColor:[t],borderRadius:["none","","full",On,xe],borderSpacing:T(),borderWidth:W(),contrast:M(),grayscale:$(),hueRotate:M(),invert:$(),gap:T(),gradientColorStops:[t],gradientColorStopPositions:[DA,Rn],inset:L(),margin:L(),opacity:M(),padding:T(),saturate:M(),scale:M(),sepia:$(),skew:M(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",xe]}],container:["container"],columns:[{columns:[On]}],"break-after":[{"break-after":S()}],"break-before":[{"break-before":S()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),xe]}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ii,xe]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",xe]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",ii,xe]}],"grid-cols":[{"grid-cols":[li]}],"col-start-end":[{col:["auto",{span:["full",ii,xe]},xe]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[li]}],"row-start-end":[{row:["auto",{span:[ii,xe]},xe]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",xe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",xe]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",xe,e]}],"min-w":[{"min-w":[xe,e,"min","max","fit"]}],"max-w":[{"max-w":[xe,e,"none","full","min","max","fit","prose",{screen:[On]},On]}],h:[{h:[xe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[xe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[xe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[xe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",On,Rn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ch]}],"font-family":[{font:[li]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",xe]}],"line-clamp":[{"line-clamp":["none",oa,ch]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ln,xe]}],"list-image":[{"list-image":["none",xe]}],"list-style-type":[{list:["none","disc","decimal",xe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...I(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ln,Rn]}],"underline-offset":[{"underline-offset":["auto",ln,xe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),$A]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",MA]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},UA]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...I(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:I()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...I()]}],"outline-offset":[{"outline-offset":[ln,xe]}],"outline-w":[{outline:[ln,Rn]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:W()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[ln,Rn]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",On,BA]}],"shadow-color":[{shadow:[li]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...U(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":U()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",On,xe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",xe]}],duration:[{duration:M()}],ease:[{ease:["linear","in","out","in-out",xe]}],delay:[{delay:M()}],animate:[{animate:["none","spin","ping","pulse","bounce",xe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[ii,xe]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",xe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ln,Rn,ch]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},qA=CA(HA);function z(...t){return qA(T_(t))}const Np=jl("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),K=f.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...s},o)=>{const i=n?cA:"button";return a.jsx(i,{className:z(Np({variant:e,size:r,className:t})),ref:o,...s})});K.displayName="Button";const Ne=f.forwardRef(({className:t,type:e,...r},n)=>a.jsx("input",{type:e,className:z("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));Ne.displayName="Input";var KA=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ie=KA.reduce((t,e)=>{const r=no(`Primitive.${e}`),n=f.forwardRef((s,o)=>{const{asChild:i,...l}=s,c=i?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function L_(t,e){t&&za.flushSync(()=>t.dispatchEvent(e))}var GA="Label",M_=f.forwardRef((t,e)=>a.jsx(ie.label,{...t,ref:e,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));M_.displayName=GA;var $_=M_;const QA=jl("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Te=f.forwardRef(({className:t,...e},r)=>a.jsx($_,{ref:r,className:z(QA(),t),...e}));Te.displayName=$_.displayName;const YA=jl("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),nl=f.forwardRef(({className:t,variant:e,...r},n)=>a.jsx("div",{ref:n,role:"alert",className:z(YA({variant:e}),t),...r}));nl.displayName="Alert";const JA=f.forwardRef(({className:t,...e},r)=>a.jsx("h5",{ref:r,className:z("mb-1 font-medium leading-none tracking-tight",t),...e}));JA.displayName="AlertTitle";const sl=f.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:z("text-sm [&_p]:leading-relaxed",t),...e}));sl.displayName="AlertDescription";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),F_=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=f.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:i,...l},c)=>f.createElement("svg",{ref:c,...ZA,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:F_("lucide",s),...l},[...i.map(([u,d])=>f.createElement(u,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=(t,e)=>{const r=f.forwardRef(({className:n,...s},o)=>f.createElement(eI,{ref:o,iconNode:e,className:F_(`lucide-${XA(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=se("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=se("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=se("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=se("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=se("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=se("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=se("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=se("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=se("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=se("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=se("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=se("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=se("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=se("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=se("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=se("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=se("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=se("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=se("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=se("Kanban",[["path",{d:"M6 5v11",key:"mdvv1e"}],["path",{d:"M12 5v6",key:"14ar3b"}],["path",{d:"M18 5v14",key:"7ji314"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=se("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=se("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=se("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=se("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=se("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=se("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=se("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=se("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=se("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=se("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=se("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=se("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=se("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=se("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=se("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=se("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _I=se("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=se("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=se("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=se("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=se("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=se("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=se("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),PI=()=>{const{t}=it(),[e,r]=f.useState(""),[n,s]=f.useState(""),[o,i]=f.useState(!1),[l,c]=f.useState(""),[u,d]=f.useState(!1);f.useState(!1);const{signIn:h,signInWithGoogle:m}=ht(),p=Ur(),y=async g=>{g.preventDefault(),c(""),d(!0);try{const x=await h(e,n);x&&(console.log("[LoginForm] Sign in successful, user role:",x.role),x.role==="client"?p("/client-portal"):x.role==="employee"||x.role==="team_leader"?window.location.href="/#/employee_dashboard":x.role==="partner"?window.location.href="/#/partner-dashboard":x.role==="partner_employee"?window.location.href="/#/partner-employee-dashboard":window.location.href="/#/dashboard")}catch(x){console.error("[LoginForm] Sign in error:",x),c(x.message||t("auth.failedToSignIn")),d(!1)}};return a.jsxs("div",{className:"w-full max-w-md mx-auto space-y-6 px-4 sm:px-0",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:t("auth.signIn")}),a.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:t("auth.enterCredentials")})]}),a.jsxs("form",{onSubmit:y,className:"space-y-5",children:[l&&a.jsx(nl,{variant:"destructive",children:a.jsx(sl,{className:"text-sm",children:l})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"email",className:"text-sm font-medium",children:t("auth.email")}),a.jsx(Ne,{id:"email",type:"email",value:e,onChange:g=>r(g.target.value),placeholder:"you@middar.com",required:!0,className:"h-11 text-base"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"password",className:"text-sm font-medium",children:t("auth.password")}),a.jsxs("div",{className:"relative",children:[a.jsx(Ne,{id:"password",type:o?"text":"password",value:n,onChange:g=>s(g.target.value),placeholder:"",required:!0,className:"h-11 text-base pe-10"}),a.jsx(K,{type:"button",variant:"ghost",size:"sm",className:"absolute end-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!o),"aria-label":o?"Hide password":"Show password",children:o?a.jsx(hI,{className:"h-4 w-4 text-muted-foreground"}):a.jsx(fI,{className:"h-4 w-4 text-muted-foreground"})})]})]}),a.jsx(K,{type:"submit",className:"w-full h-11 text-base font-medium shadow-lg hover:shadow-xl transition-all duration-200",disabled:u,children:u?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-current"}),t("auth.signingIn")]}):t("auth.signInButton")})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:t("auth.dontHaveAccount")}),a.jsx(K,{variant:"link",className:"p-0 h-auto text-sm font-medium hover:text-primary transition-colors",onClick:()=>p("/signup"),children:t("auth.signUp")})]})]})},TI=()=>{const[t,e]=f.useState(!1);ht();const r=Ur(),{t:n}=it();return a.jsxs("div",{className:"w-full max-w-md space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-3xl font-bold",children:n("auth.createAccount")}),a.jsx("p",{className:"text-muted-foreground mt-2",children:n("auth.signUpToGetStarted")})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"text-center text-sm text-muted-foreground",children:n("auth.chooseAccountTypeSignUp")}),t&&a.jsx("div",{className:"text-center text-sm text-muted-foreground",children:n("auth.redirectingToGoogle")})]}),a.jsxs("div",{className:"text-center text-sm",children:[a.jsxs("span",{className:"text-muted-foreground",children:[n("auth.alreadyHaveAccount")," "]}),a.jsx(K,{variant:"link",className:"p-0",onClick:()=>r("/login"),children:n("auth.signIn")})]})]})},RI=[{labelKey:"navigation.clientPortal",path:"/client-portal",roles:["client"],icon:mI},{labelKey:"navigation.partnerDashboard",path:"/partner-dashboard",roles:["partner"],icon:aI},{labelKey:"navigation.dashboard",path:"/dashboard",roles:["admin","manager"],icon:Vx},{labelKey:"navigation.empDashboard",path:"/employee_dashboard",roles:["employee","team_leader"],icon:Vx},{labelKey:"navigation.leads",path:"/leads",roles:["admin","manager","employee","team_leader"],icon:nn},{labelKey:"navigation.projects",path:"/projects",roles:["admin","manager","employee","team_leader"],icon:qu},{labelKey:"navigation.tasks",path:"/tasks",roles:["admin","manager","employee","team_leader"],icon:K_},{labelKey:"navigation.tickets",path:"/tickets",roles:["admin","manager","employee","team_leader","client"],icon:bI},{labelKey:"navigation.teams",path:"/teams",roles:["admin","manager","employee","team_leader"],icon:q_},{labelKey:"navigation.chats",path:"/chats",roles:["admin","manager","employee","team_leader","client"],icon:Tp},{labelKey:"navigation.clients",path:"/clients",roles:["admin","manager"],icon:Ra},{labelKey:"navigation.users",path:"/users",roles:["admin","manager"],icon:SI}];function Wx({onNavigate:t}={}){var o,i;const e=xs(),{user:r}=ht(),{t:n}=it(),s=RI.filter(l=>r&&l.roles.includes(r.role));return a.jsxs("div",{className:"h-full w-full bg-sidebar border-r border-sidebar-border flex flex-col",children:[a.jsx("div",{className:"p-4 sm:p-6",children:a.jsxs("div",{className:"flex items-center gap-2 mb-6 sm:mb-8 px-2",children:[a.jsx("img",{src:"/favicon.ico",alt:"Logo",className:"h-8 w-8 rounded-lg"}),a.jsx("h1",{className:"text-xl font-bold text-sidebar-foreground tracking-tight",children:n("landing.brandName")})]})}),a.jsx("div",{className:"flex-1 px-4 sm:px-6",children:a.jsx("nav",{className:"space-y-1",children:s.map(l=>{const c=e.pathname===l.path,u=l.icon;return a.jsxs(If,{to:l.path,onClick:t,className:z("flex items-center gap-3 px-3 py-2.5 rounded-md text-sm font-medium transition-all duration-200 group",c?"bg-primary text-primary-foreground shadow-sm":"text-sidebar-foreground/70 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground"),children:[a.jsx(u,{className:z("h-4 w-4",c?"text-primary-foreground":"text-sidebar-foreground/50 group-hover:text-sidebar-accent-foreground")}),a.jsx("span",{children:n(l.labelKey)})]},l.path+l.labelKey)})})}),a.jsx("div",{className:"p-4 sm:p-6 border-t border-sidebar-border/50",children:a.jsxs("div",{className:"flex items-center gap-3 px-2 py-2 rounded-lg bg-sidebar-accent/50",children:[a.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/20 flex items-center justify-center text-primary font-bold text-sm",children:(o=r==null?void 0:r.email)==null?void 0:o.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-sidebar-foreground truncate",children:r==null?void 0:r.email}),a.jsx("p",{className:"text-xs text-sidebar-foreground/50 capitalize",children:(i=r==null?void 0:r.role)==null?void 0:i.replace("_"," ")})]})]})})]})}function OI(){const e=xs().pathname.split("/").filter(r=>r);return e.length===0?null:a.jsxs("nav",{className:"flex items-center text-sm text-muted-foreground","aria-label":"Breadcrumb",children:[a.jsx(If,{to:"/",className:"hover:text-foreground transition-colors",children:"Home"}),e.map((r,n)=>{const s=`/${e.slice(0,n+1).join("/")}`,o=n===e.length-1,i=r.split("-").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" ");return a.jsxs("div",{className:"flex items-center",children:[a.jsx(B_,{className:"h-4 w-4 mx-2 text-muted-foreground"}),o?a.jsx("span",{className:"text-foreground font-medium",children:i}):a.jsx(If,{to:s,className:"hover:text-foreground transition-colors",children:i})]},r)})]})}function Yf(t,[e,r]){return Math.min(r,Math.max(e,t))}function X(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t==null||t(s),r===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function AI(t,e){const r=f.createContext(e),n=o=>{const{children:i,...l}=o,c=f.useMemo(()=>l,Object.values(l));return a.jsx(r.Provider,{value:c,children:i})};n.displayName=t+"Provider";function s(o){const i=f.useContext(r);if(i)return i;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[n,s]}function ar(t,e=[]){let r=[];function n(o,i){const l=f.createContext(i),c=r.length;r=[...r,i];const u=h=>{var b;const{scope:m,children:p,...y}=h,g=((b=m==null?void 0:m[t])==null?void 0:b[c])||l,x=f.useMemo(()=>y,Object.values(y));return a.jsx(g.Provider,{value:x,children:p})};u.displayName=o+"Provider";function d(h,m){var g;const p=((g=m==null?void 0:m[t])==null?void 0:g[c])||l,y=f.useContext(p);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[u,d]}const s=()=>{const o=r.map(i=>f.createContext(i));return function(l){const c=(l==null?void 0:l[t])||o;return f.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,II(s,...e)]}function II(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(o)[`__scope${u}`];return{...l,...h}},{});return f.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return r.scopeName=e.scopeName,r}function Ap(t){const e=t+"CollectionProvider",[r,n]=ar(e),[s,o]=r(e,{collectionRef:{current:null},itemMap:new Map}),i=g=>{const{scope:x,children:b}=g,v=An.useRef(null),w=An.useRef(new Map).current;return a.jsx(s,{scope:x,itemMap:w,collectionRef:v,children:b})};i.displayName=e;const l=t+"CollectionSlot",c=no(l),u=An.forwardRef((g,x)=>{const{scope:b,children:v}=g,w=o(l,b),_=be(x,w.collectionRef);return a.jsx(c,{ref:_,children:v})});u.displayName=l;const d=t+"CollectionItemSlot",h="data-radix-collection-item",m=no(d),p=An.forwardRef((g,x)=>{const{scope:b,children:v,...w}=g,_=An.useRef(null),j=be(x,_),k=o(d,b);return An.useEffect(()=>(k.itemMap.set(_,{ref:_,...w}),()=>void k.itemMap.delete(_))),a.jsx(m,{[h]:"",ref:j,children:v})});p.displayName=d;function y(g){const x=o(t+"CollectionConsumer",g);return An.useCallback(()=>{const v=x.collectionRef.current;if(!v)return[];const w=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(x.itemMap.values()).sort((k,C)=>w.indexOf(k.ref.current)-w.indexOf(C.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:i,Slot:u,ItemSlot:p},y,n]}var DI=f.createContext(void 0);function Sl(t){const e=f.useContext(DI);return t||e||"ltr"}function mt(t){const e=f.useRef(t);return f.useEffect(()=>{e.current=t}),f.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function LI(t,e=globalThis==null?void 0:globalThis.document){const r=mt(t);f.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var MI="DismissableLayer",Jf="dismissableLayer.update",$I="dismissableLayer.pointerDownOutside",FI="dismissableLayer.focusOutside",Hx,Q_=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ku=f.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...c}=t,u=f.useContext(Q_),[d,h]=f.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=f.useState({}),y=be(e,C=>h(C)),g=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=g.indexOf(x),v=d?g.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,_=v>=b,j=zI(C=>{const P=C.target,N=[...u.branches].some(E=>E.contains(P));!_||N||(s==null||s(C),i==null||i(C),C.defaultPrevented||l==null||l())},m),k=VI(C=>{const P=C.target;[...u.branches].some(E=>E.contains(P))||(o==null||o(C),i==null||i(C),C.defaultPrevented||l==null||l())},m);return LI(C=>{v===u.layers.size-1&&(n==null||n(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},m),f.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Hx=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),qx(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Hx)}},[d,m,r,u]),f.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),qx())},[d,u]),f.useEffect(()=>{const C=()=>p({});return document.addEventListener(Jf,C),()=>document.removeEventListener(Jf,C)},[]),a.jsx(ie.div,{...c,ref:y,style:{pointerEvents:w?_?"auto":"none":void 0,...t.style},onFocusCapture:X(t.onFocusCapture,k.onFocusCapture),onBlurCapture:X(t.onBlurCapture,k.onBlurCapture),onPointerDownCapture:X(t.onPointerDownCapture,j.onPointerDownCapture)})});Ku.displayName=MI;var UI="DismissableLayerBranch",BI=f.forwardRef((t,e)=>{const r=f.useContext(Q_),n=f.useRef(null),s=be(e,n);return f.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),a.jsx(ie.div,{...t,ref:s})});BI.displayName=UI;function zI(t,e=globalThis==null?void 0:globalThis.document){const r=mt(t),n=f.useRef(!1),s=f.useRef(()=>{});return f.useEffect(()=>{const o=l=>{if(l.target&&!n.current){let c=function(){Y_($I,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);n.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function VI(t,e=globalThis==null?void 0:globalThis.document){const r=mt(t),n=f.useRef(!1);return f.useEffect(()=>{const s=o=>{o.target&&!n.current&&Y_(FI,r,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function qx(){const t=new CustomEvent(Jf);document.dispatchEvent(t)}function Y_(t,e,r,{discrete:n}){const s=r.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?L_(s,o):s.dispatchEvent(o)}var uh=0;function Ip(){f.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Kx()),document.body.insertAdjacentElement("beforeend",t[1]??Kx()),uh++,()=>{uh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),uh--}},[])}function Kx(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var dh="focusScope.autoFocusOnMount",hh="focusScope.autoFocusOnUnmount",Gx={bubbles:!1,cancelable:!0},WI="FocusScope",Gu=f.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...i}=t,[l,c]=f.useState(null),u=mt(s),d=mt(o),h=f.useRef(null),m=be(e,g=>c(g)),p=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(n){let g=function(w){if(p.paused||!l)return;const _=w.target;l.contains(_)?h.current=_:Dn(h.current,{select:!0})},x=function(w){if(p.paused||!l)return;const _=w.relatedTarget;_!==null&&(l.contains(_)||Dn(h.current,{select:!0}))},b=function(w){if(document.activeElement===document.body)for(const j of w)j.removedNodes.length>0&&Dn(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",x);const v=new MutationObserver(b);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",x),v.disconnect()}}},[n,l,p.paused]),f.useEffect(()=>{if(l){Yx.add(p);const g=document.activeElement;if(!l.contains(g)){const b=new CustomEvent(dh,Gx);l.addEventListener(dh,u),l.dispatchEvent(b),b.defaultPrevented||(HI(YI(J_(l)),{select:!0}),document.activeElement===g&&Dn(l))}return()=>{l.removeEventListener(dh,u),setTimeout(()=>{const b=new CustomEvent(hh,Gx);l.addEventListener(hh,d),l.dispatchEvent(b),b.defaultPrevented||Dn(g??document.body,{select:!0}),l.removeEventListener(hh,d),Yx.remove(p)},0)}}},[l,u,d,p]);const y=f.useCallback(g=>{if(!r&&!n||p.paused)return;const x=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,b=document.activeElement;if(x&&b){const v=g.currentTarget,[w,_]=qI(v);w&&_?!g.shiftKey&&b===_?(g.preventDefault(),r&&Dn(w,{select:!0})):g.shiftKey&&b===w&&(g.preventDefault(),r&&Dn(_,{select:!0})):b===v&&g.preventDefault()}},[r,n,p.paused]);return a.jsx(ie.div,{tabIndex:-1,...i,ref:m,onKeyDown:y})});Gu.displayName=WI;function HI(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(Dn(n,{select:e}),document.activeElement!==r)return}function qI(t){const e=J_(t),r=Qx(e,t),n=Qx(e.reverse(),t);return[r,n]}function J_(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function Qx(t,e){for(const r of t)if(!KI(r,{upTo:e}))return r}function KI(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function GI(t){return t instanceof HTMLInputElement&&"select"in t}function Dn(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&GI(t)&&e&&t.select()}}var Yx=QI();function QI(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=Jx(t,e),t.unshift(e)},remove(e){var r;t=Jx(t,e),(r=t[0])==null||r.resume()}}}function Jx(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function YI(t){return t.filter(e=>e.tagName!=="A")}var at=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},JI=mm[" useId ".trim().toString()]||(()=>{}),XI=0;function en(t){const[e,r]=f.useState(JI());return at(()=>{r(n=>n??String(XI++))},[t]),e?`radix-${e}`:""}const ZI=["top","right","bottom","left"],ds=Math.min,Jt=Math.max,mu=Math.round,uc=Math.floor,tn=t=>({x:t,y:t}),eD={left:"right",right:"left",bottom:"top",top:"bottom"},tD={start:"end",end:"start"};function Xf(t,e,r){return Jt(t,ds(e,r))}function Sn(t,e){return typeof t=="function"?t(e):t}function Nn(t){return t.split("-")[0]}function Ga(t){return t.split("-")[1]}function Dp(t){return t==="x"?"y":"x"}function Lp(t){return t==="y"?"height":"width"}const rD=new Set(["top","bottom"]);function Yr(t){return rD.has(Nn(t))?"y":"x"}function Mp(t){return Dp(Yr(t))}function nD(t,e,r){r===void 0&&(r=!1);const n=Ga(t),s=Mp(t),o=Lp(s);let i=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(i=pu(i)),[i,pu(i)]}function sD(t){const e=pu(t);return[Zf(t),e,Zf(e)]}function Zf(t){return t.replace(/start|end/g,e=>tD[e])}const Xx=["left","right"],Zx=["right","left"],oD=["top","bottom"],aD=["bottom","top"];function iD(t,e,r){switch(t){case"top":case"bottom":return r?e?Zx:Xx:e?Xx:Zx;case"left":case"right":return e?oD:aD;default:return[]}}function lD(t,e,r,n){const s=Ga(t);let o=iD(Nn(t),r==="start",n);return s&&(o=o.map(i=>i+"-"+s),e&&(o=o.concat(o.map(Zf)))),o}function pu(t){return t.replace(/left|right|bottom|top/g,e=>eD[e])}function cD(t){return{top:0,right:0,bottom:0,left:0,...t}}function X_(t){return typeof t!="number"?cD(t):{top:t,right:t,bottom:t,left:t}}function gu(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function ey(t,e,r){let{reference:n,floating:s}=t;const o=Yr(e),i=Mp(e),l=Lp(i),c=Nn(e),u=o==="y",d=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,m=n[l]/2-s[l]/2;let p;switch(c){case"top":p={x:d,y:n.y-s.height};break;case"bottom":p={x:d,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:h};break;case"left":p={x:n.x-s.width,y:h};break;default:p={x:n.x,y:n.y}}switch(Ga(e)){case"start":p[i]-=m*(r&&u?-1:1);break;case"end":p[i]+=m*(r&&u?-1:1);break}return p}const uD=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:i}=r,l=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(e));let u=await i.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=ey(u,n,c),m=n,p={},y=0;for(let g=0;g<l.length;g++){const{name:x,fn:b}=l[g],{x:v,y:w,data:_,reset:j}=await b({x:d,y:h,initialPlacement:n,placement:m,strategy:s,middlewareData:p,rects:u,platform:i,elements:{reference:t,floating:e}});d=v??d,h=w??h,p={...p,[x]:{...p[x],..._}},j&&y<=50&&(y++,typeof j=="object"&&(j.placement&&(m=j.placement),j.rects&&(u=j.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:s}):j.rects),{x:d,y:h}=ey(u,m,c)),g=-1)}return{x:d,y:h,placement:m,strategy:s,middlewareData:p}};async function al(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:o,rects:i,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:p=0}=Sn(e,t),y=X_(p),x=l[m?h==="floating"?"reference":"floating":h],b=gu(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(x)))==null||r?x:x.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),v=h==="floating"?{x:n,y:s,width:i.floating.width,height:i.floating.height}:i.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),_=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},j=gu(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:w,strategy:c}):v);return{top:(b.top-j.top+y.top)/_.y,bottom:(j.bottom-b.bottom+y.bottom)/_.y,left:(b.left-j.left+y.left)/_.x,right:(j.right-b.right+y.right)/_.x}}const dD=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:o,platform:i,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=Sn(t,e)||{};if(u==null)return{};const h=X_(d),m={x:r,y:n},p=Mp(s),y=Lp(p),g=await i.getDimensions(u),x=p==="y",b=x?"top":"left",v=x?"bottom":"right",w=x?"clientHeight":"clientWidth",_=o.reference[y]+o.reference[p]-m[p]-o.floating[y],j=m[p]-o.reference[p],k=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let C=k?k[w]:0;(!C||!await(i.isElement==null?void 0:i.isElement(k)))&&(C=l.floating[w]||o.floating[y]);const P=_/2-j/2,N=C/2-g[y]/2-1,E=ds(h[b],N),L=ds(h[v],N),T=E,W=C-g[y]-L,O=C/2-g[y]/2+P,H=Xf(T,O,W),I=!c.arrow&&Ga(s)!=null&&O!==H&&o.reference[y]/2-(O<T?E:L)-g[y]/2<0,U=I?O<T?O-T:O-W:0;return{[p]:m[p]+U,data:{[p]:H,centerOffset:O-H-U,...I&&{alignmentOffset:U}},reset:I}}}),hD=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:o,rects:i,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=!0,...x}=Sn(t,e);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const b=Nn(s),v=Yr(l),w=Nn(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=m||(w||!g?[pu(l)]:sD(l)),k=y!=="none";!m&&k&&j.push(...lD(l,g,y,_));const C=[l,...j],P=await al(e,x),N=[];let E=((n=o.flip)==null?void 0:n.overflows)||[];if(d&&N.push(P[b]),h){const O=nD(s,i,_);N.push(P[O[0]],P[O[1]])}if(E=[...E,{placement:s,overflows:N}],!N.every(O=>O<=0)){var L,T;const O=(((L=o.flip)==null?void 0:L.index)||0)+1,H=C[O];if(H&&(!(h==="alignment"?v!==Yr(H):!1)||E.every(D=>D.overflows[0]>0&&Yr(D.placement)===v)))return{data:{index:O,overflows:E},reset:{placement:H}};let I=(T=E.filter(U=>U.overflows[0]<=0).sort((U,D)=>U.overflows[1]-D.overflows[1])[0])==null?void 0:T.placement;if(!I)switch(p){case"bestFit":{var W;const U=(W=E.filter(D=>{if(k){const $=Yr(D.placement);return $===v||$==="y"}return!0}).map(D=>[D.placement,D.overflows.filter($=>$>0).reduce(($,S)=>$+S,0)]).sort((D,$)=>D[1]-$[1])[0])==null?void 0:W[0];U&&(I=U);break}case"initialPlacement":I=l;break}if(s!==I)return{reset:{placement:I}}}return{}}}};function ty(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function ry(t){return ZI.some(e=>t[e]>=0)}const fD=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...s}=Sn(t,e);switch(n){case"referenceHidden":{const o=await al(e,{...s,elementContext:"reference"}),i=ty(o,r.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:ry(i)}}}case"escaped":{const o=await al(e,{...s,altBoundary:!0}),i=ty(o,r.floating);return{data:{escapedOffsets:i,escaped:ry(i)}}}default:return{}}}}},Z_=new Set(["left","top"]);async function mD(t,e){const{placement:r,platform:n,elements:s}=t,o=await(n.isRTL==null?void 0:n.isRTL(s.floating)),i=Nn(r),l=Ga(r),c=Yr(r)==="y",u=Z_.has(i)?-1:1,d=o&&c?-1:1,h=Sn(e,t);let{mainAxis:m,crossAxis:p,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof y=="number"&&(p=l==="end"?y*-1:y),c?{x:p*d,y:m*u}:{x:m*u,y:p*d}}const pD=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:o,placement:i,middlewareData:l}=e,c=await mD(e,t);return i===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:i}}}}},gD=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:x=>{let{x:b,y:v}=x;return{x:b,y:v}}},...c}=Sn(t,e),u={x:r,y:n},d=await al(e,c),h=Yr(Nn(s)),m=Dp(h);let p=u[m],y=u[h];if(o){const x=m==="y"?"top":"left",b=m==="y"?"bottom":"right",v=p+d[x],w=p-d[b];p=Xf(v,p,w)}if(i){const x=h==="y"?"top":"left",b=h==="y"?"bottom":"right",v=y+d[x],w=y-d[b];y=Xf(v,y,w)}const g=l.fn({...e,[m]:p,[h]:y});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[m]:o,[h]:i}}}}}},vD=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:o,middlewareData:i}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Sn(t,e),d={x:r,y:n},h=Yr(s),m=Dp(h);let p=d[m],y=d[h];const g=Sn(l,e),x=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const w=m==="y"?"height":"width",_=o.reference[m]-o.floating[w]+x.mainAxis,j=o.reference[m]+o.reference[w]-x.mainAxis;p<_?p=_:p>j&&(p=j)}if(u){var b,v;const w=m==="y"?"width":"height",_=Z_.has(Nn(s)),j=o.reference[h]-o.floating[w]+(_&&((b=i.offset)==null?void 0:b[h])||0)+(_?0:x.crossAxis),k=o.reference[h]+o.reference[w]+(_?0:((v=i.offset)==null?void 0:v[h])||0)-(_?x.crossAxis:0);y<j?y=j:y>k&&(y=k)}return{[m]:p,[h]:y}}}},xD=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:o,platform:i,elements:l}=e,{apply:c=()=>{},...u}=Sn(t,e),d=await al(e,u),h=Nn(s),m=Ga(s),p=Yr(s)==="y",{width:y,height:g}=o.floating;let x,b;h==="top"||h==="bottom"?(x=h,b=m===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(b=h,x=m==="end"?"top":"bottom");const v=g-d.top-d.bottom,w=y-d.left-d.right,_=ds(g-d[x],v),j=ds(y-d[b],w),k=!e.middlewareData.shift;let C=_,P=j;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(P=w),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(C=v),k&&!m){const E=Jt(d.left,0),L=Jt(d.right,0),T=Jt(d.top,0),W=Jt(d.bottom,0);p?P=y-2*(E!==0||L!==0?E+L:Jt(d.left,d.right)):C=g-2*(T!==0||W!==0?T+W:Jt(d.top,d.bottom))}await c({...e,availableWidth:P,availableHeight:C});const N=await i.getDimensions(l.floating);return y!==N.width||g!==N.height?{reset:{rects:!0}}:{}}}};function Qu(){return typeof window<"u"}function Qa(t){return ej(t)?(t.nodeName||"").toLowerCase():"#document"}function rr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function on(t){var e;return(e=(ej(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function ej(t){return Qu()?t instanceof Node||t instanceof rr(t).Node:!1}function $r(t){return Qu()?t instanceof Element||t instanceof rr(t).Element:!1}function sn(t){return Qu()?t instanceof HTMLElement||t instanceof rr(t).HTMLElement:!1}function ny(t){return!Qu()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof rr(t).ShadowRoot}const yD=new Set(["inline","contents"]);function Nl(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=Fr(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!yD.has(s)}const wD=new Set(["table","td","th"]);function bD(t){return wD.has(Qa(t))}const _D=[":popover-open",":modal"];function Yu(t){return _D.some(e=>{try{return t.matches(e)}catch{return!1}})}const jD=["transform","translate","scale","rotate","perspective"],SD=["transform","translate","scale","rotate","perspective","filter"],ND=["paint","layout","strict","content"];function $p(t){const e=Fp(),r=$r(t)?Fr(t):t;return jD.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||SD.some(n=>(r.willChange||"").includes(n))||ND.some(n=>(r.contain||"").includes(n))}function kD(t){let e=hs(t);for(;sn(e)&&!Ia(e);){if($p(e))return e;if(Yu(e))return null;e=hs(e)}return null}function Fp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const CD=new Set(["html","body","#document"]);function Ia(t){return CD.has(Qa(t))}function Fr(t){return rr(t).getComputedStyle(t)}function Ju(t){return $r(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function hs(t){if(Qa(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ny(t)&&t.host||on(t);return ny(e)?e.host:e}function tj(t){const e=hs(t);return Ia(e)?t.ownerDocument?t.ownerDocument.body:t.body:sn(e)&&Nl(e)?e:tj(e)}function il(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=tj(t),o=s===((n=t.ownerDocument)==null?void 0:n.body),i=rr(s);if(o){const l=em(i);return e.concat(i,i.visualViewport||[],Nl(s)?s:[],l&&r?il(l):[])}return e.concat(s,il(s,[],r))}function em(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function rj(t){const e=Fr(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=sn(t),o=s?t.offsetWidth:r,i=s?t.offsetHeight:n,l=mu(r)!==o||mu(n)!==i;return l&&(r=o,n=i),{width:r,height:n,$:l}}function Up(t){return $r(t)?t:t.contextElement}function aa(t){const e=Up(t);if(!sn(e))return tn(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:o}=rj(e);let i=(o?mu(r.width):r.width)/n,l=(o?mu(r.height):r.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const ED=tn(0);function nj(t){const e=rr(t);return!Fp()||!e.visualViewport?ED:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function PD(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==rr(t)?!1:e}function so(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),o=Up(t);let i=tn(1);e&&(n?$r(n)&&(i=aa(n)):i=aa(t));const l=PD(o,r,n)?nj(o):tn(0);let c=(s.left+l.x)/i.x,u=(s.top+l.y)/i.y,d=s.width/i.x,h=s.height/i.y;if(o){const m=rr(o),p=n&&$r(n)?rr(n):n;let y=m,g=em(y);for(;g&&n&&p!==y;){const x=aa(g),b=g.getBoundingClientRect(),v=Fr(g),w=b.left+(g.clientLeft+parseFloat(v.paddingLeft))*x.x,_=b.top+(g.clientTop+parseFloat(v.paddingTop))*x.y;c*=x.x,u*=x.y,d*=x.x,h*=x.y,c+=w,u+=_,y=rr(g),g=em(y)}}return gu({width:d,height:h,x:c,y:u})}function Bp(t,e){const r=Ju(t).scrollLeft;return e?e.left+r:so(on(t)).left+r}function sj(t,e,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),s=n.left+e.scrollLeft-(r?0:Bp(t,n)),o=n.top+e.scrollTop;return{x:s,y:o}}function TD(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const o=s==="fixed",i=on(n),l=e?Yu(e.floating):!1;if(n===i||l&&o)return r;let c={scrollLeft:0,scrollTop:0},u=tn(1);const d=tn(0),h=sn(n);if((h||!h&&!o)&&((Qa(n)!=="body"||Nl(i))&&(c=Ju(n)),sn(n))){const p=so(n);u=aa(n),d.x=p.x+n.clientLeft,d.y=p.y+n.clientTop}const m=i&&!h&&!o?sj(i,c,!0):tn(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+m.x,y:r.y*u.y-c.scrollTop*u.y+d.y+m.y}}function RD(t){return Array.from(t.getClientRects())}function OD(t){const e=on(t),r=Ju(t),n=t.ownerDocument.body,s=Jt(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),o=Jt(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+Bp(t);const l=-r.scrollTop;return Fr(n).direction==="rtl"&&(i+=Jt(e.clientWidth,n.clientWidth)-s),{width:s,height:o,x:i,y:l}}function AD(t,e){const r=rr(t),n=on(t),s=r.visualViewport;let o=n.clientWidth,i=n.clientHeight,l=0,c=0;if(s){o=s.width,i=s.height;const u=Fp();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:o,height:i,x:l,y:c}}const ID=new Set(["absolute","fixed"]);function DD(t,e){const r=so(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,o=sn(t)?aa(t):tn(1),i=t.clientWidth*o.x,l=t.clientHeight*o.y,c=s*o.x,u=n*o.y;return{width:i,height:l,x:c,y:u}}function sy(t,e,r){let n;if(e==="viewport")n=AD(t,r);else if(e==="document")n=OD(on(t));else if($r(e))n=DD(e,r);else{const s=nj(t);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return gu(n)}function oj(t,e){const r=hs(t);return r===e||!$r(r)||Ia(r)?!1:Fr(r).position==="fixed"||oj(r,e)}function LD(t,e){const r=e.get(t);if(r)return r;let n=il(t,[],!1).filter(l=>$r(l)&&Qa(l)!=="body"),s=null;const o=Fr(t).position==="fixed";let i=o?hs(t):t;for(;$r(i)&&!Ia(i);){const l=Fr(i),c=$p(i);!c&&l.position==="fixed"&&(s=null),(o?!c&&!s:!c&&l.position==="static"&&!!s&&ID.has(s.position)||Nl(i)&&!c&&oj(t,i))?n=n.filter(d=>d!==i):s=l,i=hs(i)}return e.set(t,n),n}function MD(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const i=[...r==="clippingAncestors"?Yu(e)?[]:LD(e,this._c):[].concat(r),n],l=i[0],c=i.reduce((u,d)=>{const h=sy(e,d,s);return u.top=Jt(h.top,u.top),u.right=ds(h.right,u.right),u.bottom=ds(h.bottom,u.bottom),u.left=Jt(h.left,u.left),u},sy(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function $D(t){const{width:e,height:r}=rj(t);return{width:e,height:r}}function FD(t,e,r){const n=sn(e),s=on(e),o=r==="fixed",i=so(t,!0,o,e);let l={scrollLeft:0,scrollTop:0};const c=tn(0);function u(){c.x=Bp(s)}if(n||!n&&!o)if((Qa(e)!=="body"||Nl(s))&&(l=Ju(e)),n){const p=so(e,!0,o,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&u();o&&!n&&s&&u();const d=s&&!n&&!o?sj(s,l):tn(0),h=i.left+l.scrollLeft-c.x-d.x,m=i.top+l.scrollTop-c.y-d.y;return{x:h,y:m,width:i.width,height:i.height}}function fh(t){return Fr(t).position==="static"}function oy(t,e){if(!sn(t)||Fr(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return on(t)===r&&(r=r.ownerDocument.body),r}function aj(t,e){const r=rr(t);if(Yu(t))return r;if(!sn(t)){let s=hs(t);for(;s&&!Ia(s);){if($r(s)&&!fh(s))return s;s=hs(s)}return r}let n=oy(t,e);for(;n&&bD(n)&&fh(n);)n=oy(n,e);return n&&Ia(n)&&fh(n)&&!$p(n)?r:n||kD(t)||r}const UD=async function(t){const e=this.getOffsetParent||aj,r=this.getDimensions,n=await r(t.floating);return{reference:FD(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function BD(t){return Fr(t).direction==="rtl"}const zD={convertOffsetParentRelativeRectToViewportRelativeRect:TD,getDocumentElement:on,getClippingRect:MD,getOffsetParent:aj,getElementRects:UD,getClientRects:RD,getDimensions:$D,getScale:aa,isElement:$r,isRTL:BD};function ij(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function VD(t,e){let r=null,n;const s=on(t);function o(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const u=t.getBoundingClientRect(),{left:d,top:h,width:m,height:p}=u;if(l||e(),!m||!p)return;const y=uc(h),g=uc(s.clientWidth-(d+m)),x=uc(s.clientHeight-(h+p)),b=uc(d),w={rootMargin:-y+"px "+-g+"px "+-x+"px "+-b+"px",threshold:Jt(0,ds(1,c))||1};let _=!0;function j(k){const C=k[0].intersectionRatio;if(C!==c){if(!_)return i();C?i(!1,C):n=setTimeout(()=>{i(!1,1e-7)},1e3)}C===1&&!ij(u,t.getBoundingClientRect())&&i(),_=!1}try{r=new IntersectionObserver(j,{...w,root:s.ownerDocument})}catch{r=new IntersectionObserver(j,w)}r.observe(t)}return i(!0),o}function WD(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=Up(t),d=s||o?[...u?il(u):[],...il(e)]:[];d.forEach(b=>{s&&b.addEventListener("scroll",r,{passive:!0}),o&&b.addEventListener("resize",r)});const h=u&&l?VD(u,r):null;let m=-1,p=null;i&&(p=new ResizeObserver(b=>{let[v]=b;v&&v.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(e)})),r()}),u&&!c&&p.observe(u),p.observe(e));let y,g=c?so(t):null;c&&x();function x(){const b=so(t);g&&!ij(g,b)&&r(),g=b,y=requestAnimationFrame(x)}return r(),()=>{var b;d.forEach(v=>{s&&v.removeEventListener("scroll",r),o&&v.removeEventListener("resize",r)}),h==null||h(),(b=p)==null||b.disconnect(),p=null,c&&cancelAnimationFrame(y)}}const HD=pD,qD=gD,KD=hD,GD=xD,QD=fD,ay=dD,YD=vD,JD=(t,e,r)=>{const n=new Map,s={platform:zD,...r},o={...s.platform,_c:n};return uD(t,e,{...s,platform:o})};var XD=typeof document<"u",ZD=function(){},Pc=XD?f.useLayoutEffect:ZD;function vu(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!vu(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const o=s[n];if(!(o==="_owner"&&t.$$typeof)&&!vu(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function lj(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function iy(t,e){const r=lj(t);return Math.round(e*r)/r}function mh(t){const e=f.useRef(t);return Pc(()=>{e.current=t}),e}function eL(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,h]=f.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[m,p]=f.useState(n);vu(m,n)||p(n);const[y,g]=f.useState(null),[x,b]=f.useState(null),v=f.useCallback(D=>{D!==k.current&&(k.current=D,g(D))},[]),w=f.useCallback(D=>{D!==C.current&&(C.current=D,b(D))},[]),_=o||y,j=i||x,k=f.useRef(null),C=f.useRef(null),P=f.useRef(d),N=c!=null,E=mh(c),L=mh(s),T=mh(u),W=f.useCallback(()=>{if(!k.current||!C.current)return;const D={placement:e,strategy:r,middleware:m};L.current&&(D.platform=L.current),JD(k.current,C.current,D).then($=>{const S={...$,isPositioned:T.current!==!1};O.current&&!vu(P.current,S)&&(P.current=S,za.flushSync(()=>{h(S)}))})},[m,e,r,L,T]);Pc(()=>{u===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,h(D=>({...D,isPositioned:!1})))},[u]);const O=f.useRef(!1);Pc(()=>(O.current=!0,()=>{O.current=!1}),[]),Pc(()=>{if(_&&(k.current=_),j&&(C.current=j),_&&j){if(E.current)return E.current(_,j,W);W()}},[_,j,W,E,N]);const H=f.useMemo(()=>({reference:k,floating:C,setReference:v,setFloating:w}),[v,w]),I=f.useMemo(()=>({reference:_,floating:j}),[_,j]),U=f.useMemo(()=>{const D={position:r,left:0,top:0};if(!I.floating)return D;const $=iy(I.floating,d.x),S=iy(I.floating,d.y);return l?{...D,transform:"translate("+$+"px, "+S+"px)",...lj(I.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:$,top:S}},[r,l,I.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:W,refs:H,elements:I,floatingStyles:U}),[d,W,H,I,U])}const tL=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:s}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?ay({element:n.current,padding:s}).fn(r):{}:n?ay({element:n,padding:s}).fn(r):{}}}},rL=(t,e)=>({...HD(t),options:[t,e]}),nL=(t,e)=>({...qD(t),options:[t,e]}),sL=(t,e)=>({...YD(t),options:[t,e]}),oL=(t,e)=>({...KD(t),options:[t,e]}),aL=(t,e)=>({...GD(t),options:[t,e]}),iL=(t,e)=>({...QD(t),options:[t,e]}),lL=(t,e)=>({...tL(t),options:[t,e]});var cL="Arrow",cj=f.forwardRef((t,e)=>{const{children:r,width:n=10,height:s=5,...o}=t;return a.jsx(ie.svg,{...o,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});cj.displayName=cL;var uL=cj;function uj(t){const[e,r]=f.useState(void 0);return at(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let i,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,l=u.blockSize}else i=t.offsetWidth,l=t.offsetHeight;r({width:i,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var zp="Popper",[dj,Xu]=ar(zp),[dL,hj]=dj(zp),fj=t=>{const{__scopePopper:e,children:r}=t,[n,s]=f.useState(null);return a.jsx(dL,{scope:e,anchor:n,onAnchorChange:s,children:r})};fj.displayName=zp;var mj="PopperAnchor",pj=f.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...s}=t,o=hj(mj,r),i=f.useRef(null),l=be(e,i);return f.useEffect(()=>{o.onAnchorChange((n==null?void 0:n.current)||i.current)}),n?null:a.jsx(ie.div,{...s,ref:l})});pj.displayName=mj;var Vp="PopperContent",[hL,fL]=dj(Vp),gj=f.forwardRef((t,e)=>{var Z,F,G,ne,fe,ge;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:y,...g}=t,x=hj(Vp,r),[b,v]=f.useState(null),w=be(e,we=>v(we)),[_,j]=f.useState(null),k=uj(_),C=(k==null?void 0:k.width)??0,P=(k==null?void 0:k.height)??0,N=n+(o!=="center"?"-"+o:""),E=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},L=Array.isArray(u)?u:[u],T=L.length>0,W={padding:E,boundary:L.filter(pL),altBoundary:T},{refs:O,floatingStyles:H,placement:I,isPositioned:U,middlewareData:D}=eL({strategy:"fixed",placement:N,whileElementsMounted:(...we)=>WD(...we,{animationFrame:p==="always"}),elements:{reference:x.anchor},middleware:[rL({mainAxis:s+P,alignmentAxis:i}),c&&nL({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?sL():void 0,...W}),c&&oL({...W}),aL({...W,apply:({elements:we,rects:Qe,availableWidth:V,availableHeight:A})=>{const{width:B,height:ae}=Qe.reference,Ee=we.floating.style;Ee.setProperty("--radix-popper-available-width",`${V}px`),Ee.setProperty("--radix-popper-available-height",`${A}px`),Ee.setProperty("--radix-popper-anchor-width",`${B}px`),Ee.setProperty("--radix-popper-anchor-height",`${ae}px`)}}),_&&lL({element:_,padding:l}),gL({arrowWidth:C,arrowHeight:P}),m&&iL({strategy:"referenceHidden",...W})]}),[$,S]=yj(I),M=mt(y);at(()=>{U&&(M==null||M())},[U,M]);const Y=(Z=D.arrow)==null?void 0:Z.x,ye=(F=D.arrow)==null?void 0:F.y,pe=((G=D.arrow)==null?void 0:G.centerOffset)!==0,[ve,ke]=f.useState();return at(()=>{b&&ke(window.getComputedStyle(b).zIndex)},[b]),a.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:U?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ve,"--radix-popper-transform-origin":[(ne=D.transformOrigin)==null?void 0:ne.x,(fe=D.transformOrigin)==null?void 0:fe.y].join(" "),...((ge=D.hide)==null?void 0:ge.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(hL,{scope:r,placedSide:$,onArrowChange:j,arrowX:Y,arrowY:ye,shouldHideArrow:pe,children:a.jsx(ie.div,{"data-side":$,"data-align":S,...g,ref:w,style:{...g.style,animation:U?void 0:"none"}})})})});gj.displayName=Vp;var vj="PopperArrow",mL={top:"bottom",right:"left",bottom:"top",left:"right"},xj=f.forwardRef(function(e,r){const{__scopePopper:n,...s}=e,o=fL(vj,n),i=mL[o.placedSide];return a.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:a.jsx(uL,{...s,ref:r,style:{...s.style,display:"block"}})})});xj.displayName=vj;function pL(t){return t!==null}var gL=t=>({name:"transformOrigin",options:t,fn(e){var x,b,v;const{placement:r,rects:n,middlewareData:s}=e,i=((x=s.arrow)==null?void 0:x.centerOffset)!==0,l=i?0:t.arrowWidth,c=i?0:t.arrowHeight,[u,d]=yj(r),h={start:"0%",center:"50%",end:"100%"}[d],m=(((b=s.arrow)==null?void 0:b.x)??0)+l/2,p=(((v=s.arrow)==null?void 0:v.y)??0)+c/2;let y="",g="";return u==="bottom"?(y=i?h:`${m}px`,g=`${-c}px`):u==="top"?(y=i?h:`${m}px`,g=`${n.floating.height+c}px`):u==="right"?(y=`${-c}px`,g=i?h:`${p}px`):u==="left"&&(y=`${n.floating.width+c}px`,g=i?h:`${p}px`),{data:{x:y,y:g}}}});function yj(t){const[e,r="center"]=t.split("-");return[e,r]}var wj=fj,bj=pj,_j=gj,jj=xj,vL="Portal",Zu=f.forwardRef((t,e)=>{var l;const{container:r,...n}=t,[s,o]=f.useState(!1);at(()=>o(!0),[]);const i=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?CE.createPortal(a.jsx(ie.div,{...n,ref:e}),i):null});Zu.displayName=vL;var xL=mm[" useInsertionEffect ".trim().toString()]||at;function oo({prop:t,defaultProp:e,onChange:r=()=>{},caller:n}){const[s,o,i]=yL({defaultProp:e,onChange:r}),l=t!==void 0,c=l?t:s;{const d=f.useRef(t!==void 0);f.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=f.useCallback(d=>{var h;if(l){const m=wL(d)?d(t):d;m!==t&&((h=i.current)==null||h.call(i,m))}else o(d)},[l,t,o,i]);return[c,u]}function yL({defaultProp:t,onChange:e}){const[r,n]=f.useState(t),s=f.useRef(r),o=f.useRef(e);return xL(()=>{o.current=e},[e]),f.useEffect(()=>{var i;s.current!==r&&((i=o.current)==null||i.call(o,r),s.current=r)},[r,s]),[r,n,o]}function wL(t){return typeof t=="function"}function Sj(t){const e=f.useRef({value:t,previous:t});return f.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Nj=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),bL="VisuallyHidden",_L=f.forwardRef((t,e)=>a.jsx(ie.span,{...t,ref:e,style:{...Nj,...t.style}}));_L.displayName=bL;var jL=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Oo=new WeakMap,dc=new WeakMap,hc={},ph=0,kj=function(t){return t&&(t.host||kj(t.parentNode))},SL=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=kj(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},NL=function(t,e,r,n){var s=SL(e,Array.isArray(t)?t:[t]);hc[r]||(hc[r]=new WeakMap);var o=hc[r],i=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))d(m);else try{var p=m.getAttribute(n),y=p!==null&&p!=="false",g=(Oo.get(m)||0)+1,x=(o.get(m)||0)+1;Oo.set(m,g),o.set(m,x),i.push(m),g===1&&y&&dc.set(m,!0),x===1&&m.setAttribute(r,"true"),y||m.setAttribute(n,"true")}catch(b){console.error("aria-hidden: cannot operate on ",m,b)}})};return d(e),l.clear(),ph++,function(){i.forEach(function(h){var m=Oo.get(h)-1,p=o.get(h)-1;Oo.set(h,m),o.set(h,p),m||(dc.has(h)||h.removeAttribute(n),dc.delete(h)),p||h.removeAttribute(r)}),ph--,ph||(Oo=new WeakMap,Oo=new WeakMap,dc=new WeakMap,hc={})}},Wp=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),s=jL(t);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),NL(n,s,r,"aria-hidden")):function(){return null}},Tc="right-scroll-bar-position",Rc="width-before-scroll-bar",kL="with-scroll-bars-hidden",CL="--removed-body-scroll-bar-size";function gh(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function EL(t,e){var r=f.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=e,r.facade}var PL=typeof window<"u"?f.useLayoutEffect:f.useEffect,ly=new WeakMap;function TL(t,e){var r=EL(null,function(n){return t.forEach(function(s){return gh(s,n)})});return PL(function(){var n=ly.get(r);if(n){var s=new Set(n),o=new Set(t),i=r.current;s.forEach(function(l){o.has(l)||gh(l,null)}),o.forEach(function(l){s.has(l)||gh(l,i)})}ly.set(r,t)},[t]),r}function RL(t){return t}function OL(t,e){e===void 0&&(e=RL);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(o){var i=e(o,n);return r.push(i),function(){r=r.filter(function(l){return l!==i})}},assignSyncMedium:function(o){for(n=!0;r.length;){var i=r;r=[],i.forEach(o)}r={push:function(l){return o(l)},filter:function(){return r}}},assignMedium:function(o){n=!0;var i=[];if(r.length){var l=r;r=[],l.forEach(o),i=r}var c=function(){var d=i;i=[],d.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){i.push(d),u()},filter:function(d){return i=i.filter(d),r}}}};return s}function AL(t){t===void 0&&(t={});var e=OL(null);return e.options=fr({async:!0,ssr:!1},t),e}var Cj=function(t){var e=t.sideCar,r=ys(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return f.createElement(n,fr({},r))};Cj.isSideCarExport=!0;function IL(t,e){return t.useMedium(e),Cj}var Ej=AL(),vh=function(){},ed=f.forwardRef(function(t,e){var r=f.useRef(null),n=f.useState({onScrollCapture:vh,onWheelCapture:vh,onTouchMoveCapture:vh}),s=n[0],o=n[1],i=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,m=t.sideCar,p=t.noRelative,y=t.noIsolation,g=t.inert,x=t.allowPinchZoom,b=t.as,v=b===void 0?"div":b,w=t.gapMode,_=ys(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=m,k=TL([r,e]),C=fr(fr({},_),s);return f.createElement(f.Fragment,null,d&&f.createElement(j,{sideCar:Ej,removeScrollBar:u,shards:h,noRelative:p,noIsolation:y,inert:g,setCallbacks:o,allowPinchZoom:!!x,lockRef:r,gapMode:w}),i?f.cloneElement(f.Children.only(l),fr(fr({},C),{ref:k})):f.createElement(v,fr({},C,{className:c,ref:k}),l))});ed.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ed.classNames={fullWidth:Rc,zeroRight:Tc};var DL=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function LL(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=DL();return e&&t.setAttribute("nonce",e),t}function ML(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function $L(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var FL=function(){var t=0,e=null;return{add:function(r){t==0&&(e=LL())&&(ML(e,r),$L(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},UL=function(){var t=FL();return function(e,r){f.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},Pj=function(){var t=UL(),e=function(r){var n=r.styles,s=r.dynamic;return t(n,s),null};return e},BL={left:0,top:0,right:0,gap:0},xh=function(t){return parseInt(t||"",10)||0},zL=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[xh(r),xh(n),xh(s)]},VL=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return BL;var e=zL(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},WL=Pj(),ia="data-scroll-locked",HL=function(t,e,r,n){var s=t.left,o=t.top,i=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(kL,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(ia,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Tc,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Rc,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Tc," .").concat(Tc,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Rc," .").concat(Rc,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(ia,`] {
    `).concat(CL,": ").concat(l,`px;
  }
`)},cy=function(){var t=parseInt(document.body.getAttribute(ia)||"0",10);return isFinite(t)?t:0},qL=function(){f.useEffect(function(){return document.body.setAttribute(ia,(cy()+1).toString()),function(){var t=cy()-1;t<=0?document.body.removeAttribute(ia):document.body.setAttribute(ia,t.toString())}},[])},KL=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,s=n===void 0?"margin":n;qL();var o=f.useMemo(function(){return VL(s)},[s]);return f.createElement(WL,{styles:HL(o,!e,s,r?"":"!important")})},tm=!1;if(typeof window<"u")try{var fc=Object.defineProperty({},"passive",{get:function(){return tm=!0,!0}});window.addEventListener("test",fc,fc),window.removeEventListener("test",fc,fc)}catch{tm=!1}var Ao=tm?{passive:!1}:!1,GL=function(t){return t.tagName==="TEXTAREA"},Tj=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!GL(t)&&r[e]==="visible")},QL=function(t){return Tj(t,"overflowY")},YL=function(t){return Tj(t,"overflowX")},uy=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=Rj(t,n);if(s){var o=Oj(t,n),i=o[1],l=o[2];if(i>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},JL=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},XL=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},Rj=function(t,e){return t==="v"?QL(e):YL(e)},Oj=function(t,e){return t==="v"?JL(e):XL(e)},ZL=function(t,e){return t==="h"&&e==="rtl"?-1:1},eM=function(t,e,r,n,s){var o=ZL(t,window.getComputedStyle(e).direction),i=o*n,l=r.target,c=e.contains(l),u=!1,d=i>0,h=0,m=0;do{if(!l)break;var p=Oj(t,l),y=p[0],g=p[1],x=p[2],b=g-x-o*y;(y||b)&&Rj(t,l)&&(h+=b,m+=y);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(m)<1||!s))&&(u=!0),u},mc=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},dy=function(t){return[t.deltaX,t.deltaY]},hy=function(t){return t&&"current"in t?t.current:t},tM=function(t,e){return t[0]===e[0]&&t[1]===e[1]},rM=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},nM=0,Io=[];function sM(t){var e=f.useRef([]),r=f.useRef([0,0]),n=f.useRef(),s=f.useState(nM++)[0],o=f.useState(Pj)[0],i=f.useRef(t);f.useEffect(function(){i.current=t},[t]),f.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var g=pp([t.lockRef.current],(t.shards||[]).map(hy),!0).filter(Boolean);return g.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=f.useCallback(function(g,x){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!i.current.allowPinchZoom;var b=mc(g),v=r.current,w="deltaX"in g?g.deltaX:v[0]-b[0],_="deltaY"in g?g.deltaY:v[1]-b[1],j,k=g.target,C=Math.abs(w)>Math.abs(_)?"h":"v";if("touches"in g&&C==="h"&&k.type==="range")return!1;var P=uy(C,k);if(!P)return!0;if(P?j=C:(j=C==="v"?"h":"v",P=uy(C,k)),!P)return!1;if(!n.current&&"changedTouches"in g&&(w||_)&&(n.current=j),!j)return!0;var N=n.current||j;return eM(N,x,g,N==="h"?w:_,!0)},[]),c=f.useCallback(function(g){var x=g;if(!(!Io.length||Io[Io.length-1]!==o)){var b="deltaY"in x?dy(x):mc(x),v=e.current.filter(function(j){return j.name===x.type&&(j.target===x.target||x.target===j.shadowParent)&&tM(j.delta,b)})[0];if(v&&v.should){x.cancelable&&x.preventDefault();return}if(!v){var w=(i.current.shards||[]).map(hy).filter(Boolean).filter(function(j){return j.contains(x.target)}),_=w.length>0?l(x,w[0]):!i.current.noIsolation;_&&x.cancelable&&x.preventDefault()}}},[]),u=f.useCallback(function(g,x,b,v){var w={name:g,delta:x,target:b,should:v,shadowParent:oM(b)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(_){return _!==w})},1)},[]),d=f.useCallback(function(g){r.current=mc(g),n.current=void 0},[]),h=f.useCallback(function(g){u(g.type,dy(g),g.target,l(g,t.lockRef.current))},[]),m=f.useCallback(function(g){u(g.type,mc(g),g.target,l(g,t.lockRef.current))},[]);f.useEffect(function(){return Io.push(o),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Ao),document.addEventListener("touchmove",c,Ao),document.addEventListener("touchstart",d,Ao),function(){Io=Io.filter(function(g){return g!==o}),document.removeEventListener("wheel",c,Ao),document.removeEventListener("touchmove",c,Ao),document.removeEventListener("touchstart",d,Ao)}},[]);var p=t.removeScrollBar,y=t.inert;return f.createElement(f.Fragment,null,y?f.createElement(o,{styles:rM(s)}):null,p?f.createElement(KL,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function oM(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const aM=IL(Ej,sM);var td=f.forwardRef(function(t,e){return f.createElement(ed,fr({},t,{ref:e,sideCar:aM}))});td.classNames=ed.classNames;var iM=[" ","Enter","ArrowUp","ArrowDown"],lM=[" ","Enter"],ao="Select",[rd,nd,cM]=Ap(ao),[Ya,lU]=ar(ao,[cM,Xu]),sd=Xu(),[uM,bs]=Ya(ao),[dM,hM]=Ya(ao),Aj=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:s,onOpenChange:o,value:i,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:m,required:p,form:y}=t,g=sd(e),[x,b]=f.useState(null),[v,w]=f.useState(null),[_,j]=f.useState(!1),k=Sl(u),[C,P]=oo({prop:n,defaultProp:s??!1,onChange:o,caller:ao}),[N,E]=oo({prop:i,defaultProp:l,onChange:c,caller:ao}),L=f.useRef(null),T=x?y||!!x.closest("form"):!0,[W,O]=f.useState(new Set),H=Array.from(W).map(I=>I.props.value).join(";");return a.jsx(wj,{...g,children:a.jsxs(uM,{required:p,scope:e,trigger:x,onTriggerChange:b,valueNode:v,onValueNodeChange:w,valueNodeHasChildren:_,onValueNodeHasChildrenChange:j,contentId:en(),value:N,onValueChange:E,open:C,onOpenChange:P,dir:k,triggerPointerDownPosRef:L,disabled:m,children:[a.jsx(rd.Provider,{scope:e,children:a.jsx(dM,{scope:t.__scopeSelect,onNativeOptionAdd:f.useCallback(I=>{O(U=>new Set(U).add(I))},[]),onNativeOptionRemove:f.useCallback(I=>{O(U=>{const D=new Set(U);return D.delete(I),D})},[]),children:r})}),T?a.jsxs(nS,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:h,value:N,onChange:I=>E(I.target.value),disabled:m,form:y,children:[N===void 0?a.jsx("option",{value:""}):null,Array.from(W)]},H):null]})})};Aj.displayName=ao;var Ij="SelectTrigger",Dj=f.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...s}=t,o=sd(r),i=bs(Ij,r),l=i.disabled||n,c=be(e,i.onTriggerChange),u=nd(r),d=f.useRef("touch"),[h,m,p]=oS(g=>{const x=u().filter(w=>!w.disabled),b=x.find(w=>w.value===i.value),v=aS(x,g,b);v!==void 0&&i.onValueChange(v.value)}),y=g=>{l||(i.onOpenChange(!0),p()),g&&(i.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return a.jsx(bj,{asChild:!0,...o,children:a.jsx(ie.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":sS(i.value)?"":void 0,...s,ref:c,onClick:X(s.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&y(g)}),onPointerDown:X(s.onPointerDown,g=>{d.current=g.pointerType;const x=g.target;x.hasPointerCapture(g.pointerId)&&x.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(y(g),g.preventDefault())}),onKeyDown:X(s.onKeyDown,g=>{const x=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&m(g.key),!(x&&g.key===" ")&&iM.includes(g.key)&&(y(),g.preventDefault())})})})});Dj.displayName=Ij;var Lj="SelectValue",Mj=f.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,children:o,placeholder:i="",...l}=t,c=bs(Lj,r),{onValueNodeHasChildrenChange:u}=c,d=o!==void 0,h=be(e,c.onValueNodeChange);return at(()=>{u(d)},[u,d]),a.jsx(ie.span,{...l,ref:h,style:{pointerEvents:"none"},children:sS(c.value)?a.jsx(a.Fragment,{children:i}):o})});Mj.displayName=Lj;var fM="SelectIcon",$j=f.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...s}=t;return a.jsx(ie.span,{"aria-hidden":!0,...s,ref:e,children:n||""})});$j.displayName=fM;var mM="SelectPortal",Fj=t=>a.jsx(Zu,{asChild:!0,...t});Fj.displayName=mM;var io="SelectContent",Uj=f.forwardRef((t,e)=>{const r=bs(io,t.__scopeSelect),[n,s]=f.useState();if(at(()=>{s(new DocumentFragment)},[]),!r.open){const o=n;return o?za.createPortal(a.jsx(Bj,{scope:t.__scopeSelect,children:a.jsx(rd.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),o):null}return a.jsx(zj,{...t,ref:e})});Uj.displayName=io;var Cr=10,[Bj,_s]=Ya(io),pM="SelectContentImpl",gM=no("SelectContent.RemoveScroll"),zj=f.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:y,hideWhenDetached:g,avoidCollisions:x,...b}=t,v=bs(io,r),[w,_]=f.useState(null),[j,k]=f.useState(null),C=be(e,Z=>_(Z)),[P,N]=f.useState(null),[E,L]=f.useState(null),T=nd(r),[W,O]=f.useState(!1),H=f.useRef(!1);f.useEffect(()=>{if(w)return Wp(w)},[w]),Ip();const I=f.useCallback(Z=>{const[F,...G]=T().map(ge=>ge.ref.current),[ne]=G.slice(-1),fe=document.activeElement;for(const ge of Z)if(ge===fe||(ge==null||ge.scrollIntoView({block:"nearest"}),ge===F&&j&&(j.scrollTop=0),ge===ne&&j&&(j.scrollTop=j.scrollHeight),ge==null||ge.focus(),document.activeElement!==fe))return},[T,j]),U=f.useCallback(()=>I([P,w]),[I,P,w]);f.useEffect(()=>{W&&U()},[W,U]);const{onOpenChange:D,triggerPointerDownPosRef:$}=v;f.useEffect(()=>{if(w){let Z={x:0,y:0};const F=ne=>{var fe,ge;Z={x:Math.abs(Math.round(ne.pageX)-(((fe=$.current)==null?void 0:fe.x)??0)),y:Math.abs(Math.round(ne.pageY)-(((ge=$.current)==null?void 0:ge.y)??0))}},G=ne=>{Z.x<=10&&Z.y<=10?ne.preventDefault():w.contains(ne.target)||D(!1),document.removeEventListener("pointermove",F),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",F),document.addEventListener("pointerup",G,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",F),document.removeEventListener("pointerup",G,{capture:!0})}}},[w,D,$]),f.useEffect(()=>{const Z=()=>D(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[D]);const[S,M]=oS(Z=>{const F=T().filter(fe=>!fe.disabled),G=F.find(fe=>fe.ref.current===document.activeElement),ne=aS(F,Z,G);ne&&setTimeout(()=>ne.ref.current.focus())}),Y=f.useCallback((Z,F,G)=>{const ne=!H.current&&!G;(v.value!==void 0&&v.value===F||ne)&&(N(Z),ne&&(H.current=!0))},[v.value]),ye=f.useCallback(()=>w==null?void 0:w.focus(),[w]),pe=f.useCallback((Z,F,G)=>{const ne=!H.current&&!G;(v.value!==void 0&&v.value===F||ne)&&L(Z)},[v.value]),ve=n==="popper"?rm:Vj,ke=ve===rm?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:y,hideWhenDetached:g,avoidCollisions:x}:{};return a.jsx(Bj,{scope:r,content:w,viewport:j,onViewportChange:k,itemRefCallback:Y,selectedItem:P,onItemLeave:ye,itemTextRefCallback:pe,focusSelectedItem:U,selectedItemText:E,position:n,isPositioned:W,searchRef:S,children:a.jsx(td,{as:gM,allowPinchZoom:!0,children:a.jsx(Gu,{asChild:!0,trapped:v.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:X(s,Z=>{var F;(F=v.trigger)==null||F.focus({preventScroll:!0}),Z.preventDefault()}),children:a.jsx(Ku,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:a.jsx(ve,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:Z=>Z.preventDefault(),...b,...ke,onPlaced:()=>O(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:X(b.onKeyDown,Z=>{const F=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!F&&Z.key.length===1&&M(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let ne=T().filter(fe=>!fe.disabled).map(fe=>fe.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(ne=ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const fe=Z.target,ge=ne.indexOf(fe);ne=ne.slice(ge+1)}setTimeout(()=>I(ne)),Z.preventDefault()}})})})})})})});zj.displayName=pM;var vM="SelectItemAlignedPosition",Vj=f.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...s}=t,o=bs(io,r),i=_s(io,r),[l,c]=f.useState(null),[u,d]=f.useState(null),h=be(e,C=>d(C)),m=nd(r),p=f.useRef(!1),y=f.useRef(!0),{viewport:g,selectedItem:x,selectedItemText:b,focusSelectedItem:v}=i,w=f.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&u&&g&&x&&b){const C=o.trigger.getBoundingClientRect(),P=u.getBoundingClientRect(),N=o.valueNode.getBoundingClientRect(),E=b.getBoundingClientRect();if(o.dir!=="rtl"){const fe=E.left-P.left,ge=N.left-fe,we=C.left-ge,Qe=C.width+we,V=Math.max(Qe,P.width),A=window.innerWidth-Cr,B=Yf(ge,[Cr,Math.max(Cr,A-V)]);l.style.minWidth=Qe+"px",l.style.left=B+"px"}else{const fe=P.right-E.right,ge=window.innerWidth-N.right-fe,we=window.innerWidth-C.right-ge,Qe=C.width+we,V=Math.max(Qe,P.width),A=window.innerWidth-Cr,B=Yf(ge,[Cr,Math.max(Cr,A-V)]);l.style.minWidth=Qe+"px",l.style.right=B+"px"}const L=m(),T=window.innerHeight-Cr*2,W=g.scrollHeight,O=window.getComputedStyle(u),H=parseInt(O.borderTopWidth,10),I=parseInt(O.paddingTop,10),U=parseInt(O.borderBottomWidth,10),D=parseInt(O.paddingBottom,10),$=H+I+W+D+U,S=Math.min(x.offsetHeight*5,$),M=window.getComputedStyle(g),Y=parseInt(M.paddingTop,10),ye=parseInt(M.paddingBottom,10),pe=C.top+C.height/2-Cr,ve=T-pe,ke=x.offsetHeight/2,Z=x.offsetTop+ke,F=H+I+Z,G=$-F;if(F<=pe){const fe=L.length>0&&x===L[L.length-1].ref.current;l.style.bottom="0px";const ge=u.clientHeight-g.offsetTop-g.offsetHeight,we=Math.max(ve,ke+(fe?ye:0)+ge+U),Qe=F+we;l.style.height=Qe+"px"}else{const fe=L.length>0&&x===L[0].ref.current;l.style.top="0px";const we=Math.max(pe,H+g.offsetTop+(fe?Y:0)+ke)+G;l.style.height=we+"px",g.scrollTop=F-pe+g.offsetTop}l.style.margin=`${Cr}px 0`,l.style.minHeight=S+"px",l.style.maxHeight=T+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[m,o.trigger,o.valueNode,l,u,g,x,b,o.dir,n]);at(()=>w(),[w]);const[_,j]=f.useState();at(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const k=f.useCallback(C=>{C&&y.current===!0&&(w(),v==null||v(),y.current=!1)},[w,v]);return a.jsx(yM,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:k,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:a.jsx(ie.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Vj.displayName=vM;var xM="SelectPopperPosition",rm=f.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Cr,...o}=t,i=sd(r);return a.jsx(_j,{...i,...o,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});rm.displayName=xM;var[yM,Hp]=Ya(io,{}),nm="SelectViewport",Wj=f.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...s}=t,o=_s(nm,r),i=Hp(nm,r),l=be(e,o.onViewportChange),c=f.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),a.jsx(rd.Slot,{scope:r,children:a.jsx(ie.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:X(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=i;if(m!=null&&m.current&&h){const p=Math.abs(c.current-d.scrollTop);if(p>0){const y=window.innerHeight-Cr*2,g=parseFloat(h.style.minHeight),x=parseFloat(h.style.height),b=Math.max(g,x);if(b<y){const v=b+p,w=Math.min(y,v),_=v-w;h.style.height=w+"px",h.style.bottom==="0px"&&(d.scrollTop=_>0?_:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});Wj.displayName=nm;var Hj="SelectGroup",[wM,bM]=Ya(Hj),_M=f.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=en();return a.jsx(wM,{scope:r,id:s,children:a.jsx(ie.div,{role:"group","aria-labelledby":s,...n,ref:e})})});_M.displayName=Hj;var qj="SelectLabel",Kj=f.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=bM(qj,r);return a.jsx(ie.div,{id:s.id,...n,ref:e})});Kj.displayName=qj;var xu="SelectItem",[jM,Gj]=Ya(xu),Qj=f.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:o,...i}=t,l=bs(xu,r),c=_s(xu,r),u=l.value===n,[d,h]=f.useState(o??""),[m,p]=f.useState(!1),y=be(e,v=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,v,n,s)}),g=en(),x=f.useRef("touch"),b=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(jM,{scope:r,value:n,disabled:s,textId:g,isSelected:u,onItemTextChange:f.useCallback(v=>{h(w=>w||((v==null?void 0:v.textContent)??"").trim())},[]),children:a.jsx(rd.ItemSlot,{scope:r,value:n,disabled:s,textValue:d,children:a.jsx(ie.div,{role:"option","aria-labelledby":g,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:y,onFocus:X(i.onFocus,()=>p(!0)),onBlur:X(i.onBlur,()=>p(!1)),onClick:X(i.onClick,()=>{x.current!=="mouse"&&b()}),onPointerUp:X(i.onPointerUp,()=>{x.current==="mouse"&&b()}),onPointerDown:X(i.onPointerDown,v=>{x.current=v.pointerType}),onPointerMove:X(i.onPointerMove,v=>{var w;x.current=v.pointerType,s?(w=c.onItemLeave)==null||w.call(c):x.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:X(i.onPointerLeave,v=>{var w;v.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:X(i.onKeyDown,v=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&v.key===" "||(lM.includes(v.key)&&b(),v.key===" "&&v.preventDefault())})})})})});Qj.displayName=xu;var pi="SelectItemText",Yj=f.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,...o}=t,i=bs(pi,r),l=_s(pi,r),c=Gj(pi,r),u=hM(pi,r),[d,h]=f.useState(null),m=be(e,b=>h(b),c.onItemTextChange,b=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,b,c.value,c.disabled)}),p=d==null?void 0:d.textContent,y=f.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:x}=u;return at(()=>(g(y),()=>x(y)),[g,x,y]),a.jsxs(a.Fragment,{children:[a.jsx(ie.span,{id:c.textId,...o,ref:m}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?za.createPortal(o.children,i.valueNode):null]})});Yj.displayName=pi;var Jj="SelectItemIndicator",Xj=f.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return Gj(Jj,r).isSelected?a.jsx(ie.span,{"aria-hidden":!0,...n,ref:e}):null});Xj.displayName=Jj;var sm="SelectScrollUpButton",Zj=f.forwardRef((t,e)=>{const r=_s(sm,t.__scopeSelect),n=Hp(sm,t.__scopeSelect),[s,o]=f.useState(!1),i=be(e,n.onScrollButtonChange);return at(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;o(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?a.jsx(tS,{...t,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});Zj.displayName=sm;var om="SelectScrollDownButton",eS=f.forwardRef((t,e)=>{const r=_s(om,t.__scopeSelect),n=Hp(om,t.__scopeSelect),[s,o]=f.useState(!1),i=be(e,n.onScrollButtonChange);return at(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;o(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?a.jsx(tS,{...t,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});eS.displayName=om;var tS=f.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=t,o=_s("SelectScrollButton",r),i=f.useRef(null),l=nd(r),c=f.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return f.useEffect(()=>()=>c(),[c]),at(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),a.jsx(ie.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:X(s.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(n,50))}),onPointerMove:X(s.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),i.current===null&&(i.current=window.setInterval(n,50))}),onPointerLeave:X(s.onPointerLeave,()=>{c()})})}),SM="SelectSeparator",rS=f.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return a.jsx(ie.div,{"aria-hidden":!0,...n,ref:e})});rS.displayName=SM;var am="SelectArrow",NM=f.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=sd(r),o=bs(am,r),i=_s(am,r);return o.open&&i.position==="popper"?a.jsx(jj,{...s,...n,ref:e}):null});NM.displayName=am;var kM="SelectBubbleInput",nS=f.forwardRef(({__scopeSelect:t,value:e,...r},n)=>{const s=f.useRef(null),o=be(n,s),i=Sj(e);return f.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==e&&d){const h=new Event("change",{bubbles:!0});d.call(l,e),l.dispatchEvent(h)}},[i,e]),a.jsx(ie.select,{...r,style:{...Nj,...r.style},ref:o,defaultValue:e})});nS.displayName=kM;function sS(t){return t===""||t===void 0}function oS(t){const e=mt(t),r=f.useRef(""),n=f.useRef(0),s=f.useCallback(i=>{const l=r.current+i;e(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),o=f.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,o]}function aS(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,o=r?t.indexOf(r):-1;let i=CM(t,Math.max(o,0));s.length===1&&(i=i.filter(u=>u!==r));const c=i.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function CM(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var EM=Aj,iS=Dj,PM=Mj,TM=$j,RM=Fj,lS=Uj,OM=Wj,cS=Kj,uS=Qj,AM=Yj,IM=Xj,dS=Zj,hS=eS,fS=rS;const Ze=EM,et=PM,Ve=f.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(iS,{ref:n,className:z("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,a.jsx(TM,{asChild:!0,children:a.jsx(U_,{className:"h-4 w-4 opacity-50"})})]}));Ve.displayName=iS.displayName;const mS=f.forwardRef(({className:t,...e},r)=>a.jsx(dS,{ref:r,className:z("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(lI,{className:"h-4 w-4"})}));mS.displayName=dS.displayName;const pS=f.forwardRef(({className:t,...e},r)=>a.jsx(hS,{ref:r,className:z("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(U_,{className:"h-4 w-4"})}));pS.displayName=hS.displayName;const We=f.forwardRef(({className:t,children:e,position:r="popper",...n},s)=>a.jsx(RM,{children:a.jsxs(lS,{ref:s,className:z("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[a.jsx(mS,{}),a.jsx(OM,{className:z("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(pS,{})]})}));We.displayName=lS.displayName;const DM=f.forwardRef(({className:t,...e},r)=>a.jsx(cS,{ref:r,className:z("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));DM.displayName=cS.displayName;const de=f.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(uS,{ref:n,className:z("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(IM,{children:a.jsx(kp,{className:"h-4 w-4"})})}),a.jsx(AM,{children:e})]}));de.displayName=uS.displayName;const LM=f.forwardRef(({className:t,...e},r)=>a.jsx(fS,{ref:r,className:z("-mx-1 my-1 h-px bg-muted",t),...e}));LM.displayName=fS.displayName;const gS=()=>{const{currentLanguage:t,changeLanguage:e,languages:r}=_l(),n=r.find(s=>s.code===t);return a.jsxs(Ze,{value:t,onValueChange:e,children:[a.jsx(Ve,{className:"w-[140px]",children:a.jsx(et,{children:a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{children:n==null?void 0:n.name})})})}),a.jsx(We,{children:r.map(s=>a.jsx(de,{value:s.code,children:a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{children:s.name})})},s.code))})]})};function MM({onToggleSidebar:t}){const{user:e,signOut:r}=ht(),{t:n}=it(),s=Ur(),o=async()=>{try{await r(),s("/login")}catch(i){console.error("Logout failed:",i),s("/login")}};return a.jsx("header",{className:"border-b bg-background sticky top-0 z-50",children:a.jsxs("div",{className:"h-14 flex items-center px-4 md:px-6",children:[a.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[a.jsx("button",{onClick:t,className:"text-foreground hover:text-muted-foreground transition-colors","aria-label":"Toggle sidebar",children:a.jsx(gI,{className:"h-5 w-5"})}),a.jsx("div",{className:"hidden md:block",children:a.jsx(OI,{})})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"text-sm text-muted-foreground hidden md:block",children:J((e==null?void 0:e.profile)||{},"user_name")||(e==null?void 0:e.email)}),a.jsx(gS,{}),a.jsxs("button",{className:"text-foreground hover:text-muted-foreground transition-colors",title:n("navigation.settings"),children:[a.jsx(xI,{className:"h-5 w-5"}),a.jsx("span",{className:"sr-only",children:n("navigation.settings")})]}),a.jsxs("button",{className:"text-foreground hover:text-muted-foreground relative transition-colors",title:n("common.notifications"),children:[a.jsx(nI,{className:"h-5 w-5"}),a.jsx("span",{className:"absolute -top-1 -right-1 h-3 w-3 rounded-full bg-primary flex items-center justify-center",children:a.jsx("span",{className:"h-2 w-2 rounded-full bg-primary-foreground"})}),a.jsx("span",{className:"sr-only",children:n("common.notifications")})]}),a.jsxs(K,{variant:"ghost",size:"sm",onClick:o,className:"text-foreground hover:text-muted-foreground border border-border hover:border-destructive/50 hover:bg-destructive/5 transition-all",title:n("buttons.logout"),children:[a.jsx(kI,{className:"h-5 w-5 mr-2"}),a.jsx("span",{children:n("buttons.logout")})]})]})]})})}function $M(t,e){return f.useReducer((r,n)=>e[r][n]??r,t)}var ir=t=>{const{present:e,children:r}=t,n=FM(e),s=typeof r=="function"?r({present:n.isPresent}):f.Children.only(r),o=be(n.ref,UM(s));return typeof r=="function"||n.isPresent?f.cloneElement(s,{ref:o}):null};ir.displayName="Presence";function FM(t){const[e,r]=f.useState(),n=f.useRef(null),s=f.useRef(t),o=f.useRef("none"),i=t?"mounted":"unmounted",[l,c]=$M(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const u=pc(n.current);o.current=l==="mounted"?u:"none"},[l]),at(()=>{const u=n.current,d=s.current;if(d!==t){const m=o.current,p=pc(u);t?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),at(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=p=>{const g=pc(n.current).includes(p.animationName);if(p.target===e&&g&&(c("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},m=p=>{p.target===e&&(o.current=pc(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function pc(t){return(t==null?void 0:t.animationName)||"none"}function UM(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var od="Dialog",[vS,xS]=ar(od),[BM,Br]=vS(od),yS=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:i=!0}=t,l=f.useRef(null),c=f.useRef(null),[u,d]=oo({prop:n,defaultProp:s??!1,onChange:o,caller:od});return a.jsx(BM,{scope:e,triggerRef:l,contentRef:c,contentId:en(),titleId:en(),descriptionId:en(),open:u,onOpenChange:d,onOpenToggle:f.useCallback(()=>d(h=>!h),[d]),modal:i,children:r})};yS.displayName=od;var wS="DialogTrigger",bS=f.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Br(wS,r),o=be(e,s.triggerRef);return a.jsx(ie.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Gp(s.open),...n,ref:o,onClick:X(t.onClick,s.onOpenToggle)})});bS.displayName=wS;var qp="DialogPortal",[zM,_S]=vS(qp,{forceMount:void 0}),jS=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:s}=t,o=Br(qp,e);return a.jsx(zM,{scope:e,forceMount:r,children:f.Children.map(n,i=>a.jsx(ir,{present:r||o.open,children:a.jsx(Zu,{asChild:!0,container:s,children:i})}))})};jS.displayName=qp;var yu="DialogOverlay",SS=f.forwardRef((t,e)=>{const r=_S(yu,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,o=Br(yu,t.__scopeDialog);return o.modal?a.jsx(ir,{present:n||o.open,children:a.jsx(WM,{...s,ref:e})}):null});SS.displayName=yu;var VM=no("DialogOverlay.RemoveScroll"),WM=f.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Br(yu,r);return a.jsx(td,{as:VM,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(ie.div,{"data-state":Gp(s.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),lo="DialogContent",NS=f.forwardRef((t,e)=>{const r=_S(lo,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,o=Br(lo,t.__scopeDialog);return a.jsx(ir,{present:n||o.open,children:o.modal?a.jsx(HM,{...s,ref:e}):a.jsx(qM,{...s,ref:e})})});NS.displayName=lo;var HM=f.forwardRef((t,e)=>{const r=Br(lo,t.__scopeDialog),n=f.useRef(null),s=be(e,r.contentRef,n);return f.useEffect(()=>{const o=n.current;if(o)return Wp(o)},[]),a.jsx(kS,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:X(t.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=r.triggerRef.current)==null||i.focus()}),onPointerDownOutside:X(t.onPointerDownOutside,o=>{const i=o.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&o.preventDefault()}),onFocusOutside:X(t.onFocusOutside,o=>o.preventDefault())})}),qM=f.forwardRef((t,e)=>{const r=Br(lo,t.__scopeDialog),n=f.useRef(!1),s=f.useRef(!1);return a.jsx(kS,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=t.onCloseAutoFocus)==null||i.call(t,o),o.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;((u=r.triggerRef.current)==null?void 0:u.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),kS=f.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,...i}=t,l=Br(lo,r),c=f.useRef(null),u=be(e,c);return Ip(),a.jsxs(a.Fragment,{children:[a.jsx(Gu,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:a.jsx(Ku,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Gp(l.open),...i,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(GM,{titleId:l.titleId}),a.jsx(YM,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Kp="DialogTitle",CS=f.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Br(Kp,r);return a.jsx(ie.h2,{id:s.titleId,...n,ref:e})});CS.displayName=Kp;var ES="DialogDescription",PS=f.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Br(ES,r);return a.jsx(ie.p,{id:s.descriptionId,...n,ref:e})});PS.displayName=ES;var TS="DialogClose",RS=f.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Br(TS,r);return a.jsx(ie.button,{type:"button",...n,ref:e,onClick:X(t.onClick,()=>s.onOpenChange(!1))})});RS.displayName=TS;function Gp(t){return t?"open":"closed"}var OS="DialogTitleWarning",[KM,AS]=AI(OS,{contentName:lo,titleName:Kp,docsSlug:"dialog"}),GM=({titleId:t})=>{const e=AS(OS),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return f.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},QM="DialogDescriptionWarning",YM=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${AS(QM).contentName}}.`;return f.useEffect(()=>{var o;const s=(o=t.current)==null?void 0:o.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},Qp=yS,Yp=bS,Jp=jS,kl=SS,Cl=NS,El=CS,Pl=PS,ad=RS;const Xp=Qp,IS=Yp,JM=Jp,DS=f.forwardRef(({className:t,...e},r)=>a.jsx(kl,{className:z("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:r}));DS.displayName=kl.displayName;const XM=jl("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),id=f.forwardRef(({side:t="right",className:e,children:r,...n},s)=>a.jsxs(JM,{children:[a.jsx(DS,{}),a.jsxs(Cl,{ref:s,className:z(XM({side:t}),e),...n,children:[r,a.jsxs(ad,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[a.jsx(G_,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));id.displayName=Cl.displayName;const LS=f.forwardRef(({className:t,...e},r)=>a.jsx(El,{ref:r,className:z("text-lg font-semibold text-foreground",t),...e}));LS.displayName=El.displayName;const MS=f.forwardRef(({className:t,...e},r)=>a.jsx(Pl,{ref:r,className:z("text-sm text-muted-foreground",t),...e}));MS.displayName=Pl.displayName;function jt({children:t}){const[e,r]=f.useState(!0),[n,s]=f.useState(!1);f.useEffect(()=>{const l=()=>{s(window.innerWidth<1024),window.innerWidth<1024?r(!1):r(!0)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]);const o=()=>{r(!e)},i=()=>{n&&r(!1)};return a.jsxs("div",{className:"min-h-screen bg-background w-full flex flex-col",children:[a.jsx(MM,{onToggleSidebar:o}),a.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[!n&&a.jsx("aside",{className:z("bg-sidebar transition-all duration-300 ease-in-out hidden lg:block",e?"w-60":"w-0 overflow-hidden"),style:{height:"calc(100vh - 56px)"},children:a.jsx(Wx,{onNavigate:i})}),n&&a.jsx(Xp,{open:e,onOpenChange:r,children:a.jsxs(id,{side:Kt()?"right":"left",className:"p-0 w-60 [&>button]:hidden",children:[a.jsx(LS,{className:"sr-only",children:"Navigation Menu"}),a.jsx(MS,{className:"sr-only",children:"Application navigation sidebar"}),a.jsx(Wx,{onNavigate:i})]})}),a.jsx("main",{className:"flex-1 overflow-auto bg-background h-full",children:a.jsx("div",{className:"p-3 sm:p-4 md:p-6 w-full min-h-full",children:t})})]})]})}const Jr={async getAll(){try{console.log("[stageService] Fetching all stages...");const{data:t,error:e}=await Q.from("stages").select("*").order("stager_order_index",{ascending:!0});if(e)throw console.error("[stageService] Error fetching stages:",e),e;return console.log(`[stageService] Successfully fetched ${(t==null?void 0:t.length)||0} stages`),t||[]}catch(t){throw console.error("[stageService] Failed to fetch stages:",t),t}},async getGlobalStages(){try{console.log("[stageService] Fetching global stages...");const{data:t,error:e}=await Q.from("stages").select("*").is("project_id",null).order("stager_order_index",{ascending:!0});if(e)throw console.error("[stageService] Error fetching global stages:",e),e;return console.log(`[stageService] Successfully fetched ${(t==null?void 0:t.length)||0} global stages`),t||[]}catch(t){throw console.error("[stageService] Failed to fetch global stages:",t),t}},async create(t){try{const{data:e}=await Q.from("stages").select("stager_order_index").order("stager_order_index",{ascending:!1}).limit(1),r=e&&e.length>0?e[0].stager_order_index:-1,n=t.stager_order_index??r+1,s=_r({stage_name:t.stage_name,stager_order_index:n,project_id:t.project_id,color:t.color,color_var:t.color_var},{stage_name:"stage_name"}),{data:o,error:i}=await Q.from("stages").insert(s).select().single();if(i)throw i;return o}catch(e){throw console.error("[stageService] Failed to create stage:",e),e}},async update(t,e){try{const r=_r(e,{stage_name:"stage_name"}),{error:n}=await Q.from("stages").update(r).eq("stage_id",t);if(n)throw n}catch(r){throw console.error("[stageService] Failed to update stage:",r),r}},async delete(t){try{const{error:e}=await Q.from("stages").delete().eq("stage_id",t);if(e)throw e}catch(e){throw console.error("[stageService] Failed to delete stage:",e),e}}},gr={async getAll(){try{console.log("[userService] Fetching all users...");const{data:t,error:e}=await Q.from("users").select("*");if(e)throw e;return console.log(`[userService] Successfully fetched ${(t==null?void 0:t.length)||0} users`),t||[]}catch(t){throw console.error("[userService] Failed to fetch users:",t),t}},async getById(t){try{const{data:e,error:r}=await Q.from("users").select("*").eq("user_id",t).single();return r?null:e}catch(e){return console.error("[userService] Failed to fetch user:",e),null}},async getByAuthId(t){try{const{data:e,error:r}=await Q.from("users").select("*").eq("auth_user_id",t).single();return r?null:e}catch(e){return console.error("[userService] Failed to fetch user by auth ID:",e),null}},async update(t,e){try{const r={};e.user_name!==void 0&&(r.user_name=e.user_name),e.user_name_ar!==void 0&&(r.user_name_ar=e.user_name_ar),e.user_email!==void 0&&(r.user_email=e.user_email),e.user_role!==void 0&&(r.user_role=e.user_role),e.avatar!==void 0&&(r.avatar=e.avatar),e.client_contact!==void 0&&(r.client_contact=e.client_contact),e.company_name!==void 0&&(r.company_name=e.company_name),e.company_name_ar!==void 0&&(r.company_name_ar=e.company_name_ar);const{error:n}=await Q.from("users").update(r).eq("user_id",t);if(n)throw n;console.log(`[userService] Successfully updated user ${t}`)}catch(r){throw console.error("[userService] Failed to update user:",r),r}}},ld={async getAll(){try{console.log("[clientService] Fetching all clients...");const{data:t,error:e}=await Q.from("users").select("*").eq("user_role","client");if(e)throw e;return console.log(`[clientService] Successfully fetched ${(t==null?void 0:t.length)||0} clients`),t||[]}catch(t){throw console.error("[clientService] Failed to fetch clients:",t),t}},async getById(t){try{const{data:e,error:r}=await Q.from("users").select("*").eq("user_id",t).eq("user_role","client").single();return r?null:e}catch(e){return console.error("[clientService] Failed to fetch client:",e),null}},async create(t){try{const e=_r({user_name:t.user_name,user_email:t.user_email,user_role:"client",avatar:t.avatar,client_contact:t.client_contact,company_name:t.company_name},{user_name:"user_name",company_name:"company_name"}),{data:r,error:n}=await Q.from("users").insert(e).select().single();if(n)throw n;return r}catch(e){throw console.error("[clientService] Failed to create client:",e),e}}},mn={async getAll(){try{console.log("[projectService] Fetching all projects...");const{data:t,error:e}=await Q.from("projects").select("*").order("created_date",{ascending:!1});if(e)throw e;return console.log(`[projectService] Successfully fetched ${(t==null?void 0:t.length)||0} projects`),t||[]}catch(t){throw console.error("[projectService] Failed to fetch projects:",t),t}},async getById(t){try{const{data:e,error:r}=await Q.from("projects").select("*").eq("project_id",t).single();return r?null:e}catch(e){return console.error("[projectService] Failed to fetch project:",e),null}},async create(t){try{const{data:e,error:r}=await Q.from("projects").insert({project_name:t.project_name,project_description:t.project_description,created_by:t.created_by,progress:t.progress||0,stage:t.stage,end_date:t.end_date}).select().single();if(r)throw r;return e}catch(e){throw console.error("[projectService] Failed to create project:",e),e}},async update(t,e){try{const r={};e.project_name&&(r.project_name=e.project_name),e.project_description!==void 0&&(r.project_description=e.project_description),e.progress!==void 0&&(r.progress=e.progress),e.stage!==void 0&&(r.stage=e.stage),e.end_date!==void 0&&(r.end_date=e.end_date);const{error:n}=await Q.from("projects").update(r).eq("project_id",t);if(n)throw n}catch(r){throw console.error("[projectService] Failed to update project:",r),r}},async delete(t){try{const{error:e}=await Q.from("projects").delete().eq("project_id",t);if(e)throw e}catch(e){throw console.error("[projectService] Failed to delete project:",e),e}},async getByUserAuthId(t){try{console.log("[projectService] Fetching projects for user:",t);const{data:e,error:r}=await Q.from("project_users").select(`
          project_id,
          projects (
            project_id,
            project_name,
            project_description,
            created_date,
            created_by,
            progress,
            stage,
            end_date,
            updated_at
          )
        `).eq("auth_user_id",t);if(r)throw r;const n=(e==null?void 0:e.map(s=>s.projects).filter(Boolean))||[];return console.log(`[projectService] Successfully fetched ${n.length} projects for user`),n}catch(e){throw console.error("[projectService] Failed to fetch projects for user:",e),e}}},Ks={async getAll(){try{console.log("[taskService] Fetching all tasks...");const{data:t,error:e}=await Q.from("tasks").select("*").order("created_at",{ascending:!1});if(e)throw e;return console.log(`[taskService] Successfully fetched ${(t==null?void 0:t.length)||0} tasks`),t||[]}catch(t){throw console.error("[taskService] Failed to fetch tasks:",t),t}},async getByStage(t){try{const{data:e,error:r}=await Q.from("tasks").select("*").eq("stage_id",t);if(r)throw r;return e||[]}catch(e){throw console.error("[taskService] Failed to fetch tasks:",e),e}},async create(t){try{const e=_r({task_name:t.task_name,stage_id:t.stage_id,assigned_to:t.assigned_to,task_status:t.task_status,due_date:t.due_date,description:t.description,auth_user_id:t.auth_user_id},{task_name:"task_name",description:"description"}),{data:r,error:n}=await Q.from("tasks").insert(e).select().single();if(n)throw n;return r}catch(e){throw console.error("[taskService] Failed to create task:",e),e}},async update(t,e){try{const r=_r(e,{task_name:"task_name",description:"description"}),{error:n}=await Q.from("tasks").update(r).eq("task_id",t);if(n)throw n}catch(r){throw console.error("[taskService] Failed to update task:",r),r}},async delete(t){try{const{error:e}=await Q.from("tasks").delete().eq("task_id",t);if(e)throw e}catch(e){throw console.error("[taskService] Failed to delete task:",e),e}}},im={async getByTask(t){try{const{data:e,error:r}=await Q.from("comments").select("*").eq("task_id",t).order("created_date",{ascending:!0});if(r)throw r;return e||[]}catch(e){throw console.error("[commentService] Failed to fetch comments:",e),e}},async create(t){try{const{data:e,error:r}=await Q.from("comments").insert({task_id:t.task_id,auth_user_id:t.auth_user_id,message:t.message}).select().single();if(r)throw r;return e}catch(e){throw console.error("[commentService] Failed to create comment:",e),e}}},Yo={async getUserRooms(t){const{data:e,error:r}=await Q.from("room_members").select("room_id").eq("auth_user_id",t);if(r)throw r;if(!e||e.length===0)return[];const n=e.map(i=>i.room_id),{data:s,error:o}=await Q.from("rooms").select("*").in("room_id",n);if(o)throw o;return s||[]},async createRoom(t){const{data:e,error:r}=await Q.from("rooms").insert({room_name:t.name,is_private:t.is_private??!0,project_id:t.project_id,created_by:t.created_by,auth_user_id:t.auth_user_id}).select().single();if(r)throw r;return e},async addMember(t,e){const{error:r}=await Q.from("room_members").insert({room_id:t,auth_user_id:e});if(r)throw r},async getRoomMembers(t){const{data:e,error:r}=await Q.from("room_members").select(`
        auth_user_id,
        users (*)
      `).eq("room_id",t);if(r)throw r;return!e||e.length===0?[]:e.map(n=>n.users).filter(Boolean)}},fy={async getProjectUsers(t){try{console.log("[projectUserService] Fetching users for project:",t);const{data:e,error:r}=await Q.from("project_users").select(`
          auth_user_id,
          users (
            user_id,
            user_name,
            user_email,
            user_role,
            avatar,
            auth_user_id,
            client_contact,
            company_name,
            created_at,
            updated_at
          )
        `).eq("project_id",t);if(r)throw r;const n=(e==null?void 0:e.map(s=>s.users).filter(Boolean))||[];return console.log(`[projectUserService] Found ${n.length} users for project ${t}`),n}catch(e){throw console.error("[projectUserService] Failed to fetch project users:",e),e}},async addUserToProject(t,e){try{console.log("[projectUserService] Adding user",e,"to project",t);const{error:r}=await Q.from("project_users").insert({project_id:t,user_id:e});if(r)throw r;console.log("[projectUserService] Successfully added user to project")}catch(r){throw console.error("[projectUserService] Failed to add user to project:",r),r}},async removeUserFromProject(t,e){try{console.log("[projectUserService] Removing user",e,"from project",t);const{error:r}=await Q.from("project_users").delete().eq("project_id",t).eq("user_id",e);if(r)throw r;console.log("[projectUserService] Successfully removed user from project")}catch(r){throw console.error("[projectUserService] Failed to remove user from project:",r),r}}},Do={async getAll(){try{console.log("[teamService] Fetching all teams...");const{data:t,error:e}=await Q.from("teams").select("*").order("created_at",{ascending:!1});if(e)throw e;return console.log(`[teamService] Successfully fetched ${(t==null?void 0:t.length)||0} teams`),t||[]}catch(t){throw console.error("[teamService] Failed to fetch teams:",t),t}},async getAllWithMembers(){try{console.log("[teamService] Fetching all teams with members...");const{data:t,error:e}=await Q.from("teams").select(`
          team_id,
          team_name,
          team_name_ar,
          partner_id,
          auth_user_id,
          team_leader_id,
          created_at
        `).order("created_at",{ascending:!1});if(e)throw e;if(!t||t.length===0)return[];const r=t.map(l=>l.team_id),{data:n,error:s}=await Q.from("team_members").select(`
          team_id,
          auth_user_id,
          joined_at
        `).in("team_id",r);if(s)throw s;const o=(n||[]).reduce((l,c)=>(l[c.team_id]||(l[c.team_id]=[]),l[c.team_id].push({auth_user_id:c.auth_user_id,joined_at:c.joined_at}),l),{}),i=t.map(l=>({...l,team_members:o[l.team_id]||[]}));return console.log(`[teamService] Successfully fetched ${i.length} teams with members`),i}catch(t){throw console.error("[teamService] Failed to fetch teams with members:",t),t}},async getAllTeamMembers(){try{console.log("[teamService] Fetching all team members with user details...");const{data:t,error:e}=await Q.from("team_members").select(`
          team_id,
          users (
            user_id,
            user_name,
            user_email,
            user_role,
            avatar,
            auth_user_id,
            client_contact,
            company_name,
            created_at,
            updated_at
          )
        `);if(e)throw e;const r=(t||[]).reduce((n,s)=>{const o=s.team_id;return n[o]||(n[o]=[]),n[o].push(s.users),n},{});return console.log(`[teamService] Successfully fetched members for ${Object.keys(r).length} teams`),r}catch(t){throw console.error("[teamService] Failed to fetch all team members:",t),t}},async getById(t){try{const{data:e,error:r}=await Q.from("teams").select("*").eq("team_id",t).single();return r?null:e}catch(e){return console.error("[teamService] Failed to fetch team:",e),null}},async create(t){try{const{data:e,error:r}=await Q.from("teams").insert(t).select().single();if(r)throw r;return e}catch(e){throw console.error("[teamService] Failed to create team:",e),e}},async update(t,e){try{const r=_r(e,{team_name:"team_name"}),{error:n}=await Q.from("teams").update(r).eq("team_id",t);if(n)throw n}catch(r){throw console.error("[teamService] Failed to update team:",r),r}},async delete(t){try{const{error:e}=await Q.from("teams").delete().eq("team_id",t);if(e)throw e}catch(e){throw console.error("[teamService] Failed to delete team:",e),e}},async getTeamMembers(t){try{console.log("[teamService] Fetching members for team:",t);const{data:e,error:r}=await Q.from("team_members").select(`
          auth_user_id,
          users!auth_user_id (
            user_id,
            user_name,
            user_email,
            user_role,
            avatar,
            auth_user_id,
            client_contact,
            company_name,
            created_at,
            updated_at
          )
        `).eq("team_id",t);if(r)throw r;const n=(e==null?void 0:e.map(s=>s.users).filter(Boolean))||[];return console.log(`[teamService] Found ${n.length} members for team ${t}`),n}catch(e){throw console.error("[teamService] Failed to fetch team members:",e),e}},async addMember(t,e){try{console.log("[teamService] Adding member",e,"to team",t);const{error:r}=await Q.from("team_members").insert({team_id:t,auth_user_id:e});if(r)throw r;console.log("[teamService] Successfully added member to team")}catch(r){throw console.error("[teamService] Failed to add member to team:",r),r}},async removeMember(t,e){try{console.log("[teamService] Removing member",e,"from team",t);const{error:r}=await Q.from("team_members").delete().eq("team_id",t).eq("auth_user_id",e);if(r)throw r;console.log("[teamService] Successfully removed member from team")}catch(r){throw console.error("[teamService] Failed to remove member from team:",r),r}}},my={async getAll(){try{console.log("[ticketService] Fetching all tickets...");const{data:t,error:e}=await Q.from("tickets").select("*").order("created_date",{ascending:!1});if(e)throw e;return console.log(`[ticketService] Successfully fetched ${(t==null?void 0:t.length)||0} tickets`),t||[]}catch(t){throw console.error("[ticketService] Failed to fetch tickets:",t),t}},async getById(t){try{const{data:e,error:r}=await Q.from("tickets").select("*").eq("ticket_id",t).single();return r?null:e}catch(e){return console.error("[ticketService] Failed to fetch ticket:",e),null}},async create(t){try{const{data:e,error:r}=await Q.from("tickets").insert({user_id:t.user_id,assigned_to:t.assigned_to,subject:t.subject,description:t.description,priority:t.priority,status:t.status,created_by:t.created_by}).select().single();if(r)throw r;return e}catch(e){throw console.error("[ticketService] Failed to create ticket:",e),e}},async update(t,e){try{const r={};e.user_id!==void 0&&(r.user_id=e.user_id),e.assigned_to!==void 0&&(r.assigned_to=e.assigned_to),e.subject&&(r.subject=e.subject),e.description!==void 0&&(r.description=e.description),e.priority&&(r.priority=e.priority),e.status&&(r.status=e.status),e.resolved_date!==void 0&&(r.resolved_date=e.resolved_date);const{error:n}=await Q.from("tickets").update(r).eq("ticket_id",t);if(n)throw n}catch(r){throw console.error("[ticketService] Failed to update ticket:",r),r}},async delete(t){try{const{error:e}=await Q.from("tickets").delete().eq("ticket_id",t);if(e)throw e}catch(e){throw console.error("[ticketService] Failed to delete ticket:",e),e}}},Ri={async getByRoom(t){try{const{data:e,error:r}=await Q.from("messages").select("*").eq("room_id",t).order("created_at",{ascending:!0});if(r)throw r;return e||[]}catch(e){throw console.error("[messageService] Failed to fetch messages:",e),e}},async create(t){try{const{data:e,error:r}=await Q.from("messages").insert(t).select().single();if(r)throw r;return e}catch(e){throw console.error("[messageService] Failed to create message:",e),e}}},Jo={async getAll(){try{console.log("[leadService] Fetching all leads...");const{data:t,error:e}=await Q.from("leads").select("*").order("created_date",{ascending:!1});if(e)throw e;return console.log(`[leadService] Successfully fetched ${(t==null?void 0:t.length)||0} leads`),t||[]}catch(t){throw console.error("[leadService] Failed to fetch leads:",t),t}},async getById(t){try{const{data:e,error:r}=await Q.from("leads").select("*").eq("lead_id",t).single();return r?null:e}catch(e){return console.error("[leadService] Failed to fetch lead:",e),null}},async create(t){try{const{data:e,error:r}=await Q.from("leads").insert({lead_name:t.lead_name,lead_description:t.lead_description,client_name:t.client_name,client_user_id:t.client_user_id,created_by:t.created_by,stage:t.stage}).select().single();if(r)throw r;return e}catch(e){throw console.error("[leadService] Failed to create lead:",e),e}},async update(t,e){try{const r={};e.lead_name&&(r.lead_name=e.lead_name),e.lead_description!==void 0&&(r.lead_description=e.lead_description),e.client_name&&(r.client_name=e.client_name),e.client_user_id&&(r.client_user_id=e.client_user_id),e.stage!==void 0&&(r.stage=e.stage);const{error:n}=await Q.from("leads").update(r).eq("lead_id",t);if(n)throw n}catch(r){throw console.error("[leadService] Failed to update lead:",r),r}},async delete(t){try{const{error:e}=await Q.from("leads").delete().eq("lead_id",t);if(e)throw e}catch(e){throw console.error("[leadService] Failed to delete lead:",e),e}}},ue=f.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:z("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));ue.displayName="Card";const Re=f.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:z("flex flex-col space-y-1.5 p-6",t),...e}));Re.displayName="CardHeader";const $e=f.forwardRef(({className:t,...e},r)=>a.jsx("h3",{ref:r,className:z("text-2xl font-semibold leading-none tracking-tight",t),...e}));$e.displayName="CardTitle";const ZM=f.forwardRef(({className:t,...e},r)=>a.jsx("p",{ref:r,className:z("text-sm text-muted-foreground",t),...e}));ZM.displayName="CardDescription";const me=f.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:z("p-6 pt-0",t),...e}));me.displayName="CardContent";const e4=f.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:z("flex items-center p-6 pt-0",t),...e}));e4.displayName="CardFooter";var Zp="Progress",eg=100,[t4,cU]=ar(Zp),[r4,n4]=t4(Zp),$S=f.forwardRef((t,e)=>{const{__scopeProgress:r,value:n=null,max:s,getValueLabel:o=s4,...i}=t;(s||s===0)&&!py(s)&&console.error(o4(`${s}`,"Progress"));const l=py(s)?s:eg;n!==null&&!gy(n,l)&&console.error(a4(`${n}`,"Progress"));const c=gy(n,l)?n:null,u=wu(c)?o(c,l):void 0;return a.jsx(r4,{scope:r,value:c,max:l,children:a.jsx(ie.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":wu(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":BS(c,l),"data-value":c??void 0,"data-max":l,...i,ref:e})})});$S.displayName=Zp;var FS="ProgressIndicator",US=f.forwardRef((t,e)=>{const{__scopeProgress:r,...n}=t,s=n4(FS,r);return a.jsx(ie.div,{"data-state":BS(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...n,ref:e})});US.displayName=FS;function s4(t,e){return`${Math.round(t/e*100)}%`}function BS(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function wu(t){return typeof t=="number"}function py(t){return wu(t)&&!isNaN(t)&&t>0}function gy(t,e){return wu(t)&&!isNaN(t)&&t<=e&&t>=0}function o4(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${eg}\`.`}function a4(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${eg} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var zS=$S,i4=US;const fs=f.forwardRef(({className:t,value:e,...r},n)=>a.jsx(zS,{ref:n,className:z("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:a.jsx(i4,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));fs.displayName=zS.displayName;function l4(){const{t}=it();_l();const[e,r]=f.useState([]),[n,s]=f.useState([]),[o,i]=f.useState([]),[l,c]=f.useState([]),[u,d]=f.useState(!0),[h,m]=f.useState(null),{user:p,loading:y}=ht();console.log("[Dashboard] Rendering. Auth state:",{user:p?{id:p.id,email:p.email,role:p.role}:null,authLoading:y,hasUser:!!p,loading:u}),f.useEffect(()=>{console.log("[Dashboard] useEffect - User changed:",{hasUser:!!p,authLoading:y}),p&&!y&&(console.log("[Dashboard] User is authenticated, loading data..."),g())},[p,y]);const g=async()=>{console.log("[Dashboard] Starting to load data...");try{d(!0),m(null),console.log("[Dashboard] Fetching data...");const[P,N,E,L]=await Promise.all([mn.getAll().catch(T=>(console.error("[Dashboard] Error fetching projects:",T),[])),ld.getAll().catch(T=>(console.error("[Dashboard] Error fetching clients:",T),[])),gr.getAll().catch(T=>(console.error("[Dashboard] Error fetching users:",T),[])),Jo.getAll().catch(T=>(console.error("[Dashboard] Error fetching leads:",T),[]))]);console.log("[Dashboard] Data fetched successfully:",{projects:P.length,clients:N.length,users:E.length,leads:L.length}),r(P),s(N),i(E),c(L)}catch(P){console.error("[Dashboard] Failed to load data:",P),m(P.message||"Failed to load data")}finally{console.log("[Dashboard] Data loading completed"),d(!1)}};if(u||y||!p)return a.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:t("common.loading")})]})});if(h)return a.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-red-600",children:t("common.error")}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:h}),a.jsx(K,{onClick:g,className:"mt-4",children:"Retry"})]})});const x=e.length,b=e.filter(P=>P.progress===100).length,v=e.filter(P=>P.progress>0&&P.progress<100).length,w=e.filter(P=>P.progress===0).length,_=n.length,j=o.length,k=l.length,C=e.sort((P,N)=>new Date(N.created_date||"").getTime()-new Date(P.created_date||"").getTime()).slice(0,5);return a.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold tracking-tight",children:t("dashboard.title")}),a.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:t("dashboard.subtitle")})]})}),a.jsxs("div",{className:"grid gap-4 sm:gap-6 grid-cols-2 md:grid-cols-3 lg:grid-cols-5",children:[a.jsxs(ue,{children:[a.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx($e,{className:"text-xs sm:text-sm font-medium",children:t("dashboard.totalProjects")}),a.jsx(_I,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),a.jsxs(me,{children:[a.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:x}),a.jsxs("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:[b," ",t("dashboard.completed")]})]})]}),a.jsxs(ue,{children:[a.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx($e,{className:"text-xs sm:text-sm font-medium",children:t("dashboard.inProgress")}),a.jsx(nn,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),a.jsxs(me,{children:[a.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:v}),a.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:t("dashboard.activeProjects")})]})]}),a.jsxs(ue,{children:[a.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx($e,{className:"text-xs sm:text-sm font-medium",children:t("dashboard.clients")}),a.jsx(Ra,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),a.jsxs(me,{children:[a.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:_}),a.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:t("dashboard.totalClients")})]})]}),a.jsxs(ue,{children:[a.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx($e,{className:"text-xs sm:text-sm font-medium",children:t("dashboard.teamMembers")}),a.jsx(nn,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),a.jsxs(me,{children:[a.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:j}),a.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:t("dashboard.activeUsers")})]})]}),a.jsxs(ue,{children:[a.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx($e,{className:"text-xs sm:text-sm font-medium",children:t("dashboard.leads")}),a.jsx(fu,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),a.jsxs(me,{children:[a.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:k}),a.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:t("dashboard.totalLeads")})]})]})]}),a.jsxs("div",{className:"grid gap-4 sm:gap-6 grid-cols-1 md:grid-cols-2",children:[a.jsxs(ue,{children:[a.jsx(Re,{children:a.jsx($e,{className:"text-base sm:text-lg",children:t("dashboard.recentProjects")})}),a.jsx(me,{className:"space-y-3 sm:space-y-4",children:C.length>0?C.map(P=>{const N=n.find(E=>E.auth_user_id===P.created_by);return a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[a.jsxs("div",{className:"space-y-1 min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium leading-none truncate",children:J(P,"project_name")}),a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:N?J(N,"user_name"):"No client"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(fs,{value:P.progress,className:"w-16 sm:w-20 h-2"}),a.jsxs("span",{className:"text-xs sm:text-sm text-muted-foreground w-8",children:[P.progress,"%"]})]})]},P.project_id)}):a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:t("dashboard.noProjectsYet")})})]}),a.jsxs(ue,{children:[a.jsx(Re,{children:a.jsx($e,{className:"text-base sm:text-lg",children:t("dashboard.projectStatus")})}),a.jsxs(me,{className:"space-y-3 sm:space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 rounded-full bg-green-500"}),a.jsx("span",{className:"text-xs sm:text-sm",children:t("dashboard.completedStatus")})]}),a.jsx("span",{className:"text-xs sm:text-sm font-medium",children:b})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 rounded-full bg-blue-500"}),a.jsx("span",{className:"text-xs sm:text-sm",children:t("dashboard.inProgressStatus")})]}),a.jsx("span",{className:"text-xs sm:text-sm font-medium",children:v})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 rounded-full bg-gray-500"}),a.jsx("span",{className:"text-xs sm:text-sm",children:t("dashboard.notStartedStatus")})]}),a.jsx("span",{className:"text-xs sm:text-sm font-medium",children:w})]})]})]})]})]})}const Tl={users:["users"],projects:["projects"],tasks:["tasks"],stages:["stages"],globalStages:["stages","global"],clients:["clients"],teams:["teams"],teamMembers:["teams","members"],tickets:["tickets"],projectUsers:t=>["projects",t,"users"],comments:t=>["tasks",t,"comments"],rooms:t=>["rooms",t],messages:t=>["messages",t],userProjects:t=>["users",t,"projects"]},c4=()=>wl({queryKey:Tl.users,queryFn:gr.getAll}),cd=t=>wl({queryKey:Tl.userProjects(t),queryFn:()=>mn.getByUserAuthId(t),enabled:!!t}),u4=()=>wl({queryKey:Tl.tasks,queryFn:Ks.getAll}),d4=()=>wl({queryKey:Tl.globalStages,queryFn:Jr.getGlobalStages}),h4=()=>wl({queryKey:Tl.clients,queryFn:ld.getAll}),f4=jl("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function He({className:t,variant:e,...r}){return a.jsx("div",{className:z(f4({variant:e}),t),...r})}function m4(){var _;const{t}=it(),[e,r]=f.useState([]),[n,s]=f.useState([]),[o,i]=f.useState([]),[l,c]=f.useState(!0),[u,d]=f.useState(null),{user:h,loading:m}=ht(),{data:p=[],isLoading:y}=cd((h==null?void 0:h.id)||"");f.useEffect(()=>{h&&!m&&g()},[h,m]);const g=async()=>{try{c(!0),d(null);const k=(await Ks.getAll()).filter(N=>{var E;return N.assigned_to===((E=h==null?void 0:h.profile)==null?void 0:E.user_id)}),C=await gr.getAll(),P=await Jo.getAll();r(k),s(C),i(P)}catch(j){console.error("Failed to load employee data:",j),d(j.message||"Failed to load data")}finally{c(!1)}};if(l||m||!h)return a.jsx("div",{className:"flex items-center justify-center flex-1",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:t("common.loading")})]})});if(u)return a.jsx("div",{className:"flex items-center justify-center flex-1",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-red-600",children:t("common.error")}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:u}),a.jsx(K,{onClick:g,className:"mt-4",children:t("dashboard.retry")})]})});const x=e.filter(j=>j.task_status==="completed").length,b=e.filter(j=>j.task_status==="in_progress").length;e.filter(j=>j.task_status==="pending").length;const v=p.filter(j=>j.progress!==void 0&&j.progress<100).length,w=e.sort((j,k)=>new Date(k.created_at||"").getTime()-new Date(j.created_at||"").getTime()).slice(0,5);return a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold tracking-tight",children:t("employeeDashboard.title")}),a.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:t("employeeDashboard.subtitle",{name:J(h.profile||{},"user_name")||h.email})})]})}),a.jsxs(ue,{children:[a.jsx(Re,{children:a.jsxs($e,{className:"flex items-center gap-2",children:[a.jsx(Aa,{className:"h-5 w-5"}),t("employeeDashboard.employeeInfo")]})}),a.jsx(me,{children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:t("employeeDashboard.name")}),a.jsx("p",{className:"font-medium",children:J(h.profile||{},"user_name")||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:t("employeeDashboard.email")}),a.jsx("p",{className:"font-medium",children:h.email})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:t("employeeDashboard.role")}),a.jsx(He,{variant:"secondary",className:"capitalize",children:h.role})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:t("employeeDashboard.memberSince")}),a.jsx("p",{className:"font-medium",children:(_=h.profile)!=null&&_.created_at?new Date(h.profile.created_at).toLocaleDateString():"N/A"})]})]})})]}),a.jsxs("div",{className:"grid gap-4 sm:gap-6 grid-cols-2 md:grid-cols-3 lg:grid-cols-5",children:[a.jsxs(ue,{children:[a.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx($e,{className:"text-sm font-medium",children:t("employeeDashboard.myProjects")}),a.jsx(qu,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(me,{children:[a.jsx("div",{className:"text-2xl font-bold",children:p.length}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[v," ",t("employeeDashboard.active")]})]})]}),a.jsxs(ue,{children:[a.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx($e,{className:"text-sm font-medium",children:t("employeeDashboard.myTasks")}),a.jsx(fu,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(me,{children:[a.jsx("div",{className:"text-2xl font-bold",children:e.length}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[x," ",t("employeeDashboard.completed")]})]})]}),a.jsxs(ue,{children:[a.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx($e,{className:"text-sm font-medium",children:t("employeeDashboard.inProgress")}),a.jsx(V_,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(me,{children:[a.jsx("div",{className:"text-2xl font-bold",children:b}),a.jsx("p",{className:"text-xs text-muted-foreground",children:t("employeeDashboard.activeTasks")})]})]}),a.jsxs(ue,{children:[a.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx($e,{className:"text-sm font-medium",children:t("employeeDashboard.completedTasks")}),a.jsx(z_,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(me,{children:[a.jsx("div",{className:"text-2xl font-bold",children:x}),a.jsx("p",{className:"text-xs text-muted-foreground",children:t("employeeDashboard.finishedTasks")})]})]}),a.jsxs(ue,{children:[a.jsxs(Re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx($e,{className:"text-sm font-medium",children:t("employeeDashboard.leads")}),a.jsx(fu,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(me,{children:[a.jsx("div",{className:"text-2xl font-bold",children:o.length}),a.jsx("p",{className:"text-xs text-muted-foreground",children:t("employeeDashboard.totalLeads")})]})]})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsxs(ue,{children:[a.jsx(Re,{children:a.jsx($e,{children:t("employeeDashboard.myProjects")})}),a.jsx(me,{className:"space-y-4",children:p.length>0?p.slice(0,5).map(j=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-medium leading-none",children:j.project_name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:j.project_description||t("employeeDashboard.noDescription")})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(fs,{value:j.progress||0,className:"w-16 h-2"}),a.jsxs("span",{className:"text-sm text-muted-foreground w-8",children:[j.progress||0,"%"]})]})]},j.project_id)):a.jsx("p",{className:"text-sm text-muted-foreground",children:t("employeeDashboard.noProjectsAssigned")})})]}),a.jsxs(ue,{children:[a.jsx(Re,{children:a.jsx($e,{children:t("employeeDashboard.recentTasks")})}),a.jsx(me,{className:"space-y-4",children:w.length>0?w.map(j=>{var k;return a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-medium leading-none",children:j.task_name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:j.description||t("employeeDashboard.noDescription")})]}),a.jsx(He,{variant:j.task_status==="completed"?"default":j.task_status==="in_progress"?"secondary":"outline",className:"text-xs",children:(k=j.task_status)==null?void 0:k.replace("_"," ")})]},j.task_id)}):a.jsx("p",{className:"text-sm text-muted-foreground",children:t("employeeDashboard.noTasksAssigned")})})]})]})]})}const ud=f.forwardRef(({className:t,...e},r)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:r,className:z("w-full caption-bottom text-sm",t),...e})}));ud.displayName="Table";const dd=f.forwardRef(({className:t,...e},r)=>a.jsx("thead",{ref:r,className:z("[&_tr]:border-b",t),...e}));dd.displayName="TableHeader";const hd=f.forwardRef(({className:t,...e},r)=>a.jsx("tbody",{ref:r,className:z("[&_tr:last-child]:border-0",t),...e}));hd.displayName="TableBody";const p4=f.forwardRef(({className:t,...e},r)=>a.jsx("tfoot",{ref:r,className:z("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));p4.displayName="TableFooter";const rn=f.forwardRef(({className:t,...e},r)=>a.jsx("tr",{ref:r,className:z("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",t),...e}));rn.displayName="TableRow";const ut=f.forwardRef(({className:t,...e},r)=>a.jsx("th",{ref:r,className:z("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));ut.displayName="TableHead";const Xe=f.forwardRef(({className:t,...e},r)=>a.jsx("td",{ref:r,className:z("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));Xe.displayName="TableCell";const g4=f.forwardRef(({className:t,...e},r)=>a.jsx("caption",{ref:r,className:z("mt-4 text-sm text-muted-foreground",t),...e}));g4.displayName="TableCaption";const yh=1024;function po(){const[t,e]=f.useState(void 0);return f.useEffect(()=>{const r=window.matchMedia(`(max-width: ${yh-1}px)`),n=()=>{e(window.innerWidth<yh)};return r.addEventListener("change",n),e(window.innerWidth<yh),()=>r.removeEventListener("change",n)},[]),!!t}var VS="AlertDialog",[v4,uU]=ar(VS,[xS]),En=xS(),WS=t=>{const{__scopeAlertDialog:e,...r}=t,n=En(e);return a.jsx(Qp,{...n,...r,modal:!0})};WS.displayName=VS;var x4="AlertDialogTrigger",HS=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=En(r);return a.jsx(Yp,{...s,...n,ref:e})});HS.displayName=x4;var y4="AlertDialogPortal",qS=t=>{const{__scopeAlertDialog:e,...r}=t,n=En(e);return a.jsx(Jp,{...n,...r})};qS.displayName=y4;var w4="AlertDialogOverlay",KS=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=En(r);return a.jsx(kl,{...s,...n,ref:e})});KS.displayName=w4;var la="AlertDialogContent",[b4,_4]=v4(la),j4=dA("AlertDialogContent"),GS=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,children:n,...s}=t,o=En(r),i=f.useRef(null),l=be(e,i),c=f.useRef(null);return a.jsx(KM,{contentName:la,titleName:QS,docsSlug:"alert-dialog",children:a.jsx(b4,{scope:r,cancelRef:c,children:a.jsxs(Cl,{role:"alertdialog",...o,...s,ref:l,onOpenAutoFocus:X(s.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[a.jsx(j4,{children:n}),a.jsx(N4,{contentRef:i})]})})})});GS.displayName=la;var QS="AlertDialogTitle",YS=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=En(r);return a.jsx(El,{...s,...n,ref:e})});YS.displayName=QS;var JS="AlertDialogDescription",XS=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=En(r);return a.jsx(Pl,{...s,...n,ref:e})});XS.displayName=JS;var S4="AlertDialogAction",ZS=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=En(r);return a.jsx(ad,{...s,...n,ref:e})});ZS.displayName=S4;var e1="AlertDialogCancel",t1=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,{cancelRef:s}=_4(e1,r),o=En(r),i=be(e,s);return a.jsx(ad,{...o,...n,ref:i})});t1.displayName=e1;var N4=({contentRef:t})=>{const e=`\`${la}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${la}\` by passing a \`${JS}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${la}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return f.useEffect(()=>{var n;document.getElementById((n=t.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},k4=WS,C4=HS,E4=qS,r1=KS,n1=GS,s1=ZS,o1=t1,a1=YS,i1=XS;const Ja=k4,fd=C4,P4=E4,l1=f.forwardRef(({className:t,...e},r)=>a.jsx(r1,{className:z("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:r}));l1.displayName=r1.displayName;const go=f.forwardRef(({className:t,...e},r)=>a.jsxs(P4,{children:[a.jsx(l1,{}),a.jsx(n1,{ref:r,className:z("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));go.displayName=n1.displayName;const vo=({className:t,...e})=>a.jsx("div",{className:z("flex flex-col space-y-2 text-center sm:text-left",t),...e});vo.displayName="AlertDialogHeader";const xo=({className:t,...e})=>a.jsx("div",{className:z("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});xo.displayName="AlertDialogFooter";const yo=f.forwardRef(({className:t,...e},r)=>a.jsx(a1,{ref:r,className:z("text-lg font-semibold",t),...e}));yo.displayName=a1.displayName;const wo=f.forwardRef(({className:t,...e},r)=>a.jsx(i1,{ref:r,className:z("text-sm text-muted-foreground",t),...e}));wo.displayName=i1.displayName;const bo=f.forwardRef(({className:t,...e},r)=>a.jsx(s1,{ref:r,className:z(Np(),t),...e}));bo.displayName=s1.displayName;const _o=f.forwardRef(({className:t,...e},r)=>a.jsx(o1,{ref:r,className:z(Np({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));_o.displayName=o1.displayName;const Gt=Qp,Da=Yp,T4=Jp,c1=f.forwardRef(({className:t,...e},r)=>a.jsx(kl,{ref:r,className:z("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));c1.displayName=kl.displayName;const At=f.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(T4,{children:[a.jsx(c1,{}),a.jsxs(Cl,{ref:n,className:z("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[e,a.jsxs(ad,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[a.jsx(G_,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));At.displayName=Cl.displayName;const It=({className:t,...e})=>a.jsx("div",{className:z("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});It.displayName="DialogHeader";const vr=({className:t,...e})=>a.jsx("div",{className:z("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});vr.displayName="DialogFooter";const Dt=f.forwardRef(({className:t,...e},r)=>a.jsx(El,{ref:r,className:z("text-lg font-semibold leading-none tracking-tight",t),...e}));Dt.displayName=El.displayName;const xr=f.forwardRef(({className:t,...e},r)=>a.jsx(Pl,{ref:r,className:z("text-sm text-muted-foreground",t),...e}));xr.displayName=Pl.displayName;const xn=f.forwardRef(({className:t,...e},r)=>a.jsx("textarea",{className:z("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));xn.displayName="Textarea";function tg({stages:t,currentStageId:e,onStageChange:r,children:n}){if(!po())return a.jsx(a.Fragment,{children:n});const o=t.find(i=>i.id===e)??t[0];return a.jsxs("div",{className:"flex flex-col h-[calc(100vh-200px)]",children:[a.jsx("div",{className:"border-b bg-background/95 backdrop-blur sticky top-0 z-20 shadow-sm",children:a.jsx("div",{className:"w-full overflow-x-auto scrollbar-hide",dir:Kt()?"ltr":"rtl",children:a.jsx("div",{className:"flex gap-2 p-3 min-w-max rtl:flex-row-reverse",children:[...t].sort((i,l)=>(Kt(),i.id-l.id)).map(i=>{const l=i.id===o.id;return a.jsxs("button",{onClick:()=>r(i.id),className:z("inline-flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all font-medium text-sm border-2 flex-shrink-0",l?"bg-primary text-primary-foreground shadow-md border-primary":"bg-card text-muted-foreground hover:bg-accent hover:text-accent-foreground border-border"),children:[a.jsx("span",{className:"truncate max-w-[140px]",children:i.name}),a.jsx(He,{variant:"secondary",className:z("h-5 min-w-5 px-1.5 text-xs font-semibold",l?"bg-primary-foreground/20 text-primary-foreground border-primary-foreground/30":"bg-muted"),children:i.count})]},i.id)})})})}),a.jsx("div",{className:"flex-1 overflow-auto scrollbar-hide",children:a.jsx("div",{className:"p-4",children:n})})]})}function R4({lead:t,client:e,creator:r,assignedUser:n,userRole:s,onDelete:o,onClick:i,onDragStart:l,isDragging:c=!1}){const{t:u}=it(),d=po(),h=m=>m?new Date(m).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):u("leads.unknown");return a.jsxs(ue,{className:z("group relative hover:shadow-lg transition-all duration-200 cursor-pointer",d?"w-full border-l-4 border-l-blue-500 rtl:border-l-0 rtl:border-r-4 rtl:border-r-blue-500":"w-[280px] sm:w-[300px]",c&&"opacity-50 rotate-2 scale-105"),onClick:i,draggable:!!l,onDragStart:m=>{l&&(m.dataTransfer.effectAllowed="move",m.dataTransfer.setData("text/plain",t.lead_id.toString()),l(t.lead_id))},children:[a.jsx(Re,{className:"pb-3 px-4 pt-4",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-base mb-1 truncate group-hover:text-primary transition-colors",children:J(t,"lead_name")}),J(t,"lead_description")&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:J(t,"lead_description")})]}),o&&a.jsxs(Ja,{children:[a.jsx(fd,{asChild:!0,onClick:m=>m.stopPropagation(),children:a.jsx(K,{variant:"ghost",size:"sm",className:z("h-8 w-8 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10",d?"opacity-100":"opacity-0 group-hover:opacity-100 transition-opacity"),children:a.jsx(mo,{className:"h-4 w-4"})})}),a.jsxs(go,{onClick:m=>m.stopPropagation(),children:[a.jsxs(vo,{children:[a.jsx(yo,{children:u("leads.deleteLead")}),a.jsx(wo,{children:u("leads.deleteConfirmation",{name:J(t,"lead_name")})})]}),a.jsxs(xo,{children:[a.jsx(_o,{children:u("buttons.cancel")}),a.jsx(bo,{onClick:m=>{m.stopPropagation(),o(t.lead_id)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:u("buttons.delete")})]})]})]})]})}),a.jsxs(me,{className:"px-4 pb-4 space-y-3",children:[e&&a.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md bg-muted/50",children:[a.jsx(Ra,{className:"h-4 w-4 text-primary flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:u("leads.client")}),a.jsx("p",{className:"text-sm font-medium truncate",children:J(e,"user_name")})]})]}),(s==="admin"||s==="manager")&&a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r&&a.jsxs("div",{className:"flex items-start gap-1.5",children:[a.jsx(Aa,{className:"h-3.5 w-3.5 text-muted-foreground mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-[10px] text-muted-foreground",children:u("leads.createdBy")}),a.jsx("p",{className:"text-xs font-medium truncate",children:J(r,"user_name")})]})]}),n&&a.jsxs("div",{className:"flex items-start gap-1.5",children:[a.jsx(Aa,{className:"h-3.5 w-3.5 text-muted-foreground mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-[10px] text-muted-foreground",children:u("leads.assignedTo")}),a.jsx("p",{className:"text-xs font-medium truncate",children:J(n,"user_name")})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[a.jsx(Oa,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:h(t.created_date)})]}),a.jsx(He,{variant:"secondary",className:"text-xs",children:u("leads.lead")})]})]})]})}function O4(){var ve,ke,Z;Ur();const{hasRole:t,user:e}=ht(),r=po(),{t:n}=it(),[s,o]=f.useState([]),[i,l]=f.useState([]),[c,u]=f.useState([]),[d,h]=f.useState([]),[m,p]=f.useState(!0);f.useState(!1),f.useState("");const[y,g]=f.useState(null),[x,b]=f.useState(""),[v,w]=f.useState(null),[_,j]=f.useState(null),[k,C]=f.useState(!1),[P,N]=f.useState(null),[E,L]=f.useState("kanban"),[T,W]=f.useState({lead_name:"",lead_description:"",client_name:"",client_user_id:"",stage:"1"});f.useEffect(()=>{O()},[]),f.useEffect(()=>{if(d.length>0&&P===null){const F=d.find(G=>G.stage_id===1);F&&N(F.stage_id)}},[d,P]);const O=async()=>{try{p(!0);const[F,G,ne,fe]=await Promise.all([Jo.getAll(),ld.getAll(),gr.getAll(),Jr.getGlobalStages()]);console.log("[Leads] Loaded data:",{leads:F.length,clients:G.length,users:ne.length,stages:fe.length}),console.log("[Leads] Leads data:",F),console.log("[Leads] Stages data:",fe),o(F),l(G),u(ne),h(fe)}catch(F){console.error("Failed to load data:",F)}finally{p(!1)}},H=async F=>{if(x.trim())try{await Jr.update(F,{stage_name:x.trim()}),h(d.map(G=>G.stage_id===F?{...G,stage_name:x.trim()}:G)),g(null),b("")}catch(G){console.error("Failed to update stage:",G)}},I=async F=>{if(s.filter(ne=>ne.stage===F).length>0){w(F);return}try{await Jr.delete(F),h(d.filter(ne=>ne.stage_id!==F))}catch(ne){console.error("Failed to delete stage:",ne)}},U=async()=>{if(v)try{await Jr.delete(v),h(d.filter(F=>F.stage_id!==v)),w(null),O()}catch(F){console.error("Failed to delete stage:",F)}},D=F=>{j(F)},$=F=>{F.preventDefault(),F.dataTransfer.dropEffect="move"},S=async F=>{if(!_)return;const G=s.find(ne=>ne.lead_id===_);if(G&&G.stage!==F)try{await Jo.update(_,{stage:F}),o(s.map(ne=>ne.lead_id===_?{...ne,stage:F}:ne))}catch(ne){console.error("Failed to update lead stage:",ne)}j(null)},M=async F=>{try{await Jo.delete(F),o(s.filter(G=>G.lead_id!==F))}catch(G){console.error("Failed to delete lead:",G)}},Y=F=>{W(G=>({...G,stage:F.toString()})),C(!0)},ye=async()=>{if(T.lead_name.trim())try{const F=_r({lead_name:T.lead_name.trim(),lead_description:T.lead_description.trim()||null,client_name:T.client_name.trim()||null,client_user_id:T.client_user_id||null,created_by:(e==null?void 0:e.id)||null,stage:parseInt(T.stage)},{lead_name:"lead_name",lead_description:"lead_description",client_name:"client_name"}),G=await Jo.create(F);o([...s,G]),W({lead_name:"",lead_description:"",client_name:"",client_user_id:"",stage:"1"}),C(!1)}catch(F){console.error("Failed to create lead:",F)}},pe=d.filter(F=>[1,2,3,4].includes(F.stage_id)).sort((F,G)=>Kt()?G.stage_id-F.stage_id:F.stage_id-G.stage_id).map(F=>({id:F.stage_id,name:J(F,"stage_name"),color:F.color,count:s.filter(G=>G.stage===F.stage_id).length}));return m?a.jsx("div",{className:"flex items-center justify-center h-full py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:n("leads.title")}),a.jsx("p",{className:"text-muted-foreground mt-2 text-base",children:n("leads.subtitle")})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex items-center border rounded-lg p-1 bg-muted/50",children:[a.jsxs(K,{variant:E==="kanban"?"default":"ghost",size:"sm",onClick:()=>L("kanban"),className:"h-8 px-3",children:[a.jsx(Ep,{className:"h-4 w-4 mr-2"}),n("common.kanban")]}),a.jsxs(K,{variant:E==="list"?"default":"ghost",size:"sm",onClick:()=>L("list"),className:"h-8 px-3",children:[a.jsx(Pp,{className:"h-4 w-4 mr-2"}),n("common.list")]})]}),a.jsxs(K,{size:"lg",className:"shadow-lg hover:shadow-xl transition-all",onClick:()=>C(!0),children:[a.jsx(yt,{className:"h-5 w-5 mr-2"}),n("leads.newLead")]})]})]}),E==="kanban"?a.jsxs(tg,{stages:pe,currentStageId:P||((ve=pe[0])==null?void 0:ve.id),onStageChange:N,children:[a.jsx(Gt,{open:k,onOpenChange:C,children:a.jsxs(At,{className:"sm:max-w-[500px]",children:[a.jsxs(It,{children:[a.jsx(Dt,{children:n("leads.createLead")}),a.jsx(xr,{children:n("leads.createLeadDesc")})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-sm font-medium",children:[n("leads.leadName")," *"]}),a.jsx(Ne,{value:T.lead_name,onChange:F=>W(G=>({...G,lead_name:F.target.value})),placeholder:n("leads.leadNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.description")}),a.jsx(xn,{value:T.lead_description,onChange:F=>W(G=>({...G,lead_description:F.target.value})),placeholder:n("leads.descriptionPlaceholder"),rows:3})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.clientName")}),a.jsx(Ne,{value:T.client_name,onChange:F=>W(G=>({...G,client_name:F.target.value})),placeholder:n("leads.clientNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.client")}),a.jsxs(Ze,{value:T.client_user_id,onValueChange:F=>W(G=>({...G,client_user_id:F})),children:[a.jsx(Ve,{children:a.jsx(et,{placeholder:n("leads.selectClient")})}),a.jsx(We,{children:i.map(F=>a.jsx(de,{value:F.auth_user_id||"",children:J(F,"user_name")},F.user_id))})]})]})]}),a.jsxs(vr,{children:[a.jsx(K,{variant:"outline",onClick:()=>C(!1),children:n("buttons.cancel")}),a.jsxs(K,{onClick:ye,disabled:!((ke=T.lead_name)!=null&&ke.trim()),children:[a.jsx(qs,{className:"h-4 w-4 mr-2"}),n("leads.createLead")]})]})]})}),a.jsx("div",{className:"flex gap-6 pb-6 overflow-x-auto scrollbar-hide rtl:flex-row-reverse max-w-full pl-6 rtl:pr-6 rtl:pl-0",children:d.filter(F=>[1,2,3,4].includes(F.stage_id)).sort((F,G)=>Kt?G.stage_id-F.stage_id:F.stage_id-G.stage_id).filter(F=>{var G;return r?F.stage_id===(P||((G=pe[0])==null?void 0:G.id)):!0}).map((F,G)=>{var fe,ge;const ne=s.filter(we=>we.stage===F.stage_id);return console.log(`[Leads] Stage ${F.stage_name} (${F.stage_id}): ${ne.length} leads`),console.log("[Leads] Stage leads:",ne),a.jsxs("div",{className:z("flex-shrink-0 animate-fade-in",r?"w-full":"w-[280px] sm:w-[300px]"),style:{animationDelay:`${G*.1}s`},onDragOver:$,onDrop:()=>S(F.stage_id),children:[a.jsx("div",{className:z("rounded-xl bg-muted/30 backdrop-blur p-4 mb-5 shadow-soft hidden md:block",F.color||"border-l-4 border-primary/50"),children:a.jsx("div",{className:"flex items-center justify-between mb-2 rtl:flex-row-reverse",children:y===F.stage_id?a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(Ne,{value:x,onChange:we=>b(we.target.value),onKeyDown:we=>{we.key==="Enter"&&H(F.stage_id),we.key==="Escape"&&(g(null),b(""))},className:"h-8 text-sm font-bold",autoFocus:!0}),a.jsx(K,{size:"sm",variant:"ghost",onClick:()=>H(F.stage_id),className:"h-8 w-8 p-0",children:""})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Cp,{className:"h-4 w-4 text-muted-foreground cursor-move"}),a.jsx("h2",{className:"font-bold text-base",children:J(F,"stage_name")})]}),a.jsxs("div",{className:"flex items-center gap-2 rtl:flex-row-reverse",children:[a.jsx("span",{className:"text-sm font-bold px-3 py-1 rounded-full bg-background shadow-sm",children:ne.length}),a.jsxs(a.Fragment,{children:[a.jsx(K,{size:"sm",variant:"ghost",onClick:()=>{g(F.stage_id),b(F.stage_name)},className:"h-6 w-6 p-0",title:"Edit stage",children:a.jsx(H_,{className:"h-3 w-3"})}),a.jsx(K,{size:"sm",variant:"ghost",onClick:()=>I(F.stage_id),className:"h-6 w-6 p-0 text-destructive",title:"Delete stage",children:a.jsx(mo,{className:"h-3 w-3"})})]})]})]})})}),a.jsxs("div",{className:"space-y-4 max-h-[calc(100vh-300px)] overflow-y-auto pr-2 rtl:pr-0 rtl:pl-2 scrollbar-hide",children:[((fe=d.sort((we,Qe)=>(we.stager_order_index||0)-(Qe.stager_order_index||0))[0])==null?void 0:fe.stage_id)===F.stage_id&&a.jsx("div",{className:"mb-4",children:a.jsx(ue,{className:z("group relative hover:shadow-lg transition-all duration-200 cursor-pointer","border-l-4 border-l-gray-300 rtl:border-l-0 rtl:border-r-4 rtl:border-r-gray-300","flex items-center justify-center bg-muted/20",r?"w-full h-[100px]":"w-[280px] sm:w-[300px] h-[120px]"),onClick:()=>Y(F.stage_id),children:a.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[a.jsx(yt,{className:"h-8 w-8"}),a.jsx("span",{className:"text-sm font-medium",children:n("leads.addNewLeadCard")})]})})}),ne.map(we=>{const Qe=i.find(B=>B.auth_user_id===we.client_user_id),V=c.find(B=>B.auth_user_id===we.created_by),A=c.find(B=>B.auth_user_id===we.assigned_to);return a.jsx("div",{children:a.jsx(R4,{lead:we,client:Qe||null,creator:V||null,assignedUser:A||null,userRole:e==null?void 0:e.role,onDelete:()=>M(we.lead_id),onClick:()=>{},onDragStart:D,isDragging:_===we.lead_id})},we.lead_id)}),((ge=d.sort((we,Qe)=>(we.stager_order_index||0)-(Qe.stager_order_index||0))[0])==null?void 0:ge.stage_id)!==F.stage_id&&a.jsx("div",{className:"mt-2",children:a.jsxs(K,{variant:"outline",size:"sm",className:"w-full h-12 border-dashed text-muted-foreground hover:text-foreground",onClick:()=>Y(F.stage_id),children:[a.jsx(yt,{className:"h-4 w-4 mr-2"}),n("leads.addLead")]})})]})]},F.stage_id)})}),a.jsx(Ja,{open:!!v,onOpenChange:()=>w(null),children:a.jsxs(go,{children:[a.jsxs(vo,{children:[a.jsx(yo,{children:n("leads.deleteStage")}),a.jsx(wo,{children:n("leads.deleteStageConfirmation",{count:s.filter(F=>F.stage===v).length})})]}),a.jsxs(xo,{children:[a.jsx(_o,{children:n("buttons.cancel")}),a.jsx(bo,{onClick:U,className:"bg-destructive text-destructive-foreground",children:n("buttons.delete")})]})]})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-lg font-semibold",children:[n("leads.title")," (",s.length,")"]}),a.jsx(Gt,{open:k,onOpenChange:C,children:a.jsxs(At,{className:"sm:max-w-[500px]",children:[a.jsxs(It,{children:[a.jsx(Dt,{children:n("leads.createLead")}),a.jsx(xr,{children:n("leads.createLeadDesc")})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-sm font-medium",children:[n("leads.leadName")," *"]}),a.jsx(Ne,{value:T.lead_name,onChange:F=>W(G=>({...G,lead_name:F.target.value})),placeholder:n("leads.leadNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.description")}),a.jsx(xn,{value:T.lead_description,onChange:F=>W(G=>({...G,lead_description:F.target.value})),placeholder:n("leads.descriptionPlaceholder"),rows:3})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.clientName")}),a.jsx(Ne,{value:T.client_name,onChange:F=>W(G=>({...G,client_name:F.target.value})),placeholder:n("leads.clientNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.client")}),a.jsxs(Ze,{value:T.client_user_id,onValueChange:F=>W(G=>({...G,client_user_id:F})),children:[a.jsx(Ve,{children:a.jsx(et,{placeholder:n("leads.selectClient")})}),a.jsx(We,{children:i.map(F=>a.jsx(de,{value:F.auth_user_id||"",children:J(F,"user_name")},F.user_id))})]})]})]}),a.jsxs(vr,{children:[a.jsx(K,{variant:"outline",onClick:()=>C(!1),children:n("buttons.cancel")}),a.jsxs(K,{onClick:ye,disabled:!((Z=T.lead_name)!=null&&Z.trim()),children:[a.jsx(qs,{className:"h-4 w-4 mr-2"}),n("leads.createLead")]})]})]})})]}),a.jsxs(ue,{className:"max-h-[calc(100vh-300px)] flex flex-col",children:[a.jsx(Re,{className:"flex-shrink-0",children:a.jsx($e,{children:n("leads.title")})}),a.jsx(me,{className:"flex-1 overflow-y-auto",children:a.jsxs(ud,{children:[a.jsx(dd,{children:a.jsxs(rn,{children:[a.jsx(ut,{children:n("leads.leadName")}),a.jsx(ut,{children:n("leads.client")}),a.jsx(ut,{children:n("leads.createdBy")}),a.jsx(ut,{children:n("common.created")}),a.jsx(ut,{children:n("tasks.stage")}),a.jsx(ut,{className:"w-[100px]",children:n("common.actions")})]})}),a.jsx(hd,{children:s.length===0?a.jsx(rn,{children:a.jsx(Xe,{colSpan:6,className:"text-center py-12",children:a.jsx("div",{className:"text-muted-foreground",children:n("leads.noLeadsYet")})})}):s.map(F=>{const G=i.find(ge=>ge.auth_user_id===F.client_user_id),ne=c.find(ge=>ge.auth_user_id===F.created_by),fe=d.find(ge=>ge.stage_id===F.stage);return a.jsxs(rn,{className:"cursor-pointer hover:bg-muted/50",children:[a.jsx(Xe,{children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:J(F,"lead_name")}),J(F,"lead_description")&&a.jsx("div",{className:"text-sm text-muted-foreground truncate max-w-xs",children:J(F,"lead_description")})]})}),a.jsx(Xe,{children:G?J(G,"user_name"):n("leads.unknown")}),a.jsx(Xe,{children:ne?J(ne,"user_name"):n("leads.unknown")}),a.jsx(Xe,{children:F.created_date?new Date(F.created_date).toLocaleDateString():n("leads.notSet")}),a.jsx(Xe,{children:fe?J(fe,"stage_name"):n("leads.unknown")}),a.jsx(Xe,{children:a.jsx(K,{variant:"ghost",size:"sm",children:n("common.view")})})]},F.lead_id)})})]})})]})]})]})}function A4({task:t,assignedUser:e,onDelete:r,onClick:n,onDragStart:s,isDragging:o=!1}){var d;const i=po(),l=h=>h?new Date(h).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Not set",c=h=>{switch(h){case"done":return a.jsx(z_,{className:"h-3 w-3 text-green-500"});case"in_progress":return a.jsx(V_,{className:"h-3 w-3 text-blue-500"});case"todo":default:return a.jsx(cI,{className:"h-3 w-3 text-gray-500"})}},u=h=>{switch(h){case"done":return"border-l-green-500 rtl:border-r-green-500";case"in_progress":return"border-l-blue-500 rtl:border-r-blue-500";case"todo":default:return"border-l-gray-500 rtl:border-r-gray-500"}};return a.jsxs(ue,{className:z("group relative hover:shadow-lg transition-all duration-200 cursor-pointer","border-l-4 rtl:border-l-0 rtl:border-r-4",i?"w-full":"w-[280px] h-[180px]",u(t.task_status),o&&"opacity-50 rotate-2 scale-105"),onClick:n,draggable:!!s,onDragStart:h=>{s&&(h.dataTransfer.effectAllowed="move",h.dataTransfer.setData("text/plain",t.task_id.toString()),s(t.task_id))},children:[a.jsx(Re,{className:"pb-3 px-4 pt-4",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-base mb-1 truncate group-hover:text-primary transition-colors",children:t.task_name}),t.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:t.description})]}),r&&a.jsxs(Ja,{children:[a.jsx(fd,{asChild:!0,onClick:h=>h.stopPropagation(),children:a.jsx(K,{variant:"ghost",size:"sm",className:z("h-8 w-8 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10",i?"opacity-100":"opacity-0 group-hover:opacity-100 transition-opacity"),children:a.jsx(mo,{className:"h-4 w-4"})})}),a.jsxs(go,{onClick:h=>h.stopPropagation(),children:[a.jsxs(vo,{children:[a.jsx(yo,{children:"Delete Task"}),a.jsxs(wo,{children:['Are you sure you want to delete "',t.task_name,'"?']})]}),a.jsxs(xo,{children:[a.jsx(_o,{children:"Cancel"}),a.jsx(bo,{onClick:h=>{h.stopPropagation(),r(t.task_id)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})]})}),a.jsxs(me,{className:"px-4 pb-3 space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("div",{className:"space-y-1.5 flex-1 min-w-0",children:e&&a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(Aa,{className:"h-3 w-3 text-muted-foreground flex-shrink-0"}),a.jsx("p",{className:"text-xs font-medium truncate",children:J(e,"user_name")})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex items-center gap-1",children:[c(t.task_status),a.jsx("span",{className:"text-xs font-medium capitalize",children:((d=t.task_status)==null?void 0:d.replace("_"," "))||"Todo"})]})})]}),t.due_date&&a.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-muted-foreground pt-1 border-t",children:[a.jsx(Oa,{className:"h-3 w-3 flex-shrink-0"}),a.jsxs("span",{children:["Due: ",l(t.due_date)]})]})]})]})}function I4(){var $;Ur();const{hasRole:t,user:e,loading:r}=ht(),{t:n}=it(),s=po(),[o,i]=f.useState(null),[l,c]=f.useState("kanban");f.useState(!1);const u=S=>{switch(S==null?void 0:S.toLowerCase()){case"done":case"completed":return"default";case"in_progress":return"secondary";case"pending":case"todo":return"outline";default:return"secondary"}};f.useState(""),f.useState(null),f.useState(""),f.useState(null);const[d,h]=f.useState(null),[m,p]=f.useState(!1),[y,g]=f.useState({task_name:"",description:"",assigned_to:"",task_status:"todo",due_date:"",stage_id:""}),{data:x=[],isLoading:b,error:v}=u4(),{data:w=[],isLoading:_,error:j}=c4(),{data:k=[],isLoading:C,error:P}=d4(),N=b||_||C||r,E=(v==null?void 0:v.message)||(j==null?void 0:j.message)||(P==null?void 0:P.message)||null;console.log("[Tasks] Rendering. Auth state:",{user:e?{id:e.id,email:e.email,role:e.role}:null,authLoading:r,hasUser:!!e,loading:N,data:{tasks:x.length,users:w.length,stages:k.length}});const L=()=>{},T=async S=>{try{await Ks.delete(S),L()}catch(M){console.error("Failed to delete task:",M)}},W=S=>{h(S)},O=S=>{S.preventDefault(),S.dataTransfer.dropEffect="move"},H=async S=>{if(!d)return;const M=x.find(Y=>Y.task_id===d);if(M&&M.stage_id!==S)try{await Ks.update(d,{stage_id:S}),L()}catch(Y){console.error("Failed to update task stage:",Y)}h(null)},I=async()=>{if(y.task_name.trim())try{const S=_r({task_name:y.task_name.trim(),stage_id:y.stage_id?parseInt(y.stage_id):null,assigned_to:y.assigned_to?parseInt(y.assigned_to):null,task_status:y.task_status,due_date:y.due_date?new Date(y.due_date).toISOString():null,description:y.description.trim()||null,auth_user_id:(e==null?void 0:e.id)||null},{task_name:"task_name",description:"description"});await Ks.create(S),L(),g({task_name:"",description:"",assigned_to:"",task_status:"todo",due_date:"",stage_id:""}),p(!1)}catch(S){console.error("Failed to create task:",S)}},U=!0;f.useEffect(()=>{if(k.length>0&&o===null){const S=k.find(M=>M.stage_id===5);S&&i(S.stage_id)}},[k,o,Kt]);const D=k.filter(S=>[5,6,7,8].includes(S.stage_id)).sort((S,M)=>Kt()?M.stage_id-S.stage_id:S.stage_id-M.stage_id).map(S=>({id:S.stage_id,name:J(S,"stage_name"),color:S.color,count:x.filter(M=>M.stage_id===S.stage_id).length}));return N||r||!e?a.jsx("div",{className:"flex items-center justify-center flex-1",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:n("tasks.loading")})]})}):E?a.jsx("div",{className:"flex items-center justify-center flex-1",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-red-600",children:n("tasks.error")}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:E})]})}):a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:n("tasks.title")}),a.jsx("p",{className:"text-muted-foreground mt-2 text-base",children:n("tasks.subtitle")})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex items-center border rounded-lg p-1 bg-muted/50",children:[a.jsxs(K,{variant:l==="kanban"?"default":"ghost",size:"sm",onClick:()=>c("kanban"),className:"h-8 px-3",children:[a.jsx(Ep,{className:"h-4 w-4 mr-2"}),n("common.kanban")]}),a.jsxs(K,{variant:l==="list"?"default":"ghost",size:"sm",onClick:()=>c("list"),className:"h-8 px-3",children:[a.jsx(Pp,{className:"h-4 w-4 mr-2"}),n("common.list")]})]}),a.jsxs(K,{size:"lg",className:"shadow-lg hover:shadow-xl transition-all",onClick:()=>p(!0),children:[a.jsx(yt,{className:"h-5 w-5 mr-2"}),n("tasks.newTask")]})]})]}),l==="kanban"?a.jsxs(tg,{stages:D,currentStageId:o||(($=D[0])==null?void 0:$.id),onStageChange:i,children:[a.jsx(Gt,{open:m,onOpenChange:p,children:a.jsxs(At,{className:"sm:max-w-[500px]",children:[a.jsxs(It,{children:[a.jsx(Dt,{children:n("tasks.createTask")}),a.jsx(xr,{children:n("tasks.createTaskDesc")})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-sm font-medium",children:[n("tasks.taskName")," *"]}),a.jsx(Ne,{value:y.task_name,onChange:S=>g(M=>({...M,task_name:S.target.value})),placeholder:n("tasks.taskNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.description")}),a.jsx(xn,{value:y.description,onChange:S=>g(M=>({...M,description:S.target.value})),placeholder:n("tasks.descriptionPlaceholder"),rows:3})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.selectUser")}),a.jsxs(Ze,{value:y.assigned_to,onValueChange:S=>g(M=>({...M,assigned_to:S})),children:[a.jsx(Ve,{children:a.jsx(et,{placeholder:n("tasks.selectUser")})}),a.jsx(We,{children:w.map(S=>a.jsx(de,{value:S.user_id.toString(),children:J(S,"user_name")},S.user_id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.selectStage")}),a.jsxs(Ze,{value:y.stage_id,onValueChange:S=>g(M=>({...M,stage_id:S})),children:[a.jsx(Ve,{children:a.jsx(et,{placeholder:n("tasks.selectStage")})}),a.jsx(We,{children:k.map(S=>a.jsx(de,{value:S.stage_id.toString(),children:J(S,"stage_name")},S.stage_id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.selectStatus")}),a.jsxs(Ze,{value:y.task_status,onValueChange:S=>g(M=>({...M,task_status:S})),children:[a.jsx(Ve,{children:a.jsx(et,{placeholder:n("tasks.selectStatus")})}),a.jsxs(We,{children:[a.jsx(de,{value:"todo",children:n("tasks.todo")}),a.jsx(de,{value:"in_progress",children:n("tasks.inProgress")}),a.jsx(de,{value:"done",children:n("tasks.done")})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.dueDate")}),a.jsx(Ne,{type:"date",value:y.due_date,onChange:S=>g(M=>({...M,due_date:S.target.value}))})]})]}),a.jsxs(vr,{children:[a.jsx(K,{variant:"outline",onClick:()=>p(!1),children:n("buttons.cancel")}),a.jsxs(K,{onClick:I,disabled:!y.task_name.trim(),children:[a.jsx(qs,{className:"h-4 w-4 mr-2"}),n("tasks.createTask")]})]})]})}),a.jsx("div",{className:"flex gap-6 pb-6 overflow-x-auto scrollbar-hide rtl:flex-row-reverse max-w-full pl-6 rtl:pr-6 rtl:pl-0",children:k.filter(S=>[5,6,7,8].includes(S.stage_id)).sort((S,M)=>Kt()?M.stage_id-S.stage_id:S.stage_id-M.stage_id).filter(S=>{var M;return s?S.stage_id===(o||((M=D[0])==null?void 0:M.id)):!0}).map((S,M)=>{var ye,pe;const Y=x.filter(ve=>ve.stage_id===S.stage_id);return a.jsxs("div",{className:z("flex-shrink-0 animate-fade-in",s?"w-full":"w-[300px]"),style:{animationDelay:`${M*.1}s`},onDragOver:O,onDrop:()=>H(S.stage_id),children:[a.jsx("div",{className:z("rounded-xl bg-muted/30 backdrop-blur p-4 mb-5 shadow-soft hidden md:block",S.color||"border-l-4 border-primary/50"),children:a.jsxs("div",{className:"flex items-center justify-between mb-2 rtl:flex-row-reverse",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Cp,{className:"h-4 w-4 text-muted-foreground cursor-move"}),a.jsx("h2",{className:"font-bold text-base",children:J(S,"stage_name")})]}),a.jsx("div",{className:"flex items-center gap-2 rtl:flex-row-reverse",children:a.jsx("span",{className:"text-sm font-bold px-3 py-1 rounded-full bg-background shadow-sm",children:Y.length})})]})}),a.jsxs("div",{className:"space-y-4 max-h-[calc(100vh-300px)] overflow-y-auto pr-2 custom-scrollbar",children:[((ye=k.sort((ve,ke)=>(ve.stager_order_index||0)-(ke.stager_order_index||0))[0])==null?void 0:ye.stage_id)===S.stage_id&&a.jsx("div",{className:"mb-4",children:a.jsx(ue,{className:z("group relative hover:shadow-lg transition-all duration-200 cursor-pointer","border-l-4 border-l-gray-300 rtl:border-l-0 rtl:border-r-4 rtl:border-r-gray-300","flex items-center justify-center bg-muted/20",s?"w-full h-[100px]":"w-[280px] h-[120px]"),onClick:()=>p(!0),children:a.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[a.jsx(yt,{className:"h-8 w-8"}),a.jsx("span",{className:"text-sm font-medium",children:n("tasks.addNewTask")})]})})}),Y.map(ve=>{const ke=w.find(Z=>Z.user_id===ve.assigned_to);return a.jsx("div",{draggable:U,onDragStart:()=>W(ve.task_id),className:"cursor-move",children:a.jsx(A4,{task:ve,assignedUser:ke||null,onDelete:()=>T(ve.task_id),onClick:()=>{console.log("Task clicked:",ve.task_id)},onDragStart:W,isDragging:d===ve.task_id})},ve.task_id)}),((pe=k.sort((ve,ke)=>(ve.stager_order_index||0)-(ke.stager_order_index||0))[0])==null?void 0:pe.stage_id)!==S.stage_id&&a.jsx("div",{className:"mt-2",children:a.jsxs(K,{variant:"outline",size:"sm",className:"w-full h-12 border-dashed text-muted-foreground hover:text-foreground",onClick:()=>p(!0),children:[a.jsx(yt,{className:"h-4 w-4 mr-2"}),n("tasks.addTask")]})})]})]},S.stage_id)})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-lg font-semibold",children:[n("tasks.allTasks")," (",x.length,")"]}),a.jsx(Gt,{open:m,onOpenChange:p,children:a.jsxs(At,{className:"sm:max-w-[500px]",children:[a.jsxs(It,{children:[a.jsx(Dt,{children:n("tasks.createTask")}),a.jsx(xr,{children:n("tasks.createTaskDesc")})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-sm font-medium",children:[n("tasks.taskName")," *"]}),a.jsx(Ne,{value:y.task_name,onChange:S=>g(M=>({...M,task_name:S.target.value})),placeholder:n("tasks.taskNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.description")}),a.jsx(xn,{value:y.description,onChange:S=>g(M=>({...M,description:S.target.value})),placeholder:n("tasks.descriptionPlaceholder"),rows:3})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.selectUser")}),a.jsxs(Ze,{value:y.assigned_to,onValueChange:S=>g(M=>({...M,assigned_to:S})),children:[a.jsx(Ve,{children:a.jsx(et,{placeholder:n("tasks.selectUser")})}),a.jsx(We,{children:w.map(S=>a.jsx(de,{value:S.user_id.toString(),children:J(S,"user_name")},S.user_id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.selectStage")}),a.jsxs(Ze,{value:y.stage_id,onValueChange:S=>g(M=>({...M,stage_id:S})),children:[a.jsx(Ve,{children:a.jsx(et,{placeholder:n("tasks.selectStage")})}),a.jsx(We,{children:k.map(S=>a.jsx(de,{value:S.stage_id.toString(),children:J(S,"stage_name")},S.stage_id))})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.selectStatus")}),a.jsxs(Ze,{value:y.task_status,onValueChange:S=>g(M=>({...M,task_status:S})),children:[a.jsx(Ve,{children:a.jsx(et,{placeholder:n("tasks.selectStatus")})}),a.jsxs(We,{children:[a.jsx(de,{value:"todo",children:n("tasks.todo")}),a.jsx(de,{value:"in_progress",children:n("tasks.inProgress")}),a.jsx(de,{value:"done",children:n("tasks.done")})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.dueDate")}),a.jsx(Ne,{type:"date",value:y.due_date,onChange:S=>g(M=>({...M,due_date:S.target.value}))})]})]})]}),a.jsxs(vr,{children:[a.jsx(K,{variant:"outline",onClick:()=>p(!1),children:n("buttons.cancel")}),a.jsxs(K,{onClick:I,disabled:!y.task_name.trim(),children:[a.jsx(qs,{className:"h-4 w-4 mr-2"}),n("tasks.createTask")]})]})]})})]}),a.jsx(ue,{className:"max-h-[calc(100vh-300px)] flex flex-col",children:a.jsx(me,{className:"p-0 flex-1 overflow-y-auto",children:a.jsxs(ud,{children:[a.jsx(dd,{children:a.jsxs(rn,{children:[a.jsx(ut,{children:n("tasks.taskName")}),a.jsx(ut,{children:n("tasks.assignedTo")}),a.jsx(ut,{children:n("tasks.status")}),a.jsx(ut,{children:n("tasks.dueDate")}),a.jsx(ut,{children:n("tasks.stage")}),a.jsx(ut,{className:"w-[100px]",children:n("common.actions")})]})}),a.jsx(hd,{children:x.length===0?a.jsx(rn,{children:a.jsx(Xe,{colSpan:6,className:"text-center py-12",children:a.jsx("div",{className:"text-muted-foreground",children:n("tasks.noTasksYet")})})}):x.map(S=>{const M=w.find(ye=>ye.user_id===S.assigned_to),Y=k.find(ye=>ye.stage_id===S.stage_id);return a.jsxs(rn,{className:"cursor-pointer hover:bg-muted/50",children:[a.jsx(Xe,{children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:S.task_name}),S.description&&a.jsx("div",{className:"text-sm text-muted-foreground truncate max-w-xs",children:S.description})]})}),a.jsx(Xe,{children:M?J(M,"user_name"):n("leads.unknown")}),a.jsx(Xe,{children:a.jsx(He,{variant:u(S.task_status),children:S.task_status||n("leads.unknown")})}),a.jsx(Xe,{children:S.due_date?new Date(S.due_date).toLocaleDateString():n("leads.notSet")}),a.jsx(Xe,{children:Y?J(Y,"stage_name"):n("leads.unknown")}),a.jsx(Xe,{children:a.jsx(K,{variant:"ghost",size:"sm",children:n("common.view")})})]},S.task_id)})})]})})})]})]})}function D4(){const[t,e]=f.useState([]),[r,n]=f.useState([]),[s,o]=f.useState(!0),[i,l]=f.useState(null),[c,u]=f.useState(""),[d,h]=f.useState("all"),[m,p]=f.useState("all"),[y,g]=f.useState(!1),[x,b]=f.useState(null),[v,w]=f.useState(!1),[_,j]=f.useState({subject:"",description:"",priority:"medium",ticket_type:"request",assigned_to:""}),[k,C]=f.useState(""),[P,N]=f.useState(!1),{user:E,loading:L}=ht(),{t:T}=it();f.useEffect(()=>{E&&!L&&W()},[E,L]);const W=async()=>{try{o(!0),l(null);const[S,M]=await Promise.all([my.getAll().catch(Y=>(console.error("[Tickets] Error fetching tickets:",Y),[])),gr.getAll().catch(Y=>(console.error("[Tickets] Error fetching users:",Y),[]))]);e(S),n(M)}catch(S){console.error("[Tickets] Failed to load data:",S),l(S.message||T("common.error"))}finally{o(!1)}},O=S=>{if(!S)return T("leads.unknown");const M=r.find(Y=>Y.user_id===S);return M?J(M,"user_name"):T("leads.unknown")},H=S=>{switch(S==null?void 0:S.toLowerCase()){case"open":return"destructive";case"in_progress":return"default";case"resolved":return"secondary";case"closed":return"outline";default:return"secondary"}},I=S=>{switch(S==null?void 0:S.toLowerCase()){case"urgent":return"destructive";case"high":return"default";case"medium":return"secondary";case"low":return"outline";default:return"secondary"}},U=async S=>{var M;if(S.preventDefault(),!(P||!E)){C(""),N(!0);try{const Y={subject:_.subject,description:_.description||null,priority:_.priority,ticket_type:_.ticket_type,status:"open",created_by:((M=E.profile)==null?void 0:M.user_id)||null,assigned_to:_.assigned_to?parseInt(_.assigned_to):null,auth_user_id:E.id,resolved_date:null,closed_at:null,closed_by:null,room_id:null,task_id:null};await my.create(Y),j({subject:"",description:"",priority:"medium",ticket_type:"request",assigned_to:""}),g(!1),W()}catch(Y){C(Y.message||T("tickets.createError"))}finally{N(!1)}}},D=S=>{b(S),w(!0)},$=t.filter(S=>{var pe,ve;const M=((pe=S.subject)==null?void 0:pe.toLowerCase().includes(c.toLowerCase()))||((ve=S.description)==null?void 0:ve.toLowerCase().includes(c.toLowerCase()))||O(S.assigned_to).toLowerCase().includes(c.toLowerCase()),Y=d==="all"||S.status===d,ye=m==="all"||S.priority===m;return M&&Y&&ye});return s||L||!E?a.jsx("div",{className:"flex items-center justify-center flex-1",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:T("tickets.loading")})]})}):i?a.jsx("div",{className:"flex items-center justify-center flex-1",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-red-600",children:T("common.error")}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:i}),a.jsx(K,{onClick:W,className:"mt-4",children:T("dashboard.retry")})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold tracking-tight",children:T("tickets.title")}),a.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:T("tickets.subtitle")})]}),a.jsxs(Gt,{open:y,onOpenChange:g,children:[a.jsx(Da,{asChild:!0,children:a.jsxs(K,{size:"lg",className:"shadow-lg hover:shadow-xl transition-all",children:[a.jsx(yt,{className:"h-5 w-5 mr-2"}),T("tickets.newTicket")]})}),a.jsxs(At,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[a.jsxs(It,{children:[a.jsx(Dt,{children:T("tickets.createNewTicket")}),a.jsx(xr,{children:T("tickets.createTicketDesc")})]}),a.jsxs("form",{onSubmit:U,className:"space-y-4",children:[k&&a.jsx(nl,{variant:"destructive",children:a.jsx(sl,{children:k})}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Te,{htmlFor:"subject",children:[T("tickets.subject")," *"]}),a.jsx(Ne,{id:"subject",value:_.subject,onChange:S=>j(M=>({...M,subject:S.target.value})),placeholder:T("tickets.subjectPlaceholder"),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"description",children:T("tickets.description")}),a.jsx(xn,{id:"description",value:_.description,onChange:S=>j(M=>({...M,description:S.target.value})),placeholder:T("tickets.descriptionPlaceholder"),rows:3})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Te,{htmlFor:"priority",children:[T("tickets.priority")," *"]}),a.jsxs(Ze,{value:_.priority,onValueChange:S=>j(M=>({...M,priority:S})),children:[a.jsx(Ve,{children:a.jsx(et,{})}),a.jsxs(We,{children:[a.jsx(de,{value:"low",children:T("tickets.priorityLow")}),a.jsx(de,{value:"medium",children:T("tickets.priorityMedium")}),a.jsx(de,{value:"high",children:T("tickets.priorityHigh")}),a.jsx(de,{value:"urgent",children:T("tickets.priorityUrgent")})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Te,{htmlFor:"ticket_type",children:[T("tickets.ticketType")," *"]}),a.jsxs(Ze,{value:_.ticket_type,onValueChange:S=>j(M=>({...M,ticket_type:S})),children:[a.jsx(Ve,{children:a.jsx(et,{})}),a.jsxs(We,{children:[a.jsx(de,{value:"request",children:T("tickets.typeRequest")}),a.jsx(de,{value:"follow_up",children:T("tickets.typeFollowUp")}),a.jsx(de,{value:"issue",children:T("tickets.typeIssue")}),a.jsx(de,{value:"internal_task",children:T("tickets.typeInternalTask")})]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"assigned_to",children:T("tickets.assignTo")}),a.jsxs(Ze,{value:_.assigned_to,onValueChange:S=>j(M=>({...M,assigned_to:S})),children:[a.jsx(Ve,{children:a.jsx(et,{placeholder:T("tickets.selectAssignee")})}),a.jsx(We,{children:r.map(S=>a.jsx(de,{value:S.user_id.toString(),children:J(S,"user_name")},S.user_id))})]})]}),a.jsxs(vr,{className:"flex flex-col-reverse sm:flex-row gap-2",children:[a.jsx(K,{type:"button",variant:"outline",onClick:()=>g(!1),className:"w-full sm:w-auto",children:T("buttons.cancel")}),a.jsx(K,{type:"submit",disabled:P||!_.subject.trim(),className:"w-full sm:w-auto",children:T(P?"tickets.creatingTicket":"tickets.createTicket")})]})]})]})]}),a.jsx(Gt,{open:v,onOpenChange:w,children:a.jsxs(At,{className:"w-[95vw] max-w-[700px] max-h-[90vh] overflow-y-auto p-4 sm:p-6",children:[a.jsxs(It,{className:"space-y-3",children:[a.jsx(Dt,{className:"text-lg sm:text-xl leading-tight",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[a.jsx("span",{className:"break-words",children:x==null?void 0:x.subject}),a.jsx(He,{variant:H(x==null?void 0:x.status),className:"self-start sm:self-center shrink-0",children:(x==null?void 0:x.status)||T("leads.unknown")})]})}),a.jsxs(xr,{className:"text-sm",children:[T("tickets.ticketId"),": #",x==null?void 0:x.ticket_id]})]}),x&&a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(Te,{className:"text-sm font-medium",children:T("tickets.priority")}),a.jsx("div",{className:"mt-1",children:a.jsx(He,{variant:I(x.priority),className:"text-xs",children:x.priority||T("leads.unknown")})})]}),a.jsxs("div",{children:[a.jsx(Te,{className:"text-sm font-medium",children:T("tickets.ticketType")}),a.jsx("div",{className:"mt-1",children:a.jsx(He,{variant:"outline",className:"text-xs",children:x.ticket_type||T("leads.unknown")})})]})]}),a.jsxs("div",{children:[a.jsx(Te,{className:"text-sm font-medium",children:T("tickets.assignedTo")}),a.jsx("div",{className:"mt-1 text-sm break-words",children:O(x.assigned_to)})]}),a.jsxs("div",{children:[a.jsx(Te,{className:"text-sm font-medium",children:T("tickets.createdDate")}),a.jsx("div",{className:"mt-1 text-sm",children:x.created_date?new Date(x.created_date).toLocaleString():"N/A"})]})]}),x.description&&a.jsxs("div",{children:[a.jsx(Te,{className:"text-sm font-medium",children:T("tickets.description")}),a.jsx("div",{className:"mt-2 p-3 bg-muted rounded-md text-sm whitespace-pre-wrap break-words",children:x.description})]}),a.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[a.jsxs("div",{children:[a.jsx(Te,{className:"text-sm font-medium",children:T("tickets.createdBy")}),a.jsx("div",{className:"mt-1 text-sm break-words",children:O(x.created_by)})]}),x.resolved_date&&a.jsxs("div",{children:[a.jsx(Te,{className:"text-sm font-medium",children:T("tickets.resolvedDate")}),a.jsx("div",{className:"mt-1 text-sm",children:new Date(x.resolved_date).toLocaleString()})]}),x.closed_at&&a.jsxs("div",{children:[a.jsx(Te,{className:"text-sm font-medium",children:T("tickets.closedDate")}),a.jsx("div",{className:"mt-1 text-sm",children:new Date(x.closed_at).toLocaleString()})]})]})]}),a.jsx(vr,{className:"flex flex-col-reverse sm:flex-row gap-2 pt-4",children:a.jsx(K,{variant:"outline",onClick:()=>w(!1),className:"w-full sm:w-auto",children:T("buttons.cancel")})})]})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[a.jsxs("div",{className:"relative flex-1 max-w-sm",children:[a.jsx(ol,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(Ne,{placeholder:T("tickets.searchPlaceholder"),value:c,onChange:S=>u(S.target.value),className:"pl-10"})]}),a.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[a.jsxs(Ze,{value:d,onValueChange:h,children:[a.jsx(Ve,{className:"w-full sm:w-[140px]",children:a.jsx(et,{})}),a.jsxs(We,{children:[a.jsx(de,{value:"all",children:T("tickets.allStatuses")}),a.jsx(de,{value:"open",children:T("tickets.statusOpen")}),a.jsx(de,{value:"in_progress",children:T("tickets.statusInProgress")}),a.jsx(de,{value:"resolved",children:T("tickets.statusResolved")}),a.jsx(de,{value:"closed",children:T("tickets.statusClosed")})]})]}),a.jsxs(Ze,{value:m,onValueChange:p,children:[a.jsx(Ve,{className:"w-full sm:w-[140px]",children:a.jsx(et,{})}),a.jsxs(We,{children:[a.jsx(de,{value:"all",children:T("tickets.allPriorities")}),a.jsx(de,{value:"low",children:T("tickets.priorityLow")}),a.jsx(de,{value:"medium",children:T("tickets.priorityMedium")}),a.jsx(de,{value:"high",children:T("tickets.priorityHigh")}),a.jsx(de,{value:"urgent",children:T("tickets.priorityUrgent")})]})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("h2",{className:"text-lg font-semibold",children:[T("tickets.allTickets")," (",$.length,")"]})}),$.length===0?a.jsx(ue,{children:a.jsxs(me,{className:"text-center py-12",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:T("tickets.noTicketsFound")}),a.jsx("p",{className:"text-muted-foreground",children:T(c?"tickets.noTicketsFoundDesc":"tickets.noTicketsYet")})]})}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:$.map(S=>a.jsxs(ue,{className:"cursor-pointer hover:shadow-lg transition-all duration-200",onClick:()=>D(S),children:[a.jsx(Re,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-base truncate",children:S.subject}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["#",S.ticket_id]})]}),a.jsx(He,{variant:H(S.status),className:"shrink-0",children:S.status||T("leads.unknown")})]})}),a.jsxs(me,{className:"pt-0",children:[S.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:S.description}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("span",{className:"font-medium",children:[T("tickets.priority"),":"]}),a.jsx(He,{variant:I(S.priority),className:"text-xs",children:S.priority||T("leads.unknown")})]})}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{children:O(S.assigned_to)}),a.jsx("div",{children:S.created_date?new Date(S.created_date).toLocaleDateString():"N/A"})]})]})]})]},S.ticket_id))})]})]})}function L4({project:t,client:e,manager:r,stages:n,onDelete:s,onClick:o,onDragStart:i,onStageChange:l,isDragging:c=!1}){const{t:u}=it(),d=po(),h=t.progress||0,m=p=>p?new Date(p).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):u("leads.notSet","Not set");return a.jsxs(ue,{className:z("group relative hover:shadow-lg transition-all duration-200 cursor-pointer",d?"w-full border-l-4 border-l-blue-500 rtl:border-l-0 rtl:border-r-4 rtl:border-r-blue-500":"w-[280px] sm:w-[300px] border-l-4 rtl:border-l-0 rtl:border-r-4",!d&&(h===100?"border-l-green-500 rtl:border-r-green-500":"border-l-blue-500 rtl:border-r-blue-500"),c&&"opacity-50 rotate-2 scale-105"),onClick:o,draggable:!!i,onDragStart:p=>{i&&(p.dataTransfer.effectAllowed="move",p.dataTransfer.setData("text/plain",t.project_id.toString()),i(t.project_id))},children:[a.jsx(Re,{className:"pb-3 px-4 pt-4",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-base mb-1 truncate group-hover:text-primary transition-colors",children:J(t,"project_name")}),J(t,"project_description")&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:J(t,"project_description")})]}),s&&a.jsxs(Ja,{children:[a.jsx(fd,{asChild:!0,onClick:p=>p.stopPropagation(),children:a.jsx(K,{variant:"ghost",size:"sm",className:z("h-8 w-8 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10",d?"opacity-100":"opacity-0 group-hover:opacity-100 transition-opacity"),children:a.jsx(mo,{className:"h-4 w-4"})})}),a.jsxs(go,{onClick:p=>p.stopPropagation(),children:[a.jsxs(vo,{children:[a.jsx(yo,{children:u("projects.deleteProject")}),a.jsx(wo,{children:u("projects.deleteConfirmation",{name:J(t,"project_name")})})]}),a.jsxs(xo,{children:[a.jsx(_o,{children:u("buttons.cancel")}),a.jsx(bo,{onClick:p=>{p.stopPropagation(),s(t.project_id)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:u("buttons.delete")})]})]})]})]})}),a.jsxs(me,{className:"px-4 pb-4 space-y-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[a.jsx("span",{children:u("projects.progress")}),a.jsxs("span",{className:"font-medium",children:[h,"%"]})]}),a.jsx(fs,{value:h,className:"h-2"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e&&a.jsxs("div",{className:"flex items-start gap-1.5",children:[a.jsx(Ra,{className:"h-3.5 w-3.5 text-muted-foreground mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Client"}),a.jsx("p",{className:"text-xs font-medium truncate",children:e.user_name})]})]}),r&&a.jsxs("div",{className:"flex items-start gap-1.5",children:[a.jsx(Aa,{className:"h-3.5 w-3.5 text-muted-foreground mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Manager"}),a.jsx("p",{className:"text-xs font-medium truncate",children:r.user_name})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[a.jsx(Oa,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:m(t.created_date)})]}),h===100?a.jsx(He,{variant:"default",className:"bg-green-500 text-xs",children:"Completed"}):h>0?a.jsx(He,{variant:"default",className:"text-xs",children:"In Progress"}):a.jsx(He,{variant:"secondary",className:"text-xs",children:"Not Started"})]})]})]})}function M4(){var ge,we,Qe,V;const t=Ur(),{hasRole:e,user:r}=ht();_l();const{t:n}=it(),s=po(),[o,i]=f.useState([]),[l,c]=f.useState([]),[u,d]=f.useState([]),[h,m]=f.useState([]),[p,y]=f.useState(!0);f.useState(!1),f.useState("");const[g,x]=f.useState(null),[b,v]=f.useState(""),[w,_]=f.useState(null),[j,k]=f.useState(null),[C,P]=f.useState(!1),[N,E]=f.useState(null),[L,T]=f.useState({project_name:"",project_description:"",client_id:"",progress:0,stage:"1"}),[W,O]=f.useState(!1),[H,I]=f.useState({project_name:"",project_description:"",client_id:""}),[U,D]=f.useState("kanban");f.useEffect(()=>{$()},[]),f.useEffect(()=>{if(h.length>0&&N===null){const A=h.find(B=>B.stage_id===5);A&&E(A.stage_id)}},[h,N]);const $=async()=>{try{y(!0);const[A,B,ae,Ee]=await Promise.all([mn.getAll(),ld.getAll(),gr.getAll(),Jr.getGlobalStages()]);console.log("[Projects] Loaded data:",{projects:A.length,clients:B.length,users:ae.length,stages:Ee.length}),console.log("[Projects] Projects data:",A),console.log("[Projects] Stages data:",Ee),i(A),c(B),d(ae),m(Ee)}catch(A){console.error("Failed to load data:",A)}finally{y(!1)}},S=async A=>{if(b.trim())try{await Jr.update(A,{stage_name:b.trim()}),m(h.map(B=>B.stage_id===A?{...B,stage_name:b.trim()}:B)),x(null),v("")}catch(B){console.error("Failed to update stage:",B)}},M=async A=>{if(o.filter(ae=>ae.stage===A).length>0){_(A);return}try{await Jr.delete(A),m(h.filter(ae=>ae.stage_id!==A))}catch(ae){console.error("Failed to delete stage:",ae)}},Y=async()=>{if(w)try{await Jr.delete(w),m(h.filter(A=>A.stage_id!==w)),_(null),$()}catch(A){console.error("Failed to delete stage:",A)}},ye=A=>{k(A)},pe=A=>{A.preventDefault(),A.dataTransfer.dropEffect="move"},ve=async A=>{if(!j)return;const B=o.find(ae=>ae.project_id===j);if(B&&B.stage!==A)try{await mn.update(j,{stage:A}),i(o.map(ae=>ae.project_id===j?{...ae,stage:A}:ae))}catch(ae){console.error("Failed to update project stage:",ae)}k(null)},ke=async A=>{try{await mn.delete(A),i(o.filter(B=>B.project_id!==A))}catch(B){console.error("Failed to delete project:",B)}},Z=A=>{T(B=>({...B,stage:A.toString()})),P(!0)},F=async()=>{var A;if(L.project_name.trim())try{const B=_r({project_name:L.project_name.trim(),project_description:L.project_description.trim()||null,created_by:((A=r==null?void 0:r.profile)==null?void 0:A.user_id)||1,progress:L.progress,stage:parseInt(L.stage),end_date:null,auth_user_id:(r==null?void 0:r.id)||""},{project_name:"project_name",project_description:"project_description"}),ae=await mn.create(B);i([...o,ae]),T({project_name:"",project_description:"",client_id:"",progress:0,stage:"1"}),P(!1)}catch(B){console.error("Failed to create project:",B)}},G=async()=>{var A;if(H.project_name.trim())try{const B=_r({project_name:H.project_name.trim(),project_description:H.project_description.trim()||null,created_by:((A=r==null?void 0:r.profile)==null?void 0:A.user_id)||1,progress:0,stage:1,end_date:null,auth_user_id:(r==null?void 0:r.id)||""},{project_name:"project_name",project_description:"project_description"}),ae=await mn.create(B);i([...o,ae]),I({project_name:"",project_description:"",client_id:""}),O(!1)}catch(B){console.error("Failed to create lead:",B)}},ne=h.filter(A=>[5,6,7,8].includes(A.stage_id)).sort((A,B)=>Kt()?B.stage_id-A.stage_id:A.stage_id-B.stage_id),fe=ne.sort((A,B)=>Kt()?B.stage_id-A.stage_id:A.stage_id-B.stage_id).map(A=>({id:A.stage_id,name:J(A,"stage_name"),color:A.color,count:o.filter(B=>B.stage===A.stage_id).length}));return p?a.jsx("div",{className:"flex items-center justify-center h-full py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:n("projects.title")}),a.jsx("p",{className:"text-muted-foreground mt-2 text-base",children:n("projects.subtitle")})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex items-center border rounded-lg p-1 bg-muted/50",children:[a.jsxs(K,{variant:U==="kanban"?"default":"ghost",size:"sm",onClick:()=>D("kanban"),className:"h-8 px-3",children:[a.jsx(Ep,{className:"h-4 w-4 mr-2"}),n("common.kanban")]}),a.jsxs(K,{variant:U==="list"?"default":"ghost",size:"sm",onClick:()=>D("list"),className:"h-8 px-3",children:[a.jsx(Pp,{className:"h-4 w-4 mr-2"}),n("common.list")]})]}),a.jsxs(K,{size:"lg",className:"shadow-lg hover:shadow-xl transition-all",onClick:()=>O(!0),children:[a.jsx(yt,{className:"h-5 w-5 mr-2"}),n("projects.newProject")]})]})]}),U==="kanban"?a.jsxs(a.Fragment,{children:[a.jsx(Gt,{open:C,onOpenChange:P,children:a.jsxs(At,{className:"sm:max-w-[500px]",children:[a.jsxs(It,{children:[a.jsx(Dt,{children:n("projects.createProject")}),a.jsx(xr,{children:n("projects.createProjectDesc")})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-sm font-medium",children:[n("projects.projectName")," *"]}),a.jsx(Ne,{value:L.project_name,onChange:A=>T(B=>({...B,project_name:A.target.value})),placeholder:n("projects.projectNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("projects.description")}),a.jsx(xn,{value:L.project_description,onChange:A=>T(B=>({...B,project_description:A.target.value})),placeholder:n("projects.descriptionPlaceholder"),rows:3})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("projects.client")}),a.jsxs(Ze,{value:L.client_id,onValueChange:A=>T(B=>({...B,client_id:A})),children:[a.jsx(Ve,{children:a.jsx(et,{placeholder:n("projects.selectClient")})}),a.jsx(We,{children:l.map(A=>a.jsx(de,{value:A.user_id.toString(),children:J(A,"user_name")},A.user_id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("projects.initialProgress")}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"range",min:"0",max:"100",value:L.progress,onChange:A=>T(B=>({...B,progress:parseInt(A.target.value)})),className:"w-full h-1.5"}),a.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[a.jsx("span",{children:"0%"}),a.jsxs("span",{children:[L.progress,"%"]}),a.jsx("span",{children:"100%"})]})]})]})]}),a.jsxs(vr,{children:[a.jsx(K,{variant:"outline",onClick:()=>P(!1),children:n("buttons.cancel")}),a.jsxs(K,{onClick:F,disabled:!((ge=L.project_name)!=null&&ge.trim()),children:[a.jsx(qs,{className:"h-4 w-4 mr-2"}),n("projects.createProject")]})]})]})}),a.jsxs(tg,{stages:fe,currentStageId:N||((we=fe[0])==null?void 0:we.id),onStageChange:E,children:[a.jsx("div",{className:"flex gap-6 pb-6 overflow-x-auto scrollbar-hide rtl:flex-row-reverse max-w-full pl-6 rtl:pr-6 rtl:pl-0",children:ne.sort((A,B)=>Kt?B.stage_id-A.stage_id:A.stage_id-B.stage_id).filter(A=>{var ae;return window.innerWidth<1024?A.stage_id===(N||((ae=fe[0])==null?void 0:ae.id)):!0}).map((A,B)=>{var Ee,js;const ae=o.filter(Pe=>Pe.stage===A.stage_id);return console.log(`[Projects] Stage ${A.stage_name} (${A.stage_id}): ${ae.length} projects`),console.log("[Projects] Stage projects:",ae),a.jsxs("div",{className:z("flex-shrink-0 animate-fade-in",s?"w-full":"w-[280px] sm:w-[300px]"),style:{animationDelay:`${B*.1}s`},onDragOver:pe,onDrop:()=>ve(A.stage_id),children:[a.jsx("div",{className:z("rounded-xl bg-muted/30 backdrop-blur p-4 mb-5 shadow-soft hidden md:block",A.color||"border-l-4 border-primary/50"),children:a.jsx("div",{className:"flex items-center justify-between mb-2 rtl:flex-row-reverse",children:g===A.stage_id?a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(Ne,{value:b,onChange:Pe=>v(Pe.target.value),onKeyDown:Pe=>{Pe.key==="Enter"&&S(A.stage_id),Pe.key==="Escape"&&(x(null),v(""))},className:"h-8 text-sm font-bold",autoFocus:!0}),a.jsx(K,{size:"sm",variant:"ghost",onClick:()=>S(A.stage_id),className:"h-8 w-8 p-0",children:""})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Cp,{className:"h-4 w-4 text-muted-foreground cursor-move"}),a.jsx("h2",{className:"font-bold text-base",children:J(A,"stage_name")})]}),a.jsxs("div",{className:"flex items-center gap-2 rtl:flex-row-reverse",children:[a.jsx("span",{className:"text-sm font-bold px-3 py-1 rounded-full bg-background shadow-sm",children:ae.length}),a.jsxs(a.Fragment,{children:[a.jsx(K,{size:"sm",variant:"ghost",onClick:()=>{x(A.stage_id),v(J(A,"stage_name"))},className:"h-6 w-6 p-0",title:n("buttons.edit"),children:a.jsx(H_,{className:"h-3 w-3"})}),a.jsx(K,{size:"sm",variant:"ghost",onClick:()=>M(A.stage_id),className:"h-6 w-6 p-0 text-destructive",title:n("buttons.delete"),children:a.jsx(mo,{className:"h-3 w-3"})})]})]})]})})}),a.jsxs("div",{className:"space-y-4 max-h-[calc(100vh-300px)] overflow-y-auto pr-2 rtl:pr-0 rtl:pl-2 scrollbar-hide",children:[((Ee=h.sort((Pe,Qt)=>(Pe.stager_order_index||0)-(Qt.stager_order_index||0))[0])==null?void 0:Ee.stage_id)===A.stage_id&&a.jsx("div",{className:"mb-4",children:a.jsx(ue,{className:z("group relative hover:shadow-lg transition-all duration-200 cursor-pointer","border-l-4 border-l-gray-300 rtl:border-l-0 rtl:border-r-4 rtl:border-r-gray-300","flex items-center justify-center bg-muted/20",s?"w-full h-[100px]":"w-[280px] sm:w-[300px] h-[120px]"),onClick:()=>Z(A.stage_id),children:a.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[a.jsx(yt,{className:"h-8 w-8"}),a.jsx("span",{className:"text-sm font-medium",children:n("projects.addNewProjectCard")})]})})}),ae.map(Pe=>{const Qt=u.find(zr=>zr.user_id===Pe.created_by);return a.jsx("div",{children:a.jsx(L4,{project:Pe,client:null,manager:Qt||null,stages:ne,onDelete:()=>ke(Pe.project_id),onClick:()=>t(`/project/${Pe.project_id}`),onDragStart:ye,onStageChange:ve,isDragging:j===Pe.project_id})},Pe.project_id)}),((js=h.sort((Pe,Qt)=>(Pe.stager_order_index||0)-(Qt.stager_order_index||0))[0])==null?void 0:js.stage_id)!==A.stage_id&&a.jsx("div",{className:"mt-2",children:a.jsxs(K,{variant:"outline",size:"sm",className:"w-full h-12 border-dashed text-muted-foreground hover:text-foreground",onClick:()=>Z(A.stage_id),children:[a.jsx(yt,{className:"h-4 w-4 mr-2"}),n("projects.addProject")]})})]})]},A.stage_id)})}),a.jsx(Ja,{open:!!w,onOpenChange:()=>_(null),children:a.jsxs(go,{children:[a.jsxs(vo,{children:[a.jsx(yo,{children:n("leads.deleteStage")}),a.jsx(wo,{children:n("leads.deleteStageConfirmation",{count:o.filter(A=>A.stage===w).length})})]}),a.jsxs(xo,{children:[a.jsx(_o,{children:n("buttons.cancel")}),a.jsx(bo,{onClick:Y,className:"bg-destructive text-destructive-foreground",children:n("buttons.delete")})]})]})})]})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-lg font-semibold",children:[n("projects.title")," (",o.length,")"]}),a.jsx(Gt,{open:C,onOpenChange:P,children:a.jsxs(At,{className:"sm:max-w-[500px]",children:[a.jsxs(It,{children:[a.jsx(Dt,{children:n("projects.createProject")}),a.jsx(xr,{children:n("projects.createProjectDesc")})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-sm font-medium",children:[n("projects.projectName")," *"]}),a.jsx(Ne,{value:L.project_name,onChange:A=>T(B=>({...B,project_name:A.target.value})),placeholder:n("projects.projectNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("projects.description")}),a.jsx(xn,{value:L.project_description,onChange:A=>T(B=>({...B,project_description:A.target.value})),placeholder:n("projects.descriptionPlaceholder"),rows:3})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("projects.client")}),a.jsxs(Ze,{value:L.client_id,onValueChange:A=>T(B=>({...B,client_id:A})),children:[a.jsx(Ve,{children:a.jsx(et,{placeholder:n("projects.selectClient")})}),a.jsx(We,{children:l.map(A=>a.jsx(de,{value:A.user_id.toString(),children:J(A,"user_name")},A.user_id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("projects.initialProgress")}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"range",min:"0",max:"100",value:L.progress,onChange:A=>T(B=>({...B,progress:parseInt(A.target.value)})),className:"w-full h-1.5"}),a.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[a.jsx("span",{children:"0%"}),a.jsxs("span",{children:[L.progress,"%"]}),a.jsx("span",{children:"100%"})]})]})]})]}),a.jsxs(vr,{children:[a.jsx(K,{variant:"outline",onClick:()=>P(!1),children:n("buttons.cancel")}),a.jsxs(K,{onClick:F,disabled:!((Qe=L.project_name)!=null&&Qe.trim()),children:[a.jsx(qs,{className:"h-4 w-4 mr-2"}),n("projects.createProject")]})]})]})})]}),a.jsxs(ue,{className:"max-h-[calc(100vh-300px)] flex flex-col",children:[a.jsx(Re,{className:"flex-shrink-0",children:a.jsx($e,{children:n("projects.title")})}),a.jsx(me,{className:"flex-1 overflow-y-auto",children:a.jsxs(ud,{children:[a.jsx(dd,{children:a.jsxs(rn,{children:[a.jsx(ut,{children:n("projects.projectName")}),a.jsx(ut,{children:n("projects.client")}),a.jsx(ut,{children:n("projects.progress")}),a.jsx(ut,{children:n("common.created")}),a.jsx(ut,{children:n("tasks.stage")}),a.jsx(ut,{className:"w-[100px]",children:n("common.actions")})]})}),a.jsx(hd,{children:o.length===0?a.jsx(rn,{children:a.jsx(Xe,{colSpan:6,className:"text-center py-12",children:a.jsx("div",{className:"text-muted-foreground",children:n("projects.noProjectsYet")})})}):o.map(A=>{const B=l.find(Ee=>Ee.user_id===A.created_by),ae=h.find(Ee=>Ee.stage_id===A.stage);return a.jsxs(rn,{className:"cursor-pointer hover:bg-muted/50",children:[a.jsx(Xe,{children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:J(A,"project_name")}),J(A,"project_description")&&a.jsx("div",{className:"text-sm text-muted-foreground truncate max-w-xs",children:J(A,"project_description")})]})}),a.jsx(Xe,{children:B?J(B,"user_name"):n("leads.unknown")}),a.jsx(Xe,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(fs,{value:A.progress,className:"w-16"}),a.jsxs("span",{className:"text-sm",children:[A.progress,"%"]})]})}),a.jsx(Xe,{children:A.created_date?new Date(A.created_date).toLocaleDateString():n("leads.notSet")}),a.jsx(Xe,{children:ae?J(ae,"stage_name"):n("leads.unknown")}),a.jsx(Xe,{children:a.jsx(K,{variant:"ghost",size:"sm",children:n("common.view")})})]},A.project_id)})})]})})]})]}),a.jsx(Gt,{open:W,onOpenChange:O,children:a.jsxs(At,{className:"sm:max-w-[500px]",children:[a.jsxs(It,{children:[a.jsx(Dt,{children:n("projects.createProject")}),a.jsx(xr,{children:n("projects.createProjectDesc")})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-sm font-medium",children:[n("projects.projectName")," *"]}),a.jsx(Ne,{value:H.project_name,onChange:A=>I(B=>({...B,project_name:A.target.value})),placeholder:n("projects.projectNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("projects.description")}),a.jsx(xn,{value:H.project_description,onChange:A=>I(B=>({...B,project_description:A.target.value})),placeholder:n("projects.descriptionPlaceholder"),rows:3})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("projects.client")}),a.jsxs(Ze,{value:H.client_id,onValueChange:A=>I(B=>({...B,client_id:A})),children:[a.jsx(Ve,{children:a.jsx(et,{placeholder:n("projects.selectClient")})}),a.jsx(We,{children:l.map(A=>a.jsx(de,{value:A.user_id.toString(),children:J(A,"user_name")},A.user_id))})]})]})]}),a.jsxs(vr,{children:[a.jsx(K,{variant:"outline",onClick:()=>O(!1),children:n("buttons.cancel")}),a.jsxs(K,{onClick:G,disabled:!((V=H.project_name)!=null&&V.trim()),children:[a.jsx(qs,{className:"h-4 w-4 mr-2"}),n("projects.createProject")]})]})]})})]})}const $4=({clientAuthUserId:t})=>{const{data:e=[]}=cd(t);return a.jsx(a.Fragment,{children:e.length})},F4=({clientAuthUserId:t})=>{const{t:e}=it(),{data:r=[]}=cd(t),n=r.filter(s=>s.progress!==null&&s.progress!==void 0&&s.progress<100).length;return n===0?null:a.jsxs(He,{variant:"secondary",children:[n," ",e("clients.active")]})},U4=({clientAuthUserId:t})=>{const{t:e}=it(),{data:r=[]}=cd(t);return a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-center",children:[a.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold",children:r.length}),a.jsx("div",{className:"text-sm text-muted-foreground",children:e("clients.totalProjects")})]}),a.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold",children:r.filter(n=>n.progress!==null&&n.progress!==void 0&&n.progress<100).length}),a.jsx("div",{className:"text-sm text-muted-foreground",children:e("clients.activeProjects")})]}),a.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold",children:r.filter(n=>n.progress===100).length}),a.jsx("div",{className:"text-sm text-muted-foreground",children:e("clients.completedProjects")})]})]})};function B4(){const{t}=it(),{data:e=[],isLoading:r}=h4(),[n,s]=f.useState(null),o=r;return a.jsxs("div",{className:"space-y-8 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold tracking-tight",children:t("clients.title")}),a.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:t("clients.subtitle")})]}),a.jsxs(K,{size:"lg",className:"shadow-lg hover:shadow-xl transition-all",children:[a.jsx(yt,{className:"h-5 w-5 mr-2"}),t("clients.newClient")]})]}),o?a.jsxs("div",{className:"flex justify-center items-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"}),a.jsx("span",{className:"sr-only",children:t("clients.loading")})]}):e.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:t("clients.noClientsFound")}),a.jsx("p",{className:"text-muted-foreground",children:t("clients.noClientsYet")})]}):a.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.map(i=>a.jsxs(ue,{className:"shadow-hover border-none animate-scale-in",children:[a.jsx(Re,{children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-16 h-16 rounded-full ring-4 ring-muted bg-muted flex items-center justify-center text-2xl",children:i.avatar||""}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-bold text-lg truncate",children:J(i,"user_name")}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[a.jsx(Ra,{className:"h-4 w-4"}),a.jsx("span",{className:"truncate font-medium",children:i.company_name||t("clients.noCompany")})]})]})]})}),a.jsxs(me,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Qf,{className:"h-4 w-4"}),a.jsx("span",{className:"truncate",children:i.user_email||t("clients.noEmail")})]}),a.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(qu,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.jsx($4,{clientAuthUserId:i.auth_user_id||""})," ",t("clients.projects")]})]}),a.jsx(F4,{clientAuthUserId:i.auth_user_id||""})]}),a.jsxs(Gt,{children:[a.jsx(Da,{asChild:!0,children:a.jsx(K,{variant:"outline",className:"w-full",size:"sm",onClick:()=>s(i),children:t("clients.viewDetails")})}),a.jsxs(At,{className:"max-w-2xl",children:[a.jsx(It,{children:a.jsx(Dt,{children:t("clients.clientDetails")})}),n&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-20 h-20 rounded-full bg-muted flex items-center justify-center text-3xl",children:n.avatar||""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-2xl font-bold",children:J(n,"user_name")}),a.jsx("p",{className:"text-muted-foreground capitalize",children:n.user_role})]})]}),a.jsxs("div",{className:"grid gap-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Aa,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:t("clients.userId")}),a.jsx("span",{className:"text-sm",children:n.user_id})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Qf,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:t("clients.emailLabel")}),a.jsx("span",{className:"text-sm",children:n.user_email||"N/A"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Rp,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:t("clients.contactLabel")}),a.jsx("span",{className:"text-sm",children:n.client_contact||"N/A"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ra,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:t("clients.companyLabel")}),a.jsx("span",{className:"text-sm",children:n.company_name||"N/A"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Oa,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:t("clients.createdLabel")}),a.jsx("span",{className:"text-sm",children:n.created_at?new Date(n.created_at).toLocaleDateString():"N/A"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Oa,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:t("clients.updatedLabel")}),a.jsx("span",{className:"text-sm",children:n.updated_at?new Date(n.updated_at).toLocaleDateString():"N/A"})]})]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("h4",{className:"font-semibold mb-3",children:t("clients.projectSummary")}),a.jsx(U4,{clientAuthUserId:n.auth_user_id||""})]})]})]})]})]})]},i.user_id))})]})}function z4(t,e){return f.useReducer((r,n)=>e[r][n]??r,t)}var rg="ScrollArea",[u1,dU]=ar(rg),[V4,jr]=u1(rg),d1=f.forwardRef((t,e)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:o=600,...i}=t,[l,c]=f.useState(null),[u,d]=f.useState(null),[h,m]=f.useState(null),[p,y]=f.useState(null),[g,x]=f.useState(null),[b,v]=f.useState(0),[w,_]=f.useState(0),[j,k]=f.useState(!1),[C,P]=f.useState(!1),N=be(e,L=>c(L)),E=Sl(s);return a.jsx(V4,{scope:r,type:n,dir:E,scrollHideDelay:o,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:m,scrollbarX:p,onScrollbarXChange:y,scrollbarXEnabled:j,onScrollbarXEnabledChange:k,scrollbarY:g,onScrollbarYChange:x,scrollbarYEnabled:C,onScrollbarYEnabledChange:P,onCornerWidthChange:v,onCornerHeightChange:_,children:a.jsx(ie.div,{dir:E,...i,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":w+"px",...t.style}})})});d1.displayName=rg;var h1="ScrollAreaViewport",f1=f.forwardRef((t,e)=>{const{__scopeScrollArea:r,children:n,nonce:s,...o}=t,i=jr(h1,r),l=f.useRef(null),c=be(e,l,i.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),a.jsx(ie.div,{"data-radix-scroll-area-viewport":"",...o,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t.style},children:a.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});f1.displayName=h1;var an="ScrollAreaScrollbar",ng=f.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=jr(an,t.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:i}=s,l=t.orientation==="horizontal";return f.useEffect(()=>(l?o(!0):i(!0),()=>{l?o(!1):i(!1)}),[l,o,i]),s.type==="hover"?a.jsx(W4,{...n,ref:e,forceMount:r}):s.type==="scroll"?a.jsx(H4,{...n,ref:e,forceMount:r}):s.type==="auto"?a.jsx(m1,{...n,ref:e,forceMount:r}):s.type==="always"?a.jsx(sg,{...n,ref:e}):null});ng.displayName=an;var W4=f.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=jr(an,t.__scopeScrollArea),[o,i]=f.useState(!1);return f.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),i(!0)},d=()=>{c=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),a.jsx(ir,{present:r||o,children:a.jsx(m1,{"data-state":o?"visible":"hidden",...n,ref:e})})}),H4=f.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=jr(an,t.__scopeScrollArea),o=t.orientation==="horizontal",i=pd(()=>c("SCROLL_END"),100),[l,c]=z4("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),f.useEffect(()=>{const u=s.viewport,d=o?"scrollLeft":"scrollTop";if(u){let h=u[d];const m=()=>{const p=u[d];h!==p&&(c("SCROLL"),i()),h=p};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[s.viewport,o,c,i]),a.jsx(ir,{present:r||l!=="hidden",children:a.jsx(sg,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:X(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:X(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),m1=f.forwardRef((t,e)=>{const r=jr(an,t.__scopeScrollArea),{forceMount:n,...s}=t,[o,i]=f.useState(!1),l=t.orientation==="horizontal",c=pd(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;i(l?u:d)}},10);return La(r.viewport,c),La(r.content,c),a.jsx(ir,{present:n||o,children:a.jsx(sg,{"data-state":o?"visible":"hidden",...s,ref:e})})}),sg=f.forwardRef((t,e)=>{const{orientation:r="vertical",...n}=t,s=jr(an,t.__scopeScrollArea),o=f.useRef(null),i=f.useRef(0),[l,c]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=y1(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>o.current=m,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:m=>i.current=m};function h(m,p){return J4(m,i.current,l,p)}return r==="horizontal"?a.jsx(q4,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const m=s.viewport.scrollLeft,p=vy(m,l,s.dir);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=h(m,s.dir))}}):r==="vertical"?a.jsx(K4,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const m=s.viewport.scrollTop,p=vy(m,l);o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=h(m))}}):null}),q4=f.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...s}=t,o=jr(an,t.__scopeScrollArea),[i,l]=f.useState(),c=f.useRef(null),u=be(e,c,o.onScrollbarXChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(g1,{"data-orientation":"horizontal",...s,ref:u,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":md(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(o.viewport){const m=o.viewport.scrollLeft+d.deltaX;t.onWheelScroll(m),b1(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:_u(i.paddingLeft),paddingEnd:_u(i.paddingRight)}})}})}),K4=f.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...s}=t,o=jr(an,t.__scopeScrollArea),[i,l]=f.useState(),c=f.useRef(null),u=be(e,c,o.onScrollbarYChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(g1,{"data-orientation":"vertical",...s,ref:u,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":md(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(o.viewport){const m=o.viewport.scrollTop+d.deltaY;t.onWheelScroll(m),b1(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:_u(i.paddingTop),paddingEnd:_u(i.paddingBottom)}})}})}),[G4,p1]=u1(an),g1=f.forwardRef((t,e)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:o,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...m}=t,p=jr(an,r),[y,g]=f.useState(null),x=be(e,N=>g(N)),b=f.useRef(null),v=f.useRef(""),w=p.viewport,_=n.content-n.viewport,j=mt(d),k=mt(c),C=pd(h,10);function P(N){if(b.current){const E=N.clientX-b.current.left,L=N.clientY-b.current.top;u({x:E,y:L})}}return f.useEffect(()=>{const N=E=>{const L=E.target;(y==null?void 0:y.contains(L))&&j(E,_)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[w,y,_,j]),f.useEffect(k,[n,k]),La(y,C),La(p.content,C),a.jsx(G4,{scope:r,scrollbar:y,hasThumb:s,onThumbChange:mt(o),onThumbPointerUp:mt(i),onThumbPositionChange:k,onThumbPointerDown:mt(l),children:a.jsx(ie.div,{...m,ref:x,style:{position:"absolute",...m.style},onPointerDown:X(t.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),b.current=y.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),P(N))}),onPointerMove:X(t.onPointerMove,P),onPointerUp:X(t.onPointerUp,N=>{const E=N.target;E.hasPointerCapture(N.pointerId)&&E.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=v.current,p.viewport&&(p.viewport.style.scrollBehavior=""),b.current=null})})})}),bu="ScrollAreaThumb",v1=f.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=p1(bu,t.__scopeScrollArea);return a.jsx(ir,{present:r||s.hasThumb,children:a.jsx(Q4,{ref:e,...n})})}),Q4=f.forwardRef((t,e)=>{const{__scopeScrollArea:r,style:n,...s}=t,o=jr(bu,r),i=p1(bu,r),{onThumbPositionChange:l}=i,c=be(e,h=>i.onThumbChange(h)),u=f.useRef(void 0),d=pd(()=>{u.current&&(u.current(),u.current=void 0)},100);return f.useEffect(()=>{const h=o.viewport;if(h){const m=()=>{if(d(),!u.current){const p=X4(h,l);u.current=p,l()}};return l(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[o.viewport,d,l]),a.jsx(ie.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:X(t.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),y=h.clientX-p.left,g=h.clientY-p.top;i.onThumbPointerDown({x:y,y:g})}),onPointerUp:X(t.onPointerUp,i.onThumbPointerUp)})});v1.displayName=bu;var og="ScrollAreaCorner",x1=f.forwardRef((t,e)=>{const r=jr(og,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?a.jsx(Y4,{...t,ref:e}):null});x1.displayName=og;var Y4=f.forwardRef((t,e)=>{const{__scopeScrollArea:r,...n}=t,s=jr(og,r),[o,i]=f.useState(0),[l,c]=f.useState(0),u=!!(o&&l);return La(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),La(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),i(d)}),u?a.jsx(ie.div,{...n,ref:e,style:{width:o,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function _u(t){return t?parseInt(t,10):0}function y1(t,e){const r=t/e;return isNaN(r)?0:r}function md(t){const e=y1(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*e;return Math.max(n,18)}function J4(t,e,r,n="ltr"){const s=md(r),o=s/2,i=e||o,l=s-i,c=r.scrollbar.paddingStart+i,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,h=n==="ltr"?[0,d]:[d*-1,0];return w1([c,u],h)(t)}function vy(t,e,r="ltr"){const n=md(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=e.scrollbar.size-s,i=e.content-e.viewport,l=o-n,c=r==="ltr"?[0,i]:[i*-1,0],u=Yf(t,c);return w1([0,i],[0,l])(u)}function w1(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function b1(t,e){return t>0&&t<e}var X4=(t,e=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function s(){const o={left:t.scrollLeft,top:t.scrollTop},i=r.left!==o.left,l=r.top!==o.top;(i||l)&&e(),r=o,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function pd(t,e){const r=mt(t),n=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(n.current),[]),f.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,e)},[r,e])}function La(t,e){const r=mt(e);at(()=>{let n=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(t),()=>{window.cancelAnimationFrame(n),s.unobserve(t)}}},[t,r])}var _1=d1,Z4=f1,e$=x1;const yn=f.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(_1,{ref:n,className:z("relative overflow-hidden",t),...r,children:[a.jsx(Z4,{className:"h-full w-full rounded-[inherit]",children:e}),a.jsx(j1,{}),a.jsx(e$,{})]}));yn.displayName=_1.displayName;const j1=f.forwardRef(({className:t,orientation:e="vertical",...r},n)=>a.jsx(ng,{ref:n,orientation:e,className:z("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:a.jsx(v1,{className:"relative flex-1 rounded-full bg-border"})}));j1.displayName=ng.displayName;function t$(){return hb.useSyncExternalStore(r$,()=>!0,()=>!1)}function r$(){return()=>{}}var ag="Avatar",[n$,hU]=ar(ag),[s$,S1]=n$(ag),N1=f.forwardRef((t,e)=>{const{__scopeAvatar:r,...n}=t,[s,o]=f.useState("idle");return a.jsx(s$,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:a.jsx(ie.span,{...n,ref:e})})});N1.displayName=ag;var k1="AvatarImage",C1=f.forwardRef((t,e)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...o}=t,i=S1(k1,r),l=o$(n,o),c=mt(u=>{s(u),i.onImageLoadingStatusChange(u)});return at(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?a.jsx(ie.img,{...o,ref:e,src:n}):null});C1.displayName=k1;var E1="AvatarFallback",P1=f.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:n,...s}=t,o=S1(E1,r),[i,l]=f.useState(n===void 0);return f.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),i&&o.imageLoadingStatus!=="loaded"?a.jsx(ie.span,{...s,ref:e}):null});P1.displayName=E1;function xy(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function o$(t,{referrerPolicy:e,crossOrigin:r}){const n=t$(),s=f.useRef(null),o=n?(s.current||(s.current=new window.Image),s.current):null,[i,l]=f.useState(()=>xy(o,t));return at(()=>{l(xy(o,t))},[o,t]),at(()=>{const c=h=>()=>{l(h)};if(!o)return;const u=c("loaded"),d=c("error");return o.addEventListener("load",u),o.addEventListener("error",d),e&&(o.referrerPolicy=e),typeof r=="string"&&(o.crossOrigin=r),()=>{o.removeEventListener("load",u),o.removeEventListener("error",d)}},[o,r,e]),i}var T1=N1,R1=C1,O1=P1;const Ma=f.forwardRef(({className:t,...e},r)=>a.jsx(T1,{ref:r,className:z("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Ma.displayName=T1.displayName;const Rl=f.forwardRef(({className:t,...e},r)=>a.jsx(R1,{ref:r,className:z("aspect-square h-full w-full",t),...e}));Rl.displayName=R1.displayName;const $a=f.forwardRef(({className:t,...e},r)=>a.jsx(O1,{ref:r,className:z("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));$a.displayName=O1.displayName;function a$(){const{user:t,createStaffUser:e,deleteUser:r}=ht();_l();const{t:n}=it(),[s,o]=f.useState([]),[i,l]=f.useState(!0),[c,u]=f.useState(""),[d,h]=f.useState(!1),[m,p]=f.useState(""),[y,g]=f.useState(""),[x,b]=f.useState(""),[v,w]=f.useState("employee"),[_,j]=f.useState(""),[k,C]=f.useState(!1);f.useEffect(()=>{P()},[]);const P=async()=>{try{l(!0);const O=await gr.getAll();o(O)}catch(O){console.error("Failed to load users:",O)}finally{l(!1)}},N=s.filter(O=>{const H=J(O,"user_name").toLowerCase(),I=O.user_email.toLowerCase(),U=O.user_role.toLowerCase(),D=c.toLowerCase();return H.includes(D)||I.includes(D)||U.includes(D)}),E=O=>{switch(O){case"admin":return"destructive";case"manager":return"default";case"employee":return"secondary";case"client":return"outline";default:return"secondary"}},L=async O=>{if(O.preventDefault(),!k){j(""),C(!0);try{const H=_r({user_name:m,user_email:y,user_role:v},{user_name:"user_name"});await e(y,x,{name:m,role:v,localizedData:H}),h(!1),p(""),g(""),b(""),w("employee"),P()}catch(H){j(H.message||n("users.addUserError"))}finally{C(!1)}}},T=async(O,H)=>{if(confirm(n("users.deleteConfirmation",{name:H})))try{await r(O),P()}catch(I){alert(`${n("users.deleteError")}: ${I.message}`)}},W=async(O,H)=>{try{await gr.update(O,{user_role:H}),P()}catch(I){alert(`${n("users.updateRoleError")}: ${I.message}`)}};return i?a.jsx("div",{className:"flex items-center justify-center h-full py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"flex items-center justify-between md:justify-start gap-4",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:n("users.title")}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(nn,{className:"h-5 w-5"}),a.jsxs("span",{className:"text-sm font-medium",children:[s.length," ",n("users.totalUsers")]})]}),a.jsx("p",{className:"hidden md:block text-muted-foreground",children:n("users.subtitle")})]}),a.jsx("div",{className:"flex md:hidden w-full",children:(t==null?void 0:t.role)!=="manager"&&a.jsxs(Gt,{open:d,onOpenChange:h,children:[a.jsx(Da,{asChild:!0,children:a.jsxs(K,{className:"w-full",children:[a.jsx(yt,{className:"h-4 w-4 mr-2"}),n("users.addUser")]})}),a.jsxs(At,{children:[a.jsx(It,{children:a.jsx(Dt,{children:n("users.addNewUser")})}),a.jsxs("form",{onSubmit:L,className:"space-y-4",children:[_&&a.jsx(nl,{variant:"destructive",children:a.jsx(sl,{children:_})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"formName",children:n("users.fullName")}),a.jsx(Ne,{id:"formName",value:m,onChange:O=>p(O.target.value),placeholder:n("users.fullName"),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"formEmail",children:n("users.email")}),a.jsx(Ne,{id:"formEmail",type:"email",value:y,onChange:O=>g(O.target.value),placeholder:n("users.email"),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"formPassword",children:n("users.password")}),a.jsx(Ne,{id:"formPassword",type:"password",value:x,onChange:O=>b(O.target.value),placeholder:n("users.password"),required:!0,minLength:6})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"formRole",children:n("users.role")}),a.jsxs(Ze,{value:v,onValueChange:O=>w(O),children:[a.jsx(Ve,{children:a.jsx(et,{})}),a.jsxs(We,{children:[a.jsx(de,{value:"employee",children:n("users.employee")}),a.jsx(de,{value:"manager",children:n("users.manager")}),a.jsx(de,{value:"admin",children:n("users.admin")})]})]})]}),a.jsx(K,{type:"submit",className:"w-full",disabled:k,children:n(k?"users.addingUser":"users.addUser")})]})]})]})}),a.jsx("div",{className:"hidden md:flex items-center justify-end",children:(t==null?void 0:t.role)!=="manager"&&a.jsxs(Gt,{open:d,onOpenChange:h,children:[a.jsx(Da,{asChild:!0,children:a.jsxs(K,{children:[a.jsx(yt,{className:"h-4 w-4 mr-2"}),n("users.addUser")]})}),a.jsxs(At,{children:[a.jsx(It,{children:a.jsx(Dt,{children:n("users.addNewUser")})}),a.jsxs("form",{onSubmit:L,className:"space-y-4",children:[_&&a.jsx(nl,{variant:"destructive",children:a.jsx(sl,{children:_})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"formName",children:n("users.fullName")}),a.jsx(Ne,{id:"formName",value:m,onChange:O=>p(O.target.value),placeholder:n("users.fullName"),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"formEmail",children:n("users.email")}),a.jsx(Ne,{id:"formEmail",type:"email",value:y,onChange:O=>g(O.target.value),placeholder:n("users.email"),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"formPassword",children:n("users.password")}),a.jsx(Ne,{id:"formPassword",type:"password",value:x,onChange:O=>b(O.target.value),placeholder:n("users.password"),required:!0,minLength:6})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"formRole",children:n("users.role")}),a.jsxs(Ze,{value:v,onValueChange:O=>w(O),children:[a.jsx(Ve,{children:a.jsx(et,{})}),a.jsxs(We,{children:[a.jsx(de,{value:"employee",children:n("users.employee")}),a.jsx(de,{value:"manager",children:n("users.manager")}),a.jsx(de,{value:"admin",children:n("users.admin")})]})]})]}),a.jsx(K,{type:"submit",className:"w-full",disabled:k,children:n(k?"users.addingUser":"users.addUser")})]})]})]})})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ol,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(Ne,{placeholder:n("users.searchPlaceholder"),value:c,onChange:O=>u(O.target.value),className:"pl-10"})]}),a.jsxs(yn,{className:"flex-1",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map(O=>a.jsxs(ue,{className:"hover:shadow-md transition-shadow",children:[a.jsx(Re,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(Ma,{className:"h-12 w-12",children:[a.jsx(Rl,{src:O.avatar||""}),a.jsx($a,{children:J(O,"user_name").charAt(0).toUpperCase()})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx($e,{className:"text-lg truncate",children:J(O,"user_name")}),a.jsx(He,{variant:E(O.user_role),className:"mt-1",children:n(`users.${O.user_role}`)})]}),(t==null?void 0:t.role)==="admin"&&a.jsx(K,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>T(O.auth_user_id||"",J(O,"user_name")),children:a.jsx(mo,{className:"h-4 w-4"})})]})}),a.jsxs(me,{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Qf,{className:"h-4 w-4"}),a.jsx("span",{className:"truncate",children:O.user_email})]}),O.client_contact&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Rp,{className:"h-4 w-4"}),a.jsx("span",{children:O.client_contact})]}),O.company_name&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(sI,{className:"h-4 w-4"}),a.jsx("span",{className:"truncate",children:O.company_name})]}),O.user_role==="employee"&&((t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="manager")&&a.jsxs("div",{className:"pt-2 border-t",children:[a.jsx("div",{className:"text-xs font-medium mb-1",children:n("users.changeRole")}),a.jsxs(Ze,{value:O.user_role,onValueChange:H=>W(O.user_id,H),children:[a.jsx(Ve,{className:"w-full h-8",children:a.jsx(et,{})}),a.jsxs(We,{children:[a.jsx(de,{value:"employee",children:n("users.employee")}),a.jsx(de,{value:"manager",children:n("users.manager")}),a.jsx(de,{value:"team_leader",children:n("users.team_leader")})]})]})]}),a.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[n("users.joined")," ",new Date(O.created_at).toLocaleDateString()]})]})]},O.user_id))}),N.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(nn,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:n("users.noUsersFound")}),a.jsx("p",{className:"text-muted-foreground",children:n(c?"users.noUsersFoundDesc":"users.noUsersAvailable")})]})]})]})}function i$(){const{user:t}=ht(),{t:e}=it(),[r,n]=f.useState([]),[s,o]=f.useState([]),[i,l]=f.useState({}),[c,u]=f.useState(!0),[d,h]=f.useState(""),[m,p]=f.useState(!1),[y,g]=f.useState(""),[x,b]=f.useState(""),[v,w]=f.useState(null),_=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="manager";(t==null?void 0:t.role)==="employee"||(t==null||t.role),f.useEffect(()=>{j(),k()},[]);const j=async()=>{try{u(!0);const O=await Do.getAll(),H=await Do.getAllTeamMembers();n(O),l(H)}catch(O){console.error("Failed to load teams:",O)}finally{u(!1)}},k=async()=>{try{const O=await gr.getAll();o(O)}catch(O){console.error("Failed to load users:",O)}},C=async()=>{if(y.trim())try{const O=_r({team_name:y.trim(),team_leader_id:x||null,partner_id:null,auth_user_id:null},{team_name:"team_name"});await Do.create(O),g(""),b(""),p(!1),await j()}catch(O){console.error("Failed to create team:",O)}},P=async(O,H)=>{try{await Do.addMember(O,H);const I=s.find(U=>U.auth_user_id===H);I&&l(U=>({...U,[O]:[...U[O]||[],I]}))}catch(I){console.error("Failed to add team member:",I)}},N=async(O,H)=>{try{await Do.removeMember(O,H),l(I=>({...I,[O]:(I[O]||[]).filter(U=>U.auth_user_id!==H)}))}catch(I){console.error("Failed to remove team member:",I)}},E=async O=>{try{await Do.delete(O),n(H=>H.filter(I=>I.team_id!==O)),l(H=>{const I={...H};return delete I[O],I}),w(null)}catch(H){console.error("Failed to delete team:",H)}},L=r.filter(O=>(J(O,"team_name")||"").toLowerCase().includes(d.toLowerCase())),T=O=>s.find(H=>H.auth_user_id===O),W=s.filter(O=>O.user_role==="employee");return c?a.jsx("div",{className:"flex items-center justify-center h-full py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:e("teams.title")}),a.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:e("teams.subtitle")})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(nn,{className:"h-5 w-5"}),a.jsx("span",{className:"text-sm font-medium",children:e("teams.memberCount_plural",{count:r.length})})]}),_&&a.jsxs(Gt,{open:m,onOpenChange:p,children:[a.jsx(Da,{asChild:!0,children:a.jsxs(K,{children:[a.jsx(yt,{className:"h-4 w-4 mr-2"}),e("teams.createTeam")]})}),a.jsxs(At,{className:"sm:max-w-[425px]",children:[a.jsxs(It,{children:[a.jsx(Dt,{children:e("teams.createTeamTitle")}),a.jsx(xr,{children:e("teams.createTeamDesc")})]}),a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[a.jsx(Te,{htmlFor:"team-name",className:"text-right",children:e("teams.teamName")}),a.jsx(Ne,{id:"team-name",value:y,onChange:O=>g(O.target.value),className:"col-span-3",placeholder:e("teams.teamNamePlaceholder")})]}),a.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[a.jsx(Te,{htmlFor:"team-leader",className:"text-right",children:e("teams.teamLeader")}),a.jsxs(Ze,{value:x,onValueChange:b,children:[a.jsx(Ve,{className:"col-span-3",children:a.jsx(et,{placeholder:e("teams.selectTeamLeader")})}),a.jsx(We,{children:W.map(O=>a.jsx(de,{value:O.auth_user_id,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:O.avatar||""}),a.jsx("span",{children:J(O,"user_name")}),a.jsx(He,{variant:"outline",className:"text-xs",children:O.user_role})]})},O.auth_user_id))})]})]})]}),a.jsx(vr,{children:a.jsx(K,{type:"submit",onClick:C,disabled:!y.trim(),children:e("teams.createTeam")})})]})]})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ol,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(Ne,{placeholder:e("teams.searchPlaceholder"),value:d,onChange:O=>h(O.target.value),className:"pl-10"})]}),a.jsxs(yn,{className:"flex-1",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:L.map(O=>{const H=T(O.team_leader_id||""),I=i[O.team_id]||[];return a.jsxs(ue,{className:"hover:shadow-md transition-shadow",children:[a.jsxs(Re,{className:"pb-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx($e,{className:"text-lg",children:J(O,"team_name")}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(He,{variant:"outline",children:e("teams.memberCount_plural",{count:I.length})}),_&&a.jsxs(Ja,{children:[a.jsx(fd,{asChild:!0,children:a.jsx(K,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-red-500 hover:text-red-700",onClick:U=>{U.stopPropagation(),w(O.team_id)},children:a.jsx(mo,{className:"h-3 w-3"})})}),a.jsxs(go,{onClick:U=>U.stopPropagation(),children:[a.jsxs(vo,{children:[a.jsx(yo,{children:e("teams.deleteTeam")}),a.jsx(wo,{children:e("teams.deleteConfirmation",{name:J(O,"team_name")})})]}),a.jsxs(xo,{children:[a.jsx(_o,{children:e("buttons.cancel")}),a.jsx(bo,{onClick:U=>{U.stopPropagation(),E(O.team_id)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:e("buttons.delete")})]})]})]})]})]}),H&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsxs("span",{children:[e("teams.teamLeader"),":"]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{children:H.avatar||""}),a.jsx("span",{children:J(H,"user_name")})]})]})]}),a.jsxs(me,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:e("teams.members")}),a.jsxs("div",{className:"space-y-2",children:[I.slice(0,4).map(U=>a.jsxs("div",{className:`flex items-center ${_?"justify-between":"gap-2"} bg-muted/50 p-2 rounded`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(Ma,{className:"h-6 w-6",children:[a.jsx(Rl,{src:U.avatar||""}),a.jsx($a,{className:"text-xs",children:J(U,"user_name").charAt(0).toUpperCase()})]}),a.jsx("span",{className:"text-sm",children:J(U,"user_name")})]}),_&&a.jsx(K,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-red-500 hover:text-red-700",onClick:()=>N(O.team_id,U.auth_user_id),children:a.jsx(NI,{className:"h-3 w-3"})})]},U.auth_user_id)),I.length>4&&a.jsx("div",{className:"text-xs text-muted-foreground text-center",children:e("teams.moreMembers",{count:I.length-4})}),I.length===0&&a.jsx("div",{className:"text-xs text-muted-foreground text-center py-2",children:e("teams.noMembersYet")})]})]}),_&&a.jsx("div",{children:a.jsxs(Ze,{onValueChange:U=>{U&&P(O.team_id,U)},children:[a.jsx(Ve,{className:"w-full",children:a.jsx(et,{placeholder:e("teams.addMember")})}),a.jsx(We,{children:s.filter(U=>U.auth_user_id&&U.user_role==="employee"&&!I.some(D=>D.auth_user_id===U.auth_user_id)).map(U=>a.jsx(de,{value:U.auth_user_id,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:U.avatar||""}),a.jsx("span",{children:J(U,"user_name")}),a.jsx(He,{variant:"outline",className:"text-xs",children:U.user_role})]})},U.auth_user_id))})]})}),a.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[e("teams.created")," ",O.created_at?new Date(O.created_at).toLocaleDateString():"N/A"]})]})]},O.team_id)})}),L.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(nn,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:e(d?"teams.noTeamsFound":"teams.noTeamsYet")}),a.jsx("p",{className:"text-muted-foreground mb-4",children:e(d?"tickets.noTicketsFoundDesc":"teams.createFirstTeam")}),!d&&_&&a.jsxs(K,{onClick:()=>p(!0),children:[a.jsx(yt,{className:"h-4 w-4 mr-2"}),e("teams.createFirstTeam")]})]})]})]})}var gd="Switch",[l$,fU]=ar(gd),[c$,u$]=l$(gd),A1=f.forwardRef((t,e)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[m,p]=f.useState(null),y=be(e,w=>p(w)),g=f.useRef(!1),x=m?d||!!m.closest("form"):!0,[b,v]=oo({prop:s,defaultProp:o??!1,onChange:u,caller:gd});return a.jsxs(c$,{scope:r,checked:b,disabled:l,children:[a.jsx(ie.button,{type:"button",role:"switch","aria-checked":b,"aria-required":i,"data-state":M1(b),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:y,onClick:X(t.onClick,w=>{v(_=>!_),x&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),x&&a.jsx(L1,{control:m,bubbles:!g.current,name:n,value:c,checked:b,required:i,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});A1.displayName=gd;var I1="SwitchThumb",D1=f.forwardRef((t,e)=>{const{__scopeSwitch:r,...n}=t,s=u$(I1,r);return a.jsx(ie.span,{"data-state":M1(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:e})});D1.displayName=I1;var d$="SwitchBubbleInput",L1=f.forwardRef(({__scopeSwitch:t,control:e,checked:r,bubbles:n=!0,...s},o)=>{const i=f.useRef(null),l=be(i,o),c=Sj(r),u=uj(e);return f.useEffect(()=>{const d=i.current;if(!d)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&p){const y=new Event("click",{bubbles:n});p.call(d,r),d.dispatchEvent(y)}},[c,r,n]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});L1.displayName=d$;function M1(t){return t?"checked":"unchecked"}var $1=A1,h$=D1;const F1=f.forwardRef(({className:t,...e},r)=>a.jsx($1,{className:z("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:r,children:a.jsx(h$,{className:z("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));F1.displayName=$1.displayName;var wh="rovingFocusGroup.onEntryFocus",f$={bubbles:!1,cancelable:!0},Ol="RovingFocusGroup",[lm,U1,m$]=Ap(Ol),[p$,vd]=ar(Ol,[m$]),[g$,v$]=p$(Ol),B1=f.forwardRef((t,e)=>a.jsx(lm.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(lm.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(x$,{...t,ref:e})})}));B1.displayName=Ol;var x$=f.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,m=f.useRef(null),p=be(e,m),y=Sl(o),[g,x]=oo({prop:i,defaultProp:l??null,onChange:c,caller:Ol}),[b,v]=f.useState(!1),w=mt(u),_=U1(r),j=f.useRef(!1),[k,C]=f.useState(0);return f.useEffect(()=>{const P=m.current;if(P)return P.addEventListener(wh,w),()=>P.removeEventListener(wh,w)},[w]),a.jsx(g$,{scope:r,orientation:n,dir:y,loop:s,currentTabStopId:g,onItemFocus:f.useCallback(P=>x(P),[x]),onItemShiftTab:f.useCallback(()=>v(!0),[]),onFocusableItemAdd:f.useCallback(()=>C(P=>P+1),[]),onFocusableItemRemove:f.useCallback(()=>C(P=>P-1),[]),children:a.jsx(ie.div,{tabIndex:b||k===0?-1:0,"data-orientation":n,...h,ref:p,style:{outline:"none",...t.style},onMouseDown:X(t.onMouseDown,()=>{j.current=!0}),onFocus:X(t.onFocus,P=>{const N=!j.current;if(P.target===P.currentTarget&&N&&!b){const E=new CustomEvent(wh,f$);if(P.currentTarget.dispatchEvent(E),!E.defaultPrevented){const L=_().filter(I=>I.focusable),T=L.find(I=>I.active),W=L.find(I=>I.id===g),H=[T,W,...L].filter(Boolean).map(I=>I.ref.current);W1(H,d)}}j.current=!1}),onBlur:X(t.onBlur,()=>v(!1))})})}),z1="RovingFocusGroupItem",V1=f.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:o,children:i,...l}=t,c=en(),u=o||c,d=v$(z1,r),h=d.currentTabStopId===u,m=U1(r),{onFocusableItemAdd:p,onFocusableItemRemove:y,currentTabStopId:g}=d;return f.useEffect(()=>{if(n)return p(),()=>y()},[n,p,y]),a.jsx(lm.ItemSlot,{scope:r,id:u,focusable:n,active:s,children:a.jsx(ie.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:e,onMouseDown:X(t.onMouseDown,x=>{n?d.onItemFocus(u):x.preventDefault()}),onFocus:X(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:X(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){d.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const b=b$(x,d.orientation,d.dir);if(b!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let w=m().filter(_=>_.focusable).map(_=>_.ref.current);if(b==="last")w.reverse();else if(b==="prev"||b==="next"){b==="prev"&&w.reverse();const _=w.indexOf(x.currentTarget);w=d.loop?_$(w,_+1):w.slice(_+1)}setTimeout(()=>W1(w))}}),children:typeof i=="function"?i({isCurrentTabStop:h,hasTabStop:g!=null}):i})})});V1.displayName=z1;var y$={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function w$(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function b$(t,e,r){const n=w$(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return y$[n]}function W1(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function _$(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var H1=B1,q1=V1,cm=["Enter"," "],j$=["ArrowDown","PageUp","Home"],K1=["ArrowUp","PageDown","End"],S$=[...j$,...K1],N$={ltr:[...cm,"ArrowRight"],rtl:[...cm,"ArrowLeft"]},k$={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Al="Menu",[ll,C$,E$]=Ap(Al),[jo,G1]=ar(Al,[E$,Xu,vd]),xd=Xu(),Q1=vd(),[P$,So]=jo(Al),[T$,Il]=jo(Al),Y1=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:s,onOpenChange:o,modal:i=!0}=t,l=xd(e),[c,u]=f.useState(null),d=f.useRef(!1),h=mt(o),m=Sl(s);return f.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),a.jsx(wj,{...l,children:a.jsx(P$,{scope:e,open:r,onOpenChange:h,content:c,onContentChange:u,children:a.jsx(T$,{scope:e,onClose:f.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:i,children:n})})})};Y1.displayName=Al;var R$="MenuAnchor",ig=f.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=xd(r);return a.jsx(bj,{...s,...n,ref:e})});ig.displayName=R$;var lg="MenuPortal",[O$,J1]=jo(lg,{forceMount:void 0}),X1=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:s}=t,o=So(lg,e);return a.jsx(O$,{scope:e,forceMount:r,children:a.jsx(ir,{present:r||o.open,children:a.jsx(Zu,{asChild:!0,container:s,children:n})})})};X1.displayName=lg;var yr="MenuContent",[A$,cg]=jo(yr),Z1=f.forwardRef((t,e)=>{const r=J1(yr,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,o=So(yr,t.__scopeMenu),i=Il(yr,t.__scopeMenu);return a.jsx(ll.Provider,{scope:t.__scopeMenu,children:a.jsx(ir,{present:n||o.open,children:a.jsx(ll.Slot,{scope:t.__scopeMenu,children:i.modal?a.jsx(I$,{...s,ref:e}):a.jsx(D$,{...s,ref:e})})})})}),I$=f.forwardRef((t,e)=>{const r=So(yr,t.__scopeMenu),n=f.useRef(null),s=be(e,n);return f.useEffect(()=>{const o=n.current;if(o)return Wp(o)},[]),a.jsx(ug,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:X(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),D$=f.forwardRef((t,e)=>{const r=So(yr,t.__scopeMenu);return a.jsx(ug,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),L$=no("MenuContent.ScrollLock"),ug=f.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:p,disableOutsideScroll:y,...g}=t,x=So(yr,r),b=Il(yr,r),v=xd(r),w=Q1(r),_=C$(r),[j,k]=f.useState(null),C=f.useRef(null),P=be(e,C,x.onContentChange),N=f.useRef(0),E=f.useRef(""),L=f.useRef(0),T=f.useRef(null),W=f.useRef("right"),O=f.useRef(0),H=y?td:f.Fragment,I=y?{as:L$,allowPinchZoom:!0}:void 0,U=$=>{var Z,F;const S=E.current+$,M=_().filter(G=>!G.disabled),Y=document.activeElement,ye=(Z=M.find(G=>G.ref.current===Y))==null?void 0:Z.textValue,pe=M.map(G=>G.textValue),ve=G$(pe,S,ye),ke=(F=M.find(G=>G.textValue===ve))==null?void 0:F.ref.current;(function G(ne){E.current=ne,window.clearTimeout(N.current),ne!==""&&(N.current=window.setTimeout(()=>G(""),1e3))})(S),ke&&setTimeout(()=>ke.focus())};f.useEffect(()=>()=>window.clearTimeout(N.current),[]),Ip();const D=f.useCallback($=>{var M,Y;return W.current===((M=T.current)==null?void 0:M.side)&&Y$($,(Y=T.current)==null?void 0:Y.area)},[]);return a.jsx(A$,{scope:r,searchRef:E,onItemEnter:f.useCallback($=>{D($)&&$.preventDefault()},[D]),onItemLeave:f.useCallback($=>{var S;D($)||((S=C.current)==null||S.focus(),k(null))},[D]),onTriggerLeave:f.useCallback($=>{D($)&&$.preventDefault()},[D]),pointerGraceTimerRef:L,onPointerGraceIntentChange:f.useCallback($=>{T.current=$},[]),children:a.jsx(H,{...I,children:a.jsx(Gu,{asChild:!0,trapped:s,onMountAutoFocus:X(o,$=>{var S;$.preventDefault(),(S=C.current)==null||S.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:a.jsx(Ku,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:p,children:a.jsx(H1,{asChild:!0,...w,dir:b.dir,orientation:"vertical",loop:n,currentTabStopId:j,onCurrentTabStopIdChange:k,onEntryFocus:X(c,$=>{b.isUsingKeyboardRef.current||$.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(_j,{role:"menu","aria-orientation":"vertical","data-state":pN(x.open),"data-radix-menu-content":"",dir:b.dir,...v,...g,ref:P,style:{outline:"none",...g.style},onKeyDown:X(g.onKeyDown,$=>{const M=$.target.closest("[data-radix-menu-content]")===$.currentTarget,Y=$.ctrlKey||$.altKey||$.metaKey,ye=$.key.length===1;M&&($.key==="Tab"&&$.preventDefault(),!Y&&ye&&U($.key));const pe=C.current;if($.target!==pe||!S$.includes($.key))return;$.preventDefault();const ke=_().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);K1.includes($.key)&&ke.reverse(),q$(ke)}),onBlur:X(t.onBlur,$=>{$.currentTarget.contains($.target)||(window.clearTimeout(N.current),E.current="")}),onPointerMove:X(t.onPointerMove,cl($=>{const S=$.target,M=O.current!==$.clientX;if($.currentTarget.contains(S)&&M){const Y=$.clientX>O.current?"right":"left";W.current=Y,O.current=$.clientX}}))})})})})})})});Z1.displayName=yr;var M$="MenuGroup",dg=f.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return a.jsx(ie.div,{role:"group",...n,ref:e})});dg.displayName=M$;var $$="MenuLabel",eN=f.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return a.jsx(ie.div,{...n,ref:e})});eN.displayName=$$;var ju="MenuItem",yy="menu.itemSelect",yd=f.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...s}=t,o=f.useRef(null),i=Il(ju,t.__scopeMenu),l=cg(ju,t.__scopeMenu),c=be(e,o),u=f.useRef(!1),d=()=>{const h=o.current;if(!r&&h){const m=new CustomEvent(yy,{bubbles:!0,cancelable:!0});h.addEventListener(yy,p=>n==null?void 0:n(p),{once:!0}),L_(h,m),m.defaultPrevented?u.current=!1:i.onClose()}};return a.jsx(tN,{...s,ref:c,disabled:r,onClick:X(t.onClick,d),onPointerDown:h=>{var m;(m=t.onPointerDown)==null||m.call(t,h),u.current=!0},onPointerUp:X(t.onPointerUp,h=>{var m;u.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:X(t.onKeyDown,h=>{const m=l.searchRef.current!=="";r||m&&h.key===" "||cm.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});yd.displayName=ju;var tN=f.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...o}=t,i=cg(ju,r),l=Q1(r),c=f.useRef(null),u=be(e,c),[d,h]=f.useState(!1),[m,p]=f.useState("");return f.useEffect(()=>{const y=c.current;y&&p((y.textContent??"").trim())},[o.children]),a.jsx(ll.ItemSlot,{scope:r,disabled:n,textValue:s??m,children:a.jsx(q1,{asChild:!0,...l,focusable:!n,children:a.jsx(ie.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...o,ref:u,onPointerMove:X(t.onPointerMove,cl(y=>{n?i.onItemLeave(y):(i.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:X(t.onPointerLeave,cl(y=>i.onItemLeave(y))),onFocus:X(t.onFocus,()=>h(!0)),onBlur:X(t.onBlur,()=>h(!1))})})})}),F$="MenuCheckboxItem",rN=f.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...s}=t;return a.jsx(iN,{scope:t.__scopeMenu,checked:r,children:a.jsx(yd,{role:"menuitemcheckbox","aria-checked":Su(r)?"mixed":r,...s,ref:e,"data-state":fg(r),onSelect:X(s.onSelect,()=>n==null?void 0:n(Su(r)?!0:!r),{checkForDefaultPrevented:!1})})})});rN.displayName=F$;var nN="MenuRadioGroup",[U$,B$]=jo(nN,{value:void 0,onValueChange:()=>{}}),sN=f.forwardRef((t,e)=>{const{value:r,onValueChange:n,...s}=t,o=mt(n);return a.jsx(U$,{scope:t.__scopeMenu,value:r,onValueChange:o,children:a.jsx(dg,{...s,ref:e})})});sN.displayName=nN;var oN="MenuRadioItem",aN=f.forwardRef((t,e)=>{const{value:r,...n}=t,s=B$(oN,t.__scopeMenu),o=r===s.value;return a.jsx(iN,{scope:t.__scopeMenu,checked:o,children:a.jsx(yd,{role:"menuitemradio","aria-checked":o,...n,ref:e,"data-state":fg(o),onSelect:X(n.onSelect,()=>{var i;return(i=s.onValueChange)==null?void 0:i.call(s,r)},{checkForDefaultPrevented:!1})})})});aN.displayName=oN;var hg="MenuItemIndicator",[iN,z$]=jo(hg,{checked:!1}),lN=f.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...s}=t,o=z$(hg,r);return a.jsx(ir,{present:n||Su(o.checked)||o.checked===!0,children:a.jsx(ie.span,{...s,ref:e,"data-state":fg(o.checked)})})});lN.displayName=hg;var V$="MenuSeparator",cN=f.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return a.jsx(ie.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});cN.displayName=V$;var W$="MenuArrow",uN=f.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=xd(r);return a.jsx(jj,{...s,...n,ref:e})});uN.displayName=W$;var H$="MenuSub",[mU,dN]=jo(H$),gi="MenuSubTrigger",hN=f.forwardRef((t,e)=>{const r=So(gi,t.__scopeMenu),n=Il(gi,t.__scopeMenu),s=dN(gi,t.__scopeMenu),o=cg(gi,t.__scopeMenu),i=f.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=o,u={__scopeMenu:t.__scopeMenu},d=f.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return f.useEffect(()=>d,[d]),f.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),a.jsx(ig,{asChild:!0,...u,children:a.jsx(tN,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":pN(r.open),...t,ref:Hu(e,s.onTriggerChange),onClick:h=>{var m;(m=t.onClick)==null||m.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:X(t.onPointerMove,cl(h=>{o.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!r.open&&!i.current&&(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:X(t.onPointerLeave,cl(h=>{var p,y;d();const m=(p=r.content)==null?void 0:p.getBoundingClientRect();if(m){const g=(y=r.content)==null?void 0:y.dataset.side,x=g==="right",b=x?-5:5,v=m[x?"left":"right"],w=m[x?"right":"left"];o.onPointerGraceIntentChange({area:[{x:h.clientX+b,y:h.clientY},{x:v,y:m.top},{x:w,y:m.top},{x:w,y:m.bottom},{x:v,y:m.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(h),h.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:X(t.onKeyDown,h=>{var p;const m=o.searchRef.current!=="";t.disabled||m&&h.key===" "||N$[n.dir].includes(h.key)&&(r.onOpenChange(!0),(p=r.content)==null||p.focus(),h.preventDefault())})})})});hN.displayName=gi;var fN="MenuSubContent",mN=f.forwardRef((t,e)=>{const r=J1(yr,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,o=So(yr,t.__scopeMenu),i=Il(yr,t.__scopeMenu),l=dN(fN,t.__scopeMenu),c=f.useRef(null),u=be(e,c);return a.jsx(ll.Provider,{scope:t.__scopeMenu,children:a.jsx(ir,{present:n||o.open,children:a.jsx(ll.Slot,{scope:t.__scopeMenu,children:a.jsx(ug,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;i.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:X(t.onFocusOutside,d=>{d.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:X(t.onEscapeKeyDown,d=>{i.onClose(),d.preventDefault()}),onKeyDown:X(t.onKeyDown,d=>{var p;const h=d.currentTarget.contains(d.target),m=k$[i.dir].includes(d.key);h&&m&&(o.onOpenChange(!1),(p=l.trigger)==null||p.focus(),d.preventDefault())})})})})})});mN.displayName=fN;function pN(t){return t?"open":"closed"}function Su(t){return t==="indeterminate"}function fg(t){return Su(t)?"indeterminate":t?"checked":"unchecked"}function q$(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function K$(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function G$(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,o=r?t.indexOf(r):-1;let i=K$(t,Math.max(o,0));s.length===1&&(i=i.filter(u=>u!==r));const c=i.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function Q$(t,e){const{x:r,y:n}=t;let s=!1;for(let o=0,i=e.length-1;o<e.length;i=o++){const l=e[o],c=e[i],u=l.x,d=l.y,h=c.x,m=c.y;d>n!=m>n&&r<(h-u)*(n-d)/(m-d)+u&&(s=!s)}return s}function Y$(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return Q$(r,e)}function cl(t){return e=>e.pointerType==="mouse"?t(e):void 0}var J$=Y1,X$=ig,Z$=X1,eF=Z1,tF=dg,rF=eN,nF=yd,sF=rN,oF=sN,aF=aN,iF=lN,lF=cN,cF=uN,uF=hN,dF=mN,wd="DropdownMenu",[hF,pU]=ar(wd,[G1]),$t=G1(),[fF,gN]=hF(wd),vN=t=>{const{__scopeDropdownMenu:e,children:r,dir:n,open:s,defaultOpen:o,onOpenChange:i,modal:l=!0}=t,c=$t(e),u=f.useRef(null),[d,h]=oo({prop:s,defaultProp:o??!1,onChange:i,caller:wd});return a.jsx(fF,{scope:e,triggerId:en(),triggerRef:u,contentId:en(),open:d,onOpenChange:h,onOpenToggle:f.useCallback(()=>h(m=>!m),[h]),modal:l,children:a.jsx(J$,{...c,open:d,onOpenChange:h,dir:n,modal:l,children:r})})};vN.displayName=wd;var xN="DropdownMenuTrigger",yN=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=t,o=gN(xN,r),i=$t(r);return a.jsx(X$,{asChild:!0,...i,children:a.jsx(ie.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:Hu(e,o.triggerRef),onPointerDown:X(t.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:X(t.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});yN.displayName=xN;var mF="DropdownMenuPortal",wN=t=>{const{__scopeDropdownMenu:e,...r}=t,n=$t(e);return a.jsx(Z$,{...n,...r})};wN.displayName=mF;var bN="DropdownMenuContent",_N=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=gN(bN,r),o=$t(r),i=f.useRef(!1);return a.jsx(eF,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...n,ref:e,onCloseAutoFocus:X(t.onCloseAutoFocus,l=>{var c;i.current||(c=s.triggerRef.current)==null||c.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:X(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(i.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});_N.displayName=bN;var pF="DropdownMenuGroup",gF=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=$t(r);return a.jsx(tF,{...s,...n,ref:e})});gF.displayName=pF;var vF="DropdownMenuLabel",jN=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=$t(r);return a.jsx(rF,{...s,...n,ref:e})});jN.displayName=vF;var xF="DropdownMenuItem",SN=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=$t(r);return a.jsx(nF,{...s,...n,ref:e})});SN.displayName=xF;var yF="DropdownMenuCheckboxItem",NN=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=$t(r);return a.jsx(sF,{...s,...n,ref:e})});NN.displayName=yF;var wF="DropdownMenuRadioGroup",bF=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=$t(r);return a.jsx(oF,{...s,...n,ref:e})});bF.displayName=wF;var _F="DropdownMenuRadioItem",kN=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=$t(r);return a.jsx(aF,{...s,...n,ref:e})});kN.displayName=_F;var jF="DropdownMenuItemIndicator",CN=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=$t(r);return a.jsx(iF,{...s,...n,ref:e})});CN.displayName=jF;var SF="DropdownMenuSeparator",EN=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=$t(r);return a.jsx(lF,{...s,...n,ref:e})});EN.displayName=SF;var NF="DropdownMenuArrow",kF=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=$t(r);return a.jsx(cF,{...s,...n,ref:e})});kF.displayName=NF;var CF="DropdownMenuSubTrigger",PN=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=$t(r);return a.jsx(uF,{...s,...n,ref:e})});PN.displayName=CF;var EF="DropdownMenuSubContent",TN=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=$t(r);return a.jsx(dF,{...s,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});TN.displayName=EF;var PF=vN,TF=yN,RF=wN,RN=_N,ON=jN,AN=SN,IN=NN,DN=kN,LN=CN,MN=EN,$N=PN,FN=TN;const OF=PF,AF=TF,IF=f.forwardRef(({className:t,inset:e,children:r,...n},s)=>a.jsxs($N,{ref:s,className:z("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",e&&"pl-8",t),...n,children:[r,a.jsx(B_,{className:"ml-auto h-4 w-4"})]}));IF.displayName=$N.displayName;const DF=f.forwardRef(({className:t,...e},r)=>a.jsx(FN,{ref:r,className:z("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));DF.displayName=FN.displayName;const UN=f.forwardRef(({className:t,sideOffset:e=4,...r},n)=>a.jsx(RF,{children:a.jsx(RN,{ref:n,sideOffset:e,className:z("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));UN.displayName=RN.displayName;const Oc=f.forwardRef(({className:t,inset:e,...r},n)=>a.jsx(AN,{ref:n,className:z("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e&&"pl-8",t),...r}));Oc.displayName=AN.displayName;const LF=f.forwardRef(({className:t,children:e,checked:r,...n},s)=>a.jsxs(IN,{ref:s,className:z("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),checked:r,...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(LN,{children:a.jsx(kp,{className:"h-4 w-4"})})}),e]}));LF.displayName=IN.displayName;const MF=f.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(DN,{ref:n,className:z("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(LN,{children:a.jsx(uI,{className:"h-2 w-2 fill-current"})})}),e]}));MF.displayName=DN.displayName;const $F=f.forwardRef(({className:t,inset:e,...r},n)=>a.jsx(ON,{ref:n,className:z("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));$F.displayName=ON.displayName;const FF=f.forwardRef(({className:t,...e},r)=>a.jsx(MN,{ref:r,className:z("-mx-1 my-1 h-px bg-muted",t),...e}));FF.displayName=MN.displayName;function UF(){var Qe;const{user:t}=ht(),{t:e}=it(),[r,n]=f.useState([]),[s,o]=f.useState(null),[i,l]=f.useState([]),[c,u]=f.useState([]),[d,h]=f.useState(""),[m,p]=f.useState(!0),[y,g]=f.useState(!1),[x,b]=f.useState(""),[v,w]=f.useState(!1),[_,j]=f.useState([]),[k,C]=f.useState({name:"",is_private:!0,project_id:""}),[P,N]=f.useState(!1),[E,L]=f.useState(null),[T,W]=f.useState(null),[O,H]=f.useState(!1),[I,U]=f.useState(!0),D=f.useRef(!1),$=f.useRef(null),S=f.useRef(null),M=f.useRef(null),Y=f.useRef(null);f.useEffect(()=>{t&&!D.current&&pe()},[t]),f.useEffect(()=>{s&&(S.current!==s.room_id&&ke(),$.current!==s.room_id&&ve())},[s]),f.useEffect(()=>{if(M.current){const V=M.current.querySelector("[data-radix-scroll-area-viewport]");V&&(V.scrollTop=V.scrollHeight)}},[i]),f.useEffect(()=>{s&&(async()=>{try{await Q.realtime.setAuth(await cr.getFreshJwt());const A=`room:${s.room_id}:messages`,B=Q.channel(A,{config:{broadcast:{self:!0,ack:!0},private:!0}});return B.on("broadcast",{event:"*"},ae=>{var js;const Ee=(js=ae.payload)==null?void 0:js.record;Ee&&Ee.message_id&&(l(Pe=>Pe.some(zr=>zr.message_id===Ee.message_id)?Pe:[...Pe.filter(zr=>!(zr.message_id.startsWith("temp-")&&zr.auth_user_id===Ee.auth_user_id&&zr.content===Ee.content)),Ee]),n(Pe=>Pe.map(Qt=>Qt.room_id===s.room_id?{...Qt,lastMessage:Ee}:Qt)))}),await B.subscribe(),()=>{B.unsubscribe()}}catch(A){console.error("Failed to setup realtime:",A)}})()},[s]),f.useEffect(()=>(d&&s?(v||(w(!0),ye(!0)),Y.current&&clearTimeout(Y.current),Y.current=setTimeout(()=>{w(!1),ye(!1)},2e3)):v&&(w(!1),ye(!1)),()=>{Y.current&&clearTimeout(Y.current)}),[d]),f.useEffect(()=>{N(!1),L(null),W(null),D.current=!1,$.current=null,S.current=null},[t]);const ye=async V=>{var A;if(!(!s||!t))try{await Q.channel(`room:${s.room_id}:typing`).send({type:"broadcast",event:"typing",payload:{userId:t.id,userName:((A=t.profile)==null?void 0:A.user_name)||t.email,typing:V}})}catch(B){console.error("Failed to broadcast typing:",B)}},pe=async()=>{if(!D.current)try{p(!0);const V=await Yo.getUserRooms((t==null?void 0:t.id)||""),A=await Promise.all(V.map(async B=>{try{const ae=await Ri.getByRoom(B.room_id),Ee=ae[ae.length-1];return{...B,lastMessage:Ee,unreadCount:0}}catch{return{...B,unreadCount:0}}}));n(A),A.length>0&&o(A[0]),N(!0),D.current=!0}catch(V){console.error("Failed to load rooms:",V)}finally{p(!1)}},ve=async()=>{if(!(!s||$.current===s.room_id))try{const V=await Ri.getByRoom(s.room_id);l(V),L(s.room_id),$.current=s.room_id}catch(V){console.error("Failed to load messages:",V)}},ke=async()=>{if(!(!s||S.current===s.room_id))try{const V=await Yo.getRoomMembers(s.room_id);u(V),W(s.room_id),S.current=s.room_id}catch(V){console.error("Failed to load room members:",V)}},Z=async()=>{if(!d.trim()||!s||!t)return;const V=d.trim(),A={message_id:`temp-${Date.now()}`,room_id:s.room_id,auth_user_id:t.id,content:V,created_at:new Date().toISOString(),metadata:null};l(B=>[...B,A]),h("");try{await Ri.create({room_id:s.room_id,auth_user_id:t.id,content:V,metadata:null})}catch(B){console.error("Failed to send message:",B),l(ae=>ae.filter(Ee=>Ee.message_id!==A.message_id)),h(V)}},F=async()=>{var V;if(!(!k.name.trim()||!t))try{const A=await Yo.createRoom({name:k.name.trim(),is_private:k.is_private,project_id:k.project_id?parseInt(k.project_id):null,created_by:((V=t.profile)==null?void 0:V.user_id)||0,auth_user_id:t.id});await Yo.addMember(A.room_id,t.id),n(B=>[...B,{...A,unreadCount:0}]),o({...A,unreadCount:0}),C({name:"",is_private:!0,project_id:""}),g(!1)}catch(A){console.error("Failed to create room:",A)}},G=V=>{const A=new Date(V),ae=Math.floor((new Date().getTime()-A.getTime())/6e4);return ae<1?"Just now":ae<60?`${ae}m ago`:ae<1440?`${Math.floor(ae/60)}h ago`:A.toLocaleDateString("en-US",{month:"short",day:"numeric"})},ne=V=>new Date(V).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),fe=(V,A)=>!A||V.auth_user_id!==A.auth_user_id?!1:new Date(V.created_at).getTime()-new Date(A.created_at).getTime()<5*60*1e3,ge=(V,A)=>{if(!A)return!0;const B=new Date(V.created_at).toDateString(),ae=new Date(A.created_at).toDateString();return B!==ae},we=r.filter(V=>{var A;return(A=V.room_name)==null?void 0:A.toLowerCase().includes(x.toLowerCase())});return m?a.jsx("div",{className:"flex items-center justify-center h-full py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):a.jsxs("div",{className:"flex flex-col md:flex-row h-[calc(100vh-120px)] gap-4 sm:gap-6 p-3 sm:p-6 bg-gradient-to-br from-background via-background to-muted/20 rounded-xl border shadow-sm",children:[a.jsxs("div",{className:z("flex-col gap-4",I?"flex w-80":"hidden","lg:flex lg:w-80"),children:[a.jsxs("div",{className:"flex items-center justify-between px-2",children:[a.jsx("h2",{className:"text-2xl font-bold tracking-tight bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:e("chats.chatRooms")}),a.jsxs(Gt,{open:y,onOpenChange:g,children:[a.jsx(Da,{asChild:!0,children:a.jsx(K,{size:"icon",variant:"ghost",className:"h-9 w-9 rounded-full hover:bg-primary/10 hover:text-primary transition-all hover:scale-105",children:a.jsx(yt,{className:"h-5 w-5"})})}),a.jsxs(At,{className:"sm:max-w-[425px]",children:[a.jsxs(It,{children:[a.jsx(Dt,{children:e("chats.createRoomTitle")}),a.jsx(xr,{children:e("chats.createRoomDesc")})]}),a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[a.jsx(Te,{htmlFor:"room-name",className:"text-right",children:e("chats.roomName")}),a.jsx(Ne,{id:"room-name",value:k.name,onChange:V=>C(A=>({...A,name:V.target.value})),className:"col-span-3",placeholder:e("chats.roomNamePlaceholder")})]}),a.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[a.jsx(Te,{htmlFor:"private",className:"text-right",children:e("chats.private")}),a.jsxs("div",{className:"col-span-3 flex items-center space-x-2",children:[a.jsx(F1,{id:"private",checked:k.is_private,onCheckedChange:V=>C(A=>({...A,is_private:V}))}),a.jsx(Te,{htmlFor:"private",className:"text-sm text-muted-foreground",children:k.is_private?e("chats.privateRoom"):e("chats.publicRoom")})]})]}),a.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[a.jsx(Te,{htmlFor:"project",className:"text-right",children:e("chats.project")}),a.jsx(Ne,{id:"project",value:k.project_id,onChange:V=>C(A=>({...A,project_id:V.target.value})),className:"col-span-3",placeholder:e("chats.projectIdPlaceholder")})]})]}),a.jsx(vr,{children:a.jsx(K,{onClick:F,disabled:!k.name.trim(),children:e("chats.createRoom")})})]})]})]}),a.jsxs("div",{className:"relative px-2",children:[a.jsx(ol,{className:"absolute left-5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Ne,{placeholder:e("chats.searchConversations"),className:"pl-9 bg-muted/50 border-none focus-visible:ring-2 focus-visible:ring-primary/20 transition-all",value:x,onChange:V=>b(V.target.value)})]}),a.jsx(yn,{className:"flex-1 -mx-2 px-2",children:a.jsx("div",{className:"space-y-2",children:we.map(V=>{var A;return a.jsxs("button",{onClick:()=>o(V),className:z("w-full flex items-start gap-3 p-3 rounded-xl transition-all duration-200 text-left group relative overflow-hidden",(s==null?void 0:s.room_id)===V.room_id?"bg-gradient-to-r from-primary to-primary/90 text-primary-foreground shadow-lg shadow-primary/30 scale-[1.02]":"hover:bg-muted/70 text-foreground hover:shadow-md"),children:[a.jsxs("div",{className:z("h-12 w-12 rounded-full flex items-center justify-center flex-shrink-0 transition-all relative",(s==null?void 0:s.room_id)===V.room_id?"bg-primary-foreground/20 text-primary-foreground ring-2 ring-primary-foreground/30":"bg-gradient-to-br from-primary/20 to-primary/10 text-primary group-hover:from-primary/30 group-hover:to-primary/20"),children:[a.jsx(Xn,{className:"h-5 w-5"}),V.unreadCount&&V.unreadCount>0&&a.jsx(He,{className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-[10px] bg-destructive border-2 border-background",children:V.unreadCount})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"font-semibold truncate text-sm",children:V.room_name||`Room ${V.room_id.slice(0,8)}`}),V.lastMessage&&a.jsx("span",{className:z("text-[10px] flex-shrink-0 ml-2",(s==null?void 0:s.room_id)===V.room_id?"text-primary-foreground/70":"text-muted-foreground"),children:G(V.lastMessage.created_at)})]}),a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("p",{className:z("text-xs truncate flex-1",(s==null?void 0:s.room_id)===V.room_id?"text-primary-foreground/80":"text-muted-foreground"),children:((A=V.lastMessage)==null?void 0:A.content)||e("chats.selectRoom")}),V.is_private&&a.jsx("span",{className:z("text-[9px] px-1.5 py-0.5 rounded-full flex-shrink-0",(s==null?void 0:s.room_id)===V.room_id?"bg-primary-foreground/20 text-primary-foreground":"bg-muted text-muted-foreground"),children:e("chats.private")})]})]})]},V.room_id)})})})]}),s&&a.jsx("div",{className:"md:hidden mb-4",children:a.jsxs(Xp,{open:O,onOpenChange:H,children:[a.jsx(IS,{asChild:!0,children:a.jsxs(K,{variant:"outline",className:"w-full justify-between shadow-sm hover:shadow-md transition-shadow",children:[a.jsx("span",{className:"truncate",children:s.room_name||`Room ${s.room_id.slice(0,8)}`}),a.jsx(Xn,{className:"h-4 w-4 ml-2"})]})}),a.jsx(id,{side:"left",className:"w-80 p-4",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-bold",children:e("chats.chatRooms")}),a.jsx(K,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>g(!0),children:a.jsx(yt,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ol,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Ne,{placeholder:e("chats.searchRooms"),className:"pl-9",value:x,onChange:V=>b(V.target.value)})]}),a.jsx(yn,{className:"h-[60vh]",children:a.jsx("div",{className:"space-y-2",children:we.map(V=>a.jsxs("button",{onClick:()=>{o(V),H(!1)},className:z("w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 text-left",(s==null?void 0:s.room_id)===V.room_id?"bg-primary text-primary-foreground shadow-md":"hover:bg-muted/50"),children:[a.jsx(Xn,{className:"h-5 w-5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-semibold truncate text-sm",children:V.room_name||`Room ${V.room_id.slice(0,8)}`}),V.lastMessage&&a.jsx("div",{className:"text-xs truncate opacity-80",children:V.lastMessage.content})]})]},V.room_id))})})]})})]})}),a.jsx(ue,{className:"flex-1 flex flex-col overflow-hidden border-none shadow-xl bg-card/80 backdrop-blur-sm",children:s?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b bg-gradient-to-r from-background/95 via-background to-background/95 backdrop-blur-md supports-[backdrop-filter]:bg-background/80",children:[a.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[a.jsx(Ma,{className:"h-10 w-10 sm:h-11 sm:w-11 border-2 border-primary/20 shadow-md flex-shrink-0 ring-2 ring-background",children:a.jsx($a,{className:"bg-gradient-to-br from-primary/20 to-primary/10 text-primary font-semibold",children:((Qe=s.room_name)==null?void 0:Qe.charAt(0).toUpperCase())||"#"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"font-semibold text-sm sm:text-base truncate",children:s.room_name||`Room ${s.room_id.slice(0,8)}`}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(nn,{className:"h-3 w-3"}),a.jsxs("span",{className:"truncate",children:[c.length," ",e("chats.members")]}),a.jsx("span",{className:"hidden sm:inline w-1 h-1 rounded-full bg-muted-foreground/30"}),a.jsxs("span",{className:"hidden sm:flex text-green-500 items-center gap-1.5",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse shadow-lg shadow-green-500/50"}),e("chats.online")]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9 text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-all",onClick:()=>U(!I),children:a.jsx(W_,{className:"h-4 w-4"})}),a.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9 text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-all hidden sm:flex",children:a.jsx(Rp,{className:"h-4 w-4"})}),a.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9 text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-all hidden sm:flex",children:a.jsx(CI,{className:"h-4 w-4"})}),a.jsxs(OF,{children:[a.jsx(AF,{asChild:!0,children:a.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9 text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-all",children:a.jsx(dI,{className:"h-4 w-4"})})}),a.jsxs(UN,{align:"end",children:[a.jsx(Oc,{children:"View Details"}),a.jsx(Oc,{children:"Mute Notifications"}),a.jsx(Oc,{className:"text-destructive",children:"Leave Room"})]})]})]})]}),a.jsx(yn,{ref:M,className:"flex-1 p-3 sm:p-6 bg-gradient-to-b from-slate-50/80 via-slate-50/50 to-slate-50/80 dark:from-slate-900/80 dark:via-slate-900/50 dark:to-slate-900/80",children:a.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[T===s.room_id&&i.map((V,A)=>{var Qt,zr,gg,vg,xg,yg,wg;const B=V.auth_user_id===(t==null?void 0:t.id)||V.auth_user_id===((Qt=t==null?void 0:t.profile)==null?void 0:Qt.auth_user_id)||V.auth_user_id===((gg=(zr=t==null?void 0:t.profile)==null?void 0:zr.user_id)==null?void 0:gg.toString()),ae=A>0?i[A-1]:void 0,Ee=!fe(V,ae),js=ge(V,ae);let Pe;return B?Pe={auth_user_id:t.id,user_name:((vg=t.profile)==null?void 0:vg.user_name)||t.email||e("chats.you"),avatar:(xg=t.profile)==null?void 0:xg.avatar,user_id:((yg=t.profile)==null?void 0:yg.user_id)||0,user_email:t.email}:Pe=c.find(tk=>tk.auth_user_id===V.auth_user_id),Pe||(Pe={auth_user_id:V.auth_user_id,user_name:e("chats.unknownUser"),avatar:"",user_id:0}),a.jsxs("div",{children:[js&&a.jsx("div",{className:"flex items-center justify-center my-6",children:a.jsx("div",{className:"bg-muted/80 backdrop-blur-sm px-4 py-1.5 rounded-full text-xs text-muted-foreground font-medium shadow-sm",children:new Date(V.created_at).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})}),a.jsxs("div",{className:z("flex gap-3 animate-in slide-in-from-bottom-2 duration-300",B?"flex-row-reverse":"flex-row",!Ee&&"mt-1"),children:[a.jsx("div",{className:z("flex-shrink-0 w-8",!Ee&&"invisible"),children:a.jsxs(Ma,{className:"h-8 w-8 border-2 border-background shadow-md",children:[a.jsx(Rl,{src:Pe.avatar||""}),a.jsx($a,{className:"text-xs font-semibold bg-gradient-to-br from-primary/20 to-primary/10 text-primary",children:((wg=Pe.user_name)==null?void 0:wg.charAt(0).toUpperCase())||"?"})]})}),a.jsxs("div",{className:z("flex flex-col max-w-[75%] sm:max-w-[65%]",B?"items-end":"items-start"),children:[Ee&&!B&&a.jsx("span",{className:"text-xs font-medium text-muted-foreground ml-1 mb-1",children:Pe.user_name}),a.jsxs("div",{className:"group relative",children:[a.jsx("div",{className:z("px-4 py-2.5 shadow-md text-sm break-words transition-all hover:shadow-lg",B?"bg-gradient-to-br from-primary to-primary/90 text-primary-foreground rounded-2xl rounded-tr-md":"bg-card border border-border/50 text-card-foreground rounded-2xl rounded-tl-md"),children:V.content}),a.jsxs("div",{className:z("flex items-center gap-1.5 mt-1",B?"justify-end":"justify-start"),children:[a.jsx("span",{className:"text-[10px] text-muted-foreground",children:ne(V.created_at)}),B&&a.jsx("div",{className:"text-primary-foreground/70",children:V.message_id.startsWith("temp-")?a.jsx(kp,{className:"h-3 w-3"}):a.jsx(iI,{className:"h-3 w-3"})})]})]})]})]})]},V.message_id)}),_.length>0&&a.jsxs("div",{className:"flex gap-3 animate-in fade-in duration-200",children:[a.jsx("div",{className:"flex-shrink-0 w-8",children:a.jsx("div",{className:"h-8 w-8 rounded-full bg-muted flex items-center justify-center",children:a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0ms"}}),a.jsx("div",{className:"w-1.5 h-1.5 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"150ms"}}),a.jsx("div",{className:"w-1.5 h-1.5 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),a.jsx("div",{className:"flex items-center",children:a.jsx("span",{className:"text-xs text-muted-foreground italic",children:e("chats.someoneTyping")})})]})]})}),a.jsx("div",{className:"p-3 sm:p-4 bg-gradient-to-r from-background/95 via-background to-background/95 backdrop-blur-md border-t",children:a.jsxs("div",{className:"flex items-end gap-2 max-w-4xl mx-auto bg-card/80 backdrop-blur-sm border border-border/50 rounded-2xl p-2 shadow-lg focus-within:ring-2 focus-within:ring-primary/30 focus-within:border-primary/50 transition-all",children:[a.jsx(K,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-full text-muted-foreground hover:text-primary hover:bg-primary/10 transition-all flex-shrink-0",children:a.jsx(vI,{className:"h-5 w-5"})}),a.jsx(Ne,{value:d,onChange:V=>h(V.target.value),placeholder:e("chats.typeMessage"),onKeyPress:V=>V.key==="Enter"&&!V.shiftKey&&Z(),className:"flex-1 border-none bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 min-h-[40px] py-2.5 text-sm placeholder:text-muted-foreground/60"}),a.jsx(K,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-full text-muted-foreground hover:text-primary hover:bg-primary/10 transition-all flex-shrink-0",children:a.jsx(yI,{className:"h-5 w-5"})}),a.jsx(K,{onClick:Z,disabled:!d.trim(),size:"icon",className:z("h-9 w-9 rounded-full transition-all duration-200 flex-shrink-0",d.trim()?"bg-gradient-to-r from-primary to-primary/90 text-primary-foreground hover:from-primary/90 hover:to-primary shadow-lg shadow-primary/30 hover:shadow-xl hover:scale-105":"bg-muted text-muted-foreground hover:bg-muted/80"),children:a.jsx(Op,{className:"h-4 w-4"})})]})})]}):a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center p-8 bg-gradient-to-b from-slate-50/50 via-background to-slate-50/50 dark:from-slate-900/50 dark:via-background dark:to-slate-900/50",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-primary/20 to-primary/10 rounded-full flex items-center justify-center mb-6 animate-pulse shadow-lg shadow-primary/20",children:a.jsx(Xn,{className:"h-10 w-10 text-primary"})}),a.jsx("h3",{className:"text-2xl font-bold text-foreground mb-2",children:e("chats.selectRoom")}),a.jsx("p",{className:"text-base text-muted-foreground max-w-sm",children:e("chats.selectRoom")})]})})]})}function BF(){const{user:t}=ht(),{t:e}=it(),[r,n]=f.useState([]),[s,o]=f.useState(null),[i,l]=f.useState([]),[c,u]=f.useState([]),[d,h]=f.useState(""),[m,p]=f.useState(!0),[y,g]=f.useState(!1),[x,b]=f.useState(null),[v,w]=f.useState(null),[_,j]=f.useState(!1),[k,C]=f.useState(!0),P=f.useRef(!1),N=f.useRef(null),E=f.useRef(null);f.useEffect(()=>{t&&!P.current&&L()},[t]),f.useEffect(()=>{s&&(E.current!==s.room_id&&W(),N.current!==s.room_id&&T())},[s]),f.useEffect(()=>{s&&(async()=>{try{await Q.realtime.setAuth(await cr.getFreshJwt());const U=`room:${s.room_id}:messages`,D=Q.channel(U,{config:{broadcast:{self:!0,ack:!0},private:!0}});return D.on("broadcast",{event:"*"},$=>{var M;const S=(M=$.payload)==null?void 0:M.record;S&&S.message_id&&l(Y=>Y.some(pe=>pe.message_id===S.message_id)?Y:[...Y.filter(pe=>!(pe.message_id.startsWith("temp-")&&pe.auth_user_id===S.auth_user_id&&pe.content===S.content)),S])}),await D.subscribe(),()=>{D.unsubscribe()}}catch(U){console.error("Failed to setup realtime:",U)}})()},[s]),f.useEffect(()=>{g(!1),b(null),w(null),P.current=!1,N.current=null,E.current=null},[t]);const L=async()=>{if(!P.current)try{p(!0);const I=await Yo.getUserRooms((t==null?void 0:t.id)||"");n(I),I.length>0&&o(I[0]),g(!0),P.current=!0}catch(I){console.error("Failed to load rooms:",I)}finally{p(!1)}},T=async()=>{if(!(!s||N.current===s.room_id))try{const I=await Ri.getByRoom(s.room_id);l(I),b(s.room_id),N.current=s.room_id}catch(I){console.error("Failed to load messages:",I)}},W=async()=>{if(!(!s||E.current===s.room_id))try{const I=await Yo.getRoomMembers(s.room_id);u(I),w(s.room_id),E.current=s.room_id}catch(I){console.error("Failed to load room members:",I)}},O=async()=>{if(!d.trim()||!s||!t)return;const I=d.trim(),U={message_id:`temp-${Date.now()}`,room_id:s.room_id,auth_user_id:t.id,content:I,created_at:new Date().toISOString(),metadata:null};l(D=>[...D,U]),h("");try{await Ri.create({room_id:s.room_id,auth_user_id:t.id,content:I,metadata:null})}catch(D){console.error("Failed to send message:",D),l($=>$.filter(S=>S.message_id!==U.message_id)),h(I)}},H=I=>new Date(I).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return m?a.jsx("div",{className:"flex items-center justify-center h-full py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):a.jsxs("div",{className:"flex flex-col md:flex-row h-[calc(100vh-120px)] gap-4 sm:gap-6 pb-6",children:[a.jsxs("div",{className:`flex-col border rounded-lg ${k?"flex w-80":"hidden"} lg:flex lg:w-80`,children:[a.jsx("div",{className:"p-4 border-b",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h2",{className:"text-xl font-semibold",children:e("chats.myChatRooms")})})}),a.jsx(yn,{className:"flex-1 p-4",children:a.jsx("div",{className:"space-y-2",children:r.map(I=>a.jsx(ue,{className:`cursor-pointer transition-colors ${(s==null?void 0:s.room_id)===I.room_id?"bg-primary/10 border-primary":""}`,onClick:()=>o(I),children:a.jsx(me,{className:"p-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Xn,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium truncate",children:I.room_name||`Room ${I.room_id.slice(0,8)}`}),a.jsx("p",{className:"text-xs text-muted-foreground",children:I.is_private?e("chats.private"):e("chats.publicRoom")})]})]})})},I.room_id))})})]}),s&&a.jsx("div",{className:"md:hidden mb-4",children:a.jsxs(Xp,{open:_,onOpenChange:j,children:[a.jsx(IS,{asChild:!0,children:a.jsxs(K,{variant:"outline",className:"w-full justify-between",children:[a.jsx("span",{className:"truncate",children:s.room_name||`Room ${s.room_id.slice(0,8)}`}),a.jsx(Xn,{className:"h-4 w-4 ml-2"})]})}),a.jsx(id,{side:"left",className:"w-80 p-4",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:e("chats.myChatRooms")}),a.jsx(yn,{className:"h-[60vh]",children:a.jsx("div",{className:"space-y-2",children:r.map(I=>a.jsx(ue,{className:`cursor-pointer transition-colors ${(s==null?void 0:s.room_id)===I.room_id?"bg-primary/10 border-primary":""}`,onClick:()=>{o(I),j(!1)},children:a.jsx(me,{className:"p-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Xn,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium truncate",children:I.room_name||`Room ${I.room_id.slice(0,8)}`}),a.jsx("p",{className:"text-xs text-muted-foreground",children:I.is_private?e("chats.private"):e("chats.publicRoom")})]})]})})},I.room_id))})})]})})]})}),a.jsx("div",{className:"flex-1 flex flex-col",children:s?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 pb-4 border-b",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold",children:s.room_name||`Room ${s.room_id.slice(0,8)}`}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(nn,{className:"h-4 w-4"}),a.jsxs("span",{children:[c.length," ",e("chats.members")]}),s.is_private&&a.jsx("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:e("chats.private")})]})]}),a.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-all",onClick:()=>C(!k),children:a.jsx(W_,{className:"h-4 w-4"})})]}),a.jsx(yn,{className:"flex-1 mb-4",children:a.jsx("div",{className:"space-y-4 p-4",children:v===s.room_id&&i.map(I=>{var D,$,S,M;let U;return I.auth_user_id===(t==null?void 0:t.id)?U={auth_user_id:t.id,user_name:((D=t.profile)==null?void 0:D.user_name)||t.email||e("chats.you"),avatar:($=t.profile)==null?void 0:$.avatar,user_id:((S=t.profile)==null?void 0:S.user_id)||0,user_email:t.email}:U=c.find(Y=>Y.auth_user_id===I.auth_user_id),U||(U={auth_user_id:I.auth_user_id,user_name:e("chats.unknownUser"),avatar:"",user_id:0}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs(Ma,{className:"h-8 w-8",children:[a.jsx(Rl,{src:U.avatar||""}),a.jsx($a,{children:((M=U.user_name)==null?void 0:M.charAt(0))||"?"})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"font-medium text-sm",children:U.user_name}),a.jsx("span",{className:"text-xs text-muted-foreground",children:H(I.created_at)})]}),a.jsx("p",{className:"text-sm",children:I.content})]})]},I.message_id)})})}),a.jsxs("div",{className:"flex gap-2 p-4 border-t",children:[a.jsx(Ne,{value:d,onChange:I=>h(I.target.value),placeholder:e("chats.typeMessage"),onKeyPress:I=>I.key==="Enter"&&O(),className:"flex-1"}),a.jsx(K,{onClick:O,disabled:!d.trim(),children:a.jsx(Op,{className:"h-4 w-4"})})]})]}):a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-muted-foreground",children:[a.jsx(Xn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:e("chats.selectRoom")})]})})})]})}var bd="Tabs",[zF,gU]=ar(bd,[vd]),BN=vd(),[VF,mg]=zF(bd),zN=f.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=Sl(l),[h,m]=oo({prop:n,onChange:s,defaultProp:o??"",caller:bd});return a.jsx(VF,{scope:r,baseId:en(),value:h,onValueChange:m,orientation:i,dir:d,activationMode:c,children:a.jsx(ie.div,{dir:d,"data-orientation":i,...u,ref:e})})});zN.displayName=bd;var VN="TabsList",WN=f.forwardRef((t,e)=>{const{__scopeTabs:r,loop:n=!0,...s}=t,o=mg(VN,r),i=BN(r);return a.jsx(H1,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:n,children:a.jsx(ie.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:e})})});WN.displayName=VN;var HN="TabsTrigger",qN=f.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...o}=t,i=mg(HN,r),l=BN(r),c=QN(i.baseId,n),u=YN(i.baseId,n),d=n===i.value;return a.jsx(q1,{asChild:!0,...l,focusable:!s,active:d,children:a.jsx(ie.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...o,ref:e,onMouseDown:X(t.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?i.onValueChange(n):h.preventDefault()}),onKeyDown:X(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&i.onValueChange(n)}),onFocus:X(t.onFocus,()=>{const h=i.activationMode!=="manual";!d&&!s&&h&&i.onValueChange(n)})})})});qN.displayName=HN;var KN="TabsContent",GN=f.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,forceMount:s,children:o,...i}=t,l=mg(KN,r),c=QN(l.baseId,n),u=YN(l.baseId,n),d=n===l.value,h=f.useRef(d);return f.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),a.jsx(ir,{present:s||d,children:({present:m})=>a.jsx(ie.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...i,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:m&&o})})});GN.displayName=KN;function QN(t,e){return`${t}-trigger-${e}`}function YN(t,e){return`${t}-content-${e}`}var WF=zN,JN=WN,XN=qN,ZN=GN;const ek=WF,pg=f.forwardRef(({className:t,...e},r)=>a.jsx(JN,{ref:r,className:z("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));pg.displayName=JN.displayName;const Gs=f.forwardRef(({className:t,...e},r)=>a.jsx(XN,{ref:r,className:z("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...e}));Gs.displayName=XN.displayName;const Qs=f.forwardRef(({className:t,...e},r)=>a.jsx(ZN,{ref:r,className:z("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Qs.displayName=ZN.displayName;function HF(){const[t,e]=f.useState(null),[r,n]=f.useState([]),[s,o]=f.useState([]),[i,l]=f.useState([]),[c,u]=f.useState(!0),{user:d,signOut:h}=ht();f.useEffect(()=>{(async()=>{if(d!=null&&d.id)try{u(!0);const y=await mn.getByUserAuthId(d.id);n(y)}catch(y){console.error("Failed to fetch user projects:",y)}finally{u(!1)}})()},[d==null?void 0:d.id]),f.useEffect(()=>{(async()=>{if(t)try{const[y,g]=await Promise.all([Ks.getAll(),im.getByTask(0)]),x=y.filter(b=>!0);o(x),l(g)}catch(y){console.error("Failed to fetch project data:",y)}})()},[t]);const m=t?r.find(p=>p.project_id===t):null;return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx("header",{className:"border-b bg-card",children:a.jsxs("div",{className:"container mx-auto px-6 py-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsx("h1",{className:"text-xl font-bold",children:"Client Portal"})]}),a.jsxs(K,{variant:"ghost",size:"sm",children:[a.jsx(pI,{className:"h-4 w-4 mr-2"}),"Logout"]})]})}),a.jsxs("div",{className:"container mx-auto px-6 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold",children:["Hello, ",J((d==null?void 0:d.profile)||{},"user_name"),"! "]}),a.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:"Here's your project progress"})]}),m?a.jsxs("div",{children:[a.jsx(K,{variant:"ghost",className:"mb-4",onClick:()=>e(null),children:" Back to Projects"}),a.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs(ue,{children:[a.jsx(Re,{children:a.jsx($e,{children:m.project_name})}),a.jsxs(me,{children:[a.jsx("p",{className:"text-muted-foreground",children:m.project_description||"No description available"}),a.jsxs("div",{className:"mt-4",children:[a.jsx(fs,{value:m.progress||0,className:"h-3"}),a.jsxs("div",{className:"text-right mt-2 text-sm font-semibold",children:[m.progress||0,"% Complete"]})]})]})]}),a.jsxs(ek,{defaultValue:"tasks",children:[a.jsxs(pg,{children:[a.jsx(Gs,{value:"tasks",children:"Tasks"}),a.jsx(Gs,{value:"images",children:"Gallery"}),a.jsx(Gs,{value:"comments",children:"Comments"})]}),a.jsx(Qs,{value:"tasks",className:"space-y-3",children:s.filter(p=>p.stage_id!==null).map(p=>{var y;return a.jsx(ue,{children:a.jsx(me,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:p.task_name}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:p.description||"No description"})]}),a.jsxs(He,{variant:p.task_status==="completed"?"default":"secondary",children:[p.task_status==="completed"?"":""," ",((y=p.task_status)==null?void 0:y.replace("_"," "))||"pending"]})]})})},p.task_id)})}),a.jsx(Qs,{value:"images",children:a.jsx(ue,{children:a.jsx(me,{className:"pt-6",children:a.jsx("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(p=>a.jsx("div",{className:"aspect-square bg-muted rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-4xl",children:""})},p))})})})}),a.jsx(Qs,{value:"comments",children:a.jsx(ue,{children:a.jsxs(me,{className:"pt-6 space-y-4",children:[i.map(p=>a.jsxs("div",{className:"flex gap-3 pb-4 border-b last:border-0",children:[a.jsx("div",{className:"text-2xl",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-semibold text-sm",children:"Team Member"}),a.jsx("p",{className:"text-sm mt-1",children:p.message||"No message"}),a.jsx("span",{className:"text-xs text-muted-foreground mt-2 block",children:p.created_date?new Date(p.created_date).toLocaleString():"Unknown date"})]})]},p.comment_id)),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsx(Ne,{placeholder:"Add a comment..."}),a.jsx(K,{children:a.jsx(Tp,{className:"h-4 w-4"})})]})]})})})]})]}),a.jsx("div",{children:a.jsxs(ue,{children:[a.jsx(Re,{children:a.jsx($e,{className:"text-lg",children:"Timeline"})}),a.jsxs(me,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Created Date"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:m.created_date?new Date(m.created_date).toLocaleDateString():"N/A"})]}),m.end_date&&a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"End Date"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(m.end_date).toLocaleDateString()})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:"Milestones"}),a.jsxs("div",{className:"space-y-2 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-green-500",children:""}),a.jsx("span",{children:"Project Kickoff"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-green-500",children:""}),a.jsx("span",{children:"Design Phase"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-blue-500",children:""}),a.jsx("span",{children:"Development Phase"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-muted-foreground",children:""}),a.jsx("span",{children:"Testing & Launch"})]})]})]})]})]})})]})]}):c?a.jsxs("div",{className:"flex justify-center items-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"}),a.jsx("span",{className:"sr-only",children:"Loading projects..."})]}):r.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Projects Found"}),a.jsx("p",{className:"text-muted-foreground",children:"You don't have any projects assigned yet."})]}):a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(p=>a.jsxs(ue,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e(p.project_id),children:[a.jsxs(Re,{children:[a.jsx($e,{className:"text-lg",children:p.project_name}),a.jsxs(He,{className:"w-fit mt-2",variant:"secondary",children:["Stage ",p.stage||"N/A"]})]}),a.jsx(me,{children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[a.jsx("span",{className:"text-muted-foreground",children:"Progress"}),a.jsxs("span",{className:"font-semibold",children:[p.progress||0,"%"]})]}),a.jsx(fs,{value:p.progress||0,className:"h-2"})]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Created: ",p.created_date?new Date(p.created_date).toLocaleDateString():"N/A"]}),a.jsx(K,{className:"w-full",variant:"outline",children:"View Details "})]})})]},p.project_id))})]})]})}function qF(){const{id:t}=l2(),e=Ur(),{user:r}=ht(),[n,s]=f.useState([]),[o,i]=f.useState(""),[l,c]=f.useState(!0),[u,d]=f.useState(null),[h,m]=f.useState(null),[p,y]=f.useState(null),[g,x]=f.useState(null),[b,v]=f.useState([]),[w,_]=f.useState([]);f.useEffect(()=>{(async()=>{if(!(!t||!r)){if(r.role==="admin"||r.role==="manager"){d(!0);return}if(r.role==="employee")try{const E=parseInt(t),T=(await fy.getProjectUsers(E)).some(W=>W.auth_user_id===r.id);d(T)}catch(E){console.error("Failed to check project access:",E),d(!1)}else d(!0)}})()},[t,r]),f.useEffect(()=>{t&&u&&j()},[t,u]);const j=async()=>{if(t)try{c(!0);const N=parseInt(t),E=await mn.getById(N);if(m(E),E){if(E.created_by)try{const L=await gr.getByAuthId(E.created_by);y(L)}catch(L){console.error("Failed to fetch client:",L)}if(E.created_by)try{const L=await gr.getByAuthId(E.created_by);x(L)}catch(L){console.error("Failed to fetch manager:",L)}try{const T=(await fy.getProjectUsers(N)).map(O=>O.auth_user_id),W=await Promise.all(T.map(O=>gr.getByAuthId(O).catch(()=>null)));v(W.filter(O=>O!==null))}catch(L){console.error("Failed to fetch project users:",L)}try{const W=(await Jr.getAll()).filter(I=>I.project_id===N).map(I=>I.stage_id),H=(await Promise.all(W.map(I=>Ks.getByStage(I)))).flat();_(H)}catch(L){console.error("Failed to fetch tasks:",L)}}}catch(N){console.error("Failed to load project data:",N)}finally{c(!1)}};f.useEffect(()=>{t&&h&&w.length>0&&k()},[t,h,w]);const k=async()=>{if(!(!t||!h||w.length===0))try{const N=[];for(const E of w){const L=await im.getByTask(E.task_id);N.push(...L)}s(N)}catch(N){console.error("Failed to load comments:",N)}},C=async N=>{if(!(!o.trim()||!r))try{const E=await im.create({task_id:N,auth_user_id:r.id,message:o.trim()});s(L=>[...L,E]),i("")}catch(E){console.error("Failed to add comment:",E)}};if(u===!1)return a.jsx(jt,{children:a.jsx("div",{className:"flex items-center justify-center h-full py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"You don't have permission to view this project."}),a.jsx(K,{onClick:()=>e("/projects"),children:"Back to Projects"})]})})});if(u===null||!h||!p||!g)return a.jsx(jt,{children:a.jsx("div",{children:"Project not found"})});const P={todo:"bg-slate-200 text-slate-700",in_progress:"bg-blue-200 text-blue-700",done:"bg-green-200 text-green-700"};return a.jsx(jt,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(K,{variant:"ghost",size:"icon",onClick:()=>e("/projects"),children:a.jsx(tI,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:J(h,"project_name")}),a.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:J(p,"company_name")})]})]}),a.jsx(K,{variant:"outline",className:"self-start sm:self-auto",children:"Settings"})]}),a.jsx(ue,{children:a.jsxs(me,{className:"pt-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"Overall Progress"}),a.jsxs("span",{className:"text-sm font-bold",children:[h.progress||0,"%"]})]}),a.jsx(fs,{value:h.progress||0,className:"h-3"})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[a.jsx("div",{className:"lg:col-span-2 space-y-4 lg:space-y-6",children:a.jsxs(ek,{defaultValue:"tasks",children:[a.jsxs(pg,{className:"w-full sm:w-auto",children:[a.jsx(Gs,{value:"tasks",className:"flex-1 sm:flex-none",children:"Tasks"}),a.jsx(Gs,{value:"images",className:"flex-1 sm:flex-none",children:"Images"}),a.jsx(Gs,{value:"comments",className:"flex-1 sm:flex-none",children:"Comments"})]}),a.jsxs(Qs,{value:"tasks",className:"space-y-3",children:[w.map(N=>{var L;const E=b.find(T=>T.user_id===N.assigned_to);return a.jsx(ue,{children:a.jsx(me,{className:"pt-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold",children:J(N,"task_name")}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:J(N,"description")}),a.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[a.jsx(He,{className:z("text-xs",P[N.task_status]),children:((L=N.task_status)==null?void 0:L.replace("_"," "))||"todo"}),N.due_date&&a.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[a.jsx(Oa,{className:"h-3 w-3"}),"Due: ",new Date(N.due_date).toLocaleDateString()]})]})]}),E&&a.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[a.jsx("div",{className:"text-2xl mb-1",children:E.avatar||""}),J(E,"user_name")]})]})})},N.task_id)}),a.jsx(K,{variant:"outline",className:"w-full",children:"+ Add New Task"})]}),a.jsx(Qs,{value:"images",children:a.jsx(ue,{children:a.jsxs(me,{className:"pt-6",children:[a.jsx("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(N=>a.jsx("div",{className:"aspect-square bg-muted rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-4xl",children:""})},N))}),a.jsxs(K,{variant:"outline",className:"w-full mt-4",children:[a.jsx(jI,{className:"h-4 w-4 mr-2"}),"Upload Images"]})]})})}),a.jsxs(Qs,{value:"comments",className:"space-y-3",children:[n.map(N=>{const E=[...b,p,g].find(L=>L&&L.auth_user_id===N.auth_user_id);return a.jsx(ue,{children:a.jsx(me,{className:"pt-6",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"text-2xl",children:(E==null?void 0:E.avatar)||""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-semibold text-sm",children:E?J(E,"user_name"):"Unknown"}),a.jsx("p",{className:"text-sm mt-1",children:N.message}),a.jsx("span",{className:"text-xs text-muted-foreground mt-2 block",children:new Date(N.created_date||"").toLocaleString()})]})]})})},N.comment_id)}),w.length>0&&a.jsx(ue,{children:a.jsx(me,{className:"pt-6",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ne,{placeholder:"Add a comment...",value:o,onChange:N=>i(N.target.value),onKeyDown:N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),C(w[0].task_id))}}),a.jsx(K,{size:"icon",onClick:()=>C(w[0].task_id),children:a.jsx(Op,{className:"h-4 w-4"})})]})})})]})]})}),a.jsxs("div",{className:"space-y-4 lg:order-last",children:[a.jsxs(ue,{children:[a.jsx(Re,{children:a.jsx($e,{className:"text-base sm:text-lg",children:"Project Summary"})}),a.jsxs(me,{className:"space-y-3 sm:space-y-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-1",children:"Client"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xl",children:p.avatar}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold",children:J(p,"user_name")}),a.jsx("div",{className:"text-xs text-muted-foreground",children:J(p,"company_name")})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-1",children:"Project Manager"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xl",children:g.avatar}),a.jsx("div",{className:"text-sm",children:J(g,"user_name")})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:"Team"}),a.jsx("div",{className:"space-y-2",children:b.map(N=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xl",children:N.avatar||""}),a.jsx("div",{className:"text-sm",children:J(N,"user_name")})]},N.user_id))})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-1",children:"Timeline"}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Start: ",h.created_date?new Date(h.created_date).toLocaleDateString():"Not set",h.end_date&&a.jsxs("div",{children:["End: ",new Date(h.end_date).toLocaleDateString()]})]})]})]})]}),a.jsxs(ue,{children:[a.jsx(Re,{children:a.jsx($e,{className:"text-base sm:text-lg",children:"Recent Activity"})}),a.jsx(me,{children:a.jsxs("div",{className:"space-y-3 text-xs",children:[a.jsxs("div",{className:"pb-2 border-b",children:[a.jsx("div",{className:"font-medium",children:"Task completed"}),a.jsx("div",{className:"text-muted-foreground",children:"2 hours ago"})]}),a.jsxs("div",{className:"pb-2 border-b",children:[a.jsx("div",{className:"font-medium",children:"New comment added"}),a.jsx("div",{className:"text-muted-foreground",children:"5 hours ago"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Images uploaded"}),a.jsx("div",{className:"text-muted-foreground",children:"1 day ago"})]})]})})]})]})]})]})})}const KF=()=>{const t=Ur(),{t:e}=it(),r=[{icon:a.jsx(qu,{className:"h-6 w-6"}),title:e("landing.features.projectManagement.title"),description:e("landing.features.projectManagement.description")},{icon:a.jsx(nn,{className:"h-6 w-6"}),title:e("landing.features.leadManagement.title"),description:e("landing.features.leadManagement.description")},{icon:a.jsx(oI,{className:"h-6 w-6"}),title:e("landing.features.analytics.title"),description:e("landing.features.analytics.description")},{icon:a.jsx(Tp,{className:"h-6 w-6"}),title:e("landing.features.communication.title"),description:e("landing.features.communication.description")},{icon:a.jsx(K_,{className:"h-6 w-6"}),title:e("landing.features.taskManagement.title"),description:e("landing.features.taskManagement.description")},{icon:a.jsx(q_,{className:"h-6 w-6"}),title:e("landing.features.security.title"),description:e("landing.features.security.description")}];return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:[a.jsx("header",{className:"relative z-10 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between py-4 sm:py-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-8 w-8 rounded-lg bg-primary flex items-center justify-center",children:a.jsx("span",{className:"text-primary-foreground font-bold text-lg",children:"M"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:e("landing.brandName")})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(gS,{}),a.jsx(K,{onClick:()=>t("/login"),className:"shadow-lg hover:shadow-xl transition-all duration-200",children:e("buttons.login")})]})]})}),a.jsxs("section",{className:"relative px-4 sm:px-6 lg:px-8 pb-12 sm:pb-16 lg:pb-20",children:[a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center",children:[a.jsxs(He,{variant:"secondary",className:"mb-4 px-3 py-1 text-sm font-medium",children:[a.jsx(wI,{className:"h-3 w-3 mr-1"}),e("landing.badge")]}),a.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 mb-6 leading-tight",children:[e("landing.hero.title.line1"),a.jsx("span",{className:"text-primary block",children:e("landing.hero.title.line2")})]}),a.jsx("p",{className:"text-lg sm:text-xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed",children:e("landing.hero.description")}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center mb-12",children:[a.jsxs(K,{size:"lg",onClick:()=>t("/login"),className:"px-8 py-3 text-lg shadow-lg hover:shadow-xl transition-all duration-200 group",children:[e("landing.hero.cta.primary"),a.jsx(rI,{className:"ml-2 h-5 w-5 group-hover:translate-x-1 transition-transform"})]}),a.jsx(K,{variant:"outline",size:"lg",className:"px-8 py-3 text-lg",children:e("landing.hero.cta.secondary")})]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-6 max-w-2xl mx-auto",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-primary",children:e("landing.stats.users")}),a.jsx("div",{className:"text-sm text-gray-600",children:e("landing.stats.usersLabel")})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-primary",children:e("landing.stats.projects")}),a.jsx("div",{className:"text-sm text-gray-600",children:e("landing.stats.projectsLabel")})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-primary",children:e("landing.stats.uptime")}),a.jsx("div",{className:"text-sm text-gray-600",children:e("landing.stats.uptimeLabel")})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-primary",children:e("landing.stats.support")}),a.jsx("div",{className:"text-sm text-gray-600",children:e("landing.stats.supportLabel")})]})]})]})}),a.jsxs("div",{className:"absolute inset-0 -z-10 overflow-hidden",children:[a.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-primary/10 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-400/10 rounded-full blur-3xl"})]})]}),a.jsx("section",{className:"px-4 sm:px-6 lg:px-8 py-12 sm:py-16 lg:py-20 bg-white/50 backdrop-blur-sm",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:e("landing.features.title")}),a.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:e("landing.features.subtitle")})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8",children:r.map((n,s)=>a.jsx(ue,{className:"group hover:shadow-lg transition-all duration-200 border-0 shadow-md bg-white/80 backdrop-blur-sm",children:a.jsxs(me,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"p-2 rounded-lg bg-primary/10 text-primary group-hover:bg-primary group-hover:text-primary-foreground transition-colors",children:n.icon}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n.title})]}),a.jsx("p",{className:"text-gray-600 leading-relaxed",children:n.description})]})},s))})]})}),a.jsx("section",{className:"px-4 sm:px-6 lg:px-8 py-12 sm:py-16 lg:py-20",children:a.jsx("div",{className:"max-w-4xl mx-auto text-center",children:a.jsx(ue,{className:"bg-gradient-to-r from-primary to-blue-600 text-white border-0 shadow-2xl",children:a.jsxs(me,{className:"p-8 sm:p-12",children:[a.jsx(EI,{className:"h-12 w-12 mx-auto mb-6 text-primary-foreground/80"}),a.jsx("h3",{className:"text-2xl sm:text-3xl font-bold mb-4",children:e("landing.cta.title")}),a.jsx("p",{className:"text-lg mb-8 text-primary-foreground/90 max-w-2xl mx-auto",children:e("landing.cta.description")}),a.jsxs(K,{size:"lg",variant:"secondary",onClick:()=>t("/login"),className:"px-8 py-3 text-lg shadow-lg hover:shadow-xl transition-all duration-200 group",children:[e("landing.cta.button"),a.jsx(fu,{className:"ml-2 h-5 w-5 group-hover:scale-110 transition-transform"})]})]})})})}),a.jsx("footer",{className:"px-4 sm:px-6 lg:px-8 py-8 border-t border-gray-200 bg-white/50 backdrop-blur-sm",children:a.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[a.jsx("div",{className:"h-6 w-6 rounded bg-primary flex items-center justify-center",children:a.jsx("span",{className:"text-primary-foreground font-bold text-sm",children:"M"})}),a.jsxs("span",{className:"font-semibold text-gray-900",children:[e("landing.brandName")," CRM"]})]}),a.jsx("p",{className:"text-sm text-gray-600",children:e("landing.footer.copyright",{brand:e("landing.brandName")})})]})})]})},GF=()=>{const[t,e]=f.useState("loading"),[r,n]=f.useState("Processing authentication..."),s=Ur(),{user:o}=ht();return f.useEffect(()=>{let i;return(async()=>{try{if(console.log("[AuthCallback] Handling OAuth callback"),o){console.log("[AuthCallback] User already authenticated by auth context:",o.role),e("success"),n("Authentication successful! Redirecting..."),setTimeout(()=>{o.role==="client"?s("/client-portal"):o.role==="employee"||o.role==="team_leader"?window.location.href="/#/employee_dashboard":window.location.href="/#/dashboard"},1500);return}console.log("[AuthCallback] Waiting for OAuth session to establish...");let c=0;const u=20,d=async()=>{c++,console.log(`[AuthCallback] Checking session and profile (attempt ${c}/${u})`);try{const{data:{user:h},error:m}=await Q.auth.getUser();if(m&&console.error("[AuthCallback] User error:",m),h){console.log("[AuthCallback] Found authenticated user:",h.id);const{data:g}=await Q.from("users").select("user_id").eq("auth_user_id",h.id).maybeSingle();if(g){console.log("[AuthCallback] User profile exists, fetching user data...");const x=await cr.getCurrentUser(h.id);if(x){localStorage.removeItem("oauth_intended_role"),e("success"),n("Authentication successful! Redirecting..."),setTimeout(()=>{x.role==="client"?s("/client-portal"):x.role==="employee"||x.role==="team_leader"?window.location.href="/#/employee_dashboard":window.location.href="/#/dashboard"},1500);return}}else console.log("[AuthCallback] Profile not yet created by trigger, waiting...")}const{data:{session:p},error:y}=await Q.auth.getSession();if(y&&console.error("[AuthCallback] Session error:",y),p!=null&&p.user){console.log("[AuthCallback] Found session user:",p.user.id);const{data:g}=await Q.from("users").select("user_id").eq("auth_user_id",p.user.id).maybeSingle();if(g){console.log("[AuthCallback] User profile exists, fetching user data...");const x=await cr.getCurrentUser(p.user.id);if(x){localStorage.removeItem("oauth_intended_role"),e("success"),n("Authentication successful! Redirecting..."),setTimeout(()=>{x.role==="client"?s("/client-portal"):x.role==="employee"||x.role==="team_leader"?window.location.href="/#/employee_dashboard":window.location.href="/#/dashboard"},1500);return}}else console.log("[AuthCallback] Profile not yet created by trigger, waiting...")}c<u?(console.log("[AuthCallback] No session or profile found, waiting and retrying..."),i=setTimeout(d,1e3)):(console.error("[AuthCallback] No session or profile found after maximum attempts"),e("error"),n("Authentication session not established. Please try signing in again."),setTimeout(()=>s("/login"),3e3))}catch(h){console.error("[AuthCallback] Error checking session and profile:",h),c<u?i=setTimeout(d,1e3):(e("error"),n("Authentication failed. Please try again."),setTimeout(()=>s("/login"),3e3))}};d()}catch(c){console.error("[AuthCallback] Error handling callback:",c),e("error"),n("Authentication failed. Please try again."),setTimeout(()=>s("/login"),3e3)}})(),()=>{i&&clearTimeout(i)}},[o,s]),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:a.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md text-center max-w-md",children:[t==="loading"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Completing Sign In"}),a.jsx("p",{className:"text-gray-600",children:r})]}),t==="success"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("h2",{className:"text-xl font-semibold mb-2 text-green-600",children:"Success!"}),a.jsx("p",{className:"text-gray-600",children:r})]}),t==="error"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsx("h2",{className:"text-xl font-semibold mb-2 text-red-600",children:"Authentication Failed"}),a.jsx("p",{className:"text-gray-600",children:r})]})]})})};function QF(){return a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold tracking-tight",children:"Partner Dashboard"}),a.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:"Welcome to your partner portal"})]})}),a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"w-24 h-24 bg-primary/10 rounded-full flex items-center justify-center mx-auto",children:a.jsx("svg",{className:"w-12 h-12 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),a.jsx("h2",{className:"text-2xl font-semibold",children:"Coming Soon"}),a.jsx("p",{className:"text-muted-foreground max-w-md",children:"We're working hard to bring you an amazing partner experience. Check back soon for updates and new features."})]})})]})}function YF(){return a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Partner Employee Dashboard"}),a.jsx("p",{className:"text-muted-foreground mt-2 text-base",children:"Welcome to your partner employee portal"})]})}),a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"w-24 h-24 bg-primary/10 rounded-full flex items-center justify-center mx-auto",children:a.jsx("svg",{className:"w-12 h-12 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),a.jsx("h2",{className:"text-2xl font-semibold",children:"Coming Soon"}),a.jsx("p",{className:"text-muted-foreground max-w-md",children:"We're working hard to bring you an amazing partner employee experience. Check back soon for updates and new features."})]})})]})}const JF=()=>a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Unauthorized Access"}),a.jsx("p",{className:"mb-4",children:"You don't have permission to view this page."}),a.jsx("button",{onClick:()=>window.history.back(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Go Back"})]})});console.log(" SUPABASE URL (runtime):","https://qaqrnyyhctqqvnpiqnjm.supabase.co");const XF=()=>{const{user:t}=ht();return(t==null?void 0:t.role)==="client"?a.jsx(BF,{}):a.jsx(UF,{})},wy=({children:t})=>a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:t});function ZF(){return a.jsx(iA,{children:a.jsx(oA,{children:a.jsx(eU,{})})})}function eU(){const{isRTL:t}=_l();return f.useEffect(()=>{document.documentElement.dir=t?"rtl":"ltr"},[t]),a.jsx(T2,{children:a.jsxs(j2,{children:[a.jsx(tt,{path:"/login",element:a.jsx(wy,{children:a.jsx(PI,{})})}),a.jsx(tt,{path:"/signup",element:a.jsx(wy,{children:a.jsx(TI,{})})}),a.jsx(tt,{path:"/unauthorized",element:a.jsx(JF,{})}),a.jsx(tt,{path:"/auth/callback",element:a.jsx(GF,{})}),a.jsx(tt,{path:"/",element:a.jsx(KF,{})}),a.jsx(tt,{path:"/dashboard",element:a.jsx(Ft,{allowedRoles:["admin","manager"],children:a.jsx(jt,{children:a.jsx(l4,{})})})}),a.jsx(tt,{path:"/employee_dashboard",element:a.jsx(Ft,{allowedRoles:["employee","team_leader"],children:a.jsx(jt,{children:a.jsx(m4,{})})})}),a.jsx(tt,{path:"/leads",element:a.jsx(Ft,{allowedRoles:["admin","manager","employee","team_leader"],children:a.jsx(jt,{children:a.jsx(O4,{})})})}),a.jsx(tt,{path:"/projects",element:a.jsx(Ft,{allowedRoles:["admin","manager","employee","team_leader"],children:a.jsx(jt,{children:a.jsx(M4,{})})})}),a.jsx(tt,{path:"/tasks",element:a.jsx(Ft,{allowedRoles:["admin","manager","employee","team_leader"],children:a.jsx(jt,{children:a.jsx(I4,{})})})}),a.jsx(tt,{path:"/tickets",element:a.jsx(Ft,{allowedRoles:["admin","manager","employee","team_leader","client"],children:a.jsx(jt,{children:a.jsx(D4,{})})})}),a.jsx(tt,{path:"/clients",element:a.jsx(Ft,{allowedRoles:["admin","manager"],children:a.jsx(jt,{children:a.jsx(B4,{})})})}),a.jsx(tt,{path:"/users",element:a.jsx(Ft,{allowedRoles:["admin","manager"],children:a.jsx(jt,{children:a.jsx(a$,{})})})}),a.jsx(tt,{path:"/teams",element:a.jsx(Ft,{allowedRoles:["admin","manager","employee","team_leader"],children:a.jsx(jt,{children:a.jsx(i$,{})})})}),a.jsx(tt,{path:"/chats",element:a.jsx(Ft,{allowedRoles:["admin","manager","employee","team_leader","client"],children:a.jsx(jt,{children:a.jsx(XF,{})})})}),a.jsx(tt,{path:"/client-portal",element:a.jsx(Ft,{allowedRoles:["client"],children:a.jsx(jt,{children:a.jsx(HF,{})})})}),a.jsx(tt,{path:"/partner-dashboard",element:a.jsx(Ft,{allowedRoles:["partner"],children:a.jsx(jt,{children:a.jsx(QF,{})})})}),a.jsx(tt,{path:"/partner-employee-dashboard",element:a.jsx(Ft,{allowedRoles:["partner_employee"],children:a.jsx(jt,{children:a.jsx(YF,{})})})}),a.jsx(tt,{path:"/project/:id",element:a.jsx(Ft,{allowedRoles:["admin","manager"],children:a.jsx(qF,{})})}),a.jsx(tt,{path:"*",element:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("h1",{children:"404 - Page Not Found"})})})]})})}const tU=new HE({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:10*60*1e3}}});H0(document.getElementById("root")).render(a.jsx(ZP,{i18n:qe,children:a.jsx(YE,{client:tU,children:a.jsx(ZF,{})})}));
