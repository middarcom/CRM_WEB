var vx=t=>{throw TypeError(t)};var Wh=(t,e,r)=>e.has(t)||vx("Cannot "+r);var D=(t,e,r)=>(Wh(t,e,"read from private field"),r?r.call(t):e.get(t)),Ce=(t,e,r)=>e.has(t)?vx("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),me=(t,e,r,n)=>(Wh(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Ue=(t,e,r)=>(Wh(t,e,"access private method"),r);var Vc=(t,e,r,n)=>({set _(s){me(t,e,s,r)},get _(){return D(t,e,n)}});function $0(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();function U0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function B0(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var z0={exports:{}},zd={},W0={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dc=Symbol.for("react.element"),UE=Symbol.for("react.portal"),BE=Symbol.for("react.fragment"),zE=Symbol.for("react.strict_mode"),WE=Symbol.for("react.profiler"),VE=Symbol.for("react.provider"),HE=Symbol.for("react.context"),qE=Symbol.for("react.forward_ref"),KE=Symbol.for("react.suspense"),GE=Symbol.for("react.memo"),YE=Symbol.for("react.lazy"),xx=Symbol.iterator;function QE(t){return t===null||typeof t!="object"?null:(t=xx&&t[xx]||t["@@iterator"],typeof t=="function"?t:null)}var V0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H0=Object.assign,q0={};function Ai(t,e,r){this.props=t,this.context=e,this.refs=q0,this.updater=r||V0}Ai.prototype.isReactComponent={};Ai.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ai.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function K0(){}K0.prototype=Ai.prototype;function Vp(t,e,r){this.props=t,this.context=e,this.refs=q0,this.updater=r||V0}var Hp=Vp.prototype=new K0;Hp.constructor=Vp;H0(Hp,Ai.prototype);Hp.isPureReactComponent=!0;var yx=Array.isArray,G0=Object.prototype.hasOwnProperty,qp={current:null},Y0={key:!0,ref:!0,__self:!0,__source:!0};function Q0(t,e,r){var n,s={},o=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(o=""+e.key),e)G0.call(e,n)&&!Y0.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:dc,type:t,key:o,ref:i,props:s,_owner:qp.current}}function JE(t,e){return{$$typeof:dc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Kp(t){return typeof t=="object"&&t!==null&&t.$$typeof===dc}function XE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var wx=/\/+/g;function Vh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?XE(""+t.key):e.toString(36)}function Nu(t,e,r,n,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case dc:case UE:i=!0}}if(i)return i=t,s=s(i),t=n===""?"."+Vh(i,0):n,yx(s)?(r="",t!=null&&(r=t.replace(wx,"$&/")+"/"),Nu(s,e,r,"",function(u){return u})):s!=null&&(Kp(s)&&(s=JE(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(wx,"$&/")+"/")+t)),e.push(s)),1;if(i=0,n=n===""?".":n+":",yx(t))for(var l=0;l<t.length;l++){o=t[l];var c=n+Vh(o,l);i+=Nu(o,e,r,c,s)}else if(c=QE(t),typeof c=="function")for(t=c.call(t),l=0;!(o=t.next()).done;)o=o.value,c=n+Vh(o,l++),i+=Nu(o,e,r,c,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Hc(t,e,r){if(t==null)return t;var n=[],s=0;return Nu(t,n,"","",function(o){return e.call(r,o,s++)}),n}function ZE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ir={current:null},ku={transition:null},eP={ReactCurrentDispatcher:ir,ReactCurrentBatchConfig:ku,ReactCurrentOwner:qp};function J0(){throw Error("act(...) is not supported in production builds of React.")}$e.Children={map:Hc,forEach:function(t,e,r){Hc(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Hc(t,function(){e++}),e},toArray:function(t){return Hc(t,function(e){return e})||[]},only:function(t){if(!Kp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$e.Component=Ai;$e.Fragment=BE;$e.Profiler=WE;$e.PureComponent=Vp;$e.StrictMode=zE;$e.Suspense=KE;$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eP;$e.act=J0;$e.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=H0({},t.props),s=t.key,o=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,i=qp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)G0.call(e,c)&&!Y0.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:dc,type:t.type,key:s,ref:o,props:n,_owner:i}};$e.createContext=function(t){return t={$$typeof:HE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:VE,_context:t},t.Consumer=t};$e.createElement=Q0;$e.createFactory=function(t){var e=Q0.bind(null,t);return e.type=t,e};$e.createRef=function(){return{current:null}};$e.forwardRef=function(t){return{$$typeof:qE,render:t}};$e.isValidElement=Kp;$e.lazy=function(t){return{$$typeof:YE,_payload:{_status:-1,_result:t},_init:ZE}};$e.memo=function(t,e){return{$$typeof:GE,type:t,compare:e===void 0?null:e}};$e.startTransition=function(t){var e=ku.transition;ku.transition={};try{t()}finally{ku.transition=e}};$e.unstable_act=J0;$e.useCallback=function(t,e){return ir.current.useCallback(t,e)};$e.useContext=function(t){return ir.current.useContext(t)};$e.useDebugValue=function(){};$e.useDeferredValue=function(t){return ir.current.useDeferredValue(t)};$e.useEffect=function(t,e){return ir.current.useEffect(t,e)};$e.useId=function(){return ir.current.useId()};$e.useImperativeHandle=function(t,e,r){return ir.current.useImperativeHandle(t,e,r)};$e.useInsertionEffect=function(t,e){return ir.current.useInsertionEffect(t,e)};$e.useLayoutEffect=function(t,e){return ir.current.useLayoutEffect(t,e)};$e.useMemo=function(t,e){return ir.current.useMemo(t,e)};$e.useReducer=function(t,e,r){return ir.current.useReducer(t,e,r)};$e.useRef=function(t){return ir.current.useRef(t)};$e.useState=function(t){return ir.current.useState(t)};$e.useSyncExternalStore=function(t,e,r){return ir.current.useSyncExternalStore(t,e,r)};$e.useTransition=function(){return ir.current.useTransition()};$e.version="18.3.1";W0.exports=$e;var f=W0.exports;const Ss=U0(f),Gp=$0({__proto__:null,default:Ss},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tP=f,rP=Symbol.for("react.element"),nP=Symbol.for("react.fragment"),sP=Object.prototype.hasOwnProperty,aP=tP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oP={key:!0,ref:!0,__self:!0,__source:!0};function X0(t,e,r){var n,s={},o=null,i=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)sP.call(e,n)&&!oP.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:rP,type:t,key:o,ref:i,props:s,_owner:aP.current}}zd.Fragment=nP;zd.jsx=X0;zd.jsxs=X0;z0.exports=zd;var a=z0.exports,Z0={exports:{}},Dr={},e_={exports:{}},t_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,F){var q=N.length;N.push(F);e:for(;0<q;){var A=q-1>>>1,Q=N[A];if(0<s(Q,F))N[A]=F,N[q]=Q,q=A;else break e}}function r(N){return N.length===0?null:N[0]}function n(N){if(N.length===0)return null;var F=N[0],q=N.pop();if(q!==F){N[0]=q;e:for(var A=0,Q=N.length,ye=Q>>>1;A<ye;){var xe=2*(A+1)-1,Ie=N[xe],be=xe+1,le=N[be];if(0>s(Ie,q))be<Q&&0>s(le,Ie)?(N[A]=le,N[be]=q,A=be):(N[A]=Ie,N[xe]=q,A=xe);else if(be<Q&&0>s(le,q))N[A]=le,N[be]=q,A=be;else break e}}return F}function s(N,F){var q=N.sortIndex-F.sortIndex;return q!==0?q:N.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,h=null,m=3,p=!1,v=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(N){for(var F=r(u);F!==null;){if(F.callback===null)n(u);else if(F.startTime<=N)n(u),F.sortIndex=F.expirationTime,e(c,F);else break;F=r(u)}}function b(N){if(g=!1,_(N),!v)if(r(c)!==null)v=!0,R(j);else{var F=r(u);F!==null&&I(b,F.startTime-N)}}function j(N,F){v=!1,g&&(g=!1,w(P),P=-1),p=!0;var q=m;try{for(_(F),h=r(c);h!==null&&(!(h.expirationTime>F)||N&&!L());){var A=h.callback;if(typeof A=="function"){h.callback=null,m=h.priorityLevel;var Q=A(h.expirationTime<=F);F=t.unstable_now(),typeof Q=="function"?h.callback=Q:h===r(c)&&n(c),_(F)}else n(c);h=r(c)}if(h!==null)var ye=!0;else{var xe=r(u);xe!==null&&I(b,xe.startTime-F),ye=!1}return ye}finally{h=null,m=q,p=!1}}var E=!1,k=null,P=-1,T=5,C=-1;function L(){return!(t.unstable_now()-C<T)}function O(){if(k!==null){var N=t.unstable_now();C=N;var F=!0;try{F=k(!0,N)}finally{F?J():(E=!1,k=null)}}else E=!1}var J;if(typeof x=="function")J=function(){x(O)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,U=W.port2;W.port1.onmessage=O,J=function(){U.postMessage(null)}}else J=function(){y(O,0)};function R(N){k=N,E||(E=!0,J())}function I(N,F){P=y(function(){N(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(j))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(N){switch(m){case 1:case 2:case 3:var F=3;break;default:F=m}var q=m;m=F;try{return N()}finally{m=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,F){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var q=m;m=N;try{return F()}finally{m=q}},t.unstable_scheduleCallback=function(N,F,q){var A=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?A+q:A):q=A,N){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=q+Q,N={id:d++,callback:F,priorityLevel:N,startTime:q,expirationTime:Q,sortIndex:-1},q>A?(N.sortIndex=q,e(u,N),r(c)===null&&N===r(u)&&(g?(w(P),P=-1):g=!0,I(b,q-A))):(N.sortIndex=Q,e(c,N),v||p||(v=!0,R(j))),N},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(N){var F=m;return function(){var q=m;m=F;try{return N.apply(this,arguments)}finally{m=q}}}})(t_);e_.exports=t_;var iP=e_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lP=f,Rr=iP;function te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r_=new Set,Tl={};function uo(t,e){xi(t,e),xi(t+"Capture",e)}function xi(t,e){for(Tl[t]=e,t=0;t<e.length;t++)r_.add(e[t])}var ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xf=Object.prototype.hasOwnProperty,cP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_x={},bx={};function uP(t){return Xf.call(bx,t)?!0:Xf.call(_x,t)?!1:cP.test(t)?bx[t]=!0:(_x[t]=!0,!1)}function dP(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function hP(t,e,r,n){if(e===null||typeof e>"u"||dP(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function lr(t,e,r,n,s,o,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=i}var Vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Vt[t]=new lr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Vt[e]=new lr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Vt[t]=new lr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Vt[t]=new lr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Vt[t]=new lr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Vt[t]=new lr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Vt[t]=new lr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Vt[t]=new lr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Vt[t]=new lr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yp=/[\-:]([a-z])/g;function Qp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yp,Qp);Vt[e]=new lr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yp,Qp);Vt[e]=new lr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yp,Qp);Vt[e]=new lr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Vt[t]=new lr(t,1,!1,t.toLowerCase(),null,!1,!1)});Vt.xlinkHref=new lr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Vt[t]=new lr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jp(t,e,r,n){var s=Vt.hasOwnProperty(e)?Vt[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(hP(e,r,s,n)&&(r=null),n||s===null?uP(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var is=lP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qc=Symbol.for("react.element"),Do=Symbol.for("react.portal"),Ao=Symbol.for("react.fragment"),Xp=Symbol.for("react.strict_mode"),Zf=Symbol.for("react.profiler"),n_=Symbol.for("react.provider"),s_=Symbol.for("react.context"),Zp=Symbol.for("react.forward_ref"),em=Symbol.for("react.suspense"),tm=Symbol.for("react.suspense_list"),eg=Symbol.for("react.memo"),Cs=Symbol.for("react.lazy"),a_=Symbol.for("react.offscreen"),jx=Symbol.iterator;function Yi(t){return t===null||typeof t!="object"?null:(t=jx&&t[jx]||t["@@iterator"],typeof t=="function"?t:null)}var pt=Object.assign,Hh;function ol(t){if(Hh===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Hh=e&&e[1]||""}return`
`+Hh+t}var qh=!1;function Kh(t,e){if(!t||qh)return"";qh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=n.stack.split(`
`),i=s.length-1,l=o.length-1;1<=i&&0<=l&&s[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==o[l]){var c=`
`+s[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=l);break}}}finally{qh=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ol(t):""}function fP(t){switch(t.tag){case 5:return ol(t.type);case 16:return ol("Lazy");case 13:return ol("Suspense");case 19:return ol("SuspenseList");case 0:case 2:case 15:return t=Kh(t.type,!1),t;case 11:return t=Kh(t.type.render,!1),t;case 1:return t=Kh(t.type,!0),t;default:return""}}function rm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ao:return"Fragment";case Do:return"Portal";case Zf:return"Profiler";case Xp:return"StrictMode";case em:return"Suspense";case tm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case s_:return(t.displayName||"Context")+".Consumer";case n_:return(t._context.displayName||"Context")+".Provider";case Zp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case eg:return e=t.displayName||null,e!==null?e:rm(t.type)||"Memo";case Cs:e=t._payload,t=t._init;try{return rm(t(e))}catch{}}return null}function mP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rm(e);case 8:return e===Xp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function sa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function o_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pP(t){var e=o_(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,o.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Kc(t){t._valueTracker||(t._valueTracker=pP(t))}function i_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=o_(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Vu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nm(t,e){var r=e.checked;return pt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Sx(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=sa(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function l_(t,e){e=e.checked,e!=null&&Jp(t,"checked",e,!1)}function sm(t,e){l_(t,e);var r=sa(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?am(t,e.type,r):e.hasOwnProperty("defaultValue")&&am(t,e.type,sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Nx(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function am(t,e,r){(e!=="number"||Vu(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var il=Array.isArray;function Ko(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+sa(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function om(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(te(91));return pt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kx(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(te(92));if(il(r)){if(1<r.length)throw Error(te(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:sa(r)}}function c_(t,e){var r=sa(e.value),n=sa(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Cx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function u_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function im(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?u_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gc,d_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gc=Gc||document.createElement("div"),Gc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Rl(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var ml={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gP=["Webkit","ms","Moz","O"];Object.keys(ml).forEach(function(t){gP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ml[e]=ml[t]})});function h_(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ml.hasOwnProperty(t)&&ml[t]?(""+e).trim():e+"px"}function f_(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=h_(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var vP=pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lm(t,e){if(e){if(vP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(te(62))}}function cm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var um=null;function tg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var dm=null,Go=null,Yo=null;function Ex(t){if(t=mc(t)){if(typeof dm!="function")throw Error(te(280));var e=t.stateNode;e&&(e=Kd(e),dm(t.stateNode,t.type,e))}}function m_(t){Go?Yo?Yo.push(t):Yo=[t]:Go=t}function p_(){if(Go){var t=Go,e=Yo;if(Yo=Go=null,Ex(t),e)for(t=0;t<e.length;t++)Ex(e[t])}}function g_(t,e){return t(e)}function v_(){}var Gh=!1;function x_(t,e,r){if(Gh)return t(e,r);Gh=!0;try{return g_(t,e,r)}finally{Gh=!1,(Go!==null||Yo!==null)&&(v_(),p_())}}function Ol(t,e){var r=t.stateNode;if(r===null)return null;var n=Kd(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(te(231,e,typeof r));return r}var hm=!1;if(ts)try{var Qi={};Object.defineProperty(Qi,"passive",{get:function(){hm=!0}}),window.addEventListener("test",Qi,Qi),window.removeEventListener("test",Qi,Qi)}catch{hm=!1}function xP(t,e,r,n,s,o,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var pl=!1,Hu=null,qu=!1,fm=null,yP={onError:function(t){pl=!0,Hu=t}};function wP(t,e,r,n,s,o,i,l,c){pl=!1,Hu=null,xP.apply(yP,arguments)}function _P(t,e,r,n,s,o,i,l,c){if(wP.apply(this,arguments),pl){if(pl){var u=Hu;pl=!1,Hu=null}else throw Error(te(198));qu||(qu=!0,fm=u)}}function ho(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function y_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Px(t){if(ho(t)!==t)throw Error(te(188))}function bP(t){var e=t.alternate;if(!e){if(e=ho(t),e===null)throw Error(te(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return Px(s),t;if(o===n)return Px(s),e;o=o.sibling}throw Error(te(188))}if(r.return!==n.return)r=s,n=o;else{for(var i=!1,l=s.child;l;){if(l===r){i=!0,r=s,n=o;break}if(l===n){i=!0,n=s,r=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===r){i=!0,r=o,n=s;break}if(l===n){i=!0,n=o,r=s;break}l=l.sibling}if(!i)throw Error(te(189))}}if(r.alternate!==n)throw Error(te(190))}if(r.tag!==3)throw Error(te(188));return r.stateNode.current===r?t:e}function w_(t){return t=bP(t),t!==null?__(t):null}function __(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=__(t);if(e!==null)return e;t=t.sibling}return null}var b_=Rr.unstable_scheduleCallback,Tx=Rr.unstable_cancelCallback,jP=Rr.unstable_shouldYield,SP=Rr.unstable_requestPaint,wt=Rr.unstable_now,NP=Rr.unstable_getCurrentPriorityLevel,rg=Rr.unstable_ImmediatePriority,j_=Rr.unstable_UserBlockingPriority,Ku=Rr.unstable_NormalPriority,kP=Rr.unstable_LowPriority,S_=Rr.unstable_IdlePriority,Wd=null,On=null;function CP(t){if(On&&typeof On.onCommitFiberRoot=="function")try{On.onCommitFiberRoot(Wd,t,void 0,(t.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:TP,EP=Math.log,PP=Math.LN2;function TP(t){return t>>>=0,t===0?32:31-(EP(t)/PP|0)|0}var Yc=64,Qc=4194304;function ll(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gu(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,o=t.pingedLanes,i=r&268435455;if(i!==0){var l=i&~s;l!==0?n=ll(l):(o&=i,o!==0&&(n=ll(o)))}else i=r&~s,i!==0?n=ll(i):o!==0&&(n=ll(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-on(e),s=1<<r,n|=t[r],e&=~s;return n}function RP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OP(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var i=31-on(o),l=1<<i,c=s[i];c===-1?(!(l&r)||l&n)&&(s[i]=RP(l,e)):c<=e&&(t.expiredLanes|=l),o&=~l}}function mm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function N_(){var t=Yc;return Yc<<=1,!(Yc&4194240)&&(Yc=64),t}function Yh(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function hc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-on(e),t[e]=r}function DP(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-on(r),o=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~o}}function ng(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-on(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Ze=0;function k_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var C_,sg,E_,P_,T_,pm=!1,Jc=[],Hs=null,qs=null,Ks=null,Dl=new Map,Al=new Map,Ps=[],AP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rx(t,e){switch(t){case"focusin":case"focusout":Hs=null;break;case"dragenter":case"dragleave":qs=null;break;case"mouseover":case"mouseout":Ks=null;break;case"pointerover":case"pointerout":Dl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Al.delete(e.pointerId)}}function Ji(t,e,r,n,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[s]},e!==null&&(e=mc(e),e!==null&&sg(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function MP(t,e,r,n,s){switch(e){case"focusin":return Hs=Ji(Hs,t,e,r,n,s),!0;case"dragenter":return qs=Ji(qs,t,e,r,n,s),!0;case"mouseover":return Ks=Ji(Ks,t,e,r,n,s),!0;case"pointerover":var o=s.pointerId;return Dl.set(o,Ji(Dl.get(o)||null,t,e,r,n,s)),!0;case"gotpointercapture":return o=s.pointerId,Al.set(o,Ji(Al.get(o)||null,t,e,r,n,s)),!0}return!1}function R_(t){var e=Aa(t.target);if(e!==null){var r=ho(e);if(r!==null){if(e=r.tag,e===13){if(e=y_(r),e!==null){t.blockedOn=e,T_(t.priority,function(){E_(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=gm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);um=n,r.target.dispatchEvent(n),um=null}else return e=mc(r),e!==null&&sg(e),t.blockedOn=r,!1;e.shift()}return!0}function Ox(t,e,r){Cu(t)&&r.delete(e)}function IP(){pm=!1,Hs!==null&&Cu(Hs)&&(Hs=null),qs!==null&&Cu(qs)&&(qs=null),Ks!==null&&Cu(Ks)&&(Ks=null),Dl.forEach(Ox),Al.forEach(Ox)}function Xi(t,e){t.blockedOn===e&&(t.blockedOn=null,pm||(pm=!0,Rr.unstable_scheduleCallback(Rr.unstable_NormalPriority,IP)))}function Ml(t){function e(s){return Xi(s,t)}if(0<Jc.length){Xi(Jc[0],t);for(var r=1;r<Jc.length;r++){var n=Jc[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Hs!==null&&Xi(Hs,t),qs!==null&&Xi(qs,t),Ks!==null&&Xi(Ks,t),Dl.forEach(e),Al.forEach(e),r=0;r<Ps.length;r++)n=Ps[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ps.length&&(r=Ps[0],r.blockedOn===null);)R_(r),r.blockedOn===null&&Ps.shift()}var Qo=is.ReactCurrentBatchConfig,Yu=!0;function LP(t,e,r,n){var s=Ze,o=Qo.transition;Qo.transition=null;try{Ze=1,ag(t,e,r,n)}finally{Ze=s,Qo.transition=o}}function FP(t,e,r,n){var s=Ze,o=Qo.transition;Qo.transition=null;try{Ze=4,ag(t,e,r,n)}finally{Ze=s,Qo.transition=o}}function ag(t,e,r,n){if(Yu){var s=gm(t,e,r,n);if(s===null)af(t,e,n,Qu,r),Rx(t,n);else if(MP(s,t,e,r,n))n.stopPropagation();else if(Rx(t,n),e&4&&-1<AP.indexOf(t)){for(;s!==null;){var o=mc(s);if(o!==null&&C_(o),o=gm(t,e,r,n),o===null&&af(t,e,n,Qu,r),o===s)break;s=o}s!==null&&n.stopPropagation()}else af(t,e,n,null,r)}}var Qu=null;function gm(t,e,r,n){if(Qu=null,t=tg(n),t=Aa(t),t!==null)if(e=ho(t),e===null)t=null;else if(r=e.tag,r===13){if(t=y_(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Qu=t,null}function O_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(NP()){case rg:return 1;case j_:return 4;case Ku:case kP:return 16;case S_:return 536870912;default:return 16}default:return 16}}var Us=null,og=null,Eu=null;function D_(){if(Eu)return Eu;var t,e=og,r=e.length,n,s="value"in Us?Us.value:Us.textContent,o=s.length;for(t=0;t<r&&e[t]===s[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===s[o-n];n++);return Eu=s.slice(t,1<n?1-n:void 0)}function Pu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xc(){return!0}function Dx(){return!1}function Ar(t){function e(r,n,s,o,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Xc:Dx,this.isPropagationStopped=Dx,this}return pt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Xc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Xc)},persist:function(){},isPersistent:Xc}),e}var Mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ig=Ar(Mi),fc=pt({},Mi,{view:0,detail:0}),$P=Ar(fc),Qh,Jh,Zi,Vd=pt({},fc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zi&&(Zi&&t.type==="mousemove"?(Qh=t.screenX-Zi.screenX,Jh=t.screenY-Zi.screenY):Jh=Qh=0,Zi=t),Qh)},movementY:function(t){return"movementY"in t?t.movementY:Jh}}),Ax=Ar(Vd),UP=pt({},Vd,{dataTransfer:0}),BP=Ar(UP),zP=pt({},fc,{relatedTarget:0}),Xh=Ar(zP),WP=pt({},Mi,{animationName:0,elapsedTime:0,pseudoElement:0}),VP=Ar(WP),HP=pt({},Mi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qP=Ar(HP),KP=pt({},Mi,{data:0}),Mx=Ar(KP),GP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=QP[t])?!!e[t]:!1}function lg(){return JP}var XP=pt({},fc,{key:function(t){if(t.key){var e=GP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?YP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lg,charCode:function(t){return t.type==="keypress"?Pu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ZP=Ar(XP),eT=pt({},Vd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ix=Ar(eT),tT=pt({},fc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lg}),rT=Ar(tT),nT=pt({},Mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),sT=Ar(nT),aT=pt({},Vd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),oT=Ar(aT),iT=[9,13,27,32],cg=ts&&"CompositionEvent"in window,gl=null;ts&&"documentMode"in document&&(gl=document.documentMode);var lT=ts&&"TextEvent"in window&&!gl,A_=ts&&(!cg||gl&&8<gl&&11>=gl),Lx=" ",Fx=!1;function M_(t,e){switch(t){case"keyup":return iT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function I_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Mo=!1;function cT(t,e){switch(t){case"compositionend":return I_(e);case"keypress":return e.which!==32?null:(Fx=!0,Lx);case"textInput":return t=e.data,t===Lx&&Fx?null:t;default:return null}}function uT(t,e){if(Mo)return t==="compositionend"||!cg&&M_(t,e)?(t=D_(),Eu=og=Us=null,Mo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return A_&&e.locale!=="ko"?null:e.data;default:return null}}var dT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $x(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dT[t.type]:e==="textarea"}function L_(t,e,r,n){m_(n),e=Ju(e,"onChange"),0<e.length&&(r=new ig("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var vl=null,Il=null;function hT(t){G_(t,0)}function Hd(t){var e=Fo(t);if(i_(e))return t}function fT(t,e){if(t==="change")return e}var F_=!1;if(ts){var Zh;if(ts){var ef="oninput"in document;if(!ef){var Ux=document.createElement("div");Ux.setAttribute("oninput","return;"),ef=typeof Ux.oninput=="function"}Zh=ef}else Zh=!1;F_=Zh&&(!document.documentMode||9<document.documentMode)}function Bx(){vl&&(vl.detachEvent("onpropertychange",$_),Il=vl=null)}function $_(t){if(t.propertyName==="value"&&Hd(Il)){var e=[];L_(e,Il,t,tg(t)),x_(hT,e)}}function mT(t,e,r){t==="focusin"?(Bx(),vl=e,Il=r,vl.attachEvent("onpropertychange",$_)):t==="focusout"&&Bx()}function pT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Hd(Il)}function gT(t,e){if(t==="click")return Hd(e)}function vT(t,e){if(t==="input"||t==="change")return Hd(e)}function xT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dn=typeof Object.is=="function"?Object.is:xT;function Ll(t,e){if(dn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Xf.call(e,s)||!dn(t[s],e[s]))return!1}return!0}function zx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wx(t,e){var r=zx(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zx(r)}}function U_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?U_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function B_(){for(var t=window,e=Vu();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Vu(t.document)}return e}function ug(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function yT(t){var e=B_(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&U_(r.ownerDocument.documentElement,r)){if(n!==null&&ug(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,o=Math.min(n.start,s);n=n.end===void 0?o:Math.min(n.end,s),!t.extend&&o>n&&(s=n,n=o,o=s),s=Wx(r,o);var i=Wx(r,n);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var wT=ts&&"documentMode"in document&&11>=document.documentMode,Io=null,vm=null,xl=null,xm=!1;function Vx(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;xm||Io==null||Io!==Vu(n)||(n=Io,"selectionStart"in n&&ug(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),xl&&Ll(xl,n)||(xl=n,n=Ju(vm,"onSelect"),0<n.length&&(e=new ig("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Io)))}function Zc(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Lo={animationend:Zc("Animation","AnimationEnd"),animationiteration:Zc("Animation","AnimationIteration"),animationstart:Zc("Animation","AnimationStart"),transitionend:Zc("Transition","TransitionEnd")},tf={},z_={};ts&&(z_=document.createElement("div").style,"AnimationEvent"in window||(delete Lo.animationend.animation,delete Lo.animationiteration.animation,delete Lo.animationstart.animation),"TransitionEvent"in window||delete Lo.transitionend.transition);function qd(t){if(tf[t])return tf[t];if(!Lo[t])return t;var e=Lo[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in z_)return tf[t]=e[r];return t}var W_=qd("animationend"),V_=qd("animationiteration"),H_=qd("animationstart"),q_=qd("transitionend"),K_=new Map,Hx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ha(t,e){K_.set(t,e),uo(e,[t])}for(var rf=0;rf<Hx.length;rf++){var nf=Hx[rf],_T=nf.toLowerCase(),bT=nf[0].toUpperCase()+nf.slice(1);ha(_T,"on"+bT)}ha(W_,"onAnimationEnd");ha(V_,"onAnimationIteration");ha(H_,"onAnimationStart");ha("dblclick","onDoubleClick");ha("focusin","onFocus");ha("focusout","onBlur");ha(q_,"onTransitionEnd");xi("onMouseEnter",["mouseout","mouseover"]);xi("onMouseLeave",["mouseout","mouseover"]);xi("onPointerEnter",["pointerout","pointerover"]);xi("onPointerLeave",["pointerout","pointerover"]);uo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));uo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));uo("onBeforeInput",["compositionend","keypress","textInput","paste"]);uo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));uo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));uo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jT=new Set("cancel close invalid load scroll toggle".split(" ").concat(cl));function qx(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,_P(n,e,void 0,t),t.currentTarget=null}function G_(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;qx(s,l,u),o=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;qx(s,l,u),o=c}}}if(qu)throw t=fm,qu=!1,fm=null,t}function at(t,e){var r=e[jm];r===void 0&&(r=e[jm]=new Set);var n=t+"__bubble";r.has(n)||(Y_(e,t,2,!1),r.add(n))}function sf(t,e,r){var n=0;e&&(n|=4),Y_(r,t,n,e)}var eu="_reactListening"+Math.random().toString(36).slice(2);function Fl(t){if(!t[eu]){t[eu]=!0,r_.forEach(function(r){r!=="selectionchange"&&(jT.has(r)||sf(r,!1,t),sf(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[eu]||(e[eu]=!0,sf("selectionchange",!1,e))}}function Y_(t,e,r,n){switch(O_(e)){case 1:var s=LP;break;case 4:s=FP;break;default:s=ag}r=s.bind(null,e,r,t),s=void 0,!hm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function af(t,e,r,n,s){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;l!==null;){if(i=Aa(l),i===null)return;if(c=i.tag,c===5||c===6){n=o=i;continue e}l=l.parentNode}}n=n.return}x_(function(){var u=o,d=tg(r),h=[];e:{var m=K_.get(t);if(m!==void 0){var p=ig,v=t;switch(t){case"keypress":if(Pu(r)===0)break e;case"keydown":case"keyup":p=ZP;break;case"focusin":v="focus",p=Xh;break;case"focusout":v="blur",p=Xh;break;case"beforeblur":case"afterblur":p=Xh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Ax;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=BP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=rT;break;case W_:case V_:case H_:p=VP;break;case q_:p=sT;break;case"scroll":p=$P;break;case"wheel":p=oT;break;case"copy":case"cut":case"paste":p=qP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Ix}var g=(e&4)!==0,y=!g&&t==="scroll",w=g?m!==null?m+"Capture":null:m;g=[];for(var x=u,_;x!==null;){_=x;var b=_.stateNode;if(_.tag===5&&b!==null&&(_=b,w!==null&&(b=Ol(x,w),b!=null&&g.push($l(x,b,_)))),y)break;x=x.return}0<g.length&&(m=new p(m,v,null,r,d),h.push({event:m,listeners:g}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&r!==um&&(v=r.relatedTarget||r.fromElement)&&(Aa(v)||v[rs]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(v=r.relatedTarget||r.toElement,p=u,v=v?Aa(v):null,v!==null&&(y=ho(v),v!==y||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(g=Ax,b="onMouseLeave",w="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(g=Ix,b="onPointerLeave",w="onPointerEnter",x="pointer"),y=p==null?m:Fo(p),_=v==null?m:Fo(v),m=new g(b,x+"leave",p,r,d),m.target=y,m.relatedTarget=_,b=null,Aa(d)===u&&(g=new g(w,x+"enter",v,r,d),g.target=_,g.relatedTarget=y,b=g),y=b,p&&v)t:{for(g=p,w=v,x=0,_=g;_;_=yo(_))x++;for(_=0,b=w;b;b=yo(b))_++;for(;0<x-_;)g=yo(g),x--;for(;0<_-x;)w=yo(w),_--;for(;x--;){if(g===w||w!==null&&g===w.alternate)break t;g=yo(g),w=yo(w)}g=null}else g=null;p!==null&&Kx(h,m,p,g,!1),v!==null&&y!==null&&Kx(h,y,v,g,!0)}}e:{if(m=u?Fo(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var j=fT;else if($x(m))if(F_)j=vT;else{j=pT;var E=mT}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=gT);if(j&&(j=j(t,u))){L_(h,j,r,d);break e}E&&E(t,m,u),t==="focusout"&&(E=m._wrapperState)&&E.controlled&&m.type==="number"&&am(m,"number",m.value)}switch(E=u?Fo(u):window,t){case"focusin":($x(E)||E.contentEditable==="true")&&(Io=E,vm=u,xl=null);break;case"focusout":xl=vm=Io=null;break;case"mousedown":xm=!0;break;case"contextmenu":case"mouseup":case"dragend":xm=!1,Vx(h,r,d);break;case"selectionchange":if(wT)break;case"keydown":case"keyup":Vx(h,r,d)}var k;if(cg)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Mo?M_(t,r)&&(P="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(A_&&r.locale!=="ko"&&(Mo||P!=="onCompositionStart"?P==="onCompositionEnd"&&Mo&&(k=D_()):(Us=d,og="value"in Us?Us.value:Us.textContent,Mo=!0)),E=Ju(u,P),0<E.length&&(P=new Mx(P,t,null,r,d),h.push({event:P,listeners:E}),k?P.data=k:(k=I_(r),k!==null&&(P.data=k)))),(k=lT?cT(t,r):uT(t,r))&&(u=Ju(u,"onBeforeInput"),0<u.length&&(d=new Mx("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=k))}G_(h,e)})}function $l(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Ju(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Ol(t,r),o!=null&&n.unshift($l(t,o,s)),o=Ol(t,e),o!=null&&n.push($l(t,o,s))),t=t.return}return n}function yo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Kx(t,e,r,n,s){for(var o=e._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Ol(r,o),c!=null&&i.unshift($l(r,c,l))):s||(c=Ol(r,o),c!=null&&i.push($l(r,c,l)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var ST=/\r\n?/g,NT=/\u0000|\uFFFD/g;function Gx(t){return(typeof t=="string"?t:""+t).replace(ST,`
`).replace(NT,"")}function tu(t,e,r){if(e=Gx(e),Gx(t)!==e&&r)throw Error(te(425))}function Xu(){}var ym=null,wm=null;function _m(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bm=typeof setTimeout=="function"?setTimeout:void 0,kT=typeof clearTimeout=="function"?clearTimeout:void 0,Yx=typeof Promise=="function"?Promise:void 0,CT=typeof queueMicrotask=="function"?queueMicrotask:typeof Yx<"u"?function(t){return Yx.resolve(null).then(t).catch(ET)}:bm;function ET(t){setTimeout(function(){throw t})}function of(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Ml(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Ml(e)}function Gs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Qx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ii=Math.random().toString(36).slice(2),kn="__reactFiber$"+Ii,Ul="__reactProps$"+Ii,rs="__reactContainer$"+Ii,jm="__reactEvents$"+Ii,PT="__reactListeners$"+Ii,TT="__reactHandles$"+Ii;function Aa(t){var e=t[kn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[rs]||r[kn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Qx(t);t!==null;){if(r=t[kn])return r;t=Qx(t)}return e}t=r,r=t.parentNode}return null}function mc(t){return t=t[kn]||t[rs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(te(33))}function Kd(t){return t[Ul]||null}var Sm=[],$o=-1;function fa(t){return{current:t}}function ot(t){0>$o||(t.current=Sm[$o],Sm[$o]=null,$o--)}function rt(t,e){$o++,Sm[$o]=t.current,t.current=e}var aa={},Qt=fa(aa),xr=fa(!1),Ja=aa;function yi(t,e){var r=t.type.contextTypes;if(!r)return aa;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function yr(t){return t=t.childContextTypes,t!=null}function Zu(){ot(xr),ot(Qt)}function Jx(t,e,r){if(Qt.current!==aa)throw Error(te(168));rt(Qt,e),rt(xr,r)}function Q_(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(te(108,mP(t)||"Unknown",s));return pt({},r,n)}function ed(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||aa,Ja=Qt.current,rt(Qt,t),rt(xr,xr.current),!0}function Xx(t,e,r){var n=t.stateNode;if(!n)throw Error(te(169));r?(t=Q_(t,e,Ja),n.__reactInternalMemoizedMergedChildContext=t,ot(xr),ot(Qt),rt(Qt,t)):ot(xr),rt(xr,r)}var Yn=null,Gd=!1,lf=!1;function J_(t){Yn===null?Yn=[t]:Yn.push(t)}function RT(t){Gd=!0,J_(t)}function ma(){if(!lf&&Yn!==null){lf=!0;var t=0,e=Ze;try{var r=Yn;for(Ze=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Yn=null,Gd=!1}catch(s){throw Yn!==null&&(Yn=Yn.slice(t+1)),b_(rg,ma),s}finally{Ze=e,lf=!1}}return null}var Uo=[],Bo=0,td=null,rd=0,Lr=[],Fr=0,Xa=null,Xn=1,Zn="";function Ca(t,e){Uo[Bo++]=rd,Uo[Bo++]=td,td=t,rd=e}function X_(t,e,r){Lr[Fr++]=Xn,Lr[Fr++]=Zn,Lr[Fr++]=Xa,Xa=t;var n=Xn;t=Zn;var s=32-on(n)-1;n&=~(1<<s),r+=1;var o=32-on(e)+s;if(30<o){var i=s-s%5;o=(n&(1<<i)-1).toString(32),n>>=i,s-=i,Xn=1<<32-on(e)+s|r<<s|n,Zn=o+t}else Xn=1<<o|r<<s|n,Zn=t}function dg(t){t.return!==null&&(Ca(t,1),X_(t,1,0))}function hg(t){for(;t===td;)td=Uo[--Bo],Uo[Bo]=null,rd=Uo[--Bo],Uo[Bo]=null;for(;t===Xa;)Xa=Lr[--Fr],Lr[Fr]=null,Zn=Lr[--Fr],Lr[Fr]=null,Xn=Lr[--Fr],Lr[Fr]=null}var Er=null,Cr=null,it=!1,an=null;function Z_(t,e){var r=Ur(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Zx(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Er=t,Cr=Gs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Er=t,Cr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Xa!==null?{id:Xn,overflow:Zn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ur(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Er=t,Cr=null,!0):!1;default:return!1}}function Nm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function km(t){if(it){var e=Cr;if(e){var r=e;if(!Zx(t,e)){if(Nm(t))throw Error(te(418));e=Gs(r.nextSibling);var n=Er;e&&Zx(t,e)?Z_(n,r):(t.flags=t.flags&-4097|2,it=!1,Er=t)}}else{if(Nm(t))throw Error(te(418));t.flags=t.flags&-4097|2,it=!1,Er=t}}}function ey(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Er=t}function ru(t){if(t!==Er)return!1;if(!it)return ey(t),it=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_m(t.type,t.memoizedProps)),e&&(e=Cr)){if(Nm(t))throw eb(),Error(te(418));for(;e;)Z_(t,e),e=Gs(e.nextSibling)}if(ey(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Cr=Gs(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Cr=null}}else Cr=Er?Gs(t.stateNode.nextSibling):null;return!0}function eb(){for(var t=Cr;t;)t=Gs(t.nextSibling)}function wi(){Cr=Er=null,it=!1}function fg(t){an===null?an=[t]:an.push(t)}var OT=is.ReactCurrentBatchConfig;function el(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(te(309));var n=r.stateNode}if(!n)throw Error(te(147,t));var s=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(i){var l=s.refs;i===null?delete l[o]:l[o]=i},e._stringRef=o,e)}if(typeof t!="string")throw Error(te(284));if(!r._owner)throw Error(te(290,t))}return t}function nu(t,e){throw t=Object.prototype.toString.call(e),Error(te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ty(t){var e=t._init;return e(t._payload)}function tb(t){function e(w,x){if(t){var _=w.deletions;_===null?(w.deletions=[x],w.flags|=16):_.push(x)}}function r(w,x){if(!t)return null;for(;x!==null;)e(w,x),x=x.sibling;return null}function n(w,x){for(w=new Map;x!==null;)x.key!==null?w.set(x.key,x):w.set(x.index,x),x=x.sibling;return w}function s(w,x){return w=Xs(w,x),w.index=0,w.sibling=null,w}function o(w,x,_){return w.index=_,t?(_=w.alternate,_!==null?(_=_.index,_<x?(w.flags|=2,x):_):(w.flags|=2,x)):(w.flags|=1048576,x)}function i(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,x,_,b){return x===null||x.tag!==6?(x=pf(_,w.mode,b),x.return=w,x):(x=s(x,_),x.return=w,x)}function c(w,x,_,b){var j=_.type;return j===Ao?d(w,x,_.props.children,b,_.key):x!==null&&(x.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Cs&&ty(j)===x.type)?(b=s(x,_.props),b.ref=el(w,x,_),b.return=w,b):(b=Iu(_.type,_.key,_.props,null,w.mode,b),b.ref=el(w,x,_),b.return=w,b)}function u(w,x,_,b){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=gf(_,w.mode,b),x.return=w,x):(x=s(x,_.children||[]),x.return=w,x)}function d(w,x,_,b,j){return x===null||x.tag!==7?(x=Ga(_,w.mode,b,j),x.return=w,x):(x=s(x,_),x.return=w,x)}function h(w,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=pf(""+x,w.mode,_),x.return=w,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case qc:return _=Iu(x.type,x.key,x.props,null,w.mode,_),_.ref=el(w,null,x),_.return=w,_;case Do:return x=gf(x,w.mode,_),x.return=w,x;case Cs:var b=x._init;return h(w,b(x._payload),_)}if(il(x)||Yi(x))return x=Ga(x,w.mode,_,null),x.return=w,x;nu(w,x)}return null}function m(w,x,_,b){var j=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return j!==null?null:l(w,x,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case qc:return _.key===j?c(w,x,_,b):null;case Do:return _.key===j?u(w,x,_,b):null;case Cs:return j=_._init,m(w,x,j(_._payload),b)}if(il(_)||Yi(_))return j!==null?null:d(w,x,_,b,null);nu(w,_)}return null}function p(w,x,_,b,j){if(typeof b=="string"&&b!==""||typeof b=="number")return w=w.get(_)||null,l(x,w,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case qc:return w=w.get(b.key===null?_:b.key)||null,c(x,w,b,j);case Do:return w=w.get(b.key===null?_:b.key)||null,u(x,w,b,j);case Cs:var E=b._init;return p(w,x,_,E(b._payload),j)}if(il(b)||Yi(b))return w=w.get(_)||null,d(x,w,b,j,null);nu(x,b)}return null}function v(w,x,_,b){for(var j=null,E=null,k=x,P=x=0,T=null;k!==null&&P<_.length;P++){k.index>P?(T=k,k=null):T=k.sibling;var C=m(w,k,_[P],b);if(C===null){k===null&&(k=T);break}t&&k&&C.alternate===null&&e(w,k),x=o(C,x,P),E===null?j=C:E.sibling=C,E=C,k=T}if(P===_.length)return r(w,k),it&&Ca(w,P),j;if(k===null){for(;P<_.length;P++)k=h(w,_[P],b),k!==null&&(x=o(k,x,P),E===null?j=k:E.sibling=k,E=k);return it&&Ca(w,P),j}for(k=n(w,k);P<_.length;P++)T=p(k,w,P,_[P],b),T!==null&&(t&&T.alternate!==null&&k.delete(T.key===null?P:T.key),x=o(T,x,P),E===null?j=T:E.sibling=T,E=T);return t&&k.forEach(function(L){return e(w,L)}),it&&Ca(w,P),j}function g(w,x,_,b){var j=Yi(_);if(typeof j!="function")throw Error(te(150));if(_=j.call(_),_==null)throw Error(te(151));for(var E=j=null,k=x,P=x=0,T=null,C=_.next();k!==null&&!C.done;P++,C=_.next()){k.index>P?(T=k,k=null):T=k.sibling;var L=m(w,k,C.value,b);if(L===null){k===null&&(k=T);break}t&&k&&L.alternate===null&&e(w,k),x=o(L,x,P),E===null?j=L:E.sibling=L,E=L,k=T}if(C.done)return r(w,k),it&&Ca(w,P),j;if(k===null){for(;!C.done;P++,C=_.next())C=h(w,C.value,b),C!==null&&(x=o(C,x,P),E===null?j=C:E.sibling=C,E=C);return it&&Ca(w,P),j}for(k=n(w,k);!C.done;P++,C=_.next())C=p(k,w,P,C.value,b),C!==null&&(t&&C.alternate!==null&&k.delete(C.key===null?P:C.key),x=o(C,x,P),E===null?j=C:E.sibling=C,E=C);return t&&k.forEach(function(O){return e(w,O)}),it&&Ca(w,P),j}function y(w,x,_,b){if(typeof _=="object"&&_!==null&&_.type===Ao&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case qc:e:{for(var j=_.key,E=x;E!==null;){if(E.key===j){if(j=_.type,j===Ao){if(E.tag===7){r(w,E.sibling),x=s(E,_.props.children),x.return=w,w=x;break e}}else if(E.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Cs&&ty(j)===E.type){r(w,E.sibling),x=s(E,_.props),x.ref=el(w,E,_),x.return=w,w=x;break e}r(w,E);break}else e(w,E);E=E.sibling}_.type===Ao?(x=Ga(_.props.children,w.mode,b,_.key),x.return=w,w=x):(b=Iu(_.type,_.key,_.props,null,w.mode,b),b.ref=el(w,x,_),b.return=w,w=b)}return i(w);case Do:e:{for(E=_.key;x!==null;){if(x.key===E)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){r(w,x.sibling),x=s(x,_.children||[]),x.return=w,w=x;break e}else{r(w,x);break}else e(w,x);x=x.sibling}x=gf(_,w.mode,b),x.return=w,w=x}return i(w);case Cs:return E=_._init,y(w,x,E(_._payload),b)}if(il(_))return v(w,x,_,b);if(Yi(_))return g(w,x,_,b);nu(w,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(r(w,x.sibling),x=s(x,_),x.return=w,w=x):(r(w,x),x=pf(_,w.mode,b),x.return=w,w=x),i(w)):r(w,x)}return y}var _i=tb(!0),rb=tb(!1),nd=fa(null),sd=null,zo=null,mg=null;function pg(){mg=zo=sd=null}function gg(t){var e=nd.current;ot(nd),t._currentValue=e}function Cm(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Jo(t,e){sd=t,mg=zo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(pr=!0),t.firstContext=null)}function qr(t){var e=t._currentValue;if(mg!==t)if(t={context:t,memoizedValue:e,next:null},zo===null){if(sd===null)throw Error(te(308));zo=t,sd.dependencies={lanes:0,firstContext:t}}else zo=zo.next=t;return e}var Ma=null;function vg(t){Ma===null?Ma=[t]:Ma.push(t)}function nb(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,vg(e)):(r.next=s.next,s.next=r),e.interleaved=r,ns(t,n)}function ns(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Es=!1;function xg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function es(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ys(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ge&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,ns(t,r)}return s=n.interleaved,s===null?(e.next=e,vg(n)):(e.next=s.next,s.next=e),n.interleaved=e,ns(t,r)}function Tu(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,ng(t,r)}}function ry(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=i:o=o.next=i,r=r.next}while(r!==null);o===null?s=o=e:o=o.next=e}else s=o=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function ad(t,e,r,n){var s=t.updateQueue;Es=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?o=u:i.next=u,i=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(o!==null){var h=s.baseState;i=0,d=u=c=null,l=o;do{var m=l.lane,p=l.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,g=l;switch(m=e,p=r,g.tag){case 1:if(v=g.payload,typeof v=="function"){h=v.call(p,h,m);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=g.payload,m=typeof v=="function"?v.call(p,h,m):v,m==null)break e;h=pt({},h,m);break e;case 2:Es=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,i|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);eo|=i,t.lanes=i,t.memoizedState=h}}function ny(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(te(191,s));s.call(n)}}}var pc={},Dn=fa(pc),Bl=fa(pc),zl=fa(pc);function Ia(t){if(t===pc)throw Error(te(174));return t}function yg(t,e){switch(rt(zl,e),rt(Bl,t),rt(Dn,pc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:im(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=im(e,t)}ot(Dn),rt(Dn,e)}function bi(){ot(Dn),ot(Bl),ot(zl)}function ab(t){Ia(zl.current);var e=Ia(Dn.current),r=im(e,t.type);e!==r&&(rt(Bl,t),rt(Dn,r))}function wg(t){Bl.current===t&&(ot(Dn),ot(Bl))}var dt=fa(0);function od(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cf=[];function _g(){for(var t=0;t<cf.length;t++)cf[t]._workInProgressVersionPrimary=null;cf.length=0}var Ru=is.ReactCurrentDispatcher,uf=is.ReactCurrentBatchConfig,Za=0,mt=null,Rt=null,Lt=null,id=!1,yl=!1,Wl=0,DT=0;function Ht(){throw Error(te(321))}function bg(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!dn(t[r],e[r]))return!1;return!0}function jg(t,e,r,n,s,o){if(Za=o,mt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ru.current=t===null||t.memoizedState===null?LT:FT,t=r(n,s),yl){o=0;do{if(yl=!1,Wl=0,25<=o)throw Error(te(301));o+=1,Lt=Rt=null,e.updateQueue=null,Ru.current=$T,t=r(n,s)}while(yl)}if(Ru.current=ld,e=Rt!==null&&Rt.next!==null,Za=0,Lt=Rt=mt=null,id=!1,e)throw Error(te(300));return t}function Sg(){var t=Wl!==0;return Wl=0,t}function _n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?mt.memoizedState=Lt=t:Lt=Lt.next=t,Lt}function Kr(){if(Rt===null){var t=mt.alternate;t=t!==null?t.memoizedState:null}else t=Rt.next;var e=Lt===null?mt.memoizedState:Lt.next;if(e!==null)Lt=e,Rt=t;else{if(t===null)throw Error(te(310));Rt=t,t={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Lt===null?mt.memoizedState=Lt=t:Lt=Lt.next=t}return Lt}function Vl(t,e){return typeof e=="function"?e(t):e}function df(t){var e=Kr(),r=e.queue;if(r===null)throw Error(te(311));r.lastRenderedReducer=t;var n=Rt,s=n.baseQueue,o=r.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}n.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,n=n.baseState;var l=i=null,c=null,u=o;do{var d=u.lane;if((Za&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,i=n):c=c.next=h,mt.lanes|=d,eo|=d}u=u.next}while(u!==null&&u!==o);c===null?i=n:c.next=l,dn(n,e.memoizedState)||(pr=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do o=s.lane,mt.lanes|=o,eo|=o,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function hf(t){var e=Kr(),r=e.queue;if(r===null)throw Error(te(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,o=e.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do o=t(o,i.action),i=i.next;while(i!==s);dn(o,e.memoizedState)||(pr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function ob(){}function ib(t,e){var r=mt,n=Kr(),s=e(),o=!dn(n.memoizedState,s);if(o&&(n.memoizedState=s,pr=!0),n=n.queue,Ng(ub.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||Lt!==null&&Lt.memoizedState.tag&1){if(r.flags|=2048,Hl(9,cb.bind(null,r,n,s,e),void 0,null),$t===null)throw Error(te(349));Za&30||lb(r,e,s)}return s}function lb(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=mt.updateQueue,e===null?(e={lastEffect:null,stores:null},mt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function cb(t,e,r,n){e.value=r,e.getSnapshot=n,db(e)&&hb(t)}function ub(t,e,r){return r(function(){db(e)&&hb(t)})}function db(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!dn(t,r)}catch{return!0}}function hb(t){var e=ns(t,1);e!==null&&ln(e,t,1,-1)}function sy(t){var e=_n();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:t},e.queue=t,t=t.dispatch=IT.bind(null,mt,t),[e.memoizedState,t]}function Hl(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=mt.updateQueue,e===null?(e={lastEffect:null,stores:null},mt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function fb(){return Kr().memoizedState}function Ou(t,e,r,n){var s=_n();mt.flags|=t,s.memoizedState=Hl(1|e,r,void 0,n===void 0?null:n)}function Yd(t,e,r,n){var s=Kr();n=n===void 0?null:n;var o=void 0;if(Rt!==null){var i=Rt.memoizedState;if(o=i.destroy,n!==null&&bg(n,i.deps)){s.memoizedState=Hl(e,r,o,n);return}}mt.flags|=t,s.memoizedState=Hl(1|e,r,o,n)}function ay(t,e){return Ou(8390656,8,t,e)}function Ng(t,e){return Yd(2048,8,t,e)}function mb(t,e){return Yd(4,2,t,e)}function pb(t,e){return Yd(4,4,t,e)}function gb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function vb(t,e,r){return r=r!=null?r.concat([t]):null,Yd(4,4,gb.bind(null,e,t),r)}function kg(){}function xb(t,e){var r=Kr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&bg(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function yb(t,e){var r=Kr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&bg(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function wb(t,e,r){return Za&21?(dn(r,e)||(r=N_(),mt.lanes|=r,eo|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,pr=!0),t.memoizedState=r)}function AT(t,e){var r=Ze;Ze=r!==0&&4>r?r:4,t(!0);var n=uf.transition;uf.transition={};try{t(!1),e()}finally{Ze=r,uf.transition=n}}function _b(){return Kr().memoizedState}function MT(t,e,r){var n=Js(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},bb(t))jb(e,r);else if(r=nb(t,e,r,n),r!==null){var s=or();ln(r,t,n,s),Sb(r,e,n)}}function IT(t,e,r){var n=Js(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(bb(t))jb(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var i=e.lastRenderedState,l=o(i,r);if(s.hasEagerState=!0,s.eagerState=l,dn(l,i)){var c=e.interleaved;c===null?(s.next=s,vg(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=nb(t,e,s,n),r!==null&&(s=or(),ln(r,t,n,s),Sb(r,e,n))}}function bb(t){var e=t.alternate;return t===mt||e!==null&&e===mt}function jb(t,e){yl=id=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Sb(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,ng(t,r)}}var ld={readContext:qr,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},LT={readContext:qr,useCallback:function(t,e){return _n().memoizedState=[t,e===void 0?null:e],t},useContext:qr,useEffect:ay,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ou(4194308,4,gb.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ou(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ou(4,2,t,e)},useMemo:function(t,e){var r=_n();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=_n();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=MT.bind(null,mt,t),[n.memoizedState,t]},useRef:function(t){var e=_n();return t={current:t},e.memoizedState=t},useState:sy,useDebugValue:kg,useDeferredValue:function(t){return _n().memoizedState=t},useTransition:function(){var t=sy(!1),e=t[0];return t=AT.bind(null,t[1]),_n().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=mt,s=_n();if(it){if(r===void 0)throw Error(te(407));r=r()}else{if(r=e(),$t===null)throw Error(te(349));Za&30||lb(n,e,r)}s.memoizedState=r;var o={value:r,getSnapshot:e};return s.queue=o,ay(ub.bind(null,n,o,t),[t]),n.flags|=2048,Hl(9,cb.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=_n(),e=$t.identifierPrefix;if(it){var r=Zn,n=Xn;r=(n&~(1<<32-on(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Wl++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=DT++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},FT={readContext:qr,useCallback:xb,useContext:qr,useEffect:Ng,useImperativeHandle:vb,useInsertionEffect:mb,useLayoutEffect:pb,useMemo:yb,useReducer:df,useRef:fb,useState:function(){return df(Vl)},useDebugValue:kg,useDeferredValue:function(t){var e=Kr();return wb(e,Rt.memoizedState,t)},useTransition:function(){var t=df(Vl)[0],e=Kr().memoizedState;return[t,e]},useMutableSource:ob,useSyncExternalStore:ib,useId:_b,unstable_isNewReconciler:!1},$T={readContext:qr,useCallback:xb,useContext:qr,useEffect:Ng,useImperativeHandle:vb,useInsertionEffect:mb,useLayoutEffect:pb,useMemo:yb,useReducer:hf,useRef:fb,useState:function(){return hf(Vl)},useDebugValue:kg,useDeferredValue:function(t){var e=Kr();return Rt===null?e.memoizedState=t:wb(e,Rt.memoizedState,t)},useTransition:function(){var t=hf(Vl)[0],e=Kr().memoizedState;return[t,e]},useMutableSource:ob,useSyncExternalStore:ib,useId:_b,unstable_isNewReconciler:!1};function Zr(t,e){if(t&&t.defaultProps){e=pt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Em(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:pt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Qd={isMounted:function(t){return(t=t._reactInternals)?ho(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=or(),s=Js(t),o=es(n,s);o.payload=e,r!=null&&(o.callback=r),e=Ys(t,o,s),e!==null&&(ln(e,t,s,n),Tu(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=or(),s=Js(t),o=es(n,s);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=Ys(t,o,s),e!==null&&(ln(e,t,s,n),Tu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=or(),n=Js(t),s=es(r,n);s.tag=2,e!=null&&(s.callback=e),e=Ys(t,s,n),e!==null&&(ln(e,t,n,r),Tu(e,t,n))}};function oy(t,e,r,n,s,o,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,i):e.prototype&&e.prototype.isPureReactComponent?!Ll(r,n)||!Ll(s,o):!0}function Nb(t,e,r){var n=!1,s=aa,o=e.contextType;return typeof o=="object"&&o!==null?o=qr(o):(s=yr(e)?Ja:Qt.current,n=e.contextTypes,o=(n=n!=null)?yi(t,s):aa),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qd,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function iy(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Qd.enqueueReplaceState(e,e.state,null)}function Pm(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},xg(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=qr(o):(o=yr(e)?Ja:Qt.current,s.context=yi(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Em(t,e,o,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Qd.enqueueReplaceState(s,s.state,null),ad(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ji(t,e){try{var r="",n=e;do r+=fP(n),n=n.return;while(n);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function ff(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Tm(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var UT=typeof WeakMap=="function"?WeakMap:Map;function kb(t,e,r){r=es(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){ud||(ud=!0,Um=n),Tm(t,e)},r}function Cb(t,e,r){r=es(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Tm(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Tm(t,e),typeof n!="function"&&(Qs===null?Qs=new Set([this]):Qs.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function ly(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new UT;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=e2.bind(null,t,e,r),e.then(t,t))}function cy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function uy(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=es(-1,1),e.tag=2,Ys(r,e,1))),r.lanes|=1),t)}var BT=is.ReactCurrentOwner,pr=!1;function nr(t,e,r,n){e.child=t===null?rb(e,null,r,n):_i(e,t.child,r,n)}function dy(t,e,r,n,s){r=r.render;var o=e.ref;return Jo(e,s),n=jg(t,e,r,n,o,s),r=Sg(),t!==null&&!pr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ss(t,e,s)):(it&&r&&dg(e),e.flags|=1,nr(t,e,n,s),e.child)}function hy(t,e,r,n,s){if(t===null){var o=r.type;return typeof o=="function"&&!Ag(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,Eb(t,e,o,n,s)):(t=Iu(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var i=o.memoizedProps;if(r=r.compare,r=r!==null?r:Ll,r(i,n)&&t.ref===e.ref)return ss(t,e,s)}return e.flags|=1,t=Xs(o,n),t.ref=e.ref,t.return=e,e.child=t}function Eb(t,e,r,n,s){if(t!==null){var o=t.memoizedProps;if(Ll(o,n)&&t.ref===e.ref)if(pr=!1,e.pendingProps=n=o,(t.lanes&s)!==0)t.flags&131072&&(pr=!0);else return e.lanes=t.lanes,ss(t,e,s)}return Rm(t,e,r,n,s)}function Pb(t,e,r){var n=e.pendingProps,s=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(Vo,jr),jr|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,rt(Vo,jr),jr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,rt(Vo,jr),jr|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,rt(Vo,jr),jr|=n;return nr(t,e,s,r),e.child}function Tb(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Rm(t,e,r,n,s){var o=yr(r)?Ja:Qt.current;return o=yi(e,o),Jo(e,s),r=jg(t,e,r,n,o,s),n=Sg(),t!==null&&!pr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ss(t,e,s)):(it&&n&&dg(e),e.flags|=1,nr(t,e,r,s),e.child)}function fy(t,e,r,n,s){if(yr(r)){var o=!0;ed(e)}else o=!1;if(Jo(e,s),e.stateNode===null)Du(t,e),Nb(e,r,n),Pm(e,r,n,s),n=!0;else if(t===null){var i=e.stateNode,l=e.memoizedProps;i.props=l;var c=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=qr(u):(u=yr(r)?Ja:Qt.current,u=yi(e,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==u)&&iy(e,i,n,u),Es=!1;var m=e.memoizedState;i.state=m,ad(e,n,i,s),c=e.memoizedState,l!==n||m!==c||xr.current||Es?(typeof d=="function"&&(Em(e,r,d,n),c=e.memoizedState),(l=Es||oy(e,r,l,n,m,c,u))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),i.props=n,i.state=c,i.context=u,n=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,sb(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Zr(e.type,l),i.props=u,h=e.pendingProps,m=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=qr(c):(c=yr(r)?Ja:Qt.current,c=yi(e,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==h||m!==c)&&iy(e,i,n,c),Es=!1,m=e.memoizedState,i.state=m,ad(e,n,i,s);var v=e.memoizedState;l!==h||m!==v||xr.current||Es?(typeof p=="function"&&(Em(e,r,p,n),v=e.memoizedState),(u=Es||oy(e,r,u,n,m,v,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,v,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,v,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),i.props=n,i.state=v,i.context=c,n=u):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return Om(t,e,r,n,o,s)}function Om(t,e,r,n,s,o){Tb(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return s&&Xx(e,r,!1),ss(t,e,o);n=e.stateNode,BT.current=e;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=_i(e,t.child,null,o),e.child=_i(e,null,l,o)):nr(t,e,l,o),e.memoizedState=n.state,s&&Xx(e,r,!0),e.child}function Rb(t){var e=t.stateNode;e.pendingContext?Jx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Jx(t,e.context,!1),yg(t,e.containerInfo)}function my(t,e,r,n,s){return wi(),fg(s),e.flags|=256,nr(t,e,r,n),e.child}var Dm={dehydrated:null,treeContext:null,retryLane:0};function Am(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ob(t,e,r){var n=e.pendingProps,s=dt.current,o=!1,i=(e.flags&128)!==0,l;if((l=i)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),rt(dt,s&1),t===null)return km(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,o?(n=e.mode,o=e.child,i={mode:"hidden",children:i},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Zd(i,n,0,null),t=Ga(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Am(r),e.memoizedState=Dm,t):Cg(e,i));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return zT(t,e,i,n,l,s,r);if(o){o=n.fallback,i=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Xs(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=Xs(l,o):(o=Ga(o,i,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,i=t.child.memoizedState,i=i===null?Am(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=t.childLanes&~r,e.memoizedState=Dm,n}return o=t.child,t=o.sibling,n=Xs(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Cg(t,e){return e=Zd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function su(t,e,r,n){return n!==null&&fg(n),_i(e,t.child,null,r),t=Cg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zT(t,e,r,n,s,o,i){if(r)return e.flags&256?(e.flags&=-257,n=ff(Error(te(422))),su(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,s=e.mode,n=Zd({mode:"visible",children:n.children},s,0,null),o=Ga(o,s,i,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&_i(e,t.child,null,i),e.child.memoizedState=Am(i),e.memoizedState=Dm,o);if(!(e.mode&1))return su(t,e,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,o=Error(te(419)),n=ff(o,n,void 0),su(t,e,i,n)}if(l=(i&t.childLanes)!==0,pr||l){if(n=$t,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,ns(t,s),ln(n,t,s,-1))}return Dg(),n=ff(Error(te(421))),su(t,e,i,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=t2.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,Cr=Gs(s.nextSibling),Er=e,it=!0,an=null,t!==null&&(Lr[Fr++]=Xn,Lr[Fr++]=Zn,Lr[Fr++]=Xa,Xn=t.id,Zn=t.overflow,Xa=e),e=Cg(e,n.children),e.flags|=4096,e)}function py(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Cm(t.return,e,r)}function mf(t,e,r,n,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s)}function Db(t,e,r){var n=e.pendingProps,s=n.revealOrder,o=n.tail;if(nr(t,e,n.children,r),n=dt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&py(t,r,e);else if(t.tag===19)py(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(rt(dt,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&od(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),mf(e,!1,s,r,o);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&od(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}mf(e,!0,r,null,o);break;case"together":mf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Du(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ss(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),eo|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(te(153));if(e.child!==null){for(t=e.child,r=Xs(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Xs(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function WT(t,e,r){switch(e.tag){case 3:Rb(e),wi();break;case 5:ab(e);break;case 1:yr(e.type)&&ed(e);break;case 4:yg(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;rt(nd,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(rt(dt,dt.current&1),e.flags|=128,null):r&e.child.childLanes?Ob(t,e,r):(rt(dt,dt.current&1),t=ss(t,e,r),t!==null?t.sibling:null);rt(dt,dt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Db(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),rt(dt,dt.current),n)break;return null;case 22:case 23:return e.lanes=0,Pb(t,e,r)}return ss(t,e,r)}var Ab,Mm,Mb,Ib;Ab=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Mm=function(){};Mb=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Ia(Dn.current);var o=null;switch(r){case"input":s=nm(t,s),n=nm(t,n),o=[];break;case"select":s=pt({},s,{value:void 0}),n=pt({},n,{value:void 0}),o=[];break;case"textarea":s=om(t,s),n=om(t,n),o=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Xu)}lm(r,n);var i;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Tl.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(o||(o=[]),o.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Tl.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&at("scroll",t),o||l===c||(o=[])):(o=o||[]).push(u,c))}r&&(o=o||[]).push("style",r);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};Ib=function(t,e,r,n){r!==n&&(e.flags|=4)};function tl(t,e){if(!it)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function VT(t,e,r){var n=e.pendingProps;switch(hg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(e),null;case 1:return yr(e.type)&&Zu(),qt(e),null;case 3:return n=e.stateNode,bi(),ot(xr),ot(Qt),_g(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ru(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,an!==null&&(Wm(an),an=null))),Mm(t,e),qt(e),null;case 5:wg(e);var s=Ia(zl.current);if(r=e.type,t!==null&&e.stateNode!=null)Mb(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(te(166));return qt(e),null}if(t=Ia(Dn.current),ru(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[kn]=e,n[Ul]=o,t=(e.mode&1)!==0,r){case"dialog":at("cancel",n),at("close",n);break;case"iframe":case"object":case"embed":at("load",n);break;case"video":case"audio":for(s=0;s<cl.length;s++)at(cl[s],n);break;case"source":at("error",n);break;case"img":case"image":case"link":at("error",n),at("load",n);break;case"details":at("toggle",n);break;case"input":Sx(n,o),at("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},at("invalid",n);break;case"textarea":kx(n,o),at("invalid",n)}lm(r,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?n.textContent!==l&&(o.suppressHydrationWarning!==!0&&tu(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&tu(n.textContent,l,t),s=["children",""+l]):Tl.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&at("scroll",n)}switch(r){case"input":Kc(n),Nx(n,o,!0);break;case"textarea":Kc(n),Cx(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Xu)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=u_(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[kn]=e,t[Ul]=n,Ab(t,e,!1,!1),e.stateNode=t;e:{switch(i=cm(r,n),r){case"dialog":at("cancel",t),at("close",t),s=n;break;case"iframe":case"object":case"embed":at("load",t),s=n;break;case"video":case"audio":for(s=0;s<cl.length;s++)at(cl[s],t);s=n;break;case"source":at("error",t),s=n;break;case"img":case"image":case"link":at("error",t),at("load",t),s=n;break;case"details":at("toggle",t),s=n;break;case"input":Sx(t,n),s=nm(t,n),at("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=pt({},n,{value:void 0}),at("invalid",t);break;case"textarea":kx(t,n),s=om(t,n),at("invalid",t);break;default:s=n}lm(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?f_(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&d_(t,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Rl(t,c):typeof c=="number"&&Rl(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Tl.hasOwnProperty(o)?c!=null&&o==="onScroll"&&at("scroll",t):c!=null&&Jp(t,o,c,i))}switch(r){case"input":Kc(t),Nx(t,n,!1);break;case"textarea":Kc(t),Cx(t);break;case"option":n.value!=null&&t.setAttribute("value",""+sa(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?Ko(t,!!n.multiple,o,!1):n.defaultValue!=null&&Ko(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Xu)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qt(e),null;case 6:if(t&&e.stateNode!=null)Ib(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(te(166));if(r=Ia(zl.current),Ia(Dn.current),ru(e)){if(n=e.stateNode,r=e.memoizedProps,n[kn]=e,(o=n.nodeValue!==r)&&(t=Er,t!==null))switch(t.tag){case 3:tu(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&tu(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[kn]=e,e.stateNode=n}return qt(e),null;case 13:if(ot(dt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(it&&Cr!==null&&e.mode&1&&!(e.flags&128))eb(),wi(),e.flags|=98560,o=!1;else if(o=ru(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(te(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(te(317));o[kn]=e}else wi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qt(e),o=!1}else an!==null&&(Wm(an),an=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||dt.current&1?Ot===0&&(Ot=3):Dg())),e.updateQueue!==null&&(e.flags|=4),qt(e),null);case 4:return bi(),Mm(t,e),t===null&&Fl(e.stateNode.containerInfo),qt(e),null;case 10:return gg(e.type._context),qt(e),null;case 17:return yr(e.type)&&Zu(),qt(e),null;case 19:if(ot(dt),o=e.memoizedState,o===null)return qt(e),null;if(n=(e.flags&128)!==0,i=o.rendering,i===null)if(n)tl(o,!1);else{if(Ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=od(t),i!==null){for(e.flags|=128,tl(o,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,t=i.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return rt(dt,dt.current&1|2),e.child}t=t.sibling}o.tail!==null&&wt()>Si&&(e.flags|=128,n=!0,tl(o,!1),e.lanes=4194304)}else{if(!n)if(t=od(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),tl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!it)return qt(e),null}else 2*wt()-o.renderingStartTime>Si&&r!==1073741824&&(e.flags|=128,n=!0,tl(o,!1),e.lanes=4194304);o.isBackwards?(i.sibling=e.child,e.child=i):(r=o.last,r!==null?r.sibling=i:e.child=i,o.last=i)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=wt(),e.sibling=null,r=dt.current,rt(dt,n?r&1|2:r&1),e):(qt(e),null);case 22:case 23:return Og(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?jr&1073741824&&(qt(e),e.subtreeFlags&6&&(e.flags|=8192)):qt(e),null;case 24:return null;case 25:return null}throw Error(te(156,e.tag))}function HT(t,e){switch(hg(e),e.tag){case 1:return yr(e.type)&&Zu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bi(),ot(xr),ot(Qt),_g(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wg(e),null;case 13:if(ot(dt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(te(340));wi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ot(dt),null;case 4:return bi(),null;case 10:return gg(e.type._context),null;case 22:case 23:return Og(),null;case 24:return null;default:return null}}var au=!1,Gt=!1,qT=typeof WeakSet=="function"?WeakSet:Set,fe=null;function Wo(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){yt(t,e,n)}else r.current=null}function Im(t,e,r){try{r()}catch(n){yt(t,e,n)}}var gy=!1;function KT(t,e){if(ym=Yu,t=B_(),ug(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,u=0,d=0,h=t,m=null;t:for(;;){for(var p;h!==r||s!==0&&h.nodeType!==3||(l=i+s),h!==o||n!==0&&h.nodeType!==3||(c=i+n),h.nodeType===3&&(i+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===t)break t;if(m===r&&++u===s&&(l=i),m===o&&++d===n&&(c=i),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(wm={focusedElem:t,selectionRange:r},Yu=!1,fe=e;fe!==null;)if(e=fe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,fe=t;else for(;fe!==null;){e=fe;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var g=v.memoizedProps,y=v.memoizedState,w=e.stateNode,x=w.getSnapshotBeforeUpdate(e.elementType===e.type?g:Zr(e.type,g),y);w.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(b){yt(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,fe=t;break}fe=e.return}return v=gy,gy=!1,v}function wl(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&Im(e,r,o)}s=s.next}while(s!==n)}}function Jd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Lm(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Lb(t){var e=t.alternate;e!==null&&(t.alternate=null,Lb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[kn],delete e[Ul],delete e[jm],delete e[PT],delete e[TT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Fb(t){return t.tag===5||t.tag===3||t.tag===4}function vy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Fb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Xu));else if(n!==4&&(t=t.child,t!==null))for(Fm(t,e,r),t=t.sibling;t!==null;)Fm(t,e,r),t=t.sibling}function $m(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for($m(t,e,r),t=t.sibling;t!==null;)$m(t,e,r),t=t.sibling}var Ut=null,nn=!1;function ys(t,e,r){for(r=r.child;r!==null;)$b(t,e,r),r=r.sibling}function $b(t,e,r){if(On&&typeof On.onCommitFiberUnmount=="function")try{On.onCommitFiberUnmount(Wd,r)}catch{}switch(r.tag){case 5:Gt||Wo(r,e);case 6:var n=Ut,s=nn;Ut=null,ys(t,e,r),Ut=n,nn=s,Ut!==null&&(nn?(t=Ut,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ut.removeChild(r.stateNode));break;case 18:Ut!==null&&(nn?(t=Ut,r=r.stateNode,t.nodeType===8?of(t.parentNode,r):t.nodeType===1&&of(t,r),Ml(t)):of(Ut,r.stateNode));break;case 4:n=Ut,s=nn,Ut=r.stateNode.containerInfo,nn=!0,ys(t,e,r),Ut=n,nn=s;break;case 0:case 11:case 14:case 15:if(!Gt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&Im(r,e,i),s=s.next}while(s!==n)}ys(t,e,r);break;case 1:if(!Gt&&(Wo(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){yt(r,e,l)}ys(t,e,r);break;case 21:ys(t,e,r);break;case 22:r.mode&1?(Gt=(n=Gt)||r.memoizedState!==null,ys(t,e,r),Gt=n):ys(t,e,r);break;default:ys(t,e,r)}}function xy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new qT),e.forEach(function(n){var s=r2.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Yr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var o=t,i=e,l=i;e:for(;l!==null;){switch(l.tag){case 5:Ut=l.stateNode,nn=!1;break e;case 3:Ut=l.stateNode.containerInfo,nn=!0;break e;case 4:Ut=l.stateNode.containerInfo,nn=!0;break e}l=l.return}if(Ut===null)throw Error(te(160));$b(o,i,s),Ut=null,nn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){yt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ub(e,t),e=e.sibling}function Ub(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yr(e,t),yn(t),n&4){try{wl(3,t,t.return),Jd(3,t)}catch(g){yt(t,t.return,g)}try{wl(5,t,t.return)}catch(g){yt(t,t.return,g)}}break;case 1:Yr(e,t),yn(t),n&512&&r!==null&&Wo(r,r.return);break;case 5:if(Yr(e,t),yn(t),n&512&&r!==null&&Wo(r,r.return),t.flags&32){var s=t.stateNode;try{Rl(s,"")}catch(g){yt(t,t.return,g)}}if(n&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,i=r!==null?r.memoizedProps:o,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&l_(s,o),cm(l,i);var u=cm(l,o);for(i=0;i<c.length;i+=2){var d=c[i],h=c[i+1];d==="style"?f_(s,h):d==="dangerouslySetInnerHTML"?d_(s,h):d==="children"?Rl(s,h):Jp(s,d,h,u)}switch(l){case"input":sm(s,o);break;case"textarea":c_(s,o);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Ko(s,!!o.multiple,p,!1):m!==!!o.multiple&&(o.defaultValue!=null?Ko(s,!!o.multiple,o.defaultValue,!0):Ko(s,!!o.multiple,o.multiple?[]:"",!1))}s[Ul]=o}catch(g){yt(t,t.return,g)}}break;case 6:if(Yr(e,t),yn(t),n&4){if(t.stateNode===null)throw Error(te(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(g){yt(t,t.return,g)}}break;case 3:if(Yr(e,t),yn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ml(e.containerInfo)}catch(g){yt(t,t.return,g)}break;case 4:Yr(e,t),yn(t);break;case 13:Yr(e,t),yn(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Tg=wt())),n&4&&xy(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Gt=(u=Gt)||d,Yr(e,t),Gt=u):Yr(e,t),yn(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(fe=t,d=t.child;d!==null;){for(h=fe=d;fe!==null;){switch(m=fe,p=m.child,m.tag){case 0:case 11:case 14:case 15:wl(4,m,m.return);break;case 1:Wo(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(g){yt(n,r,g)}}break;case 5:Wo(m,m.return);break;case 22:if(m.memoizedState!==null){wy(h);continue}}p!==null?(p.return=m,fe=p):wy(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,c=h.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=h_("display",i))}catch(g){yt(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){yt(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Yr(e,t),yn(t),n&4&&xy(t);break;case 21:break;default:Yr(e,t),yn(t)}}function yn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Fb(r)){var n=r;break e}r=r.return}throw Error(te(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Rl(s,""),n.flags&=-33);var o=vy(t);$m(t,o,s);break;case 3:case 4:var i=n.stateNode.containerInfo,l=vy(t);Fm(t,l,i);break;default:throw Error(te(161))}}catch(c){yt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function GT(t,e,r){fe=t,Bb(t)}function Bb(t,e,r){for(var n=(t.mode&1)!==0;fe!==null;){var s=fe,o=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||au;if(!i){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Gt;l=au;var u=Gt;if(au=i,(Gt=c)&&!u)for(fe=s;fe!==null;)i=fe,c=i.child,i.tag===22&&i.memoizedState!==null?_y(s):c!==null?(c.return=i,fe=c):_y(s);for(;o!==null;)fe=o,Bb(o),o=o.sibling;fe=s,au=l,Gt=u}yy(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,fe=o):yy(t)}}function yy(t){for(;fe!==null;){var e=fe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Gt||Jd(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Gt)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Zr(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&ny(e,o,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}ny(e,i,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Ml(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}Gt||e.flags&512&&Lm(e)}catch(m){yt(e,e.return,m)}}if(e===t){fe=null;break}if(r=e.sibling,r!==null){r.return=e.return,fe=r;break}fe=e.return}}function wy(t){for(;fe!==null;){var e=fe;if(e===t){fe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,fe=r;break}fe=e.return}}function _y(t){for(;fe!==null;){var e=fe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Jd(4,e)}catch(c){yt(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){yt(e,s,c)}}var o=e.return;try{Lm(e)}catch(c){yt(e,o,c)}break;case 5:var i=e.return;try{Lm(e)}catch(c){yt(e,i,c)}}}catch(c){yt(e,e.return,c)}if(e===t){fe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,fe=l;break}fe=e.return}}var YT=Math.ceil,cd=is.ReactCurrentDispatcher,Eg=is.ReactCurrentOwner,Br=is.ReactCurrentBatchConfig,Ge=0,$t=null,Nt=null,zt=0,jr=0,Vo=fa(0),Ot=0,ql=null,eo=0,Xd=0,Pg=0,_l=null,mr=null,Tg=0,Si=1/0,Kn=null,ud=!1,Um=null,Qs=null,ou=!1,Bs=null,dd=0,bl=0,Bm=null,Au=-1,Mu=0;function or(){return Ge&6?wt():Au!==-1?Au:Au=wt()}function Js(t){return t.mode&1?Ge&2&&zt!==0?zt&-zt:OT.transition!==null?(Mu===0&&(Mu=N_()),Mu):(t=Ze,t!==0||(t=window.event,t=t===void 0?16:O_(t.type)),t):1}function ln(t,e,r,n){if(50<bl)throw bl=0,Bm=null,Error(te(185));hc(t,r,n),(!(Ge&2)||t!==$t)&&(t===$t&&(!(Ge&2)&&(Xd|=r),Ot===4&&Ts(t,zt)),wr(t,n),r===1&&Ge===0&&!(e.mode&1)&&(Si=wt()+500,Gd&&ma()))}function wr(t,e){var r=t.callbackNode;OP(t,e);var n=Gu(t,t===$t?zt:0);if(n===0)r!==null&&Tx(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Tx(r),e===1)t.tag===0?RT(by.bind(null,t)):J_(by.bind(null,t)),CT(function(){!(Ge&6)&&ma()}),r=null;else{switch(k_(n)){case 1:r=rg;break;case 4:r=j_;break;case 16:r=Ku;break;case 536870912:r=S_;break;default:r=Ku}r=Yb(r,zb.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function zb(t,e){if(Au=-1,Mu=0,Ge&6)throw Error(te(327));var r=t.callbackNode;if(Xo()&&t.callbackNode!==r)return null;var n=Gu(t,t===$t?zt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=hd(t,n);else{e=n;var s=Ge;Ge|=2;var o=Vb();($t!==t||zt!==e)&&(Kn=null,Si=wt()+500,Ka(t,e));do try{XT();break}catch(l){Wb(t,l)}while(!0);pg(),cd.current=o,Ge=s,Nt!==null?e=0:($t=null,zt=0,e=Ot)}if(e!==0){if(e===2&&(s=mm(t),s!==0&&(n=s,e=zm(t,s))),e===1)throw r=ql,Ka(t,0),Ts(t,n),wr(t,wt()),r;if(e===6)Ts(t,n);else{if(s=t.current.alternate,!(n&30)&&!QT(s)&&(e=hd(t,n),e===2&&(o=mm(t),o!==0&&(n=o,e=zm(t,o))),e===1))throw r=ql,Ka(t,0),Ts(t,n),wr(t,wt()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(te(345));case 2:Ea(t,mr,Kn);break;case 3:if(Ts(t,n),(n&130023424)===n&&(e=Tg+500-wt(),10<e)){if(Gu(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){or(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=bm(Ea.bind(null,t,mr,Kn),e);break}Ea(t,mr,Kn);break;case 4:if(Ts(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var i=31-on(n);o=1<<i,i=e[i],i>s&&(s=i),n&=~o}if(n=s,n=wt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*YT(n/1960))-n,10<n){t.timeoutHandle=bm(Ea.bind(null,t,mr,Kn),n);break}Ea(t,mr,Kn);break;case 5:Ea(t,mr,Kn);break;default:throw Error(te(329))}}}return wr(t,wt()),t.callbackNode===r?zb.bind(null,t):null}function zm(t,e){var r=_l;return t.current.memoizedState.isDehydrated&&(Ka(t,e).flags|=256),t=hd(t,e),t!==2&&(e=mr,mr=r,e!==null&&Wm(e)),t}function Wm(t){mr===null?mr=t:mr.push.apply(mr,t)}function QT(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],o=s.getSnapshot;s=s.value;try{if(!dn(o(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ts(t,e){for(e&=~Pg,e&=~Xd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-on(e),n=1<<r;t[r]=-1,e&=~n}}function by(t){if(Ge&6)throw Error(te(327));Xo();var e=Gu(t,0);if(!(e&1))return wr(t,wt()),null;var r=hd(t,e);if(t.tag!==0&&r===2){var n=mm(t);n!==0&&(e=n,r=zm(t,n))}if(r===1)throw r=ql,Ka(t,0),Ts(t,e),wr(t,wt()),r;if(r===6)throw Error(te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ea(t,mr,Kn),wr(t,wt()),null}function Rg(t,e){var r=Ge;Ge|=1;try{return t(e)}finally{Ge=r,Ge===0&&(Si=wt()+500,Gd&&ma())}}function to(t){Bs!==null&&Bs.tag===0&&!(Ge&6)&&Xo();var e=Ge;Ge|=1;var r=Br.transition,n=Ze;try{if(Br.transition=null,Ze=1,t)return t()}finally{Ze=n,Br.transition=r,Ge=e,!(Ge&6)&&ma()}}function Og(){jr=Vo.current,ot(Vo)}function Ka(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,kT(r)),Nt!==null)for(r=Nt.return;r!==null;){var n=r;switch(hg(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Zu();break;case 3:bi(),ot(xr),ot(Qt),_g();break;case 5:wg(n);break;case 4:bi();break;case 13:ot(dt);break;case 19:ot(dt);break;case 10:gg(n.type._context);break;case 22:case 23:Og()}r=r.return}if($t=t,Nt=t=Xs(t.current,null),zt=jr=e,Ot=0,ql=null,Pg=Xd=eo=0,mr=_l=null,Ma!==null){for(e=0;e<Ma.length;e++)if(r=Ma[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,o=r.pending;if(o!==null){var i=o.next;o.next=s,n.next=i}r.pending=n}Ma=null}return t}function Wb(t,e){do{var r=Nt;try{if(pg(),Ru.current=ld,id){for(var n=mt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}id=!1}if(Za=0,Lt=Rt=mt=null,yl=!1,Wl=0,Eg.current=null,r===null||r.return===null){Ot=1,ql=e,Nt=null;break}e:{var o=t,i=r.return,l=r,c=e;if(e=zt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=cy(i);if(p!==null){p.flags&=-257,uy(p,i,l,o,e),p.mode&1&&ly(o,u,e),e=p,c=u;var v=e.updateQueue;if(v===null){var g=new Set;g.add(c),e.updateQueue=g}else v.add(c);break e}else{if(!(e&1)){ly(o,u,e),Dg();break e}c=Error(te(426))}}else if(it&&l.mode&1){var y=cy(i);if(y!==null){!(y.flags&65536)&&(y.flags|=256),uy(y,i,l,o,e),fg(ji(c,l));break e}}o=c=ji(c,l),Ot!==4&&(Ot=2),_l===null?_l=[o]:_l.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var w=kb(o,c,e);ry(o,w);break e;case 1:l=c;var x=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Qs===null||!Qs.has(_)))){o.flags|=65536,e&=-e,o.lanes|=e;var b=Cb(o,l,e);ry(o,b);break e}}o=o.return}while(o!==null)}qb(r)}catch(j){e=j,Nt===r&&r!==null&&(Nt=r=r.return);continue}break}while(!0)}function Vb(){var t=cd.current;return cd.current=ld,t===null?ld:t}function Dg(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),$t===null||!(eo&268435455)&&!(Xd&268435455)||Ts($t,zt)}function hd(t,e){var r=Ge;Ge|=2;var n=Vb();($t!==t||zt!==e)&&(Kn=null,Ka(t,e));do try{JT();break}catch(s){Wb(t,s)}while(!0);if(pg(),Ge=r,cd.current=n,Nt!==null)throw Error(te(261));return $t=null,zt=0,Ot}function JT(){for(;Nt!==null;)Hb(Nt)}function XT(){for(;Nt!==null&&!jP();)Hb(Nt)}function Hb(t){var e=Gb(t.alternate,t,jr);t.memoizedProps=t.pendingProps,e===null?qb(t):Nt=e,Eg.current=null}function qb(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=HT(r,e),r!==null){r.flags&=32767,Nt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ot=6,Nt=null;return}}else if(r=VT(r,e,jr),r!==null){Nt=r;return}if(e=e.sibling,e!==null){Nt=e;return}Nt=e=t}while(e!==null);Ot===0&&(Ot=5)}function Ea(t,e,r){var n=Ze,s=Br.transition;try{Br.transition=null,Ze=1,ZT(t,e,r,n)}finally{Br.transition=s,Ze=n}return null}function ZT(t,e,r,n){do Xo();while(Bs!==null);if(Ge&6)throw Error(te(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(te(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(DP(t,o),t===$t&&(Nt=$t=null,zt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ou||(ou=!0,Yb(Ku,function(){return Xo(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Br.transition,Br.transition=null;var i=Ze;Ze=1;var l=Ge;Ge|=4,Eg.current=null,KT(t,r),Ub(r,t),yT(wm),Yu=!!ym,wm=ym=null,t.current=r,GT(r),SP(),Ge=l,Ze=i,Br.transition=o}else t.current=r;if(ou&&(ou=!1,Bs=t,dd=s),o=t.pendingLanes,o===0&&(Qs=null),CP(r.stateNode),wr(t,wt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(ud)throw ud=!1,t=Um,Um=null,t;return dd&1&&t.tag!==0&&Xo(),o=t.pendingLanes,o&1?t===Bm?bl++:(bl=0,Bm=t):bl=0,ma(),null}function Xo(){if(Bs!==null){var t=k_(dd),e=Br.transition,r=Ze;try{if(Br.transition=null,Ze=16>t?16:t,Bs===null)var n=!1;else{if(t=Bs,Bs=null,dd=0,Ge&6)throw Error(te(331));var s=Ge;for(Ge|=4,fe=t.current;fe!==null;){var o=fe,i=o.child;if(fe.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(fe=u;fe!==null;){var d=fe;switch(d.tag){case 0:case 11:case 15:wl(8,d,o)}var h=d.child;if(h!==null)h.return=d,fe=h;else for(;fe!==null;){d=fe;var m=d.sibling,p=d.return;if(Lb(d),d===u){fe=null;break}if(m!==null){m.return=p,fe=m;break}fe=p}}}var v=o.alternate;if(v!==null){var g=v.child;if(g!==null){v.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}fe=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,fe=i;else e:for(;fe!==null;){if(o=fe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:wl(9,o,o.return)}var w=o.sibling;if(w!==null){w.return=o.return,fe=w;break e}fe=o.return}}var x=t.current;for(fe=x;fe!==null;){i=fe;var _=i.child;if(i.subtreeFlags&2064&&_!==null)_.return=i,fe=_;else e:for(i=x;fe!==null;){if(l=fe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Jd(9,l)}}catch(j){yt(l,l.return,j)}if(l===i){fe=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,fe=b;break e}fe=l.return}}if(Ge=s,ma(),On&&typeof On.onPostCommitFiberRoot=="function")try{On.onPostCommitFiberRoot(Wd,t)}catch{}n=!0}return n}finally{Ze=r,Br.transition=e}}return!1}function jy(t,e,r){e=ji(r,e),e=kb(t,e,1),t=Ys(t,e,1),e=or(),t!==null&&(hc(t,1,e),wr(t,e))}function yt(t,e,r){if(t.tag===3)jy(t,t,r);else for(;e!==null;){if(e.tag===3){jy(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Qs===null||!Qs.has(n))){t=ji(r,t),t=Cb(e,t,1),e=Ys(e,t,1),t=or(),e!==null&&(hc(e,1,t),wr(e,t));break}}e=e.return}}function e2(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=or(),t.pingedLanes|=t.suspendedLanes&r,$t===t&&(zt&r)===r&&(Ot===4||Ot===3&&(zt&130023424)===zt&&500>wt()-Tg?Ka(t,0):Pg|=r),wr(t,e)}function Kb(t,e){e===0&&(t.mode&1?(e=Qc,Qc<<=1,!(Qc&130023424)&&(Qc=4194304)):e=1);var r=or();t=ns(t,e),t!==null&&(hc(t,e,r),wr(t,r))}function t2(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Kb(t,r)}function r2(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(te(314))}n!==null&&n.delete(e),Kb(t,r)}var Gb;Gb=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||xr.current)pr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return pr=!1,WT(t,e,r);pr=!!(t.flags&131072)}else pr=!1,it&&e.flags&1048576&&X_(e,rd,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Du(t,e),t=e.pendingProps;var s=yi(e,Qt.current);Jo(e,r),s=jg(null,e,n,t,s,r);var o=Sg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yr(n)?(o=!0,ed(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,xg(e),s.updater=Qd,e.stateNode=s,s._reactInternals=e,Pm(e,n,t,r),e=Om(null,e,n,!0,o,r)):(e.tag=0,it&&o&&dg(e),nr(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Du(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=s2(n),t=Zr(n,t),s){case 0:e=Rm(null,e,n,t,r);break e;case 1:e=fy(null,e,n,t,r);break e;case 11:e=dy(null,e,n,t,r);break e;case 14:e=hy(null,e,n,Zr(n.type,t),r);break e}throw Error(te(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Zr(n,s),Rm(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Zr(n,s),fy(t,e,n,s,r);case 3:e:{if(Rb(e),t===null)throw Error(te(387));n=e.pendingProps,o=e.memoizedState,s=o.element,sb(t,e),ad(e,n,null,r);var i=e.memoizedState;if(n=i.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=ji(Error(te(423)),e),e=my(t,e,n,r,s);break e}else if(n!==s){s=ji(Error(te(424)),e),e=my(t,e,n,r,s);break e}else for(Cr=Gs(e.stateNode.containerInfo.firstChild),Er=e,it=!0,an=null,r=rb(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(wi(),n===s){e=ss(t,e,r);break e}nr(t,e,n,r)}e=e.child}return e;case 5:return ab(e),t===null&&km(e),n=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,i=s.children,_m(n,s)?i=null:o!==null&&_m(n,o)&&(e.flags|=32),Tb(t,e),nr(t,e,i,r),e.child;case 6:return t===null&&km(e),null;case 13:return Ob(t,e,r);case 4:return yg(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=_i(e,null,n,r):nr(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Zr(n,s),dy(t,e,n,s,r);case 7:return nr(t,e,e.pendingProps,r),e.child;case 8:return nr(t,e,e.pendingProps.children,r),e.child;case 12:return nr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,o=e.memoizedProps,i=s.value,rt(nd,n._currentValue),n._currentValue=i,o!==null)if(dn(o.value,i)){if(o.children===s.children&&!xr.current){e=ss(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=es(-1,r&-r),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Cm(o.return,r,e),l.lanes|=r;break}c=c.next}}else if(o.tag===10)i=o.type===e.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(te(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Cm(i,r,e),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===e){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}nr(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Jo(e,r),s=qr(s),n=n(s),e.flags|=1,nr(t,e,n,r),e.child;case 14:return n=e.type,s=Zr(n,e.pendingProps),s=Zr(n.type,s),hy(t,e,n,s,r);case 15:return Eb(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Zr(n,s),Du(t,e),e.tag=1,yr(n)?(t=!0,ed(e)):t=!1,Jo(e,r),Nb(e,n,s),Pm(e,n,s,r),Om(null,e,n,!0,t,r);case 19:return Db(t,e,r);case 22:return Pb(t,e,r)}throw Error(te(156,e.tag))};function Yb(t,e){return b_(t,e)}function n2(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(t,e,r,n){return new n2(t,e,r,n)}function Ag(t){return t=t.prototype,!(!t||!t.isReactComponent)}function s2(t){if(typeof t=="function")return Ag(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zp)return 11;if(t===eg)return 14}return 2}function Xs(t,e){var r=t.alternate;return r===null?(r=Ur(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Iu(t,e,r,n,s,o){var i=2;if(n=t,typeof t=="function")Ag(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Ao:return Ga(r.children,s,o,e);case Xp:i=8,s|=8;break;case Zf:return t=Ur(12,r,e,s|2),t.elementType=Zf,t.lanes=o,t;case em:return t=Ur(13,r,e,s),t.elementType=em,t.lanes=o,t;case tm:return t=Ur(19,r,e,s),t.elementType=tm,t.lanes=o,t;case a_:return Zd(r,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case n_:i=10;break e;case s_:i=9;break e;case Zp:i=11;break e;case eg:i=14;break e;case Cs:i=16,n=null;break e}throw Error(te(130,t==null?t:typeof t,""))}return e=Ur(i,r,e,s),e.elementType=t,e.type=n,e.lanes=o,e}function Ga(t,e,r,n){return t=Ur(7,t,n,e),t.lanes=r,t}function Zd(t,e,r,n){return t=Ur(22,t,n,e),t.elementType=a_,t.lanes=r,t.stateNode={isHidden:!1},t}function pf(t,e,r){return t=Ur(6,t,null,e),t.lanes=r,t}function gf(t,e,r){return e=Ur(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function a2(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yh(0),this.expirationTimes=Yh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yh(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Mg(t,e,r,n,s,o,i,l,c){return t=new a2(t,e,r,l,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Ur(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},xg(o),t}function o2(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Do,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Qb(t){if(!t)return aa;t=t._reactInternals;e:{if(ho(t)!==t||t.tag!==1)throw Error(te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(te(171))}if(t.tag===1){var r=t.type;if(yr(r))return Q_(t,r,e)}return e}function Jb(t,e,r,n,s,o,i,l,c){return t=Mg(r,n,!0,t,s,o,i,l,c),t.context=Qb(null),r=t.current,n=or(),s=Js(r),o=es(n,s),o.callback=e??null,Ys(r,o,s),t.current.lanes=s,hc(t,s,n),wr(t,n),t}function eh(t,e,r,n){var s=e.current,o=or(),i=Js(s);return r=Qb(r),e.context===null?e.context=r:e.pendingContext=r,e=es(o,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Ys(s,e,i),t!==null&&(ln(t,s,i,o),Tu(t,s,i)),i}function fd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Sy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Ig(t,e){Sy(t,e),(t=t.alternate)&&Sy(t,e)}function i2(){return null}var Xb=typeof reportError=="function"?reportError:function(t){console.error(t)};function Lg(t){this._internalRoot=t}th.prototype.render=Lg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(te(409));eh(t,e,null,null)};th.prototype.unmount=Lg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;to(function(){eh(null,t,null,null)}),e[rs]=null}};function th(t){this._internalRoot=t}th.prototype.unstable_scheduleHydration=function(t){if(t){var e=P_();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ps.length&&e!==0&&e<Ps[r].priority;r++);Ps.splice(r,0,t),r===0&&R_(t)}};function Fg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function rh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ny(){}function l2(t,e,r,n,s){if(s){if(typeof n=="function"){var o=n;n=function(){var u=fd(i);o.call(u)}}var i=Jb(e,n,t,0,null,!1,!1,"",Ny);return t._reactRootContainer=i,t[rs]=i.current,Fl(t.nodeType===8?t.parentNode:t),to(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=fd(c);l.call(u)}}var c=Mg(t,0,!1,null,null,!1,!1,"",Ny);return t._reactRootContainer=c,t[rs]=c.current,Fl(t.nodeType===8?t.parentNode:t),to(function(){eh(e,c,r,n)}),c}function nh(t,e,r,n,s){var o=r._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var l=s;s=function(){var c=fd(i);l.call(c)}}eh(e,i,t,s)}else i=l2(r,e,t,s,n);return fd(i)}C_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=ll(e.pendingLanes);r!==0&&(ng(e,r|1),wr(e,wt()),!(Ge&6)&&(Si=wt()+500,ma()))}break;case 13:to(function(){var n=ns(t,1);if(n!==null){var s=or();ln(n,t,1,s)}}),Ig(t,1)}};sg=function(t){if(t.tag===13){var e=ns(t,134217728);if(e!==null){var r=or();ln(e,t,134217728,r)}Ig(t,134217728)}};E_=function(t){if(t.tag===13){var e=Js(t),r=ns(t,e);if(r!==null){var n=or();ln(r,t,e,n)}Ig(t,e)}};P_=function(){return Ze};T_=function(t,e){var r=Ze;try{return Ze=t,e()}finally{Ze=r}};dm=function(t,e,r){switch(e){case"input":if(sm(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Kd(n);if(!s)throw Error(te(90));i_(n),sm(n,s)}}}break;case"textarea":c_(t,r);break;case"select":e=r.value,e!=null&&Ko(t,!!r.multiple,e,!1)}};g_=Rg;v_=to;var c2={usingClientEntryPoint:!1,Events:[mc,Fo,Kd,m_,p_,Rg]},rl={findFiberByHostInstance:Aa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},u2={bundleType:rl.bundleType,version:rl.version,rendererPackageName:rl.rendererPackageName,rendererConfig:rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:is.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=w_(t),t===null?null:t.stateNode},findFiberByHostInstance:rl.findFiberByHostInstance||i2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{Wd=iu.inject(u2),On=iu}catch{}}Dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c2;Dr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fg(e))throw Error(te(200));return o2(t,e,null,r)};Dr.createRoot=function(t,e){if(!Fg(t))throw Error(te(299));var r=!1,n="",s=Xb;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Mg(t,1,!1,null,null,r,!1,n,s),t[rs]=e.current,Fl(t.nodeType===8?t.parentNode:t),new Lg(e)};Dr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(te(188)):(t=Object.keys(t).join(","),Error(te(268,t)));return t=w_(e),t=t===null?null:t.stateNode,t};Dr.flushSync=function(t){return to(t)};Dr.hydrate=function(t,e,r){if(!rh(e))throw Error(te(200));return nh(null,t,e,!0,r)};Dr.hydrateRoot=function(t,e,r){if(!Fg(t))throw Error(te(405));var n=r!=null&&r.hydratedSources||null,s=!1,o="",i=Xb;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=Jb(e,null,t,1,r??null,s,!1,o,i),t[rs]=e.current,Fl(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new th(e)};Dr.render=function(t,e,r){if(!rh(e))throw Error(te(200));return nh(null,t,e,!1,r)};Dr.unmountComponentAtNode=function(t){if(!rh(t))throw Error(te(40));return t._reactRootContainer?(to(function(){nh(null,null,t,!1,function(){t._reactRootContainer=null,t[rs]=null})}),!0):!1};Dr.unstable_batchedUpdates=Rg;Dr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!rh(r))throw Error(te(200));if(t==null||t._reactInternals===void 0)throw Error(te(38));return nh(t,e,r,!1,n)};Dr.version="18.3.1-next-f1338f8080-20240426";function Zb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zb)}catch(t){console.error(t)}}Zb(),Z0.exports=Dr;var Li=Z0.exports;const d2=U0(Li);var ej,ky=Li;ej=ky.createRoot,ky.hydrateRoot;var gc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ro=typeof window>"u"||"Deno"in globalThis;function fr(){}function h2(t,e){return typeof t=="function"?t(e):t}function Vm(t){return typeof t=="number"&&t>=0&&t!==1/0}function tj(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Zs(t,e){return typeof t=="function"?t(e):t}function Ir(t,e){return typeof t=="function"?t(e):t}function Cy(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:o,queryKey:i,stale:l}=t;if(i){if(n){if(e.queryHash!==$g(i,e.options))return!1}else if(!Gl(e.queryKey,i))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||o&&!o(e))}function Ey(t,e){const{exact:r,status:n,predicate:s,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(r){if(Kl(e.options.mutationKey)!==Kl(o))return!1}else if(!Gl(e.options.mutationKey,o))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function $g(t,e){return((e==null?void 0:e.queryKeyHashFn)||Kl)(t)}function Kl(t){return JSON.stringify(t,(e,r)=>qm(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Gl(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>Gl(t[r],e[r])):!1}function rj(t,e){if(t===e)return t;const r=Py(t)&&Py(e);if(r||qm(t)&&qm(e)){const n=r?t:Object.keys(t),s=n.length,o=r?e:Object.keys(e),i=o.length,l=r?[]:{},c=new Set(n);let u=0;for(let d=0;d<i;d++){const h=r?d:o[d];(!r&&c.has(h)||r)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,u++):(l[h]=rj(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&u++)}return s===i&&u===s?t:l}return e}function Hm(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function Py(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function qm(t){if(!Ty(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!Ty(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Ty(t){return Object.prototype.toString.call(t)==="[object Object]"}function f2(t){return new Promise(e=>{setTimeout(e,t)})}function Km(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?rj(t,e):e}function m2(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function p2(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var Ug=Symbol();function nj(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Ug?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function g2(t,e){return typeof t=="function"?t(...e):!!t}var Fa,Os,oi,T0,v2=(T0=class extends gc{constructor(){super();Ce(this,Fa);Ce(this,Os);Ce(this,oi);me(this,oi,e=>{if(!ro&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){D(this,Os)||this.setEventListener(D(this,oi))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,Os))==null||e.call(this),me(this,Os,void 0))}setEventListener(e){var r;me(this,oi,e),(r=D(this,Os))==null||r.call(this),me(this,Os,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){D(this,Fa)!==e&&(me(this,Fa,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof D(this,Fa)=="boolean"?D(this,Fa):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Fa=new WeakMap,Os=new WeakMap,oi=new WeakMap,T0),Bg=new v2,ii,Ds,li,R0,x2=(R0=class extends gc{constructor(){super();Ce(this,ii,!0);Ce(this,Ds);Ce(this,li);me(this,li,e=>{if(!ro&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){D(this,Ds)||this.setEventListener(D(this,li))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,Ds))==null||e.call(this),me(this,Ds,void 0))}setEventListener(e){var r;me(this,li,e),(r=D(this,Ds))==null||r.call(this),me(this,Ds,e(this.setOnline.bind(this)))}setOnline(e){D(this,ii)!==e&&(me(this,ii,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return D(this,ii)}},ii=new WeakMap,Ds=new WeakMap,li=new WeakMap,R0),md=new x2;function Gm(){let t,e;const r=new Promise((s,o)=>{t=s,e=o});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),t(s)},r.reject=s=>{n({status:"rejected",reason:s}),e(s)},r}function y2(t){return Math.min(1e3*2**t,3e4)}function sj(t){return(t??"online")==="online"?md.isOnline():!0}var aj=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function vf(t){return t instanceof aj}function oj(t){let e=!1,r=0,n=!1,s;const o=Gm(),i=g=>{var y;n||(m(new aj(g)),(y=t.abort)==null||y.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>Bg.isFocused()&&(t.networkMode==="always"||md.isOnline())&&t.canRun(),d=()=>sj(t.networkMode)&&t.canRun(),h=g=>{var y;n||(n=!0,(y=t.onSuccess)==null||y.call(t,g),s==null||s(),o.resolve(g))},m=g=>{var y;n||(n=!0,(y=t.onError)==null||y.call(t,g),s==null||s(),o.reject(g))},p=()=>new Promise(g=>{var y;s=w=>{(n||u())&&g(w)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;s=void 0,n||(g=t.onContinue)==null||g.call(t)}),v=()=>{if(n)return;let g;const y=r===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(h).catch(w=>{var E;if(n)return;const x=t.retry??(ro?0:3),_=t.retryDelay??y2,b=typeof _=="function"?_(r,w):_,j=x===!0||typeof x=="number"&&r<x||typeof x=="function"&&x(r,w);if(e||!j){m(w);return}r++,(E=t.onFail)==null||E.call(t,r,w),f2(b).then(()=>u()?void 0:p()).then(()=>{e?m(w):v()})})};return{promise:o,cancel:i,continue:()=>(s==null||s(),o),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?v():p().then(v),o)}}var w2=t=>setTimeout(t,0);function _2(){let t=[],e=0,r=l=>{l()},n=l=>{l()},s=w2;const o=l=>{e?t.push(l):s(()=>{r(l)})},i=()=>{const l=t;t=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||i()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var Bt=_2(),$a,O0,ij=(O0=class{constructor(){Ce(this,$a)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Vm(this.gcTime)&&me(this,$a,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ro?1/0:5*60*1e3))}clearGcTimeout(){D(this,$a)&&(clearTimeout(D(this,$a)),me(this,$a,void 0))}},$a=new WeakMap,O0),ci,Ua,Mr,Ba,Kt,ic,za,tn,qn,D0,b2=(D0=class extends ij{constructor(e){super();Ce(this,tn);Ce(this,ci);Ce(this,Ua);Ce(this,Mr);Ce(this,Ba);Ce(this,Kt);Ce(this,ic);Ce(this,za);me(this,za,!1),me(this,ic,e.defaultOptions),this.setOptions(e.options),this.observers=[],me(this,Ba,e.client),me(this,Mr,D(this,Ba).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,me(this,ci,j2(this.options)),this.state=e.state??D(this,ci),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=D(this,Kt))==null?void 0:e.promise}setOptions(e){this.options={...D(this,ic),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&D(this,Mr).remove(this)}setData(e,r){const n=Km(this.state.data,e,this.options);return Ue(this,tn,qn).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){Ue(this,tn,qn).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,s;const r=(n=D(this,Kt))==null?void 0:n.promise;return(s=D(this,Kt))==null||s.cancel(e),r?r.then(fr).catch(fr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(D(this,ci))}isActive(){return this.observers.some(e=>Ir(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ug||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Zs(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!tj(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=D(this,Kt))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=D(this,Kt))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),D(this,Mr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(D(this,Kt)&&(D(this,za)?D(this,Kt).cancel({revert:!0}):D(this,Kt).cancelRetry()),this.scheduleGc()),D(this,Mr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ue(this,tn,qn).call(this,{type:"invalidate"})}fetch(e,r){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(D(this,Kt))return D(this,Kt).continueRetry(),D(this,Kt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const m=this.observers.find(p=>p.options.queryFn);m&&this.setOptions(m.options)}const n=new AbortController,s=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(me(this,za,!0),n.signal)})},o=()=>{const m=nj(this.options,r),v=(()=>{const g={client:D(this,Ba),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return me(this,za,!1),this.options.persister?this.options.persister(m,v,this):m(v)},l=(()=>{const m={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:D(this,Ba),state:this.state,fetchFn:o};return s(m),m})();(u=this.options.behavior)==null||u.onFetch(l,this),me(this,Ua,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&Ue(this,tn,qn).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=m=>{var p,v,g,y;vf(m)&&m.silent||Ue(this,tn,qn).call(this,{type:"error",error:m}),vf(m)||((v=(p=D(this,Mr).config).onError)==null||v.call(p,m,this),(y=(g=D(this,Mr).config).onSettled)==null||y.call(g,this.state.data,m,this)),this.scheduleGc()};return me(this,Kt,oj({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:m=>{var p,v,g,y;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(w){c(w);return}(v=(p=D(this,Mr).config).onSuccess)==null||v.call(p,m,this),(y=(g=D(this,Mr).config).onSettled)==null||y.call(g,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,p)=>{Ue(this,tn,qn).call(this,{type:"failed",failureCount:m,error:p})},onPause:()=>{Ue(this,tn,qn).call(this,{type:"pause"})},onContinue:()=>{Ue(this,tn,qn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),D(this,Kt).start()}},ci=new WeakMap,Ua=new WeakMap,Mr=new WeakMap,Ba=new WeakMap,Kt=new WeakMap,ic=new WeakMap,za=new WeakMap,tn=new WeakSet,qn=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...lj(n.data,this.options),fetchMeta:e.meta??null};case"success":return me(this,Ua,void 0),{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return vf(s)&&s.revert&&D(this,Ua)?{...D(this,Ua),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),Bt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),D(this,Mr).notify({query:this,type:"updated",action:e})})},D0);function lj(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:sj(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function j2(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var bn,A0,S2=(A0=class extends gc{constructor(e={}){super();Ce(this,bn);this.config=e,me(this,bn,new Map)}build(e,r,n){const s=r.queryKey,o=r.queryHash??$g(s,r);let i=this.get(o);return i||(i=new b2({client:e,queryKey:s,queryHash:o,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(i)),i}add(e){D(this,bn).has(e.queryHash)||(D(this,bn).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=D(this,bn).get(e.queryHash);r&&(e.destroy(),r===e&&D(this,bn).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Bt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return D(this,bn).get(e)}getAll(){return[...D(this,bn).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>Cy(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>Cy(e,n)):r}notify(e){Bt.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){Bt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Bt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},bn=new WeakMap,A0),jn,tr,Wa,Sn,Ns,M0,N2=(M0=class extends ij{constructor(e){super();Ce(this,Sn);Ce(this,jn);Ce(this,tr);Ce(this,Wa);this.mutationId=e.mutationId,me(this,tr,e.mutationCache),me(this,jn,[]),this.state=e.state||k2(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){D(this,jn).includes(e)||(D(this,jn).push(e),this.clearGcTimeout(),D(this,tr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){me(this,jn,D(this,jn).filter(r=>r!==e)),this.scheduleGc(),D(this,tr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){D(this,jn).length||(this.state.status==="pending"?this.scheduleGc():D(this,tr).remove(this))}continue(){var e;return((e=D(this,Wa))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,i,l,c,u,d,h,m,p,v,g,y,w,x,_,b,j,E,k,P;const r=()=>{Ue(this,Sn,Ns).call(this,{type:"continue"})};me(this,Wa,oj({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(T,C)=>{Ue(this,Sn,Ns).call(this,{type:"failed",failureCount:T,error:C})},onPause:()=>{Ue(this,Sn,Ns).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>D(this,tr).canRun(this)}));const n=this.state.status==="pending",s=!D(this,Wa).canStart();try{if(n)r();else{Ue(this,Sn,Ns).call(this,{type:"pending",variables:e,isPaused:s}),await((i=(o=D(this,tr).config).onMutate)==null?void 0:i.call(o,e,this));const C=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e));C!==this.state.context&&Ue(this,Sn,Ns).call(this,{type:"pending",context:C,variables:e,isPaused:s})}const T=await D(this,Wa).start();return await((d=(u=D(this,tr).config).onSuccess)==null?void 0:d.call(u,T,e,this.state.context,this)),await((m=(h=this.options).onSuccess)==null?void 0:m.call(h,T,e,this.state.context)),await((v=(p=D(this,tr).config).onSettled)==null?void 0:v.call(p,T,null,this.state.variables,this.state.context,this)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,T,null,e,this.state.context)),Ue(this,Sn,Ns).call(this,{type:"success",data:T}),T}catch(T){try{throw await((x=(w=D(this,tr).config).onError)==null?void 0:x.call(w,T,e,this.state.context,this)),await((b=(_=this.options).onError)==null?void 0:b.call(_,T,e,this.state.context)),await((E=(j=D(this,tr).config).onSettled)==null?void 0:E.call(j,void 0,T,this.state.variables,this.state.context,this)),await((P=(k=this.options).onSettled)==null?void 0:P.call(k,void 0,T,e,this.state.context)),T}finally{Ue(this,Sn,Ns).call(this,{type:"error",error:T})}}finally{D(this,tr).runNext(this)}}},jn=new WeakMap,tr=new WeakMap,Wa=new WeakMap,Sn=new WeakSet,Ns=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Bt.batch(()=>{D(this,jn).forEach(n=>{n.onMutationUpdate(e)}),D(this,tr).notify({mutation:this,type:"updated",action:e})})},M0);function k2(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Qn,rn,lc,I0,C2=(I0=class extends gc{constructor(e={}){super();Ce(this,Qn);Ce(this,rn);Ce(this,lc);this.config=e,me(this,Qn,new Set),me(this,rn,new Map),me(this,lc,0)}build(e,r,n){const s=new N2({mutationCache:this,mutationId:++Vc(this,lc)._,options:e.defaultMutationOptions(r),state:n});return this.add(s),s}add(e){D(this,Qn).add(e);const r=lu(e);if(typeof r=="string"){const n=D(this,rn).get(r);n?n.push(e):D(this,rn).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(D(this,Qn).delete(e)){const r=lu(e);if(typeof r=="string"){const n=D(this,rn).get(r);if(n)if(n.length>1){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}else n[0]===e&&D(this,rn).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=lu(e);if(typeof r=="string"){const n=D(this,rn).get(r),s=n==null?void 0:n.find(o=>o.state.status==="pending");return!s||s===e}else return!0}runNext(e){var n;const r=lu(e);if(typeof r=="string"){const s=(n=D(this,rn).get(r))==null?void 0:n.find(o=>o!==e&&o.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Bt.batch(()=>{D(this,Qn).forEach(e=>{this.notify({type:"removed",mutation:e})}),D(this,Qn).clear(),D(this,rn).clear()})}getAll(){return Array.from(D(this,Qn))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>Ey(r,n))}findAll(e={}){return this.getAll().filter(r=>Ey(e,r))}notify(e){Bt.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return Bt.batch(()=>Promise.all(e.map(r=>r.continue().catch(fr))))}},Qn=new WeakMap,rn=new WeakMap,lc=new WeakMap,I0);function lu(t){var e;return(e=t.options.scope)==null?void 0:e.id}function Ry(t){return{onFetch:(e,r)=>{var d,h,m,p,v;const n=e.options,s=(m=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,o=((p=e.state.data)==null?void 0:p.pages)||[],i=((v=e.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const y=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},w=nj(e.options,e.fetchOptions),x=async(_,b,j)=>{if(g)return Promise.reject();if(b==null&&_.pages.length)return Promise.resolve(_);const k=(()=>{const L={client:e.client,queryKey:e.queryKey,pageParam:b,direction:j?"backward":"forward",meta:e.options.meta};return y(L),L})(),P=await w(k),{maxPages:T}=e.options,C=j?p2:m2;return{pages:C(_.pages,P,T),pageParams:C(_.pageParams,b,T)}};if(s&&o.length){const _=s==="backward",b=_?E2:Oy,j={pages:o,pageParams:i},E=b(n,j);l=await x(j,E,_)}else{const _=t??o.length;do{const b=c===0?i[0]??n.initialPageParam:Oy(n,l);if(c>0&&b==null)break;l=await x(l,b),c++}while(c<_)}return l};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function Oy(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function E2(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var xt,As,Ms,ui,di,Is,hi,fi,L0,P2=(L0=class{constructor(t={}){Ce(this,xt);Ce(this,As);Ce(this,Ms);Ce(this,ui);Ce(this,di);Ce(this,Is);Ce(this,hi);Ce(this,fi);me(this,xt,t.queryCache||new S2),me(this,As,t.mutationCache||new C2),me(this,Ms,t.defaultOptions||{}),me(this,ui,new Map),me(this,di,new Map),me(this,Is,0)}mount(){Vc(this,Is)._++,D(this,Is)===1&&(me(this,hi,Bg.subscribe(async t=>{t&&(await this.resumePausedMutations(),D(this,xt).onFocus())})),me(this,fi,md.subscribe(async t=>{t&&(await this.resumePausedMutations(),D(this,xt).onOnline())})))}unmount(){var t,e;Vc(this,Is)._--,D(this,Is)===0&&((t=D(this,hi))==null||t.call(this),me(this,hi,void 0),(e=D(this,fi))==null||e.call(this),me(this,fi,void 0))}isFetching(t){return D(this,xt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return D(this,As).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=D(this,xt).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=D(this,xt).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(Zs(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return D(this,xt).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),s=D(this,xt).get(n.queryHash),o=s==null?void 0:s.state.data,i=h2(e,o);if(i!==void 0)return D(this,xt).build(this,n).setData(i,{...r,manual:!0})}setQueriesData(t,e,r){return Bt.batch(()=>D(this,xt).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=D(this,xt).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=D(this,xt);Bt.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=D(this,xt);return Bt.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=Bt.batch(()=>D(this,xt).findAll(t).map(s=>s.cancel(r)));return Promise.all(n).then(fr).catch(fr)}invalidateQueries(t,e={}){return Bt.batch(()=>(D(this,xt).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=Bt.batch(()=>D(this,xt).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,r);return r.throwOnError||(o=o.catch(fr)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(fr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=D(this,xt).build(this,e);return r.isStaleByTime(Zs(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(fr).catch(fr)}fetchInfiniteQuery(t){return t.behavior=Ry(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(fr).catch(fr)}ensureInfiniteQueryData(t){return t.behavior=Ry(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return md.isOnline()?D(this,As).resumePausedMutations():Promise.resolve()}getQueryCache(){return D(this,xt)}getMutationCache(){return D(this,As)}getDefaultOptions(){return D(this,Ms)}setDefaultOptions(t){me(this,Ms,t)}setQueryDefaults(t,e){D(this,ui).set(Kl(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...D(this,ui).values()],r={};return e.forEach(n=>{Gl(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){D(this,di).set(Kl(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...D(this,di).values()],r={};return e.forEach(n=>{Gl(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...D(this,Ms).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=$g(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Ug&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...D(this,Ms).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){D(this,xt).clear(),D(this,As).clear()}},xt=new WeakMap,As=new WeakMap,Ms=new WeakMap,ui=new WeakMap,di=new WeakMap,Is=new WeakMap,hi=new WeakMap,fi=new WeakMap,L0),dr,Be,cc,rr,Va,mi,Ls,Fs,uc,pi,gi,Ha,qa,$s,vi,Je,ul,Ym,Qm,Jm,Xm,Zm,ep,tp,cj,F0,T2=(F0=class extends gc{constructor(e,r){super();Ce(this,Je);Ce(this,dr);Ce(this,Be);Ce(this,cc);Ce(this,rr);Ce(this,Va);Ce(this,mi);Ce(this,Ls);Ce(this,Fs);Ce(this,uc);Ce(this,pi);Ce(this,gi);Ce(this,Ha);Ce(this,qa);Ce(this,$s);Ce(this,vi,new Set);this.options=r,me(this,dr,e),me(this,Fs,null),me(this,Ls,Gm()),this.options.experimental_prefetchInRender||D(this,Ls).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(D(this,Be).addObserver(this),Dy(D(this,Be),this.options)?Ue(this,Je,ul).call(this):this.updateResult(),Ue(this,Je,Xm).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return rp(D(this,Be),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return rp(D(this,Be),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ue(this,Je,Zm).call(this),Ue(this,Je,ep).call(this),D(this,Be).removeObserver(this)}setOptions(e){const r=this.options,n=D(this,Be);if(this.options=D(this,dr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ir(this.options.enabled,D(this,Be))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ue(this,Je,tp).call(this),D(this,Be).setOptions(this.options),r._defaulted&&!Hm(this.options,r)&&D(this,dr).getQueryCache().notify({type:"observerOptionsUpdated",query:D(this,Be),observer:this});const s=this.hasListeners();s&&Ay(D(this,Be),n,this.options,r)&&Ue(this,Je,ul).call(this),this.updateResult(),s&&(D(this,Be)!==n||Ir(this.options.enabled,D(this,Be))!==Ir(r.enabled,D(this,Be))||Zs(this.options.staleTime,D(this,Be))!==Zs(r.staleTime,D(this,Be)))&&Ue(this,Je,Ym).call(this);const o=Ue(this,Je,Qm).call(this);s&&(D(this,Be)!==n||Ir(this.options.enabled,D(this,Be))!==Ir(r.enabled,D(this,Be))||o!==D(this,$s))&&Ue(this,Je,Jm).call(this,o)}getOptimisticResult(e){const r=D(this,dr).getQueryCache().build(D(this,dr),e),n=this.createResult(r,e);return O2(this,n)&&(me(this,rr,n),me(this,mi,this.options),me(this,Va,D(this,Be).state)),n}getCurrentResult(){return D(this,rr)}trackResult(e,r){return new Proxy(e,{get:(n,s)=>(this.trackProp(s),r==null||r(s),Reflect.get(n,s))})}trackProp(e){D(this,vi).add(e)}getCurrentQuery(){return D(this,Be)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=D(this,dr).defaultQueryOptions(e),n=D(this,dr).getQueryCache().build(D(this,dr),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(e){return Ue(this,Je,ul).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),D(this,rr)))}createResult(e,r){var T;const n=D(this,Be),s=this.options,o=D(this,rr),i=D(this,Va),l=D(this,mi),u=e!==n?e.state:D(this,cc),{state:d}=e;let h={...d},m=!1,p;if(r._optimisticResults){const C=this.hasListeners(),L=!C&&Dy(e,r),O=C&&Ay(e,n,r,s);(L||O)&&(h={...h,...lj(d.data,e.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:v,errorUpdatedAt:g,status:y}=h;p=h.data;let w=!1;if(r.placeholderData!==void 0&&p===void 0&&y==="pending"){let C;o!=null&&o.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(C=o.data,w=!0):C=typeof r.placeholderData=="function"?r.placeholderData((T=D(this,gi))==null?void 0:T.state.data,D(this,gi)):r.placeholderData,C!==void 0&&(y="success",p=Km(o==null?void 0:o.data,C,r),m=!0)}if(r.select&&p!==void 0&&!w)if(o&&p===(i==null?void 0:i.data)&&r.select===D(this,uc))p=D(this,pi);else try{me(this,uc,r.select),p=r.select(p),p=Km(o==null?void 0:o.data,p,r),me(this,pi,p),me(this,Fs,null)}catch(C){me(this,Fs,C)}D(this,Fs)&&(v=D(this,Fs),p=D(this,pi),g=Date.now(),y="error");const x=h.fetchStatus==="fetching",_=y==="pending",b=y==="error",j=_&&x,E=p!==void 0,P={status:y,fetchStatus:h.fetchStatus,isPending:_,isSuccess:y==="success",isError:b,isInitialLoading:j,isLoading:j,data:p,dataUpdatedAt:h.dataUpdatedAt,error:v,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:x,isRefetching:x&&!_,isLoadingError:b&&!E,isPaused:h.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:b&&E,isStale:zg(e,r),refetch:this.refetch,promise:D(this,Ls),isEnabled:Ir(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const C=J=>{P.status==="error"?J.reject(P.error):P.data!==void 0&&J.resolve(P.data)},L=()=>{const J=me(this,Ls,P.promise=Gm());C(J)},O=D(this,Ls);switch(O.status){case"pending":e.queryHash===n.queryHash&&C(O);break;case"fulfilled":(P.status==="error"||P.data!==O.value)&&L();break;case"rejected":(P.status!=="error"||P.error!==O.reason)&&L();break}}return P}updateResult(){const e=D(this,rr),r=this.createResult(D(this,Be),this.options);if(me(this,Va,D(this,Be).state),me(this,mi,this.options),D(this,Va).data!==void 0&&me(this,gi,D(this,Be)),Hm(r,e))return;me(this,rr,r);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!D(this,vi).size)return!0;const i=new Set(o??D(this,vi));return this.options.throwOnError&&i.add("error"),Object.keys(D(this,rr)).some(l=>{const c=l;return D(this,rr)[c]!==e[c]&&i.has(c)})};Ue(this,Je,cj).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ue(this,Je,Xm).call(this)}},dr=new WeakMap,Be=new WeakMap,cc=new WeakMap,rr=new WeakMap,Va=new WeakMap,mi=new WeakMap,Ls=new WeakMap,Fs=new WeakMap,uc=new WeakMap,pi=new WeakMap,gi=new WeakMap,Ha=new WeakMap,qa=new WeakMap,$s=new WeakMap,vi=new WeakMap,Je=new WeakSet,ul=function(e){Ue(this,Je,tp).call(this);let r=D(this,Be).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(fr)),r},Ym=function(){Ue(this,Je,Zm).call(this);const e=Zs(this.options.staleTime,D(this,Be));if(ro||D(this,rr).isStale||!Vm(e))return;const n=tj(D(this,rr).dataUpdatedAt,e)+1;me(this,Ha,setTimeout(()=>{D(this,rr).isStale||this.updateResult()},n))},Qm=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(D(this,Be)):this.options.refetchInterval)??!1},Jm=function(e){Ue(this,Je,ep).call(this),me(this,$s,e),!(ro||Ir(this.options.enabled,D(this,Be))===!1||!Vm(D(this,$s))||D(this,$s)===0)&&me(this,qa,setInterval(()=>{(this.options.refetchIntervalInBackground||Bg.isFocused())&&Ue(this,Je,ul).call(this)},D(this,$s)))},Xm=function(){Ue(this,Je,Ym).call(this),Ue(this,Je,Jm).call(this,Ue(this,Je,Qm).call(this))},Zm=function(){D(this,Ha)&&(clearTimeout(D(this,Ha)),me(this,Ha,void 0))},ep=function(){D(this,qa)&&(clearInterval(D(this,qa)),me(this,qa,void 0))},tp=function(){const e=D(this,dr).getQueryCache().build(D(this,dr),this.options);if(e===D(this,Be))return;const r=D(this,Be);me(this,Be,e),me(this,cc,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},cj=function(e){Bt.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(D(this,rr))}),D(this,dr).getQueryCache().notify({query:D(this,Be),type:"observerResultsUpdated"})})},F0);function R2(t,e){return Ir(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Dy(t,e){return R2(t,e)||t.state.data!==void 0&&rp(t,e,e.refetchOnMount)}function rp(t,e,r){if(Ir(e.enabled,t)!==!1&&Zs(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&zg(t,e)}return!1}function Ay(t,e,r,n){return(t!==e||Ir(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&zg(t,r)}function zg(t,e){return Ir(e.enabled,t)!==!1&&t.isStaleByTime(Zs(e.staleTime,t))}function O2(t,e){return!Hm(t.getCurrentResult(),e)}var uj=f.createContext(void 0),D2=t=>{const e=f.useContext(uj);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},A2=({client:t,children:e})=>(f.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(uj.Provider,{value:t,children:e})),dj=f.createContext(!1),M2=()=>f.useContext(dj);dj.Provider;function I2(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var L2=f.createContext(I2()),F2=()=>f.useContext(L2),$2=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},U2=t=>{f.useEffect(()=>{t.clearReset()},[t])},B2=({result:t,errorResetBoundary:e,throwOnError:r,query:n,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(s&&t.data===void 0||g2(r,[t.error,n])),z2=t=>{if(t.suspense){const e=n=>n==="static"?n:Math.max(n??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...n)=>e(r(...n)):e(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},W2=(t,e)=>t.isLoading&&t.isFetching&&!e,V2=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,My=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function H2(t,e,r){var h,m,p,v,g;const n=M2(),s=F2(),o=D2(),i=o.defaultQueryOptions(t);(m=(h=o.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||m.call(h,i),i._optimisticResults=n?"isRestoring":"optimistic",z2(i),$2(i,s),U2(s);const l=!o.getQueryCache().get(i.queryHash),[c]=f.useState(()=>new e(o,i)),u=c.getOptimisticResult(i),d=!n&&t.subscribed!==!1;if(f.useSyncExternalStore(f.useCallback(y=>{const w=d?c.subscribe(Bt.batchCalls(y)):fr;return c.updateResult(),w},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),f.useEffect(()=>{c.setOptions(i)},[i,c]),V2(i,u))throw My(i,c,s);if(B2({result:u,errorResetBoundary:s,throwOnError:i.throwOnError,query:o.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw u.error;if((v=(p=o.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||v.call(p,i,u),i.experimental_prefetchInRender&&!ro&&W2(u,n)){const y=l?My(i,c,s):(g=o.getQueryCache().get(i.queryHash))==null?void 0:g.promise;y==null||y.catch(fr).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?u:c.trackResult(u)}function sh(t,e){return H2(t,T2)}const Te=t=>typeof t=="string",nl=()=>{let t,e;const r=new Promise((n,s)=>{t=n,e=s});return r.resolve=t,r.reject=e,r},Iy=t=>t==null?"":""+t,q2=(t,e,r)=>{t.forEach(n=>{e[n]&&(r[n]=e[n])})},K2=/###/g,Ly=t=>t&&t.indexOf("###")>-1?t.replace(K2,"."):t,Fy=t=>!t||Te(t),jl=(t,e,r)=>{const n=Te(e)?e.split("."):e;let s=0;for(;s<n.length-1;){if(Fy(t))return{};const o=Ly(n[s]);!t[o]&&r&&(t[o]=new r),Object.prototype.hasOwnProperty.call(t,o)?t=t[o]:t={},++s}return Fy(t)?{}:{obj:t,k:Ly(n[s])}},$y=(t,e,r)=>{const{obj:n,k:s}=jl(t,e,Object);if(n!==void 0||e.length===1){n[s]=r;return}let o=e[e.length-1],i=e.slice(0,e.length-1),l=jl(t,i,Object);for(;l.obj===void 0&&i.length;)o=`${i[i.length-1]}.${o}`,i=i.slice(0,i.length-1),l=jl(t,i,Object),l!=null&&l.obj&&typeof l.obj[`${l.k}.${o}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${o}`]=r},G2=(t,e,r,n)=>{const{obj:s,k:o}=jl(t,e,Object);s[o]=s[o]||[],s[o].push(r)},pd=(t,e)=>{const{obj:r,k:n}=jl(t,e);if(r&&Object.prototype.hasOwnProperty.call(r,n))return r[n]},Y2=(t,e,r)=>{const n=pd(t,r);return n!==void 0?n:pd(e,r)},hj=(t,e,r)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in t?Te(t[n])||t[n]instanceof String||Te(e[n])||e[n]instanceof String?r&&(t[n]=e[n]):hj(t[n],e[n],r):t[n]=e[n]);return t},wo=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Q2={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const J2=t=>Te(t)?t.replace(/[&<>"'\/]/g,e=>Q2[e]):t;class X2{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const r=this.regExpMap.get(e);if(r!==void 0)return r;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const Z2=[" ",",","?","!",";"],eR=new X2(20),tR=(t,e,r)=>{e=e||"",r=r||"";const n=Z2.filter(i=>e.indexOf(i)<0&&r.indexOf(i)<0);if(n.length===0)return!0;const s=eR.getRegExp(`(${n.map(i=>i==="?"?"\\?":i).join("|")})`);let o=!s.test(t);if(!o){const i=t.indexOf(r);i>0&&!s.test(t.substring(0,i))&&(o=!0)}return o},np=(t,e,r=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const n=e.split(r);let s=t;for(let o=0;o<n.length;){if(!s||typeof s!="object")return;let i,l="";for(let c=o;c<n.length;++c)if(c!==o&&(l+=r),l+=n[c],i=s[l],i!==void 0){if(["string","number","boolean"].indexOf(typeof i)>-1&&c<n.length-1)continue;o+=c-o+1;break}s=i}return s},Yl=t=>t==null?void 0:t.replace("_","-"),rR={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var r,n;(n=(r=console==null?void 0:console[t])==null?void 0:r.apply)==null||n.call(r,console,e)}};class gd{constructor(e,r={}){this.init(e,r)}init(e,r={}){this.prefix=r.prefix||"i18next:",this.logger=e||rR,this.options=r,this.debug=r.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,r,n,s){return s&&!this.debug?null:(Te(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[r](e))}create(e){return new gd(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new gd(this.logger,e)}}var Pn=new gd;class ah{constructor(){this.observers={}}on(e,r){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const s=this.observers[n].get(r)||0;this.observers[n].set(r,s+1)}),this}off(e,r){if(this.observers[e]){if(!r){delete this.observers[e];return}this.observers[e].delete(r)}}emit(e,...r){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([s,o])=>{for(let i=0;i<o;i++)s(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([s,o])=>{for(let i=0;i<o;i++)s.apply(s,[e,...r])})}}class Uy extends ah{constructor(e,r={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const r=this.options.ns.indexOf(e);r>-1&&this.options.ns.splice(r,1)}getResource(e,r,n,s={}){var u,d;const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,i=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,r],n&&(Array.isArray(n)?l.push(...n):Te(n)&&o?l.push(...n.split(o)):l.push(n)));const c=pd(this.data,l);return!c&&!r&&!n&&e.indexOf(".")>-1&&(e=l[0],r=l[1],n=l.slice(2).join(".")),c||!i||!Te(n)?c:np((d=(u=this.data)==null?void 0:u[e])==null?void 0:d[r],n,o)}addResource(e,r,n,s,o={silent:!1}){const i=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let l=[e,r];n&&(l=l.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(l=e.split("."),s=r,r=l[1]),this.addNamespaces(r),$y(this.data,l,s),o.silent||this.emit("added",e,r,n,s)}addResources(e,r,n,s={silent:!1}){for(const o in n)(Te(n[o])||Array.isArray(n[o]))&&this.addResource(e,r,o,n[o],{silent:!0});s.silent||this.emit("added",e,r,n)}addResourceBundle(e,r,n,s,o,i={silent:!1,skipCopy:!1}){let l=[e,r];e.indexOf(".")>-1&&(l=e.split("."),s=n,n=r,r=l[1]),this.addNamespaces(r);let c=pd(this.data,l)||{};i.skipCopy||(n=JSON.parse(JSON.stringify(n))),s?hj(c,n,o):c={...c,...n},$y(this.data,l,c),i.silent||this.emit("added",e,r,n)}removeResourceBundle(e,r){this.hasResourceBundle(e,r)&&delete this.data[e][r],this.removeNamespaces(r),this.emit("removed",e,r)}hasResourceBundle(e,r){return this.getResource(e,r)!==void 0}getResourceBundle(e,r){return r||(r=this.options.defaultNS),this.getResource(e,r)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const r=this.getDataByLanguage(e);return!!(r&&Object.keys(r)||[]).find(s=>r[s]&&Object.keys(r[s]).length>0)}toJSON(){return this.data}}var fj={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,r,n,s){return t.forEach(o=>{var i;e=((i=this.processors[o])==null?void 0:i.process(e,r,n,s))??e}),e}};const mj=Symbol("i18next/PATH_KEY");function nR(){const t=[],e=Object.create(null);let r;return e.get=(n,s)=>{var o;return(o=r==null?void 0:r.revoke)==null||o.call(r),s===mj?t:(t.push(s),r=Proxy.revocable(n,e),r.proxy)},Proxy.revocable(Object.create(null),e).proxy}function sp(t,e){const{[mj]:r}=t(nR());return r.join((e==null?void 0:e.keySeparator)??".")}const By={},xf=t=>!Te(t)&&typeof t!="boolean"&&typeof t!="number";class vd extends ah{constructor(e,r={}){super(),q2(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Pn.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,r={interpolation:{}}){const n={...r};if(e==null)return!1;const s=this.resolve(e,n);if((s==null?void 0:s.res)===void 0)return!1;const o=xf(s.res);return!(n.returnObjects===!1&&o)}extractFromKey(e,r){let n=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const s=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let o=r.ns||this.options.defaultNS||[];const i=n&&e.indexOf(n)>-1,l=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!tR(e,n,s);if(i&&!l){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:Te(o)?[o]:o};const u=e.split(n);(n!==s||n===s&&this.options.ns.indexOf(u[0])>-1)&&(o=u.shift()),e=u.join(s)}return{key:e,namespaces:Te(o)?[o]:o}}translate(e,r,n){let s=typeof r=="object"?{...r}:r;if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),e==null)return"";typeof e=="function"&&(e=sp(e,{...this.options,...s})),Array.isArray(e)||(e=[String(e)]);const o=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:l,namespaces:c}=this.extractFromKey(e[e.length-1],s),u=c[c.length-1];let d=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");const h=s.lng||this.language,m=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((h==null?void 0:h.toLowerCase())==="cimode")return m?o?{res:`${u}${d}${l}`,usedKey:l,exactUsedKey:l,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(s)}:`${u}${d}${l}`:o?{res:l,usedKey:l,exactUsedKey:l,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(s)}:l;const p=this.resolve(e,s);let v=p==null?void 0:p.res;const g=(p==null?void 0:p.usedKey)||l,y=(p==null?void 0:p.exactUsedKey)||l,w=["[object Number]","[object Function]","[object RegExp]"],x=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,_=!this.i18nFormat||this.i18nFormat.handleAsObject,b=s.count!==void 0&&!Te(s.count),j=vd.hasDefaultValue(s),E=b?this.pluralResolver.getSuffix(h,s.count,s):"",k=s.ordinal&&b?this.pluralResolver.getSuffix(h,s.count,{ordinal:!1}):"",P=b&&!s.ordinal&&s.count===0,T=P&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${E}`]||s[`defaultValue${k}`]||s.defaultValue;let C=v;_&&!v&&j&&(C=T);const L=xf(C),O=Object.prototype.toString.apply(C);if(_&&C&&L&&w.indexOf(O)<0&&!(Te(x)&&Array.isArray(C))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const J=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,C,{...s,ns:c}):`key '${l} (${this.language})' returned an object instead of string.`;return o?(p.res=J,p.usedParams=this.getUsedParamsDetails(s),p):J}if(i){const J=Array.isArray(C),W=J?[]:{},U=J?y:g;for(const R in C)if(Object.prototype.hasOwnProperty.call(C,R)){const I=`${U}${i}${R}`;j&&!v?W[R]=this.translate(I,{...s,defaultValue:xf(T)?T[R]:void 0,joinArrays:!1,ns:c}):W[R]=this.translate(I,{...s,joinArrays:!1,ns:c}),W[R]===I&&(W[R]=C[R])}v=W}}else if(_&&Te(x)&&Array.isArray(v))v=v.join(x),v&&(v=this.extendTranslation(v,e,s,n));else{let J=!1,W=!1;!this.isValidLookup(v)&&j&&(J=!0,v=T),this.isValidLookup(v)||(W=!0,v=l);const R=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&W?void 0:v,I=j&&T!==v&&this.options.updateMissing;if(W||J||I){if(this.logger.log(I?"updateKey":"missingKey",h,u,l,I?T:v),i){const A=this.resolve(l,{...s,keySeparator:!1});A&&A.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let N=[];const F=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&F&&F[0])for(let A=0;A<F.length;A++)N.push(F[A]);else this.options.saveMissingTo==="all"?N=this.languageUtils.toResolveHierarchy(s.lng||this.language):N.push(s.lng||this.language);const q=(A,Q,ye)=>{var Ie;const xe=j&&ye!==v?ye:R;this.options.missingKeyHandler?this.options.missingKeyHandler(A,u,Q,xe,I,s):(Ie=this.backendConnector)!=null&&Ie.saveMissing&&this.backendConnector.saveMissing(A,u,Q,xe,I,s),this.emit("missingKey",A,u,Q,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&b?N.forEach(A=>{const Q=this.pluralResolver.getSuffixes(A,s);P&&s[`defaultValue${this.options.pluralSeparator}zero`]&&Q.indexOf(`${this.options.pluralSeparator}zero`)<0&&Q.push(`${this.options.pluralSeparator}zero`),Q.forEach(ye=>{q([A],l+ye,s[`defaultValue${ye}`]||T)})}):q(N,l,T))}v=this.extendTranslation(v,e,s,p,n),W&&v===l&&this.options.appendNamespaceToMissingKey&&(v=`${u}${d}${l}`),(W||J)&&this.options.parseMissingKeyHandler&&(v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${d}${l}`:l,J?v:void 0,s))}return o?(p.res=v,p.usedParams=this.getUsedParamsDetails(s),p):v}extendTranslation(e,r,n,s,o){var c,u;if((c=this.i18nFormat)!=null&&c.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const d=Te(e)&&(((u=n==null?void 0:n.interpolation)==null?void 0:u.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(d){const p=e.match(this.interpolator.nestingRegexp);h=p&&p.length}let m=n.replace&&!Te(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(m={...this.options.interpolation.defaultVariables,...m}),e=this.interpolator.interpolate(e,m,n.lng||this.language||s.usedLng,n),d){const p=e.match(this.interpolator.nestingRegexp),v=p&&p.length;h<v&&(n.nest=!1)}!n.lng&&s&&s.res&&(n.lng=this.language||s.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,(...p)=>(o==null?void 0:o[0])===p[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${r[0]}`),null):this.translate(...p,r),n)),n.interpolation&&this.interpolator.reset()}const i=n.postProcess||this.options.postProcess,l=Te(i)?[i]:i;return e!=null&&(l!=null&&l.length)&&n.applyPostProcessor!==!1&&(e=fj.handle(l,e,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e,r={}){let n,s,o,i,l;return Te(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(n))return;const u=this.extractFromKey(c,r),d=u.key;s=d;let h=u.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const m=r.count!==void 0&&!Te(r.count),p=m&&!r.ordinal&&r.count===0,v=r.context!==void 0&&(Te(r.context)||typeof r.context=="number")&&r.context!=="",g=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);h.forEach(y=>{var w,x;this.isValidLookup(n)||(l=y,!By[`${g[0]}-${y}`]&&((w=this.utils)!=null&&w.hasLoadedNamespace)&&!((x=this.utils)!=null&&x.hasLoadedNamespace(l))&&(By[`${g[0]}-${y}`]=!0,this.logger.warn(`key "${s}" for languages "${g.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach(_=>{var E;if(this.isValidLookup(n))return;i=_;const b=[d];if((E=this.i18nFormat)!=null&&E.addLookupKeys)this.i18nFormat.addLookupKeys(b,d,_,y,r);else{let k;m&&(k=this.pluralResolver.getSuffix(_,r.count,r));const P=`${this.options.pluralSeparator}zero`,T=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&(r.ordinal&&k.indexOf(T)===0&&b.push(d+k.replace(T,this.options.pluralSeparator)),b.push(d+k),p&&b.push(d+P)),v){const C=`${d}${this.options.contextSeparator||"_"}${r.context}`;b.push(C),m&&(r.ordinal&&k.indexOf(T)===0&&b.push(C+k.replace(T,this.options.pluralSeparator)),b.push(C+k),p&&b.push(C+P))}}let j;for(;j=b.pop();)this.isValidLookup(n)||(o=j,n=this.getResource(_,y,j,r))}))})}),{res:n,usedKey:s,exactUsedKey:o,usedLng:i,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,r,n,s={}){var o;return(o=this.i18nFormat)!=null&&o.getResource?this.i18nFormat.getResource(e,r,n,s):this.resourceStore.getResource(e,r,n,s)}getUsedParamsDetails(e={}){const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Te(e.replace);let s=n?e.replace:e;if(n&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!n){s={...s};for(const o of r)delete s[o]}return s}static hasDefaultValue(e){const r="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&r===n.substring(0,r.length)&&e[n]!==void 0)return!0;return!1}}class zy{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Pn.create("languageUtils")}getScriptPartFromCode(e){if(e=Yl(e),!e||e.indexOf("-")<0)return null;const r=e.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(e){if(e=Yl(e),!e||e.indexOf("-")<0)return e;const r=e.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(e){if(Te(e)&&e.indexOf("-")>-1){let r;try{r=Intl.getCanonicalLocales(e)[0]}catch{}return r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let r;return e.forEach(n=>{if(r)return;const s=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(s))&&(r=s)}),!r&&this.options.supportedLngs&&e.forEach(n=>{if(r)return;const s=this.getScriptPartFromCode(n);if(this.isSupportedCode(s))return r=s;const o=this.getLanguagePartFromCode(n);if(this.isSupportedCode(o))return r=o;r=this.options.supportedLngs.find(i=>{if(i===o)return i;if(!(i.indexOf("-")<0&&o.indexOf("-")<0)&&(i.indexOf("-")>0&&o.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===o||i.indexOf(o)===0&&o.length>1))return i})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(e,r){if(!e)return[];if(typeof e=="function"&&(e=e(r)),Te(e)&&(e=[e]),Array.isArray(e))return e;if(!r)return e.default||[];let n=e[r];return n||(n=e[this.getScriptPartFromCode(r)]),n||(n=e[this.formatLanguageCode(r)]),n||(n=e[this.getLanguagePartFromCode(r)]),n||(n=e.default),n||[]}toResolveHierarchy(e,r){const n=this.getFallbackCodes((r===!1?[]:r)||this.options.fallbackLng||[],e),s=[],o=i=>{i&&(this.isSupportedCode(i)?s.push(i):this.logger.warn(`rejecting language code not found in supportedLngs: ${i}`))};return Te(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):Te(e)&&o(this.formatLanguageCode(e)),n.forEach(i=>{s.indexOf(i)<0&&o(this.formatLanguageCode(i))}),s}}const Wy={zero:0,one:1,two:2,few:3,many:4,other:5},Vy={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class sR{constructor(e,r={}){this.languageUtils=e,this.options=r,this.logger=Pn.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,r){this.rules[e]=r}clearCache(){this.pluralRulesCache={}}getRule(e,r={}){const n=Yl(e==="dev"?"en":e),s=r.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:n,type:s});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let i;try{i=new Intl.PluralRules(n,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Vy;if(!e.match(/-|_/))return Vy;const c=this.languageUtils.getLanguagePartFromCode(e);i=this.getRule(c,r)}return this.pluralRulesCache[o]=i,i}needsPlural(e,r={}){let n=this.getRule(e,r);return n||(n=this.getRule("dev",r)),(n==null?void 0:n.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,r,n={}){return this.getSuffixes(e,n).map(s=>`${r}${s}`)}getSuffixes(e,r={}){let n=this.getRule(e,r);return n||(n=this.getRule("dev",r)),n?n.resolvedOptions().pluralCategories.sort((s,o)=>Wy[s]-Wy[o]).map(s=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,r,n={}){const s=this.getRule(e,n);return s?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s.select(r)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",r,n))}}const Hy=(t,e,r,n=".",s=!0)=>{let o=Y2(t,e,r);return!o&&s&&Te(r)&&(o=np(t,r,n),o===void 0&&(o=np(e,r,n))),o},yf=t=>t.replace(/\$/g,"$$$$");class aR{constructor(e={}){var r;this.logger=Pn.create("interpolator"),this.options=e,this.format=((r=e==null?void 0:e.interpolation)==null?void 0:r.format)||(n=>n),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:r,escapeValue:n,useRawValueToEscape:s,prefix:o,prefixEscaped:i,suffix:l,suffixEscaped:c,formatSeparator:u,unescapeSuffix:d,unescapePrefix:h,nestingPrefix:m,nestingPrefixEscaped:p,nestingSuffix:v,nestingSuffixEscaped:g,nestingOptionsSeparator:y,maxReplaces:w,alwaysFormat:x}=e.interpolation;this.escape=r!==void 0?r:J2,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=o?wo(o):i||"{{",this.suffix=l?wo(l):c||"}}",this.formatSeparator=u||",",this.unescapePrefix=d?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=m?wo(m):p||wo("$t("),this.nestingSuffix=v?wo(v):g||wo(")"),this.nestingOptionsSeparator=y||",",this.maxReplaces=w||1e3,this.alwaysFormat=x!==void 0?x:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(r,n)=>(r==null?void 0:r.source)===n?(r.lastIndex=0,r):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,r,n,s){var p;let o,i,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=v=>{if(v.indexOf(this.formatSeparator)<0){const x=Hy(r,c,v,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(x,void 0,n,{...s,...r,interpolationkey:v}):x}const g=v.split(this.formatSeparator),y=g.shift().trim(),w=g.join(this.formatSeparator).trim();return this.format(Hy(r,c,y,this.options.keySeparator,this.options.ignoreJSONStructure),w,n,{...s,...r,interpolationkey:y})};this.resetRegExp();const d=(s==null?void 0:s.missingInterpolationHandler)||this.options.missingInterpolationHandler,h=((p=s==null?void 0:s.interpolation)==null?void 0:p.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:v=>yf(v)},{regex:this.regexp,safeValue:v=>this.escapeValue?yf(this.escape(v)):yf(v)}].forEach(v=>{for(l=0;o=v.regex.exec(e);){const g=o[1].trim();if(i=u(g),i===void 0)if(typeof d=="function"){const w=d(e,o,s);i=Te(w)?w:""}else if(s&&Object.prototype.hasOwnProperty.call(s,g))i="";else if(h){i=o[0];continue}else this.logger.warn(`missed to pass in variable ${g} for interpolating ${e}`),i="";else!Te(i)&&!this.useRawValueToEscape&&(i=Iy(i));const y=v.safeValue(i);if(e=e.replace(o[0],y),h?(v.regex.lastIndex+=i.length,v.regex.lastIndex-=o[0].length):v.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,r,n={}){let s,o,i;const l=(c,u)=>{const d=this.nestingOptionsSeparator;if(c.indexOf(d)<0)return c;const h=c.split(new RegExp(`${d}[ ]*{`));let m=`{${h[1]}`;c=h[0],m=this.interpolate(m,i);const p=m.match(/'/g),v=m.match(/"/g);(((p==null?void 0:p.length)??0)%2===0&&!v||v.length%2!==0)&&(m=m.replace(/'/g,'"'));try{i=JSON.parse(m),u&&(i={...u,...i})}catch(g){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,g),`${c}${d}${m}`}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,c};for(;s=this.nestingRegexp.exec(e);){let c=[];i={...n},i=i.replace&&!Te(i.replace)?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;const u=/{.*}/.test(s[1])?s[1].lastIndexOf("}")+1:s[1].indexOf(this.formatSeparator);if(u!==-1&&(c=s[1].slice(u).split(this.formatSeparator).map(d=>d.trim()).filter(Boolean),s[1]=s[1].slice(0,u)),o=r(l.call(this,s[1].trim(),i),i),o&&s[0]===e&&!Te(o))return o;Te(o)||(o=Iy(o)),o||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),o=""),c.length&&(o=c.reduce((d,h)=>this.format(d,h,n.lng,{...n,interpolationkey:s[1].trim()}),o.trim())),e=e.replace(s[0],o),this.regexp.lastIndex=0}return e}}const oR=t=>{let e=t.toLowerCase().trim();const r={};if(t.indexOf("(")>-1){const n=t.split("(");e=n[0].toLowerCase().trim();const s=n[1].substring(0,n[1].length-1);e==="currency"&&s.indexOf(":")<0?r.currency||(r.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?r.range||(r.range=s.trim()):s.split(";").forEach(i=>{if(i){const[l,...c]=i.split(":"),u=c.join(":").trim().replace(/^'+|'+$/g,""),d=l.trim();r[d]||(r[d]=u),u==="false"&&(r[d]=!1),u==="true"&&(r[d]=!0),isNaN(u)||(r[d]=parseInt(u,10))}})}return{formatName:e,formatOptions:r}},qy=t=>{const e={};return(r,n,s)=>{let o=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(o={...o,[s.interpolationkey]:void 0});const i=n+JSON.stringify(o);let l=e[i];return l||(l=t(Yl(n),s),e[i]=l),l(r)}},iR=t=>(e,r,n)=>t(Yl(r),n)(e);class lR{constructor(e={}){this.logger=Pn.create("formatter"),this.options=e,this.init(e)}init(e,r={interpolation:{}}){this.formatSeparator=r.interpolation.formatSeparator||",";const n=r.cacheInBuiltFormats?qy:iR;this.formats={number:n((s,o)=>{const i=new Intl.NumberFormat(s,{...o});return l=>i.format(l)}),currency:n((s,o)=>{const i=new Intl.NumberFormat(s,{...o,style:"currency"});return l=>i.format(l)}),datetime:n((s,o)=>{const i=new Intl.DateTimeFormat(s,{...o});return l=>i.format(l)}),relativetime:n((s,o)=>{const i=new Intl.RelativeTimeFormat(s,{...o});return l=>i.format(l,o.range||"day")}),list:n((s,o)=>{const i=new Intl.ListFormat(s,{...o});return l=>i.format(l)})}}add(e,r){this.formats[e.toLowerCase().trim()]=r}addCached(e,r){this.formats[e.toLowerCase().trim()]=qy(r)}format(e,r,n,s={}){const o=r.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(l=>l.indexOf(")")>-1)){const l=o.findIndex(c=>c.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,l)].join(this.formatSeparator)}return o.reduce((l,c)=>{var h;const{formatName:u,formatOptions:d}=oR(c);if(this.formats[u]){let m=l;try{const p=((h=s==null?void 0:s.formatParams)==null?void 0:h[s.interpolationkey])||{},v=p.locale||p.lng||s.locale||s.lng||n;m=this.formats[u](l,v,{...d,...s,...p})}catch(p){this.logger.warn(p)}return m}else this.logger.warn(`there was no format function for ${u}`);return l},e)}}const cR=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class uR extends ah{constructor(e,r,n,s={}){var o,i;super(),this.backend=e,this.store=r,this.services=n,this.languageUtils=n.languageUtils,this.options=s,this.logger=Pn.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],(i=(o=this.backend)==null?void 0:o.init)==null||i.call(o,n,s.backend,s)}queueLoad(e,r,n,s){const o={},i={},l={},c={};return e.forEach(u=>{let d=!0;r.forEach(h=>{const m=`${u}|${h}`;!n.reload&&this.store.hasResourceBundle(u,h)?this.state[m]=2:this.state[m]<0||(this.state[m]===1?i[m]===void 0&&(i[m]=!0):(this.state[m]=1,d=!1,i[m]===void 0&&(i[m]=!0),o[m]===void 0&&(o[m]=!0),c[h]===void 0&&(c[h]=!0)))}),d||(l[u]=!0)}),(Object.keys(o).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(o),pending:Object.keys(i),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(e,r,n){const s=e.split("|"),o=s[0],i=s[1];r&&this.emit("failedLoading",o,i,r),!r&&n&&this.store.addResourceBundle(o,i,n,void 0,void 0,{skipCopy:!0}),this.state[e]=r?-1:2,r&&n&&(this.state[e]=0);const l={};this.queue.forEach(c=>{G2(c.loaded,[o],i),cR(c,e),r&&c.errors.push(r),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(u=>{l[u]||(l[u]={});const d=c.loaded[u];d.length&&d.forEach(h=>{l[u][h]===void 0&&(l[u][h]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(e,r,n,s=0,o=this.retryTimeout,i){if(!e.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:r,fcName:n,tried:s,wait:o,callback:i});return}this.readingCalls++;const l=(u,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(u&&d&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,r,n,s+1,o*2,i)},o);return}i(u,d)},c=this.backend[n].bind(this.backend);if(c.length===2){try{const u=c(e,r);u&&typeof u.then=="function"?u.then(d=>l(null,d)).catch(l):l(null,u)}catch(u){l(u)}return}return c(e,r,l)}prepareLoading(e,r,n={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();Te(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Te(r)&&(r=[r]);const o=this.queueLoad(e,r,n,s);if(!o.toLoad.length)return o.pending.length||s(),null;o.toLoad.forEach(i=>{this.loadOne(i)})}load(e,r,n){this.prepareLoading(e,r,{},n)}reload(e,r,n){this.prepareLoading(e,r,{reload:!0},n)}loadOne(e,r=""){const n=e.split("|"),s=n[0],o=n[1];this.read(s,o,"read",void 0,void 0,(i,l)=>{i&&this.logger.warn(`${r}loading namespace ${o} for language ${s} failed`,i),!i&&l&&this.logger.log(`${r}loaded namespace ${o} for language ${s}`,l),this.loaded(e,i,l)})}saveMissing(e,r,n,s,o,i={},l=()=>{}){var c,u,d,h,m;if((u=(c=this.services)==null?void 0:c.utils)!=null&&u.hasLoadedNamespace&&!((h=(d=this.services)==null?void 0:d.utils)!=null&&h.hasLoadedNamespace(r))){this.logger.warn(`did not save key "${n}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if((m=this.backend)!=null&&m.create){const p={...i,isUpdate:o},v=this.backend.create.bind(this.backend);if(v.length<6)try{let g;v.length===5?g=v(e,r,n,s,p):g=v(e,r,n,s),g&&typeof g.then=="function"?g.then(y=>l(null,y)).catch(l):l(null,g)}catch(g){l(g)}else v(e,r,n,s,l,p)}!e||!e[0]||this.store.addResource(e[0],r,n,s)}}}const Ky=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),Te(t[1])&&(e.defaultValue=t[1]),Te(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const r=t[3]||t[2];Object.keys(r).forEach(n=>{e[n]=r[n]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Gy=t=>{var e,r;return Te(t.ns)&&(t.ns=[t.ns]),Te(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),Te(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((r=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:r.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},cu=()=>{},dR=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(r=>{typeof t[r]=="function"&&(t[r]=t[r].bind(t))})};class Sl extends ah{constructor(e={},r){if(super(),this.options=Gy(e),this.services={},this.logger=Pn,this.modules={external:[]},dR(this),r&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,r),this;setTimeout(()=>{this.init(e,r)},0)}}init(e={},r){this.isInitializing=!0,typeof e=="function"&&(r=e,e={}),e.defaultNS==null&&e.ns&&(Te(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const n=Ky();this.options={...n,...this.options,...Gy(e)},this.options.interpolation={...n.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const s=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?Pn.init(s(this.modules.logger),this.options):Pn.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=lR;const d=new zy(this.options);this.store=new Uy(this.options.resources,this.options);const h=this.services;h.logger=Pn,h.resourceStore=this.store,h.languageUtils=d,h.pluralResolver=new sR(d,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(h.formatter=s(u),h.formatter.init&&h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new aR(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new uR(s(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",(p,...v)=>{this.emit(p,...v)}),this.modules.languageDetector&&(h.languageDetector=s(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=s(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new vd(this.services,this.options),this.translator.on("*",(p,...v)=>{this.emit(p,...v)}),this.modules.external.forEach(p=>{p.init&&p.init(this)})}if(this.format=this.options.interpolation.format,r||(r=cu),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...d)=>this.store[u](...d)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...d)=>(this.store[u](...d),this)});const l=nl(),c=()=>{const u=(d,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(h),r(d,h)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),l}loadResources(e,r=cu){var o,i;let n=r;const s=Te(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if((s==null?void 0:s.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const l=[],c=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(h=>{h!=="cimode"&&l.indexOf(h)<0&&l.push(h)})};s?c(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>c(d)),(i=(o=this.options.preload)==null?void 0:o.forEach)==null||i.call(o,u=>c(u)),this.services.backendConnector.load(l,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(u)})}else n(null)}reloadResources(e,r,n){const s=nl();return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r=void 0),e||(e=this.languages),r||(r=this.options.ns),n||(n=cu),this.services.backendConnector.reload(e,r,o=>{s.resolve(),n(o)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&fj.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let r=0;r<this.languages.length;r++){const n=this.languages[r];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,r){this.isLanguageChangingTo=e;const n=nl();this.emit("languageChanging",e);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,c)=>{c?this.isLanguageChangingTo===e&&(s(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,n.resolve((...u)=>this.t(...u)),r&&r(l,(...u)=>this.t(...u))},i=l=>{var d,h;!e&&!l&&this.services.languageDetector&&(l=[]);const c=Te(l)?l:l&&l[0],u=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(Te(l)?[l]:l);u&&(this.language||s(u),this.translator.language||this.translator.changeLanguage(u),(h=(d=this.services.languageDetector)==null?void 0:d.cacheUserLanguage)==null||h.call(d,u)),this.loadResources(u,m=>{o(m,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?i(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(i):this.services.languageDetector.detect(i):i(e),n}getFixedT(e,r,n){const s=(o,i,...l)=>{let c;typeof i!="object"?c=this.options.overloadTranslationOptionHandler([o,i].concat(l)):c={...i},c.lng=c.lng||s.lng,c.lngs=c.lngs||s.lngs,c.ns=c.ns||s.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||n||s.keyPrefix);const u=this.options.keySeparator||".";let d;return c.keyPrefix&&Array.isArray(o)?d=o.map(h=>(typeof h=="function"&&(h=sp(h,{...this.options,...i})),`${c.keyPrefix}${u}${h}`)):(typeof o=="function"&&(o=sp(o,{...this.options,...i})),d=c.keyPrefix?`${c.keyPrefix}${u}${o}`:o),this.t(d,c)};return Te(e)?s.lng=e:s.lngs=e,s.ns=r,s.keyPrefix=n,s}t(...e){var r;return(r=this.translator)==null?void 0:r.translate(...e)}exists(...e){var r;return(r=this.translator)==null?void 0:r.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,r={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=r.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const i=(l,c)=>{const u=this.services.backendConnector.state[`${l}|${c}`];return u===-1||u===0||u===2};if(r.precheck){const l=r.precheck(this,i);if(l!==void 0)return l}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||i(n,e)&&(!s||i(o,e)))}loadNamespaces(e,r){const n=nl();return this.options.ns?(Te(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{n.resolve(),r&&r(s)}),n):(r&&r(),Promise.resolve())}loadLanguages(e,r){const n=nl();Te(e)&&(e=[e]);const s=this.options.preload||[],o=e.filter(i=>s.indexOf(i)<0&&this.services.languageUtils.isSupportedCode(i));return o.length?(this.options.preload=s.concat(o),this.loadResources(i=>{n.resolve(),r&&r(i)}),n):(r&&r(),Promise.resolve())}dir(e){var s,o;if(e||(e=this.resolvedLanguage||(((s=this.languages)==null?void 0:s.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const i=new Intl.Locale(e);if(i&&i.getTextInfo){const l=i.getTextInfo();if(l&&l.direction)return l.direction}}catch{}const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=((o=this.services)==null?void 0:o.languageUtils)||new zy(Ky());return e.toLowerCase().indexOf("-latn")>1?"ltr":r.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},r){const n=new Sl(e,r);return n.createInstance=Sl.createInstance,n}cloneInstance(e={},r=cu){const n=e.forkResourceStore;n&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},o=new Sl(s);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(l=>{o[l]=this[l]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},n){const l=Object.keys(this.store.data).reduce((c,u)=>(c[u]={...this.store.data[u]},c[u]=Object.keys(c[u]).reduce((d,h)=>(d[h]={...c[u][h]},d),c[u]),c),{});o.store=new Uy(l,s),o.services.resourceStore=o.store}return o.translator=new vd(o.services,s),o.translator.on("*",(l,...c)=>{o.emit(l,...c)}),o.init(s,r),o.translator.options=s,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ft=Sl.createInstance();ft.createInstance;ft.dir;ft.init;ft.loadResources;ft.reloadResources;ft.use;ft.changeLanguage;ft.getFixedT;ft.t;ft.exists;ft.setDefaultNamespace;ft.hasLoadedNamespace;ft.loadNamespaces;ft.loadLanguages;const hR=(t,e,r,n)=>{var o,i,l,c;const s=[r,{code:e,...n||{}}];if((i=(o=t==null?void 0:t.services)==null?void 0:o.logger)!=null&&i.forward)return t.services.logger.forward(s,"warn","react-i18next::",!0);no(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),(c=(l=t==null?void 0:t.services)==null?void 0:l.logger)!=null&&c.warn?t.services.logger.warn(...s):console!=null&&console.warn&&console.warn(...s)},Yy={},pj=(t,e,r,n)=>{no(r)&&Yy[r]||(no(r)&&(Yy[r]=new Date),hR(t,e,r,n))},gj=(t,e)=>()=>{if(t.isInitialized)e();else{const r=()=>{setTimeout(()=>{t.off("initialized",r)},0),e()};t.on("initialized",r)}},ap=(t,e,r)=>{t.loadNamespaces(e,gj(t,r))},Qy=(t,e,r,n)=>{if(no(r)&&(r=[r]),t.options.preload&&t.options.preload.indexOf(e)>-1)return ap(t,r,n);r.forEach(s=>{t.options.ns.indexOf(s)<0&&t.options.ns.push(s)}),t.loadLanguages(e,gj(t,n))},fR=(t,e,r={})=>!e.languages||!e.languages.length?(pj(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:r.lng,precheck:(n,s)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!s(n.isLanguageChangingTo,t))return!1}}),no=t=>typeof t=="string",mR=t=>typeof t=="object"&&t!==null,pR=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,gR={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},vR=t=>gR[t],xR=t=>t.replace(pR,vR);let op={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:xR};const yR=(t={})=>{op={...op,...t}},wR=()=>op;let vj;const _R=t=>{vj=t},bR=()=>vj,jR={type:"3rdParty",init(t){yR(t.options.react),_R(t)}},xj=f.createContext();class SR{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var yj={exports:{}},wj={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ni=f;function NR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kR=typeof Object.is=="function"?Object.is:NR,CR=Ni.useState,ER=Ni.useEffect,PR=Ni.useLayoutEffect,TR=Ni.useDebugValue;function RR(t,e){var r=e(),n=CR({inst:{value:r,getSnapshot:e}}),s=n[0].inst,o=n[1];return PR(function(){s.value=r,s.getSnapshot=e,wf(s)&&o({inst:s})},[t,r,e]),ER(function(){return wf(s)&&o({inst:s}),t(function(){wf(s)&&o({inst:s})})},[t]),TR(r),r}function wf(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!kR(t,r)}catch{return!0}}function OR(t,e){return e()}var DR=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?OR:RR;wj.useSyncExternalStore=Ni.useSyncExternalStore!==void 0?Ni.useSyncExternalStore:DR;yj.exports=wj;var _j=yj.exports;const AR=(t,e)=>no(e)?e:mR(e)&&no(e.defaultValue)?e.defaultValue:Array.isArray(t)?t[t.length-1]:t,MR={t:AR,ready:!1},IR=()=>()=>{},lt=(t,e={})=>{var k,P;const{i18n:r}=e,{i18n:n,defaultNS:s}=f.useContext(xj)||{},o=r||n||bR();o&&!o.reportNamespaces&&(o.reportNamespaces=new SR),o||pj(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const i=f.useMemo(()=>{var T;return{...wR(),...(T=o==null?void 0:o.options)==null?void 0:T.react,...e}},[o,e]),{useSuspense:l,keyPrefix:c}=i,u=f.useMemo(()=>{var C;const T=s||((C=o==null?void 0:o.options)==null?void 0:C.defaultNS);return no(T)?[T]:T||["translation"]},[t,s,o]);(P=(k=o==null?void 0:o.reportNamespaces)==null?void 0:k.addUsedNamespaces)==null||P.call(k,u);const d=f.useRef(0),h=f.useCallback(T=>{if(!o)return IR;const{bindI18n:C,bindI18nStore:L}=i,O=()=>{d.current+=1,T()};return C&&o.on(C,O),L&&o.store.on(L,O),()=>{C&&C.split(" ").forEach(J=>o.off(J,O)),L&&L.split(" ").forEach(J=>o.store.off(J,O))}},[o,i]),m=f.useRef(),p=f.useCallback(()=>{if(!o)return MR;const T=!!(o.isInitialized||o.initializedStoreOnce)&&u.every(U=>fR(U,o,i)),C=e.lng||o.language,L=d.current,O=m.current;if(O&&O.ready===T&&O.lng===C&&O.keyPrefix===c&&O.revision===L)return O;const W={t:o.getFixedT(C,i.nsMode==="fallback"?u:u[0],c),ready:T,lng:C,keyPrefix:c,revision:L};return m.current=W,W},[o,u,c,i,e.lng]),[v,g]=f.useState(0),{t:y,ready:w}=_j.useSyncExternalStore(h,p,p);f.useEffect(()=>{if(o&&!w&&!l){const T=()=>g(C=>C+1);e.lng?Qy(o,e.lng,u,T):ap(o,u,T)}},[o,e.lng,u,w,l,v]);const x=o||{},_=f.useRef(null),b=f.useRef(),j=T=>{const C=Object.getOwnPropertyDescriptors(T);C.__original&&delete C.__original;const L=Object.create(Object.getPrototypeOf(T),C);if(!Object.prototype.hasOwnProperty.call(L,"__original"))try{Object.defineProperty(L,"__original",{value:T,writable:!1,enumerable:!1,configurable:!1})}catch{}return L},E=f.useMemo(()=>{const T=x,C=T==null?void 0:T.language;let L=T;T&&(_.current&&_.current.__original===T?b.current!==C?(L=j(T),_.current=L,b.current=C):L=_.current:(L=j(T),_.current=L,b.current=C));const O=[y,L,w];return O.t=y,O.i18n=L,O.ready=w,O},[y,x,w,x.resolvedLanguage,x.language,x.languages]);if(o&&l&&!w)throw new Promise(T=>{const C=()=>T();e.lng?Qy(o,e.lng,u,C):ap(o,u,C)});return E};function LR({i18n:t,defaultNS:e,children:r}){const n=f.useMemo(()=>({i18n:t,defaultNS:e}),[t,e]);return f.createElement(xj.Provider,{value:n},r)}const FR={home:"Home",dashboard:"Dashboard",projects:"Projects",users:"Users",settings:"Settings",leads:"Leads",tickets:"Tickets",tasks:"Tasks",teams:"Teams",clients:"Clients",chats:"Chats",surveys:"Surveys",clientPortal:"CLIENT PORTAL",partnerDashboard:"PARTNER DASHBOARD",empDashboard:"EMP DASHBOARD"},$R={save:"Save",cancel:"Cancel",close:"Close",submit:"Submit",delete:"Delete",edit:"Edit",add:"Add",create:"Create",login:"Login",signup:"Sign Up",logout:"Logout",saving:"Saving..."},UR={name:"Name",email:"Email",password:"Password",confirmPassword:"Confirm Password",phone:"Phone",message:"Message"},BR={signIn:"Sign In",signUp:"Sign Up",createAccount:"Create Account",enterCredentials:"Enter your credentials to continue",signUpToGetStarted:"Sign up to get started",chooseAccountType:"Choose your account type to continue with Google",chooseAccountTypeSignUp:"Choose your account type to sign up with Google",client:"Client",partner:"Partner",partnerEmployee:"Partner Employee",redirectingToGoogle:"Redirecting to Google...",orContinueWith:"Or continue with",email:"Email",password:"Password",signingIn:"Signing in...",signInButton:"Sign In",signUpButton:"Sign Up",dontHaveAccount:"Don't have an account?",alreadyHaveAccount:"Already have an account?",clientPortal:"Client Portal",failedToSignIn:"Failed to sign in",failedToSignInWithGoogle:"Failed to sign in with Google"},zR={welcome:"Welcome",loading:"Loading...",error:"Error",success:"Success",search:"Search",filter:"Filter",notifications:"Notifications",kanban:"Kanban",list:"List",select:"Select",view:"View",status:"Status",assignee:"Assignee",all:"All",pickDate:"Pick a date",clearFilters:"Clear filters",created:"Created",actions:"Actions",stage:"Stage"},WR={title:"Dashboard",subtitle:"Welcome back! Here's an overview of your projects.",totalProjects:"Total Projects",completed:"completed",inProgress:"In Progress",activeProjects:"Active projects",clients:"Clients",totalClients:"Total clients",teamMembers:"Team Members",activeUsers:"Active users",leads:"Leads",totalLeads:"Total leads",surveys:"Surveys",totalSurveys:"Total surveys",recentProjects:"Recent Projects",projectStatus:"Project Status",noProjectsYet:"No projects yet",retry:"Retry",completedStatus:"Completed",inProgressStatus:"In Progress",notStartedStatus:"Not Started"},VR={title:"Leads",subtitle:"Manage and track all your leads",newLead:"New Lead",addLead:"Add Lead",createLead:"Create New Lead",createLeadDesc:"Add a new lead to the selected stage.",leadName:"Lead Name",leadNamePlaceholder:"Enter lead name",description:"Description",descriptionPlaceholder:"Enter lead description",clientName:"Client Name",clientNamePlaceholder:"Enter client name",client:"Client",selectClient:"Select a client (optional)",noClient:"No client",unknown:"Unknown",created:"Created",updated:"Updated",createdBy:"Created by",assignedTo:"Assigned to",assignToEmployee:"Assign to Employee",selectAssignee:"Select assignee",lead:"Lead",deleteLead:"Delete Lead",deleteConfirmation:'Are you sure you want to delete "{{name}}"?',addStage:"Add Stage",stageNamePlaceholder:"Stage name...",deleteStage:"Delete Stage",deleteStageConfirmation:"This stage contains {{count}} lead(s). Deleting this stage will also remove all leads in it. This action cannot be undone.",addNewLeadCard:"Add New Lead",noLeadsYet:"No leads have been created yet."},HR={title:"Projects",subtitle:"Manage and track all your projects",newProject:"New Project",createProject:"Create New Project",createProjectDesc:"Add a new project to the selected stage.",projectName:"Project Name",projectNamePlaceholder:"Enter project name",description:"Description",descriptionPlaceholder:"Enter project description",client:"Client",selectClient:"Select a client",initialProgress:"Initial Progress",addProject:"Add Project",addNewProjectCard:"Add New Project",progress:"Progress",started:"Started",completed:"Completed",due:"Due",deleteProject:"Delete Project",deleteConfirmation:'Are you sure you want to delete "{{name}}"?',noProjectsYet:"No projects have been created yet.",deleteComment:"Delete Comment",deleteCommentConfirmation:"Are you sure you want to delete this comment?"},qR={title:"Settings",description:"Manage application settings and configurations",stageManagement:"Stage Management",leads:"Lead Stages",projects:"Project Stages",tasks:"Task Stages",tickets:"Ticket Stages",addStage:"Add Stage",editStage:"Edit Stage",deleteStage:"Delete Stage",stageName:"Stage Name",stageNamePlaceholder:"Enter stage name",stageColor:"Stage Color",order:"Order",noStages:"No stages found. Add one to get started.",addStageDesc:"Add a new stage for {{type}}",deleteStageConfirmation:"Are you sure you want to delete this stage? This action cannot be undone.",englishName:"English name",arabicName:"Arabic name",changePassword:"Change Password",changePasswordDescription:"Enter your new password below. Make sure it's at least 6 characters long.",newPassword:"New Password",newPasswordPlaceholder:"Enter new password",newPasswordRequired:"New password is required",confirmPassword:"Confirm Password",confirmPasswordPlaceholder:"Confirm new password",passwordsDoNotMatch:"Passwords do not match",passwordTooShort:"Password must be at least 6 characters long",changingPassword:"Changing password...",passwordChangedSuccessfully:"Password changed successfully!",passwordChangeFailed:"Failed to change password"},KR={title:"Tickets",subtitle:"Manage and track all support tickets.",newTicket:"New Ticket",createNewTicket:"Create New Ticket",createTicketDesc:"Fill in the details to create a new support ticket.",searchPlaceholder:"Search tickets...",allTickets:"All Tickets",noTicketsFound:"No Tickets Found",noTicketsFoundDesc:"Try adjusting your search terms.",noTicketsYet:"No tickets have been created yet.",id:"ID",subject:"Subject",subjectPlaceholder:"Enter ticket subject",description:"Description",descriptionPlaceholder:"Describe the issue or request",status:"Status",priority:"Priority",priorityLow:"Low",priorityMedium:"Medium",priorityHigh:"High",priorityUrgent:"Urgent",ticketType:"Ticket Type",typeRequest:"Request",typeFollowUp:"Follow Up",typeIssue:"Issue",typeInternalTask:"Internal Task",assignTo:"Assign To",selectAssignee:"Select assignee (optional)",assignedTo:"Assigned To",createdDate:"Created Date",actions:"Actions",view:"View",loading:"Loading tickets...",createTicket:"Create Ticket",creatingTicket:"Creating...",createError:"Failed to create ticket",allStatuses:"All Statuses",allPriorities:"All Priorities",statusOpen:"Open",statusInProgress:"In Progress",statusResolved:"Resolved",statusClosed:"Closed",ticketId:"Ticket ID",createdBy:"Created By",resolvedDate:"Resolved Date",closedDate:"Closed Date"},GR={title:"Teams",subtitle:"Manage teams and team members",createTeam:"Create Team",createTeamTitle:"Create New Team",createTeamDesc:"Create a new team and assign a team leader. You can add members after creation.",teamName:"Team Name",teamNamePlaceholder:"Enter team name",team_leader:"Team Leader",teamLeader:"Team Leader",selectTeamLeader:"Select a team leader (optional)",searchPlaceholder:"Search teams...",members:"Members",memberCount:"{{count}} member",memberCount_plural:"{{count}} members",addMember:"Add member",created:"Created",noTeamsFound:"No teams found",noTeamsYet:"No teams yet",createFirstTeam:"Create Your First Team",deleteTeam:"Delete Team",deleteConfirmation:'Are you sure you want to delete "{{name}}"? This will also remove all team members. This action cannot be undone.',moreMembers:"+{{count}} more members",noMembersYet:"No members yet"},YR={title:"Tasks",subtitle:"Manage and track all your tasks in one place.",loading:"Loading...",error:"Error",deleteTask:"Delete Task",createTask:"Create New Task",createTaskDesc:"Add a new task to the selected stage.",newTask:"New Task",addNewTask:"Add New Task",addTask:"Add Task",taskName:"Task Name",taskNamePlaceholder:"Enter task name",descriptionPlaceholder:"Enter task description",dueDate:"Due Date",selectUser:"Select a user",selectStage:"Select a stage",selectStatus:"Select status",todo:"Todo",inProgress:"In Progress",done:"Done",stage:"Stage",allTasks:"All Tasks",noTasksYet:"No tasks have been created yet."},QR={brandName:"Middar",badge:" New Feature",hero:{title:{line1:"Streamline Your",line2:"Business Operations"},description:"Powerful CRM solution to manage projects, leads, tasks, and teams all in one place. Boost productivity and grow your business with our comprehensive platform.",cta:{primary:"Get Started",secondary:"Learn More"}},stats:{users:"10K+",usersLabel:"Active Users",projects:"50K+",projectsLabel:"Projects Managed",uptime:"99.9%",uptimeLabel:"Uptime",support:"24/7",supportLabel:"Support"},features:{title:"Everything you need to succeed",subtitle:"Comprehensive tools designed for modern businesses",projectManagement:{title:"Project Management",description:"Track projects from inception to completion with detailed progress monitoring and team collaboration."},leadManagement:{title:"Lead Management",description:"Convert more leads with our advanced CRM tools and automated follow-up systems."},analytics:{title:"Analytics & Insights",description:"Make data-driven decisions with comprehensive analytics and reporting dashboards."},communication:{title:"Team Communication",description:"Keep your team connected with integrated chat, notifications, and collaboration tools."},taskManagement:{title:"Task Management",description:"Organize and prioritize tasks with our intuitive kanban board and deadline tracking."},security:{title:"Enterprise Security",description:"Your data is protected with enterprise-grade security and compliance standards."}},cta:{title:"Ready to transform your business?",description:"Join thousands of businesses already using our platform to streamline their operations and boost productivity.",button:"Start Free Trial"},footer:{copyright:" 2025 {{brand}} CRM. All rights reserved."}},JR={title:"Users",subtitle:"Manage system users and their roles",totalUsers:"Total Users",addUser:"Add User",addNewUser:"Add New User",addUserDescription:"Fill in the details below to create a new user account.",fullName:"Full Name",email:"Email",password:"Password",role:"Role",admin:"Admin",manager:"Manager",employee:"Employee",team_leader:"Team Leader",client:"Client",employees:"Employees",clients:"Clients",addingUser:"Adding user...",addUserError:"Failed to add user",deleteUser:"Delete User",deleteConfirmation:'Are you sure you want to delete "{{name}}"?',deleteError:"Failed to delete user",updateRoleError:"Failed to update user role",changeRole:"Change Role",searchPlaceholder:"Search users...",noUsersFound:"No users found",noUsersFoundDesc:"Try adjusting your search terms.",noUsersAvailable:"No users available",joined:"Joined",updated:"Updated",userDetails:"User Details",userDetailsDescription:"View detailed information about this user",phone:"Phone",contact:"Contact",company:"Company",userId:"User ID",authUserId:"Auth User ID",updateUserError:"Failed to update user"},XR={title:"Clients",subtitle:"Manage and view all your clients",newClient:"New Client",loading:"Loading clients...",noClientsFound:"No clients found",noClientsYet:"No clients have been added yet",active:"active",totalProjects:"Total Projects",activeProjects:"Active Projects",completedProjects:"Completed Projects",noCompany:"No company",noEmail:"No email",projects:"projects",viewDetails:"View Details",clientDetails:"Client Details",userId:"User ID",emailLabel:"Email",contactLabel:"Contact",companyLabel:"Company",createdLabel:"Created",updatedLabel:"Updated",projectSummary:"Project Summary"},ZR={title:"My Dashboard",subtitle:"Welcome back, {{name}}! Here's your work overview.",employeeInfo:"Employee Information",name:"Name",email:"Email",role:"Role",memberSince:"Member Since",myProjects:"My Projects",active:"active",myTasks:"My Tasks",completed:"completed",inProgress:"In Progress",activeTasks:"Active tasks",completedTasks:"Completed",finishedTasks:"Finished tasks",leads:"Leads",totalLeads:"Total leads",surveys:"Surveys",totalSurveys:"Total surveys",recentTasks:"Recent Tasks",noDescription:"No description",noProjectsAssigned:"No projects assigned yet",noTasksAssigned:"No tasks assigned yet"},eO={chatRooms:"Chat Rooms",createRoomTitle:"Create New Room",createRoomDesc:"Create a new chat room for your team or project",roomName:"Room Name",roomNamePlaceholder:"Enter room name",private:"Private",privateRoom:"Private Room",publicRoom:"Public Room",project:"Project",projectIdPlaceholder:"Enter project ID (optional)",createRoom:"Create Room",searchConversations:"Search conversations...",searchRooms:"Search rooms...",members:"members",online:"Online",selectRoom:"Select a room to start chatting",typeMessage:"Type a message...",you:"You",unknownUser:"Unknown User",justNow:"Just now",minutesAgo:"{{count}}m ago",hoursAgo:"{{count}}h ago",viewDetails:"View Details",muteNotifications:"Mute Notifications",leaveRoom:"Leave Room",someoneTyping:"Someone is typing..."},tO={title:"Surveys",subtitle:"Manage and track all surveys and questionnaires",surveys:"Surveys",templates:"Templates",totalSurveys:"Total Surveys",createTemplate:"Create Template",createTemplateTitle:"Create New Survey Template",createTemplateDesc:"Create a custom survey template for your needs",templateName:"Template Name",templateNameAr:"Template Name (Arabic)",description:"Description",descriptionAr:"Description (Arabic)",category:"Category",selectCategory:"Select Category",customerSatisfaction:"Customer Satisfaction",productFeedback:"Product Feedback",serviceQuality:"Service Quality",general:"General",settings:"Settings",isActive:"Active",isDefault:"Default",searchPlaceholder:"Search surveys...",noSurveysFound:"No surveys found",noSurveysFoundDesc:"Try adjusting your search terms.",noSurveysYet:"No surveys have been created yet.",noTemplatesFound:"No templates found",noTemplatesFoundDesc:"Try adjusting your search terms.",noTemplatesYet:"No templates have been created yet.",survey:"Survey",clientName:"Client Name",clientCompany:"Client Company",contact:"Contact",noContact:"No contact",noCompany:"No company",noEmail:"No email",location:"Location",responses:"Responses",completed:"Completed",inProgress:"In Progress",pending:"Pending",active:"Active",inactive:"Inactive",default:"Default",noCategory:"No category",status:"Status",noDescription:"No description",fields:"Fields",noFields:"No fields defined",created:"Created",updated:"Updated",createdBy:"Created By",unknownCreator:"Unknown Creator",newSurvey:"New Survey",createNewSurvey:"Create New Survey",selectTemplate:"Select Template",fillSurveyDetails:"Fill Survey Details",changeTemplate:"Change Template",submitSurvey:"Submit Survey",locationWillBeCaptured:"Your location will be captured automatically",addField:"Add Field",fieldLabel:"Field Label",fieldType:"Field Type",text:"Text",textarea:"Textarea",email:"Email",select:"Select",multiselect:"Multiselect",radio:"Radio",checkbox:"Checkbox",image:"Image",options:"Options",optionsPlaceholder:"Enter options separated by spaces (e.g., option1 option2 option3)",isRequired:"Required",editTemplateTitle:"Edit Survey Template",updateTemplate:"Update Template",deleteTemplate:"Delete Template",deleteTemplateConfirmation:'Are you sure you want to delete "{{name}}"? This action cannot be undone.',templateNameRequired:"Template name is required",atLeastOneFieldRequired:"At least one field is required",fieldLabelRequired:"Field {{number}}: Label is required",templateCreated:"Template created successfully!",templateUpdated:"Template updated successfully!",templateValidationFailed:"Please fix the validation errors before saving.",templateSaveError:"Failed to {{action}} template. Please try again."},rO={navigation:FR,buttons:$R,forms:UR,auth:BR,common:zR,dashboard:WR,leads:VR,projects:HR,settings:qR,tickets:KR,teams:GR,tasks:YR,landing:QR,users:JR,clients:XR,employeeDashboard:ZR,chats:eO,surveys:tO},nO={home:"",dashboard:" ",projects:"",users:"",settings:"",leads:" ",tickets:"",tasks:"",teams:"",clients:"",chats:"",surveys:"",clientPortal:" ",partnerDashboard:"  ",empDashboard:"  "},sO={save:"",cancel:"",submit:"",delete:"",edit:"",close:"",add:"",create:"",login:" ",signup:" ",logout:" ",saving:" ..."},aO={name:"",email:" ",password:" ",confirmPassword:"  ",phone:"",message:""},oO={signIn:" ",signUp:" ",createAccount:" ",enterCredentials:"  ",signUpToGetStarted:" ",chooseAccountType:"     ",chooseAccountTypeSignUp:"     ",client:"",partner:"",partnerEmployee:" ",redirectingToGoogle:"    ...",orContinueWith:"  ",email:" ",password:" ",signingIn:"  ...",signInButton:" ",signUpButton:" ",dontHaveAccount:"  ",alreadyHaveAccount:"  ",clientPortal:" ",failedToSignIn:"  ",failedToSignInWithGoogle:"    "},iO={welcome:"",loading:" ...",error:"",success:"",search:"",filter:"",notifications:"",kanban:"",list:"",select:"",view:"",status:"",assignee:" ",all:"",pickDate:" ",clearFilters:" ",created:" ",actions:"",stage:""},lO={title:" ",subtitle:" !     .",totalProjects:" ",completed:"",inProgress:" ",activeProjects:" ",clients:"",totalClients:" ",teamMembers:" ",activeUsers:" ",leads:" ",totalLeads:"  ",surveys:"",totalSurveys:" ",recentProjects:" ",projectStatus:" ",noProjectsYet:"   ",retry:" ",completedStatus:"",inProgressStatus:" ",notStartedStatus:" "},cO={title:" ",subtitle:"    ",newLead:"  ",addLead:"  ",createLead:"   ",createLeadDesc:"      .",leadName:"  ",leadNamePlaceholder:"   ",description:"",descriptionPlaceholder:"   ",clientName:" ",clientNamePlaceholder:"  ",client:"",selectClient:"  ()",noClient:" ",unknown:" ",created:" ",updated:" ",createdBy:"  ",assignedTo:" ",assignToEmployee:" ",selectAssignee:"  ",lead:" ",deleteLead:"  ",deleteConfirmation:'      "{{name}}"',addStage:" ",stageNamePlaceholder:" ...",deleteStage:" ",deleteStageConfirmation:"    {{count}}  .           .      .",addNewLeadCard:"   ",noLeadsYet:"      ."},uO={title:"",subtitle:"   ",newProject:" ",createProject:"  ",createProjectDesc:"     .",projectName:" ",projectNamePlaceholder:"  ",description:"",descriptionPlaceholder:"  ",client:"",selectClient:" ",initialProgress:" ",addProject:" ",addNewProjectCard:"  ",progress:"",started:"",due:"",deleteProject:" ",deleteConfirmation:'      "{{name}}"',noProjectsYet:"     ."},dO={title:"",subtitle:"    .",newTicket:" ",createNewTicket:"  ",createTicketDesc:"     .",searchPlaceholder:"  ...",allTickets:" ",noTicketsFound:"  ",noTicketsFoundDesc:"   .",noTicketsYet:"     .",id:"",subject:"",subjectPlaceholder:"  ",description:"",descriptionPlaceholder:"   ",status:"",priority:"",priorityLow:"",priorityMedium:"",priorityHigh:"",priorityUrgent:"",ticketType:" ",typeRequest:"",typeFollowUp:"",typeIssue:"",typeInternalTask:" ",assignTo:" ",selectAssignee:"   ()",assignedTo:" ",createdDate:" ",actions:"",view:"",loading:"  ...",createTicket:" ",creatingTicket:" ...",createError:"   ",allStatuses:" ",allPriorities:" ",statusOpen:"",statusInProgress:" ",statusResolved:" ",statusClosed:"",ticketId:" ",createdBy:"  ",resolvedDate:" ",closedDate:" "},hO={title:"",subtitle:"   ",createTeam:" ",createTeamTitle:"  ",createTeamDesc:"     .     .",teamName:" ",teamNamePlaceholder:"  ",team_leader:" ",selectTeamLeader:"   ()",teamLeader:" ",searchPlaceholder:"  ...",members:"",memberCount:"{{count}} ",memberCount_plural:"{{count}} ",addMember:" ",created:" ",noTeamsFound:"  ",noTeamsYet:"   ",createFirstTeam:"  ",deleteTeam:" ",deleteConfirmation:'      "{{name}}"        .      .',moreMembers:"+{{count}}  ",noMembersYet:"   "},fO={title:"",subtitle:"      .",loading:" ...",description:"",error:"",deleteTask:" ",createTask:"  ",createTaskDesc:"     .",newTask:" ",addNewTask:"  ",addTask:" ",taskName:" ",taskNamePlaceholder:"  ",descriptionPlaceholder:"  ",dueDate:" ",selectUser:" ",selectStage:" ",selectStatus:" ",todo:"",inProgress:" ",done:"",stage:"",allTasks:" ",noTasksYet:"     ."},mO={brandName:"",badge:"  ",hero:{title:{line1:"",line2:" "},description:" CRM           .       .",cta:{primary:" ",secondary:" "}},stats:{users:"10 +",usersLabel:" ",projects:"50 +",projectsLabel:" ",uptime:"99.9%",uptimeLabel:" ",support:"24/7",supportLabel:""},features:{title:"   ",subtitle:"    ",projectManagement:{title:" ",description:"           ."},leadManagement:{title:"  ",description:"       CRM    ."},analytics:{title:" ",description:"        ."},communication:{title:" ",description:"         ."},taskManagement:{title:" ",description:"         ."},security:{title:" ",description:"       ."}},cta:{title:"  ",description:"           .",button:"  "},footer:{copyright:" 2025 {{brand}} CRM.   ."}},pO={title:"",subtitle:"   ",totalUsers:" ",addUser:" ",addNewUser:"  ",addUserDescription:"      .",fullName:" ",email:" ",password:" ",role:"",admin:"",manager:"",employee:"",team_leader:" ",client:"",employees:"",clients:"",addingUser:"  ...",addUserError:"   ",deleteUser:" ",deleteConfirmation:'      "{{name}}"',deleteError:"   ",updateRoleError:"    ",changeRole:" ",searchPlaceholder:"  ...",noUsersFound:"  ",noUsersFoundDesc:"   .",noUsersAvailable:"   ",joined:"",updated:" ",userDetails:" ",userDetailsDescription:"     ",phone:"",contact:"",company:"",userId:" ",authUserId:"  ",updateUserError:"   "},gO={title:"",subtitle:"   ",newClient:" ",loading:"  ...",noClientsFound:"  ",noClientsYet:"     ",active:"",totalProjects:" ",activeProjects:" ",completedProjects:" ",noCompany:" ",noEmail:"  ",projects:"",viewDetails:" ",clientDetails:" ",userId:" ",emailLabel:" ",contactLabel:"",companyLabel:"",createdLabel:" ",updatedLabel:" ",projectSummary:" "},vO={title:"   ",subtitle:"  {{name}}!     .",employeeInfo:" ",name:"",email:" ",role:"",memberSince:" ",myProjects:"",active:"",myTasks:"",completed:"",inProgress:" ",activeTasks:" ",completedTasks:"",finishedTasks:" ",leads:" ",totalLeads:"  ",surveys:"",totalSurveys:" ",recentTasks:" ",noDescription:" ",noProjectsAssigned:"    ",noTasksAssigned:"    "},xO={chatRooms:" ",createRoomTitle:"  ",createRoomDesc:"    ",roomName:" ",roomNamePlaceholder:"  ",private:"",privateRoom:" ",publicRoom:" ",project:"",projectIdPlaceholder:"  ()",createRoom:" ",selectRoom:"   ",members:"",typeMessage:" ...",you:"",unknownUser:"  ",justNow:"",online:"",someoneTyping:"  ...",searchConversations:"  ...",searchRooms:"  ..."},yO={title:"",subtitle:"    ",surveys:"",templates:"",totalSurveys:" ",createTemplate:" ",createTemplateTitle:"   ",createTemplateDesc:"    ",templateName:" ",templateNameAr:"  ",description:"",descriptionAr:" ",category:"",selectCategory:" ",customerSatisfaction:" ",productFeedback:" ",serviceQuality:" ",general:"",settings:"",isActive:"",isDefault:"",searchPlaceholder:"  ...",noSurveysFound:"  ",noSurveysFoundDesc:"   .",noSurveysYet:"     .",noTemplatesFound:"  ",noTemplatesFoundDesc:"   .",noTemplatesYet:"     .",survey:"",clientName:" ",clientCompany:" ",contact:"",noContact:" ",noCompany:" ",noEmail:"  ",location:"",responses:"",completed:"",inProgress:" ",pending:" ",active:"",inactive:" ",default:"",noCategory:" ",status:"",noDescription:" ",fields:"",noFields:"   ",created:" ",updated:" ",createdBy:"  ",unknownCreator:"  ",newSurvey:" ",createNewSurvey:"  ",selectTemplate:" ",fillSurveyDetails:"  ",changeTemplate:" ",submitSurvey:" ",locationWillBeCaptured:"    ",addField:" ",fieldLabel:" ",fieldType:" ",text:"",textarea:" ",email:" ",select:" ",multiselect:"  ",radio:" ",checkbox:" ",image:"",options:"",optionsPlaceholder:"    (: 1 2 3)",isRequired:"",templateNameRequired:"  ",atLeastOneFieldRequired:"    ",fieldLabelRequired:" {{number}}:  ",templateCreated:"   !",templateUpdated:"   !",templateValidationFailed:"     .",templateSaveError:"  {{action}} .    ."},wO={title:"",description:"   ",stageManagement:" ",leads:"  ",projects:" ",tasks:" ",tickets:" ",addStage:" ",editStage:" ",deleteStage:" ",stageName:" ",stageNamePlaceholder:"  ",stageColor:" ",order:"",noStages:"    .   .",addStageDesc:"    {{type}}",deleteStageConfirmation:"             .",englishName:" ",arabicName:" ",changePassword:"  ",changePasswordDescription:"    .      6   .",newPassword:"  ",newPasswordPlaceholder:"   ",newPasswordRequired:"   ",confirmPassword:"  ",confirmPasswordPlaceholder:"    ",passwordsDoNotMatch:"   ",passwordTooShort:"     6   ",changingPassword:"   ...",passwordChangedSuccessfully:"    !",passwordChangeFailed:"    "},_O={navigation:nO,buttons:sO,forms:aO,auth:oO,common:iO,dashboard:lO,leads:cO,projects:uO,tickets:dO,teams:hO,tasks:fO,landing:mO,users:pO,clients:gO,employeeDashboard:vO,chats:xO,surveys:yO,settings:wO},bO={en:{translation:rO},ar:{translation:_O}};ft.use(jR).init({resources:bO,lng:"ar",fallbackLng:"en",interpolation:{escapeValue:!1}});const K=(t,e)=>{if(ft.language==="ar"){const s=`${e}_ar`;if(t[s]&&t[s].trim())return t[s]}if(t[e]&&t[e].trim())return t[e];const n=`${e}_ar`;return t[n]&&t[n].trim()?t[n]:""},hn=(t,e)=>{const r=ft.language,n={...t};return Object.entries(e).forEach(([s,o])=>{r==="ar"?(n[`${o}_ar`]=t[s],n[o]=t[s]):(n[o]=t[s],n[`${o}_ar`]=t[s])}),n},cn=()=>ft.dir()==="rtl";/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ql(){return Ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ql.apply(this,arguments)}var zs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(zs||(zs={}));const Jy="popstate";function jO(t){t===void 0&&(t={});function e(s,o){let{pathname:i="/",search:l="",hash:c=""}=fo(s.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),ip("",{pathname:i,search:l,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(s,o){let i=s.document.querySelector("base"),l="";if(i&&i.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof o=="string"?o:xd(o))}function n(s,o){Wg(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return NO(e,r,n,t)}function _t(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Wg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function SO(){return Math.random().toString(36).substr(2,8)}function Xy(t,e){return{usr:t.state,key:t.key,idx:e}}function ip(t,e,r,n){return r===void 0&&(r=null),Ql({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?fo(e):e,{state:r,key:e&&e.key||n||SO()})}function xd(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function fo(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function NO(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:o=!1}=n,i=s.history,l=zs.Pop,c=null,u=d();u==null&&(u=0,i.replaceState(Ql({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function h(){l=zs.Pop;let y=d(),w=y==null?null:y-u;u=y,c&&c({action:l,location:g.location,delta:w})}function m(y,w){l=zs.Push;let x=ip(g.location,y,w);r&&r(x,y),u=d()+1;let _=Xy(x,u),b=g.createHref(x);try{i.pushState(_,"",b)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(b)}o&&c&&c({action:l,location:g.location,delta:1})}function p(y,w){l=zs.Replace;let x=ip(g.location,y,w);r&&r(x,y),u=d();let _=Xy(x,u),b=g.createHref(x);i.replaceState(_,"",b),o&&c&&c({action:l,location:g.location,delta:0})}function v(y){let w=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof y=="string"?y:xd(y);return x=x.replace(/ $/,"%20"),_t(w,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,w)}let g={get action(){return l},get location(){return t(s,i)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Jy,h),c=y,()=>{s.removeEventListener(Jy,h),c=null}},createHref(y){return e(s,y)},createURL:v,encodeLocation(y){let w=v(y);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:p,go(y){return i.go(y)}};return g}var Zy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Zy||(Zy={}));function kO(t,e,r){return r===void 0&&(r="/"),CO(t,e,r,!1)}function CO(t,e,r,n){let s=typeof e=="string"?fo(e):e,o=Vg(s.pathname||"/",r);if(o==null)return null;let i=bj(t);EO(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let u=$O(o);l=LO(i[c],u,n)}return l}function bj(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(_t(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=ea([n,c.relativePath]),d=r.concat(c);o.children&&o.children.length>0&&(_t(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),bj(o.children,e,d,u)),!(o.path==null&&!o.index)&&e.push({path:u,score:MO(u,o.index),routesMeta:d})};return t.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,i);else for(let c of jj(o.path))s(o,i,c)}),e}function jj(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let i=jj(n.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),s&&l.push(...i),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function EO(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:IO(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const PO=/^:[\w-]+$/,TO=3,RO=2,OO=1,DO=10,AO=-2,ew=t=>t==="*";function MO(t,e){let r=t.split("/"),n=r.length;return r.some(ew)&&(n+=AO),e&&(n+=RO),r.filter(s=>!ew(s)).reduce((s,o)=>s+(PO.test(o)?TO:o===""?OO:DO),n)}function IO(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function LO(t,e,r){let{routesMeta:n}=t,s={},o="/",i=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=o==="/"?e:e.slice(o.length)||"/",h=tw({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=tw({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),i.push({params:s,pathname:ea([o,h.pathname]),pathnameBase:WO(ea([o,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(o=ea([o,h.pathnameBase]))}return i}function tw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=FO(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:m,isOptional:p}=d;if(m==="*"){let g=l[h]||"";i=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const v=l[h];return p&&!v?u[m]=void 0:u[m]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:i,pattern:t}}function FO(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Wg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function $O(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Wg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Vg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function UO(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?fo(t):t;return{pathname:r?r.startsWith("/")?r:BO(r,e):e,search:VO(n),hash:HO(s)}}function BO(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function _f(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zO(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Hg(t,e){let r=zO(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function qg(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=fo(t):(s=Ql({},t),_t(!s.pathname||!s.pathname.includes("?"),_f("?","pathname","search",s)),_t(!s.pathname||!s.pathname.includes("#"),_f("#","pathname","hash",s)),_t(!s.search||!s.search.includes("#"),_f("#","search","hash",s)));let o=t===""||s.pathname==="",i=o?"/":s.pathname,l;if(i==null)l=r;else{let h=e.length-1;if(!n&&i.startsWith("..")){let m=i.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}l=h>=0?e[h]:"/"}let c=UO(s,l),u=i&&i!=="/"&&i.endsWith("/"),d=(o||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const ea=t=>t.join("/").replace(/\/\/+/g,"/"),WO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),VO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,HO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function qO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Sj=["post","put","patch","delete"];new Set(Sj);const KO=["get",...Sj];new Set(KO);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jl(){return Jl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jl.apply(this,arguments)}const Kg=f.createContext(null),GO=f.createContext(null),pa=f.createContext(null),oh=f.createContext(null),ls=f.createContext({outlet:null,matches:[],isDataRoute:!1}),Nj=f.createContext(null);function YO(t,e){let{relative:r}=e===void 0?{}:e;Fi()||_t(!1);let{basename:n,navigator:s}=f.useContext(pa),{hash:o,pathname:i,search:l}=Cj(t,{relative:r}),c=i;return n!=="/"&&(c=i==="/"?n:ea([n,i])),s.createHref({pathname:c,search:l,hash:o})}function Fi(){return f.useContext(oh)!=null}function cs(){return Fi()||_t(!1),f.useContext(oh).location}function kj(t){f.useContext(pa).static||f.useLayoutEffect(t)}function vn(){let{isDataRoute:t}=f.useContext(ls);return t?cD():QO()}function QO(){Fi()||_t(!1);let t=f.useContext(Kg),{basename:e,future:r,navigator:n}=f.useContext(pa),{matches:s}=f.useContext(ls),{pathname:o}=cs(),i=JSON.stringify(Hg(s,r.v7_relativeSplatPath)),l=f.useRef(!1);return kj(()=>{l.current=!0}),f.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=qg(u,JSON.parse(i),o,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ea([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,o,t])}function JO(){let{matches:t}=f.useContext(ls),e=t[t.length-1];return e?e.params:{}}function Cj(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=f.useContext(pa),{matches:s}=f.useContext(ls),{pathname:o}=cs(),i=JSON.stringify(Hg(s,n.v7_relativeSplatPath));return f.useMemo(()=>qg(t,JSON.parse(i),o,r==="path"),[t,i,o,r])}function XO(t,e){return ZO(t,e)}function ZO(t,e,r,n){Fi()||_t(!1);let{navigator:s}=f.useContext(pa),{matches:o}=f.useContext(ls),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let u=cs(),d;if(e){var h;let y=typeof e=="string"?fo(e):e;c==="/"||(h=y.pathname)!=null&&h.startsWith(c)||_t(!1),d=y}else d=u;let m=d.pathname||"/",p=m;if(c!=="/"){let y=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(y.length).join("/")}let v=kO(t,{pathname:p}),g=sD(v&&v.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:ea([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:ea([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,r,n);return e&&g?f.createElement(oh.Provider,{value:{location:Jl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:zs.Pop}},g):g}function eD(){let t=lD(),e=qO(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},e),r?f.createElement("pre",{style:s},r):null,null)}const tD=f.createElement(eD,null);class rD extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?f.createElement(ls.Provider,{value:this.props.routeContext},f.createElement(Nj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function nD(t){let{routeContext:e,match:r,children:n}=t,s=f.useContext(Kg);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),f.createElement(ls.Provider,{value:e},n)}function sD(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var o;if(!r)return null;if(r.errors)t=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=i.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||_t(!1),i=i.slice(0,Math.min(i.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:p}=r,v=h.route.loader&&m[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||v){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,h,m)=>{let p,v=!1,g=null,y=null;r&&(p=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||tD,c&&(u<0&&m===0?(v=!0,y=null):u===m&&(v=!0,y=h.route.hydrateFallbackElement||null)));let w=e.concat(i.slice(0,m+1)),x=()=>{let _;return p?_=g:v?_=y:h.route.Component?_=f.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=d,f.createElement(nD,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:r!=null},children:_})};return r&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?f.createElement(rD,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):x()},null)}var Ej=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Ej||{}),yd=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(yd||{});function aD(t){let e=f.useContext(Kg);return e||_t(!1),e}function oD(t){let e=f.useContext(GO);return e||_t(!1),e}function iD(t){let e=f.useContext(ls);return e||_t(!1),e}function Pj(t){let e=iD(),r=e.matches[e.matches.length-1];return r.route.id||_t(!1),r.route.id}function lD(){var t;let e=f.useContext(Nj),r=oD(yd.UseRouteError),n=Pj(yd.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function cD(){let{router:t}=aD(Ej.UseNavigateStable),e=Pj(yd.UseNavigateStable),r=f.useRef(!1);return kj(()=>{r.current=!0}),f.useCallback(function(s,o){o===void 0&&(o={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Jl({fromRouteId:e},o)))},[t,e])}function uD(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function lp(t){let{to:e,replace:r,state:n,relative:s}=t;Fi()||_t(!1);let{future:o,static:i}=f.useContext(pa),{matches:l}=f.useContext(ls),{pathname:c}=cs(),u=vn(),d=qg(e,Hg(l,o.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return f.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:s}),[u,h,s,r,n]),null}function vt(t){_t(!1)}function dD(t){let{basename:e="/",children:r=null,location:n,navigationType:s=zs.Pop,navigator:o,static:i=!1,future:l}=t;Fi()&&_t(!1);let c=e.replace(/^\/*/,"/"),u=f.useMemo(()=>({basename:c,navigator:o,static:i,future:Jl({v7_relativeSplatPath:!1},l)}),[c,l,o,i]);typeof n=="string"&&(n=fo(n));let{pathname:d="/",search:h="",hash:m="",state:p=null,key:v="default"}=n,g=f.useMemo(()=>{let y=Vg(d,c);return y==null?null:{location:{pathname:y,search:h,hash:m,state:p,key:v},navigationType:s}},[c,d,h,m,p,v,s]);return g==null?null:f.createElement(pa.Provider,{value:u},f.createElement(oh.Provider,{children:r,value:g}))}function hD(t){let{children:e,location:r}=t;return XO(cp(e),r)}new Promise(()=>{});function cp(t,e){e===void 0&&(e=[]);let r=[];return f.Children.forEach(t,(n,s)=>{if(!f.isValidElement(n))return;let o=[...e,s];if(n.type===f.Fragment){r.push.apply(r,cp(n.props.children,o));return}n.type!==vt&&_t(!1),!n.props.index||!n.props.children||_t(!1);let i={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=cp(n.props.children,o)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function up(){return up=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},up.apply(this,arguments)}function fD(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,o;for(o=0;o<n.length;o++)s=n[o],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function mD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function pD(t,e){return t.button===0&&(!e||e==="_self")&&!mD(t)}const gD=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],vD="6";try{window.__reactRouterVersion=vD}catch{}const xD="startTransition",rw=Gp[xD];function yD(t){let{basename:e,children:r,future:n,window:s}=t,o=f.useRef();o.current==null&&(o.current=jO({window:s,v5Compat:!0}));let i=o.current,[l,c]=f.useState({action:i.action,location:i.location}),{v7_startTransition:u}=n||{},d=f.useCallback(h=>{u&&rw?rw(()=>c(h)):c(h)},[c,u]);return f.useLayoutEffect(()=>i.listen(d),[i,d]),f.useEffect(()=>uD(n),[n]),f.createElement(dD,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:i,future:n})}const wD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_D=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dp=f.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:o,replace:i,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,m=fD(e,gD),{basename:p}=f.useContext(pa),v,g=!1;if(typeof u=="string"&&_D.test(u)&&(v=u,wD))try{let _=new URL(window.location.href),b=u.startsWith("//")?new URL(_.protocol+u):new URL(u),j=Vg(b.pathname,p);b.origin===_.origin&&j!=null?u=j+b.search+b.hash:g=!0}catch{}let y=YO(u,{relative:s}),w=bD(u,{replace:i,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function x(_){n&&n(_),_.defaultPrevented||w(_)}return f.createElement("a",up({},m,{href:v||y,onClick:g||o?n:x,ref:r,target:c}))});var nw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(nw||(nw={}));var sw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(sw||(sw={}));function bD(t,e){let{target:r,replace:n,state:s,preventScrollReset:o,relative:i,viewTransition:l}=e===void 0?{}:e,c=vn(),u=cs(),d=Cj(t,{relative:i});return f.useCallback(h=>{if(pD(h,r)){h.preventDefault();let m=n!==void 0?n:xd(u)===xd(d);c(t,{replace:m,state:s,preventScrollReset:o,relative:i,viewTransition:l})}},[u,c,d,n,s,r,t,o,i,l])}var hp=function(t,e){return hp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},hp(t,e)};function Tj(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");hp(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var $r=function(){return $r=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},$r.apply(this,arguments)};function ga(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function Rj(t,e,r,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(o=(s<3?i(o):s>3?i(e,r,o):i(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}function Oj(t,e){return function(r,n){e(r,n,t)}}function Dj(t,e,r,n,s,o){function i(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,d=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),h,m=!1,p=r.length-1;p>=0;p--){var v={};for(var g in n)v[g]=g==="access"?{}:n[g];for(var g in n.access)v.access[g]=n.access[g];v.addInitializer=function(w){if(m)throw new TypeError("Cannot add initializers after decoration has completed");o.push(i(w||null))};var y=(0,r[p])(l==="accessor"?{get:d.get,set:d.set}:d[c],v);if(l==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(h=i(y.get))&&(d.get=h),(h=i(y.set))&&(d.set=h),(h=i(y.init))&&s.unshift(h)}else(h=i(y))&&(l==="field"?s.unshift(h):d[c]=h)}u&&Object.defineProperty(u,n.name,d),m=!0}function Aj(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0}function Mj(t){return typeof t=="symbol"?t:"".concat(t)}function Ij(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function Lj(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ge(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(d){try{u(n.next(d))}catch(h){i(h)}}function c(d){try{u(n.throw(d))}catch(h){i(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})}function Fj(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(o=u[0]&2?s.return:u[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,u[1])).done)return o;switch(s=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],s=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var ih=Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function $j(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ih(e,t,r)}function wd(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gg(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,o=[],i;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(l){i={error:l}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return o}function Uj(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Gg(arguments[e]));return t}function Bj(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],i=0,l=o.length;i<l;i++,s++)n[s]=o[i];return n}function Yg(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,o;n<s;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function ki(t){return this instanceof ki?(this.v=t,this):new ki(t)}function zj(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",i),s[Symbol.asyncIterator]=function(){return this},s;function i(p){return function(v){return Promise.resolve(v).then(p,h)}}function l(p,v){n[p]&&(s[p]=function(g){return new Promise(function(y,w){o.push([p,g,y,w])>1||c(p,g)})},v&&(s[p]=v(s[p])))}function c(p,v){try{u(n[p](v))}catch(g){m(o[0][3],g)}}function u(p){p.value instanceof ki?Promise.resolve(p.value.v).then(d,h):m(o[0][2],p)}function d(p){c("next",p)}function h(p){c("throw",p)}function m(p,v){p(v),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Wj(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,o){e[s]=t[s]?function(i){return(r=!r)?{value:ki(t[s](i)),done:!1}:o?o(i):i}:o}}function Vj(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof wd=="function"?wd(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(i){return new Promise(function(l,c){i=t[o](i),s(l,c,i.done,i.value)})}}function s(o,i,l,c){Promise.resolve(c).then(function(u){o({value:u,done:l})},i)}}function Hj(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var jD=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},fp=function(t){return fp=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},fp(t)};function qj(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=fp(t),n=0;n<r.length;n++)r[n]!=="default"&&ih(e,t,r[n]);return jD(e,t),e}function Kj(t){return t&&t.__esModule?t:{default:t}}function Gj(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function Yj(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function Qj(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Jj(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var SD=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function Xj(t){function e(o){t.error=t.hasError?new SD(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(s,function(i){return e(i),s()})}else n|=1}catch(i){e(i)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function Zj(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,o,i){return n?e?".jsx":".js":s&&(!o||!i)?r:s+o+"."+i.toLowerCase()+"js"}):t}const ND={__extends:Tj,__assign:$r,__rest:ga,__decorate:Rj,__param:Oj,__esDecorate:Dj,__runInitializers:Aj,__propKey:Mj,__setFunctionName:Ij,__metadata:Lj,__awaiter:ge,__generator:Fj,__createBinding:ih,__exportStar:$j,__values:wd,__read:Gg,__spread:Uj,__spreadArrays:Bj,__spreadArray:Yg,__await:ki,__asyncGenerator:zj,__asyncDelegator:Wj,__asyncValues:Vj,__makeTemplateObject:Hj,__importStar:qj,__importDefault:Kj,__classPrivateFieldGet:Gj,__classPrivateFieldSet:Yj,__classPrivateFieldIn:Qj,__addDisposableResource:Jj,__disposeResources:Xj,__rewriteRelativeImportExtension:Zj},kD=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Jj,get __assign(){return $r},__asyncDelegator:Wj,__asyncGenerator:zj,__asyncValues:Vj,__await:ki,__awaiter:ge,__classPrivateFieldGet:Gj,__classPrivateFieldIn:Qj,__classPrivateFieldSet:Yj,__createBinding:ih,__decorate:Rj,__disposeResources:Xj,__esDecorate:Dj,__exportStar:$j,__extends:Tj,__generator:Fj,__importDefault:Kj,__importStar:qj,__makeTemplateObject:Hj,__metadata:Lj,__param:Oj,__propKey:Mj,__read:Gg,__rest:ga,__rewriteRelativeImportExtension:Zj,__runInitializers:Aj,__setFunctionName:Ij,__spread:Uj,__spreadArray:Yg,__spreadArrays:Bj,__values:wd,default:ND},Symbol.toStringTag,{value:"Module"})),CD="modulepreload",ED=function(t){return"/"+t},aw={},$i=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=ED(c),c in aw)return;aw[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":CD,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,p)=>{h.addEventListener("load",m),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})},PD=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>$i(async()=>{const{default:n}=await Promise.resolve().then(()=>mo);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class Qg extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class ow extends Qg{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class iw extends Qg{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class lw extends Qg{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var mp;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(mp||(mp={}));class TD{constructor(e,{headers:r={},customFetch:n,region:s=mp.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=PD(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ge(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:o,method:i,body:l,signal:c}=n;let u={},{region:d}=n;d||(d=this.region);const h=new URL(`${this.url}/${r}`);d&&d!=="any"&&(u["x-region"]=d,h.searchParams.set("forceFunctionRegion",d));let m;l&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",m=l):typeof l=="string"?(u["Content-Type"]="text/plain",m=l):typeof FormData<"u"&&l instanceof FormData?m=l:(u["Content-Type"]="application/json",m=JSON.stringify(l)):m=l;const p=yield this.fetch(h.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),o),body:m,signal:c}).catch(w=>{throw w.name==="AbortError"?w:new ow(w)}),v=p.headers.get("x-relay-error");if(v&&v==="true")throw new iw(p);if(!p.ok)throw new lw(p);let g=((s=p.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),y;return g==="application/json"?y=yield p.json():g==="application/octet-stream"||g==="application/pdf"?y=yield p.blob():g==="text/event-stream"?y=p:g==="multipart/form-data"?y=yield p.formData():y=yield p.text(),{data:y,error:null,response:p}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new ow(o)}:{data:null,error:o,response:o instanceof lw||o instanceof iw?o.context:void 0}}})}}var ar={};const Ui=B0(kD);var uu={},du={},hu={},fu={},mu={},RD=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ci=RD();const OD=Ci.fetch,eS=Ci.fetch.bind(Ci),tS=Ci.Headers,DD=Ci.Request,AD=Ci.Response,mo=Object.freeze(Object.defineProperty({__proto__:null,Headers:tS,Request:DD,Response:AD,default:eS,fetch:OD},Symbol.toStringTag,{value:"Module"})),MD=B0(mo);var pu={},cw;function rS(){if(cw)return pu;cw=1,Object.defineProperty(pu,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return pu.default=t,pu}var uw;function nS(){if(uw)return mu;uw=1,Object.defineProperty(mu,"__esModule",{value:!0});const t=Ui,e=t.__importDefault(MD),r=t.__importDefault(rS());class n{constructor(o){var i,l;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(i=o.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=o.signal,this.isMaybeSingle=(l=o.isMaybeSingle)!==null&&l!==void 0?l:!1,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,i){return this.headers=new Headers(this.headers),this.headers.set(o,i),this}then(o,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var d,h,m,p;let v=null,g=null,y=null,w=u.status,x=u.statusText;if(u.ok){if(this.method!=="HEAD"){const E=await u.text();E===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?g=E:g=JSON.parse(E))}const b=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),j=(m=u.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");b&&j&&j.length>1&&(y=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(v={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,y=null,w=406,x="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const b=await u.text();try{v=JSON.parse(b),Array.isArray(v)&&u.status===404&&(g=[],v=null,w=200,x="OK")}catch{u.status===404&&b===""?(w=204,x="No Content"):v={message:b}}if(v&&this.isMaybeSingle&&(!((p=v==null?void 0:v.details)===null||p===void 0)&&p.includes("0 rows"))&&(v=null,w=200,x="OK"),v&&this.shouldThrowOnError)throw new r.default(v)}return{error:v,data:g,count:y,status:w,statusText:x}});return this.shouldThrowOnError||(c=c.catch(u=>{var d,h,m;return{error:{message:`${(d=u==null?void 0:u.name)!==null&&d!==void 0?d:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(h=u==null?void 0:u.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(m=u==null?void 0:u.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),c.then(o,i)}returns(){return this}overrideTypes(){return this}}return mu.default=n,mu}var dw;function sS(){if(dw)return fu;dw=1,Object.defineProperty(fu,"__esModule",{value:!0});const e=Ui.__importDefault(nS());class r extends e.default{select(s){let o=!1;const i=(s??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:o=!0,nullsFirst:i,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${s}.${o?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:o,referencedTable:i=o}={}){const l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,o,{foreignTable:i,referencedTable:l=i}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(u,`${o-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:o=!1,settings:i=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var d;const h=[s?"analyze":null,o?"verbose":null,i?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),m=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${h};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return fu.default=r,fu}var hw;function Jg(){if(hw)return hu;hw=1,Object.defineProperty(hu,"__esModule",{value:!0});const e=Ui.__importDefault(sS()),r=new RegExp("[,()]");class n extends e.default{eq(o,i){return this.url.searchParams.append(o,`eq.${i}`),this}neq(o,i){return this.url.searchParams.append(o,`neq.${i}`),this}gt(o,i){return this.url.searchParams.append(o,`gt.${i}`),this}gte(o,i){return this.url.searchParams.append(o,`gte.${i}`),this}lt(o,i){return this.url.searchParams.append(o,`lt.${i}`),this}lte(o,i){return this.url.searchParams.append(o,`lte.${i}`),this}like(o,i){return this.url.searchParams.append(o,`like.${i}`),this}likeAllOf(o,i){return this.url.searchParams.append(o,`like(all).{${i.join(",")}}`),this}likeAnyOf(o,i){return this.url.searchParams.append(o,`like(any).{${i.join(",")}}`),this}ilike(o,i){return this.url.searchParams.append(o,`ilike.${i}`),this}ilikeAllOf(o,i){return this.url.searchParams.append(o,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(o,i){return this.url.searchParams.append(o,`ilike(any).{${i.join(",")}}`),this}is(o,i){return this.url.searchParams.append(o,`is.${i}`),this}in(o,i){const l=Array.from(new Set(i)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(o,`in.(${l})`),this}contains(o,i){return typeof i=="string"?this.url.searchParams.append(o,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(o,`cs.{${i.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(i)}`),this}containedBy(o,i){return typeof i=="string"?this.url.searchParams.append(o,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(o,`cd.{${i.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(i)}`),this}rangeGt(o,i){return this.url.searchParams.append(o,`sr.${i}`),this}rangeGte(o,i){return this.url.searchParams.append(o,`nxl.${i}`),this}rangeLt(o,i){return this.url.searchParams.append(o,`sl.${i}`),this}rangeLte(o,i){return this.url.searchParams.append(o,`nxr.${i}`),this}rangeAdjacent(o,i){return this.url.searchParams.append(o,`adj.${i}`),this}overlaps(o,i){return typeof i=="string"?this.url.searchParams.append(o,`ov.${i}`):this.url.searchParams.append(o,`ov.{${i.join(",")}}`),this}textSearch(o,i,{config:l,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const d=l===void 0?"":`(${l})`;return this.url.searchParams.append(o,`${u}fts${d}.${i}`),this}match(o){return Object.entries(o).forEach(([i,l])=>{this.url.searchParams.append(i,`eq.${l}`)}),this}not(o,i,l){return this.url.searchParams.append(o,`not.${i}.${l}`),this}or(o,{foreignTable:i,referencedTable:l=i}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${o})`),this}filter(o,i,l){return this.url.searchParams.append(o,`${i}.${l}`),this}}return hu.default=n,hu}var fw;function aS(){if(fw)return du;fw=1,Object.defineProperty(du,"__esModule",{value:!0});const e=Ui.__importDefault(Jg());class r{constructor(s,{headers:o={},schema:i,fetch:l}){this.url=s,this.headers=new Headers(o),this.schema=i,this.fetch=l}select(s,o){const{head:i=!1,count:l}=o??{},c=i?"HEAD":"GET";let u=!1;const d=(s??"*").split("").map(h=>/\s/.test(h)&&!u?"":(h==='"'&&(u=!u),h)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:o,defaultToNull:i=!0}={}){var l;const c="POST";if(o&&this.headers.append("Prefer",`count=${o}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const u=s.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:o,ignoreDuplicates:i=!1,count:l,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((m,p)=>m.concat(Object.keys(p)),[]);if(h.length>0){const m=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(s,{count:o}={}){var i;const l="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:s}={}){var o;const i="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return du.default=r,du}var mw;function ID(){if(mw)return uu;mw=1,Object.defineProperty(uu,"__esModule",{value:!0});const t=Ui,e=t.__importDefault(aS()),r=t.__importDefault(Jg());class n{constructor(o,{headers:i={},schema:l,fetch:c}={}){this.url=o,this.headers=new Headers(i),this.schemaName=l,this.fetch=c}from(o){const i=new URL(`${this.url}/${o}`);return new e.default(i,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new n(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,i={},{head:l=!1,get:c=!1,count:u}={}){var d;let h;const m=new URL(`${this.url}/rpc/${o}`);let p;l||c?(h=l?"HEAD":"GET",Object.entries(i).filter(([g,y])=>y!==void 0).map(([g,y])=>[g,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([g,y])=>{m.searchParams.append(g,y)})):(h="POST",p=i);const v=new Headers(this.headers);return u&&v.set("Prefer",`count=${u}`),new r.default({method:h,url:m,headers:v,schema:this.schemaName,body:p,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return uu.default=n,uu}Object.defineProperty(ar,"__esModule",{value:!0});var oS=ar.PostgrestError=gS=ar.PostgrestBuilder=mS=ar.PostgrestTransformBuilder=hS=ar.PostgrestFilterBuilder=uS=ar.PostgrestQueryBuilder=lS=ar.PostgrestClient=void 0;const Bi=Ui,iS=Bi.__importDefault(ID());var lS=ar.PostgrestClient=iS.default;const cS=Bi.__importDefault(aS());var uS=ar.PostgrestQueryBuilder=cS.default;const dS=Bi.__importDefault(Jg());var hS=ar.PostgrestFilterBuilder=dS.default;const fS=Bi.__importDefault(sS());var mS=ar.PostgrestTransformBuilder=fS.default;const pS=Bi.__importDefault(nS());var gS=ar.PostgrestBuilder=pS.default;const vS=Bi.__importDefault(rS());oS=ar.PostgrestError=vS.default;var xS=ar.default={PostgrestClient:iS.default,PostgrestQueryBuilder:cS.default,PostgrestFilterBuilder:dS.default,PostgrestTransformBuilder:fS.default,PostgrestBuilder:pS.default,PostgrestError:vS.default};const LD=$0({__proto__:null,get PostgrestBuilder(){return gS},get PostgrestClient(){return lS},get PostgrestError(){return oS},get PostgrestFilterBuilder(){return hS},get PostgrestQueryBuilder(){return uS},get PostgrestTransformBuilder(){return mS},default:xS},[ar]),{PostgrestClient:FD,PostgrestQueryBuilder:Fz,PostgrestFilterBuilder:$z,PostgrestTransformBuilder:Uz,PostgrestBuilder:Bz,PostgrestError:zz}=xS||LD;class $D{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const UD="2.78.0",BD=`realtime-js/${UD}`,zD="1.0.0",pp=1e4,WD=1e3,VD=100;var Nl;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Nl||(Nl={}));var Tt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Tt||(Tt={}));var sn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(sn||(sn={}));var gp;(function(t){t.websocket="websocket"})(gp||(gp={}));var Ra;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ra||(Ra={}));class HD{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),o=r.getUint8(2);let i=this.HEADER_LENGTH+2;const l=n.decode(e.slice(i,i+s));i=i+s;const c=n.decode(e.slice(i,i+o));i=i+o;const u=JSON.parse(n.decode(e.slice(i,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class yS{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var tt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(tt||(tt={}));const pw=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((o,i)=>(o[i]=qD(i,t,e,s),o),{}):{}},qD=(t,e,r,n)=>{const s=e.find(l=>l.name===t),o=s==null?void 0:s.type,i=r[t];return o&&!n.includes(o)?wS(o,i):vp(i)},wS=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return QD(e,r)}switch(t){case tt.bool:return KD(e);case tt.float4:case tt.float8:case tt.int2:case tt.int4:case tt.int8:case tt.numeric:case tt.oid:return GD(e);case tt.json:case tt.jsonb:return YD(e);case tt.timestamp:return JD(e);case tt.abstime:case tt.date:case tt.daterange:case tt.int4range:case tt.int8range:case tt.money:case tt.reltime:case tt.text:case tt.time:case tt.timestamptz:case tt.timetz:case tt.tsrange:case tt.tstzrange:return vp(e);default:return vp(e)}},vp=t=>t,KD=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},GD=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},YD=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},QD=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let o;const i=t.slice(1,r);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(l=>wS(e,l))}return t},JD=t=>typeof t=="string"?t.replace(" ","T"):t,_S=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class bf{constructor(e,r,n={},s=pp){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var gw;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(gw||(gw={}));class kl{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=kl.syncState(this.state,s,o,i),this.pendingDiffs.forEach(c=>{this.state=kl.syncDiff(this.state,c,o,i)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=kl.syncDiff(this.state,s,o,i),l())}),this.onJoin((s,o,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:i})}),this.onLeave((s,o,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const o=this.cloneDeep(e),i=this.transformState(r),l={},c={};return this.map(o,(u,d)=>{i[u]||(c[u]=d)}),this.map(i,(u,d)=>{const h=o[u];if(h){const m=d.map(y=>y.presence_ref),p=h.map(y=>y.presence_ref),v=d.filter(y=>p.indexOf(y.presence_ref)<0),g=h.filter(y=>m.indexOf(y.presence_ref)<0);v.length>0&&(l[u]=v),g.length>0&&(c[u]=g)}else l[u]=d}),this.syncDiff(o,{joins:l,leaves:c},n,s)}static syncDiff(e,r,n,s){const{joins:o,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(o,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(p=>p.presence_ref),m=d.filter(p=>h.indexOf(p.presence_ref)<0);e[l].unshift(...m)}n(l,d,c)}),this.map(i,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,s(l,u,c),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var vw;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(vw||(vw={}));var Cl;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Cl||(Cl={}));var Gn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Gn||(Gn={}));class Xg{constructor(e,r={config:{}},n){var s,o;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Tt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new bf(this,sn.join,this.params,this.timeout),this.rejoinTimer=new yS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Tt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Tt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Tt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(sn.reply,{},(i,l)=>{this._trigger(this._replyEventName(l),i)}),this.presence=new kl(this),this.broadcastEndpointURL=_S(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Tt.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Cl.PRESENCE]&&this.bindings[Cl.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,h={},m={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(Gn.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(Gn.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var v;if(this.socket.setAuth(),p===void 0){e==null||e(Gn.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,y=(v=g==null?void 0:g.length)!==null&&v!==void 0?v:0,w=[];for(let x=0;x<y;x++){const _=g[x],{filter:{event:b,schema:j,table:E,filter:k}}=_,P=p&&p[x];if(P&&P.event===b&&P.schema===j&&P.table===E&&P.filter===k)w.push(Object.assign(Object.assign({},_),{id:P.id}));else{this.unsubscribe(),this.state=Tt.errored,e==null||e(Gn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(Gn.SUBSCRIBED);return}}).receive("error",p=>{this.state=Tt.errored,e==null||e(Gn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Gn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Tt.joined&&e===Cl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var s;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const i={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,i,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:i}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,l,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Tt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(sn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new bf(this,sn.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Tt.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,o=setTimeout(()=>s.abort(),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(o),i}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new bf(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>VD){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,o;const i=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=sn;if(n&&[l,c,u,d].indexOf(i)>=0&&n!==this._joinRef())return;let m=this._onMessage(i,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var v,g,y;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((y=(g=p.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===i}).map(p=>p.callback(m,n)):(o=this.bindings[i])===null||o===void 0||o.filter(p=>{var v,g,y,w,x,_;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const b=p.id,j=(v=p.filter)===null||v===void 0?void 0:v.event;return b&&((g=r.ids)===null||g===void 0?void 0:g.includes(b))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const b=(x=(w=p==null?void 0:p.filter)===null||w===void 0?void 0:w.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return b==="*"||b===((_=r==null?void 0:r.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:g,table:y,commit_timestamp:w,type:x,errors:_}=v;m=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:w,eventType:x,new:{},old:{},errors:_}),this._getPayloadRecords(v))}p.callback(m,n)})}_isClosed(){return this.state===Tt.closed}_isJoined(){return this.state===Tt.joined}_isJoining(){return this.state===Tt.joining}_isLeaving(){return this.state===Tt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),o={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&Xg.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(sn.close,{},e)}_onError(e){this._on(sn.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Tt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=pw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=pw(e.columns,e.old_record)),r}}const jf=()=>{},gu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},XD=[1e3,2e3,5e3,1e4],ZD=1e4,eA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class tA{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=pp,this.transport=null,this.heartbeatIntervalMs=gu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=jf,this.ref=0,this.reconnectTimer=null,this.logger=jf,this.conn=null,this.sendBuffer=[],this.serializer=new HD,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...i)=>$i(async()=>{const{default:l}=await Promise.resolve().then(()=>mo);return{default:l}},void 0).then(({default:l})=>l(...i)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...i)=>o(...i)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${gp.websocket}`,this.httpEndpoint=_S(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=$D.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:zD}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Nl.connecting:return Ra.Connecting;case Nl.open:return Ra.Open;case Nl.closing:return Ra.Closing;default:return Ra.Closed}}isConnected(){return this.connectionState()===Ra.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(o=>o.topic===n);if(s)return s;{const o=new Xg(`realtime:${e}`,r,this);return this.channels.push(o),o}}push(e){const{topic:r,event:n,payload:s,ref:o}=e,i=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${o})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(WD,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},gu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:o,ref:i}=r,l=i?`(${i})`:"",c=o.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),o),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,o,i)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(sn.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([eA],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:BD};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(sn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new yS(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},gu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,o,i,l,c,u,d;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:pp,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:gu.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(i=e==null?void 0:e.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:jf,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:h=>XD[h-1]||ZD,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(h,m)=>m(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Zg extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ut(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class rA extends Zg{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class xp extends Zg{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const ev=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>$i(async()=>{const{default:n}=await Promise.resolve().then(()=>mo);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},nA=()=>ge(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield $i(()=>Promise.resolve().then(()=>mo),void 0)).Response:Response}),yp=t=>{if(Array.isArray(t))return t.map(r=>yp(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=yp(n)}),e},sA=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Sf=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},aA=(t,e,r)=>ge(void 0,void 0,void 0,function*(){const n=yield nA();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const o=t.status||500,i=(s==null?void 0:s.statusCode)||o+"";e(new rA(Sf(s),o,i))}).catch(s=>{e(new xp(Sf(s),s))}):e(new xp(Sf(t),t))}),oA=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(sA(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function vc(t,e,r,n,s,o){return ge(this,void 0,void 0,function*(){return new Promise((i,l)=>{t(r,oA(e,n,s,o)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>aA(c,l,n))})})}function Xl(t,e,r,n){return ge(this,void 0,void 0,function*(){return vc(t,"GET",e,r,n)})}function en(t,e,r,n,s){return ge(this,void 0,void 0,function*(){return vc(t,"POST",e,n,s,r)})}function wp(t,e,r,n,s){return ge(this,void 0,void 0,function*(){return vc(t,"PUT",e,n,s,r)})}function iA(t,e,r,n){return ge(this,void 0,void 0,function*(){return vc(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function tv(t,e,r,n,s){return ge(this,void 0,void 0,function*(){return vc(t,"DELETE",e,n,s,r)})}class lA{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return ge(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ut(e))return{data:null,error:e};throw e}})}}var bS;class cA{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[bS]="BlobDownloadBuilder",this.promise=null}asStream(){return new lA(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ge(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ut(e))return{data:null,error:e};throw e}})}}bS=Symbol.toStringTag;const uA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},xw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class dA{constructor(e,r={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=ev(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,s){return ge(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},xw),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=n,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(e=="PUT"?wp:en)(this.fetch,`${this.url}/object/${d}`,o,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ut(o))return{data:null,error:o};throw o}})}upload(e,r,n){return ge(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return ge(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),i=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:xw.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield wp(this.fetch,l.toString(),c,{headers:d});return{data:{path:o,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(ut(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return ge(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const o=yield en(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),i=new URL(this.url+o.url),l=i.searchParams.get("token");if(!l)throw new Zg("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ut(n))return{data:null,error:n};throw n}})}update(e,r,n){return ge(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return ge(this,void 0,void 0,function*(){try{return{data:yield en(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ut(s))return{data:null,error:s};throw s}})}copy(e,r,n){return ge(this,void 0,void 0,function*(){try{return{data:{path:(yield en(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ut(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return ge(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield en(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ut(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return ge(this,void 0,void 0,function*(){try{const s=yield en(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ut(s))return{data:null,error:s};throw s}})}download(e,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=o?`?${o}`:"",l=this._getFinalPath(e),c=()=>Xl(this.fetch,`${this.url}/${s}/${l}${i}`,{headers:this.headers,noResolveJson:!0});return new cA(c,this.shouldThrowOnError)}info(e){return ge(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Xl(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:yp(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ut(n))return{data:null,error:n};throw n}})}exists(e){return ge(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield iA(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ut(n)&&n instanceof xp){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&s.push(o);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return ge(this,void 0,void 0,function*(){try{return{data:yield tv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ut(r))return{data:null,error:r};throw r}})}list(e,r,n){return ge(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},uA),r),{prefix:e||""});return{data:yield en(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ut(s))return{data:null,error:s};throw s}})}listV2(e,r){return ge(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield en(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ut(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const jS="2.78.0",SS={"X-Client-Info":`storage-js/${jS}`};class hA{constructor(e,r={},n,s){this.shouldThrowOnError=!1;const o=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},SS),r),this.fetch=ev(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ge(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield Xl(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ut(r))return{data:null,error:r};throw r}})}getBucket(e){return ge(this,void 0,void 0,function*(){try{return{data:yield Xl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ut(r))return{data:null,error:r};throw r}})}createBucket(e){return ge(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield en(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ut(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return ge(this,void 0,void 0,function*(){try{return{data:yield wp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ut(n))return{data:null,error:n};throw n}})}emptyBucket(e){return ge(this,void 0,void 0,function*(){try{return{data:yield en(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ut(r))return{data:null,error:r};throw r}})}deleteBucket(e){return ge(this,void 0,void 0,function*(){try{return{data:yield tv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ut(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class fA{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},SS),r),this.fetch=ev(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ge(this,void 0,void 0,function*(){try{return{data:yield en(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ut(r))return{data:null,error:r};throw r}})}listBuckets(e){return ge(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Xl(this.fetch,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ut(r))return{data:null,error:r};throw r}})}deleteBucket(e){return ge(this,void 0,void 0,function*(){try{return{data:yield tv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ut(r))return{data:null,error:r};throw r}})}}const rv={"X-Client-Info":`storage-js/${jS}`,"Content-Type":"application/json"};class NS extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Nr(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Nf extends NS{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class mA extends NS{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var yw;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(yw||(yw={}));const nv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>$i(async()=>{const{default:n}=await Promise.resolve().then(()=>mo);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},pA=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ww=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),gA=(t,e,r)=>ge(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const s=t.status||500,o=t;if(typeof o.json=="function")o.json().then(i=>{const l=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||s+"";e(new Nf(ww(i),s,l))}).catch(()=>{const i=s+"",l=o.statusText||`HTTP ${s} error`;e(new Nf(l,s,i))});else{const i=s+"",l=o.statusText||`HTTP ${s} error`;e(new Nf(l,s,i))}}else e(new mA(ww(t),t))}),vA=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(pA(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r)):s};function xA(t,e,r,n,s,o){return ge(this,void 0,void 0,function*(){return new Promise((i,l)=>{t(r,vA(e,n,s,o)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>i(c)).catch(c=>gA(c,l,n))})})}function kr(t,e,r,n,s){return ge(this,void 0,void 0,function*(){return xA(t,"POST",e,n,s,r)})}class yA{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},rv),r),this.fetch=nv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ge(this,void 0,void 0,function*(){try{return{data:(yield kr(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}getIndex(e,r){return ge(this,void 0,void 0,function*(){try{return{data:yield kr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nr(n))return{data:null,error:n};throw n}})}listIndexes(e){return ge(this,void 0,void 0,function*(){try{return{data:yield kr(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return ge(this,void 0,void 0,function*(){try{return{data:(yield kr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nr(n))return{data:null,error:n};throw n}})}}class wA{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},rv),r),this.fetch=nv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ge(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield kr(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}getVectors(e){return ge(this,void 0,void 0,function*(){try{return{data:yield kr(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}listVectors(e){return ge(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield kr(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}queryVectors(e){return ge(this,void 0,void 0,function*(){try{return{data:yield kr(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}deleteVectors(e){return ge(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield kr(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}}class _A{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},rv),r),this.fetch=nv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ge(this,void 0,void 0,function*(){try{return{data:(yield kr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}getBucket(e){return ge(this,void 0,void 0,function*(){try{return{data:yield kr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}listBuckets(){return ge(this,arguments,void 0,function*(e={}){try{return{data:yield kr(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}deleteBucket(e){return ge(this,void 0,void 0,function*(){try{return{data:(yield kr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nr(r))return{data:null,error:r};throw r}})}}class bA extends _A{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new jA(this.url,this.headers,e,this.fetch)}}class jA extends yA{constructor(e,r,n,s){super(e,r,s),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ge(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ge(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ge(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ge(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new SA(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class SA extends wA{constructor(e,r,n,s,o){super(e,r,o),this.vectorBucketName=n,this.indexName=s}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ge(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ge(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ge(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ge(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ge(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class NA extends hA{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new dA(this.url,this.headers,e,this.fetch)}get vectors(){return new bA(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new fA(this.url+"/iceberg",this.headers,this.fetch)}}const kA="2.78.0";let dl="";typeof Deno<"u"?dl="deno":typeof document<"u"?dl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?dl="react-native":dl="node";const CA={"X-Client-Info":`supabase-js-${dl}/${kA}`},EA={headers:CA},PA={schema:"public"},TA={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},RA={},OA=t=>{let e;return t?e=t:typeof fetch>"u"?e=eS:e=fetch,(...r)=>e(...r)},DA=()=>typeof Headers>"u"?tS:Headers,AA=(t,e,r)=>{const n=OA(r),s=DA();return async(o,i)=>{var l;const c=(l=await e())!==null&&l!==void 0?l:t;let u=new s(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(o,Object.assign(Object.assign({},i),{headers:u}))}};function MA(t){return t.endsWith("/")?t:t+"/"}function IA(t,e){var r,n;const{db:s,auth:o,realtime:i,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),o),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}function LA(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(MA(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const kS="2.78.0",Ro=30*1e3,_p=3,kf=_p*Ro,FA="http://localhost:9999",$A="supabase.auth.token",UA={"X-Client-Info":`gotrue-js/${kS}`},bp="X-Supabase-Api-Version",CS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BA=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,zA=10*60*1e3;class Zl extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function we(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class WA extends Zl{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function VA(t){return we(t)&&t.name==="AuthApiError"}class Oa extends Zl{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class va extends Zl{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Qr extends va{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function HA(t){return we(t)&&t.name==="AuthSessionMissingError"}class _o extends va{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class vu extends va{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class xu extends va{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function qA(t){return we(t)&&t.name==="AuthImplicitGrantRedirectError"}class _w extends va{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class jp extends va{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Cf(t){return we(t)&&t.name==="AuthRetryableFetchError"}class bw extends va{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Sp extends va{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const _d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),jw=` 	
\r=`.split(""),KA=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<jw.length;e+=1)t[jw[e].charCodeAt(0)]=-2;for(let e=0;e<_d.length;e+=1)t[_d[e].charCodeAt(0)]=e;return t})();function Sw(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(_d[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(_d[n]),e.queuedBits-=6}}function ES(t,e,r){const n=KA[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Nw(t){const e=[],r=i=>{e.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=i=>{QA(i,n,r)};for(let i=0;i<t.length;i+=1)ES(t.charCodeAt(i),s,o);return e.join("")}function GA(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function YA(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}GA(n,e)}}function QA(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Zo(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)ES(t.charCodeAt(s),r,n);return new Uint8Array(e)}function JA(t){const e=[];return YA(t,r=>e.push(r)),new Uint8Array(e)}function La(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>Sw(s,r,n)),Sw(null,r,n),e.join("")}function XA(t){return Math.round(Date.now()/1e3)+t}function ZA(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const er=()=>typeof window<"u"&&typeof document<"u",Na={tested:!1,writable:!1},PS=()=>{if(!er())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Na.tested)return Na.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Na.tested=!0,Na.writable=!0}catch{Na.tested=!0,Na.writable=!1}return Na.writable};function eM(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const TS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>$i(async()=>{const{default:n}=await Promise.resolve().then(()=>mo);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},tM=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Oo=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},ka=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ws=async(t,e)=>{await t.removeItem(e)};class lh{constructor(){this.promise=new lh.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}lh.promiseConstructor=Promise;function Ef(t){const e=t.split(".");if(e.length!==3)throw new Sp("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!BA.test(e[n]))throw new Sp("JWT not in base64url format");return{header:JSON.parse(Nw(e[0])),payload:JSON.parse(Nw(e[1])),signature:Zo(e[2]),raw:{header:e[0],payload:e[1]}}}async function rM(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function nM(t,e){return new Promise((n,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await t(o);if(!e(o,null,i)){n(i);return}}catch(i){if(!e(o,i)){s(i);return}}})()})}function sM(t){return("0"+t.toString(16)).substr(-2)}function aM(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let o=0;o<56;o++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,sM).join("")}async function oM(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function iM(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await oM(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function bo(t,e,r=!1){const n=aM();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Oo(t,`${e}-code-verifier`,s);const o=await iM(n);return[o,n===o?"plain":"s256"]}const lM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function cM(t){const e=t.headers.get(bp);if(!e||!e.match(lM))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function uM(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function dM(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const hM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function jo(t){if(!hM.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Pf(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function fM(t,e){return new Proxy(t,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,s)}})}function kw(t){return JSON.parse(JSON.stringify(t))}const Pa=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),mM=[502,503,504];async function Cw(t){var e;if(!tM(t))throw new jp(Pa(t),0);if(mM.includes(t.status))throw new jp(Pa(t),t.status);let r;try{r=await t.json()}catch(o){throw new Oa(Pa(o),o)}let n;const s=cM(t);if(s&&s.getTime()>=CS["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new bw(Pa(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Qr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new bw(Pa(r),t.status,r.weak_password.reasons);throw new WA(Pa(r),t.status||500,n)}const pM=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Ee(t,e,r,n){var s;const o=Object.assign({},n==null?void 0:n.headers);o[bp]||(o[bp]=CS["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const i=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await gM(t,e,r+l,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function gM(t,e,r,n,s,o){const i=pM(e,n,s,o);let l;try{l=await t(r,Object.assign({},i))}catch(c){throw console.error(c),new jp(Pa(c),0)}if(l.ok||await Cw(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Cw(c)}}function Jr(t){var e;let r=null;yM(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=XA(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Ew(t){const e=Jr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Rs(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function vM(t){return{data:t,error:null}}function xM(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o}=t,i=ga(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function Pw(t){return t}function yM(t){return t.access_token&&t.refresh_token&&t.expires_in}const Tf=["global","local","others"];class wM{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=TS(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=Tf[0]){if(Tf.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Tf.join(", ")}`);try{return await Ee(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await Ee(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Rs})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=ga(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Ee(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:xM,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(we(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Ee(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Rs})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,o,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Ee(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:Pw});if(d.error)throw d.error;const h=await d.json(),m=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(v.split(";")[1].split("=")[1]);u[`${y}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(we(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){jo(e);try{return await Ee(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Rs})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){jo(e);try{return await Ee(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Rs})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){jo(e);try{return await Ee(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Rs})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){jo(e.userId);try{const{data:r,error:n}=await Ee(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(we(r))return{data:null,error:r};throw r}}async _deleteFactor(e){jo(e.userId),jo(e.id);try{return{data:await Ee(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,o,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Ee(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:Pw});if(d.error)throw d.error;const h=await d.json(),m=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(v.split(";")[1].split("=")[1]);u[`${y}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(we(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await Ee(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(we(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await Ee(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(we(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await Ee(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(we(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Ee(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await Ee(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(we(r))return{data:null,error:r};throw r}}}function Tw(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const So={debug:!!(globalThis&&PS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class RS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class _M extends RS{}async function bM(t,e,r){So.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),So.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){So.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{So.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw So.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new _M(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(So.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function jM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function OS(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function SM(t){return parseInt(t,16)}function NM(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function kM(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:o=new Date,nonce:i,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:m}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=OS(t.address),v=d?`${d}://${n}`:n,g=t.statement?`${t.statement}
`:"",y=`${v} wants you to sign in with your Ethereum account:
${p}

${g}`;let w=`URI: ${h}
Version: ${m}
Chain ID: ${r}${i?`
Nonce: ${i}`:""}
Issued At: ${o.toISOString()}`;if(s&&(w+=`
Expiration Time: ${s.toISOString()}`),l&&(w+=`
Not Before: ${l.toISOString()}`),c&&(w+=`
Request ID: ${c}`),u){let x=`
Resources:`;for(const _ of u){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);x+=`
- ${_}`}w+=x}return`${y}
${w}`}class jt extends Error{constructor({message:e,code:r,cause:n,name:s}){var o;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(o=s??(n instanceof Error?n.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class bd extends jt{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function CM({error:t,options:e}){var r,n,s;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new jt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new jt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new jt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new jt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new jt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new jt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new jt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new jt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const i=window.location.hostname;if(DS(i)){if(o.rp.id!==i)return new jt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new jt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new jt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new jt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new jt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function EM({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new jt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new jt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(DS(n)){if(r.rpId!==n)return new jt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new jt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new jt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new jt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class PM{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const TM=new PM;function RM(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=ga(t,["challenge","user","excludeCredentials"]),o=Zo(e).buffer,i=Object.assign(Object.assign({},r),{id:Zo(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:o,user:i});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Zo(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function OM(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=ga(t,["challenge","allowCredentials"]),s=Zo(e).buffer,o=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let i=0;i<r.length;i++){const l=r[i];o.allowCredentials[i]=Object.assign(Object.assign({},l),{id:Zo(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return o}function DM(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:La(new Uint8Array(t.response.attestationObject)),clientDataJSON:La(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function AM(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:La(new Uint8Array(s.authenticatorData)),clientDataJSON:La(new Uint8Array(s.clientDataJSON)),signature:La(new Uint8Array(s.signature)),userHandle:s.userHandle?La(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function DS(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Rw(){var t,e;return!!(er()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function MM(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new bd("Browser returned unexpected credential type",e)}:{data:null,error:new bd("Empty credential response",e)}}catch(e){return{data:null,error:CM({error:e,options:t})}}}async function IM(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new bd("Browser returned unexpected credential type",e)}:{data:null,error:new bd("Empty credential response",e)}}catch(e){return{data:null,error:EM({error:e,options:t})}}}const LM={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},FM={userVerification:"preferred",hints:["security-key"]};function jd(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const o in s){const i=s[o];if(i!==void 0)if(Array.isArray(i))n[o]=i;else if(r(i))n[o]=i;else if(e(i)){const l=n[o];e(l)?n[o]=jd(l,i):n[o]=jd(i)}else n[o]=i}return n}function $M(t,e){return jd(LM,t,e||{})}function UM(t,e){return jd(FM,t,e||{})}class BM{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},o){try{const{data:i,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!i)return{data:null,error:l};const c=s??TM.createNewAbortSignal();if(i.webauthn.type==="create"){const{user:u}=i.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(i.webauthn.type){case"create":{const u=$M(i.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:d,error:h}=await MM({publicKey:u,signal:c});return d?{data:{factorId:e,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=UM(i.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:d,error:h}=await IM(Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:e,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(i){return we(i)?{data:null,error:i}:{data:null,error:new Oa("Unexpected error in challenge",i)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},o){if(!r)return{data:null,error:new Zl("rpId is required for WebAuthn authentication")};try{if(!Rw())return{data:null,error:new Oa("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:o});if(!i)return{data:null,error:l};const{webauthn:c}=i;return this._verify({factorId:e,challengeId:i.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(i){return we(i)?{data:null,error:i}:{data:null,error:new Oa("Unexpected error in authenticate",i)}}}async _register({friendlyName:e,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},o){if(!r)return{data:null,error:new Zl("rpId is required for WebAuthn registration")};try{if(!Rw())return{data:null,error:new Oa("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this._enroll({friendlyName:e});if(!i)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===e&&m.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:i.id,friendlyName:i.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:o});return c?this._verify({factorId:i.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(i){return we(i)?{data:null,error:i}:{data:null,error:new Oa("Unexpected error in register",i)}}}}jM();const zM={url:FA,storageKey:$A,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:UA,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ow(t,e,r){return await r()}const No={};class ec{get jwks(){var e,r;return(r=(e=No[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){No[this.storageKey]=Object.assign(Object.assign({},No[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=No[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){No[this.storageKey]=Object.assign(Object.assign({},No[this.storageKey]),{cachedAt:e})}constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ec.nextInstanceID,ec.nextInstanceID+=1,this.instanceID>0&&er()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},zM),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new wM({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=TS(s.fetch),this.lock=s.lock||Ow,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:er()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=bM:this.lock=Ow,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new BM(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:PS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Tw(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Tw(this.memoryStorage)),er()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${kS}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=eM(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),er()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),qA(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return we(r)?{error:r}:{error:new Oa("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const o=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Jr}),{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(we(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var r,n,s;try{let o;if("email"in e){const{email:d,password:h,options:m}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await bo(this.storage,this.storageKey)),o=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:v},xform:Jr})}else if("phone"in e){const{phone:d,password:h,options:m}=e;o=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Jr})}else throw new vu("You must provide either an email or phone number and a password");const{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(we(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let r;if("email"in e){const{email:o,password:i,options:l}=e;r=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ew})}else if("phone"in e){const{phone:o,password:i,options:l}=e;r=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ew})}else throw new vu("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new _o}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(we(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,o,i,l,c,u,d,h,m;let p,v;if("message"in e)p=e.message,v=e.signature;else{const{chain:g,wallet:y,statement:w,options:x}=e;let _;if(er())if(typeof y=="object")_=y;else{const T=window;if("ethereum"in T&&typeof T.ethereum=="object"&&"request"in T.ethereum&&typeof T.ethereum.request=="function")_=T.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=y}const b=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href),j=await _.request({method:"eth_requestAccounts"}).then(T=>T).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=OS(j[0]);let k=(n=x==null?void 0:x.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!k){const T=await _.request({method:"eth_chainId"});k=SM(T)}const P={domain:b.host,address:E,statement:w,uri:b.href,version:"1",chainId:k,nonce:(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(i=(o=x==null?void 0:x.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&i!==void 0?i:new Date,expirationTime:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=x==null?void 0:x.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=x==null?void 0:x.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=kM(P),v=await _.request({method:"personal_sign",params:[NM(p),E]})}try{const{data:g,error:y}=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:v},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Jr});if(y)throw y;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new _o}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:y})}catch(g){if(we(g))return{data:{user:null,session:null},error:g};throw g}}async signInWithSolana(e){var r,n,s,o,i,l,c,u,d,h,m,p;let v,g;if("message"in e)v=e.message,g=e.signature;else{const{chain:y,wallet:w,statement:x,options:_}=e;let b;if(er())if(typeof w=="object")b=w;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))b=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=w}const j=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in b&&b.signIn){const E=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),x?{statement:x}:null));let k;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")k=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)k=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)v=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),g=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${j.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(n=_==null?void 0:_.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((i=_==null?void 0:_.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((u=_==null?void 0:_.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((h=(d=_==null?void 0:_.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",..._.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const E=await b.signMessage(new TextEncoder().encode(v),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=E}}try{const{data:y,error:w}=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:La(g)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Jr});if(w)throw w;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new _o}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:w})}catch(y){if(we(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const r=await ka(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:o,error:i}=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Jr});if(await ws(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new _o}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:i})}catch(o){if(we(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:o,nonce:i}=e,l=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Jr}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new _o}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(we(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,o,i;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await bo(this.storage,this.storageKey));const{error:h}=await Ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await Ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new vu("You must provide either an email or phone number.")}catch(l){if(we(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let s,o;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:l}=await Ee(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:Jr});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,u=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(we(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await bo(this.storage,this.storageKey)),await Ee(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:vM})}catch(o){if(we(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Qr;const{error:s}=await Ee(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(we(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:o}=e,{error:i}=await Ee(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:n,type:s,options:o}=e,{data:i,error:l}=await Ee(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new vu("You must provide either an email or phone number and a type")}catch(r){if(we(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await ka(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<kf:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const i=await ka(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=Pf()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const i={value:this.suppressGetSessionWarning};e.user=fM(e.user,i),i.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Rs}):await this._useSession(async r=>{var n,s,o;const{data:i,error:l}=r;if(l)throw l;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Qr}:await Ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Rs})})}catch(r){if(we(r))return HA(r)&&(await this._removeSession(),await ws(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:o}=n;if(o)throw o;if(!s.session)throw new Qr;const i=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await bo(this.storage,this.storageKey));const{data:u,error:d}=await Ee(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:Rs});if(d)throw d;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Qr;const r=Date.now()/1e3;let n=r,s=!0,o=null;const{payload:i}=Ef(e.access_token);if(i.exp&&(n=i.exp,s=n<=r),s){const{data:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(we(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:i,error:l}=r;if(l)throw l;e=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Qr;const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(we(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!er())throw new xu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new xu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new _w("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new xu("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new _w("No code detected.");const{data:x,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:o,refresh_token:i,expires_in:l,expires_at:c,token_type:u}=e;if(!o||!l||!i||!u)throw new xu("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const p=m-d;p*1e3<=Ro&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const v=m-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,d);const{data:g,error:y}=await this._getUser(o);if(y)throw y;const w={provider_token:n,provider_refresh_token:s,access_token:o,expires_in:h,expires_at:m,refresh_token:i,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(n){if(we(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await ka(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{error:o};const i=(n=s.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:l}=await this.admin.signOut(i,e);if(l&&!(VA(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await ws(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=ZA(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:o},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await bo(this.storage,this.storageKey,!0));try{return await Ee(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(we(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async o=>{var i,l,c,u,d;const{data:h,error:m}=o;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ee(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return er()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(we(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:o}}=r;if(s)throw s;const{options:i,provider:l,token:c,access_token:u,nonce:d}=e,h=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=o==null?void 0:o.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:Jr}),{data:m,error:p}=h;return p?{data:{user:null,session:null},error:p}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new _o}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),{data:m,error:p})}catch(s){if(we(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)throw i;return await Ee(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(we(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await nM(async s=>(s>0&&await rM(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Ee(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Jr})),(s,o)=>{const i=200*Math.pow(2,s);return o&&Cf(o)&&Date.now()+i-n<Ro})}catch(n){if(this._debug(r,"error",n),we(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),er()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await ka(this.storage,this.storageKey);if(s&&this.userStorage){let i=await ka(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await Oo(this.userStorage,this.storageKey+"-user",i)),s.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:Pf()}else if(s&&!s.user&&!s.user){const i=await ka(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await ws(this.storage,this.storageKey+"-user"),await Oo(this.storage,this.storageKey,s)):s.user=Pf()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const o=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<kf;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${kf}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),Cf(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(s.access_token);!l&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Qr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new lh;const{data:o,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!o.session)throw new Qr;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={data:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),we(o)){const i={data:null,error:o};return Cf(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){o.push(c)}});if(await Promise.all(i),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Oo(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const o=kw(s);await Oo(this.storage,this.storageKey,o)}else{const s=kw(r);await Oo(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await ws(this.storage,this.storageKey),await ws(this.storage,this.storageKey+"-code-verifier"),await ws(this.storage,this.storageKey+"-user"),this.userStorage&&await ws(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&er()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ro);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Ro);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ro}ms, refresh threshold is ${_p} ticks`),s<=_p&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof RS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!er()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,i]=await bo(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);s.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await Ee(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(we(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:u}=await Ee(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(we(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{data:null,error:o};const i=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?DM(e.webauthn.credential_response):AM(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await Ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:i,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(r){if(we(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{data:null,error:o};const i=await Ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(i.error)return i;const{data:l}=i;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:RM(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:OM(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(we(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])s.all.push(o),o.status==="verified"&&s[o.factor_type].push(o);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:s}=await this.getSession();if(s)return{data:null,error:s};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Ef(n.access_token);let i=null;o.aal&&(i=o.aal);let l=i;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:i,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?{data:null,error:s}:n?await Ee(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):{data:null,error:new Qr}})}catch(r){if(we(r))return{data:null,error:r};throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;if(o)return{data:null,error:o};if(!s)return{data:null,error:new Qr};const i=await Ee(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&er()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(we(n))return{data:null,error:n};throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;if(o)return{data:null,error:o};if(!s)return{data:null,error:new Qr};const i=await Ee(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&er()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(we(n))return{data:null,error:n};throw n}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+zA>s)return n;const{data:o,error:i}=await Ee(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,n=o.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:p,error:v}=await this.getSession();if(v||!p.session)return{data:null,error:v};n=p.session.access_token}const{header:s,payload:o,signature:i,raw:{header:l,payload:c}}=Ef(n);r!=null&&r.allowExpired||uM(o.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:o,header:s,signature:i},error:null}}const d=dM(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,i,JA(`${l}.${c}`)))throw new Sp("Invalid JWT signature");return{data:{claims:o,header:s,signature:i},error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}}}ec.nextInstanceID=0;const WM=ec;class VM extends WM{constructor(e){super(e)}}class HM{constructor(e,r,n){var s,o,i;this.supabaseUrl=e,this.supabaseKey=r;const l=LA(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:PA,realtime:RA,auth:Object.assign(Object.assign({},TA),{storageKey:c}),global:EA},d=IA(n??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=d.global.headers)!==null&&o!==void 0?o:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=d.auth)!==null&&i!==void 0?i:{},this.headers,d.global.fetch),this.fetch=AA(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new FD(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new NA(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new TD(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:o,storageKey:i,flowType:l,lock:c,debug:u},d,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new VM({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),d),storageKey:i,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:o,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new tA(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const qM=(t,e,r)=>new HM(t,e,r);function KM(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}KM()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const AS="https://studio.middar.com/",Lu="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlzcyI6InN1cGFiYXNlLWRlbW8iLCJpYXQiOjE3NjQwMDE2ODQsImV4cCI6MjA3OTU3NzY4NH0.sHsfXuCJ0n1y6g29oFxifU1KCkSZzCzZ7_x1zQDbFDY";console.log(" SUPABASE URL at runtime:",AS);console.log(" SUPABASE KEY (first 8):",Lu==null?void 0:Lu.slice(0,8));const Z=qM(AS,Lu,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storageKey:"middar_crm_session"}}),hr={async signUpStaff(t,e,r){console.log("[authService] Creating staff user:",{email:t,userData:r});try{const{data:n,error:s}=await Z.auth.signUp({email:t,password:e});if(s)throw s;if(!n.user)throw new Error("No user data returned from sign up");console.log("[authService] Auth user created:",n.user.id);const{data:o,error:i}=await Z.from("users").upsert({user_name:r.name,user_email:t,user_role:r.role,avatar:r.avatar,auth_user_id:n.user.id},{onConflict:"auth_user_id"}).select("*").single();if(i)throw console.error("[authService] Error creating user profile:",i),new Error(`Failed to create user profile: ${i.message}`);return console.log("[authService] User profile created:",o),console.log("[authService] User profile created:",o),{id:n.user.id,email:t,role:r.role,profile:{user_id:o.user_id||parseInt(n.user.id),user_name:o.user_name||r.name,user_email:o.user_email||t,user_role:o.user_role||r.role,avatar:o.avatar||r.avatar,auth_user_id:o.auth_user_id||n.user.id,client_contact:o.client_contact||null,company_name:o.company_name||null,company_name_ar:o.company_name_ar||null,user_name_ar:o.user_name_ar||null,user_phone:o.user_phone||null,created_at:o.created_at||new Date().toISOString(),updated_at:o.updated_at||new Date().toISOString()}}}catch(n){throw console.error("[authService] Error in signUpStaff:",n),n}},async createStaffUser(t,e,r){console.log("[authService] Creating staff user via Edge Function:",{email:t,userData:r});try{const{data:{session:n},error:s}=await Z.auth.getSession();if(s||!(n!=null&&n.access_token))throw new Error("No active session found");const o="https://studio.middar.com/",i=`${o}/functions/v1/crud-staff-user`,l=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.access_token}`,"x-user-id":n.user.id},body:JSON.stringify({action:"add",email:t,password:e,userData:{user_name:r.name,user_role:r.role,...r.localizedData||{}}})});if(!l.ok){const h=await l.json();throw new Error(h.error||`HTTP ${l.status}`)}const c=await l.json();if(console.log("[authService] Staff user created successfully:",c),!c.ok)throw new Error("Edge Function returned an error status");const u=c.auth_id??c.authUserId;if(!u)throw new Error("Auth user ID missing from response");if(c.user_id==null)throw new Error("User ID missing from response");const d=c.user_id??null;return{id:u,email:t,role:r.role,profile:{user_id:d,user_name:c.user_name||r.name,user_email:c.user_email||t,user_role:c.user_role||r.role,avatar:c.avatar||r.avatar,auth_user_id:u,client_contact:c.client_contact||null,company_name:c.company_name||null,company_name_ar:c.company_name_ar||null,user_name_ar:c.user_name_ar||null,user_phone:c.user_phone||null,created_at:c.created_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString()}}}catch(n){throw console.error("[authService] Error in createStaffUser:",n),n}},async updateUserRole(t,e){console.log("[authService] Updating user role:",{targetUserId:t,newRole:e});try{const{data:{session:r},error:n}=await Z.auth.getSession();if(n||!(r!=null&&r.access_token))throw new Error("No active session found");const s="https://studio.middar.com/".trim();if(!s)throw new Error("Missing VITE_SUPABASE_URL");const o=`${s}/functions/v1/crud-staff-user`,i=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.access_token}`,"x-user-id":r.user.id},body:JSON.stringify({action:"update",targetUserId:t,userData:{user_role:e}})});if(!i.ok){const l=await i.json();throw new Error(l.error||`HTTP ${i.status}`)}console.log("[authService] User role updated successfully")}catch(r){throw console.error("[authService] Error in updateUserRole:",r),r}},async updateUser(t,e){console.log("[authService] Updating user details:",{targetUserId:t,userData:e});try{const{data:{session:r},error:n}=await Z.auth.getSession();if(n||!(r!=null&&r.access_token))throw new Error("No active session found");const s="https://studio.middar.com/".trim();if(!s)throw new Error("Missing VITE_SUPABASE_URL");const o=`${s}/functions/v1/crud-staff-user`,i={action:"update",targetUserId:t,userData:{}};if(e.user_email!==void 0&&(i.email=e.user_email,i.userData.user_email=e.user_email),e.user_name!==void 0&&(i.userData.user_name=e.user_name),e.user_role!==void 0&&(i.userData.user_role=e.user_role),e.user_phone!==void 0){const{data:l,error:c}=await Z.from("users").select("user_id").eq("auth_user_id",t).single();if(c||!l)throw new Error("User not found");const{error:u}=await Z.from("users").update({user_phone:e.user_phone}).eq("user_id",l.user_id);if(u)throw u}if(i.userData.user_name||i.userData.user_email||i.userData.user_role){const l=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.access_token}`,"x-user-id":r.user.id},body:JSON.stringify(i)});if(!l.ok){const u=await l.json();throw new Error(u.error||`HTTP ${l.status}`)}const c=await l.json();console.log("[authService] Edge Function update result:",c)}console.log("[authService] User details updated successfully")}catch(r){throw console.error("[authService] Error in updateUser:",r),r}},async deleteUser(t){console.log("[authService] Deleting user:",t);try{const{data:{session:e},error:r}=await Z.auth.getSession();if(r||!(e!=null&&e.access_token))throw new Error("No active session found");const n="https://studio.middar.com/",s=`${n}/functions/v1/crud-staff-user`,o=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.access_token}`,"x-user-id":e.user.id},body:JSON.stringify({action:"delete",targetUserId:t})});if(!o.ok){const i=await o.json();throw new Error(i.error||`HTTP ${o.status}`)}console.log("[authService] User deleted successfully")}catch(e){throw console.error("[authService] Error in deleteUser:",e),e}},async signUpClient(t,e,r){console.log("[authService] Signing up client:",{email:t,...r});const{data:n,error:s}=await Z.auth.signUp({email:t,password:e});if(s)throw s;if(!n.user)throw new Error("User creation failed");console.log("[authService] Auth user created:",n.user.id);const{data:o,error:i}=await Z.from("users").upsert({user_name:r.name,user_email:t,user_role:"client",avatar:r.avatar,client_contact:r.contact,company_name:r.company,auth_user_id:n.user.id},{onConflict:"auth_user_id"}).select().single();if(i)throw console.error("[authService] Error creating user profile:",i),i;return console.log("[authService] User profile created:",o),{id:n.user.id,email:t,role:"client",profile:{user_id:o.user_id,user_name:o.user_name||r.name,user_email:o.user_email||t,user_role:"client",avatar:o.avatar||r.avatar,client_contact:o.client_contact||r.contact||null,company_name:o.company_name||r.company||null,company_name_ar:o.company_name_ar||null,user_name_ar:o.user_name_ar||null,user_phone:o.user_phone||null,auth_user_id:n.user.id,created_at:o.created_at||new Date().toISOString(),updated_at:o.updated_at||new Date().toISOString()}}},async signIn(t,e){console.log("[authService] Signing in with email:",t);try{const{data:r,error:n}=await Z.auth.signInWithPassword({email:t,password:e});if(n)throw console.error("[authService] Authentication error:",n),n;if(!r.user)throw new Error("Sign in failed: No user data returned");console.log("[authService] User authenticated, fetching profile...");const{data:s,error:o}=await Z.from("users").select("*").eq("auth_user_id",r.user.id).maybeSingle();if(o)throw console.error("[authService] Error fetching user profile:",o),new Error("Failed to fetch user profile");if(!s)throw console.error("[authService] User profile not found for user:",r.user.id),new Error("User profile not found");return console.log("[authService] User profile found:",s),{id:r.user.id,email:r.user.email,role:s.user_role||"client",profile:{...s}}}catch(r){throw console.error("[authService] Error in signIn:",r),r}},async signOut(){console.log("[authService] Signing out...");try{const{data:{session:t}}=await Z.auth.getSession();if(!t){console.warn("[authService] No active session found  skipping signOut()");return}const{error:e}=await Z.auth.signOut();if(e)throw console.error("[authService] Error signing out:",e),e;console.log("[authService] Sign out successful")}catch(t){throw console.error("[authService] Error in signOut:",t),t}},async signInWithGoogle(t="client"){console.log("[authService] Starting Google OAuth sign-in with role:",t);try{localStorage.setItem("oauth_intended_role",t);const{data:e,error:r}=await Z.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`,data:{intended_role:t},queryParams:{access_type:"offline",prompt:"consent select_account"}}});if(r)throw console.error("[authService] Google OAuth error:",r),localStorage.removeItem("oauth_intended_role"),r;console.log("[authService] Google OAuth initiated successfully with role:",t)}catch(e){throw console.error("[authService] Error in Google sign-in:",e),localStorage.removeItem("oauth_intended_role"),e}},async getCurrentUser(t){console.log("[authService] Getting current user",{authUserId:t});try{let e;if(t)e={id:t},console.log("[authService] Using provided auth user ID:",t);else{console.log("[authService] Fetching auth user from session");const l=Z.auth.getUser(),c=new Promise((u,d)=>setTimeout(()=>d(new Error("getUser timeout")),3e3));try{const{data:{user:u},error:d}=await Promise.race([l,c]);if(d||!u)return console.log("[authService] No authenticated user found"),null;e=u}catch(u){return console.warn("[authService] Failed to get user from session:",u),null}}console.log("[authService] Found auth user:",{id:e.id}),console.log("[authService] Checking users table for user:",e.id);const r=Z.from("users").select("*").eq("auth_user_id",e.id).maybeSingle(),n=new Promise((l,c)=>setTimeout(()=>c(new Error("Database query timeout")),3e3));let s,o;try{const l=await Promise.race([r,n]);s=l.data,o=l.error}catch(l){return console.error("[authService] Database query timed out:",l),{id:e.id,email:"",role:"client",profile:{user_id:0,user_name:"User",user_email:"",user_role:"client",auth_user_id:e.id,avatar:"",client_contact:null,company_name:null,company_name_ar:null,user_name_ar:null,user_phone:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}}if(console.log("[authService] Database query completed:",{hasData:!!s,hasError:!!o}),o&&console.error("[authService] Error fetching user from users table:",o),s)return console.log("[authService] Found user in users table:",s),{id:e.id,email:s.user_email||"",role:s.user_role||"client",profile:{...s}};console.warn("[authService] User authenticated but not found in users table, creating minimal user object",{userId:e.id});const i={id:e.id,email:"",role:"client",profile:{user_id:0,user_name:"User",user_email:"",user_role:"client",auth_user_id:e.id,avatar:"",client_contact:null,company_name:null,company_name_ar:null,user_name_ar:null,user_phone:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}};return console.log("[authService] Returning minimal user object"),i}catch(e){return console.error("[authService] Error in getCurrentUser:",e),null}},async getFreshJwt(){const{data:{session:t},error:e}=await Z.auth.getSession();if(e)throw e;if(!(t!=null&&t.access_token))throw new Error("No access token available");return t.access_token},onAuthStateChange(t){console.log("[authService] Setting up auth state change listener");let e=null;const r=async(s,o)=>{var l;console.log("[authService] Auth state changed:",{event:s,hasSession:!!o,userId:(l=o==null?void 0:o.user)==null?void 0:l.id});const i=async c=>{const u=this.getCurrentUser(c),d=new Promise((h,m)=>setTimeout(()=>m(new Error("getCurrentUser timeout")),3e3));return Promise.race([u,d])};if(s==="SIGNED_IN"&&(o!=null&&o.user))try{console.log("[authService] Fetching user profile for SIGNED_IN event");const c=await i(o.user.id);if(console.log("[authService] User profile fetched:",{hasUser:!!c}),c){const u=c.profile.user_name==="User",d=e&&e.profile.user_name!=="User";u&&d?console.log("[authService] Skipping update to minimal user, keeping full user"):JSON.stringify(c)!==JSON.stringify(e)&&(e=c,t(c))}}catch(c){if(console.error("[authService] Error or timeout getting current user:",c),!e){const u={id:o.user.id,email:o.user.email||"",role:"client",profile:{user_id:0,user_name:"User",user_email:o.user.email||"",user_role:"client",auth_user_id:o.user.id,avatar:"",client_contact:null,company_name:null,company_name_ar:null,user_name_ar:null,user_phone:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}};e=u,t(u)}}else if(s==="INITIAL_SESSION")if(o!=null&&o.user)try{console.log("[authService] Fetching user profile for INITIAL_SESSION event"),await new Promise(u=>setTimeout(u,100));const c=await i(o.user.id);if(console.log("[authService] User profile fetched:",{hasUser:!!c}),c){const u=c.profile.user_name==="User",d=e&&e.profile.user_name!=="User";u&&d?console.log("[authService] Skipping update to minimal user, keeping full user"):JSON.stringify(c)!==JSON.stringify(e)&&(e=c,t(c))}}catch(c){if(console.error("[authService] Error or timeout getting current user:",c),!e){const u={id:o.user.id,email:o.user.email||"",role:"client",profile:{user_id:0,user_name:"User",user_email:o.user.email||"",user_role:"client",auth_user_id:o.user.id,avatar:"",client_contact:null,company_name:null,company_name_ar:null,user_name_ar:null,user_phone:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}};e=u,t(u)}}else console.log("[authService] No session on initial check"),e=null,t(null);else s==="SIGNED_OUT"&&(console.log("[authService] User signed out"),e=null,t(null))},{data:{subscription:n}}=Z.auth.onAuthStateChange(r);return console.log("[authService] Auth state change listener set up"),{data:{subscription:n}}}},MS=f.createContext(void 0),GM=({children:t})=>{const[e,r]=f.useState(null),[n,s]=f.useState(!0),[o,i]=f.useState(!1);f.useEffect(()=>{let x=!0,_=null,b=!1;const j=E=>{if(x){if(console.log("[AuthContext] Auth state changed:",{hasUser:!!E,isSigningUp:o}),o){console.log("[AuthContext] Skipping auth state change during signup");return}r(E),b||(b=!0,s(!1))}};console.log("[AuthContext] Initializing auth state...");try{const{data:{subscription:E}}=hr.onAuthStateChange(j);_=E}catch(E){console.error("[AuthContext] Failed to set up auth state listener:",E),s(!1)}return()=>{console.log("[AuthContext] Cleaning up auth state change listener"),x=!1,_&&_.unsubscribe()}},[]);const l=async(x,_)=>{console.log("[AuthContext] Signing in..."),s(!0);try{const b=await hr.signIn(x,_);return console.log("[AuthContext] Sign in successful:",b),r(b),s(!1),b}catch(b){throw console.error("[AuthContext] Sign in failed:",b),s(!1),r(null),b}},c=async(x="client")=>{console.log("[AuthContext] Starting Google sign-in with role:",x),s(!0);try{await hr.signInWithGoogle(x)}catch(_){throw console.error("[AuthContext] Google sign-in failed:",_),s(!1),_}},u=async()=>{console.log("[AuthContext] Signing out...");try{r(null),await hr.signOut(),console.log("[AuthContext] Sign out successful")}catch(x){throw console.error("[AuthContext] Sign out failed:",x),r(null),x}},d=async(x,_,b)=>{console.log("[AuthContext] Signing up staff..."),s(!0),i(!0);try{const j=await hr.signUpStaff(x,_,b);return console.log("[AuthContext] Staff sign up successful:",j),r(j),s(!1),j}catch(j){throw console.error("[AuthContext] Staff sign up failed:",j),s(!1),j}finally{i(!1)}},h=async(x,_,b)=>{console.log("[AuthContext] Creating staff user...");try{const j=await hr.createStaffUser(x,_,b);return console.log("[AuthContext] Staff user creation successful:",j),j}catch(j){throw console.error("[AuthContext] Staff user creation failed:",j),j}},m=async x=>{console.log("[AuthContext] Deleting user...");try{await hr.deleteUser(x),console.log("[AuthContext] User deletion successful")}catch(_){throw console.error("[AuthContext] User deletion failed:",_),_}},p=async(x,_)=>{console.log("[AuthContext] Updating user role...");try{await hr.updateUserRole(x,_),console.log("[AuthContext] User role update successful")}catch(b){throw console.error("[AuthContext] User role update failed:",b),b}},v=async(x,_)=>{console.log("[AuthContext] Updating user details...");try{await hr.updateUser(x,_),console.log("[AuthContext] User details update successful")}catch(b){throw console.error("[AuthContext] User details update failed:",b),b}},g=async(x,_,b)=>{console.log("[AuthContext] Signing up client..."),s(!0),i(!0);try{const j=await hr.signUpClient(x,_,b);return console.log("[AuthContext] Client sign up successful:",j),r(j),s(!1),j}catch(j){throw console.error("[AuthContext] Client sign up failed:",j),s(!1),j}finally{i(!1)}},y=x=>e?x.includes(e.role):!1,w={user:e,loading:n,signIn:l,signInWithGoogle:c,signOut:u,signUpStaff:d,createStaffUser:h,deleteUser:m,updateUserRole:p,updateUser:v,signUpClient:g,isAuthenticated:!!e,isClient:(e==null?void 0:e.role)==="client",isStaff:e?["admin","manager","employee","team_leader"].includes(e.role):!1,hasRole:y};return a.jsx(MS.Provider,{value:w,children:t})},bt=()=>{const t=f.useContext(MS);return t===void 0?(console.warn("[useAuth] AuthProvider not found, using fallback context"),{user:null,loading:!1,signIn:async()=>{throw new Error("AuthProvider not available")},signInWithGoogle:async()=>{throw new Error("AuthProvider not available")},signOut:async()=>{throw new Error("AuthProvider not available")},signUpStaff:async()=>{throw new Error("AuthProvider not available")},createStaffUser:async()=>{throw new Error("AuthProvider not available")},deleteUser:async()=>{throw new Error("AuthProvider not available")},updateUserRole:async()=>{throw new Error("AuthProvider not available")},updateUser:async()=>{throw new Error("AuthProvider not available")},signUpClient:async()=>{throw new Error("AuthProvider not available")},isAuthenticated:!1,isClient:!1,isStaff:!1,hasRole:()=>!1}):t},IS=f.createContext(void 0),YM=[{code:"en",name:"English",flag:""},{code:"ar",name:"",flag:""}],QM=({children:t})=>{const[e,r]=f.useState(ft.language||"ar"),[n,s]=f.useState(cn());f.useEffect(()=>{const l=c=>{r(c),s(cn())};return ft.on("languageChanged",l),()=>{ft.off("languageChanged",l)}},[]);const i={currentLanguage:e,changeLanguage:async l=>{try{await ft.changeLanguage(l),r(l),s(cn())}catch(c){console.error("Failed to change language:",c)}},isRTL:n,languages:YM};return a.jsx(IS.Provider,{value:i,children:t})},xa=()=>{const t=f.useContext(IS);if(t===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return t};var Sd=["light","dark"],sv="(prefers-color-scheme: dark)",JM=typeof window>"u",av=f.createContext(void 0),XM={setTheme:t=>{},themes:[]},ZM=()=>{var t;return(t=f.useContext(av))!=null?t:XM},LS=t=>f.useContext(av)?t.children:f.createElement(tI,{...t}),eI=["light","dark"],tI=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:r=!0,enableColorScheme:n=!0,storageKey:s="theme",themes:o=eI,defaultTheme:i=r?"system":"light",attribute:l="data-theme",value:c,children:u,nonce:d})=>{let[h,m]=f.useState(()=>Dw(s,i)),[p,v]=f.useState(()=>Dw(s)),g=c?Object.values(c):o,y=f.useCallback(b=>{let j=b;if(!j)return;b==="system"&&r&&(j=Aw());let E=c?c[j]:j,k=e?nI():null,P=document.documentElement;if(l==="class"?(P.classList.remove(...g),E&&P.classList.add(E)):E?P.setAttribute(l,E):P.removeAttribute(l),n){let T=Sd.includes(i)?i:null,C=Sd.includes(j)?j:T;P.style.colorScheme=C}k==null||k()},[]),w=f.useCallback(b=>{let j=typeof b=="function"?b(b):b;m(j);try{localStorage.setItem(s,j)}catch{}},[t]),x=f.useCallback(b=>{let j=Aw(b);v(j),h==="system"&&r&&!t&&y("system")},[h,t]);f.useEffect(()=>{let b=window.matchMedia(sv);return b.addListener(x),x(b),()=>b.removeListener(x)},[x]),f.useEffect(()=>{let b=j=>{if(j.key!==s)return;let E=j.newValue||i;w(E)};return window.addEventListener("storage",b),()=>window.removeEventListener("storage",b)},[w]),f.useEffect(()=>{y(t??h)},[t,h]);let _=f.useMemo(()=>({theme:h,setTheme:w,forcedTheme:t,resolvedTheme:h==="system"?p:h,themes:r?[...o,"system"]:o,systemTheme:r?p:void 0}),[h,w,t,p,r,o]);return f.createElement(av.Provider,{value:_},f.createElement(rI,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:r,enableColorScheme:n,storageKey:s,themes:o,defaultTheme:i,attribute:l,value:c,children:u,attrs:g,nonce:d}),u)},rI=f.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:o,value:i,attrs:l,nonce:c})=>{let u=o==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,h=s?Sd.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(v,g=!1,y=!0)=>{let w=i?i[v]:v,x=g?v+"|| ''":`'${w}'`,_="";return s&&y&&!g&&Sd.includes(v)&&(_+=`d.style.colorScheme = '${v}';`),r==="class"?g||w?_+=`c.add(${x})`:_+="null":w&&(_+=`d[s](n,${x})`),_},p=t?`!function(){${d}${m(t)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${sv}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${m(i?"x[e]":"e",!0)}}${u?"":"else{"+m(o,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${m(i?"x[e]":"e",!0)}}else{${m(o,!1,!1)};}${h}}catch(t){}}();`;return f.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})}),Dw=(t,e)=>{if(JM)return;let r;try{r=localStorage.getItem(t)||void 0}catch{}return r||e},nI=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},Aw=t=>(t||(t=window.matchMedia(sv)),t.matches?"dark":"light");const sI=()=>a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"}),a.jsx("span",{className:"sr-only",children:"Loading..."})]}),Xt=({children:t,allowedRoles:e,requireAuth:r=!0})=>{const n=cs(),{user:s,loading:o,hasRole:i}=bt(),l=s&&s.role&&s.profile.user_name!=="User",c=f.useMemo(()=>e?i(e):!0,[e,i]);return f.useMemo(()=>({loading:o,user:s?{id:s.id,email:s.email,role:s.role}:null,hasRequiredRole:c}),[o,s,c]),console.log("[ProtectedRoute]",{path:n.pathname,loading:o,hasUser:!!s,isUserProfileLoaded:l,requireAuth:r,hasRequiredRole:c,userRole:s==null?void 0:s.role}),o||s&&!l?(console.log("[ProtectedRoute] Showing loading spinner - waiting for profile"),a.jsx(sI,{})):r&&!s?(console.log("[ProtectedRoute] No user, redirecting to login"),a.jsx(lp,{to:"/login",state:{from:n},replace:!0})):e&&!c?(console.log("[ProtectedRoute] User does not have required role"),a.jsx(lp,{to:"/unauthorized",replace:!0})):(console.log("[ProtectedRoute] Rendering protected content"),a.jsx(a.Fragment,{children:t}))};function Mw(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function ch(...t){return e=>{let r=!1;const n=t.map(s=>{const o=Mw(s,e);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let s=0;s<n.length;s++){const o=n[s];typeof o=="function"?o():Mw(t[s],null)}}}}function Ae(...t){return f.useCallback(ch(...t),t)}function oa(t){const e=oI(t),r=f.forwardRef((n,s)=>{const{children:o,...i}=n,l=f.Children.toArray(o),c=l.find(lI);if(c){const u=c.props.children,d=l.map(h=>h===c?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:h);return a.jsx(e,{...i,ref:s,children:f.isValidElement(u)?f.cloneElement(u,void 0,d):null})}return a.jsx(e,{...i,ref:s,children:o})});return r.displayName=`${t}.Slot`,r}var aI=oa("Slot");function oI(t){const e=f.forwardRef((r,n)=>{const{children:s,...o}=r;if(f.isValidElement(s)){const i=uI(s),l=cI(o,s.props);return s.type!==f.Fragment&&(l.ref=n?ch(n,i):i),f.cloneElement(s,l)}return f.Children.count(s)>1?f.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var FS=Symbol("radix.slottable");function iI(t){const e=({children:r})=>a.jsx(a.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=FS,e}function lI(t){return f.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===FS}function cI(t,e){const r={...e};for(const n in e){const s=t[n],o=e[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...l)=>{const c=o(...l);return s(...l),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...t,...r}}function uI(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function $S(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=$S(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function US(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=$S(t))&&(n&&(n+=" "),n+=e);return n}const Iw=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Lw=US,xc=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return Lw(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:o}=e,i=Object.keys(s).map(u=>{const d=r==null?void 0:r[u],h=o==null?void 0:o[u];if(d===null)return null;const m=Iw(d)||Iw(h);return s[u][m]}),l=r&&Object.entries(r).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:h,className:m,...p}=d;return Object.entries(p).every(v=>{let[g,y]=v;return Array.isArray(y)?y.includes({...o,...l}[g]):{...o,...l}[g]===y})?[...u,h,m]:u},[]);return Lw(t,i,c,r==null?void 0:r.class,r==null?void 0:r.className)},ov="-",dI=t=>{const e=fI(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:i=>{const l=i.split(ov);return l[0]===""&&l.length!==1&&l.shift(),BS(l,e)||hI(i)},getConflictingClassGroupIds:(i,l)=>{const c=r[i]||[];return l&&n[i]?[...c,...n[i]]:c}}},BS=(t,e)=>{var i;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?BS(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const o=t.join(ov);return(i=e.validators.find(({validator:l})=>l(o)))==null?void 0:i.classGroupId},Fw=/^\[(.+)\]$/,hI=t=>{if(Fw.test(t)){const e=Fw.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},fI=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return pI(Object.entries(t.classGroups),r).forEach(([o,i])=>{Np(i,n,o,e)}),n},Np=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const o=s===""?e:$w(e,s);o.classGroupId=r;return}if(typeof s=="function"){if(mI(s)){Np(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([o,i])=>{Np(i,$w(e,o),r,n)})})},$w=(t,e)=>{let r=t;return e.split(ov).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},mI=t=>t.isThemeGetter,pI=(t,e)=>e?t.map(([r,n])=>{const s=n.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,l])=>[e+i,l])):o);return[r,s]}):t,gI=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(o,i)=>{r.set(o,i),e++,e>t&&(e=0,n=r,r=new Map)};return{get(o){let i=r.get(o);if(i!==void 0)return i;if((i=n.get(o))!==void 0)return s(o,i),i},set(o,i){r.has(o)?r.set(o,i):s(o,i)}}},zS="!",vI=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],o=e.length,i=l=>{const c=[];let u=0,d=0,h;for(let y=0;y<l.length;y++){let w=l[y];if(u===0){if(w===s&&(n||l.slice(y,y+o)===e)){c.push(l.slice(d,y)),d=y+o;continue}if(w==="/"){h=y;continue}}w==="["?u++:w==="]"&&u--}const m=c.length===0?l:l.substring(d),p=m.startsWith(zS),v=p?m.substring(1):m,g=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:i}):i},xI=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},yI=t=>({cache:gI(t.cacheSize),parseClassName:vI(t),...dI(t)}),wI=/\s+/,_I=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,o=[],i=t.trim().split(wI);let l="";for(let c=i.length-1;c>=0;c-=1){const u=i[c],{modifiers:d,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:p}=r(u);let v=!!p,g=n(v?m.substring(0,p):m);if(!g){if(!v){l=u+(l.length>0?" "+l:l);continue}if(g=n(m),!g){l=u+(l.length>0?" "+l:l);continue}v=!1}const y=xI(d).join(":"),w=h?y+zS:y,x=w+g;if(o.includes(x))continue;o.push(x);const _=s(g,v);for(let b=0;b<_.length;++b){const j=_[b];o.push(w+j)}l=u+(l.length>0?" "+l:l)}return l};function bI(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=WS(e))&&(n&&(n+=" "),n+=r);return n}const WS=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=WS(t[n]))&&(r&&(r+=" "),r+=e);return r};function jI(t,...e){let r,n,s,o=i;function i(c){const u=e.reduce((d,h)=>h(d),t());return r=yI(u),n=r.cache.get,s=r.cache.set,o=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=_I(c,r);return s(c,d),d}return function(){return o(bI.apply(null,arguments))}}const st=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},VS=/^\[(?:([a-z-]+):)?(.+)\]$/i,SI=/^\d+\/\d+$/,NI=new Set(["px","full","screen"]),kI=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,CI=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,EI=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,PI=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,TI=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Vn=t=>ei(t)||NI.has(t)||SI.test(t),_s=t=>zi(t,"length",FI),ei=t=>!!t&&!Number.isNaN(Number(t)),Rf=t=>zi(t,"number",ei),sl=t=>!!t&&Number.isInteger(Number(t)),RI=t=>t.endsWith("%")&&ei(t.slice(0,-1)),De=t=>VS.test(t),bs=t=>kI.test(t),OI=new Set(["length","size","percentage"]),DI=t=>zi(t,OI,HS),AI=t=>zi(t,"position",HS),MI=new Set(["image","url"]),II=t=>zi(t,MI,UI),LI=t=>zi(t,"",$I),al=()=>!0,zi=(t,e,r)=>{const n=VS.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},FI=t=>CI.test(t)&&!EI.test(t),HS=()=>!1,$I=t=>PI.test(t),UI=t=>TI.test(t),BI=()=>{const t=st("colors"),e=st("spacing"),r=st("blur"),n=st("brightness"),s=st("borderColor"),o=st("borderRadius"),i=st("borderSpacing"),l=st("borderWidth"),c=st("contrast"),u=st("grayscale"),d=st("hueRotate"),h=st("invert"),m=st("gap"),p=st("gradientColorStops"),v=st("gradientColorStopPositions"),g=st("inset"),y=st("margin"),w=st("opacity"),x=st("padding"),_=st("saturate"),b=st("scale"),j=st("sepia"),E=st("skew"),k=st("space"),P=st("translate"),T=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto",De,e],O=()=>[De,e],J=()=>["",Vn,_s],W=()=>["auto",ei,De],U=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],R=()=>["solid","dashed","dotted","double","none"],I=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],N=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",De],q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>[ei,De];return{cacheSize:500,separator:":",theme:{colors:[al],spacing:[Vn,_s],blur:["none","",bs,De],brightness:A(),borderColor:[t],borderRadius:["none","","full",bs,De],borderSpacing:O(),borderWidth:J(),contrast:A(),grayscale:F(),hueRotate:A(),invert:F(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[RI,_s],inset:L(),margin:L(),opacity:A(),padding:O(),saturate:A(),scale:A(),sepia:F(),skew:A(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",De]}],container:["container"],columns:[{columns:[bs]}],"break-after":[{"break-after":q()}],"break-before":[{"break-before":q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...U(),De]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",sl,De]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",De]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",sl,De]}],"grid-cols":[{"grid-cols":[al]}],"col-start-end":[{col:["auto",{span:["full",sl,De]},De]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[al]}],"row-start-end":[{row:["auto",{span:[sl,De]},De]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",De]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",De]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...N()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...N(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...N(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",De,e]}],"min-w":[{"min-w":[De,e,"min","max","fit"]}],"max-w":[{"max-w":[De,e,"none","full","min","max","fit","prose",{screen:[bs]},bs]}],h:[{h:[De,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[De,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[De,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[De,e,"auto","min","max","fit"]}],"font-size":[{text:["base",bs,_s]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Rf]}],"font-family":[{font:[al]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",De]}],"line-clamp":[{"line-clamp":["none",ei,Rf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Vn,De]}],"list-image":[{"list-image":["none",De]}],"list-style-type":[{list:["none","disc","decimal",De]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...R(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Vn,_s]}],"underline-offset":[{"underline-offset":["auto",Vn,De]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",De]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",De]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...U(),AI]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",DI]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},II]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...R(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:R()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...R()]}],"outline-offset":[{"outline-offset":[Vn,De]}],"outline-w":[{outline:[Vn,_s]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:J()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Vn,_s]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",bs,LI]}],"shadow-color":[{shadow:[al]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...I(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":I()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",bs,De]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",De]}],duration:[{duration:A()}],ease:[{ease:["linear","in","out","in-out",De]}],delay:[{delay:A()}],animate:[{animate:["none","spin","ping","pulse","bounce",De]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[sl,De]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",De]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",De]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",De]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Vn,_s,Rf]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},zI=jI(BI);function X(...t){return zI(US(t))}const tc=xc("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),G=f.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...s},o)=>{const i=n?aI:"button";return a.jsx(i,{className:X(tc({variant:e,size:r,className:t})),ref:o,...s})});G.displayName="Button";const Se=f.forwardRef(({className:t,type:e,...r},n)=>a.jsx("input",{type:e,className:X("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));Se.displayName="Input";var WI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],je=WI.reduce((t,e)=>{const r=oa(`Primitive.${e}`),n=f.forwardRef((s,o)=>{const{asChild:i,...l}=s,c=i?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function qS(t,e){t&&Li.flushSync(()=>t.dispatchEvent(e))}var VI="Label",KS=f.forwardRef((t,e)=>a.jsx(je.label,{...t,ref:e,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));KS.displayName=VI;var GS=KS;const HI=xc("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ce=f.forwardRef(({className:t,...e},r)=>a.jsx(GS,{ref:r,className:X(HI(),t),...e}));ce.displayName=GS.displayName;const qI=xc("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ei=f.forwardRef(({className:t,variant:e,...r},n)=>a.jsx("div",{ref:n,role:"alert",className:X(qI({variant:e}),t),...r}));Ei.displayName="Alert";const KI=f.forwardRef(({className:t,...e},r)=>a.jsx("h5",{ref:r,className:X("mb-1 font-medium leading-none tracking-tight",t),...e}));KI.displayName="AlertTitle";const Pi=f.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:X("text-sm [&_p]:leading-relaxed",t),...e}));Pi.displayName="AlertDescription";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),YS=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var YI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=f.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:i,...l},c)=>f.createElement("svg",{ref:c,...YI,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:YS("lucide",s),...l},[...i.map(([u,d])=>f.createElement(u,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=(t,e)=>{const r=f.forwardRef(({className:n,...s},o)=>f.createElement(QI,{ref:o,iconNode:e,className:YS(`lucide-${GI(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=ue("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=ue("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=ue("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=ue("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=ue("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=ue("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=ue("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=ue("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=ue("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=ue("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=ue("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=ue("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=ue("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=ue("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=ue("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=ue("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=ue("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=ue("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=ue("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=ue("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=ue("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=ue("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=ue("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=ue("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=ue("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=ue("Kanban",[["path",{d:"M6 5v11",key:"mdvv1e"}],["path",{d:"M12 5v6",key:"14ar3b"}],["path",{d:"M18 5v14",key:"7ji314"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=ue("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=ue("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=ue("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=ue("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=ue("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=ue("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=ue("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=ue("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=ue("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=ue("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=ue("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=ue("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=ue("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=ue("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=ue("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=ue("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=ue("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=ue("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=ue("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=ue("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=ue("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=ue("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=ue("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=ue("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=ue("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=ue("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=ue("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hh=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=ue("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),OL=()=>{const{t}=lt(),[e,r]=f.useState(""),[n,s]=f.useState(""),[o,i]=f.useState(!1),[l,c]=f.useState(""),[u,d]=f.useState(!1);f.useState(!1);const{signIn:h,signInWithGoogle:m}=bt(),p=vn(),v=async g=>{g.preventDefault(),c(""),d(!0);try{const y=await h(e,n);y&&(console.log("[LoginForm] Sign in successful, user role:",y.role),y.role==="client"?p("/client-portal"):y.role==="employee"||y.role==="team_leader"?window.location.href="/#/employee_dashboard":y.role==="partner"?window.location.href="/#/partner-dashboard":y.role==="partner_employee"?window.location.href="/#/partner-employee-dashboard":window.location.href="/#/dashboard")}catch(y){console.error("[LoginForm] Sign in error:",y),c(y.message||t("auth.failedToSignIn")),d(!1)}};return a.jsxs("div",{className:"w-full max-w-md mx-auto space-y-6 px-4 sm:px-0",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:t("auth.signIn")}),a.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:t("auth.enterCredentials")})]}),a.jsxs("form",{onSubmit:v,className:"space-y-5",children:[l&&a.jsx(Ei,{variant:"destructive",children:a.jsx(Pi,{className:"text-sm",children:l})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ce,{htmlFor:"email",className:"text-sm font-medium",children:t("auth.email")}),a.jsx(Se,{id:"email",type:"email",value:e,onChange:g=>r(g.target.value),placeholder:"you@middar.com",required:!0,className:"h-11 text-base"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ce,{htmlFor:"password",className:"text-sm font-medium",children:t("auth.password")}),a.jsxs("div",{className:"relative",children:[a.jsx(Se,{id:"password",type:o?"text":"password",value:n,onChange:g=>s(g.target.value),placeholder:"",required:!0,className:"h-11 text-base pe-10"}),a.jsx(G,{type:"button",variant:"ghost",size:"sm",className:"absolute end-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!o),"aria-label":o?"Hide password":"Show password",children:o?a.jsx(dL,{className:"h-4 w-4 text-muted-foreground"}):a.jsx(kd,{className:"h-4 w-4 text-muted-foreground"})})]})]}),a.jsx(G,{type:"submit",className:"w-full h-11 text-base font-medium shadow-lg hover:shadow-xl transition-all duration-200",disabled:u,children:u?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-current"}),t("auth.signingIn")]}):t("auth.signInButton")})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:t("auth.dontHaveAccount")}),a.jsx(G,{variant:"link",className:"p-0 h-auto text-sm font-medium hover:text-primary transition-colors",onClick:()=>p("/signup"),children:t("auth.signUp")})]})]})},DL=()=>{const[t,e]=f.useState(!1);bt();const r=vn(),{t:n}=lt();return a.jsxs("div",{className:"w-full max-w-md space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-3xl font-bold",children:n("auth.createAccount")}),a.jsx("p",{className:"text-muted-foreground mt-2",children:n("auth.signUpToGetStarted")})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"text-center text-sm text-muted-foreground",children:n("auth.chooseAccountTypeSignUp")}),t&&a.jsx("div",{className:"text-center text-sm text-muted-foreground",children:n("auth.redirectingToGoogle")})]}),a.jsxs("div",{className:"text-center text-sm",children:[a.jsxs("span",{className:"text-muted-foreground",children:[n("auth.alreadyHaveAccount")," "]}),a.jsx(G,{variant:"link",className:"p-0",onClick:()=>r("/login"),children:n("auth.signIn")})]})]})},AL=[{labelKey:"navigation.clientPortal",path:"/client-portal",roles:["client"],icon:fL},{labelKey:"navigation.partnerDashboard",path:"/partner-dashboard",roles:["partner"],icon:nL},{labelKey:"navigation.dashboard",path:"/dashboard",roles:["admin","manager"],icon:Bw},{labelKey:"navigation.empDashboard",path:"/employee_dashboard",roles:["employee","team_leader"],icon:Bw},{labelKey:"navigation.surveys",path:"/surveys",roles:["admin","manager","employee","team_leader"],icon:ti},{labelKey:"navigation.leads",path:"/leads",roles:["admin","manager","employee","team_leader"],icon:$n},{labelKey:"navigation.projects",path:"/projects",roles:["admin","manager","employee","team_leader"],icon:iv},{labelKey:"navigation.tasks",path:"/tasks",roles:["admin","manager","employee","team_leader"],icon:ZS},{labelKey:"navigation.tickets",path:"/tickets",roles:["admin","manager","employee","team_leader","client"],icon:jL},{labelKey:"navigation.teams",path:"/teams",roles:["admin","manager","employee","team_leader"],icon:XS},{labelKey:"navigation.chats",path:"/chats",roles:["admin","manager","employee","team_leader","client"],icon:hv},{labelKey:"navigation.users",path:"/users",roles:["admin"],icon:CL},{labelKey:"navigation.settings",path:"/settings",roles:["admin"],icon:Cp}];function Vw({onNavigate:t}={}){var o,i;const e=cs(),{user:r}=bt(),{t:n}=lt(),s=AL.filter(l=>r&&l.roles.includes(r.role));return a.jsxs("div",{className:"h-full w-full bg-sidebar border-r border-sidebar-border flex flex-col",children:[a.jsx("div",{className:"p-4 sm:p-6",children:a.jsxs("div",{className:"flex items-center gap-2 mb-6 sm:mb-8 px-2",children:[a.jsx("img",{src:"/favicon.ico",alt:"Logo",className:"h-8 w-8 rounded-lg"}),a.jsx("h1",{className:"text-xl font-bold text-sidebar-foreground tracking-tight",children:n("landing.brandName")})]})}),a.jsx("div",{className:"flex-1 px-4 sm:px-6",children:a.jsx("nav",{className:"space-y-1",children:s.map(l=>{const c=e.pathname===l.path,u=l.icon;return a.jsxs(dp,{to:l.path,onClick:t,className:X("flex items-center gap-3 px-3 py-2.5 rounded-md text-sm font-medium transition-all duration-200 group",c?"bg-primary text-primary-foreground shadow-sm":"text-sidebar-foreground/70 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground"),children:[a.jsx(u,{className:X("h-4 w-4",c?"text-primary-foreground":"text-sidebar-foreground/50 group-hover:text-sidebar-accent-foreground")}),a.jsx("span",{children:n(l.labelKey)})]},l.path+l.labelKey)})})}),a.jsx("div",{className:"p-4 sm:p-6 border-t border-sidebar-border/50",children:a.jsxs("div",{className:"flex items-center gap-3 px-2 py-2 rounded-lg bg-sidebar-accent/50",children:[a.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/20 flex items-center justify-center text-primary font-bold text-sm",children:(o=r==null?void 0:r.email)==null?void 0:o.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-sidebar-foreground truncate",children:r==null?void 0:r.email}),a.jsx("p",{className:"text-xs text-sidebar-foreground/50 capitalize",children:(i=r==null?void 0:r.role)==null?void 0:i.replace("_"," ")})]})]})})]})}function ML(){const t=cs(),{t:e}=lt(),r=t.pathname.split("/").filter(o=>o);if(r.length===0)return null;const n={dashboard:"navigation.dashboard",projects:"navigation.projects",users:"navigation.users",settings:"navigation.settings",leads:"navigation.leads",tickets:"navigation.tickets",tasks:"navigation.tasks",teams:"navigation.teams",clients:"navigation.clients",chats:"navigation.chats",surveys:"navigation.surveys","client-portal":"navigation.clientPortal","partner-dashboard":"navigation.partnerDashboard",employee_dashboard:"navigation.empDashboard","partner-employee-dashboard":"auth.partnerEmployee"},s=o=>n[o]?e(n[o]):/^\d+$/.test(o)||o.length>20?o:o.split("-").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" ");return a.jsxs("nav",{className:"flex items-center text-sm text-muted-foreground","aria-label":"Breadcrumb",children:[a.jsx(dp,{to:"/",className:"hover:text-foreground transition-colors",children:e("navigation.home")}),r.map((o,i)=>{const l=`/${r.slice(0,i+1).join("/")}`,c=i===r.length-1,u=s(o);return a.jsxs("div",{className:"flex items-center",children:[a.jsx(cv,{className:"h-4 w-4 mx-2 text-muted-foreground rtl:rotate-180"}),c?a.jsx("span",{className:"text-foreground font-medium",children:u}):a.jsx(dp,{to:l,className:"hover:text-foreground transition-colors",children:u})]},o)})]})}function pv(){lt();const[t,e]=f.useState(new Date);f.useEffect(()=>{const s=setInterval(()=>{e(new Date)},1e3);return()=>clearInterval(s)},[]);const r=s=>s.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"short",day:"numeric"}),n=s=>s.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"});return a.jsxs("div",{className:"flex items-center gap-3 text-muted-foreground",children:[a.jsx("div",{className:"text-lg font-mono font-semibold text-foreground",children:n(t)}),a.jsx("div",{className:"text-sm",children:r(t)})]})}function Ep(t,[e,r]){return Math.min(r,Math.max(e,t))}function ie(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t==null||t(s),r===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function IL(t,e){const r=f.createContext(e),n=o=>{const{children:i,...l}=o,c=f.useMemo(()=>l,Object.values(l));return a.jsx(r.Provider,{value:c,children:i})};n.displayName=t+"Provider";function s(o){const i=f.useContext(r);if(i)return i;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[n,s]}function br(t,e=[]){let r=[];function n(o,i){const l=f.createContext(i),c=r.length;r=[...r,i];const u=h=>{var w;const{scope:m,children:p,...v}=h,g=((w=m==null?void 0:m[t])==null?void 0:w[c])||l,y=f.useMemo(()=>v,Object.values(v));return a.jsx(g.Provider,{value:y,children:p})};u.displayName=o+"Provider";function d(h,m){var g;const p=((g=m==null?void 0:m[t])==null?void 0:g[c])||l,v=f.useContext(p);if(v)return v;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[u,d]}const s=()=>{const o=r.map(i=>f.createContext(i));return function(l){const c=(l==null?void 0:l[t])||o;return f.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,LL(s,...e)]}function LL(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(o)[`__scope${u}`];return{...l,...h}},{});return f.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return r.scopeName=e.scopeName,r}function gv(t){const e=t+"CollectionProvider",[r,n]=br(e),[s,o]=r(e,{collectionRef:{current:null},itemMap:new Map}),i=g=>{const{scope:y,children:w}=g,x=Ss.useRef(null),_=Ss.useRef(new Map).current;return a.jsx(s,{scope:y,itemMap:_,collectionRef:x,children:w})};i.displayName=e;const l=t+"CollectionSlot",c=oa(l),u=Ss.forwardRef((g,y)=>{const{scope:w,children:x}=g,_=o(l,w),b=Ae(y,_.collectionRef);return a.jsx(c,{ref:b,children:x})});u.displayName=l;const d=t+"CollectionItemSlot",h="data-radix-collection-item",m=oa(d),p=Ss.forwardRef((g,y)=>{const{scope:w,children:x,..._}=g,b=Ss.useRef(null),j=Ae(y,b),E=o(d,w);return Ss.useEffect(()=>(E.itemMap.set(b,{ref:b,..._}),()=>void E.itemMap.delete(b))),a.jsx(m,{[h]:"",ref:j,children:x})});p.displayName=d;function v(g){const y=o(t+"CollectionConsumer",g);return Ss.useCallback(()=>{const x=y.collectionRef.current;if(!x)return[];const _=Array.from(x.querySelectorAll(`[${h}]`));return Array.from(y.itemMap.values()).sort((E,k)=>_.indexOf(E.ref.current)-_.indexOf(k.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:i,Slot:u,ItemSlot:p},v,n]}var FL=f.createContext(void 0);function wc(t){const e=f.useContext(FL);return t||e||"ltr"}function Ft(t){const e=f.useRef(t);return f.useEffect(()=>{e.current=t}),f.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function $L(t,e=globalThis==null?void 0:globalThis.document){const r=Ft(t);f.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var UL="DismissableLayer",Pp="dismissableLayer.update",BL="dismissableLayer.pointerDownOutside",zL="dismissableLayer.focusOutside",Hw,e1=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),_c=f.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...c}=t,u=f.useContext(e1),[d,h]=f.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=f.useState({}),v=Ae(e,k=>h(k)),g=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=g.indexOf(y),x=d?g.indexOf(d):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,b=x>=w,j=HL(k=>{const P=k.target,T=[...u.branches].some(C=>C.contains(P));!b||T||(s==null||s(k),i==null||i(k),k.defaultPrevented||l==null||l())},m),E=qL(k=>{const P=k.target;[...u.branches].some(C=>C.contains(P))||(o==null||o(k),i==null||i(k),k.defaultPrevented||l==null||l())},m);return $L(k=>{x===u.layers.size-1&&(n==null||n(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},m),f.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Hw=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),qw(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Hw)}},[d,m,r,u]),f.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),qw())},[d,u]),f.useEffect(()=>{const k=()=>p({});return document.addEventListener(Pp,k),()=>document.removeEventListener(Pp,k)},[]),a.jsx(je.div,{...c,ref:v,style:{pointerEvents:_?b?"auto":"none":void 0,...t.style},onFocusCapture:ie(t.onFocusCapture,E.onFocusCapture),onBlurCapture:ie(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:ie(t.onPointerDownCapture,j.onPointerDownCapture)})});_c.displayName=UL;var WL="DismissableLayerBranch",VL=f.forwardRef((t,e)=>{const r=f.useContext(e1),n=f.useRef(null),s=Ae(e,n);return f.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),a.jsx(je.div,{...t,ref:s})});VL.displayName=WL;function HL(t,e=globalThis==null?void 0:globalThis.document){const r=Ft(t),n=f.useRef(!1),s=f.useRef(()=>{});return f.useEffect(()=>{const o=l=>{if(l.target&&!n.current){let c=function(){t1(BL,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);n.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function qL(t,e=globalThis==null?void 0:globalThis.document){const r=Ft(t),n=f.useRef(!1);return f.useEffect(()=>{const s=o=>{o.target&&!n.current&&t1(zL,r,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function qw(){const t=new CustomEvent(Pp);document.dispatchEvent(t)}function t1(t,e,r,{discrete:n}){const s=r.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?qS(s,o):s.dispatchEvent(o)}var Of=0;function fh(){f.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Kw()),document.body.insertAdjacentElement("beforeend",t[1]??Kw()),Of++,()=>{Of===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Of--}},[])}function Kw(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Df="focusScope.autoFocusOnMount",Af="focusScope.autoFocusOnUnmount",Gw={bubbles:!1,cancelable:!0},KL="FocusScope",bc=f.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...i}=t,[l,c]=f.useState(null),u=Ft(s),d=Ft(o),h=f.useRef(null),m=Ae(e,g=>c(g)),p=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(n){let g=function(_){if(p.paused||!l)return;const b=_.target;l.contains(b)?h.current=b:ks(h.current,{select:!0})},y=function(_){if(p.paused||!l)return;const b=_.relatedTarget;b!==null&&(l.contains(b)||ks(h.current,{select:!0}))},w=function(_){if(document.activeElement===document.body)for(const j of _)j.removedNodes.length>0&&ks(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const x=new MutationObserver(w);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),x.disconnect()}}},[n,l,p.paused]),f.useEffect(()=>{if(l){Qw.add(p);const g=document.activeElement;if(!l.contains(g)){const w=new CustomEvent(Df,Gw);l.addEventListener(Df,u),l.dispatchEvent(w),w.defaultPrevented||(GL(ZL(r1(l)),{select:!0}),document.activeElement===g&&ks(l))}return()=>{l.removeEventListener(Df,u),setTimeout(()=>{const w=new CustomEvent(Af,Gw);l.addEventListener(Af,d),l.dispatchEvent(w),w.defaultPrevented||ks(g??document.body,{select:!0}),l.removeEventListener(Af,d),Qw.remove(p)},0)}}},[l,u,d,p]);const v=f.useCallback(g=>{if(!r&&!n||p.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,w=document.activeElement;if(y&&w){const x=g.currentTarget,[_,b]=YL(x);_&&b?!g.shiftKey&&w===b?(g.preventDefault(),r&&ks(_,{select:!0})):g.shiftKey&&w===_&&(g.preventDefault(),r&&ks(b,{select:!0})):w===x&&g.preventDefault()}},[r,n,p.paused]);return a.jsx(je.div,{tabIndex:-1,...i,ref:m,onKeyDown:v})});bc.displayName=KL;function GL(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(ks(n,{select:e}),document.activeElement!==r)return}function YL(t){const e=r1(t),r=Yw(e,t),n=Yw(e.reverse(),t);return[r,n]}function r1(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function Yw(t,e){for(const r of t)if(!QL(r,{upTo:e}))return r}function QL(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function JL(t){return t instanceof HTMLInputElement&&"select"in t}function ks(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&JL(t)&&e&&t.select()}}var Qw=XL();function XL(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=Jw(t,e),t.unshift(e)},remove(e){var r;t=Jw(t,e),(r=t[0])==null||r.resume()}}}function Jw(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function ZL(t){return t.filter(e=>e.tagName!=="A")}var Pt=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},e4=Gp[" useId ".trim().toString()]||(()=>{}),t4=0;function un(t){const[e,r]=f.useState(e4());return Pt(()=>{r(n=>n??String(t4++))},[t]),e?`radix-${e}`:""}const r4=["top","right","bottom","left"],la=Math.min,Sr=Math.max,Ed=Math.round,yu=Math.floor,An=t=>({x:t,y:t}),n4={left:"right",right:"left",bottom:"top",top:"bottom"},s4={start:"end",end:"start"};function Tp(t,e,r){return Sr(t,la(e,r))}function as(t,e){return typeof t=="function"?t(e):t}function os(t){return t.split("-")[0]}function Wi(t){return t.split("-")[1]}function vv(t){return t==="x"?"y":"x"}function xv(t){return t==="y"?"height":"width"}const a4=new Set(["top","bottom"]);function Tn(t){return a4.has(os(t))?"y":"x"}function yv(t){return vv(Tn(t))}function o4(t,e,r){r===void 0&&(r=!1);const n=Wi(t),s=yv(t),o=xv(s);let i=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(i=Pd(i)),[i,Pd(i)]}function i4(t){const e=Pd(t);return[Rp(t),e,Rp(e)]}function Rp(t){return t.replace(/start|end/g,e=>s4[e])}const Xw=["left","right"],Zw=["right","left"],l4=["top","bottom"],c4=["bottom","top"];function u4(t,e,r){switch(t){case"top":case"bottom":return r?e?Zw:Xw:e?Xw:Zw;case"left":case"right":return e?l4:c4;default:return[]}}function d4(t,e,r,n){const s=Wi(t);let o=u4(os(t),r==="start",n);return s&&(o=o.map(i=>i+"-"+s),e&&(o=o.concat(o.map(Rp)))),o}function Pd(t){return t.replace(/left|right|bottom|top/g,e=>n4[e])}function h4(t){return{top:0,right:0,bottom:0,left:0,...t}}function n1(t){return typeof t!="number"?h4(t):{top:t,right:t,bottom:t,left:t}}function Td(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function e0(t,e,r){let{reference:n,floating:s}=t;const o=Tn(e),i=yv(e),l=xv(i),c=os(e),u=o==="y",d=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,m=n[l]/2-s[l]/2;let p;switch(c){case"top":p={x:d,y:n.y-s.height};break;case"bottom":p={x:d,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:h};break;case"left":p={x:n.x-s.width,y:h};break;default:p={x:n.x,y:n.y}}switch(Wi(e)){case"start":p[i]-=m*(r&&u?-1:1);break;case"end":p[i]+=m*(r&&u?-1:1);break}return p}const f4=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:i}=r,l=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(e));let u=await i.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=e0(u,n,c),m=n,p={},v=0;for(let g=0;g<l.length;g++){const{name:y,fn:w}=l[g],{x,y:_,data:b,reset:j}=await w({x:d,y:h,initialPlacement:n,placement:m,strategy:s,middlewareData:p,rects:u,platform:i,elements:{reference:t,floating:e}});d=x??d,h=_??h,p={...p,[y]:{...p[y],...b}},j&&v<=50&&(v++,typeof j=="object"&&(j.placement&&(m=j.placement),j.rects&&(u=j.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:s}):j.rects),{x:d,y:h}=e0(u,m,c)),g=-1)}return{x:d,y:h,placement:m,strategy:s,middlewareData:p}};async function rc(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:o,rects:i,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:p=0}=as(e,t),v=n1(p),y=l[m?h==="floating"?"reference":"floating":h],w=Td(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(y)))==null||r?y:y.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),x=h==="floating"?{x:n,y:s,width:i.floating.width,height:i.floating.height}:i.reference,_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),b=await(o.isElement==null?void 0:o.isElement(_))?await(o.getScale==null?void 0:o.getScale(_))||{x:1,y:1}:{x:1,y:1},j=Td(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:_,strategy:c}):x);return{top:(w.top-j.top+v.top)/b.y,bottom:(j.bottom-w.bottom+v.bottom)/b.y,left:(w.left-j.left+v.left)/b.x,right:(j.right-w.right+v.right)/b.x}}const m4=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:o,platform:i,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=as(t,e)||{};if(u==null)return{};const h=n1(d),m={x:r,y:n},p=yv(s),v=xv(p),g=await i.getDimensions(u),y=p==="y",w=y?"top":"left",x=y?"bottom":"right",_=y?"clientHeight":"clientWidth",b=o.reference[v]+o.reference[p]-m[p]-o.floating[v],j=m[p]-o.reference[p],E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let k=E?E[_]:0;(!k||!await(i.isElement==null?void 0:i.isElement(E)))&&(k=l.floating[_]||o.floating[v]);const P=b/2-j/2,T=k/2-g[v]/2-1,C=la(h[w],T),L=la(h[x],T),O=C,J=k-g[v]-L,W=k/2-g[v]/2+P,U=Tp(O,W,J),R=!c.arrow&&Wi(s)!=null&&W!==U&&o.reference[v]/2-(W<O?C:L)-g[v]/2<0,I=R?W<O?W-O:W-J:0;return{[p]:m[p]+I,data:{[p]:U,centerOffset:W-U-I,...R&&{alignmentOffset:I}},reset:R}}}),p4=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:o,rects:i,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:g=!0,...y}=as(t,e);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const w=os(s),x=Tn(l),_=os(l)===l,b=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=m||(_||!g?[Pd(l)]:i4(l)),E=v!=="none";!m&&E&&j.push(...d4(l,g,v,b));const k=[l,...j],P=await rc(e,y),T=[];let C=((n=o.flip)==null?void 0:n.overflows)||[];if(d&&T.push(P[w]),h){const W=o4(s,i,b);T.push(P[W[0]],P[W[1]])}if(C=[...C,{placement:s,overflows:T}],!T.every(W=>W<=0)){var L,O;const W=(((L=o.flip)==null?void 0:L.index)||0)+1,U=k[W];if(U&&(!(h==="alignment"?x!==Tn(U):!1)||C.every(N=>N.overflows[0]>0&&Tn(N.placement)===x)))return{data:{index:W,overflows:C},reset:{placement:U}};let R=(O=C.filter(I=>I.overflows[0]<=0).sort((I,N)=>I.overflows[1]-N.overflows[1])[0])==null?void 0:O.placement;if(!R)switch(p){case"bestFit":{var J;const I=(J=C.filter(N=>{if(E){const F=Tn(N.placement);return F===x||F==="y"}return!0}).map(N=>[N.placement,N.overflows.filter(F=>F>0).reduce((F,q)=>F+q,0)]).sort((N,F)=>N[1]-F[1])[0])==null?void 0:J[0];I&&(R=I);break}case"initialPlacement":R=l;break}if(s!==R)return{reset:{placement:R}}}return{}}}};function t0(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function r0(t){return r4.some(e=>t[e]>=0)}const g4=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...s}=as(t,e);switch(n){case"referenceHidden":{const o=await rc(e,{...s,elementContext:"reference"}),i=t0(o,r.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:r0(i)}}}case"escaped":{const o=await rc(e,{...s,altBoundary:!0}),i=t0(o,r.floating);return{data:{escapedOffsets:i,escaped:r0(i)}}}default:return{}}}}},s1=new Set(["left","top"]);async function v4(t,e){const{placement:r,platform:n,elements:s}=t,o=await(n.isRTL==null?void 0:n.isRTL(s.floating)),i=os(r),l=Wi(r),c=Tn(r)==="y",u=s1.has(i)?-1:1,d=o&&c?-1:1,h=as(e,t);let{mainAxis:m,crossAxis:p,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(p=l==="end"?v*-1:v),c?{x:p*d,y:m*u}:{x:m*u,y:p*d}}const x4=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:o,placement:i,middlewareData:l}=e,c=await v4(e,t);return i===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:i}}}}},y4=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:y=>{let{x:w,y:x}=y;return{x:w,y:x}}},...c}=as(t,e),u={x:r,y:n},d=await rc(e,c),h=Tn(os(s)),m=vv(h);let p=u[m],v=u[h];if(o){const y=m==="y"?"top":"left",w=m==="y"?"bottom":"right",x=p+d[y],_=p-d[w];p=Tp(x,p,_)}if(i){const y=h==="y"?"top":"left",w=h==="y"?"bottom":"right",x=v+d[y],_=v-d[w];v=Tp(x,v,_)}const g=l.fn({...e,[m]:p,[h]:v});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[m]:o,[h]:i}}}}}},w4=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:o,middlewareData:i}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=as(t,e),d={x:r,y:n},h=Tn(s),m=vv(h);let p=d[m],v=d[h];const g=as(l,e),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const _=m==="y"?"height":"width",b=o.reference[m]-o.floating[_]+y.mainAxis,j=o.reference[m]+o.reference[_]-y.mainAxis;p<b?p=b:p>j&&(p=j)}if(u){var w,x;const _=m==="y"?"width":"height",b=s1.has(os(s)),j=o.reference[h]-o.floating[_]+(b&&((w=i.offset)==null?void 0:w[h])||0)+(b?0:y.crossAxis),E=o.reference[h]+o.reference[_]+(b?0:((x=i.offset)==null?void 0:x[h])||0)-(b?y.crossAxis:0);v<j?v=j:v>E&&(v=E)}return{[m]:p,[h]:v}}}},_4=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:o,platform:i,elements:l}=e,{apply:c=()=>{},...u}=as(t,e),d=await rc(e,u),h=os(s),m=Wi(s),p=Tn(s)==="y",{width:v,height:g}=o.floating;let y,w;h==="top"||h==="bottom"?(y=h,w=m===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(w=h,y=m==="end"?"top":"bottom");const x=g-d.top-d.bottom,_=v-d.left-d.right,b=la(g-d[y],x),j=la(v-d[w],_),E=!e.middlewareData.shift;let k=b,P=j;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(P=_),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(k=x),E&&!m){const C=Sr(d.left,0),L=Sr(d.right,0),O=Sr(d.top,0),J=Sr(d.bottom,0);p?P=v-2*(C!==0||L!==0?C+L:Sr(d.left,d.right)):k=g-2*(O!==0||J!==0?O+J:Sr(d.top,d.bottom))}await c({...e,availableWidth:P,availableHeight:k});const T=await i.getDimensions(l.floating);return v!==T.width||g!==T.height?{reset:{rects:!0}}:{}}}};function mh(){return typeof window<"u"}function Vi(t){return a1(t)?(t.nodeName||"").toLowerCase():"#document"}function Pr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function zn(t){var e;return(e=(a1(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function a1(t){return mh()?t instanceof Node||t instanceof Pr(t).Node:!1}function fn(t){return mh()?t instanceof Element||t instanceof Pr(t).Element:!1}function Un(t){return mh()?t instanceof HTMLElement||t instanceof Pr(t).HTMLElement:!1}function n0(t){return!mh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Pr(t).ShadowRoot}const b4=new Set(["inline","contents"]);function jc(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=mn(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!b4.has(s)}const j4=new Set(["table","td","th"]);function S4(t){return j4.has(Vi(t))}const N4=[":popover-open",":modal"];function ph(t){return N4.some(e=>{try{return t.matches(e)}catch{return!1}})}const k4=["transform","translate","scale","rotate","perspective"],C4=["transform","translate","scale","rotate","perspective","filter"],E4=["paint","layout","strict","content"];function wv(t){const e=_v(),r=fn(t)?mn(t):t;return k4.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||C4.some(n=>(r.willChange||"").includes(n))||E4.some(n=>(r.contain||"").includes(n))}function P4(t){let e=ca(t);for(;Un(e)&&!Ti(e);){if(wv(e))return e;if(ph(e))return null;e=ca(e)}return null}function _v(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const T4=new Set(["html","body","#document"]);function Ti(t){return T4.has(Vi(t))}function mn(t){return Pr(t).getComputedStyle(t)}function gh(t){return fn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ca(t){if(Vi(t)==="html")return t;const e=t.assignedSlot||t.parentNode||n0(t)&&t.host||zn(t);return n0(e)?e.host:e}function o1(t){const e=ca(t);return Ti(e)?t.ownerDocument?t.ownerDocument.body:t.body:Un(e)&&jc(e)?e:o1(e)}function nc(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=o1(t),o=s===((n=t.ownerDocument)==null?void 0:n.body),i=Pr(s);if(o){const l=Op(i);return e.concat(i,i.visualViewport||[],jc(s)?s:[],l&&r?nc(l):[])}return e.concat(s,nc(s,[],r))}function Op(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function i1(t){const e=mn(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=Un(t),o=s?t.offsetWidth:r,i=s?t.offsetHeight:n,l=Ed(r)!==o||Ed(n)!==i;return l&&(r=o,n=i),{width:r,height:n,$:l}}function bv(t){return fn(t)?t:t.contextElement}function ri(t){const e=bv(t);if(!Un(e))return An(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:o}=i1(e);let i=(o?Ed(r.width):r.width)/n,l=(o?Ed(r.height):r.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const R4=An(0);function l1(t){const e=Pr(t);return!_v()||!e.visualViewport?R4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function O4(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==Pr(t)?!1:e}function ao(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),o=bv(t);let i=An(1);e&&(n?fn(n)&&(i=ri(n)):i=ri(t));const l=O4(o,r,n)?l1(o):An(0);let c=(s.left+l.x)/i.x,u=(s.top+l.y)/i.y,d=s.width/i.x,h=s.height/i.y;if(o){const m=Pr(o),p=n&&fn(n)?Pr(n):n;let v=m,g=Op(v);for(;g&&n&&p!==v;){const y=ri(g),w=g.getBoundingClientRect(),x=mn(g),_=w.left+(g.clientLeft+parseFloat(x.paddingLeft))*y.x,b=w.top+(g.clientTop+parseFloat(x.paddingTop))*y.y;c*=y.x,u*=y.y,d*=y.x,h*=y.y,c+=_,u+=b,v=Pr(g),g=Op(v)}}return Td({width:d,height:h,x:c,y:u})}function jv(t,e){const r=gh(t).scrollLeft;return e?e.left+r:ao(zn(t)).left+r}function c1(t,e,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),s=n.left+e.scrollLeft-(r?0:jv(t,n)),o=n.top+e.scrollTop;return{x:s,y:o}}function D4(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const o=s==="fixed",i=zn(n),l=e?ph(e.floating):!1;if(n===i||l&&o)return r;let c={scrollLeft:0,scrollTop:0},u=An(1);const d=An(0),h=Un(n);if((h||!h&&!o)&&((Vi(n)!=="body"||jc(i))&&(c=gh(n)),Un(n))){const p=ao(n);u=ri(n),d.x=p.x+n.clientLeft,d.y=p.y+n.clientTop}const m=i&&!h&&!o?c1(i,c,!0):An(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+m.x,y:r.y*u.y-c.scrollTop*u.y+d.y+m.y}}function A4(t){return Array.from(t.getClientRects())}function M4(t){const e=zn(t),r=gh(t),n=t.ownerDocument.body,s=Sr(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),o=Sr(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+jv(t);const l=-r.scrollTop;return mn(n).direction==="rtl"&&(i+=Sr(e.clientWidth,n.clientWidth)-s),{width:s,height:o,x:i,y:l}}function I4(t,e){const r=Pr(t),n=zn(t),s=r.visualViewport;let o=n.clientWidth,i=n.clientHeight,l=0,c=0;if(s){o=s.width,i=s.height;const u=_v();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:o,height:i,x:l,y:c}}const L4=new Set(["absolute","fixed"]);function F4(t,e){const r=ao(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,o=Un(t)?ri(t):An(1),i=t.clientWidth*o.x,l=t.clientHeight*o.y,c=s*o.x,u=n*o.y;return{width:i,height:l,x:c,y:u}}function s0(t,e,r){let n;if(e==="viewport")n=I4(t,r);else if(e==="document")n=M4(zn(t));else if(fn(e))n=F4(e,r);else{const s=l1(t);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Td(n)}function u1(t,e){const r=ca(t);return r===e||!fn(r)||Ti(r)?!1:mn(r).position==="fixed"||u1(r,e)}function $4(t,e){const r=e.get(t);if(r)return r;let n=nc(t,[],!1).filter(l=>fn(l)&&Vi(l)!=="body"),s=null;const o=mn(t).position==="fixed";let i=o?ca(t):t;for(;fn(i)&&!Ti(i);){const l=mn(i),c=wv(i);!c&&l.position==="fixed"&&(s=null),(o?!c&&!s:!c&&l.position==="static"&&!!s&&L4.has(s.position)||jc(i)&&!c&&u1(t,i))?n=n.filter(d=>d!==i):s=l,i=ca(i)}return e.set(t,n),n}function U4(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const i=[...r==="clippingAncestors"?ph(e)?[]:$4(e,this._c):[].concat(r),n],l=i[0],c=i.reduce((u,d)=>{const h=s0(e,d,s);return u.top=Sr(h.top,u.top),u.right=la(h.right,u.right),u.bottom=la(h.bottom,u.bottom),u.left=Sr(h.left,u.left),u},s0(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function B4(t){const{width:e,height:r}=i1(t);return{width:e,height:r}}function z4(t,e,r){const n=Un(e),s=zn(e),o=r==="fixed",i=ao(t,!0,o,e);let l={scrollLeft:0,scrollTop:0};const c=An(0);function u(){c.x=jv(s)}if(n||!n&&!o)if((Vi(e)!=="body"||jc(s))&&(l=gh(e)),n){const p=ao(e,!0,o,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&u();o&&!n&&s&&u();const d=s&&!n&&!o?c1(s,l):An(0),h=i.left+l.scrollLeft-c.x-d.x,m=i.top+l.scrollTop-c.y-d.y;return{x:h,y:m,width:i.width,height:i.height}}function Mf(t){return mn(t).position==="static"}function a0(t,e){if(!Un(t)||mn(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return zn(t)===r&&(r=r.ownerDocument.body),r}function d1(t,e){const r=Pr(t);if(ph(t))return r;if(!Un(t)){let s=ca(t);for(;s&&!Ti(s);){if(fn(s)&&!Mf(s))return s;s=ca(s)}return r}let n=a0(t,e);for(;n&&S4(n)&&Mf(n);)n=a0(n,e);return n&&Ti(n)&&Mf(n)&&!wv(n)?r:n||P4(t)||r}const W4=async function(t){const e=this.getOffsetParent||d1,r=this.getDimensions,n=await r(t.floating);return{reference:z4(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function V4(t){return mn(t).direction==="rtl"}const H4={convertOffsetParentRelativeRectToViewportRelativeRect:D4,getDocumentElement:zn,getClippingRect:U4,getOffsetParent:d1,getElementRects:W4,getClientRects:A4,getDimensions:B4,getScale:ri,isElement:fn,isRTL:V4};function h1(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function q4(t,e){let r=null,n;const s=zn(t);function o(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const u=t.getBoundingClientRect(),{left:d,top:h,width:m,height:p}=u;if(l||e(),!m||!p)return;const v=yu(h),g=yu(s.clientWidth-(d+m)),y=yu(s.clientHeight-(h+p)),w=yu(d),_={rootMargin:-v+"px "+-g+"px "+-y+"px "+-w+"px",threshold:Sr(0,la(1,c))||1};let b=!0;function j(E){const k=E[0].intersectionRatio;if(k!==c){if(!b)return i();k?i(!1,k):n=setTimeout(()=>{i(!1,1e-7)},1e3)}k===1&&!h1(u,t.getBoundingClientRect())&&i(),b=!1}try{r=new IntersectionObserver(j,{..._,root:s.ownerDocument})}catch{r=new IntersectionObserver(j,_)}r.observe(t)}return i(!0),o}function K4(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=bv(t),d=s||o?[...u?nc(u):[],...nc(e)]:[];d.forEach(w=>{s&&w.addEventListener("scroll",r,{passive:!0}),o&&w.addEventListener("resize",r)});const h=u&&l?q4(u,r):null;let m=-1,p=null;i&&(p=new ResizeObserver(w=>{let[x]=w;x&&x.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(e)})),r()}),u&&!c&&p.observe(u),p.observe(e));let v,g=c?ao(t):null;c&&y();function y(){const w=ao(t);g&&!h1(g,w)&&r(),g=w,v=requestAnimationFrame(y)}return r(),()=>{var w;d.forEach(x=>{s&&x.removeEventListener("scroll",r),o&&x.removeEventListener("resize",r)}),h==null||h(),(w=p)==null||w.disconnect(),p=null,c&&cancelAnimationFrame(v)}}const G4=x4,Y4=y4,Q4=p4,J4=_4,X4=g4,o0=m4,Z4=w4,eF=(t,e,r)=>{const n=new Map,s={platform:H4,...r},o={...s.platform,_c:n};return f4(t,e,{...s,platform:o})};var tF=typeof document<"u",rF=function(){},Fu=tF?f.useLayoutEffect:rF;function Rd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!Rd(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const o=s[n];if(!(o==="_owner"&&t.$$typeof)&&!Rd(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function f1(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function i0(t,e){const r=f1(t);return Math.round(e*r)/r}function If(t){const e=f.useRef(t);return Fu(()=>{e.current=t}),e}function nF(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,h]=f.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[m,p]=f.useState(n);Rd(m,n)||p(n);const[v,g]=f.useState(null),[y,w]=f.useState(null),x=f.useCallback(N=>{N!==E.current&&(E.current=N,g(N))},[]),_=f.useCallback(N=>{N!==k.current&&(k.current=N,w(N))},[]),b=o||v,j=i||y,E=f.useRef(null),k=f.useRef(null),P=f.useRef(d),T=c!=null,C=If(c),L=If(s),O=If(u),J=f.useCallback(()=>{if(!E.current||!k.current)return;const N={placement:e,strategy:r,middleware:m};L.current&&(N.platform=L.current),eF(E.current,k.current,N).then(F=>{const q={...F,isPositioned:O.current!==!1};W.current&&!Rd(P.current,q)&&(P.current=q,Li.flushSync(()=>{h(q)}))})},[m,e,r,L,O]);Fu(()=>{u===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,h(N=>({...N,isPositioned:!1})))},[u]);const W=f.useRef(!1);Fu(()=>(W.current=!0,()=>{W.current=!1}),[]),Fu(()=>{if(b&&(E.current=b),j&&(k.current=j),b&&j){if(C.current)return C.current(b,j,J);J()}},[b,j,J,C,T]);const U=f.useMemo(()=>({reference:E,floating:k,setReference:x,setFloating:_}),[x,_]),R=f.useMemo(()=>({reference:b,floating:j}),[b,j]),I=f.useMemo(()=>{const N={position:r,left:0,top:0};if(!R.floating)return N;const F=i0(R.floating,d.x),q=i0(R.floating,d.y);return l?{...N,transform:"translate("+F+"px, "+q+"px)",...f1(R.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:F,top:q}},[r,l,R.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:J,refs:U,elements:R,floatingStyles:I}),[d,J,U,R,I])}const sF=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:s}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?o0({element:n.current,padding:s}).fn(r):{}:n?o0({element:n,padding:s}).fn(r):{}}}},aF=(t,e)=>({...G4(t),options:[t,e]}),oF=(t,e)=>({...Y4(t),options:[t,e]}),iF=(t,e)=>({...Z4(t),options:[t,e]}),lF=(t,e)=>({...Q4(t),options:[t,e]}),cF=(t,e)=>({...J4(t),options:[t,e]}),uF=(t,e)=>({...X4(t),options:[t,e]}),dF=(t,e)=>({...sF(t),options:[t,e]});var hF="Arrow",m1=f.forwardRef((t,e)=>{const{children:r,width:n=10,height:s=5,...o}=t;return a.jsx(je.svg,{...o,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});m1.displayName=hF;var fF=m1;function p1(t){const[e,r]=f.useState(void 0);return Pt(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let i,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,l=u.blockSize}else i=t.offsetWidth,l=t.offsetHeight;r({width:i,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var Sv="Popper",[g1,Hi]=br(Sv),[mF,v1]=g1(Sv),x1=t=>{const{__scopePopper:e,children:r}=t,[n,s]=f.useState(null);return a.jsx(mF,{scope:e,anchor:n,onAnchorChange:s,children:r})};x1.displayName=Sv;var y1="PopperAnchor",w1=f.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...s}=t,o=v1(y1,r),i=f.useRef(null),l=Ae(e,i);return f.useEffect(()=>{o.onAnchorChange((n==null?void 0:n.current)||i.current)}),n?null:a.jsx(je.div,{...s,ref:l})});w1.displayName=y1;var Nv="PopperContent",[pF,gF]=g1(Nv),_1=f.forwardRef((t,e)=>{var le,Ne,Re,z,re,H;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:v,...g}=t,y=v1(Nv,r),[w,x]=f.useState(null),_=Ae(e,de=>x(de)),[b,j]=f.useState(null),E=p1(b),k=(E==null?void 0:E.width)??0,P=(E==null?void 0:E.height)??0,T=n+(o!=="center"?"-"+o:""),C=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},L=Array.isArray(u)?u:[u],O=L.length>0,J={padding:C,boundary:L.filter(xF),altBoundary:O},{refs:W,floatingStyles:U,placement:R,isPositioned:I,middlewareData:N}=nF({strategy:"fixed",placement:T,whileElementsMounted:(...de)=>K4(...de,{animationFrame:p==="always"}),elements:{reference:y.anchor},middleware:[aF({mainAxis:s+P,alignmentAxis:i}),c&&oF({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?iF():void 0,...J}),c&&lF({...J}),cF({...J,apply:({elements:de,rects:Oe,availableWidth:He,availableHeight:et})=>{const{width:ct,height:Mt}=Oe.reference,B=de.floating.style;B.setProperty("--radix-popper-available-width",`${He}px`),B.setProperty("--radix-popper-available-height",`${et}px`),B.setProperty("--radix-popper-anchor-width",`${ct}px`),B.setProperty("--radix-popper-anchor-height",`${Mt}px`)}}),b&&dF({element:b,padding:l}),yF({arrowWidth:k,arrowHeight:P}),m&&uF({strategy:"referenceHidden",...J})]}),[F,q]=S1(R),A=Ft(v);Pt(()=>{I&&(A==null||A())},[I,A]);const Q=(le=N.arrow)==null?void 0:le.x,ye=(Ne=N.arrow)==null?void 0:Ne.y,xe=((Re=N.arrow)==null?void 0:Re.centerOffset)!==0,[Ie,be]=f.useState();return Pt(()=>{w&&be(window.getComputedStyle(w).zIndex)},[w]),a.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...U,transform:I?U.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ie,"--radix-popper-transform-origin":[(z=N.transformOrigin)==null?void 0:z.x,(re=N.transformOrigin)==null?void 0:re.y].join(" "),...((H=N.hide)==null?void 0:H.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(pF,{scope:r,placedSide:F,onArrowChange:j,arrowX:Q,arrowY:ye,shouldHideArrow:xe,children:a.jsx(je.div,{"data-side":F,"data-align":q,...g,ref:_,style:{...g.style,animation:I?void 0:"none"}})})})});_1.displayName=Nv;var b1="PopperArrow",vF={top:"bottom",right:"left",bottom:"top",left:"right"},j1=f.forwardRef(function(e,r){const{__scopePopper:n,...s}=e,o=gF(b1,n),i=vF[o.placedSide];return a.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:a.jsx(fF,{...s,ref:r,style:{...s.style,display:"block"}})})});j1.displayName=b1;function xF(t){return t!==null}var yF=t=>({name:"transformOrigin",options:t,fn(e){var y,w,x;const{placement:r,rects:n,middlewareData:s}=e,i=((y=s.arrow)==null?void 0:y.centerOffset)!==0,l=i?0:t.arrowWidth,c=i?0:t.arrowHeight,[u,d]=S1(r),h={start:"0%",center:"50%",end:"100%"}[d],m=(((w=s.arrow)==null?void 0:w.x)??0)+l/2,p=(((x=s.arrow)==null?void 0:x.y)??0)+c/2;let v="",g="";return u==="bottom"?(v=i?h:`${m}px`,g=`${-c}px`):u==="top"?(v=i?h:`${m}px`,g=`${n.floating.height+c}px`):u==="right"?(v=`${-c}px`,g=i?h:`${p}px`):u==="left"&&(v=`${n.floating.width+c}px`,g=i?h:`${p}px`),{data:{x:v,y:g}}}});function S1(t){const[e,r="center"]=t.split("-");return[e,r]}var kv=x1,vh=w1,Cv=_1,Ev=j1,wF="Portal",Sc=f.forwardRef((t,e)=>{var l;const{container:r,...n}=t,[s,o]=f.useState(!1);Pt(()=>o(!0),[]);const i=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?d2.createPortal(a.jsx(je.div,{...n,ref:e}),i):null});Sc.displayName=wF;var _F=Gp[" useInsertionEffect ".trim().toString()]||Pt;function ua({prop:t,defaultProp:e,onChange:r=()=>{},caller:n}){const[s,o,i]=bF({defaultProp:e,onChange:r}),l=t!==void 0,c=l?t:s;{const d=f.useRef(t!==void 0);f.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=f.useCallback(d=>{var h;if(l){const m=jF(d)?d(t):d;m!==t&&((h=i.current)==null||h.call(i,m))}else o(d)},[l,t,o,i]);return[c,u]}function bF({defaultProp:t,onChange:e}){const[r,n]=f.useState(t),s=f.useRef(r),o=f.useRef(e);return _F(()=>{o.current=e},[e]),f.useEffect(()=>{var i;s.current!==r&&((i=o.current)==null||i.call(o,r),s.current=r)},[r,s]),[r,n,o]}function jF(t){return typeof t=="function"}function N1(t){const e=f.useRef({value:t,previous:t});return f.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var k1=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),SF="VisuallyHidden",NF=f.forwardRef((t,e)=>a.jsx(je.span,{...t,ref:e,style:{...k1,...t.style}}));NF.displayName=SF;var kF=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ko=new WeakMap,wu=new WeakMap,_u={},Lf=0,C1=function(t){return t&&(t.host||C1(t.parentNode))},CF=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=C1(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},EF=function(t,e,r,n){var s=CF(e,Array.isArray(t)?t:[t]);_u[r]||(_u[r]=new WeakMap);var o=_u[r],i=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))d(m);else try{var p=m.getAttribute(n),v=p!==null&&p!=="false",g=(ko.get(m)||0)+1,y=(o.get(m)||0)+1;ko.set(m,g),o.set(m,y),i.push(m),g===1&&v&&wu.set(m,!0),y===1&&m.setAttribute(r,"true"),v||m.setAttribute(n,"true")}catch(w){console.error("aria-hidden: cannot operate on ",m,w)}})};return d(e),l.clear(),Lf++,function(){i.forEach(function(h){var m=ko.get(h)-1,p=o.get(h)-1;ko.set(h,m),o.set(h,p),m||(wu.has(h)||h.removeAttribute(n),wu.delete(h)),p||h.removeAttribute(r)}),Lf--,Lf||(ko=new WeakMap,ko=new WeakMap,wu=new WeakMap,_u={})}},xh=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),s=kF(t);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),EF(n,s,r,"aria-hidden")):function(){return null}},$u="right-scroll-bar-position",Uu="width-before-scroll-bar",PF="with-scroll-bars-hidden",TF="--removed-body-scroll-bar-size";function Ff(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function RF(t,e){var r=f.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=e,r.facade}var OF=typeof window<"u"?f.useLayoutEffect:f.useEffect,l0=new WeakMap;function DF(t,e){var r=RF(null,function(n){return t.forEach(function(s){return Ff(s,n)})});return OF(function(){var n=l0.get(r);if(n){var s=new Set(n),o=new Set(t),i=r.current;s.forEach(function(l){o.has(l)||Ff(l,null)}),o.forEach(function(l){s.has(l)||Ff(l,i)})}l0.set(r,t)},[t]),r}function AF(t){return t}function MF(t,e){e===void 0&&(e=AF);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(o){var i=e(o,n);return r.push(i),function(){r=r.filter(function(l){return l!==i})}},assignSyncMedium:function(o){for(n=!0;r.length;){var i=r;r=[],i.forEach(o)}r={push:function(l){return o(l)},filter:function(){return r}}},assignMedium:function(o){n=!0;var i=[];if(r.length){var l=r;r=[],l.forEach(o),i=r}var c=function(){var d=i;i=[],d.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){i.push(d),u()},filter:function(d){return i=i.filter(d),r}}}};return s}function IF(t){t===void 0&&(t={});var e=MF(null);return e.options=$r({async:!0,ssr:!1},t),e}var E1=function(t){var e=t.sideCar,r=ga(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return f.createElement(n,$r({},r))};E1.isSideCarExport=!0;function LF(t,e){return t.useMedium(e),E1}var P1=IF(),$f=function(){},yh=f.forwardRef(function(t,e){var r=f.useRef(null),n=f.useState({onScrollCapture:$f,onWheelCapture:$f,onTouchMoveCapture:$f}),s=n[0],o=n[1],i=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,m=t.sideCar,p=t.noRelative,v=t.noIsolation,g=t.inert,y=t.allowPinchZoom,w=t.as,x=w===void 0?"div":w,_=t.gapMode,b=ga(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=m,E=DF([r,e]),k=$r($r({},b),s);return f.createElement(f.Fragment,null,d&&f.createElement(j,{sideCar:P1,removeScrollBar:u,shards:h,noRelative:p,noIsolation:v,inert:g,setCallbacks:o,allowPinchZoom:!!y,lockRef:r,gapMode:_}),i?f.cloneElement(f.Children.only(l),$r($r({},k),{ref:E})):f.createElement(x,$r({},k,{className:c,ref:E}),l))});yh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};yh.classNames={fullWidth:Uu,zeroRight:$u};var FF=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function $F(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=FF();return e&&t.setAttribute("nonce",e),t}function UF(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function BF(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var zF=function(){var t=0,e=null;return{add:function(r){t==0&&(e=$F())&&(UF(e,r),BF(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},WF=function(){var t=zF();return function(e,r){f.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},T1=function(){var t=WF(),e=function(r){var n=r.styles,s=r.dynamic;return t(n,s),null};return e},VF={left:0,top:0,right:0,gap:0},Uf=function(t){return parseInt(t||"",10)||0},HF=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Uf(r),Uf(n),Uf(s)]},qF=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return VF;var e=HF(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},KF=T1(),ni="data-scroll-locked",GF=function(t,e,r,n){var s=t.left,o=t.top,i=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(PF,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(ni,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat($u,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Uu,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat($u," .").concat($u,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Uu," .").concat(Uu,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(ni,`] {
    `).concat(TF,": ").concat(l,`px;
  }
`)},c0=function(){var t=parseInt(document.body.getAttribute(ni)||"0",10);return isFinite(t)?t:0},YF=function(){f.useEffect(function(){return document.body.setAttribute(ni,(c0()+1).toString()),function(){var t=c0()-1;t<=0?document.body.removeAttribute(ni):document.body.setAttribute(ni,t.toString())}},[])},QF=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,s=n===void 0?"margin":n;YF();var o=f.useMemo(function(){return qF(s)},[s]);return f.createElement(KF,{styles:GF(o,!e,s,r?"":"!important")})},Dp=!1;if(typeof window<"u")try{var bu=Object.defineProperty({},"passive",{get:function(){return Dp=!0,!0}});window.addEventListener("test",bu,bu),window.removeEventListener("test",bu,bu)}catch{Dp=!1}var Co=Dp?{passive:!1}:!1,JF=function(t){return t.tagName==="TEXTAREA"},R1=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!JF(t)&&r[e]==="visible")},XF=function(t){return R1(t,"overflowY")},ZF=function(t){return R1(t,"overflowX")},u0=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=O1(t,n);if(s){var o=D1(t,n),i=o[1],l=o[2];if(i>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},e$=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},t$=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},O1=function(t,e){return t==="v"?XF(e):ZF(e)},D1=function(t,e){return t==="v"?e$(e):t$(e)},r$=function(t,e){return t==="h"&&e==="rtl"?-1:1},n$=function(t,e,r,n,s){var o=r$(t,window.getComputedStyle(e).direction),i=o*n,l=r.target,c=e.contains(l),u=!1,d=i>0,h=0,m=0;do{if(!l)break;var p=D1(t,l),v=p[0],g=p[1],y=p[2],w=g-y-o*v;(v||w)&&O1(t,l)&&(h+=w,m+=v);var x=l.parentNode;l=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(m)<1||!s))&&(u=!0),u},ju=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},d0=function(t){return[t.deltaX,t.deltaY]},h0=function(t){return t&&"current"in t?t.current:t},s$=function(t,e){return t[0]===e[0]&&t[1]===e[1]},a$=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},o$=0,Eo=[];function i$(t){var e=f.useRef([]),r=f.useRef([0,0]),n=f.useRef(),s=f.useState(o$++)[0],o=f.useState(T1)[0],i=f.useRef(t);f.useEffect(function(){i.current=t},[t]),f.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var g=Yg([t.lockRef.current],(t.shards||[]).map(h0),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=f.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!i.current.allowPinchZoom;var w=ju(g),x=r.current,_="deltaX"in g?g.deltaX:x[0]-w[0],b="deltaY"in g?g.deltaY:x[1]-w[1],j,E=g.target,k=Math.abs(_)>Math.abs(b)?"h":"v";if("touches"in g&&k==="h"&&E.type==="range")return!1;var P=u0(k,E);if(!P)return!0;if(P?j=k:(j=k==="v"?"h":"v",P=u0(k,E)),!P)return!1;if(!n.current&&"changedTouches"in g&&(_||b)&&(n.current=j),!j)return!0;var T=n.current||j;return n$(T,y,g,T==="h"?_:b,!0)},[]),c=f.useCallback(function(g){var y=g;if(!(!Eo.length||Eo[Eo.length-1]!==o)){var w="deltaY"in y?d0(y):ju(y),x=e.current.filter(function(j){return j.name===y.type&&(j.target===y.target||y.target===j.shadowParent)&&s$(j.delta,w)})[0];if(x&&x.should){y.cancelable&&y.preventDefault();return}if(!x){var _=(i.current.shards||[]).map(h0).filter(Boolean).filter(function(j){return j.contains(y.target)}),b=_.length>0?l(y,_[0]):!i.current.noIsolation;b&&y.cancelable&&y.preventDefault()}}},[]),u=f.useCallback(function(g,y,w,x){var _={name:g,delta:y,target:w,should:x,shadowParent:l$(w)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(b){return b!==_})},1)},[]),d=f.useCallback(function(g){r.current=ju(g),n.current=void 0},[]),h=f.useCallback(function(g){u(g.type,d0(g),g.target,l(g,t.lockRef.current))},[]),m=f.useCallback(function(g){u(g.type,ju(g),g.target,l(g,t.lockRef.current))},[]);f.useEffect(function(){return Eo.push(o),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Co),document.addEventListener("touchmove",c,Co),document.addEventListener("touchstart",d,Co),function(){Eo=Eo.filter(function(g){return g!==o}),document.removeEventListener("wheel",c,Co),document.removeEventListener("touchmove",c,Co),document.removeEventListener("touchstart",d,Co)}},[]);var p=t.removeScrollBar,v=t.inert;return f.createElement(f.Fragment,null,v?f.createElement(o,{styles:a$(s)}):null,p?f.createElement(QF,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function l$(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const c$=LF(P1,i$);var Nc=f.forwardRef(function(t,e){return f.createElement(yh,$r({},t,{ref:e,sideCar:c$}))});Nc.classNames=yh.classNames;var u$=[" ","Enter","ArrowUp","ArrowDown"],d$=[" ","Enter"],oo="Select",[wh,_h,h$]=gv(oo),[qi,Wz]=br(oo,[h$,Hi]),bh=Hi(),[f$,ya]=qi(oo),[m$,p$]=qi(oo),A1=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:s,onOpenChange:o,value:i,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:m,required:p,form:v}=t,g=bh(e),[y,w]=f.useState(null),[x,_]=f.useState(null),[b,j]=f.useState(!1),E=wc(u),[k,P]=ua({prop:n,defaultProp:s??!1,onChange:o,caller:oo}),[T,C]=ua({prop:i,defaultProp:l,onChange:c,caller:oo}),L=f.useRef(null),O=y?v||!!y.closest("form"):!0,[J,W]=f.useState(new Set),U=Array.from(J).map(R=>R.props.value).join(";");return a.jsx(kv,{...g,children:a.jsxs(f$,{required:p,scope:e,trigger:y,onTriggerChange:w,valueNode:x,onValueNodeChange:_,valueNodeHasChildren:b,onValueNodeHasChildrenChange:j,contentId:un(),value:T,onValueChange:C,open:k,onOpenChange:P,dir:E,triggerPointerDownPosRef:L,disabled:m,children:[a.jsx(wh.Provider,{scope:e,children:a.jsx(m$,{scope:t.__scopeSelect,onNativeOptionAdd:f.useCallback(R=>{W(I=>new Set(I).add(R))},[]),onNativeOptionRemove:f.useCallback(R=>{W(I=>{const N=new Set(I);return N.delete(R),N})},[]),children:r})}),O?a.jsxs(sN,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:h,value:T,onChange:R=>C(R.target.value),disabled:m,form:v,children:[T===void 0?a.jsx("option",{value:""}):null,Array.from(J)]},U):null]})})};A1.displayName=oo;var M1="SelectTrigger",I1=f.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...s}=t,o=bh(r),i=ya(M1,r),l=i.disabled||n,c=Ae(e,i.onTriggerChange),u=_h(r),d=f.useRef("touch"),[h,m,p]=oN(g=>{const y=u().filter(_=>!_.disabled),w=y.find(_=>_.value===i.value),x=iN(y,g,w);x!==void 0&&i.onValueChange(x.value)}),v=g=>{l||(i.onOpenChange(!0),p()),g&&(i.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return a.jsx(vh,{asChild:!0,...o,children:a.jsx(je.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":aN(i.value)?"":void 0,...s,ref:c,onClick:ie(s.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&v(g)}),onPointerDown:ie(s.onPointerDown,g=>{d.current=g.pointerType;const y=g.target;y.hasPointerCapture(g.pointerId)&&y.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(v(g),g.preventDefault())}),onKeyDown:ie(s.onKeyDown,g=>{const y=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&m(g.key),!(y&&g.key===" ")&&u$.includes(g.key)&&(v(),g.preventDefault())})})})});I1.displayName=M1;var L1="SelectValue",F1=f.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,children:o,placeholder:i="",...l}=t,c=ya(L1,r),{onValueNodeHasChildrenChange:u}=c,d=o!==void 0,h=Ae(e,c.onValueNodeChange);return Pt(()=>{u(d)},[u,d]),a.jsx(je.span,{...l,ref:h,style:{pointerEvents:"none"},children:aN(c.value)?a.jsx(a.Fragment,{children:i}):o})});F1.displayName=L1;var g$="SelectIcon",$1=f.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...s}=t;return a.jsx(je.span,{"aria-hidden":!0,...s,ref:e,children:n||""})});$1.displayName=g$;var v$="SelectPortal",U1=t=>a.jsx(Sc,{asChild:!0,...t});U1.displayName=v$;var io="SelectContent",B1=f.forwardRef((t,e)=>{const r=ya(io,t.__scopeSelect),[n,s]=f.useState();if(Pt(()=>{s(new DocumentFragment)},[]),!r.open){const o=n;return o?Li.createPortal(a.jsx(z1,{scope:t.__scopeSelect,children:a.jsx(wh.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),o):null}return a.jsx(W1,{...t,ref:e})});B1.displayName=io;var Xr=10,[z1,wa]=qi(io),x$="SelectContentImpl",y$=oa("SelectContent.RemoveScroll"),W1=f.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:v,hideWhenDetached:g,avoidCollisions:y,...w}=t,x=ya(io,r),[_,b]=f.useState(null),[j,E]=f.useState(null),k=Ae(e,le=>b(le)),[P,T]=f.useState(null),[C,L]=f.useState(null),O=_h(r),[J,W]=f.useState(!1),U=f.useRef(!1);f.useEffect(()=>{if(_)return xh(_)},[_]),fh();const R=f.useCallback(le=>{const[Ne,...Re]=O().map(H=>H.ref.current),[z]=Re.slice(-1),re=document.activeElement;for(const H of le)if(H===re||(H==null||H.scrollIntoView({block:"nearest"}),H===Ne&&j&&(j.scrollTop=0),H===z&&j&&(j.scrollTop=j.scrollHeight),H==null||H.focus(),document.activeElement!==re))return},[O,j]),I=f.useCallback(()=>R([P,_]),[R,P,_]);f.useEffect(()=>{J&&I()},[J,I]);const{onOpenChange:N,triggerPointerDownPosRef:F}=x;f.useEffect(()=>{if(_){let le={x:0,y:0};const Ne=z=>{var re,H;le={x:Math.abs(Math.round(z.pageX)-(((re=F.current)==null?void 0:re.x)??0)),y:Math.abs(Math.round(z.pageY)-(((H=F.current)==null?void 0:H.y)??0))}},Re=z=>{le.x<=10&&le.y<=10?z.preventDefault():_.contains(z.target)||N(!1),document.removeEventListener("pointermove",Ne),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",Ne),document.addEventListener("pointerup",Re,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ne),document.removeEventListener("pointerup",Re,{capture:!0})}}},[_,N,F]),f.useEffect(()=>{const le=()=>N(!1);return window.addEventListener("blur",le),window.addEventListener("resize",le),()=>{window.removeEventListener("blur",le),window.removeEventListener("resize",le)}},[N]);const[q,A]=oN(le=>{const Ne=O().filter(re=>!re.disabled),Re=Ne.find(re=>re.ref.current===document.activeElement),z=iN(Ne,le,Re);z&&setTimeout(()=>z.ref.current.focus())}),Q=f.useCallback((le,Ne,Re)=>{const z=!U.current&&!Re;(x.value!==void 0&&x.value===Ne||z)&&(T(le),z&&(U.current=!0))},[x.value]),ye=f.useCallback(()=>_==null?void 0:_.focus(),[_]),xe=f.useCallback((le,Ne,Re)=>{const z=!U.current&&!Re;(x.value!==void 0&&x.value===Ne||z)&&L(le)},[x.value]),Ie=n==="popper"?Ap:V1,be=Ie===Ap?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:v,hideWhenDetached:g,avoidCollisions:y}:{};return a.jsx(z1,{scope:r,content:_,viewport:j,onViewportChange:E,itemRefCallback:Q,selectedItem:P,onItemLeave:ye,itemTextRefCallback:xe,focusSelectedItem:I,selectedItemText:C,position:n,isPositioned:J,searchRef:q,children:a.jsx(Nc,{as:y$,allowPinchZoom:!0,children:a.jsx(bc,{asChild:!0,trapped:x.open,onMountAutoFocus:le=>{le.preventDefault()},onUnmountAutoFocus:ie(s,le=>{var Ne;(Ne=x.trigger)==null||Ne.focus({preventScroll:!0}),le.preventDefault()}),children:a.jsx(_c,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:le=>le.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:a.jsx(Ie,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:le=>le.preventDefault(),...w,...be,onPlaced:()=>W(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:ie(w.onKeyDown,le=>{const Ne=le.ctrlKey||le.altKey||le.metaKey;if(le.key==="Tab"&&le.preventDefault(),!Ne&&le.key.length===1&&A(le.key),["ArrowUp","ArrowDown","Home","End"].includes(le.key)){let z=O().filter(re=>!re.disabled).map(re=>re.ref.current);if(["ArrowUp","End"].includes(le.key)&&(z=z.slice().reverse()),["ArrowUp","ArrowDown"].includes(le.key)){const re=le.target,H=z.indexOf(re);z=z.slice(H+1)}setTimeout(()=>R(z)),le.preventDefault()}})})})})})})});W1.displayName=x$;var w$="SelectItemAlignedPosition",V1=f.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...s}=t,o=ya(io,r),i=wa(io,r),[l,c]=f.useState(null),[u,d]=f.useState(null),h=Ae(e,k=>d(k)),m=_h(r),p=f.useRef(!1),v=f.useRef(!0),{viewport:g,selectedItem:y,selectedItemText:w,focusSelectedItem:x}=i,_=f.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&u&&g&&y&&w){const k=o.trigger.getBoundingClientRect(),P=u.getBoundingClientRect(),T=o.valueNode.getBoundingClientRect(),C=w.getBoundingClientRect();if(o.dir!=="rtl"){const re=C.left-P.left,H=T.left-re,de=k.left-H,Oe=k.width+de,He=Math.max(Oe,P.width),et=window.innerWidth-Xr,ct=Ep(H,[Xr,Math.max(Xr,et-He)]);l.style.minWidth=Oe+"px",l.style.left=ct+"px"}else{const re=P.right-C.right,H=window.innerWidth-T.right-re,de=window.innerWidth-k.right-H,Oe=k.width+de,He=Math.max(Oe,P.width),et=window.innerWidth-Xr,ct=Ep(H,[Xr,Math.max(Xr,et-He)]);l.style.minWidth=Oe+"px",l.style.right=ct+"px"}const L=m(),O=window.innerHeight-Xr*2,J=g.scrollHeight,W=window.getComputedStyle(u),U=parseInt(W.borderTopWidth,10),R=parseInt(W.paddingTop,10),I=parseInt(W.borderBottomWidth,10),N=parseInt(W.paddingBottom,10),F=U+R+J+N+I,q=Math.min(y.offsetHeight*5,F),A=window.getComputedStyle(g),Q=parseInt(A.paddingTop,10),ye=parseInt(A.paddingBottom,10),xe=k.top+k.height/2-Xr,Ie=O-xe,be=y.offsetHeight/2,le=y.offsetTop+be,Ne=U+R+le,Re=F-Ne;if(Ne<=xe){const re=L.length>0&&y===L[L.length-1].ref.current;l.style.bottom="0px";const H=u.clientHeight-g.offsetTop-g.offsetHeight,de=Math.max(Ie,be+(re?ye:0)+H+I),Oe=Ne+de;l.style.height=Oe+"px"}else{const re=L.length>0&&y===L[0].ref.current;l.style.top="0px";const de=Math.max(xe,U+g.offsetTop+(re?Q:0)+be)+Re;l.style.height=de+"px",g.scrollTop=Ne-xe+g.offsetTop}l.style.margin=`${Xr}px 0`,l.style.minHeight=q+"px",l.style.maxHeight=O+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[m,o.trigger,o.valueNode,l,u,g,y,w,o.dir,n]);Pt(()=>_(),[_]);const[b,j]=f.useState();Pt(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const E=f.useCallback(k=>{k&&v.current===!0&&(_(),x==null||x(),v.current=!1)},[_,x]);return a.jsx(b$,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:E,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:a.jsx(je.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});V1.displayName=w$;var _$="SelectPopperPosition",Ap=f.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Xr,...o}=t,i=bh(r);return a.jsx(Cv,{...i,...o,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ap.displayName=_$;var[b$,Pv]=qi(io,{}),Mp="SelectViewport",H1=f.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...s}=t,o=wa(Mp,r),i=Pv(Mp,r),l=Ae(e,o.onViewportChange),c=f.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),a.jsx(wh.Slot,{scope:r,children:a.jsx(je.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ie(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=i;if(m!=null&&m.current&&h){const p=Math.abs(c.current-d.scrollTop);if(p>0){const v=window.innerHeight-Xr*2,g=parseFloat(h.style.minHeight),y=parseFloat(h.style.height),w=Math.max(g,y);if(w<v){const x=w+p,_=Math.min(v,x),b=x-_;h.style.height=_+"px",h.style.bottom==="0px"&&(d.scrollTop=b>0?b:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});H1.displayName=Mp;var q1="SelectGroup",[j$,S$]=qi(q1),N$=f.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=un();return a.jsx(j$,{scope:r,id:s,children:a.jsx(je.div,{role:"group","aria-labelledby":s,...n,ref:e})})});N$.displayName=q1;var K1="SelectLabel",G1=f.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=S$(K1,r);return a.jsx(je.div,{id:s.id,...n,ref:e})});G1.displayName=K1;var Od="SelectItem",[k$,Y1]=qi(Od),Q1=f.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:o,...i}=t,l=ya(Od,r),c=wa(Od,r),u=l.value===n,[d,h]=f.useState(o??""),[m,p]=f.useState(!1),v=Ae(e,x=>{var _;return(_=c.itemRefCallback)==null?void 0:_.call(c,x,n,s)}),g=un(),y=f.useRef("touch"),w=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(k$,{scope:r,value:n,disabled:s,textId:g,isSelected:u,onItemTextChange:f.useCallback(x=>{h(_=>_||((x==null?void 0:x.textContent)??"").trim())},[]),children:a.jsx(wh.ItemSlot,{scope:r,value:n,disabled:s,textValue:d,children:a.jsx(je.div,{role:"option","aria-labelledby":g,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:v,onFocus:ie(i.onFocus,()=>p(!0)),onBlur:ie(i.onBlur,()=>p(!1)),onClick:ie(i.onClick,()=>{y.current!=="mouse"&&w()}),onPointerUp:ie(i.onPointerUp,()=>{y.current==="mouse"&&w()}),onPointerDown:ie(i.onPointerDown,x=>{y.current=x.pointerType}),onPointerMove:ie(i.onPointerMove,x=>{var _;y.current=x.pointerType,s?(_=c.onItemLeave)==null||_.call(c):y.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ie(i.onPointerLeave,x=>{var _;x.currentTarget===document.activeElement&&((_=c.onItemLeave)==null||_.call(c))}),onKeyDown:ie(i.onKeyDown,x=>{var b;((b=c.searchRef)==null?void 0:b.current)!==""&&x.key===" "||(d$.includes(x.key)&&w(),x.key===" "&&x.preventDefault())})})})})});Q1.displayName=Od;var hl="SelectItemText",J1=f.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,...o}=t,i=ya(hl,r),l=wa(hl,r),c=Y1(hl,r),u=p$(hl,r),[d,h]=f.useState(null),m=Ae(e,w=>h(w),c.onItemTextChange,w=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,w,c.value,c.disabled)}),p=d==null?void 0:d.textContent,v=f.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:y}=u;return Pt(()=>(g(v),()=>y(v)),[g,y,v]),a.jsxs(a.Fragment,{children:[a.jsx(je.span,{id:c.textId,...o,ref:m}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Li.createPortal(o.children,i.valueNode):null]})});J1.displayName=hl;var X1="SelectItemIndicator",Z1=f.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return Y1(X1,r).isSelected?a.jsx(je.span,{"aria-hidden":!0,...n,ref:e}):null});Z1.displayName=X1;var Ip="SelectScrollUpButton",eN=f.forwardRef((t,e)=>{const r=wa(Ip,t.__scopeSelect),n=Pv(Ip,t.__scopeSelect),[s,o]=f.useState(!1),i=Ae(e,n.onScrollButtonChange);return Pt(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;o(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?a.jsx(rN,{...t,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});eN.displayName=Ip;var Lp="SelectScrollDownButton",tN=f.forwardRef((t,e)=>{const r=wa(Lp,t.__scopeSelect),n=Pv(Lp,t.__scopeSelect),[s,o]=f.useState(!1),i=Ae(e,n.onScrollButtonChange);return Pt(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;o(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?a.jsx(rN,{...t,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});tN.displayName=Lp;var rN=f.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=t,o=wa("SelectScrollButton",r),i=f.useRef(null),l=_h(r),c=f.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return f.useEffect(()=>()=>c(),[c]),Pt(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),a.jsx(je.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:ie(s.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(n,50))}),onPointerMove:ie(s.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),i.current===null&&(i.current=window.setInterval(n,50))}),onPointerLeave:ie(s.onPointerLeave,()=>{c()})})}),C$="SelectSeparator",nN=f.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return a.jsx(je.div,{"aria-hidden":!0,...n,ref:e})});nN.displayName=C$;var Fp="SelectArrow",E$=f.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=bh(r),o=ya(Fp,r),i=wa(Fp,r);return o.open&&i.position==="popper"?a.jsx(Ev,{...s,...n,ref:e}):null});E$.displayName=Fp;var P$="SelectBubbleInput",sN=f.forwardRef(({__scopeSelect:t,value:e,...r},n)=>{const s=f.useRef(null),o=Ae(n,s),i=N1(e);return f.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==e&&d){const h=new Event("change",{bubbles:!0});d.call(l,e),l.dispatchEvent(h)}},[i,e]),a.jsx(je.select,{...r,style:{...k1,...r.style},ref:o,defaultValue:e})});sN.displayName=P$;function aN(t){return t===""||t===void 0}function oN(t){const e=Ft(t),r=f.useRef(""),n=f.useRef(0),s=f.useCallback(i=>{const l=r.current+i;e(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),o=f.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,o]}function iN(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,o=r?t.indexOf(r):-1;let i=T$(t,Math.max(o,0));s.length===1&&(i=i.filter(u=>u!==r));const c=i.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function T$(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var R$=A1,lN=I1,O$=F1,D$=$1,A$=U1,cN=B1,M$=H1,uN=G1,dN=Q1,I$=J1,L$=Z1,hN=eN,fN=tN,mN=nN;const qe=R$,Ke=O$,We=f.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(lN,{ref:n,className:X("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,a.jsx(D$,{asChild:!0,children:a.jsx(QS,{className:"h-4 w-4 opacity-50"})})]}));We.displayName=lN.displayName;const pN=f.forwardRef(({className:t,...e},r)=>a.jsx(hN,{ref:r,className:X("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(oL,{className:"h-4 w-4"})}));pN.displayName=hN.displayName;const gN=f.forwardRef(({className:t,...e},r)=>a.jsx(fN,{ref:r,className:X("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(QS,{className:"h-4 w-4"})}));gN.displayName=fN.displayName;const Ve=f.forwardRef(({className:t,children:e,position:r="popper",...n},s)=>a.jsx(A$,{children:a.jsxs(cN,{ref:s,className:X("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[a.jsx(pN,{}),a.jsx(M$,{className:X("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(gN,{})]})}));Ve.displayName=cN.displayName;const F$=f.forwardRef(({className:t,...e},r)=>a.jsx(uN,{ref:r,className:X("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));F$.displayName=uN.displayName;const ae=f.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(dN,{ref:n,className:X("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(L$,{children:a.jsx(lv,{className:"h-4 w-4"})})}),a.jsx(I$,{children:e})]}));ae.displayName=dN.displayName;const $$=f.forwardRef(({className:t,...e},r)=>a.jsx(mN,{ref:r,className:X("-mx-1 my-1 h-px bg-muted",t),...e}));$$.displayName=mN.displayName;const vN=()=>{const{currentLanguage:t,changeLanguage:e,languages:r}=xa(),n=r.find(s=>s.code===t);return a.jsxs(qe,{value:t,onValueChange:e,children:[a.jsx(We,{className:"w-[140px]",children:a.jsx(Ke,{children:a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{children:n==null?void 0:n.name})})})}),a.jsx(Ve,{children:r.map(s=>a.jsx(ae,{value:s.code,children:a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{children:s.name})})},s.code))})]})};function U$(t,e){return f.useReducer((r,n)=>e[r][n]??r,t)}var cr=t=>{const{present:e,children:r}=t,n=B$(e),s=typeof r=="function"?r({present:n.isPresent}):f.Children.only(r),o=Ae(n.ref,z$(s));return typeof r=="function"||n.isPresent?f.cloneElement(s,{ref:o}):null};cr.displayName="Presence";function B$(t){const[e,r]=f.useState(),n=f.useRef(null),s=f.useRef(t),o=f.useRef("none"),i=t?"mounted":"unmounted",[l,c]=U$(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const u=Su(n.current);o.current=l==="mounted"?u:"none"},[l]),Pt(()=>{const u=n.current,d=s.current;if(d!==t){const m=o.current,p=Su(u);t?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),Pt(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=p=>{const g=Su(n.current).includes(p.animationName);if(p.target===e&&g&&(c("ANIMATION_END"),!s.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},m=p=>{p.target===e&&(o.current=Su(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function Su(t){return(t==null?void 0:t.animationName)||"none"}function z$(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var Bf="rovingFocusGroup.onEntryFocus",W$={bubbles:!1,cancelable:!0},kc="RovingFocusGroup",[$p,xN,V$]=gv(kc),[H$,jh]=br(kc,[V$]),[q$,K$]=H$(kc),yN=f.forwardRef((t,e)=>a.jsx($p.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx($p.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(G$,{...t,ref:e})})}));yN.displayName=kc;var G$=f.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,m=f.useRef(null),p=Ae(e,m),v=wc(o),[g,y]=ua({prop:i,defaultProp:l??null,onChange:c,caller:kc}),[w,x]=f.useState(!1),_=Ft(u),b=xN(r),j=f.useRef(!1),[E,k]=f.useState(0);return f.useEffect(()=>{const P=m.current;if(P)return P.addEventListener(Bf,_),()=>P.removeEventListener(Bf,_)},[_]),a.jsx(q$,{scope:r,orientation:n,dir:v,loop:s,currentTabStopId:g,onItemFocus:f.useCallback(P=>y(P),[y]),onItemShiftTab:f.useCallback(()=>x(!0),[]),onFocusableItemAdd:f.useCallback(()=>k(P=>P+1),[]),onFocusableItemRemove:f.useCallback(()=>k(P=>P-1),[]),children:a.jsx(je.div,{tabIndex:w||E===0?-1:0,"data-orientation":n,...h,ref:p,style:{outline:"none",...t.style},onMouseDown:ie(t.onMouseDown,()=>{j.current=!0}),onFocus:ie(t.onFocus,P=>{const T=!j.current;if(P.target===P.currentTarget&&T&&!w){const C=new CustomEvent(Bf,W$);if(P.currentTarget.dispatchEvent(C),!C.defaultPrevented){const L=b().filter(R=>R.focusable),O=L.find(R=>R.active),J=L.find(R=>R.id===g),U=[O,J,...L].filter(Boolean).map(R=>R.ref.current);bN(U,d)}}j.current=!1}),onBlur:ie(t.onBlur,()=>x(!1))})})}),wN="RovingFocusGroupItem",_N=f.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:o,children:i,...l}=t,c=un(),u=o||c,d=K$(wN,r),h=d.currentTabStopId===u,m=xN(r),{onFocusableItemAdd:p,onFocusableItemRemove:v,currentTabStopId:g}=d;return f.useEffect(()=>{if(n)return p(),()=>v()},[n,p,v]),a.jsx($p.ItemSlot,{scope:r,id:u,focusable:n,active:s,children:a.jsx(je.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:e,onMouseDown:ie(t.onMouseDown,y=>{n?d.onItemFocus(u):y.preventDefault()}),onFocus:ie(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:ie(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const w=J$(y,d.orientation,d.dir);if(w!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let _=m().filter(b=>b.focusable).map(b=>b.ref.current);if(w==="last")_.reverse();else if(w==="prev"||w==="next"){w==="prev"&&_.reverse();const b=_.indexOf(y.currentTarget);_=d.loop?X$(_,b+1):_.slice(b+1)}setTimeout(()=>bN(_))}}),children:typeof i=="function"?i({isCurrentTabStop:h,hasTabStop:g!=null}):i})})});_N.displayName=wN;var Y$={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Q$(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function J$(t,e,r){const n=Q$(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Y$[n]}function bN(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function X$(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var jN=yN,SN=_N,Up=["Enter"," "],Z$=["ArrowDown","PageUp","Home"],NN=["ArrowUp","PageDown","End"],e3=[...Z$,...NN],t3={ltr:[...Up,"ArrowRight"],rtl:[...Up,"ArrowLeft"]},r3={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Cc="Menu",[sc,n3,s3]=gv(Cc),[po,kN]=br(Cc,[s3,Hi,jh]),Sh=Hi(),CN=jh(),[a3,go]=po(Cc),[o3,Ec]=po(Cc),EN=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:s,onOpenChange:o,modal:i=!0}=t,l=Sh(e),[c,u]=f.useState(null),d=f.useRef(!1),h=Ft(o),m=wc(s);return f.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),a.jsx(kv,{...l,children:a.jsx(a3,{scope:e,open:r,onOpenChange:h,content:c,onContentChange:u,children:a.jsx(o3,{scope:e,onClose:f.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:i,children:n})})})};EN.displayName=Cc;var i3="MenuAnchor",Tv=f.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=Sh(r);return a.jsx(vh,{...s,...n,ref:e})});Tv.displayName=i3;var Rv="MenuPortal",[l3,PN]=po(Rv,{forceMount:void 0}),TN=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:s}=t,o=go(Rv,e);return a.jsx(l3,{scope:e,forceMount:r,children:a.jsx(cr,{present:r||o.open,children:a.jsx(Sc,{asChild:!0,container:s,children:n})})})};TN.displayName=Rv;var Wr="MenuContent",[c3,Ov]=po(Wr),RN=f.forwardRef((t,e)=>{const r=PN(Wr,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,o=go(Wr,t.__scopeMenu),i=Ec(Wr,t.__scopeMenu);return a.jsx(sc.Provider,{scope:t.__scopeMenu,children:a.jsx(cr,{present:n||o.open,children:a.jsx(sc.Slot,{scope:t.__scopeMenu,children:i.modal?a.jsx(u3,{...s,ref:e}):a.jsx(d3,{...s,ref:e})})})})}),u3=f.forwardRef((t,e)=>{const r=go(Wr,t.__scopeMenu),n=f.useRef(null),s=Ae(e,n);return f.useEffect(()=>{const o=n.current;if(o)return xh(o)},[]),a.jsx(Dv,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:ie(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),d3=f.forwardRef((t,e)=>{const r=go(Wr,t.__scopeMenu);return a.jsx(Dv,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),h3=oa("MenuContent.ScrollLock"),Dv=f.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:p,disableOutsideScroll:v,...g}=t,y=go(Wr,r),w=Ec(Wr,r),x=Sh(r),_=CN(r),b=n3(r),[j,E]=f.useState(null),k=f.useRef(null),P=Ae(e,k,y.onContentChange),T=f.useRef(0),C=f.useRef(""),L=f.useRef(0),O=f.useRef(null),J=f.useRef("right"),W=f.useRef(0),U=v?Nc:f.Fragment,R=v?{as:h3,allowPinchZoom:!0}:void 0,I=F=>{var le,Ne;const q=C.current+F,A=b().filter(Re=>!Re.disabled),Q=document.activeElement,ye=(le=A.find(Re=>Re.ref.current===Q))==null?void 0:le.textValue,xe=A.map(Re=>Re.textValue),Ie=S3(xe,q,ye),be=(Ne=A.find(Re=>Re.textValue===Ie))==null?void 0:Ne.ref.current;(function Re(z){C.current=z,window.clearTimeout(T.current),z!==""&&(T.current=window.setTimeout(()=>Re(""),1e3))})(q),be&&setTimeout(()=>be.focus())};f.useEffect(()=>()=>window.clearTimeout(T.current),[]),fh();const N=f.useCallback(F=>{var A,Q;return J.current===((A=O.current)==null?void 0:A.side)&&k3(F,(Q=O.current)==null?void 0:Q.area)},[]);return a.jsx(c3,{scope:r,searchRef:C,onItemEnter:f.useCallback(F=>{N(F)&&F.preventDefault()},[N]),onItemLeave:f.useCallback(F=>{var q;N(F)||((q=k.current)==null||q.focus(),E(null))},[N]),onTriggerLeave:f.useCallback(F=>{N(F)&&F.preventDefault()},[N]),pointerGraceTimerRef:L,onPointerGraceIntentChange:f.useCallback(F=>{O.current=F},[]),children:a.jsx(U,{...R,children:a.jsx(bc,{asChild:!0,trapped:s,onMountAutoFocus:ie(o,F=>{var q;F.preventDefault(),(q=k.current)==null||q.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:a.jsx(_c,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:p,children:a.jsx(jN,{asChild:!0,..._,dir:w.dir,orientation:"vertical",loop:n,currentTabStopId:j,onCurrentTabStopIdChange:E,onEntryFocus:ie(c,F=>{w.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(Cv,{role:"menu","aria-orientation":"vertical","data-state":KN(y.open),"data-radix-menu-content":"",dir:w.dir,...x,...g,ref:P,style:{outline:"none",...g.style},onKeyDown:ie(g.onKeyDown,F=>{const A=F.target.closest("[data-radix-menu-content]")===F.currentTarget,Q=F.ctrlKey||F.altKey||F.metaKey,ye=F.key.length===1;A&&(F.key==="Tab"&&F.preventDefault(),!Q&&ye&&I(F.key));const xe=k.current;if(F.target!==xe||!e3.includes(F.key))return;F.preventDefault();const be=b().filter(le=>!le.disabled).map(le=>le.ref.current);NN.includes(F.key)&&be.reverse(),b3(be)}),onBlur:ie(t.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout(T.current),C.current="")}),onPointerMove:ie(t.onPointerMove,ac(F=>{const q=F.target,A=W.current!==F.clientX;if(F.currentTarget.contains(q)&&A){const Q=F.clientX>W.current?"right":"left";J.current=Q,W.current=F.clientX}}))})})})})})})});RN.displayName=Wr;var f3="MenuGroup",Av=f.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return a.jsx(je.div,{role:"group",...n,ref:e})});Av.displayName=f3;var m3="MenuLabel",ON=f.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return a.jsx(je.div,{...n,ref:e})});ON.displayName=m3;var Dd="MenuItem",f0="menu.itemSelect",Nh=f.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...s}=t,o=f.useRef(null),i=Ec(Dd,t.__scopeMenu),l=Ov(Dd,t.__scopeMenu),c=Ae(e,o),u=f.useRef(!1),d=()=>{const h=o.current;if(!r&&h){const m=new CustomEvent(f0,{bubbles:!0,cancelable:!0});h.addEventListener(f0,p=>n==null?void 0:n(p),{once:!0}),qS(h,m),m.defaultPrevented?u.current=!1:i.onClose()}};return a.jsx(DN,{...s,ref:c,disabled:r,onClick:ie(t.onClick,d),onPointerDown:h=>{var m;(m=t.onPointerDown)==null||m.call(t,h),u.current=!0},onPointerUp:ie(t.onPointerUp,h=>{var m;u.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:ie(t.onKeyDown,h=>{const m=l.searchRef.current!=="";r||m&&h.key===" "||Up.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Nh.displayName=Dd;var DN=f.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...o}=t,i=Ov(Dd,r),l=CN(r),c=f.useRef(null),u=Ae(e,c),[d,h]=f.useState(!1),[m,p]=f.useState("");return f.useEffect(()=>{const v=c.current;v&&p((v.textContent??"").trim())},[o.children]),a.jsx(sc.ItemSlot,{scope:r,disabled:n,textValue:s??m,children:a.jsx(SN,{asChild:!0,...l,focusable:!n,children:a.jsx(je.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...o,ref:u,onPointerMove:ie(t.onPointerMove,ac(v=>{n?i.onItemLeave(v):(i.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ie(t.onPointerLeave,ac(v=>i.onItemLeave(v))),onFocus:ie(t.onFocus,()=>h(!0)),onBlur:ie(t.onBlur,()=>h(!1))})})})}),p3="MenuCheckboxItem",AN=f.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...s}=t;return a.jsx($N,{scope:t.__scopeMenu,checked:r,children:a.jsx(Nh,{role:"menuitemcheckbox","aria-checked":Ad(r)?"mixed":r,...s,ref:e,"data-state":Iv(r),onSelect:ie(s.onSelect,()=>n==null?void 0:n(Ad(r)?!0:!r),{checkForDefaultPrevented:!1})})})});AN.displayName=p3;var MN="MenuRadioGroup",[g3,v3]=po(MN,{value:void 0,onValueChange:()=>{}}),IN=f.forwardRef((t,e)=>{const{value:r,onValueChange:n,...s}=t,o=Ft(n);return a.jsx(g3,{scope:t.__scopeMenu,value:r,onValueChange:o,children:a.jsx(Av,{...s,ref:e})})});IN.displayName=MN;var LN="MenuRadioItem",FN=f.forwardRef((t,e)=>{const{value:r,...n}=t,s=v3(LN,t.__scopeMenu),o=r===s.value;return a.jsx($N,{scope:t.__scopeMenu,checked:o,children:a.jsx(Nh,{role:"menuitemradio","aria-checked":o,...n,ref:e,"data-state":Iv(o),onSelect:ie(n.onSelect,()=>{var i;return(i=s.onValueChange)==null?void 0:i.call(s,r)},{checkForDefaultPrevented:!1})})})});FN.displayName=LN;var Mv="MenuItemIndicator",[$N,x3]=po(Mv,{checked:!1}),UN=f.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...s}=t,o=x3(Mv,r);return a.jsx(cr,{present:n||Ad(o.checked)||o.checked===!0,children:a.jsx(je.span,{...s,ref:e,"data-state":Iv(o.checked)})})});UN.displayName=Mv;var y3="MenuSeparator",BN=f.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return a.jsx(je.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});BN.displayName=y3;var w3="MenuArrow",zN=f.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=Sh(r);return a.jsx(Ev,{...s,...n,ref:e})});zN.displayName=w3;var _3="MenuSub",[Vz,WN]=po(_3),fl="MenuSubTrigger",VN=f.forwardRef((t,e)=>{const r=go(fl,t.__scopeMenu),n=Ec(fl,t.__scopeMenu),s=WN(fl,t.__scopeMenu),o=Ov(fl,t.__scopeMenu),i=f.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=o,u={__scopeMenu:t.__scopeMenu},d=f.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return f.useEffect(()=>d,[d]),f.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),a.jsx(Tv,{asChild:!0,...u,children:a.jsx(DN,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":KN(r.open),...t,ref:ch(e,s.onTriggerChange),onClick:h=>{var m;(m=t.onClick)==null||m.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:ie(t.onPointerMove,ac(h=>{o.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!r.open&&!i.current&&(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:ie(t.onPointerLeave,ac(h=>{var p,v;d();const m=(p=r.content)==null?void 0:p.getBoundingClientRect();if(m){const g=(v=r.content)==null?void 0:v.dataset.side,y=g==="right",w=y?-5:5,x=m[y?"left":"right"],_=m[y?"right":"left"];o.onPointerGraceIntentChange({area:[{x:h.clientX+w,y:h.clientY},{x,y:m.top},{x:_,y:m.top},{x:_,y:m.bottom},{x,y:m.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(h),h.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:ie(t.onKeyDown,h=>{var p;const m=o.searchRef.current!=="";t.disabled||m&&h.key===" "||t3[n.dir].includes(h.key)&&(r.onOpenChange(!0),(p=r.content)==null||p.focus(),h.preventDefault())})})})});VN.displayName=fl;var HN="MenuSubContent",qN=f.forwardRef((t,e)=>{const r=PN(Wr,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,o=go(Wr,t.__scopeMenu),i=Ec(Wr,t.__scopeMenu),l=WN(HN,t.__scopeMenu),c=f.useRef(null),u=Ae(e,c);return a.jsx(sc.Provider,{scope:t.__scopeMenu,children:a.jsx(cr,{present:n||o.open,children:a.jsx(sc.Slot,{scope:t.__scopeMenu,children:a.jsx(Dv,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;i.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:ie(t.onFocusOutside,d=>{d.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:ie(t.onEscapeKeyDown,d=>{i.onClose(),d.preventDefault()}),onKeyDown:ie(t.onKeyDown,d=>{var p;const h=d.currentTarget.contains(d.target),m=r3[i.dir].includes(d.key);h&&m&&(o.onOpenChange(!1),(p=l.trigger)==null||p.focus(),d.preventDefault())})})})})})});qN.displayName=HN;function KN(t){return t?"open":"closed"}function Ad(t){return t==="indeterminate"}function Iv(t){return Ad(t)?"indeterminate":t?"checked":"unchecked"}function b3(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function j3(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function S3(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,o=r?t.indexOf(r):-1;let i=j3(t,Math.max(o,0));s.length===1&&(i=i.filter(u=>u!==r));const c=i.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function N3(t,e){const{x:r,y:n}=t;let s=!1;for(let o=0,i=e.length-1;o<e.length;i=o++){const l=e[o],c=e[i],u=l.x,d=l.y,h=c.x,m=c.y;d>n!=m>n&&r<(h-u)*(n-d)/(m-d)+u&&(s=!s)}return s}function k3(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return N3(r,e)}function ac(t){return e=>e.pointerType==="mouse"?t(e):void 0}var C3=EN,E3=Tv,P3=TN,T3=RN,R3=Av,O3=ON,D3=Nh,A3=AN,M3=IN,I3=FN,L3=UN,F3=BN,$3=zN,U3=VN,B3=qN,kh="DropdownMenu",[z3,Hz]=br(kh,[kN]),ur=kN(),[W3,GN]=z3(kh),YN=t=>{const{__scopeDropdownMenu:e,children:r,dir:n,open:s,defaultOpen:o,onOpenChange:i,modal:l=!0}=t,c=ur(e),u=f.useRef(null),[d,h]=ua({prop:s,defaultProp:o??!1,onChange:i,caller:kh});return a.jsx(W3,{scope:e,triggerId:un(),triggerRef:u,contentId:un(),open:d,onOpenChange:h,onOpenToggle:f.useCallback(()=>h(m=>!m),[h]),modal:l,children:a.jsx(C3,{...c,open:d,onOpenChange:h,dir:n,modal:l,children:r})})};YN.displayName=kh;var QN="DropdownMenuTrigger",JN=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=t,o=GN(QN,r),i=ur(r);return a.jsx(E3,{asChild:!0,...i,children:a.jsx(je.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:ch(e,o.triggerRef),onPointerDown:ie(t.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:ie(t.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});JN.displayName=QN;var V3="DropdownMenuPortal",XN=t=>{const{__scopeDropdownMenu:e,...r}=t,n=ur(e);return a.jsx(P3,{...n,...r})};XN.displayName=V3;var ZN="DropdownMenuContent",ek=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=GN(ZN,r),o=ur(r),i=f.useRef(!1);return a.jsx(T3,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...n,ref:e,onCloseAutoFocus:ie(t.onCloseAutoFocus,l=>{var c;i.current||(c=s.triggerRef.current)==null||c.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:ie(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(i.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ek.displayName=ZN;var H3="DropdownMenuGroup",q3=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=ur(r);return a.jsx(R3,{...s,...n,ref:e})});q3.displayName=H3;var K3="DropdownMenuLabel",tk=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=ur(r);return a.jsx(O3,{...s,...n,ref:e})});tk.displayName=K3;var G3="DropdownMenuItem",rk=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=ur(r);return a.jsx(D3,{...s,...n,ref:e})});rk.displayName=G3;var Y3="DropdownMenuCheckboxItem",nk=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=ur(r);return a.jsx(A3,{...s,...n,ref:e})});nk.displayName=Y3;var Q3="DropdownMenuRadioGroup",J3=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=ur(r);return a.jsx(M3,{...s,...n,ref:e})});J3.displayName=Q3;var X3="DropdownMenuRadioItem",sk=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=ur(r);return a.jsx(I3,{...s,...n,ref:e})});sk.displayName=X3;var Z3="DropdownMenuItemIndicator",ak=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=ur(r);return a.jsx(L3,{...s,...n,ref:e})});ak.displayName=Z3;var eU="DropdownMenuSeparator",ok=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=ur(r);return a.jsx(F3,{...s,...n,ref:e})});ok.displayName=eU;var tU="DropdownMenuArrow",rU=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=ur(r);return a.jsx($3,{...s,...n,ref:e})});rU.displayName=tU;var nU="DropdownMenuSubTrigger",ik=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=ur(r);return a.jsx(U3,{...s,...n,ref:e})});ik.displayName=nU;var sU="DropdownMenuSubContent",lk=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=ur(r);return a.jsx(B3,{...s,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});lk.displayName=sU;var aU=YN,oU=JN,iU=XN,ck=ek,uk=tk,dk=rk,hk=nk,fk=sk,mk=ak,pk=ok,gk=ik,vk=lk;const xk=aU,yk=oU,lU=f.forwardRef(({className:t,inset:e,children:r,...n},s)=>a.jsxs(gk,{ref:s,className:X("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",e&&"pl-8",t),...n,children:[r,a.jsx(cv,{className:"ml-auto h-4 w-4"})]}));lU.displayName=gk.displayName;const cU=f.forwardRef(({className:t,...e},r)=>a.jsx(vk,{ref:r,className:X("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));cU.displayName=vk.displayName;const Lv=f.forwardRef(({className:t,sideOffset:e=4,...r},n)=>a.jsx(iU,{children:a.jsx(ck,{ref:n,sideOffset:e,className:X("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));Lv.displayName=ck.displayName;const Jn=f.forwardRef(({className:t,inset:e,...r},n)=>a.jsx(dk,{ref:n,className:X("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e&&"pl-8",t),...r}));Jn.displayName=dk.displayName;const uU=f.forwardRef(({className:t,children:e,checked:r,...n},s)=>a.jsxs(hk,{ref:s,className:X("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),checked:r,...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(mk,{children:a.jsx(lv,{className:"h-4 w-4"})})}),e]}));uU.displayName=hk.displayName;const dU=f.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(fk,{ref:n,className:X("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(mk,{children:a.jsx(cL,{className:"h-2 w-2 fill-current"})})}),e]}));dU.displayName=fk.displayName;const hU=f.forwardRef(({className:t,inset:e,...r},n)=>a.jsx(uk,{ref:n,className:X("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));hU.displayName=uk.displayName;const fU=f.forwardRef(({className:t,...e},r)=>a.jsx(pk,{ref:r,className:X("-mx-1 my-1 h-px bg-muted",t),...e}));fU.displayName=pk.displayName;var Ch="Dialog",[wk,_k]=br(Ch),[mU,xn]=wk(Ch),bk=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:i=!0}=t,l=f.useRef(null),c=f.useRef(null),[u,d]=ua({prop:n,defaultProp:s??!1,onChange:o,caller:Ch});return a.jsx(mU,{scope:e,triggerRef:l,contentRef:c,contentId:un(),titleId:un(),descriptionId:un(),open:u,onOpenChange:d,onOpenToggle:f.useCallback(()=>d(h=>!h),[d]),modal:i,children:r})};bk.displayName=Ch;var jk="DialogTrigger",Sk=f.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=xn(jk,r),o=Ae(e,s.triggerRef);return a.jsx(je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Uv(s.open),...n,ref:o,onClick:ie(t.onClick,s.onOpenToggle)})});Sk.displayName=jk;var Fv="DialogPortal",[pU,Nk]=wk(Fv,{forceMount:void 0}),kk=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:s}=t,o=xn(Fv,e);return a.jsx(pU,{scope:e,forceMount:r,children:f.Children.map(n,i=>a.jsx(cr,{present:r||o.open,children:a.jsx(Sc,{asChild:!0,container:s,children:i})}))})};kk.displayName=Fv;var Md="DialogOverlay",Ck=f.forwardRef((t,e)=>{const r=Nk(Md,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,o=xn(Md,t.__scopeDialog);return o.modal?a.jsx(cr,{present:n||o.open,children:a.jsx(vU,{...s,ref:e})}):null});Ck.displayName=Md;var gU=oa("DialogOverlay.RemoveScroll"),vU=f.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=xn(Md,r);return a.jsx(Nc,{as:gU,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(je.div,{"data-state":Uv(s.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),lo="DialogContent",Ek=f.forwardRef((t,e)=>{const r=Nk(lo,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,o=xn(lo,t.__scopeDialog);return a.jsx(cr,{present:n||o.open,children:o.modal?a.jsx(xU,{...s,ref:e}):a.jsx(yU,{...s,ref:e})})});Ek.displayName=lo;var xU=f.forwardRef((t,e)=>{const r=xn(lo,t.__scopeDialog),n=f.useRef(null),s=Ae(e,r.contentRef,n);return f.useEffect(()=>{const o=n.current;if(o)return xh(o)},[]),a.jsx(Pk,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ie(t.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=r.triggerRef.current)==null||i.focus()}),onPointerDownOutside:ie(t.onPointerDownOutside,o=>{const i=o.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&o.preventDefault()}),onFocusOutside:ie(t.onFocusOutside,o=>o.preventDefault())})}),yU=f.forwardRef((t,e)=>{const r=xn(lo,t.__scopeDialog),n=f.useRef(!1),s=f.useRef(!1);return a.jsx(Pk,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=t.onCloseAutoFocus)==null||i.call(t,o),o.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;((u=r.triggerRef.current)==null?void 0:u.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),Pk=f.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,...i}=t,l=xn(lo,r),c=f.useRef(null),u=Ae(e,c);return fh(),a.jsxs(a.Fragment,{children:[a.jsx(bc,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:a.jsx(_c,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Uv(l.open),...i,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(_U,{titleId:l.titleId}),a.jsx(jU,{contentRef:c,descriptionId:l.descriptionId})]})]})}),$v="DialogTitle",Tk=f.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=xn($v,r);return a.jsx(je.h2,{id:s.titleId,...n,ref:e})});Tk.displayName=$v;var Rk="DialogDescription",Ok=f.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=xn(Rk,r);return a.jsx(je.p,{id:s.descriptionId,...n,ref:e})});Ok.displayName=Rk;var Dk="DialogClose",Ak=f.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=xn(Dk,r);return a.jsx(je.button,{type:"button",...n,ref:e,onClick:ie(t.onClick,()=>s.onOpenChange(!1))})});Ak.displayName=Dk;function Uv(t){return t?"open":"closed"}var Mk="DialogTitleWarning",[wU,Ik]=IL(Mk,{contentName:lo,titleName:$v,docsSlug:"dialog"}),_U=({titleId:t})=>{const e=Ik(Mk),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return f.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},bU="DialogDescriptionWarning",jU=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Ik(bU).contentName}}.`;return f.useEffect(()=>{var o;const s=(o=t.current)==null?void 0:o.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},Bv=bk,zv=Sk,Wv=kk,Pc=Ck,Tc=Ek,Rc=Tk,Oc=Ok,Eh=Ak;const Dt=Bv,Ya=zv,SU=Wv,Lk=f.forwardRef(({className:t,...e},r)=>a.jsx(Pc,{ref:r,className:X("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));Lk.displayName=Pc.displayName;const kt=f.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(SU,{children:[a.jsx(Lk,{}),a.jsxs(Tc,{ref:n,className:X("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-xl",t),...r,children:[e,a.jsxs(Eh,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[a.jsx(hh,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));kt.displayName=Tc.displayName;const Ct=({className:t,...e})=>a.jsx("div",{className:X("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Ct.displayName="DialogHeader";const Yt=({className:t,...e})=>a.jsx("div",{className:X("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Yt.displayName="DialogFooter";const Et=f.forwardRef(({className:t,...e},r)=>a.jsx(Rc,{ref:r,className:X("text-lg font-semibold leading-none tracking-tight",t),...e}));Et.displayName=Rc.displayName;const Wt=f.forwardRef(({className:t,...e},r)=>a.jsx(Oc,{ref:r,className:X("text-sm text-muted-foreground",t),...e}));Wt.displayName=Oc.displayName;function NU({onToggleSidebar:t}){const{user:e,signOut:r}=bt(),{t:n}=lt(),s=vn(),{setTheme:o}=ZM(),[i,l]=f.useState(!1),[c,u]=f.useState(""),[d,h]=f.useState(""),[m,p]=f.useState(""),[v,g]=f.useState(!1),y=async()=>{try{await r(),s("/login")}catch(_){console.error("Logout failed:",_),s("/login")}},w=()=>{l(!0)},x=async _=>{if(_.preventDefault(),!v){if(!c.trim()){p(n("settings.newPasswordRequired"));return}if(c.length<6){p(n("settings.passwordTooShort"));return}if(c!==d){p(n("settings.passwordsDoNotMatch"));return}p(""),g(!0);try{const{error:b}=await Z.auth.updateUser({password:c});if(b)throw b;l(!1),u(""),h(""),alert(n("settings.passwordChangedSuccessfully"))}catch(b){console.error("Password change failed:",b),p(b.message||n("settings.passwordChangeFailed"))}finally{g(!1)}}};return a.jsxs("header",{className:"border-b bg-background sticky top-0 z-50",children:[a.jsxs("div",{className:"h-14 flex items-center px-4 md:px-6",children:[a.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[a.jsx("button",{onClick:t,className:"text-foreground hover:text-muted-foreground transition-colors","aria-label":"Toggle sidebar",children:a.jsx(gL,{className:"h-5 w-5"})}),a.jsx("div",{className:"hidden md:block",children:a.jsx(ML,{})})]}),a.jsx("div",{className:"flex-1 flex justify-center hidden md:flex",children:a.jsx(pv,{})}),a.jsxs("div",{className:"flex items-center gap-3 flex-1 justify-end",children:[a.jsx("div",{className:"text-sm text-muted-foreground hidden md:block",children:K((e==null?void 0:e.profile)||{},"user_name")||(e==null?void 0:e.email)}),a.jsx(vN,{}),a.jsxs("button",{className:"text-foreground hover:text-muted-foreground relative transition-colors",title:n("common.notifications"),children:[a.jsx(tL,{className:"h-5 w-5"}),a.jsx("span",{className:"absolute -top-1 -right-1 h-3 w-3 rounded-full bg-primary flex items-center justify-center",children:a.jsx("span",{className:"h-2 w-2 rounded-full bg-primary-foreground"})}),a.jsx("span",{className:"sr-only",children:n("common.notifications")})]}),a.jsxs(xk,{children:[a.jsx(yk,{asChild:!0,children:a.jsxs("button",{className:"text-foreground hover:text-muted-foreground transition-colors",title:n("navigation.settings"),children:[a.jsx(Cp,{className:"h-5 w-5"}),a.jsx("span",{className:"sr-only",children:n("navigation.settings")})]})}),a.jsxs(Lv,{align:"end",children:[a.jsxs(Jn,{onClick:()=>o("light"),children:[a.jsx(bL,{className:"mr-2 h-4 w-4"}),a.jsx("span",{children:n("theme.light","Light")})]}),a.jsxs(Jn,{onClick:()=>o("dark"),children:[a.jsx(vL,{className:"mr-2 h-4 w-4"}),a.jsx("span",{children:n("theme.dark","Dark")})]}),a.jsxs(Jn,{onClick:()=>o("system"),children:[a.jsx(Cp,{className:"mr-2 h-4 w-4"}),a.jsx("span",{children:n("theme.system","System")})]}),a.jsxs(Jn,{onClick:w,children:[a.jsx(mL,{className:"h-4 w-4 mr-2"}),n("settings.changePassword")]}),a.jsxs(Jn,{onClick:y,className:"text-destructive focus:text-destructive",children:[a.jsx(PL,{className:"h-4 w-4 mr-2"}),n("buttons.logout")]})]})]})]})]}),a.jsx(Dt,{open:i,onOpenChange:l,children:a.jsxs(kt,{className:"sm:max-w-[425px]",children:[a.jsxs(Ct,{children:[a.jsx(Et,{children:n("settings.changePassword")}),a.jsx(Wt,{children:n("settings.changePasswordDescription")})]}),a.jsxs("form",{onSubmit:x,className:"space-y-4",children:[m&&a.jsx(Ei,{variant:"destructive",children:a.jsx(Pi,{children:m})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ce,{htmlFor:"newPassword",children:n("settings.newPassword")}),a.jsx(Se,{id:"newPassword",type:"password",value:c,onChange:_=>u(_.target.value),placeholder:n("settings.newPasswordPlaceholder"),required:!0,minLength:6})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ce,{htmlFor:"confirmPassword",children:n("settings.confirmPassword")}),a.jsx(Se,{id:"confirmPassword",type:"password",value:d,onChange:_=>h(_.target.value),placeholder:n("settings.confirmPasswordPlaceholder"),required:!0,minLength:6})]}),a.jsxs(Yt,{className:"flex flex-col-reverse sm:flex-row gap-2",children:[a.jsx(G,{type:"button",variant:"outline",onClick:()=>l(!1),className:"w-full sm:w-auto",children:n("buttons.cancel")}),a.jsx(G,{type:"submit",disabled:v||!c.trim()||!d.trim(),className:"w-full sm:w-auto",children:n(v?"settings.changingPassword":"settings.changePassword")})]})]})]})})]})}const Ph=Bv,Fk=zv,kU=Wv,$k=f.forwardRef(({className:t,...e},r)=>a.jsx(Pc,{className:X("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:r}));$k.displayName=Pc.displayName;const CU=xc("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Dc=f.forwardRef(({side:t="right",className:e,children:r,...n},s)=>a.jsxs(kU,{children:[a.jsx($k,{}),a.jsxs(Tc,{ref:s,className:X(CU({side:t}),e),...n,children:[r,a.jsxs(Eh,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[a.jsx(hh,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Dc.displayName=Tc.displayName;const Uk=({className:t,...e})=>a.jsx("div",{className:X("flex flex-col space-y-2 text-center sm:text-left",t),...e});Uk.displayName="SheetHeader";const Vv=f.forwardRef(({className:t,...e},r)=>a.jsx(Rc,{ref:r,className:X("text-lg font-semibold text-foreground",t),...e}));Vv.displayName=Rc.displayName;const Hv=f.forwardRef(({className:t,...e},r)=>a.jsx(Oc,{ref:r,className:X("text-sm text-muted-foreground",t),...e}));Hv.displayName=Oc.displayName;function Zt({children:t}){const[e,r]=f.useState(!0),[n,s]=f.useState(!1);f.useEffect(()=>{const l=()=>{s(window.innerWidth<1024),window.innerWidth<1024?r(!1):r(!0)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]);const o=()=>{r(!e)},i=()=>{n&&r(!1)};return a.jsxs("div",{className:"h-screen bg-background w-full flex flex-col",children:[a.jsx(NU,{onToggleSidebar:o}),a.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[!n&&a.jsx("aside",{className:X("bg-sidebar transition-all duration-300 ease-in-out hidden lg:block",e?"w-60":"w-0 overflow-hidden"),style:{height:"calc(100vh - 56px)"},children:a.jsx(Vw,{onNavigate:i})}),n&&a.jsx(Ph,{open:e,onOpenChange:r,children:a.jsxs(Dc,{side:cn()?"right":"left",className:"p-0 w-60 [&>button]:hidden",children:[a.jsx(Vv,{className:"sr-only",children:"Navigation Menu"}),a.jsx(Hv,{className:"sr-only",children:"Application navigation sidebar"}),a.jsx(Vw,{onNavigate:i})]})}),a.jsx("main",{className:"flex-1 overflow-hidden bg-background pt-2",children:a.jsx("div",{className:"p-3 sm:p-4 md:p-6 w-full h-full overflow-y-auto",children:t})})]})]})}const gr={async getAll(){try{console.log("[stageService] Fetching all stages...");const{data:t,error:e}=await Z.from("stages").select("*").order("stager_order_index",{ascending:!0});if(e)throw console.error("[stageService] Error fetching stages:",e),e;return console.log(`[stageService] Successfully fetched ${(t==null?void 0:t.length)||0} stages`),t||[]}catch(t){throw console.error("[stageService] Failed to fetch stages:",t),t}},async getGlobalStages(){try{console.log("[stageService] Fetching global stages...");const{data:t,error:e}=await Z.from("stages").select("*").is("project_id",null).order("stager_order_index",{ascending:!0});if(e)throw console.error("[stageService] Error fetching global stages:",e),e;return console.log(`[stageService] Successfully fetched ${(t==null?void 0:t.length)||0} global stages`),t||[]}catch(t){throw console.error("[stageService] Failed to fetch global stages:",t),t}},async getByType(t){try{console.log(`[stageService] Fetching stages for type: ${t}...`);const{data:e,error:r}=await Z.from("stages").select("*").eq("stage_type",t).is("project_id",null).order("stager_order_index",{ascending:!0});if(r)throw console.error(`[stageService] Error fetching ${t} stages:`,r),r;return console.log(`[stageService] Successfully fetched ${(e==null?void 0:e.length)||0} ${t} stages`),e||[]}catch(e){throw console.error(`[stageService] Failed to fetch ${t} stages:`,e),e}},async create(t){try{const{data:e}=await Z.from("stages").select("stager_order_index").order("stager_order_index",{ascending:!1}).limit(1),r=e&&e.length>0?e[0].stager_order_index:-1,n=t.stager_order_index??r+1,s={stage_name:t.stage_name,stage_name_ar:t.stage_name_ar||null,stage_type:t.stage_type,stager_order_index:n,project_id:t.project_id,color:t.color,color_var:t.color_var},{data:o,error:i}=await Z.from("stages").insert(s).select().single();if(i)throw i;return o}catch(e){throw console.error("[stageService] Failed to create stage:",e),e}},async update(t,e){try{const r=hn(e,{stage_name:"stage_name"}),{error:n}=await Z.from("stages").update(r).eq("stage_id",t);if(n)throw n}catch(r){throw console.error("[stageService] Failed to update stage:",r),r}},async delete(t){try{const{error:e}=await Z.from("stages").delete().eq("stage_id",t);if(e)throw e}catch(e){throw console.error("[stageService] Failed to delete stage:",e),e}}},Vr={async getAll(){try{console.log("[userService] Fetching all users...");const{data:t,error:e}=await Z.from("users").select("*");if(e)throw e;return console.log(`[userService] Successfully fetched ${(t==null?void 0:t.length)||0} users`),t||[]}catch(t){throw console.error("[userService] Failed to fetch users:",t),t}},async getById(t){try{const{data:e,error:r}=await Z.from("users").select("*").eq("user_id",t).single();return r?null:e}catch(e){return console.error("[userService] Failed to fetch user:",e),null}},async getByAuthId(t){try{const{data:e,error:r}=await Z.from("users").select("*").eq("auth_user_id",t).single();return r?null:e}catch(e){return console.error("[userService] Failed to fetch user by auth ID:",e),null}},async update(t,e){try{const r={};e.user_name!==void 0&&(r.user_name=e.user_name),e.user_name_ar!==void 0&&(r.user_name_ar=e.user_name_ar),e.user_email!==void 0&&(r.user_email=e.user_email),e.user_role!==void 0&&(r.user_role=e.user_role),e.avatar!==void 0&&(r.avatar=e.avatar),e.client_contact!==void 0&&(r.client_contact=e.client_contact),e.company_name!==void 0&&(r.company_name=e.company_name),e.company_name_ar!==void 0&&(r.company_name_ar=e.company_name_ar);const{error:n}=await Z.from("users").update(r).eq("user_id",t);if(n)throw n;console.log(`[userService] Successfully updated user ${t}`)}catch(r){throw console.error("[userService] Failed to update user:",r),r}}},qv={async getAll(){try{console.log("[clientService] Fetching all clients...");const{data:t,error:e}=await Z.from("users").select("*").eq("user_role","client");if(e)throw e;return console.log(`[clientService] Successfully fetched ${(t==null?void 0:t.length)||0} clients`),t||[]}catch(t){throw console.error("[clientService] Failed to fetch clients:",t),t}},async getById(t){try{const{data:e,error:r}=await Z.from("users").select("*").eq("user_id",t).eq("user_role","client").single();return r?null:e}catch(e){return console.error("[clientService] Failed to fetch client:",e),null}},async create(t){try{const e=hn({user_name:t.user_name,user_email:t.user_email,user_role:"client",avatar:t.avatar,client_contact:t.client_contact,company_name:t.company_name},{user_name:"user_name",company_name:"company_name"}),{data:r,error:n}=await Z.from("users").insert(e).select().single();if(n)throw n;return r}catch(e){throw console.error("[clientService] Failed to create client:",e),e}}},Nn={async getAll(){try{console.log("[projectService] Fetching all projects...");const{data:t,error:e}=await Z.from("projects").select("*").order("created_date",{ascending:!1});if(e)throw e;return console.log(`[projectService] Successfully fetched ${(t==null?void 0:t.length)||0} projects`),t||[]}catch(t){throw console.error("[projectService] Failed to fetch projects:",t),t}},async getById(t){try{const{data:e,error:r}=await Z.from("projects").select("*").eq("project_id",t).single();return r?null:e}catch(e){return console.error("[projectService] Failed to fetch project:",e),null}},async create(t){try{const{data:e,error:r}=await Z.from("projects").insert({project_name:t.project_name,project_description:t.project_description,created_by:t.created_by,progress:t.progress||0,stage:t.stage,end_date:t.end_date}).select().single();if(r)throw r;return e}catch(e){throw console.error("[projectService] Failed to create project:",e),e}},async update(t,e){try{const r={};e.project_name&&(r.project_name=e.project_name),e.project_description!==void 0&&(r.project_description=e.project_description),e.progress!==void 0&&(r.progress=e.progress),e.stage!==void 0&&(r.stage=e.stage),e.end_date!==void 0&&(r.end_date=e.end_date);const{error:n}=await Z.from("projects").update(r).eq("project_id",t);if(n)throw n}catch(r){throw console.error("[projectService] Failed to update project:",r),r}},async delete(t){try{const{error:e}=await Z.from("projects").delete().eq("project_id",t);if(e)throw e}catch(e){throw console.error("[projectService] Failed to delete project:",e),e}},async getByUserAuthId(t){try{console.log("[projectService] Fetching projects for user:",t);const{data:e,error:r}=await Z.from("project_users").select(`
          project_id,
          projects (
            project_id,
            project_name,
            project_description,
            created_date,
            created_by,
            progress,
            stage,
            end_date,
            updated_at
          )
        `).eq("auth_user_id",t);if(r)throw r;const n=(e==null?void 0:e.map(s=>s.projects).filter(Boolean))||[];return console.log(`[projectService] Successfully fetched ${n.length} projects for user`),n}catch(e){throw console.error("[projectService] Failed to fetch projects for user:",e),e}}},Vs={async getAll(){try{console.log("[taskService] Fetching all tasks...");const{data:t,error:e}=await Z.from("tasks").select("*").order("created_at",{ascending:!1});if(e)throw e;return console.log(`[taskService] Successfully fetched ${(t==null?void 0:t.length)||0} tasks`),t||[]}catch(t){throw console.error("[taskService] Failed to fetch tasks:",t),t}},async getByStage(t){try{const{data:e,error:r}=await Z.from("tasks").select("*").eq("stage_id",t);if(r)throw r;return e||[]}catch(e){throw console.error("[taskService] Failed to fetch tasks:",e),e}},async create(t){try{const e=hn({task_name:t.task_name,stage_id:t.stage_id,assigned_to:t.assigned_to,task_status:t.task_status,due_date:t.due_date,description:t.description,auth_user_id:t.auth_user_id},{task_name:"task_name",description:"description"}),{data:r,error:n}=await Z.from("tasks").insert(e).select().single();if(n)throw n;return r}catch(e){throw console.error("[taskService] Failed to create task:",e),e}},async update(t,e){try{const r=hn(e,{task_name:"task_name",description:"description"}),{error:n}=await Z.from("tasks").update(r).eq("task_id",t);if(n)throw n}catch(r){throw console.error("[taskService] Failed to update task:",r),r}},async delete(t){try{const{error:e}=await Z.from("tasks").delete().eq("task_id",t);if(e)throw e}catch(e){throw console.error("[taskService] Failed to delete task:",e),e}}},Bp={async getByTask(t){try{const{data:e,error:r}=await Z.from("comments").select("*").eq("task_id",t).order("created_date",{ascending:!0});if(r)throw r;return e||[]}catch(e){throw console.error("[commentService] Failed to fetch comments:",e),e}},async create(t){try{const{data:e,error:r}=await Z.from("comments").insert({task_id:t.task_id,auth_user_id:t.auth_user_id,message:t.message}).select().single();if(r)throw r;return e}catch(e){throw console.error("[commentService] Failed to create comment:",e),e}}},qo={async getUserRooms(t){const{data:e,error:r}=await Z.from("room_members").select("room_id").eq("auth_user_id",t);if(r)throw r;if(!e||e.length===0)return[];const n=e.map(i=>i.room_id),{data:s,error:o}=await Z.from("rooms").select("*").in("room_id",n);if(o)throw o;return s||[]},async createRoom(t){const{data:e,error:r}=await Z.from("rooms").insert({room_name:t.name,is_private:t.is_private??!0,project_id:t.project_id,created_by:t.created_by,auth_user_id:t.auth_user_id}).select().single();if(r)throw r;return e},async addMember(t,e){const{error:r}=await Z.from("room_members").insert({room_id:t,auth_user_id:e});if(r)throw r},async getRoomMembers(t){const{data:e,error:r}=await Z.from("room_members").select(`
        auth_user_id,
        users (*)
      `).eq("room_id",t);if(r)throw r;return!e||e.length===0?[]:e.map(n=>n.users).filter(Boolean)}},m0={async getProjectUsers(t){try{console.log("[projectUserService] Fetching users for project:",t);const{data:e,error:r}=await Z.from("project_users").select(`
          auth_user_id,
          users (
            user_id,
            user_name,
            user_email,
            user_role,
            avatar,
            auth_user_id,
            client_contact,
            company_name,
            created_at,
            updated_at
          )
        `).eq("project_id",t);if(r)throw r;const n=(e==null?void 0:e.map(s=>s.users).filter(Boolean))||[];return console.log(`[projectUserService] Found ${n.length} users for project ${t}`),n}catch(e){throw console.error("[projectUserService] Failed to fetch project users:",e),e}},async addUserToProject(t,e){try{console.log("[projectUserService] Adding user",e,"to project",t);const{error:r}=await Z.from("project_users").insert({project_id:t,user_id:e});if(r)throw r;console.log("[projectUserService] Successfully added user to project")}catch(r){throw console.error("[projectUserService] Failed to add user to project:",r),r}},async removeUserFromProject(t,e){try{console.log("[projectUserService] Removing user",e,"from project",t);const{error:r}=await Z.from("project_users").delete().eq("project_id",t).eq("user_id",e);if(r)throw r;console.log("[projectUserService] Successfully removed user from project")}catch(r){throw console.error("[projectUserService] Failed to remove user from project:",r),r}}},Po={async getAll(){try{console.log("[teamService] Fetching all teams...");const{data:t,error:e}=await Z.from("teams").select("*").order("created_at",{ascending:!1});if(e)throw e;return console.log(`[teamService] Successfully fetched ${(t==null?void 0:t.length)||0} teams`),t||[]}catch(t){throw console.error("[teamService] Failed to fetch teams:",t),t}},async getAllWithMembers(){try{console.log("[teamService] Fetching all teams with members...");const{data:t,error:e}=await Z.from("teams").select(`
          team_id,
          team_name,
          team_name_ar,
          partner_id,
          auth_user_id,
          team_leader_id,
          created_at
        `).order("created_at",{ascending:!1});if(e)throw e;if(!t||t.length===0)return[];const r=t.map(l=>l.team_id),{data:n,error:s}=await Z.from("team_members").select(`
          team_id,
          auth_user_id,
          joined_at
        `).in("team_id",r);if(s)throw s;const o=(n||[]).reduce((l,c)=>(l[c.team_id]||(l[c.team_id]=[]),l[c.team_id].push({auth_user_id:c.auth_user_id,joined_at:c.joined_at}),l),{}),i=t.map(l=>({...l,team_members:o[l.team_id]||[]}));return console.log(`[teamService] Successfully fetched ${i.length} teams with members`),i}catch(t){throw console.error("[teamService] Failed to fetch teams with members:",t),t}},async getAllTeamMembers(){try{console.log("[teamService] Fetching all team members with user details...");const{data:t,error:e}=await Z.from("team_members").select(`
          team_id,
          users (
            user_id,
            user_name,
            user_email,
            user_role,
            avatar,
            auth_user_id,
            client_contact,
            company_name,
            created_at,
            updated_at
          )
        `);if(e)throw e;const r=(t||[]).reduce((n,s)=>{const o=s.team_id;return n[o]||(n[o]=[]),n[o].push(s.users),n},{});return console.log(`[teamService] Successfully fetched members for ${Object.keys(r).length} teams`),r}catch(t){throw console.error("[teamService] Failed to fetch all team members:",t),t}},async getById(t){try{const{data:e,error:r}=await Z.from("teams").select("*").eq("team_id",t).single();return r?null:e}catch(e){return console.error("[teamService] Failed to fetch team:",e),null}},async create(t){try{const{data:e,error:r}=await Z.from("teams").insert(t).select().single();if(r)throw r;return e}catch(e){throw console.error("[teamService] Failed to create team:",e),e}},async update(t,e){try{const r=hn(e,{team_name:"team_name"}),{error:n}=await Z.from("teams").update(r).eq("team_id",t);if(n)throw n}catch(r){throw console.error("[teamService] Failed to update team:",r),r}},async delete(t){try{const{error:e}=await Z.from("teams").delete().eq("team_id",t);if(e)throw e}catch(e){throw console.error("[teamService] Failed to delete team:",e),e}},async getTeamMembers(t){try{console.log("[teamService] Fetching members for team:",t);const{data:e,error:r}=await Z.from("team_members").select(`
          auth_user_id,
          users!auth_user_id (
            user_id,
            user_name,
            user_email,
            user_role,
            avatar,
            auth_user_id,
            client_contact,
            company_name,
            created_at,
            updated_at
          )
        `).eq("team_id",t);if(r)throw r;const n=(e==null?void 0:e.map(s=>s.users).filter(Boolean))||[];return console.log(`[teamService] Found ${n.length} members for team ${t}`),n}catch(e){throw console.error("[teamService] Failed to fetch team members:",e),e}},async addMember(t,e){try{console.log("[teamService] Adding member",e,"to team",t);const{error:r}=await Z.from("team_members").insert({team_id:t,auth_user_id:e});if(r)throw r;console.log("[teamService] Successfully added member to team")}catch(r){throw console.error("[teamService] Failed to add member to team:",r),r}},async removeMember(t,e){try{console.log("[teamService] Removing member",e,"from team",t);const{error:r}=await Z.from("team_members").delete().eq("team_id",t).eq("auth_user_id",e);if(r)throw r;console.log("[teamService] Successfully removed member from team")}catch(r){throw console.error("[teamService] Failed to remove member from team:",r),r}}},zf={async getAll(){try{console.log("[ticketService] Fetching all tickets...");const{data:t,error:e}=await Z.from("tickets").select("*").order("created_date",{ascending:!1});if(e)throw e;return console.log(`[ticketService] Successfully fetched ${(t==null?void 0:t.length)||0} tickets`),t||[]}catch(t){throw console.error("[ticketService] Failed to fetch tickets:",t),t}},async getById(t){try{const{data:e,error:r}=await Z.from("tickets").select("*").eq("ticket_id",t).single();return r?null:e}catch(e){return console.error("[ticketService] Failed to fetch ticket:",e),null}},async create(t){try{const{data:e,error:r}=await Z.from("tickets").insert({user_id:t.user_id,assigned_to:t.assigned_to,subject:t.subject,description:t.description,priority:t.priority,status:t.status,created_by:t.created_by}).select().single();if(r)throw r;return e}catch(e){throw console.error("[ticketService] Failed to create ticket:",e),e}},async update(t,e){try{const r={};e.user_id!==void 0&&(r.user_id=e.user_id),e.assigned_to!==void 0&&(r.assigned_to=e.assigned_to),e.subject&&(r.subject=e.subject),e.description!==void 0&&(r.description=e.description),e.priority&&(r.priority=e.priority),e.status&&(r.status=e.status),e.resolved_date!==void 0&&(r.resolved_date=e.resolved_date);const{error:n}=await Z.from("tickets").update(r).eq("ticket_id",t);if(n)throw n}catch(r){throw console.error("[ticketService] Failed to update ticket:",r),r}},async delete(t){try{const{error:e}=await Z.from("tickets").delete().eq("ticket_id",t);if(e)throw e}catch(e){throw console.error("[ticketService] Failed to delete ticket:",e),e}}},El={async getByRoom(t,e){try{let r=Z.from("messages").select("*").eq("room_id",t).order("created_at",{ascending:!1});e!=null&&e.limit&&(r=r.limit(e.limit)),e!=null&&e.before&&(r=r.lt("created_at",e.before));const{data:n,error:s}=await r;if(s)throw s;return(n||[]).reverse()}catch(r){throw console.error("[messageService] Failed to fetch messages:",r),r}},async create(t){try{const{data:e,error:r}=await Z.from("messages").insert(t).select().single();if(r)throw r;return e}catch(e){throw console.error("[messageService] Failed to create message:",e),e}}},Da={async getAll(){try{console.log("[leadService] Fetching all leads...");const{data:t,error:e}=await Z.from("leads").select("*").order("created_date",{ascending:!1});if(e)throw e;return console.log(`[leadService] Successfully fetched ${(t==null?void 0:t.length)||0} leads`),t||[]}catch(t){throw console.error("[leadService] Failed to fetch leads:",t),t}},async getById(t){try{const{data:e,error:r}=await Z.from("leads").select("*").eq("lead_id",t).single();return r?null:e}catch(e){return console.error("[leadService] Failed to fetch lead:",e),null}},async create(t){try{const{data:e,error:r}=await Z.from("leads").insert({lead_name:t.lead_name,lead_description:t.lead_description,client_name:t.client_name,client_user_id:t.client_user_id,created_by:t.created_by,stage:t.stage,assigned_to:t.assigned_to,assigned_at:t.assigned_at}).select().single();if(r)throw r;return e}catch(e){throw console.error("[leadService] Failed to create lead:",e),e}},async update(t,e){try{const r={};e.lead_name&&(r.lead_name=e.lead_name),e.lead_description!==void 0&&(r.lead_description=e.lead_description),e.client_name&&(r.client_name=e.client_name),e.client_user_id&&(r.client_user_id=e.client_user_id),e.stage!==void 0&&(r.stage=e.stage),e.assigned_to!==void 0&&(r.assigned_to=e.assigned_to),e.assigned_at!==void 0&&(r.assigned_at=e.assigned_at);const{error:n}=await Z.from("leads").update(r).eq("lead_id",t);if(n)throw n}catch(r){throw console.error("[leadService] Failed to update lead:",r),r}},async delete(t){try{const{error:e}=await Z.from("leads").delete().eq("lead_id",t);if(e)throw e}catch(e){throw console.error("[leadService] Failed to delete lead:",e),e}}},wn={async getAll(){try{console.log("[surveyTemplateService] Fetching all survey templates...");const{data:t,error:e}=await Z.from("survey_templates").select("*").order("created_at",{ascending:!1});if(e)throw e;return console.log(`[surveyTemplateService] Successfully fetched ${(t==null?void 0:t.length)||0} templates`),t||[]}catch(t){throw console.error("[surveyTemplateService] Failed to fetch templates:",t),t}},async getById(t){try{const{data:e,error:r}=await Z.from("survey_templates").select("*").eq("template_id",t).single();return r?null:e}catch(e){return console.error("[surveyTemplateService] Failed to fetch template:",e),null}},async create(t){try{const{data:e,error:r}=await Z.from("survey_templates").insert(t).select().single();if(r)throw r;return e}catch(e){throw console.error("[surveyTemplateService] Failed to create template:",e),e}},async update(t,e){try{const r={};e.template_name&&(r.template_name=e.template_name),e.template_name_ar&&(r.template_name_ar=e.template_name_ar),e.template_description!==void 0&&(r.template_description=e.template_description),e.template_description_ar!==void 0&&(r.template_description_ar=e.template_description_ar),e.category&&(r.category=e.category),e.is_active!==void 0&&(r.is_active=e.is_active),e.is_default!==void 0&&(r.is_default=e.is_default);const{error:n}=await Z.from("survey_templates").update(r).eq("template_id",t);if(n)throw n}catch(r){throw console.error("[surveyTemplateService] Failed to update template:",r),r}},async delete(t){try{const{error:e}=await Z.from("survey_templates").delete().eq("template_id",t);if(e)throw e}catch(e){throw console.error("[surveyTemplateService] Failed to delete template:",e),e}},async getFields(t){try{console.log("[surveyTemplateService] Fetching fields for template:",t);const{data:e,error:r}=await Z.from("survey_template_fields").select("*").eq("template_id",t).order("field_order",{ascending:!0});if(r)throw r;return console.log(`[surveyTemplateService] Successfully fetched ${(e==null?void 0:e.length)||0} fields`),e||[]}catch(e){throw console.error("[surveyTemplateService] Failed to fetch template fields:",e),e}},async createField(t){try{const{data:e,error:r}=await Z.from("survey_template_fields").insert(t).select().single();if(r)throw r;return e}catch(e){throw console.error("[surveyTemplateService] Failed to create field:",e),e}},async updateField(t,e){try{const r={};e.field_order!==void 0&&(r.field_order=e.field_order),e.field_type&&(r.field_type=e.field_type),e.field_label&&(r.field_label=e.field_label),e.field_label_ar&&(r.field_label_ar=e.field_label_ar),e.help_text!==void 0&&(r.help_text=e.help_text),e.help_text_ar!==void 0&&(r.help_text_ar=e.help_text_ar),e.is_required!==void 0&&(r.is_required=e.is_required),e.field_options!==void 0&&(r.field_options=e.field_options),e.validation_rules!==void 0&&(r.validation_rules=e.validation_rules),e.default_value!==void 0&&(r.default_value=e.default_value),e.conditional_logic!==void 0&&(r.conditional_logic=e.conditional_logic);const{error:n}=await Z.from("survey_template_fields").update(r).eq("field_id",t);if(n)throw n}catch(r){throw console.error("[surveyTemplateService] Failed to update field:",r),r}},async deleteField(t){try{const{error:e}=await Z.from("survey_template_fields").delete().eq("field_id",t);if(e)throw e}catch(e){throw console.error("[surveyTemplateService] Failed to delete field:",e),e}}},Id={async getAll(){try{console.log("[surveyService] Fetching all surveys...");const{data:t,error:e}=await Z.from("surveys").select("*").order("created_at",{ascending:!1});if(e)throw e;return console.log(`[surveyService] Successfully fetched ${(t==null?void 0:t.length)||0} surveys`),t||[]}catch(t){throw console.error("[surveyService] Failed to fetch surveys:",t),t}},async getById(t){try{const{data:e,error:r}=await Z.from("surveys").select("*").eq("survey_id",t).single();return r?null:e}catch(e){return console.error("[surveyService] Failed to fetch survey:",e),null}},async create(t){try{const{data:e,error:r}=await Z.from("surveys").insert(t).select().single();if(r)throw r;return e}catch(e){throw console.error("[surveyService] Failed to create survey:",e),e}},async update(t,e){try{const r={};e.template_id!==void 0&&(r.template_id=e.template_id),e.survey_name&&(r.survey_name=e.survey_name),e.survey_description!==void 0&&(r.survey_description=e.survey_description),e.client_name&&(r.client_name=e.client_name),e.client_name_ar&&(r.client_name_ar=e.client_name_ar),e.client_contact!==void 0&&(r.client_contact=e.client_contact),e.client_email&&(r.client_email=e.client_email),e.client_address&&(r.client_address=e.client_address),e.client_company&&(r.client_company=e.client_company),e.client_company_ar&&(r.client_company_ar=e.client_company_ar),e.survey_responses!==void 0&&(r.survey_responses=e.survey_responses),e.location_latitude!==void 0&&(r.location_latitude=e.location_latitude),e.location_longitude!==void 0&&(r.location_longitude=e.location_longitude),e.location_accuracy!==void 0&&(r.location_accuracy=e.location_accuracy),e.location_address&&(r.location_address=e.location_address),e.status&&(r.status=e.status),e.lead_id!==void 0&&(r.lead_id=e.lead_id),e.converted_to_lead_at!==void 0&&(r.converted_to_lead_at=e.converted_to_lead_at),e.device_info!==void 0&&(r.device_info=e.device_info),e.completion_time_seconds!==void 0&&(r.completion_time_seconds=e.completion_time_seconds),e.notes&&(r.notes=e.notes),e.notes_ar&&(r.notes_ar=e.notes_ar);const{error:n}=await Z.from("surveys").update(r).eq("survey_id",t);if(n)throw n}catch(r){throw console.error("[surveyService] Failed to update survey:",r),r}},async delete(t){try{const{error:e}=await Z.from("surveys").delete().eq("survey_id",t);if(e)throw e}catch(e){throw console.error("[surveyService] Failed to delete survey:",e),e}}},ve=f.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:X("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));ve.displayName="Card";const Me=f.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:X("flex flex-col space-y-1.5 p-6",t),...e}));Me.displayName="CardHeader";const Qe=f.forwardRef(({className:t,...e},r)=>a.jsx("h3",{ref:r,className:X("text-2xl font-semibold leading-none tracking-tight",t),...e}));Qe.displayName="CardTitle";const EU=f.forwardRef(({className:t,...e},r)=>a.jsx("p",{ref:r,className:X("text-sm text-muted-foreground",t),...e}));EU.displayName="CardDescription";const _e=f.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:X("p-6 pt-0",t),...e}));_e.displayName="CardContent";const PU=f.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:X("flex items-center p-6 pt-0",t),...e}));PU.displayName="CardFooter";var Kv="Progress",Gv=100,[TU,qz]=br(Kv),[RU,OU]=TU(Kv),Bk=f.forwardRef((t,e)=>{const{__scopeProgress:r,value:n=null,max:s,getValueLabel:o=DU,...i}=t;(s||s===0)&&!p0(s)&&console.error(AU(`${s}`,"Progress"));const l=p0(s)?s:Gv;n!==null&&!g0(n,l)&&console.error(MU(`${n}`,"Progress"));const c=g0(n,l)?n:null,u=Ld(c)?o(c,l):void 0;return a.jsx(RU,{scope:r,value:c,max:l,children:a.jsx(je.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Ld(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":Vk(c,l),"data-value":c??void 0,"data-max":l,...i,ref:e})})});Bk.displayName=Kv;var zk="ProgressIndicator",Wk=f.forwardRef((t,e)=>{const{__scopeProgress:r,...n}=t,s=OU(zk,r);return a.jsx(je.div,{"data-state":Vk(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...n,ref:e})});Wk.displayName=zk;function DU(t,e){return`${Math.round(t/e*100)}%`}function Vk(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Ld(t){return typeof t=="number"}function p0(t){return Ld(t)&&!isNaN(t)&&t>0}function g0(t,e){return Ld(t)&&!isNaN(t)&&t<=e&&t>=0}function AU(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Gv}\`.`}function MU(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Gv} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Hk=Bk,IU=Wk;const da=f.forwardRef(({className:t,value:e,...r},n)=>a.jsx(Hk,{ref:n,className:X("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:a.jsx(IU,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));da.displayName=Hk.displayName;function LU(){const{t}=lt();xa();const[e,r]=f.useState([]),[n,s]=f.useState([]),[o,i]=f.useState([]),[l,c]=f.useState([]),[u,d]=f.useState([]),[h,m]=f.useState(!0),[p,v]=f.useState(null),{user:g,loading:y}=bt();console.log("[Dashboard] Rendering. Auth state:",{user:g?{id:g.id,email:g.email,role:g.role}:null,authLoading:y,hasUser:!!g,loading:h}),f.useEffect(()=>{console.log("[Dashboard] useEffect - User changed:",{hasUser:!!g,authLoading:y}),g&&!y&&(console.log("[Dashboard] User is authenticated, loading data..."),w())},[g,y]);const w=async()=>{console.log("[Dashboard] Starting to load data...");try{m(!0),v(null),console.log("[Dashboard] Fetching data...");const[L,O,J,W,U]=await Promise.all([Nn.getAll().catch(R=>(console.error("[Dashboard] Error fetching projects:",R),[])),qv.getAll().catch(R=>(console.error("[Dashboard] Error fetching clients:",R),[])),Vr.getAll().catch(R=>(console.error("[Dashboard] Error fetching users:",R),[])),Da.getAll().catch(R=>(console.error("[Dashboard] Error fetching leads:",R),[])),Id.getAll().catch(R=>(console.error("[Dashboard] Error fetching surveys:",R),[]))]);console.log("[Dashboard] Data fetched successfully:",{projects:L.length,clients:O.length,users:J.length,leads:W.length,surveys:U.length}),r(L),s(O),i(J),c(W),d(U)}catch(L){console.error("[Dashboard] Failed to load data:",L),v(L.message||"Failed to load data")}finally{console.log("[Dashboard] Data loading completed"),m(!1)}};if(h||y||!g)return a.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:t("common.loading")})]})});if(p)return a.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-red-600",children:t("common.error")}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:p}),a.jsx(G,{onClick:w,className:"mt-4",children:"Retry"})]})});const x=e.length,_=e.filter(L=>L.progress===100).length,b=e.filter(L=>L.progress>0&&L.progress<100).length,j=e.filter(L=>L.progress===0).length,E=n.length,k=o.length,P=l.length,T=u.length,C=e.sort((L,O)=>new Date(O.created_date||"").getTime()-new Date(L.created_date||"").getTime()).slice(0,5);return a.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold tracking-tight",children:t("dashboard.title")}),a.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:t("dashboard.subtitle")})]}),a.jsx("div",{className:"flex-shrink-0",children:a.jsx(pv,{})})]}),a.jsxs("div",{className:"grid gap-4 sm:gap-6 grid-cols-2 md:grid-cols-3 lg:grid-cols-6",children:[a.jsxs(ve,{children:[a.jsxs(Me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Qe,{className:"text-xs sm:text-sm font-medium",children:t("dashboard.totalProjects")}),a.jsx(SL,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),a.jsxs(_e,{children:[a.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:x}),a.jsxs("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:[_," ",t("dashboard.completed")]})]})]}),a.jsxs(ve,{children:[a.jsxs(Me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Qe,{className:"text-xs sm:text-sm font-medium",children:t("dashboard.inProgress")}),a.jsx($n,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),a.jsxs(_e,{children:[a.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:b}),a.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:t("dashboard.activeProjects")})]})]}),a.jsxs(ve,{children:[a.jsxs(Me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Qe,{className:"text-xs sm:text-sm font-medium",children:t("dashboard.clients")}),a.jsx(uh,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),a.jsxs(_e,{children:[a.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:E}),a.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:t("dashboard.totalClients")})]})]}),a.jsxs(ve,{children:[a.jsxs(Me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Qe,{className:"text-xs sm:text-sm font-medium",children:t("dashboard.teamMembers")}),a.jsx($n,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),a.jsxs(_e,{children:[a.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:k}),a.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:t("dashboard.activeUsers")})]})]}),a.jsxs(ve,{children:[a.jsxs(Me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Qe,{className:"text-xs sm:text-sm font-medium",children:t("dashboard.leads")}),a.jsx(Cd,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),a.jsxs(_e,{children:[a.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:P}),a.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:t("dashboard.totalLeads")})]})]}),a.jsxs(ve,{children:[a.jsxs(Me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Qe,{className:"text-xs sm:text-sm font-medium",children:t("dashboard.surveys")}),a.jsx(ti,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),a.jsxs(_e,{children:[a.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:T}),a.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:t("dashboard.totalSurveys")})]})]})]}),a.jsxs("div",{className:"grid gap-4 sm:gap-6 grid-cols-1 md:grid-cols-2",children:[a.jsxs(ve,{children:[a.jsx(Me,{children:a.jsx(Qe,{className:"text-base sm:text-lg",children:t("dashboard.recentProjects")})}),a.jsx(_e,{className:"space-y-3 sm:space-y-4",children:C.length>0?C.map(L=>{const O=n.find(J=>J.auth_user_id===L.created_by);return a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[a.jsxs("div",{className:"space-y-1 min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium leading-none truncate",children:K(L,"project_name")}),a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:O?K(O,"user_name"):"No client"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(da,{value:L.progress,className:"w-16 sm:w-20 h-2"}),a.jsxs("span",{className:"text-xs sm:text-sm text-muted-foreground w-8",children:[L.progress,"%"]})]})]},L.project_id)}):a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:t("dashboard.noProjectsYet")})})]}),a.jsxs(ve,{children:[a.jsx(Me,{children:a.jsx(Qe,{className:"text-base sm:text-lg",children:t("dashboard.projectStatus")})}),a.jsxs(_e,{className:"space-y-3 sm:space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 rounded-full bg-green-500"}),a.jsx("span",{className:"text-xs sm:text-sm",children:t("dashboard.completedStatus")})]}),a.jsx("span",{className:"text-xs sm:text-sm font-medium",children:_})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 rounded-full bg-blue-500"}),a.jsx("span",{className:"text-xs sm:text-sm",children:t("dashboard.inProgressStatus")})]}),a.jsx("span",{className:"text-xs sm:text-sm font-medium",children:b})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 rounded-full bg-gray-500"}),a.jsx("span",{className:"text-xs sm:text-sm",children:t("dashboard.notStartedStatus")})]}),a.jsx("span",{className:"text-xs sm:text-sm font-medium",children:j})]})]})]})]})]})}const Th={users:["users"],projects:["projects"],tasks:["tasks"],stages:["stages"],globalStages:["stages","global"],clients:["clients"],teams:["teams"],teamMembers:["teams","members"],tickets:["tickets"],projectUsers:t=>["projects",t,"users"],comments:t=>["tasks",t,"comments"],rooms:t=>["rooms",t],messages:t=>["messages",t],userProjects:t=>["users",t,"projects"]},FU=()=>sh({queryKey:Th.users,queryFn:Vr.getAll}),$U=t=>sh({queryKey:Th.userProjects(t),queryFn:()=>Nn.getByUserAuthId(t),enabled:!!t}),UU=()=>sh({queryKey:Th.tasks,queryFn:Vs.getAll}),BU=()=>sh({queryKey:Th.globalStages,queryFn:gr.getGlobalStages}),zU=xc("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ze({className:t,variant:e,...r}){return a.jsx("div",{className:X(zU({variant:e}),t),...r})}function WU(){var k;const{t}=lt(),[e,r]=f.useState([]),[n,s]=f.useState([]),[o,i]=f.useState([]),[l,c]=f.useState([]),[u,d]=f.useState(!0),[h,m]=f.useState(null),{user:p,loading:v}=bt(),{data:g=[],isLoading:y}=$U((p==null?void 0:p.id)||"");f.useEffect(()=>{p&&!v&&w()},[p,v]);const w=async()=>{try{d(!0),m(null);const T=(await Vs.getAll()).filter(J=>{var W;return J.assigned_to===((W=p==null?void 0:p.profile)==null?void 0:W.user_id)}),C=await Vr.getAll(),L=await Da.getAll(),O=await Id.getAll().catch(J=>(console.error("[EmployeeDashboard] Error fetching surveys:",J),[]));r(T),s(C),i(L),c(O)}catch(P){console.error("Failed to load employee data:",P),m(P.message||"Failed to load data")}finally{d(!1)}};if(u||v||!p)return a.jsx("div",{className:"flex items-center justify-center flex-1",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:t("common.loading")})]})});if(h)return a.jsx("div",{className:"flex items-center justify-center flex-1",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-red-600",children:t("common.error")}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:h}),a.jsx(G,{onClick:w,className:"mt-4",children:t("dashboard.retry")})]})});const x=e.filter(P=>P.task_status==="completed").length,_=e.filter(P=>P.task_status==="in_progress").length;e.filter(P=>P.task_status==="pending").length;const b=g.filter(P=>P.progress!==void 0&&P.progress<100).length,j=l.length,E=e.sort((P,T)=>new Date(T.created_at||"").getTime()-new Date(P.created_at||"").getTime()).slice(0,5);return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold tracking-tight",children:t("employeeDashboard.title")}),a.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:t("employeeDashboard.subtitle",{name:K(p.profile||{},"user_name")||p.email})})]}),a.jsx("div",{className:"flex-shrink-0",children:a.jsx(pv,{})})]}),a.jsxs(ve,{children:[a.jsx(Me,{children:a.jsxs(Qe,{className:"flex items-center gap-2",children:[a.jsx(ia,{className:"h-5 w-5"}),t("employeeDashboard.employeeInfo")]})}),a.jsx(_e,{children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:t("employeeDashboard.name")}),a.jsx("p",{className:"font-medium",children:K(p.profile||{},"user_name")||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:t("employeeDashboard.email")}),a.jsx("p",{className:"font-medium",children:p.email})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:t("employeeDashboard.role")}),a.jsx(ze,{variant:"secondary",className:"capitalize",children:p.role})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:t("employeeDashboard.memberSince")}),a.jsx("p",{className:"font-medium",children:(k=p.profile)!=null&&k.created_at?new Date(p.profile.created_at).toLocaleDateString():"N/A"})]})]})})]}),a.jsxs("div",{className:"grid gap-4 sm:gap-6 grid-cols-2 md:grid-cols-3 lg:grid-cols-6",children:[a.jsxs(ve,{children:[a.jsxs(Me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Qe,{className:"text-sm font-medium",children:t("employeeDashboard.myProjects")}),a.jsx(iv,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(_e,{children:[a.jsx("div",{className:"text-2xl font-bold",children:g.length}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[b," ",t("employeeDashboard.active")]})]})]}),a.jsxs(ve,{children:[a.jsxs(Me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Qe,{className:"text-sm font-medium",children:t("employeeDashboard.myTasks")}),a.jsx(Cd,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(_e,{children:[a.jsx("div",{className:"text-2xl font-bold",children:e.length}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[x," ",t("employeeDashboard.completed")]})]})]}),a.jsxs(ve,{children:[a.jsxs(Me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Qe,{className:"text-sm font-medium",children:t("employeeDashboard.inProgress")}),a.jsx(Ho,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(_e,{children:[a.jsx("div",{className:"text-2xl font-bold",children:_}),a.jsx("p",{className:"text-xs text-muted-foreground",children:t("employeeDashboard.activeTasks")})]})]}),a.jsxs(ve,{children:[a.jsxs(Me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Qe,{className:"text-sm font-medium",children:t("employeeDashboard.completedTasks")}),a.jsx(Nd,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(_e,{children:[a.jsx("div",{className:"text-2xl font-bold",children:x}),a.jsx("p",{className:"text-xs text-muted-foreground",children:t("employeeDashboard.finishedTasks")})]})]}),a.jsxs(ve,{children:[a.jsxs(Me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Qe,{className:"text-sm font-medium",children:t("employeeDashboard.leads")}),a.jsx(Cd,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(_e,{children:[a.jsx("div",{className:"text-2xl font-bold",children:o.length}),a.jsx("p",{className:"text-xs text-muted-foreground",children:t("employeeDashboard.totalLeads")})]})]}),a.jsxs(ve,{children:[a.jsxs(Me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Qe,{className:"text-sm font-medium",children:t("employeeDashboard.surveys")}),a.jsx(ti,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(_e,{children:[a.jsx("div",{className:"text-2xl font-bold",children:j}),a.jsx("p",{className:"text-xs text-muted-foreground",children:t("employeeDashboard.totalSurveys")})]})]})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsxs(ve,{children:[a.jsx(Me,{children:a.jsx(Qe,{children:t("employeeDashboard.myProjects")})}),a.jsx(_e,{className:"space-y-4",children:g.length>0?g.slice(0,5).map(P=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-medium leading-none",children:P.project_name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:P.project_description||t("employeeDashboard.noDescription")})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(da,{value:P.progress||0,className:"w-16 h-2"}),a.jsxs("span",{className:"text-sm text-muted-foreground w-8",children:[P.progress||0,"%"]})]})]},P.project_id)):a.jsx("p",{className:"text-sm text-muted-foreground",children:t("employeeDashboard.noProjectsAssigned")})})]}),a.jsxs(ve,{children:[a.jsx(Me,{children:a.jsx(Qe,{children:t("employeeDashboard.recentTasks")})}),a.jsx(_e,{className:"space-y-4",children:E.length>0?E.map(P=>{var T;return a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-medium leading-none",children:P.task_name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:P.description||t("employeeDashboard.noDescription")})]}),a.jsx(ze,{variant:P.task_status==="completed"?"default":P.task_status==="in_progress"?"secondary":"outline",className:"text-xs",children:(T=P.task_status)==null?void 0:T.replace("_"," ")})]},P.task_id)}):a.jsx("p",{className:"text-sm text-muted-foreground",children:t("employeeDashboard.noTasksAssigned")})})]})]})]})}const Rh=f.forwardRef(({className:t,...e},r)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:r,className:X("w-full caption-bottom text-sm",t),...e})}));Rh.displayName="Table";const Oh=f.forwardRef(({className:t,...e},r)=>a.jsx("thead",{ref:r,className:X("[&_tr]:border-b",t),...e}));Oh.displayName="TableHeader";const Dh=f.forwardRef(({className:t,...e},r)=>a.jsx("tbody",{ref:r,className:X("[&_tr:last-child]:border-0",t),...e}));Dh.displayName="TableBody";const VU=f.forwardRef(({className:t,...e},r)=>a.jsx("tfoot",{ref:r,className:X("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));VU.displayName="TableFooter";const Mn=f.forwardRef(({className:t,...e},r)=>a.jsx("tr",{ref:r,className:X("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",t),...e}));Mn.displayName="TableRow";const St=f.forwardRef(({className:t,...e},r)=>a.jsx("th",{ref:r,className:X("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));St.displayName="TableHead";const ht=f.forwardRef(({className:t,...e},r)=>a.jsx("td",{ref:r,className:X("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));ht.displayName="TableCell";const HU=f.forwardRef(({className:t,...e},r)=>a.jsx("caption",{ref:r,className:X("mt-4 text-sm text-muted-foreground",t),...e}));HU.displayName="TableCaption";var Ah="Popover",[qk,Kz]=br(Ah,[Hi]),Ac=Hi(),[qU,_a]=qk(Ah),Kk=t=>{const{__scopePopover:e,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:i=!1}=t,l=Ac(e),c=f.useRef(null),[u,d]=f.useState(!1),[h,m]=ua({prop:n,defaultProp:s??!1,onChange:o,caller:Ah});return a.jsx(kv,{...l,children:a.jsx(qU,{scope:e,contentId:un(),triggerRef:c,open:h,onOpenChange:m,onOpenToggle:f.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:u,onCustomAnchorAdd:f.useCallback(()=>d(!0),[]),onCustomAnchorRemove:f.useCallback(()=>d(!1),[]),modal:i,children:r})})};Kk.displayName=Ah;var Gk="PopoverAnchor",KU=f.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=_a(Gk,r),o=Ac(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=s;return f.useEffect(()=>(i(),()=>l()),[i,l]),a.jsx(vh,{...o,...n,ref:e})});KU.displayName=Gk;var Yk="PopoverTrigger",Qk=f.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=_a(Yk,r),o=Ac(r),i=Ae(e,s.triggerRef),l=a.jsx(je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":tC(s.open),...n,ref:i,onClick:ie(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:a.jsx(vh,{asChild:!0,...o,children:l})});Qk.displayName=Yk;var Yv="PopoverPortal",[GU,YU]=qk(Yv,{forceMount:void 0}),Jk=t=>{const{__scopePopover:e,forceMount:r,children:n,container:s}=t,o=_a(Yv,e);return a.jsx(GU,{scope:e,forceMount:r,children:a.jsx(cr,{present:r||o.open,children:a.jsx(Sc,{asChild:!0,container:s,children:n})})})};Jk.displayName=Yv;var Ri="PopoverContent",Xk=f.forwardRef((t,e)=>{const r=YU(Ri,t.__scopePopover),{forceMount:n=r.forceMount,...s}=t,o=_a(Ri,t.__scopePopover);return a.jsx(cr,{present:n||o.open,children:o.modal?a.jsx(JU,{...s,ref:e}):a.jsx(XU,{...s,ref:e})})});Xk.displayName=Ri;var QU=oa("PopoverContent.RemoveScroll"),JU=f.forwardRef((t,e)=>{const r=_a(Ri,t.__scopePopover),n=f.useRef(null),s=Ae(e,n),o=f.useRef(!1);return f.useEffect(()=>{const i=n.current;if(i)return xh(i)},[]),a.jsx(Nc,{as:QU,allowPinchZoom:!0,children:a.jsx(Zk,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ie(t.onCloseAutoFocus,i=>{var l;i.preventDefault(),o.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:ie(t.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;o.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:ie(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),XU=f.forwardRef((t,e)=>{const r=_a(Ri,t.__scopePopover),n=f.useRef(!1),s=f.useRef(!1);return a.jsx(Zk,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=t.onCloseAutoFocus)==null||i.call(t,o),o.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;((u=r.triggerRef.current)==null?void 0:u.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),Zk=f.forwardRef((t,e)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...h}=t,m=_a(Ri,r),p=Ac(r);return fh(),a.jsx(bc,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:a.jsx(_c,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:a.jsx(Cv,{"data-state":tC(m.open),role:"dialog",id:m.contentId,...p,...h,ref:e,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),eC="PopoverClose",ZU=f.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=_a(eC,r);return a.jsx(je.button,{type:"button",...n,ref:e,onClick:ie(t.onClick,()=>s.onOpenChange(!1))})});ZU.displayName=eC;var e5="PopoverArrow",t5=f.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Ac(r);return a.jsx(Ev,{...s,...n,ref:e})});t5.displayName=e5;function tC(t){return t?"open":"closed"}var r5=Kk,n5=Qk,s5=Jk,rC=Xk;const a5=r5,o5=n5,nC=f.forwardRef(({className:t,align:e="center",sideOffset:r=4,...n},s)=>a.jsx(s5,{children:a.jsx(rC,{ref:s,align:e,sideOffset:r,className:X("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));nC.displayName=rC.displayName;function Ye(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Or(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function sr(t,e){const r=Ye(t);return isNaN(e)?Or(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function pn(t,e){const r=Ye(t);if(isNaN(e))return Or(t,NaN);if(!e)return r;const n=r.getDate(),s=Or(t,r.getTime());s.setMonth(r.getMonth()+e+1,0);const o=s.getDate();return n>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),n),r)}const Qv=6048e5,i5=864e5;let l5={};function Mc(){return l5}function Bn(t,e){var l,c,u,d;const r=Mc(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Ye(t),o=s.getDay(),i=(o<n?7:0)+o-n;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function co(t){return Bn(t,{weekStartsOn:1})}function sC(t){const e=Ye(t),r=e.getFullYear(),n=Or(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=co(n),o=Or(t,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const i=co(o);return e.getTime()>=s.getTime()?r+1:e.getTime()>=i.getTime()?r:r-1}function Oi(t){const e=Ye(t);return e.setHours(0,0,0,0),e}function Fd(t){const e=Ye(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function Rn(t,e){const r=Oi(t),n=Oi(e),s=+r-Fd(r),o=+n-Fd(n);return Math.round((s-o)/i5)}function c5(t){const e=sC(t),r=Or(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),co(r)}function zp(t,e){const r=e*7;return sr(t,r)}function u5(t,e){return pn(t,e*12)}function d5(t){let e;return t.forEach(function(r){const n=Ye(r);(e===void 0||e<n||isNaN(Number(n)))&&(e=n)}),e||new Date(NaN)}function h5(t){let e;return t.forEach(r=>{const n=Ye(r);(!e||e>n||isNaN(+n))&&(e=n)}),e||new Date(NaN)}function vr(t,e){const r=Oi(t),n=Oi(e);return+r==+n}function Jv(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function f5(t){if(!Jv(t)&&typeof t!="number")return!1;const e=Ye(t);return!isNaN(Number(e))}function oc(t,e){const r=Ye(t),n=Ye(e),s=r.getFullYear()-n.getFullYear(),o=r.getMonth()-n.getMonth();return s*12+o}function m5(t,e,r){const n=Bn(t,r),s=Bn(e,r),o=+n-Fd(n),i=+s-Fd(s);return Math.round((o-i)/Qv)}function Xv(t){const e=Ye(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function _r(t){const e=Ye(t);return e.setDate(1),e.setHours(0,0,0,0),e}function aC(t){const e=Ye(t),r=Or(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Zv(t,e){var l,c,u,d;const r=Mc(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Ye(t),o=s.getDay(),i=(o<n?-7:0)+6-(o-n);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s}function oC(t){return Zv(t,{weekStartsOn:1})}const p5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},g5=(t,e,r)=>{let n;const s=p5[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function si(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const v5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},x5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},y5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},w5={date:si({formats:v5,defaultWidth:"full"}),time:si({formats:x5,defaultWidth:"full"}),dateTime:si({formats:y5,defaultWidth:"full"})},_5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},b5=(t,e,r,n)=>_5[t];function Cn(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):i;s=t.formattingValues[l]||t.formattingValues[i]}else{const i=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[l]||t.values[i]}const o=t.argumentCallback?t.argumentCallback(e):e;return s[o]}}const j5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},S5={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},N5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},k5={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},C5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},E5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},P5=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},T5={ordinalNumber:P5,era:Cn({values:j5,defaultWidth:"wide"}),quarter:Cn({values:S5,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Cn({values:N5,defaultWidth:"wide"}),day:Cn({values:k5,defaultWidth:"wide"}),dayPeriod:Cn({values:C5,defaultWidth:"wide",formattingValues:E5,defaultFormattingWidth:"wide"})};function En(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],o=e.match(s);if(!o)return null;const i=o[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?O5(l,h=>h.test(i)):R5(l,h=>h.test(i));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(i.length);return{value:u,rest:d}}}function R5(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function O5(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function iC(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],o=e.match(t.parsePattern);if(!o)return null;let i=t.valueCallback?t.valueCallback(o[0]):o[0];i=r.valueCallback?r.valueCallback(i):i;const l=e.slice(s.length);return{value:i,rest:l}}}const D5=/^(\d+)(th|st|nd|rd)?/i,A5=/\d+/i,M5={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},I5={any:[/^b/i,/^(a|c)/i]},L5={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},F5={any:[/1/i,/2/i,/3/i,/4/i]},$5={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},U5={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},B5={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},z5={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},W5={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},V5={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},H5={ordinalNumber:iC({matchPattern:D5,parsePattern:A5,valueCallback:t=>parseInt(t,10)}),era:En({matchPatterns:M5,defaultMatchWidth:"wide",parsePatterns:I5,defaultParseWidth:"any"}),quarter:En({matchPatterns:L5,defaultMatchWidth:"wide",parsePatterns:F5,defaultParseWidth:"any",valueCallback:t=>t+1}),month:En({matchPatterns:$5,defaultMatchWidth:"wide",parsePatterns:U5,defaultParseWidth:"any"}),day:En({matchPatterns:B5,defaultMatchWidth:"wide",parsePatterns:z5,defaultParseWidth:"any"}),dayPeriod:En({matchPatterns:W5,defaultMatchWidth:"any",parsePatterns:V5,defaultParseWidth:"any"})},lC={code:"en-US",formatDistance:g5,formatLong:w5,formatRelative:b5,localize:T5,match:H5,options:{weekStartsOn:0,firstWeekContainsDate:1}};function q5(t){const e=Ye(t);return Rn(e,aC(e))+1}function cC(t){const e=Ye(t),r=+co(e)-+c5(e);return Math.round(r/Qv)+1}function uC(t,e){var d,h,m,p;const r=Ye(t),n=r.getFullYear(),s=Mc(),o=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(m=s.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,i=Or(t,0);i.setFullYear(n+1,0,o),i.setHours(0,0,0,0);const l=Bn(i,e),c=Or(t,0);c.setFullYear(n,0,o),c.setHours(0,0,0,0);const u=Bn(c,e);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function K5(t,e){var l,c,u,d;const r=Mc(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=uC(t,e),o=Or(t,0);return o.setFullYear(s,0,n),o.setHours(0,0,0,0),Bn(o,e)}function dC(t,e){const r=Ye(t),n=+Bn(r,e)-+K5(r,e);return Math.round(n/Qv)+1}function Xe(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const js={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Xe(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Xe(r+1,2)},d(t,e){return Xe(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Xe(t.getHours()%12||12,e.length)},H(t,e){return Xe(t.getHours(),e.length)},m(t,e){return Xe(t.getMinutes(),e.length)},s(t,e){return Xe(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return Xe(s,e.length)}},To={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},v0={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return js.y(t,e)},Y:function(t,e,r,n){const s=uC(t,n),o=s>0?s:1-s;if(e==="YY"){const i=o%100;return Xe(i,2)}return e==="Yo"?r.ordinalNumber(o,{unit:"year"}):Xe(o,e.length)},R:function(t,e){const r=sC(t);return Xe(r,e.length)},u:function(t,e){const r=t.getFullYear();return Xe(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Xe(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Xe(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return js.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Xe(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const s=dC(t,n);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):Xe(s,e.length)},I:function(t,e,r){const n=cC(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Xe(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):js.d(t,e)},D:function(t,e,r){const n=q5(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Xe(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const s=t.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Xe(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const s=t.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Xe(o,e.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return Xe(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let s;switch(n===12?s=To.noon:n===0?s=To.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let s;switch(n>=17?s=To.evening:n>=12?s=To.afternoon:n>=4?s=To.morning:s=To.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return js.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):js.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Xe(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Xe(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):js.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):js.s(t,e)},S:function(t,e){return js.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return y0(n);case"XXXX":case"XX":return Ta(n);case"XXXXX":case"XXX":default:return Ta(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return y0(n);case"xxxx":case"xx":return Ta(n);case"xxxxx":case"xxx":default:return Ta(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+x0(n,":");case"OOOO":default:return"GMT"+Ta(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+x0(n,":");case"zzzz":default:return"GMT"+Ta(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return Xe(n,e.length)},T:function(t,e,r){const n=t.getTime();return Xe(n,e.length)}};function x0(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),o=n%60;return o===0?r+String(s):r+String(s)+e+Xe(o,2)}function y0(t,e){return t%60===0?(t>0?"-":"+")+Xe(Math.abs(t)/60,2):Ta(t,e)}function Ta(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Xe(Math.trunc(n/60),2),o=Xe(n%60,2);return r+s+e+o}const w0=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},hC=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},G5=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return w0(t,e);let o;switch(n){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",w0(n,e)).replace("{{time}}",hC(s,e))},Y5={p:hC,P:G5},Q5=/^D+$/,J5=/^Y+$/,X5=["D","DD","YY","YYYY"];function Z5(t){return Q5.test(t)}function e6(t){return J5.test(t)}function t6(t,e,r){const n=r6(t,e,r);if(console.warn(n),X5.includes(t))throw new RangeError(n)}function r6(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const n6=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,s6=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,a6=/^'([^]*?)'?$/,o6=/''/g,i6=/[a-zA-Z]/;function In(t,e,r){var d,h,m,p,v,g,y,w;const n=Mc(),s=(r==null?void 0:r.locale)??n.locale??lC,o=(r==null?void 0:r.firstWeekContainsDate)??((h=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(m=n.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,i=(r==null?void 0:r.weekStartsOn)??((g=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:g.weekStartsOn)??n.weekStartsOn??((w=(y=n.locale)==null?void 0:y.options)==null?void 0:w.weekStartsOn)??0,l=Ye(t);if(!f5(l))throw new RangeError("Invalid time value");let c=e.match(s6).map(x=>{const _=x[0];if(_==="p"||_==="P"){const b=Y5[_];return b(x,s.formatLong)}return x}).join("").match(n6).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const _=x[0];if(_==="'")return{isToken:!1,value:l6(x)};if(v0[_])return{isToken:!0,value:x};if(_.match(i6))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:x}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:o,weekStartsOn:i,locale:s};return c.map(x=>{if(!x.isToken)return x.value;const _=x.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&e6(_)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&Z5(_))&&t6(_,e,String(t));const b=v0[_[0]];return b(l,_,s.localize,u)}).join("")}function l6(t){const e=t.match(a6);return e?e[1].replace(o6,"'"):t}function c6(t){const e=Ye(t),r=e.getFullYear(),n=e.getMonth(),s=Or(t,0);return s.setFullYear(r,n+1,0),s.setHours(0,0,0,0),s.getDate()}function u6(t){return Math.trunc(+Ye(t)/1e3)}function d6(t){const e=Ye(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(0,0,0,0),e}function h6(t,e){return m5(d6(t),_r(t),e)+1}function Wp(t,e){const r=Ye(t),n=Ye(e);return r.getTime()>n.getTime()}function fC(t,e){const r=Ye(t),n=Ye(e);return+r<+n}function ex(t,e){const r=Ye(t),n=Ye(e);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function f6(t,e){const r=Ye(t),n=Ye(e);return r.getFullYear()===n.getFullYear()}function Wf(t,e){return sr(t,-e)}function Vf(t,e){const r=Ye(t),n=r.getFullYear(),s=r.getDate(),o=Or(t,0);o.setFullYear(n,e,15),o.setHours(0,0,0,0);const i=c6(o);return r.setMonth(e,Math.min(s,i)),r}function _0(t,e){const r=Ye(t);return isNaN(+r)?Or(t,NaN):(r.setFullYear(e),r)}const m6={lessThanXSeconds:{one:"  ",two:"  ",threeToTen:"  {{count}} ",other:"  {{count}} "},xSeconds:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},halfAMinute:" ",lessThanXMinutes:{one:"  ",two:"  ",threeToTen:"  {{count}} ",other:"  {{count}} "},xMinutes:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},aboutXHours:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "},xHours:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},xDays:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},aboutXWeeks:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "},xWeeks:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},aboutXMonths:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "},xMonths:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},aboutXYears:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "},xYears:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},overXYears:{one:"  ",two:"  ",threeToTen:"  {{count}} ",other:"  {{count}} "},almostXYears:{one:"   ",two:"  ",threeToTen:"  {{count}} ",other:"  {{count}} "}},p6=(t,e,r)=>{const n=m6[t];let s;return typeof n=="string"?s=n:e===1?s=n.one:e===2?s=n.two:e<=10?s=n.threeToTen.replace("{{count}}",String(e)):s=n.other.replace("{{count}}",String(e)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?" "+s:" "+s:s},g6={full:"EEEE do MMMM y",long:"do MMMM y",medium:"d MMM y",short:"dd/MM/yyyy"},v6={full:"HH:mm:ss",long:"HH:mm:ss",medium:"HH:mm:ss",short:"HH:mm"},x6={full:"{{date}} ' ' {{time}}",long:"{{date}} ' ' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},y6={date:si({formats:g6,defaultWidth:"full"}),time:si({formats:v6,defaultWidth:"full"}),dateTime:si({formats:x6,defaultWidth:"full"})},w6={lastWeek:"eeee '  ' p",yesterday:"'  ' p",today:"'  ' p",tomorrow:"'  ' p",nextWeek:"eeee '  ' p",other:"P"},_6=t=>w6[t],b6={narrow:["",""],abbreviated:["..",".."],wide:[" "," "]},j6={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:[" "," "," "," "]},S6={narrow:["","","","","","","","","","","",""],abbreviated:["","","","","","","","","","","",""],wide:["","","","","","","","","","","",""]},N6={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},k6={narrow:{am:"",pm:"",morning:"",noon:"",afternoon:" ",evening:"",night:"",midnight:" "},abbreviated:{am:"",pm:"",morning:"",noon:"",afternoon:" ",evening:"",night:"",midnight:" "},wide:{am:"",pm:"",morning:"",noon:"",afternoon:" ",evening:"",night:"",midnight:" "}},C6={narrow:{am:"",pm:"",morning:" ",noon:"",afternoon:" ",evening:" ",night:" ",midnight:" "},abbreviated:{am:"",pm:"",morning:" ",noon:"",afternoon:" ",evening:" ",night:" ",midnight:" "},wide:{am:"",pm:"",morning:" ",noon:"",afternoon:" ",evening:" ",night:" ",midnight:" "}},E6=t=>String(t),P6={ordinalNumber:E6,era:Cn({values:b6,defaultWidth:"wide"}),quarter:Cn({values:j6,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Cn({values:S6,defaultWidth:"wide"}),day:Cn({values:N6,defaultWidth:"wide"}),dayPeriod:Cn({values:k6,defaultWidth:"wide",formattingValues:C6,defaultFormattingWidth:"wide"})},T6=/^(\d+)(th|st|nd|rd)?/i,R6=/\d+/i,O6={narrow:/[]/,abbreviated:/[]\.\./,wide:/(|) /},D6={any:[//,//]},A6={narrow:/^[1234]/i,abbreviated:/[1234]/,wide:/ (|||)/},M6={any:[/1/i,/2/i,/3/i,/4/i]},I6={narrow:/^[]/,abbreviated:/^(|||||||||||)/,wide:/^(|||||||||||)/},L6={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],any:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i]},F6={narrow:/^[]/i,short:/^(||||||)/i,abbreviated:/^(||||||)/i,wide:/^(||||||)/i},$6={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],wide:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],any:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i]},U6={narrow:/^(|| || | | | )/,any:/^(|| || | | | )/},B6={any:{am:/^/,pm:/^/,midnight:/ /,noon://,afternoon:/ /,morning:/ /,evening:/ /,night:/ /}},z6={ordinalNumber:iC({matchPattern:T6,parsePattern:R6,valueCallback:t=>parseInt(t,10)}),era:En({matchPatterns:O6,defaultMatchWidth:"wide",parsePatterns:D6,defaultParseWidth:"any"}),quarter:En({matchPatterns:A6,defaultMatchWidth:"wide",parsePatterns:M6,defaultParseWidth:"any",valueCallback:t=>t+1}),month:En({matchPatterns:I6,defaultMatchWidth:"wide",parsePatterns:L6,defaultParseWidth:"any"}),day:En({matchPatterns:F6,defaultMatchWidth:"wide",parsePatterns:$6,defaultParseWidth:"any"}),dayPeriod:En({matchPatterns:U6,defaultMatchWidth:"any",parsePatterns:B6,defaultParseWidth:"any"})},W6={code:"ar",formatDistance:p6,formatLong:y6,formatRelative:_6,localize:P6,match:z6,options:{weekStartsOn:6,firstWeekContainsDate:1}};var Pe=function(){return Pe=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Pe.apply(this,arguments)};function V6(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function mC(t,e,r){for(var n=0,s=e.length,o;n<s;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function Ic(t){return t.mode==="multiple"}function Lc(t){return t.mode==="range"}function Mh(t){return t.mode==="single"}var H6={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function q6(t,e){return In(t,"LLLL y",e)}function K6(t,e){return In(t,"d",e)}function G6(t,e){return In(t,"LLLL",e)}function Y6(t){return"".concat(t)}function Q6(t,e){return In(t,"cccccc",e)}function J6(t,e){return In(t,"yyyy",e)}var X6=Object.freeze({__proto__:null,formatCaption:q6,formatDay:K6,formatMonthCaption:G6,formatWeekNumber:Y6,formatWeekdayName:Q6,formatYearCaption:J6}),Z6=function(t,e,r){return In(t,"do MMMM (EEEE)",r)},e8=function(){return"Month: "},t8=function(){return"Go to next month"},r8=function(){return"Go to previous month"},n8=function(t,e){return In(t,"cccc",e)},s8=function(t){return"Week n. ".concat(t)},a8=function(){return"Year: "},o8=Object.freeze({__proto__:null,labelDay:Z6,labelMonthDropdown:e8,labelNext:t8,labelPrevious:r8,labelWeekNumber:s8,labelWeekday:n8,labelYearDropdown:a8});function i8(){var t="buttons",e=H6,r=lC,n={},s={},o=1,i={},l=new Date;return{captionLayout:t,classNames:e,formatters:X6,labels:o8,locale:r,modifiersClassNames:n,modifiers:s,numberOfMonths:o,styles:i,today:l,mode:"default"}}function l8(t){var e=t.fromYear,r=t.toYear,n=t.fromMonth,s=t.toMonth,o=t.fromDate,i=t.toDate;return n?o=_r(n):e&&(o=new Date(e,0,1)),s?i=Xv(s):r&&(i=new Date(r,11,31)),{fromDate:o?Oi(o):void 0,toDate:i?Oi(i):void 0}}var pC=f.createContext(void 0);function c8(t){var e,r=t.initialProps,n=i8(),s=l8(r),o=s.fromDate,i=s.toDate,l=(e=r.captionLayout)!==null&&e!==void 0?e:n.captionLayout;l!=="buttons"&&(!o||!i)&&(l="buttons");var c;(Mh(r)||Ic(r)||Lc(r))&&(c=r.onSelect);var u=Pe(Pe(Pe({},n),r),{captionLayout:l,classNames:Pe(Pe({},n.classNames),r.classNames),components:Pe({},r.components),formatters:Pe(Pe({},n.formatters),r.formatters),fromDate:o,labels:Pe(Pe({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:Pe(Pe({},n.modifiers),r.modifiers),modifiersClassNames:Pe(Pe({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:Pe(Pe({},n.styles),r.styles),toDate:i});return a.jsx(pC.Provider,{value:u,children:t.children})}function nt(){var t=f.useContext(pC);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function gC(t){var e=nt(),r=e.locale,n=e.classNames,s=e.styles,o=e.formatters.formatCaption;return a.jsx("div",{className:n.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:o(t.displayMonth,{locale:r})})}function u8(t){return a.jsx("svg",Pe({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:a.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function vC(t){var e,r,n=t.onChange,s=t.value,o=t.children,i=t.caption,l=t.className,c=t.style,u=nt(),d=(r=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&r!==void 0?r:u8;return a.jsxs("div",{className:l,style:c,children:[a.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),a.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:s,onChange:n,children:o}),a.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[i,a.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function d8(t){var e,r=nt(),n=r.fromDate,s=r.toDate,o=r.styles,i=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!n)return a.jsx(a.Fragment,{});if(!s)return a.jsx(a.Fragment,{});var h=[];if(f6(n,s))for(var m=_r(n),p=n.getMonth();p<=s.getMonth();p++)h.push(Vf(m,p));else for(var m=_r(new Date),p=0;p<=11;p++)h.push(Vf(m,p));var v=function(y){var w=Number(y.target.value),x=Vf(_r(t.displayMonth),w);t.onChange(x)},g=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:vC;return a.jsx(g,{name:"months","aria-label":d(),className:c.dropdown_month,style:o.dropdown_month,onChange:v,value:t.displayMonth.getMonth(),caption:l(t.displayMonth,{locale:i}),children:h.map(function(y){return a.jsx("option",{value:y.getMonth(),children:l(y,{locale:i})},y.getMonth())})})}function h8(t){var e,r=t.displayMonth,n=nt(),s=n.fromDate,o=n.toDate,i=n.locale,l=n.styles,c=n.classNames,u=n.components,d=n.formatters.formatYearCaption,h=n.labels.labelYearDropdown,m=[];if(!s)return a.jsx(a.Fragment,{});if(!o)return a.jsx(a.Fragment,{});for(var p=s.getFullYear(),v=o.getFullYear(),g=p;g<=v;g++)m.push(_0(aC(new Date),g));var y=function(x){var _=_0(_r(r),Number(x.target.value));t.onChange(_)},w=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:vC;return a.jsx(w,{name:"years","aria-label":h(),className:c.dropdown_year,style:l.dropdown_year,onChange:y,value:r.getFullYear(),caption:d(r,{locale:i}),children:m.map(function(x){return a.jsx("option",{value:x.getFullYear(),children:d(x,{locale:i})},x.getFullYear())})})}function f8(t,e){var r=f.useState(t),n=r[0],s=r[1],o=e===void 0?n:e;return[o,s]}function m8(t){var e=t.month,r=t.defaultMonth,n=t.today,s=e||r||n||new Date,o=t.toDate,i=t.fromDate,l=t.numberOfMonths,c=l===void 0?1:l;if(o&&oc(o,s)<0){var u=-1*(c-1);s=pn(o,u)}return i&&oc(s,i)<0&&(s=i),_r(s)}function p8(){var t=nt(),e=m8(t),r=f8(e,t.month),n=r[0],s=r[1],o=function(i){var l;if(!t.disableNavigation){var c=_r(i);s(c),(l=t.onMonthChange)===null||l===void 0||l.call(t,c)}};return[n,o]}function g8(t,e){for(var r=e.reverseMonths,n=e.numberOfMonths,s=_r(t),o=_r(pn(s,n)),i=oc(o,s),l=[],c=0;c<i;c++){var u=pn(s,c);l.push(u)}return r&&(l=l.reverse()),l}function v8(t,e){if(!e.disableNavigation){var r=e.toDate,n=e.pagedNavigation,s=e.numberOfMonths,o=s===void 0?1:s,i=n?o:1,l=_r(t);if(!r)return pn(l,i);var c=oc(r,t);if(!(c<o))return pn(l,i)}}function x8(t,e){if(!e.disableNavigation){var r=e.fromDate,n=e.pagedNavigation,s=e.numberOfMonths,o=s===void 0?1:s,i=n?o:1,l=_r(t);if(!r)return pn(l,-i);var c=oc(l,r);if(!(c<=0))return pn(l,-i)}}var xC=f.createContext(void 0);function y8(t){var e=nt(),r=p8(),n=r[0],s=r[1],o=g8(n,e),i=v8(n,e),l=x8(n,e),c=function(h){return o.some(function(m){return ex(h,m)})},u=function(h,m){c(h)||(m&&fC(h,m)?s(pn(h,1+e.numberOfMonths*-1)):s(h))},d={currentMonth:n,displayMonths:o,goToMonth:s,goToDate:u,previousMonth:l,nextMonth:i,isDateDisplayed:c};return a.jsx(xC.Provider,{value:d,children:t.children})}function Fc(){var t=f.useContext(xC);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function b0(t){var e,r=nt(),n=r.classNames,s=r.styles,o=r.components,i=Fc().goToMonth,l=function(d){i(pn(d,t.displayIndex?-t.displayIndex:0))},c=(e=o==null?void 0:o.CaptionLabel)!==null&&e!==void 0?e:gC,u=a.jsx(c,{id:t.id,displayMonth:t.displayMonth});return a.jsxs("div",{className:n.caption_dropdowns,style:s.caption_dropdowns,children:[a.jsx("div",{className:n.vhidden,children:u}),a.jsx(d8,{onChange:l,displayMonth:t.displayMonth}),a.jsx(h8,{onChange:l,displayMonth:t.displayMonth})]})}function w8(t){return a.jsx("svg",Pe({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:a.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function _8(t){return a.jsx("svg",Pe({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:a.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var $d=f.forwardRef(function(t,e){var r=nt(),n=r.classNames,s=r.styles,o=[n.button_reset,n.button];t.className&&o.push(t.className);var i=o.join(" "),l=Pe(Pe({},s.button_reset),s.button);return t.style&&Object.assign(l,t.style),a.jsx("button",Pe({},t,{ref:e,type:"button",className:i,style:l}))});function b8(t){var e,r,n=nt(),s=n.dir,o=n.locale,i=n.classNames,l=n.styles,c=n.labels,u=c.labelPrevious,d=c.labelNext,h=n.components;if(!t.nextMonth&&!t.previousMonth)return a.jsx(a.Fragment,{});var m=u(t.previousMonth,{locale:o}),p=[i.nav_button,i.nav_button_previous].join(" "),v=d(t.nextMonth,{locale:o}),g=[i.nav_button,i.nav_button_next].join(" "),y=(e=h==null?void 0:h.IconRight)!==null&&e!==void 0?e:_8,w=(r=h==null?void 0:h.IconLeft)!==null&&r!==void 0?r:w8;return a.jsxs("div",{className:i.nav,style:l.nav,children:[!t.hidePrevious&&a.jsx($d,{name:"previous-month","aria-label":m,className:p,style:l.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:s==="rtl"?a.jsx(y,{className:i.nav_icon,style:l.nav_icon}):a.jsx(w,{className:i.nav_icon,style:l.nav_icon})}),!t.hideNext&&a.jsx($d,{name:"next-month","aria-label":v,className:g,style:l.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:s==="rtl"?a.jsx(w,{className:i.nav_icon,style:l.nav_icon}):a.jsx(y,{className:i.nav_icon,style:l.nav_icon})})]})}function j0(t){var e=nt().numberOfMonths,r=Fc(),n=r.previousMonth,s=r.nextMonth,o=r.goToMonth,i=r.displayMonths,l=i.findIndex(function(v){return ex(t.displayMonth,v)}),c=l===0,u=l===i.length-1,d=e>1&&(c||!u),h=e>1&&(u||!c),m=function(){n&&o(n)},p=function(){s&&o(s)};return a.jsx(b8,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:h,nextMonth:s,previousMonth:n,onPreviousClick:m,onNextClick:p})}function j8(t){var e,r=nt(),n=r.classNames,s=r.disableNavigation,o=r.styles,i=r.captionLayout,l=r.components,c=(e=l==null?void 0:l.CaptionLabel)!==null&&e!==void 0?e:gC,u;return s?u=a.jsx(c,{id:t.id,displayMonth:t.displayMonth}):i==="dropdown"?u=a.jsx(b0,{displayMonth:t.displayMonth,id:t.id}):i==="dropdown-buttons"?u=a.jsxs(a.Fragment,{children:[a.jsx(b0,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),a.jsx(j0,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=a.jsxs(a.Fragment,{children:[a.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),a.jsx(j0,{displayMonth:t.displayMonth,id:t.id})]}),a.jsx("div",{className:n.caption,style:o.caption,children:u})}function S8(t){var e=nt(),r=e.footer,n=e.styles,s=e.classNames.tfoot;return r?a.jsx("tfoot",{className:s,style:n.tfoot,children:a.jsx("tr",{children:a.jsx("td",{colSpan:8,children:r})})}):a.jsx(a.Fragment,{})}function N8(t,e,r){for(var n=r?co(new Date):Bn(new Date,{locale:t,weekStartsOn:e}),s=[],o=0;o<7;o++){var i=sr(n,o);s.push(i)}return s}function k8(){var t=nt(),e=t.classNames,r=t.styles,n=t.showWeekNumber,s=t.locale,o=t.weekStartsOn,i=t.ISOWeek,l=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,u=N8(s,o,i);return a.jsxs("tr",{style:r.head_row,className:e.head_row,children:[n&&a.jsx("td",{style:r.head_cell,className:e.head_cell}),u.map(function(d,h){return a.jsx("th",{scope:"col",className:e.head_cell,style:r.head_cell,"aria-label":c(d,{locale:s}),children:l(d,{locale:s})},h)})]})}function C8(){var t,e=nt(),r=e.classNames,n=e.styles,s=e.components,o=(t=s==null?void 0:s.HeadRow)!==null&&t!==void 0?t:k8;return a.jsx("thead",{style:n.head,className:r.head,children:a.jsx(o,{})})}function E8(t){var e=nt(),r=e.locale,n=e.formatters.formatDay;return a.jsx(a.Fragment,{children:n(t.date,{locale:r})})}var tx=f.createContext(void 0);function P8(t){if(!Ic(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return a.jsx(tx.Provider,{value:e,children:t.children})}return a.jsx(T8,{initialProps:t.initialProps,children:t.children})}function T8(t){var e=t.initialProps,r=t.children,n=e.selected,s=e.min,o=e.max,i=function(u,d,h){var m,p;(m=e.onDayClick)===null||m===void 0||m.call(e,u,d,h);var v=!!(d.selected&&s&&(n==null?void 0:n.length)===s);if(!v){var g=!!(!d.selected&&o&&(n==null?void 0:n.length)===o);if(!g){var y=n?mC([],n):[];if(d.selected){var w=y.findIndex(function(x){return vr(u,x)});y.splice(w,1)}else y.push(u);(p=e.onSelect)===null||p===void 0||p.call(e,y,u,d,h)}}},l={disabled:[]};n&&l.disabled.push(function(u){var d=o&&n.length>o-1,h=n.some(function(m){return vr(m,u)});return!!(d&&!h)});var c={selected:n,onDayClick:i,modifiers:l};return a.jsx(tx.Provider,{value:c,children:r})}function rx(){var t=f.useContext(tx);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function R8(t,e){var r=e||{},n=r.from,s=r.to;return n&&s?vr(s,t)&&vr(n,t)?void 0:vr(s,t)?{from:s,to:void 0}:vr(n,t)?void 0:Wp(n,t)?{from:t,to:s}:{from:n,to:t}:s?Wp(t,s)?{from:s,to:t}:{from:t,to:s}:n?fC(t,n)?{from:t,to:n}:{from:n,to:t}:{from:t,to:void 0}}var nx=f.createContext(void 0);function O8(t){if(!Lc(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return a.jsx(nx.Provider,{value:e,children:t.children})}return a.jsx(D8,{initialProps:t.initialProps,children:t.children})}function D8(t){var e=t.initialProps,r=t.children,n=e.selected,s=n||{},o=s.from,i=s.to,l=e.min,c=e.max,u=function(p,v,g){var y,w;(y=e.onDayClick)===null||y===void 0||y.call(e,p,v,g);var x=R8(p,n);(w=e.onSelect)===null||w===void 0||w.call(e,x,p,v,g)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(o?(d.range_start=[o],i?(d.range_end=[i],vr(o,i)||(d.range_middle=[{after:o,before:i}])):d.range_end=[o]):i&&(d.range_start=[i],d.range_end=[i]),l&&(o&&!i&&d.disabled.push({after:Wf(o,l-1),before:sr(o,l-1)}),o&&i&&d.disabled.push({after:o,before:sr(o,l-1)}),!o&&i&&d.disabled.push({after:Wf(i,l-1),before:sr(i,l-1)})),c){if(o&&!i&&(d.disabled.push({before:sr(o,-c+1)}),d.disabled.push({after:sr(o,c-1)})),o&&i){var h=Rn(i,o)+1,m=c-h;d.disabled.push({before:Wf(o,m)}),d.disabled.push({after:sr(i,m)})}!o&&i&&(d.disabled.push({before:sr(i,-c+1)}),d.disabled.push({after:sr(i,c-1)}))}return a.jsx(nx.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:r})}function sx(){var t=f.useContext(nx);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function Bu(t){return Array.isArray(t)?mC([],t):t!==void 0?[t]:[]}function A8(t){var e={};return Object.entries(t).forEach(function(r){var n=r[0],s=r[1];e[n]=Bu(s)}),e}var gn;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(gn||(gn={}));var M8=gn.Selected,Hn=gn.Disabled,I8=gn.Hidden,L8=gn.Today,Hf=gn.RangeEnd,qf=gn.RangeMiddle,Kf=gn.RangeStart,F8=gn.Outside;function $8(t,e,r){var n,s=(n={},n[M8]=Bu(t.selected),n[Hn]=Bu(t.disabled),n[I8]=Bu(t.hidden),n[L8]=[t.today],n[Hf]=[],n[qf]=[],n[Kf]=[],n[F8]=[],n);return t.fromDate&&s[Hn].push({before:t.fromDate}),t.toDate&&s[Hn].push({after:t.toDate}),Ic(t)?s[Hn]=s[Hn].concat(e.modifiers[Hn]):Lc(t)&&(s[Hn]=s[Hn].concat(r.modifiers[Hn]),s[Kf]=r.modifiers[Kf],s[qf]=r.modifiers[qf],s[Hf]=r.modifiers[Hf]),s}var yC=f.createContext(void 0);function U8(t){var e=nt(),r=rx(),n=sx(),s=$8(e,r,n),o=A8(e.modifiers),i=Pe(Pe({},s),o);return a.jsx(yC.Provider,{value:i,children:t.children})}function wC(){var t=f.useContext(yC);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function B8(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function z8(t){return!!(t&&typeof t=="object"&&"from"in t)}function W8(t){return!!(t&&typeof t=="object"&&"after"in t)}function V8(t){return!!(t&&typeof t=="object"&&"before"in t)}function H8(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function q8(t,e){var r,n=e.from,s=e.to;if(n&&s){var o=Rn(s,n)<0;o&&(r=[s,n],n=r[0],s=r[1]);var i=Rn(t,n)>=0&&Rn(s,t)>=0;return i}return s?vr(s,t):n?vr(n,t):!1}function K8(t){return Jv(t)}function G8(t){return Array.isArray(t)&&t.every(Jv)}function Y8(t,e){return e.some(function(r){if(typeof r=="boolean")return r;if(K8(r))return vr(t,r);if(G8(r))return r.includes(t);if(z8(r))return q8(t,r);if(H8(r))return r.dayOfWeek.includes(t.getDay());if(B8(r)){var n=Rn(r.before,t),s=Rn(r.after,t),o=n>0,i=s<0,l=Wp(r.before,r.after);return l?i&&o:o||i}return W8(r)?Rn(t,r.after)>0:V8(r)?Rn(r.before,t)>0:typeof r=="function"?r(t):!1})}function ax(t,e,r){var n=Object.keys(e).reduce(function(o,i){var l=e[i];return Y8(t,l)&&o.push(i),o},[]),s={};return n.forEach(function(o){return s[o]=!0}),r&&!ex(t,r)&&(s.outside=!0),s}function Q8(t,e){for(var r=_r(t[0]),n=Xv(t[t.length-1]),s,o,i=r;i<=n;){var l=ax(i,e),c=!l.disabled&&!l.hidden;if(!c){i=sr(i,1);continue}if(l.selected)return i;l.today&&!o&&(o=i),s||(s=i),i=sr(i,1)}return o||s}var J8=365;function _C(t,e){var r=e.moveBy,n=e.direction,s=e.context,o=e.modifiers,i=e.retry,l=i===void 0?{count:0,lastFocused:t}:i,c=s.weekStartsOn,u=s.fromDate,d=s.toDate,h=s.locale,m={day:sr,week:zp,month:pn,year:u5,startOfWeek:function(y){return s.ISOWeek?co(y):Bn(y,{locale:h,weekStartsOn:c})},endOfWeek:function(y){return s.ISOWeek?oC(y):Zv(y,{locale:h,weekStartsOn:c})}},p=m[r](t,n==="after"?1:-1);n==="before"&&u?p=d5([u,p]):n==="after"&&d&&(p=h5([d,p]));var v=!0;if(o){var g=ax(p,o);v=!g.disabled&&!g.hidden}return v?p:l.count>J8?l.lastFocused:_C(p,{moveBy:r,direction:n,context:s,modifiers:o,retry:Pe(Pe({},l),{count:l.count+1})})}var bC=f.createContext(void 0);function X8(t){var e=Fc(),r=wC(),n=f.useState(),s=n[0],o=n[1],i=f.useState(),l=i[0],c=i[1],u=Q8(e.displayMonths,r),d=s??(l&&e.isDateDisplayed(l))?l:u,h=function(){c(s),o(void 0)},m=function(y){o(y)},p=nt(),v=function(y,w){if(s){var x=_C(s,{moveBy:y,direction:w,context:p,modifiers:r});vr(s,x)||(e.goToDate(x,s),m(x))}},g={focusedDay:s,focusTarget:d,blur:h,focus:m,focusDayAfter:function(){return v("day","after")},focusDayBefore:function(){return v("day","before")},focusWeekAfter:function(){return v("week","after")},focusWeekBefore:function(){return v("week","before")},focusMonthBefore:function(){return v("month","before")},focusMonthAfter:function(){return v("month","after")},focusYearBefore:function(){return v("year","before")},focusYearAfter:function(){return v("year","after")},focusStartOfWeek:function(){return v("startOfWeek","before")},focusEndOfWeek:function(){return v("endOfWeek","after")}};return a.jsx(bC.Provider,{value:g,children:t.children})}function ox(){var t=f.useContext(bC);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function Z8(t,e){var r=wC(),n=ax(t,r,e);return n}var ix=f.createContext(void 0);function eB(t){if(!Mh(t.initialProps)){var e={selected:void 0};return a.jsx(ix.Provider,{value:e,children:t.children})}return a.jsx(tB,{initialProps:t.initialProps,children:t.children})}function tB(t){var e=t.initialProps,r=t.children,n=function(o,i,l){var c,u,d;if((c=e.onDayClick)===null||c===void 0||c.call(e,o,i,l),i.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,o,i,l);return}(d=e.onSelect)===null||d===void 0||d.call(e,o,o,i,l)},s={selected:e.selected,onDayClick:n};return a.jsx(ix.Provider,{value:s,children:r})}function jC(){var t=f.useContext(ix);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function rB(t,e){var r=nt(),n=jC(),s=rx(),o=sx(),i=ox(),l=i.focusDayAfter,c=i.focusDayBefore,u=i.focusWeekAfter,d=i.focusWeekBefore,h=i.blur,m=i.focus,p=i.focusMonthBefore,v=i.focusMonthAfter,g=i.focusYearBefore,y=i.focusYearAfter,w=i.focusStartOfWeek,x=i.focusEndOfWeek,_=function(I){var N,F,q,A;Mh(r)?(N=n.onDayClick)===null||N===void 0||N.call(n,t,e,I):Ic(r)?(F=s.onDayClick)===null||F===void 0||F.call(s,t,e,I):Lc(r)?(q=o.onDayClick)===null||q===void 0||q.call(o,t,e,I):(A=r.onDayClick)===null||A===void 0||A.call(r,t,e,I)},b=function(I){var N;m(t),(N=r.onDayFocus)===null||N===void 0||N.call(r,t,e,I)},j=function(I){var N;h(),(N=r.onDayBlur)===null||N===void 0||N.call(r,t,e,I)},E=function(I){var N;(N=r.onDayMouseEnter)===null||N===void 0||N.call(r,t,e,I)},k=function(I){var N;(N=r.onDayMouseLeave)===null||N===void 0||N.call(r,t,e,I)},P=function(I){var N;(N=r.onDayPointerEnter)===null||N===void 0||N.call(r,t,e,I)},T=function(I){var N;(N=r.onDayPointerLeave)===null||N===void 0||N.call(r,t,e,I)},C=function(I){var N;(N=r.onDayTouchCancel)===null||N===void 0||N.call(r,t,e,I)},L=function(I){var N;(N=r.onDayTouchEnd)===null||N===void 0||N.call(r,t,e,I)},O=function(I){var N;(N=r.onDayTouchMove)===null||N===void 0||N.call(r,t,e,I)},J=function(I){var N;(N=r.onDayTouchStart)===null||N===void 0||N.call(r,t,e,I)},W=function(I){var N;(N=r.onDayKeyUp)===null||N===void 0||N.call(r,t,e,I)},U=function(I){var N;switch(I.key){case"ArrowLeft":I.preventDefault(),I.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":I.preventDefault(),I.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":I.preventDefault(),I.stopPropagation(),u();break;case"ArrowUp":I.preventDefault(),I.stopPropagation(),d();break;case"PageUp":I.preventDefault(),I.stopPropagation(),I.shiftKey?g():p();break;case"PageDown":I.preventDefault(),I.stopPropagation(),I.shiftKey?y():v();break;case"Home":I.preventDefault(),I.stopPropagation(),w();break;case"End":I.preventDefault(),I.stopPropagation(),x();break}(N=r.onDayKeyDown)===null||N===void 0||N.call(r,t,e,I)},R={onClick:_,onFocus:b,onBlur:j,onKeyDown:U,onKeyUp:W,onMouseEnter:E,onMouseLeave:k,onPointerEnter:P,onPointerLeave:T,onTouchCancel:C,onTouchEnd:L,onTouchMove:O,onTouchStart:J};return R}function nB(){var t=nt(),e=jC(),r=rx(),n=sx(),s=Mh(t)?e.selected:Ic(t)?r.selected:Lc(t)?n.selected:void 0;return s}function sB(t){return Object.values(gn).includes(t)}function aB(t,e){var r=[t.classNames.day];return Object.keys(e).forEach(function(n){var s=t.modifiersClassNames[n];if(s)r.push(s);else if(sB(n)){var o=t.classNames["day_".concat(n)];o&&r.push(o)}}),r}function oB(t,e){var r=Pe({},t.styles.day);return Object.keys(e).forEach(function(n){var s;r=Pe(Pe({},r),(s=t.modifiersStyles)===null||s===void 0?void 0:s[n])}),r}function iB(t,e,r){var n,s,o,i=nt(),l=ox(),c=Z8(t,e),u=rB(t,c),d=nB(),h=!!(i.onDayClick||i.mode!=="default");f.useEffect(function(){var E;c.outside||l.focusedDay&&h&&vr(l.focusedDay,t)&&((E=r.current)===null||E===void 0||E.focus())},[l.focusedDay,t,r,h,c.outside]);var m=aB(i,c).join(" "),p=oB(i,c),v=!!(c.outside&&!i.showOutsideDays||c.hidden),g=(o=(s=i.components)===null||s===void 0?void 0:s.DayContent)!==null&&o!==void 0?o:E8,y=a.jsx(g,{date:t,displayMonth:e,activeModifiers:c}),w={style:p,className:m,children:y,role:"gridcell"},x=l.focusTarget&&vr(l.focusTarget,t)&&!c.outside,_=l.focusedDay&&vr(l.focusedDay,t),b=Pe(Pe(Pe({},w),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=_||x?0:-1,n)),u),j={isButton:h,isHidden:v,activeModifiers:c,selectedDays:d,buttonProps:b,divProps:w};return j}function lB(t){var e=f.useRef(null),r=iB(t.date,t.displayMonth,e);return r.isHidden?a.jsx("div",{role:"gridcell"}):r.isButton?a.jsx($d,Pe({name:"day",ref:e},r.buttonProps)):a.jsx("div",Pe({},r.divProps))}function cB(t){var e=t.number,r=t.dates,n=nt(),s=n.onWeekNumberClick,o=n.styles,i=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(e),{locale:l});if(!s)return a.jsx("span",{className:i.weeknumber,style:o.weeknumber,children:d});var h=c(Number(e),{locale:l}),m=function(p){s(e,r,p)};return a.jsx($d,{name:"week-number","aria-label":h,className:i.weeknumber,style:o.weeknumber,onClick:m,children:d})}function uB(t){var e,r,n=nt(),s=n.styles,o=n.classNames,i=n.showWeekNumber,l=n.components,c=(e=l==null?void 0:l.Day)!==null&&e!==void 0?e:lB,u=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:cB,d;return i&&(d=a.jsx("td",{className:o.cell,style:s.cell,children:a.jsx(u,{number:t.weekNumber,dates:t.dates})})),a.jsxs("tr",{className:o.row,style:s.row,children:[d,t.dates.map(function(h){return a.jsx("td",{className:o.cell,style:s.cell,role:"presentation",children:a.jsx(c,{displayMonth:t.displayMonth,date:h})},u6(h))})]})}function S0(t,e,r){for(var n=r!=null&&r.ISOWeek?oC(e):Zv(e,r),s=r!=null&&r.ISOWeek?co(t):Bn(t,r),o=Rn(n,s),i=[],l=0;l<=o;l++)i.push(sr(s,l));var c=i.reduce(function(u,d){var h=r!=null&&r.ISOWeek?cC(d):dC(d,r),m=u.find(function(p){return p.weekNumber===h});return m?(m.dates.push(d),u):(u.push({weekNumber:h,dates:[d]}),u)},[]);return c}function dB(t,e){var r=S0(_r(t),Xv(t),e);if(e!=null&&e.useFixedWeeks){var n=h6(t,e);if(n<6){var s=r[r.length-1],o=s.dates[s.dates.length-1],i=zp(o,6-n),l=S0(zp(o,1),i,e);r.push.apply(r,l)}}return r}function hB(t){var e,r,n,s=nt(),o=s.locale,i=s.classNames,l=s.styles,c=s.hideHead,u=s.fixedWeeks,d=s.components,h=s.weekStartsOn,m=s.firstWeekContainsDate,p=s.ISOWeek,v=dB(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:p,locale:o,weekStartsOn:h,firstWeekContainsDate:m}),g=(e=d==null?void 0:d.Head)!==null&&e!==void 0?e:C8,y=(r=d==null?void 0:d.Row)!==null&&r!==void 0?r:uB,w=(n=d==null?void 0:d.Footer)!==null&&n!==void 0?n:S8;return a.jsxs("table",{id:t.id,className:i.table,style:l.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&a.jsx(g,{}),a.jsx("tbody",{className:i.tbody,style:l.tbody,children:v.map(function(x){return a.jsx(y,{displayMonth:t.displayMonth,dates:x.dates,weekNumber:x.weekNumber},x.weekNumber)})}),a.jsx(w,{displayMonth:t.displayMonth})]})}function fB(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var mB=fB()?f.useLayoutEffect:f.useEffect,Gf=!1,pB=0;function N0(){return"react-day-picker-".concat(++pB)}function gB(t){var e,r=t??(Gf?N0():null),n=f.useState(r),s=n[0],o=n[1];return mB(function(){s===null&&o(N0())},[]),f.useEffect(function(){Gf===!1&&(Gf=!0)},[]),(e=t??s)!==null&&e!==void 0?e:void 0}function vB(t){var e,r,n=nt(),s=n.dir,o=n.classNames,i=n.styles,l=n.components,c=Fc().displayMonths,u=gB(n.id?"".concat(n.id,"-").concat(t.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(t.displayIndex):void 0,h=[o.month],m=i.month,p=t.displayIndex===0,v=t.displayIndex===c.length-1,g=!p&&!v;s==="rtl"&&(e=[p,v],v=e[0],p=e[1]),p&&(h.push(o.caption_start),m=Pe(Pe({},m),i.caption_start)),v&&(h.push(o.caption_end),m=Pe(Pe({},m),i.caption_end)),g&&(h.push(o.caption_between),m=Pe(Pe({},m),i.caption_between));var y=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:j8;return a.jsxs("div",{className:h.join(" "),style:m,children:[a.jsx(y,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),a.jsx(hB,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function xB(t){var e=nt(),r=e.classNames,n=e.styles;return a.jsx("div",{className:r.months,style:n.months,children:t.children})}function yB(t){var e,r,n=t.initialProps,s=nt(),o=ox(),i=Fc(),l=f.useState(!1),c=l[0],u=l[1];f.useEffect(function(){s.initialFocus&&o.focusTarget&&(c||(o.focus(o.focusTarget),u(!0)))},[s.initialFocus,c,o.focus,o.focusTarget,o]);var d=[s.classNames.root,s.className];s.numberOfMonths>1&&d.push(s.classNames.multiple_months),s.showWeekNumber&&d.push(s.classNames.with_weeknumber);var h=Pe(Pe({},s.styles.root),s.style),m=Object.keys(n).filter(function(v){return v.startsWith("data-")}).reduce(function(v,g){var y;return Pe(Pe({},v),(y={},y[g]=n[g],y))},{}),p=(r=(e=n.components)===null||e===void 0?void 0:e.Months)!==null&&r!==void 0?r:xB;return a.jsx("div",Pe({className:d.join(" "),style:h,dir:s.dir,id:s.id,nonce:n.nonce,title:n.title,lang:n.lang},m,{children:a.jsx(p,{children:i.displayMonths.map(function(v,g){return a.jsx(vB,{displayIndex:g,displayMonth:v},g)})})}))}function wB(t){var e=t.children,r=V6(t,["children"]);return a.jsx(c8,{initialProps:r,children:a.jsx(y8,{children:a.jsx(eB,{initialProps:r,children:a.jsx(P8,{initialProps:r,children:a.jsx(O8,{initialProps:r,children:a.jsx(U8,{children:a.jsx(X8,{children:e})})})})})})})}function _B(t){return a.jsx(wB,Pe({},t,{children:a.jsx(yB,{initialProps:t})}))}function SC({className:t,classNames:e,showOutsideDays:r=!0,...n}){return a.jsx(_B,{showOutsideDays:r,className:X("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:X(tc({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:X(tc({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...s})=>a.jsx(aL,{className:"h-4 w-4"}),IconRight:({...s})=>a.jsx(cv,{className:"h-4 w-4"})},...n})}SC.displayName="Calendar";function lx({onSearch:t,onFilterStatus:e,onFilterAssignee:r,onFilterDateRange:n,users:s=[],statuses:o=[],placeholder:i,className:l}){const{t:c}=lt(),{currentLanguage:u}=xa(),[d,h]=f.useState(""),[m,p]=f.useState({from:void 0,to:void 0}),v=u==="ar"?W6:void 0;f.useEffect(()=>{const w=setTimeout(()=>{t(d)},300);return()=>clearTimeout(w)},[d,t]);const g=w=>{p(w),n&&n(w)},y=()=>{h(""),p({from:void 0,to:void 0}),e&&e("all"),r&&r("all"),n&&n({from:void 0,to:void 0})};return a.jsxs("div",{className:X("flex flex-col sm:flex-row gap-3 mb-6",l),children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(so,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground rtl:right-2.5 rtl:left-auto"}),a.jsx(Se,{placeholder:i||c("common.search","Search..."),value:d,onChange:w=>h(w.target.value),className:"pl-9 rtl:pr-9 rtl:pl-3"})]}),a.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 sm:pb-0",children:[e&&o.length>0&&a.jsxs(qe,{onValueChange:e,children:[a.jsxs(We,{className:"w-[140px]",children:[a.jsx(hL,{className:"mr-2 h-4 w-4"}),a.jsx(Ke,{placeholder:c("common.status","Status")})]}),a.jsxs(Ve,{children:[a.jsx(ae,{value:"all",children:c("common.all","All")}),o.map(w=>a.jsx(ae,{value:w.value,children:w.label},w.value))]})]}),r&&s.length>0&&a.jsxs(qe,{onValueChange:r,children:[a.jsxs(We,{className:"w-[140px]",children:[a.jsx(bB,{className:"mr-2 h-4 w-4"}),a.jsx(Ke,{placeholder:c("common.assignee","Assignee")})]}),a.jsxs(Ve,{children:[a.jsx(ae,{value:"all",children:c("common.all","All")}),s.filter(w=>["employee","admin","manager","team_leader"].includes(w.user_role)).map(w=>a.jsx(ae,{value:w.user_id.toString(),children:K(w,"user_name")},w.user_id))]})]}),n&&a.jsxs(a5,{children:[a.jsx(o5,{asChild:!0,children:a.jsxs(G,{variant:"outline",className:X("w-[240px] justify-start text-left font-normal",!m.from&&"text-muted-foreground"),children:[a.jsx(yc,{className:"mr-2 h-4 w-4"}),m.from?m.to?a.jsxs(a.Fragment,{children:[In(m.from,"LLL dd, y",{locale:v})," -"," ",In(m.to,"LLL dd, y",{locale:v})]}):In(m.from,"LLL dd, y",{locale:v}):a.jsx("span",{children:c("common.pickDate","Pick a date")})]})}),a.jsx(nC,{className:"w-auto p-0",align:"start",children:a.jsx(SC,{initialFocus:!0,mode:"range",defaultMonth:m.from,selected:m,onSelect:g,numberOfMonths:2})})]}),a.jsx(G,{variant:"ghost",size:"icon",onClick:y,title:c("common.clearFilters","Clear filters"),children:a.jsx(hh,{className:"h-4 w-4"})})]})]})}function bB(t){return a.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}const Yf=1024;function vo(){const[t,e]=f.useState(void 0);return f.useEffect(()=>{const r=window.matchMedia(`(max-width: ${Yf-1}px)`),n=()=>{e(window.innerWidth<Yf)};return r.addEventListener("change",n),e(window.innerWidth<Yf),()=>r.removeEventListener("change",n)},[]),!!t}var NC="AlertDialog",[jB,Gz]=br(NC,[_k]),us=_k(),kC=t=>{const{__scopeAlertDialog:e,...r}=t,n=us(e);return a.jsx(Bv,{...n,...r,modal:!0})};kC.displayName=NC;var SB="AlertDialogTrigger",CC=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=us(r);return a.jsx(zv,{...s,...n,ref:e})});CC.displayName=SB;var NB="AlertDialogPortal",EC=t=>{const{__scopeAlertDialog:e,...r}=t,n=us(e);return a.jsx(Wv,{...n,...r})};EC.displayName=NB;var kB="AlertDialogOverlay",PC=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=us(r);return a.jsx(Pc,{...s,...n,ref:e})});PC.displayName=kB;var ai="AlertDialogContent",[CB,EB]=jB(ai),PB=iI("AlertDialogContent"),TC=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,children:n,...s}=t,o=us(r),i=f.useRef(null),l=Ae(e,i),c=f.useRef(null);return a.jsx(wU,{contentName:ai,titleName:RC,docsSlug:"alert-dialog",children:a.jsx(CB,{scope:r,cancelRef:c,children:a.jsxs(Tc,{role:"alertdialog",...o,...s,ref:l,onOpenAutoFocus:ie(s.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[a.jsx(PB,{children:n}),a.jsx(RB,{contentRef:i})]})})})});TC.displayName=ai;var RC="AlertDialogTitle",OC=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=us(r);return a.jsx(Rc,{...s,...n,ref:e})});OC.displayName=RC;var DC="AlertDialogDescription",AC=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=us(r);return a.jsx(Oc,{...s,...n,ref:e})});AC.displayName=DC;var TB="AlertDialogAction",MC=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=us(r);return a.jsx(Eh,{...s,...n,ref:e})});MC.displayName=TB;var IC="AlertDialogCancel",LC=f.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,{cancelRef:s}=EB(IC,r),o=us(r),i=Ae(e,s);return a.jsx(Eh,{...o,...n,ref:i})});LC.displayName=IC;var RB=({contentRef:t})=>{const e=`\`${ai}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ai}\` by passing a \`${DC}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ai}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return f.useEffect(()=>{var n;document.getElementById((n=t.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},OB=kC,DB=CC,AB=EC,FC=PC,$C=TC,UC=MC,BC=LC,zC=OC,WC=AC;const ba=OB,$c=DB,MB=AB,VC=f.forwardRef(({className:t,...e},r)=>a.jsx(FC,{className:X("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:r}));VC.displayName=FC.displayName;const ds=f.forwardRef(({className:t,...e},r)=>a.jsxs(MB,{children:[a.jsx(VC,{}),a.jsx($C,{ref:r,className:X("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));ds.displayName=$C.displayName;const hs=({className:t,...e})=>a.jsx("div",{className:X("flex flex-col space-y-2 text-center sm:text-left",t),...e});hs.displayName="AlertDialogHeader";const fs=({className:t,...e})=>a.jsx("div",{className:X("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});fs.displayName="AlertDialogFooter";const ms=f.forwardRef(({className:t,...e},r)=>a.jsx(zC,{ref:r,className:X("text-lg font-semibold",t),...e}));ms.displayName=zC.displayName;const ps=f.forwardRef(({className:t,...e},r)=>a.jsx(WC,{ref:r,className:X("text-sm text-muted-foreground",t),...e}));ps.displayName=WC.displayName;const gs=f.forwardRef(({className:t,...e},r)=>a.jsx(UC,{ref:r,className:X(tc(),t),...e}));gs.displayName=UC.displayName;const vs=f.forwardRef(({className:t,...e},r)=>a.jsx(BC,{ref:r,className:X(tc({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));vs.displayName=BC.displayName;const Hr=f.forwardRef(({className:t,...e},r)=>a.jsx("textarea",{className:X("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));Hr.displayName="Textarea";function cx({stages:t,currentStageId:e,onStageChange:r,children:n}){const s=vo(),o=f.useRef(null),i=t.find(l=>l.id===e)??t[0];return f.useEffect(()=>{s&&o.current&&o.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},[i==null?void 0:i.id,s]),s?a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsx("div",{className:"border-b bg-background/95 backdrop-blur sticky top-0 z-20 shadow-sm",children:a.jsx("div",{className:"w-full overflow-x-auto scrollbar-hide",dir:cn()?"ltr":"rtl",children:a.jsx("div",{className:"flex gap-2 p-3 min-w-max rtl:flex-row-reverse",children:[...t].sort((l,c)=>(cn(),l.id-c.id)).map(l=>{const c=l.id===i.id;return a.jsxs("button",{ref:c?o:null,onClick:()=>r(l.id),className:X("inline-flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all font-medium text-sm border-2 flex-shrink-0",c?"bg-primary text-primary-foreground shadow-md border-primary":"bg-card text-muted-foreground hover:bg-accent hover:text-accent-foreground border-border"),children:[a.jsx("span",{className:"truncate max-w-[140px]",children:l.name}),a.jsx(ze,{variant:"secondary",className:X("h-5 min-w-5 px-1.5 text-xs font-semibold",c?"bg-primary-foreground/20 text-primary-foreground border-primary-foreground/30":"bg-muted"),children:l.count})]},l.id)})})})}),a.jsx("div",{className:"flex-1 overflow-auto scrollbar-hide",children:a.jsx("div",{className:"p-2",children:n})})]}):a.jsx(a.Fragment,{children:n})}function IB({lead:t,client:e,creator:r,assignedUser:n,userRole:s,users:o=[],onDelete:i,onAssign:l,onClick:c,onDragStart:u,isDragging:d=!1}){const{t:h}=lt(),m=vo(),p=v=>v?new Date(v).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):h("leads.unknown");return a.jsxs(ve,{className:X("group relative hover:shadow-lg transition-all duration-200 cursor-pointer",m?"w-full border-l-4 border-l-blue-500 rtl:border-l-0 rtl:border-r-4 rtl:border-r-blue-500":"w-[280px] sm:w-[300px]",d&&"opacity-50 rotate-2 scale-105"),onClick:c,draggable:!!u,onDragStart:v=>{u&&(v.dataTransfer.effectAllowed="move",v.dataTransfer.setData("text/plain",t.lead_id.toString()),u(t.lead_id))},children:[a.jsx(Me,{className:"pb-3 px-4 pt-4",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-base mb-1 truncate group-hover:text-primary transition-colors",children:K(t,"lead_name")}),K(t,"lead_description")&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:K(t,"lead_description")})]}),i&&a.jsxs(ba,{children:[a.jsx($c,{asChild:!0,onClick:v=>v.stopPropagation(),children:a.jsx(G,{variant:"ghost",size:"sm",className:X("h-8 w-8 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10",m?"opacity-100":"opacity-0 group-hover:opacity-100 transition-opacity"),children:a.jsx(zr,{className:"h-4 w-4"})})}),a.jsxs(ds,{onClick:v=>v.stopPropagation(),children:[a.jsxs(hs,{children:[a.jsx(ms,{children:h("leads.deleteLead")}),a.jsx(ps,{children:h("leads.deleteConfirmation",{name:K(t,"lead_name")})})]}),a.jsxs(fs,{children:[a.jsx(vs,{children:h("buttons.cancel")}),a.jsx(gs,{onClick:v=>{v.stopPropagation(),i(t.lead_id)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:h("buttons.delete")})]})]})]})]})}),a.jsxs(_e,{className:"px-4 pb-4 space-y-3",children:[e&&a.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md bg-muted/50",children:[a.jsx(uh,{className:"h-4 w-4 text-primary flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:h("leads.client")}),a.jsx("p",{className:"text-sm font-medium truncate",children:K(e,"user_name")})]})]}),(s==="admin"||s==="manager")&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r&&a.jsxs("div",{className:"flex items-start gap-1.5",children:[a.jsx(ia,{className:"h-3.5 w-3.5 text-muted-foreground mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-[10px] text-muted-foreground",children:h("leads.createdBy")}),a.jsx("p",{className:"text-xs font-medium truncate",children:K(r,"user_name")})]})]}),a.jsxs("div",{className:"flex items-start gap-1.5",children:[a.jsx(ia,{className:"h-3.5 w-3.5 text-muted-foreground mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-[10px] text-muted-foreground",children:h("leads.assignedTo")}),a.jsx("p",{className:"text-xs font-medium truncate",children:n?K(n,"user_name"):h("common.all","Unassigned")})]})]})]}),a.jsx("div",{className:"pt-1",children:a.jsxs(qe,{value:t.assigned_to||"unassigned",onValueChange:v=>l&&l(t.lead_id,v==="unassigned"?"":v),children:[a.jsx(We,{className:"h-7 text-xs",children:a.jsx(Ke,{placeholder:h("leads.selectAssignee","Select assignee")})}),a.jsxs(Ve,{children:[a.jsx(ae,{value:"unassigned",children:h("common.all","Unassigned")}),o.filter(v=>["employee","admin","manager","team_leader"].includes(v.user_role)&&v.auth_user_id).map(v=>a.jsx(ae,{value:v.auth_user_id,children:K(v,"user_name")},v.user_id))]})]})})]}),a.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[a.jsx(yc,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:p(t.created_date)})]}),a.jsx(ze,{variant:"secondary",className:"text-xs",children:h("leads.lead")})]})]})]})}function LB(){var et,ct,Mt;vn();const{hasRole:t,user:e}=bt(),r=vo(),{t:n}=lt(),[s,o]=f.useState([]),[i,l]=f.useState([]),[c,u]=f.useState([]),[d,h]=f.useState([]),[m,p]=f.useState(!0);f.useState(!1),f.useState("");const[v,g]=f.useState(null),[y,w]=f.useState(""),[x,_]=f.useState(null),[b,j]=f.useState(null),[E,k]=f.useState(!1),[P,T]=f.useState(null),[C,L]=f.useState("kanban"),[O,J]=f.useState(""),[W,U]=f.useState("all"),[R,I]=f.useState("all"),[N,F]=f.useState({from:void 0,to:void 0}),q=f.useMemo(()=>s.filter(B=>{const he=(B.lead_name||"").toLowerCase().includes(O.toLowerCase())||(B.lead_description||"").toLowerCase().includes(O.toLowerCase())||(B.client_name||"").toLowerCase().includes(O.toLowerCase()),V=R==="all"||B.assigned_to&&B.assigned_to===R;let ne=!0;if(N.from&&B.created_date){const ke=new Date(B.created_date),se=new Date(N.from);se.setHours(0,0,0,0);const Le=new Date(ke);if(Le.setHours(0,0,0,0),ne=Le>=se,ne&&N.to){const It=new Date(N.to);It.setHours(23,59,59,999),ne=Le<=It}}else N.from&&!B.created_date&&(ne=!1);return he&&V&&ne}),[s,O,W,R,N]),[A,Q]=f.useState({lead_name:"",lead_description:"",client_name:"",client_user_id:"",stage:"1",assigned_to:""});f.useEffect(()=>{ye()},[]),f.useEffect(()=>{if(d.length>0&&P===null){const B=d.find(he=>he.stage_id===1);B&&T(B.stage_id)}},[d,P]);const ye=async()=>{try{p(!0);const[B,he,V,ne]=await Promise.all([Da.getAll(),Vr.getAll(),qv.getAll(),gr.getByType("leads")]);console.log("[Leads] Loaded data:",{leads:B.length,clients:V.length,users:he.length,stages:ne.length}),console.log("[Leads] Leads data:",B),console.log("[Leads] Stages data:",ne),o(B),l(V),u(he),h(ne)}catch(B){console.error("Failed to load data:",B)}finally{p(!1)}},xe=async B=>{if(y.trim())try{await gr.update(B,{stage_name:y.trim()}),h(d.map(he=>he.stage_id===B?{...he,stage_name:y.trim()}:he)),g(null),w("")}catch(he){console.error("Failed to update stage:",he)}},Ie=async B=>{if(s.filter(V=>V.stage===B).length>0){_(B);return}try{await gr.delete(B),h(d.filter(V=>V.stage_id!==B))}catch(V){console.error("Failed to delete stage:",V)}},be=async()=>{if(x)try{await gr.delete(x),h(d.filter(B=>B.stage_id!==x)),_(null),ye()}catch(B){console.error("Failed to delete stage:",B)}},le=B=>{j(B)},Ne=B=>{B.preventDefault(),B.dataTransfer.dropEffect="move"},Re=async B=>{if(!b)return;const he=s.find(V=>V.lead_id===b);if(he&&he.stage!==B)try{await Da.update(b,{stage:B}),o(s.map(V=>V.lead_id===b?{...V,stage:B}:V))}catch(V){console.error("Failed to update lead stage:",V)}j(null)},z=async B=>{try{await Da.delete(B),o(s.filter(he=>he.lead_id!==B))}catch(he){console.error("Failed to delete lead:",he)}},re=async(B,he)=>{const V=he||null,ne=V?new Date().toISOString():null,ke=s.find(se=>se.lead_id===B);if(ke){o(s.map(se=>se.lead_id===B?{...se,assigned_to:V,assigned_at:ne}:se));try{await Da.update(B,{assigned_to:V,assigned_at:ne})}catch(se){console.error("Failed to assign lead:",se),o(s.map(Le=>Le.lead_id===B?{...Le,assigned_to:ke.assigned_to,assigned_at:ke.assigned_at}:Le))}}},H=B=>{Q(he=>({...he,stage:B.toString()})),k(!0)},de=async()=>{if(A.lead_name.trim())try{const B=A.assigned_to&&A.assigned_to!=="unassigned"?A.assigned_to:null,he=B?new Date().toISOString():null,V=hn({lead_name:A.lead_name.trim(),lead_description:A.lead_description.trim()||null,client_name:A.client_name.trim()||null,client_user_id:A.client_user_id||null,created_by:(e==null?void 0:e.id)||null,stage:parseInt(A.stage),assigned_to:B,assigned_at:he},{lead_name:"lead_name",lead_description:"lead_description",client_name:"client_name"}),ne=await Da.create(V);o([...s,ne]),Q({lead_name:"",lead_description:"",client_name:"",client_user_id:"",stage:"1",assigned_to:""}),k(!1)}catch(B){console.error("Failed to create lead:",B)}},Oe=d.filter(B=>B.stage_type==="leads").sort((B,he)=>{const V=B.stager_order_index??0,ne=he.stager_order_index??0;return cn()?ne-V:V-ne}),He=Oe.map(B=>({id:B.stage_id,name:K(B,"stage_name"),color:B.color,count:q.filter(he=>he.stage===B.stage_id).length}));return m?a.jsx("div",{className:"flex items-center justify-center h-full py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):a.jsxs("div",{className:"h-full flex flex-col space-y-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n("leads.title")}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"bg-muted p-1 rounded-lg flex items-center gap-1",children:[a.jsx(G,{variant:C==="kanban"?"default":"ghost",size:"sm",onClick:()=>L("kanban"),className:"h-8 w-8 p-0","data-active":C==="kanban",children:a.jsx(uv,{className:"h-4 w-4"})}),a.jsx(G,{variant:C==="list"?"default":"ghost",size:"sm",onClick:()=>L("list"),className:"h-8 w-8 p-0","data-active":C==="list",children:a.jsx(dv,{className:"h-4 w-4"})})]}),a.jsxs(G,{onClick:()=>k(!0),children:[a.jsx(At,{className:"mr-2 h-4 w-4"})," ",n("leads.newLead")]})]})]}),a.jsx(lx,{onSearch:J,onFilterAssignee:I,onFilterDateRange:F,users:c}),C==="kanban"?a.jsxs(cx,{stages:He,currentStageId:P||((et=He[0])==null?void 0:et.id),onStageChange:T,children:[a.jsx(Dt,{open:E,onOpenChange:k,children:a.jsxs(kt,{className:"w-[95vw] sm:w-full sm:max-w-[500px] max-h-[85vh] overflow-y-auto",children:[a.jsxs(Ct,{children:[a.jsx(Et,{children:n("leads.createLead")}),a.jsx(Wt,{children:n("leads.createLeadDesc")})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-sm font-medium",children:[n("leads.leadName")," *"]}),a.jsx(Se,{value:A.lead_name,onChange:B=>Q(he=>({...he,lead_name:B.target.value})),placeholder:n("leads.leadNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.description")}),a.jsx(Hr,{value:A.lead_description,onChange:B=>Q(he=>({...he,lead_description:B.target.value})),placeholder:n("leads.descriptionPlaceholder"),rows:3})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.clientName")}),a.jsx(Se,{value:A.client_name,onChange:B=>Q(he=>({...he,client_name:B.target.value})),placeholder:n("leads.clientNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.client")}),a.jsxs(qe,{value:A.client_user_id,onValueChange:B=>Q(he=>({...he,client_user_id:B})),children:[a.jsx(We,{children:a.jsx(Ke,{placeholder:n("leads.selectClient")})}),a.jsx(Ve,{children:i.filter(B=>B.auth_user_id).map(B=>a.jsx(ae,{value:B.auth_user_id,children:K(B,"user_name")},B.user_id))})]})]}),((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="manager")&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.assignToEmployee")}),a.jsxs(qe,{value:A.assigned_to,onValueChange:B=>Q(he=>({...he,assigned_to:B})),children:[a.jsx(We,{children:a.jsx(Ke,{placeholder:n("leads.selectAssignee","Select assignee")})}),a.jsxs(Ve,{children:[a.jsx(ae,{value:"unassigned",children:n("common.all","Unassigned")}),c.filter(B=>["employee","admin","manager","team_leader"].includes(B.user_role)&&B.auth_user_id).map(B=>a.jsx(ae,{value:B.auth_user_id,children:K(B,"user_name")},B.user_id))]})]})]})]}),a.jsxs(Yt,{children:[a.jsx(G,{variant:"outline",onClick:()=>k(!1),children:n("buttons.cancel")}),a.jsxs(G,{onClick:de,disabled:!((ct=A.lead_name)!=null&&ct.trim()),children:[a.jsx(ta,{className:"h-4 w-4 mr-2"}),n("leads.createLead")]})]})]})}),a.jsx("div",{className:"flex gap-6 pb-6 overflow-x-auto scrollbar-hide max-w-full pl-6 rtl:pr-6 rtl:pl-0 flex-1",children:Oe.filter(B=>{var he;return r?B.stage_id===(P||((he=He[0])==null?void 0:he.id)):!0}).map((B,he)=>{var ne,ke;const V=q.filter(se=>se.stage===B.stage_id);return console.log(`[Leads] Stage ${B.stage_name} (${B.stage_id}): ${V.length} leads`),console.log("[Leads] Stage leads:",V),a.jsxs("div",{className:X("flex-shrink-0 animate-fade-in h-full flex flex-col",r?"w-full":"w-[280px] sm:w-[300px]"),style:{animationDelay:`${he*.1}s`},onDragOver:Ne,onDrop:()=>Re(B.stage_id),children:[a.jsx("div",{className:X("rounded-xl bg-muted/30 backdrop-blur p-4 mb-5 shadow-soft hidden md:block",B.color||"border-l-4 border-primary/50"),children:a.jsx("div",{className:"flex items-center justify-between mb-2 rtl:flex-row-reverse",children:v===B.stage_id?a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(Se,{value:y,onChange:se=>w(se.target.value),onKeyDown:se=>{se.key==="Enter"&&xe(B.stage_id),se.key==="Escape"&&(g(null),w(""))},className:"h-8 text-sm font-bold",autoFocus:!0}),a.jsx(G,{size:"sm",variant:"ghost",onClick:()=>xe(B.stage_id),className:"h-8 w-8 p-0",children:""})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(dh,{className:"h-4 w-4 text-muted-foreground cursor-move"}),a.jsx("h2",{className:"font-bold text-base",children:K(B,"stage_name")})]}),a.jsxs("div",{className:"flex items-center gap-2 rtl:flex-row-reverse",children:[a.jsx("span",{className:"text-sm font-bold px-3 py-1 rounded-full bg-background shadow-sm",children:V.length}),a.jsxs(a.Fragment,{children:[a.jsx(G,{size:"sm",variant:"ghost",onClick:()=>{g(B.stage_id),w(K(B,"stage_name"))},className:"h-6 w-6 p-0",title:n("buttons.edit"),children:a.jsx(fv,{className:"h-3 w-3"})}),a.jsx(G,{size:"sm",variant:"ghost",onClick:()=>Ie(B.stage_id),className:"h-6 w-6 p-0 text-destructive",title:n("buttons.delete"),children:a.jsx(zr,{className:"h-3 w-3"})})]})]})]})})}),a.jsxs("div",{className:"space-y-4 flex-1 overflow-y-auto pr-2 rtl:pr-0 rtl:pl-2 scrollbar-hide",children:[((ne=d.sort((se,Le)=>(se.stager_order_index||0)-(Le.stager_order_index||0))[0])==null?void 0:ne.stage_id)===B.stage_id&&a.jsx("div",{className:"mb-4",children:a.jsx(ve,{className:X("group relative hover:shadow-lg transition-all duration-200 cursor-pointer","border-l-4 border-l-gray-300 rtl:border-l-0 rtl:border-r-4 rtl:border-r-gray-300","flex items-center justify-center bg-muted/20",r?"w-full h-[100px]":"w-[280px] sm:w-[300px] h-[120px]"),onClick:()=>H(B.stage_id),children:a.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[a.jsx(At,{className:"h-8 w-8"}),a.jsx("span",{className:"text-sm font-medium",children:n("leads.addNewLeadCard")})]})})}),V.map(se=>{const Le=i.find(S=>S.auth_user_id===se.client_user_id),It=c.find(S=>S.auth_user_id===se.created_by),$=c.find(S=>S.auth_user_id===se.assigned_to);return a.jsx("div",{children:a.jsx(IB,{lead:se,client:Le||null,creator:It||null,assignedUser:$||null,userRole:e==null?void 0:e.role,users:c,onDelete:()=>z(se.lead_id),onAssign:re,onClick:()=>{},onDragStart:le,isDragging:b===se.lead_id})},se.lead_id)}),((ke=d.sort((se,Le)=>(se.stager_order_index||0)-(Le.stager_order_index||0))[0])==null?void 0:ke.stage_id)!==B.stage_id&&a.jsx("div",{className:"mt-2",children:a.jsxs(G,{variant:"outline",size:"sm",className:"w-full h-12 border-dashed text-muted-foreground hover:text-foreground",onClick:()=>H(B.stage_id),children:[a.jsx(At,{className:"h-4 w-4 mr-2"}),n("leads.addLead")]})})]})]},B.stage_id)})}),a.jsx(ba,{open:!!x,onOpenChange:()=>_(null),children:a.jsxs(ds,{children:[a.jsxs(hs,{children:[a.jsx(ms,{children:n("leads.deleteStage")}),a.jsx(ps,{children:n("leads.deleteStageConfirmation",{count:s.filter(B=>B.stage===x).length})})]}),a.jsxs(fs,{children:[a.jsx(vs,{children:n("buttons.cancel")}),a.jsx(gs,{onClick:be,className:"bg-destructive text-destructive-foreground",children:n("buttons.delete")})]})]})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-lg font-semibold",children:[n("leads.title")," (",s.length,")"]}),a.jsx(Dt,{open:E,onOpenChange:k,children:a.jsxs(kt,{className:"w-[95vw] sm:w-full sm:max-w-[500px] max-h-[85vh] overflow-y-auto",children:[a.jsxs(Ct,{children:[a.jsx(Et,{children:n("leads.createLead")}),a.jsx(Wt,{children:n("leads.createLeadDesc")})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-sm font-medium",children:[n("leads.leadName")," *"]}),a.jsx(Se,{value:A.lead_name,onChange:B=>Q(he=>({...he,lead_name:B.target.value})),placeholder:n("leads.leadNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.description")}),a.jsx(Hr,{value:A.lead_description,onChange:B=>Q(he=>({...he,lead_description:B.target.value})),placeholder:n("leads.descriptionPlaceholder"),rows:3})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.clientName")}),a.jsx(Se,{value:A.client_name,onChange:B=>Q(he=>({...he,client_name:B.target.value})),placeholder:n("leads.clientNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.client")}),a.jsxs(qe,{value:A.client_user_id,onValueChange:B=>Q(he=>({...he,client_user_id:B})),children:[a.jsx(We,{children:a.jsx(Ke,{placeholder:n("leads.selectClient")})}),a.jsx(Ve,{children:i.filter(B=>B.auth_user_id).map(B=>a.jsx(ae,{value:B.auth_user_id,children:K(B,"user_name")},B.user_id))})]})]}),((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="manager")&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("leads.assignToEmployee")}),a.jsxs(qe,{value:A.assigned_to,onValueChange:B=>Q(he=>({...he,assigned_to:B})),children:[a.jsx(We,{children:a.jsx(Ke,{placeholder:n("leads.selectAssignee","Select assignee")})}),a.jsxs(Ve,{children:[a.jsx(ae,{value:"unassigned",children:n("common.all","Unassigned")}),c.filter(B=>["employee","admin","manager","team_leader"].includes(B.user_role)&&B.auth_user_id).map(B=>a.jsx(ae,{value:B.auth_user_id,children:K(B,"user_name")},B.user_id))]})]})]})]}),a.jsxs(Yt,{children:[a.jsx(G,{variant:"outline",onClick:()=>k(!1),children:n("buttons.cancel")}),a.jsxs(G,{onClick:de,disabled:!((Mt=A.lead_name)!=null&&Mt.trim()),children:[a.jsx(ta,{className:"h-4 w-4 mr-2"}),n("leads.createLead")]})]})]})})]}),a.jsxs(ve,{className:"max-h-[calc(100vh-300px)] flex flex-col",children:[a.jsx(Me,{className:"flex-shrink-0",children:a.jsx(Qe,{children:n("leads.title")})}),a.jsx(_e,{className:"flex-1 overflow-y-auto",children:a.jsxs(Rh,{children:[a.jsx(Oh,{children:a.jsxs(Mn,{children:[a.jsx(St,{children:n("leads.leadName")}),a.jsx(St,{children:n("leads.client")}),a.jsx(St,{children:n("leads.createdBy")}),a.jsx(St,{children:n("leads.assignedTo")}),a.jsx(St,{children:n("common.created")}),a.jsx(St,{children:n("tasks.stage")}),a.jsx(St,{className:"w-[100px]",children:n("common.actions")})]})}),a.jsx(Dh,{children:s.length===0?a.jsx(Mn,{children:a.jsx(ht,{colSpan:7,className:"text-center py-12",children:a.jsx("div",{className:"text-muted-foreground",children:n("leads.noLeadsYet")})})}):s.map(B=>{const he=i.find(se=>se.auth_user_id===B.client_user_id),V=c.find(se=>se.auth_user_id===B.created_by),ne=c.find(se=>se.auth_user_id===B.assigned_to),ke=d.find(se=>se.stage_id===B.stage);return a.jsxs(Mn,{className:"cursor-pointer hover:bg-muted/50",children:[a.jsx(ht,{children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:K(B,"lead_name")}),K(B,"lead_description")&&a.jsx("div",{className:"text-sm text-muted-foreground truncate max-w-xs",children:K(B,"lead_description")})]})}),a.jsx(ht,{children:he?K(he,"user_name"):n("leads.unknown")}),a.jsx(ht,{children:V?K(V,"user_name"):n("leads.unknown")}),a.jsx(ht,{children:(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="manager"?a.jsxs(qe,{value:B.assigned_to||"unassigned",onValueChange:se=>re(B.lead_id,se==="unassigned"?"":se),children:[a.jsx(We,{className:"w-full h-8",children:a.jsx(Ke,{placeholder:n("leads.selectAssignee","Select assignee")})}),a.jsxs(Ve,{children:[a.jsx(ae,{value:"unassigned",children:n("common.all","Unassigned")}),c.filter(se=>["employee","admin","manager","team_leader"].includes(se.user_role)&&se.auth_user_id).map(se=>a.jsx(ae,{value:se.auth_user_id,children:K(se,"user_name")},se.user_id))]})]}):ne?K(ne,"user_name"):n("common.all","Unassigned")}),a.jsx(ht,{children:B.created_date?new Date(B.created_date).toLocaleDateString():n("leads.notSet")}),a.jsx(ht,{children:ke?K(ke,"stage_name"):n("leads.unknown")}),a.jsx(ht,{children:a.jsx(G,{variant:"ghost",size:"sm",children:n("common.view")})})]},B.lead_id)})})]})})]})]})]})}function FB({task:t,assignedUser:e,stages:r=[],onDelete:n,onClick:s,onDragStart:o,onStageChange:i,isDragging:l=!1}){var g,y;const{t:c}=lt(),u=vo(),d=w=>w?new Date(w).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Not set",h=w=>{switch(w){case"done":return a.jsx(Nd,{className:"h-3 w-3 text-green-500"});case"in_progress":return a.jsx(Ho,{className:"h-3 w-3 text-blue-500"});case"todo":default:return a.jsx(iL,{className:"h-3 w-3 text-gray-500"})}},m=w=>{switch(w){case"done":return"border-l-green-500 rtl:border-r-green-500";case"in_progress":return"border-l-blue-500 rtl:border-r-blue-500";case"todo":default:return"border-l-gray-500 rtl:border-r-gray-500"}},p=w=>{if(!w)return null;const x=new Date,b=(new Date(w).getTime()-x.getTime())/(1e3*60*60);return b<0?"overdue":b<24?"urgent":b<72?"soon":null},v=w=>{switch(p(w)){case"overdue":return"border-destructive ring-1 ring-destructive";case"urgent":return"border-orange-500 ring-1 ring-orange-500";case"soon":return"border-yellow-500";default:return""}};return a.jsxs(ve,{className:X("group relative hover:shadow-lg transition-all duration-200","border-l-4 rtl:border-l-0 rtl:border-r-4",u?"w-full":"w-[280px] h-[180px]",m(t.task_status),v(t.due_date),l&&"opacity-50 rotate-2 scale-105"),draggable:!!o,onDragStart:w=>{o&&(w.dataTransfer.effectAllowed="move",w.dataTransfer.setData("text/plain",t.task_id.toString()),o(t.task_id))},children:[a.jsx(Me,{className:"pb-3 px-4 pt-4 cursor-pointer",onClick:s,children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-base mb-1 truncate group-hover:text-primary transition-colors",children:t.task_name}),t.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:t.description})]}),n&&a.jsxs(ba,{children:[a.jsx($c,{asChild:!0,onClick:w=>w.stopPropagation(),children:a.jsx(G,{variant:"ghost",size:"sm",className:X("h-8 w-8 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10",u?"opacity-100":"opacity-0 group-hover:opacity-100 transition-opacity"),children:a.jsx(zr,{className:"h-4 w-4"})})}),a.jsxs(ds,{onClick:w=>w.stopPropagation(),children:[a.jsxs(hs,{children:[a.jsx(ms,{children:"Delete Task"}),a.jsxs(ps,{children:['Are you sure you want to delete "',t.task_name,'"?']})]}),a.jsxs(fs,{children:[a.jsx(vs,{children:"Cancel"}),a.jsx(gs,{onClick:w=>{w.stopPropagation(),n(t.task_id)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})]})}),a.jsxs(_e,{className:"px-4 pb-3 space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("div",{className:"space-y-1.5 flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(ia,{className:"h-3 w-3 text-muted-foreground flex-shrink-0"}),a.jsx("p",{className:"text-xs font-medium truncate",children:e?K(e,"user_name"):c("common.all","Unassigned")})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex items-center gap-1",children:[h(t.task_status),a.jsx("span",{className:"text-xs font-medium capitalize",children:((g=t.task_status)==null?void 0:g.replace("_"," "))||"Todo"})]})})]}),u&&i&&a.jsx("div",{className:"pt-1",children:a.jsxs(qe,{value:((y=t.stage_id)==null?void 0:y.toString())||"",onValueChange:w=>i(t.task_id,parseInt(w)),children:[a.jsx(We,{className:"h-7 text-xs",children:a.jsx(Ke,{placeholder:c("tasks.selectStage","Select stage")})}),a.jsx(Ve,{children:r.map(w=>a.jsx(ae,{value:w.stage_id.toString(),children:K(w,"stage_name")},w.stage_id))})]})}),t.due_date&&a.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-muted-foreground pt-1 border-t",children:[a.jsx(yc,{className:"h-3 w-3 flex-shrink-0"}),a.jsxs("span",{children:["Due: ",d(t.due_date)]})]})]})]})}function $B(){var Re;vn();const{hasRole:t,user:e,loading:r}=bt(),{t:n}=lt(),s=vo(),[o,i]=f.useState(null),[l,c]=f.useState("kanban");f.useState(!1);const u=z=>{switch(z==null?void 0:z.toLowerCase()){case"done":case"completed":return"default";case"in_progress":return"secondary";case"pending":case"todo":return"outline";default:return"secondary"}};f.useState(""),f.useState(null),f.useState(""),f.useState(null);const[d,h]=f.useState(null),[m,p]=f.useState(!1),[v,g]=f.useState({task_name:"",description:"",assigned_to:"",task_status:"todo",due_date:"",stage_id:""}),[y,w]=f.useState(""),[x,_]=f.useState("all"),[b,j]=f.useState("all"),[E,k]=f.useState({from:void 0,to:void 0}),{data:P=[],isLoading:T,error:C}=UU(),{data:L=[],isLoading:O,error:J}=FU(),{data:W=[],isLoading:U,error:R}=BU(),I=f.useMemo(()=>P.filter(z=>{const re=z.task_name.toLowerCase().includes(y.toLowerCase())||z.description&&z.description.toLowerCase().includes(y.toLowerCase()),H=x==="all"||z.task_status===x,de=b==="all"||z.assigned_to&&z.assigned_to.toString()===b;let Oe=!0;if(E.from&&z.due_date){const He=new Date(z.due_date),et=new Date(E.from);et.setHours(0,0,0,0);const ct=new Date(He);if(ct.setHours(0,0,0,0),Oe=ct>=et,Oe&&E.to){const Mt=new Date(E.to);Mt.setHours(23,59,59,999),Oe=ct<=Mt}}else E.from&&!z.due_date&&(Oe=!1);return re&&H&&de&&Oe}),[P,y,x,b,E]),N=T||O||U||r,F=(C==null?void 0:C.message)||(J==null?void 0:J.message)||(R==null?void 0:R.message)||null;console.log("[Tasks] Rendering. Auth state:",{user:e?{id:e.id,email:e.email,role:e.role}:null,authLoading:r,hasUser:!!e,loading:N,data:{tasks:P.length,users:L.length,stages:W.length}});const q=()=>{},A=async z=>{try{await Vs.delete(z),q()}catch(re){console.error("Failed to delete task:",re)}},Q=z=>{h(z)},ye=z=>{z.preventDefault(),z.dataTransfer.dropEffect="move"},xe=async z=>{if(!d)return;const re=P.find(H=>H.task_id===d);if(re&&re.stage_id!==z)try{await Vs.update(d,{stage_id:z}),q()}catch(H){console.error("Failed to update task stage:",H)}h(null)},Ie=async(z,re)=>{const H=P.find(de=>de.task_id===z);if(H&&H.stage_id!==re)try{await Vs.update(z,{stage_id:re}),q()}catch(de){console.error("Failed to update task stage:",de)}},be=async()=>{if(v.task_name.trim())try{const z=hn({task_name:v.task_name.trim(),stage_id:v.stage_id?parseInt(v.stage_id):null,assigned_to:v.assigned_to?parseInt(v.assigned_to):null,task_status:v.task_status,due_date:v.due_date?new Date(v.due_date).toISOString():null,description:v.description.trim()||null,auth_user_id:(e==null?void 0:e.id)||null},{task_name:"task_name",description:"description"});await Vs.create(z),q(),g({task_name:"",description:"",assigned_to:"",task_status:"todo",due_date:"",stage_id:""}),p(!1)}catch(z){console.error("Failed to create task:",z)}},le=!0;f.useEffect(()=>{if(W.length>0&&o===null){const z=W.find(re=>re.stage_id===5);z&&i(z.stage_id)}},[W,o,cn]);const Ne=W.filter(z=>z.stage_type==="tasks").sort((z,re)=>{const H=z.stager_order_index??0,de=re.stager_order_index??0;return cn()?de-H:H-de}).map(z=>({id:z.stage_id,name:K(z,"stage_name"),color:z.color,count:P.filter(re=>re.stage_id===z.stage_id).length}));return N||r||!e?a.jsx("div",{className:"flex items-center justify-center flex-1",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:n("tasks.loading")})]})}):F?a.jsx("div",{className:"flex items-center justify-center flex-1",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-red-600",children:n("tasks.error")}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:F})]})}):a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n("tasks.title")}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"bg-muted p-1 rounded-lg flex items-center gap-1",children:[a.jsx(G,{variant:l==="kanban"?"default":"ghost",size:"sm",onClick:()=>c("kanban"),className:"h-8 w-8 p-0","data-active":l==="kanban",children:a.jsx(uv,{className:"h-4 w-4"})}),a.jsx(G,{variant:l==="list"?"default":"ghost",size:"sm",onClick:()=>c("list"),className:"h-8 w-8 p-0","data-active":l==="list",children:a.jsx(dv,{className:"h-4 w-4"})})]}),a.jsxs(G,{onClick:()=>p(!0),children:[a.jsx(At,{className:"mr-2 h-4 w-4"})," ",n("tasks.addNewTask")]})]})]}),a.jsx(lx,{onSearch:w,onFilterStatus:_,onFilterAssignee:j,onFilterDateRange:k,users:L,statuses:[{value:"todo",label:n("tasks.todo")},{value:"in_progress",label:n("tasks.inProgress")},{value:"done",label:n("tasks.done")}]}),l==="kanban"?a.jsxs(cx,{stages:Ne,currentStageId:o||((Re=Ne[0])==null?void 0:Re.id),onStageChange:i,children:[a.jsx(Dt,{open:m,onOpenChange:p,children:a.jsxs(kt,{className:"w-[95vw] sm:w-full sm:max-w-[500px] max-h-[85vh] overflow-y-auto",children:[a.jsxs(Ct,{children:[a.jsx(Et,{children:n("tasks.createTask")}),a.jsx(Wt,{children:n("tasks.createTaskDesc")})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-sm font-medium",children:[n("tasks.taskName")," *"]}),a.jsx(Se,{value:v.task_name,onChange:z=>g(re=>({...re,task_name:z.target.value})),placeholder:n("tasks.taskNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.description")}),a.jsx(Hr,{value:v.description,onChange:z=>g(re=>({...re,description:z.target.value})),placeholder:n("tasks.descriptionPlaceholder"),rows:3})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.selectUser")}),a.jsxs(qe,{value:v.assigned_to,onValueChange:z=>g(re=>({...re,assigned_to:z})),children:[a.jsx(We,{children:a.jsx(Ke,{placeholder:n("tasks.selectUser")})}),a.jsx(Ve,{children:L.map(z=>a.jsx(ae,{value:z.user_id.toString(),children:K(z,"user_name")},z.user_id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.selectStage")}),a.jsxs(qe,{value:v.stage_id,onValueChange:z=>g(re=>({...re,stage_id:z})),children:[a.jsx(We,{children:a.jsx(Ke,{placeholder:n("tasks.selectStage")})}),a.jsx(Ve,{children:W.filter(z=>["New","In Progress","Overdue","Completed"].includes(z.stage_name)).map(z=>a.jsx(ae,{value:z.stage_id.toString(),children:K(z,"stage_name")},z.stage_id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.selectStatus")}),a.jsxs(qe,{value:v.task_status,onValueChange:z=>g(re=>({...re,task_status:z})),children:[a.jsx(We,{children:a.jsx(Ke,{placeholder:n("tasks.selectStatus")})}),a.jsxs(Ve,{children:[a.jsx(ae,{value:"todo",children:n("tasks.todo")}),a.jsx(ae,{value:"in_progress",children:n("tasks.inProgress")}),a.jsx(ae,{value:"done",children:n("tasks.done")})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.dueDate")}),a.jsx(Se,{type:"date",value:v.due_date,onChange:z=>g(re=>({...re,due_date:z.target.value}))})]})]}),a.jsxs(Yt,{children:[a.jsx(G,{variant:"outline",onClick:()=>p(!1),children:n("buttons.cancel")}),a.jsxs(G,{onClick:be,disabled:!v.task_name.trim(),children:[a.jsx(ta,{className:"h-4 w-4 mr-2"}),n("tasks.createTask")]})]})]})}),a.jsx("div",{className:"flex gap-6 pb-6 overflow-x-auto scrollbar-hide max-w-full pl-6 rtl:pr-6 rtl:pl-0",children:W.filter(z=>z.stage_type==="tasks").sort((z,re)=>{const H=z.stager_order_index??0,de=re.stager_order_index??0;return cn()?de-H:H-de}).filter(z=>{var re;return s?z.stage_id===(o||((re=Ne[0])==null?void 0:re.id)):!0}).map((z,re)=>{var de,Oe;const H=I.filter(He=>He.stage_id===z.stage_id);return a.jsxs("div",{className:X("flex-shrink-0 animate-fade-in",s?"w-full":"w-[300px]"),style:{animationDelay:`${re*.1}s`},onDragOver:ye,onDrop:()=>xe(z.stage_id),children:[a.jsx("div",{className:X("rounded-xl bg-muted/30 backdrop-blur p-4 mb-5 shadow-soft hidden md:block",z.color||"border-l-4 border-primary/50"),children:a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(dh,{className:"h-4 w-4 text-muted-foreground cursor-move"}),a.jsx("h2",{className:"font-bold text-base",children:K(z,"stage_name")})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"text-sm font-bold px-3 py-1 rounded-full bg-background shadow-sm",children:H.length})})]})}),a.jsxs("div",{className:"space-y-4 max-h-[calc(100vh-300px)] overflow-y-auto pr-2 custom-scrollbar",children:[((de=W.sort((He,et)=>(He.stager_order_index||0)-(et.stager_order_index||0))[0])==null?void 0:de.stage_id)===z.stage_id&&a.jsx("div",{className:"mb-4",children:a.jsx(ve,{className:X("group relative hover:shadow-lg transition-all duration-200 cursor-pointer","border-l-4 border-l-gray-300 rtl:border-l-0 rtl:border-r-4 rtl:border-r-gray-300","flex items-center justify-center bg-muted/20",s?"w-full h-[100px]":"w-[280px] h-[120px]"),onClick:()=>p(!0),children:a.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[a.jsx(At,{className:"h-8 w-8"}),a.jsx("span",{className:"text-sm font-medium",children:n("tasks.addNewTask")})]})})}),H.map(He=>{const et=L.find(ct=>ct.user_id===He.assigned_to);return a.jsx("div",{draggable:le,onDragStart:()=>Q(He.task_id),className:"cursor-move",children:a.jsx(FB,{task:He,assignedUser:et||null,stages:W,onDelete:()=>A(He.task_id),onClick:()=>{console.log("Task clicked:",He.task_id)},onDragStart:Q,onStageChange:Ie,isDragging:d===He.task_id})},He.task_id)}),((Oe=W.sort((He,et)=>(He.stager_order_index||0)-(et.stager_order_index||0))[0])==null?void 0:Oe.stage_id)!==z.stage_id&&a.jsx("div",{className:"mt-2",children:a.jsxs(G,{variant:"outline",size:"sm",className:"w-full h-12 border-dashed text-muted-foreground hover:text-foreground",onClick:()=>p(!0),children:[a.jsx(At,{className:"h-4 w-4 mr-2"}),n("tasks.addTask")]})})]})]},z.stage_id)})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-lg font-semibold",children:[n("tasks.allTasks")," (",P.length,")"]}),a.jsx(Dt,{open:m,onOpenChange:p,children:a.jsxs(kt,{className:"w-[95vw] sm:w-full sm:max-w-[500px] max-h-[85vh] overflow-y-auto",children:[a.jsxs(Ct,{children:[a.jsx(Et,{children:n("tasks.createTask")}),a.jsx(Wt,{children:n("tasks.createTaskDesc")})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-sm font-medium",children:[n("tasks.taskName")," *"]}),a.jsx(Se,{value:v.task_name,onChange:z=>g(re=>({...re,task_name:z.target.value})),placeholder:n("tasks.taskNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.description")}),a.jsx(Hr,{value:v.description,onChange:z=>g(re=>({...re,description:z.target.value})),placeholder:n("tasks.descriptionPlaceholder"),rows:3})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.selectUser")}),a.jsxs(qe,{value:v.assigned_to,onValueChange:z=>g(re=>({...re,assigned_to:z})),children:[a.jsx(We,{children:a.jsx(Ke,{placeholder:n("tasks.selectUser")})}),a.jsx(Ve,{children:L.map(z=>a.jsx(ae,{value:z.user_id.toString(),children:K(z,"user_name")},z.user_id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.selectStage")}),a.jsxs(qe,{value:v.stage_id,onValueChange:z=>g(re=>({...re,stage_id:z})),children:[a.jsx(We,{children:a.jsx(Ke,{placeholder:n("tasks.selectStage")})}),a.jsx(Ve,{children:W.map(z=>a.jsx(ae,{value:z.stage_id.toString(),children:K(z,"stage_name")},z.stage_id))})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.selectStatus")}),a.jsxs(qe,{value:v.task_status,onValueChange:z=>g(re=>({...re,task_status:z})),children:[a.jsx(We,{children:a.jsx(Ke,{placeholder:n("tasks.selectStatus")})}),a.jsxs(Ve,{children:[a.jsx(ae,{value:"todo",children:n("tasks.todo")}),a.jsx(ae,{value:"in_progress",children:n("tasks.inProgress")}),a.jsx(ae,{value:"done",children:n("tasks.done")})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:n("tasks.dueDate")}),a.jsx(Se,{type:"date",value:v.due_date,onChange:z=>g(re=>({...re,due_date:z.target.value}))})]})]})]}),a.jsxs(Yt,{children:[a.jsx(G,{variant:"outline",onClick:()=>p(!1),children:n("buttons.cancel")}),a.jsxs(G,{onClick:be,disabled:!v.task_name.trim(),children:[a.jsx(ta,{className:"h-4 w-4 mr-2"}),n("tasks.createTask")]})]})]})})]}),a.jsx(ve,{className:"max-h-[calc(100vh-300px)] flex flex-col",children:a.jsx(_e,{className:"p-0 flex-1 overflow-y-auto",children:a.jsxs(Rh,{children:[a.jsx(Oh,{children:a.jsxs(Mn,{children:[a.jsx(St,{children:n("tasks.taskName")}),a.jsx(St,{children:n("tasks.assignedTo")}),a.jsx(St,{children:n("tasks.status")}),a.jsx(St,{children:n("tasks.dueDate")}),a.jsx(St,{children:n("tasks.stage")}),a.jsx(St,{className:"w-[100px]",children:n("common.actions")})]})}),a.jsx(Dh,{children:P.length===0?a.jsx(Mn,{children:a.jsx(ht,{colSpan:6,className:"text-center py-12",children:a.jsx("div",{className:"text-muted-foreground",children:n("tasks.noTasksYet")})})}):P.map(z=>{const re=L.find(de=>de.user_id===z.assigned_to),H=W.find(de=>de.stage_id===z.stage_id);return a.jsxs(Mn,{className:"cursor-pointer hover:bg-muted/50",children:[a.jsx(ht,{children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:z.task_name}),z.description&&a.jsx("div",{className:"text-sm text-muted-foreground truncate max-w-xs",children:z.description})]})}),a.jsx(ht,{children:re?K(re,"user_name"):n("common.all","Unassigned")}),a.jsx(ht,{children:a.jsx(ze,{variant:u(z.task_status),children:z.task_status||n("leads.unknown")})}),a.jsx(ht,{children:z.due_date?new Date(z.due_date).toLocaleDateString():n("leads.notSet")}),a.jsx(ht,{children:H?K(H,"stage_name"):n("leads.unknown")}),a.jsx(ht,{children:a.jsx(G,{variant:"ghost",size:"sm",children:n("common.view")})})]},z.task_id)})})]})})})]})]})}function UB(){const[t,e]=f.useState([]),[r,n]=f.useState([]),[s,o]=f.useState(!0),[i,l]=f.useState(null),[c,u]=f.useState(""),[d,h]=f.useState("all"),[m,p]=f.useState("all"),[v,g]=f.useState(!1),[y,w]=f.useState(null),[x,_]=f.useState(!1),[b,j]=f.useState({subject:"",description:"",priority:"medium",ticket_type:"request",assigned_to:""}),[E,k]=f.useState(""),[P,T]=f.useState(!1),{user:C,loading:L}=bt(),{t:O}=lt();f.useEffect(()=>{C&&!L&&J()},[C,L]);const J=async()=>{try{o(!0),l(null);const[A,Q]=await Promise.all([zf.getAll().catch(ye=>(console.error("[Tickets] Error fetching tickets:",ye),[])),Vr.getAll().catch(ye=>(console.error("[Tickets] Error fetching users:",ye),[]))]);e(A),n(Q)}catch(A){console.error("[Tickets] Failed to load data:",A),l(A.message||O("common.error"))}finally{o(!1)}},W=A=>{if(!A)return O("leads.unknown");const Q=r.find(ye=>ye.user_id===A);return Q?K(Q,"user_name"):O("leads.unknown")},U=A=>{switch(A==null?void 0:A.toLowerCase()){case"open":return"destructive";case"in_progress":return"default";case"resolved":return"secondary";case"closed":return"outline";default:return"secondary"}},R=A=>{switch(A==null?void 0:A.toLowerCase()){case"urgent":return"destructive";case"high":return"default";case"medium":return"secondary";case"low":return"outline";default:return"secondary"}},I=async A=>{var Q;if(A.preventDefault(),!(P||!C)){k(""),T(!0);try{const ye={subject:b.subject,description:b.description||null,priority:b.priority,ticket_type:b.ticket_type,status:"open",created_by:((Q=C.profile)==null?void 0:Q.user_id)||null,assigned_to:b.assigned_to?parseInt(b.assigned_to):null,auth_user_id:C.id,resolved_date:null,closed_at:null,closed_by:null,room_id:null,task_id:null};await zf.create(ye),j({subject:"",description:"",priority:"medium",ticket_type:"request",assigned_to:""}),g(!1),J()}catch(ye){k(ye.message||O("tickets.createError"))}finally{T(!1)}}},N=A=>{w(A),_(!0)},F=async A=>{if(confirm(O("tickets.deleteConfirmation",{name:"this ticket"})))try{await zf.delete(A),J()}catch(Q){alert(`${O("tickets.deleteError")}: ${Q.message}`)}},q=t.filter(A=>{var Ie,be;const Q=((Ie=A.subject)==null?void 0:Ie.toLowerCase().includes(c.toLowerCase()))||((be=A.description)==null?void 0:be.toLowerCase().includes(c.toLowerCase()))||W(A.assigned_to).toLowerCase().includes(c.toLowerCase()),ye=d==="all"||A.status===d,xe=m==="all"||A.priority===m;return Q&&ye&&xe});return s||L||!C?a.jsx("div",{className:"flex items-center justify-center flex-1",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:O("tickets.loading")})]})}):i?a.jsx("div",{className:"flex items-center justify-center flex-1",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-red-600",children:O("common.error")}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:i}),a.jsx(G,{onClick:J,className:"mt-4",children:O("dashboard.retry")})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold tracking-tight",children:O("tickets.title")}),a.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:O("tickets.subtitle")})]}),a.jsxs(Dt,{open:v,onOpenChange:g,children:[a.jsx(Ya,{asChild:!0,children:a.jsxs(G,{size:"lg",className:"shadow-lg hover:shadow-xl transition-all",children:[a.jsx(At,{className:"h-5 w-5 mr-2"}),O("tickets.newTicket")]})}),a.jsxs(kt,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[a.jsxs(Ct,{children:[a.jsx(Et,{children:O("tickets.createNewTicket")}),a.jsx(Wt,{children:O("tickets.createTicketDesc")})]}),a.jsxs("form",{onSubmit:I,className:"space-y-4",children:[E&&a.jsx(Ei,{variant:"destructive",children:a.jsx(Pi,{children:E})}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(ce,{htmlFor:"subject",children:[O("tickets.subject")," *"]}),a.jsx(Se,{id:"subject",value:b.subject,onChange:A=>j(Q=>({...Q,subject:A.target.value})),placeholder:O("tickets.subjectPlaceholder"),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ce,{htmlFor:"description",children:O("tickets.description")}),a.jsx(Hr,{id:"description",value:b.description,onChange:A=>j(Q=>({...Q,description:A.target.value})),placeholder:O("tickets.descriptionPlaceholder"),rows:3})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(ce,{htmlFor:"priority",children:[O("tickets.priority")," *"]}),a.jsxs(qe,{value:b.priority,onValueChange:A=>j(Q=>({...Q,priority:A})),children:[a.jsx(We,{children:a.jsx(Ke,{})}),a.jsxs(Ve,{children:[a.jsx(ae,{value:"low",children:O("tickets.priorityLow")}),a.jsx(ae,{value:"medium",children:O("tickets.priorityMedium")}),a.jsx(ae,{value:"high",children:O("tickets.priorityHigh")}),a.jsx(ae,{value:"urgent",children:O("tickets.priorityUrgent")})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(ce,{htmlFor:"ticket_type",children:[O("tickets.ticketType")," *"]}),a.jsxs(qe,{value:b.ticket_type,onValueChange:A=>j(Q=>({...Q,ticket_type:A})),children:[a.jsx(We,{children:a.jsx(Ke,{})}),a.jsxs(Ve,{children:[a.jsx(ae,{value:"request",children:O("tickets.typeRequest")}),a.jsx(ae,{value:"follow_up",children:O("tickets.typeFollowUp")}),a.jsx(ae,{value:"issue",children:O("tickets.typeIssue")}),a.jsx(ae,{value:"internal_task",children:O("tickets.typeInternalTask")})]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ce,{htmlFor:"assigned_to",children:O("tickets.assignTo")}),a.jsxs(qe,{value:b.assigned_to,onValueChange:A=>j(Q=>({...Q,assigned_to:A})),children:[a.jsx(We,{children:a.jsx(Ke,{placeholder:O("tickets.selectAssignee")})}),a.jsx(Ve,{children:r.map(A=>a.jsx(ae,{value:A.user_id.toString(),children:K(A,"user_name")},A.user_id))})]})]}),a.jsxs(Yt,{className:"flex flex-col-reverse sm:flex-row gap-2",children:[a.jsx(G,{type:"button",variant:"outline",onClick:()=>g(!1),className:"w-full sm:w-auto",children:O("buttons.cancel")}),a.jsx(G,{type:"submit",disabled:P||!b.subject.trim(),className:"w-full sm:w-auto",children:O(P?"tickets.creatingTicket":"tickets.createTicket")})]})]})]})]}),a.jsx(Dt,{open:x,onOpenChange:_,children:a.jsxs(kt,{className:"w-[95vw] max-w-[700px] max-h-[90vh] overflow-y-auto p-4 sm:p-6",children:[a.jsxs(Ct,{className:"space-y-3",children:[a.jsx(Et,{className:"text-lg sm:text-xl leading-tight",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[a.jsx("span",{className:"break-words",children:y==null?void 0:y.subject}),a.jsx(ze,{variant:U(y==null?void 0:y.status),className:"self-start sm:self-center shrink-0",children:(y==null?void 0:y.status)||O("leads.unknown")})]})}),a.jsxs(Wt,{className:"text-sm",children:[O("tickets.ticketId"),": #",y==null?void 0:y.ticket_id]})]}),y&&a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium",children:O("tickets.priority")}),a.jsx("div",{className:"mt-1",children:a.jsx(ze,{variant:R(y.priority),className:"text-xs",children:y.priority||O("leads.unknown")})})]}),a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium",children:O("tickets.ticketType")}),a.jsx("div",{className:"mt-1",children:a.jsx(ze,{variant:"outline",className:"text-xs",children:y.ticket_type||O("leads.unknown")})})]})]}),a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium",children:O("tickets.assignedTo")}),a.jsx("div",{className:"mt-1 text-sm break-words",children:W(y.assigned_to)})]}),a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium",children:O("tickets.createdDate")}),a.jsx("div",{className:"mt-1 text-sm",children:y.created_date?new Date(y.created_date).toLocaleString():"N/A"})]})]}),y.description&&a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium",children:O("tickets.description")}),a.jsx("div",{className:"mt-2 p-3 bg-muted rounded-md text-sm whitespace-pre-wrap break-words",children:y.description})]}),a.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium",children:O("tickets.createdBy")}),a.jsx("div",{className:"mt-1 text-sm break-words",children:W(y.created_by)})]}),y.resolved_date&&a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium",children:O("tickets.resolvedDate")}),a.jsx("div",{className:"mt-1 text-sm",children:new Date(y.resolved_date).toLocaleString()})]}),y.closed_at&&a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium",children:O("tickets.closedDate")}),a.jsx("div",{className:"mt-1 text-sm",children:new Date(y.closed_at).toLocaleString()})]})]})]}),a.jsx(Yt,{className:"flex flex-col-reverse sm:flex-row gap-2 pt-4",children:a.jsx(G,{variant:"outline",onClick:()=>_(!1),className:"w-full sm:w-auto",children:O("buttons.cancel")})})]})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[a.jsxs("div",{className:"relative flex-1 max-w-sm",children:[a.jsx(so,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(Se,{placeholder:O("tickets.searchPlaceholder"),value:c,onChange:A=>u(A.target.value),className:"pl-10"})]}),a.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[a.jsxs(qe,{value:d,onValueChange:h,children:[a.jsx(We,{className:"w-full sm:w-[140px]",children:a.jsx(Ke,{})}),a.jsxs(Ve,{children:[a.jsx(ae,{value:"all",children:O("tickets.allStatuses")}),a.jsx(ae,{value:"open",children:O("tickets.statusOpen")}),a.jsx(ae,{value:"in_progress",children:O("tickets.statusInProgress")}),a.jsx(ae,{value:"resolved",children:O("tickets.statusResolved")}),a.jsx(ae,{value:"closed",children:O("tickets.statusClosed")})]})]}),a.jsxs(qe,{value:m,onValueChange:p,children:[a.jsx(We,{className:"w-full sm:w-[140px]",children:a.jsx(Ke,{})}),a.jsxs(Ve,{children:[a.jsx(ae,{value:"all",children:O("tickets.allPriorities")}),a.jsx(ae,{value:"low",children:O("tickets.priorityLow")}),a.jsx(ae,{value:"medium",children:O("tickets.priorityMedium")}),a.jsx(ae,{value:"high",children:O("tickets.priorityHigh")}),a.jsx(ae,{value:"urgent",children:O("tickets.priorityUrgent")})]})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("h2",{className:"text-lg font-semibold",children:[O("tickets.allTickets")," (",q.length,")"]})}),q.length===0?a.jsx(ve,{children:a.jsxs(_e,{className:"text-center py-12",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:O("tickets.noTicketsFound")}),a.jsx("p",{className:"text-muted-foreground",children:O(c?"tickets.noTicketsFoundDesc":"tickets.noTicketsYet")})]})}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:q.map(A=>a.jsxs(ve,{className:"cursor-pointer hover:shadow-lg transition-all duration-200",onClick:()=>N(A),children:[a.jsx(Me,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-base truncate",children:A.subject}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["#",A.ticket_id]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ze,{variant:U(A.status),className:"shrink-0",children:A.status||O("leads.unknown")}),(C==null?void 0:C.role)==="admin"&&a.jsx(G,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:Q=>{Q.stopPropagation(),F(A.ticket_id)},children:a.jsx(zr,{className:"h-4 w-4"})})]})]})}),a.jsxs(_e,{className:"pt-0",children:[A.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:A.description}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("span",{className:"font-medium",children:[O("tickets.priority"),":"]}),a.jsx(ze,{variant:R(A.priority),className:"text-xs",children:A.priority||O("leads.unknown")})]})}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{children:W(A.assigned_to)}),a.jsx("div",{children:A.created_date?new Date(A.created_date).toLocaleDateString():"N/A"})]})]})]})]},A.ticket_id))})]})]})}var Ih="Tabs",[BB,Yz]=br(Ih,[jh]),HC=jh(),[zB,ux]=BB(Ih),qC=f.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=wc(l),[h,m]=ua({prop:n,onChange:s,defaultProp:o??"",caller:Ih});return a.jsx(zB,{scope:r,baseId:un(),value:h,onValueChange:m,orientation:i,dir:d,activationMode:c,children:a.jsx(je.div,{dir:d,"data-orientation":i,...u,ref:e})})});qC.displayName=Ih;var KC="TabsList",GC=f.forwardRef((t,e)=>{const{__scopeTabs:r,loop:n=!0,...s}=t,o=ux(KC,r),i=HC(r);return a.jsx(jN,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:n,children:a.jsx(je.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:e})})});GC.displayName=KC;var YC="TabsTrigger",QC=f.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...o}=t,i=ux(YC,r),l=HC(r),c=ZC(i.baseId,n),u=eE(i.baseId,n),d=n===i.value;return a.jsx(SN,{asChild:!0,...l,focusable:!s,active:d,children:a.jsx(je.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...o,ref:e,onMouseDown:ie(t.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?i.onValueChange(n):h.preventDefault()}),onKeyDown:ie(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&i.onValueChange(n)}),onFocus:ie(t.onFocus,()=>{const h=i.activationMode!=="manual";!d&&!s&&h&&i.onValueChange(n)})})})});QC.displayName=YC;var JC="TabsContent",XC=f.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,forceMount:s,children:o,...i}=t,l=ux(JC,r),c=ZC(l.baseId,n),u=eE(l.baseId,n),d=n===l.value,h=f.useRef(d);return f.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),a.jsx(cr,{present:s||d,children:({present:m})=>a.jsx(je.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...i,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:m&&o})})});XC.displayName=JC;function ZC(t,e){return`${t}-trigger-${e}`}function eE(t,e){return`${t}-content-${e}`}var WB=qC,tE=GC,rE=QC,nE=XC;const Lh=WB,Uc=f.forwardRef(({className:t,...e},r)=>a.jsx(tE,{ref:r,className:X("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Uc.displayName=tE.displayName;const Ln=f.forwardRef(({className:t,...e},r)=>a.jsx(rE,{ref:r,className:X("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...e}));Ln.displayName=rE.displayName;const Fn=f.forwardRef(({className:t,...e},r)=>a.jsx(nE,{ref:r,className:X("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Fn.displayName=nE.displayName;function sE({projectId:t,onClose:e}){const{id:r}=JO(),n=vn(),{user:s}=bt(),[o,i]=f.useState([]),[l,c]=f.useState(""),[u,d]=f.useState(!0),[h,m]=f.useState(null),[p,v]=f.useState(null),[g,y]=f.useState(null),[w,x]=f.useState(null),[_,b]=f.useState([]),[j,E]=f.useState([]),k=t||(r?parseInt(r):null),P=!!t;f.useEffect(()=>{(async()=>{if(!(!k||!s)){if(s.role==="admin"||s.role==="manager"){m(!0);return}if(s.role==="employee")try{const I=(await m0.getProjectUsers(k)).some(N=>N.auth_user_id===s.id);m(I)}catch(R){console.error("Failed to check project access:",R),m(!1)}else m(!0)}})()},[k,s]),f.useEffect(()=>{k&&h&&T()},[k,h]);const T=async()=>{if(k)try{d(!0);const U=await Nn.getById(k);if(v(U),U){if(U.created_by)try{const R=await Vr.getByAuthId(U.created_by);y(R)}catch(R){console.error("Failed to fetch client:",R)}if(U.created_by)try{const R=await Vr.getByAuthId(U.created_by);x(R)}catch(R){console.error("Failed to fetch manager:",R)}try{const I=(await m0.getProjectUsers(k)).map(F=>F.auth_user_id),N=await Promise.all(I.map(F=>Vr.getByAuthId(F).catch(()=>null)));b(N.filter(F=>F!==null))}catch(R){console.error("Failed to fetch project users:",R)}try{const N=(await gr.getAll()).filter(A=>A.project_id===k).map(A=>A.stage_id),q=(await Promise.all(N.map(A=>Vs.getByStage(A)))).flat();E(q)}catch(R){console.error("Failed to fetch tasks:",R)}}}catch(U){console.error("Failed to load project data:",U)}finally{d(!1)}};f.useEffect(()=>{k&&p&&j.length>0&&C()},[k,p,j]);const C=async()=>{if(!(!k||!p||j.length===0))try{const U=[];for(const R of j){const I=await Bp.getByTask(R.task_id);U.push(...I)}i(U)}catch(U){console.error("Failed to load comments:",U)}},L=async U=>{if(!(!l.trim()||!s))try{const R=await Bp.create({task_id:U,auth_user_id:s.id,message:l.trim()});i(I=>[...I,R]),c("")}catch(R){console.error("Failed to add comment:",R)}},O=()=>{e?e():n("/projects")},J=({children:U})=>P?a.jsx("div",{className:"h-full overflow-y-auto p-1",children:U}):a.jsx(Zt,{children:U});if(h===!1)return a.jsx(J,{children:a.jsx("div",{className:"flex items-center justify-center h-full py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"You don't have permission to view this project."}),a.jsx(G,{onClick:O,children:"Back to Projects"})]})})});if(h===null||!p||!g||!w)return u?a.jsx(J,{children:a.jsx("div",{className:"flex items-center justify-center h-full py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})}):a.jsx(J,{children:a.jsx("div",{children:"Project not found"})});const W={todo:"bg-slate-200 text-slate-700",in_progress:"bg-blue-200 text-blue-700",done:"bg-green-200 text-green-700"};return a.jsx(J,{children:a.jsxs("div",{className:"space-y-6 pb-10",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(G,{variant:"ghost",size:"icon",onClick:O,children:a.jsx(XI,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:K(p,"project_name")}),a.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:K(g,"company_name")})]})]}),a.jsx(G,{variant:"outline",className:"self-start sm:self-auto",children:"Settings"})]}),a.jsx(ve,{children:a.jsxs(_e,{className:"pt-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"Overall Progress"}),a.jsxs("span",{className:"text-sm font-bold",children:[p.progress||0,"%"]})]}),a.jsx(da,{value:p.progress||0,className:"h-3"})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[a.jsx("div",{className:"lg:col-span-2 space-y-4 lg:space-y-6",children:a.jsxs(Lh,{defaultValue:"tasks",children:[a.jsxs(Uc,{className:"w-full sm:w-auto",children:[a.jsx(Ln,{value:"tasks",className:"flex-1 sm:flex-none",children:"Tasks"}),a.jsx(Ln,{value:"images",className:"flex-1 sm:flex-none",children:"Images"}),a.jsx(Ln,{value:"comments",className:"flex-1 sm:flex-none",children:"Comments"})]}),a.jsxs(Fn,{value:"tasks",className:"space-y-3",children:[j.map(U=>{var I;const R=_.find(N=>N.user_id===U.assigned_to);return a.jsx(ve,{children:a.jsx(_e,{className:"pt-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold",children:K(U,"task_name")}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:K(U,"description")}),a.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[a.jsx(ze,{className:X("text-xs",W[U.task_status]),children:((I=U.task_status)==null?void 0:I.replace("_"," "))||"todo"}),U.due_date&&a.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[a.jsx(yc,{className:"h-3 w-3"}),"Due: ",new Date(U.due_date).toLocaleDateString()]})]})]}),R&&a.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[a.jsx("div",{className:"text-2xl mb-1",children:R.avatar||""}),K(R,"user_name")]})]})})},U.task_id)}),a.jsx(G,{variant:"outline",className:"w-full",children:"+ Add New Task"})]}),a.jsx(Fn,{value:"images",children:a.jsx(ve,{children:a.jsxs(_e,{className:"pt-6",children:[a.jsx("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(U=>a.jsx("div",{className:"aspect-square bg-muted rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-4xl",children:""})},U))}),a.jsxs(G,{variant:"outline",className:"w-full mt-4",children:[a.jsx(NL,{className:"h-4 w-4 mr-2"}),"Upload Images"]})]})})}),a.jsxs(Fn,{value:"comments",className:"space-y-3",children:[o.map(U=>{const R=[..._,g,w].find(I=>I&&I.auth_user_id===U.auth_user_id);return a.jsx(ve,{children:a.jsx(_e,{className:"pt-6",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"text-2xl",children:(R==null?void 0:R.avatar)||""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-semibold text-sm",children:R?K(R,"user_name"):"Unknown"}),a.jsx("p",{className:"text-sm mt-1",children:U.message}),a.jsx("span",{className:"text-xs text-muted-foreground mt-2 block",children:new Date(U.created_date||"").toLocaleString()})]})]})})},U.comment_id)}),j.length>0&&a.jsx(ve,{children:a.jsx(_e,{className:"pt-6",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Se,{placeholder:"Add a comment...",value:l,onChange:U=>c(U.target.value),onKeyDown:U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),L(j[0].task_id))}}),a.jsx(G,{size:"icon",onClick:()=>L(j[0].task_id),children:a.jsx(mv,{className:"h-4 w-4"})})]})})})]})]})}),a.jsxs("div",{className:"space-y-4 lg:order-last",children:[a.jsxs(ve,{children:[a.jsx(Me,{children:a.jsx(Qe,{className:"text-base sm:text-lg",children:"Project Summary"})}),a.jsxs(_e,{className:"space-y-3 sm:space-y-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-1",children:"Client"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xl",children:g.avatar}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold",children:K(g,"user_name")}),a.jsx("div",{className:"text-xs text-muted-foreground",children:K(g,"company_name")})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-1",children:"Project Manager"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xl",children:w.avatar}),a.jsx("div",{className:"text-sm",children:K(w,"user_name")})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:"Team"}),a.jsx("div",{className:"space-y-2",children:_.map(U=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xl",children:U.avatar||""}),a.jsx("div",{className:"text-sm",children:K(U,"user_name")})]},U.user_id))})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-1",children:"Timeline"}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Start: ",p.created_date?new Date(p.created_date).toLocaleDateString():"Not set",p.end_date&&a.jsxs("div",{children:["End: ",new Date(p.end_date).toLocaleDateString()]})]})]})]})]}),a.jsxs(ve,{children:[a.jsx(Me,{children:a.jsx(Qe,{className:"text-base sm:text-lg",children:"Recent Activity"})}),a.jsx(_e,{children:a.jsxs("div",{className:"space-y-3 text-xs",children:[a.jsxs("div",{className:"pb-2 border-b",children:[a.jsx("div",{className:"font-medium",children:"Task completed"}),a.jsx("div",{className:"text-muted-foreground",children:"2 hours ago"})]}),a.jsxs("div",{className:"pb-2 border-b",children:[a.jsx("div",{className:"font-medium",children:"New comment added"}),a.jsx("div",{className:"text-muted-foreground",children:"5 hours ago"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Images uploaded"}),a.jsx("div",{className:"text-muted-foreground",children:"1 day ago"})]})]})})]})]})]})]})})}function VB({project:t,client:e,manager:r,stages:n,onDelete:s,onClick:o,onDragStart:i,onStageChange:l,isDragging:c=!1}){const{t:u}=lt(),d=vo(),h=t.progress||0,m=g=>g?new Date(g).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):u("leads.notSet","Not set"),p=g=>{if(!g)return null;const y=new Date,x=(new Date(g).getTime()-y.getTime())/(1e3*60*60);return x<0?"overdue":x<24?"urgent":x<72?"soon":null},v=g=>{switch(p(g)){case"overdue":return"border-destructive ring-1 ring-destructive";case"urgent":return"border-orange-500 ring-1 ring-orange-500";case"soon":return"border-yellow-500";default:return""}};return a.jsxs(ve,{className:X("group relative hover:shadow-lg transition-all duration-200",d?"w-full border-l-4 border-l-blue-500 rtl:border-l-0 rtl:border-r-4 rtl:border-r-blue-500":"w-[280px] sm:w-[300px] border-l-4 rtl:border-l-0 rtl:border-r-4",!d&&(h===100?"border-l-green-500 rtl:border-r-green-500":"border-l-blue-500 rtl:border-r-blue-500"),v(t.end_date),c&&"opacity-50 rotate-2 scale-105"),draggable:!!i,onDragStart:g=>{i&&(g.dataTransfer.effectAllowed="move",g.dataTransfer.setData("text/plain",t.project_id.toString()),i(t.project_id))},children:[a.jsx(Me,{className:"pb-3 px-4 pt-4 cursor-pointer",onClick:o,children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-base mb-1 truncate group-hover:text-primary transition-colors",children:K(t,"project_name")}),K(t,"project_description")&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:K(t,"project_description")})]}),s&&a.jsxs(ba,{children:[a.jsx($c,{asChild:!0,onClick:g=>g.stopPropagation(),children:a.jsx(G,{variant:"ghost",size:"sm",className:X("h-8 w-8 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10",d?"opacity-100":"opacity-0 group-hover:opacity-100 transition-opacity"),children:a.jsx(zr,{className:"h-4 w-4"})})}),a.jsxs(ds,{onClick:g=>g.stopPropagation(),children:[a.jsxs(hs,{children:[a.jsx(ms,{children:u("projects.deleteProject")}),a.jsx(ps,{children:u("projects.deleteConfirmation",{name:K(t,"project_name")})})]}),a.jsxs(fs,{children:[a.jsx(vs,{children:u("buttons.cancel")}),a.jsx(gs,{onClick:g=>{g.stopPropagation(),s(t.project_id)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:u("buttons.delete")})]})]})]})]})}),a.jsxs(_e,{className:"px-4 pb-4 space-y-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[a.jsx("span",{children:u("projects.progress")}),a.jsxs("span",{className:"font-medium",children:[h,"%"]})]}),a.jsx(da,{value:h,className:"h-2"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e&&a.jsxs("div",{className:"flex items-start gap-1.5",children:[a.jsx(uh,{className:"h-3.5 w-3.5 text-muted-foreground mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Client"}),a.jsx("p",{className:"text-xs font-medium truncate",children:e.user_name})]})]}),a.jsxs("div",{className:"flex items-start gap-1.5",children:[a.jsx(ia,{className:"h-3.5 w-3.5 text-muted-foreground mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Manager"}),a.jsx("p",{className:"text-xs font-medium truncate",children:r?r.user_name:u("common.all","Unassigned")})]})]})]}),d&&l&&a.jsx("div",{className:"pt-1",children:a.jsxs(qe,{value:t.stage.toString(),onValueChange:g=>l(t.project_id,parseInt(g)),children:[a.jsx(We,{className:"h-7 text-xs",children:a.jsx(Ke,{placeholder:u("projects.selectStage","Select stage")})}),a.jsx(Ve,{children:n.filter(g=>["New","In Progress","Overdue","Completed"].includes(g.stage_name)).map(g=>a.jsx(ae,{value:g.stage_id.toString(),children:K(g,"stage_name")},g.stage_id))})]})}),a.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[a.jsx(yc,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:m(t.created_date)})]}),h===100?a.jsx(ze,{variant:"default",className:"bg-green-500 text-xs",children:"Completed"}):h>0?a.jsx(ze,{variant:"default",className:"text-xs",children:"In Progress"}):a.jsx(ze,{variant:"secondary",className:"text-xs",children:"Not Started"})]})]})]})}function HB(){var ke,se,Le,It;vn();const{hasRole:t,user:e}=bt();xa();const{t:r}=lt(),n=vo(),[s,o]=f.useState([]),[i,l]=f.useState([]),[c,u]=f.useState([]),[d,h]=f.useState([]),[m,p]=f.useState(!0);f.useState(!1),f.useState("");const[v,g]=f.useState(null),[y,w]=f.useState(""),[x,_]=f.useState(null),[b,j]=f.useState(null),[E,k]=f.useState(!1),[P,T]=f.useState(null),[C,L]=f.useState({project_name:"",project_description:"",client_id:"",progress:0,stage:"1"}),[O,J]=f.useState(!1),[W,U]=f.useState({project_name:"",project_description:"",client_id:""}),[R,I]=f.useState("kanban"),[N,F]=f.useState(null),[q,A]=f.useState(""),[Q,ye]=f.useState("all"),[xe,Ie]=f.useState("all"),[be,le]=f.useState({from:void 0,to:void 0}),Ne=f.useMemo(()=>s.filter($=>{const S=($.project_name||"").toLowerCase().includes(q.toLowerCase())||($.project_description||"").toLowerCase().includes(q.toLowerCase());let M=!0;Q==="todo"?M=($.progress||0)===0:Q==="in_progress"?M=($.progress||0)>0&&($.progress||0)<100:Q==="done"&&(M=($.progress||0)===100);const Y=xe==="all"||$.created_by&&$.created_by.toString()===xe;let ee=!0;if(be.from&&$.end_date){const pe=new Date($.end_date),oe=new Date(be.from);oe.setHours(0,0,0,0);const Fe=new Date(pe);if(Fe.setHours(0,0,0,0),ee=Fe>=oe,ee&&be.to){const gt=new Date(be.to);gt.setHours(23,59,59,999),ee=Fe<=gt}}else be.from&&!$.end_date&&(ee=!1);return S&&M&&Y&&ee}),[s,q,Q,xe,be]);f.useEffect(()=>{Re()},[]),f.useEffect(()=>{if(d.length>0&&P===null){const $=d.find(S=>S.stage_id===5);$&&T($.stage_id)}},[d,P]);const Re=async()=>{try{p(!0);const[$,S,M,Y]=await Promise.all([Nn.getAll(),qv.getAll(),Vr.getAll(),gr.getByType("projects")]);console.log("[Projects] Loaded data:",{projects:$.length,clients:S.length,users:M.length,stages:Y.length}),console.log("[Projects] Projects data:",$),console.log("[Projects] Stages data:",Y),o($),l(S),u(M),h(Y)}catch($){console.error("Failed to load data:",$)}finally{p(!1)}},z=async $=>{if(y.trim())try{await gr.update($,{stage_name:y.trim()}),h(d.map(S=>S.stage_id===$?{...S,stage_name:y.trim()}:S)),g(null),w("")}catch(S){console.error("Failed to update stage:",S)}},re=async $=>{if(s.filter(M=>M.stage===$).length>0){_($);return}try{await gr.delete($),h(d.filter(M=>M.stage_id!==$))}catch(M){console.error("Failed to delete stage:",M)}},H=async()=>{if(x)try{await gr.delete(x),h(d.filter($=>$.stage_id!==x)),_(null),Re()}catch($){console.error("Failed to delete stage:",$)}},de=$=>{j($)},Oe=$=>{$.preventDefault(),$.dataTransfer.dropEffect="move"},He=async $=>{if(!b)return;const S=s.find(M=>M.project_id===b);if(S&&S.stage!==$)try{await Nn.update(b,{stage:$}),o(s.map(M=>M.project_id===b?{...M,stage:$}:M))}catch(M){console.error("Failed to update project stage:",M)}j(null)},et=async($,S)=>{const M=s.find(Y=>Y.project_id===$);if(M&&M.stage!==S)try{await Nn.update($,{stage:S}),o(s.map(Y=>Y.project_id===$?{...Y,stage:S}:Y))}catch(Y){console.error("Failed to update project stage:",Y)}},ct=async $=>{try{await Nn.delete($),o(s.filter(S=>S.project_id!==$))}catch(S){console.error("Failed to delete project:",S)}},Mt=$=>{L(S=>({...S,stage:$.toString()})),k(!0)},B=async()=>{var $;if(C.project_name.trim())try{const S=hn({project_name:C.project_name.trim(),project_description:C.project_description.trim()||null,created_by:(($=e==null?void 0:e.profile)==null?void 0:$.user_id)||1,progress:C.progress,stage:parseInt(C.stage),end_date:null,auth_user_id:(e==null?void 0:e.id)||""},{project_name:"project_name",project_description:"project_description"}),M=await Nn.create(S);o([...s,M]),L({project_name:"",project_description:"",client_id:"",progress:0,stage:"1"}),k(!1)}catch(S){console.error("Failed to create project:",S)}},he=async()=>{var $;if(W.project_name.trim())try{const S=hn({project_name:W.project_name.trim(),project_description:W.project_description.trim()||null,created_by:(($=e==null?void 0:e.profile)==null?void 0:$.user_id)||1,progress:0,stage:1,end_date:null,auth_user_id:(e==null?void 0:e.id)||""},{project_name:"project_name",project_description:"project_description"}),M=await Nn.create(S);o([...s,M]),U({project_name:"",project_description:"",client_id:""}),J(!1)}catch(S){console.error("Failed to create lead:",S)}},V=d.filter($=>$.stage_type==="projects").sort(($,S)=>{const M=$.stager_order_index??0,Y=S.stager_order_index??0;return cn()?Y-M:M-Y}),ne=V.map($=>({id:$.stage_id,name:K($,"stage_name"),color:$.color,count:Ne.filter(S=>S.stage===$.stage_id).length}));return m?a.jsx("div",{className:"flex items-center justify-center h-full py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):a.jsxs("div",{className:"space-y-8 h-screen",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:r("projects.title")}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"bg-muted p-1 rounded-lg flex items-center gap-1",children:[a.jsx(G,{variant:R==="kanban"?"default":"ghost",size:"sm",onClick:()=>I("kanban"),className:"h-8 w-8 p-0","data-active":R==="kanban",children:a.jsx(uv,{className:"h-4 w-4"})}),a.jsx(G,{variant:R==="list"?"default":"ghost",size:"sm",onClick:()=>I("list"),className:"h-8 w-8 p-0","data-active":R==="list",children:a.jsx(dv,{className:"h-4 w-4"})})]}),a.jsxs(G,{onClick:()=>J(!0),children:[a.jsx(At,{className:"mr-2 h-4 w-4"})," ",r("projects.newProject")]})]})]}),a.jsx(lx,{onSearch:A,onFilterStatus:ye,onFilterAssignee:Ie,onFilterDateRange:le,users:c,statuses:[{value:"todo",label:"Not Started"},{value:"in_progress",label:"In Progress"},{value:"done",label:"Completed"}]}),R==="kanban"?a.jsxs(a.Fragment,{children:[a.jsx(Dt,{open:E,onOpenChange:k,children:a.jsxs(kt,{className:"w-[95vw] sm:w-full sm:max-w-[500px] max-h-[85vh] overflow-y-auto",children:[a.jsxs(Ct,{children:[a.jsx(Et,{children:r("projects.createProject")}),a.jsx(Wt,{children:r("projects.createProjectDesc")})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-sm font-medium",children:[r("projects.projectName")," *"]}),a.jsx(Se,{value:C.project_name,onChange:$=>L(S=>({...S,project_name:$.target.value})),placeholder:r("projects.projectNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:r("projects.description")}),a.jsx(Hr,{value:C.project_description,onChange:$=>L(S=>({...S,project_description:$.target.value})),placeholder:r("projects.descriptionPlaceholder"),rows:3})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:r("projects.client")}),a.jsxs(qe,{value:C.client_id,onValueChange:$=>L(S=>({...S,client_id:$})),children:[a.jsx(We,{children:a.jsx(Ke,{placeholder:r("projects.selectClient")})}),a.jsx(Ve,{children:i.map($=>a.jsx(ae,{value:$.user_id.toString(),children:K($,"user_name")},$.user_id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:r("projects.initialProgress")}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"range",min:"0",max:"100",value:C.progress,onChange:$=>L(S=>({...S,progress:parseInt($.target.value)})),className:"w-full h-1.5"}),a.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[a.jsx("span",{children:"0%"}),a.jsxs("span",{children:[C.progress,"%"]}),a.jsx("span",{children:"100%"})]})]})]})]}),a.jsxs(Yt,{children:[a.jsx(G,{variant:"outline",onClick:()=>k(!1),children:r("buttons.cancel")}),a.jsxs(G,{onClick:B,disabled:!((ke=C.project_name)!=null&&ke.trim()),children:[a.jsx(ta,{className:"h-4 w-4 mr-2"}),r("projects.createProject")]})]})]})}),a.jsxs(cx,{stages:ne,currentStageId:P||((se=ne[0])==null?void 0:se.id),onStageChange:T,children:[a.jsx("div",{className:"flex gap-6 pb-6 overflow-x-auto scrollbar-hide max-w-full pl-6 rtl:pr-6 rtl:pl-0",children:V.sort(($,S)=>$.stage_id-S.stage_id).filter($=>{var M;return window.innerWidth<1024?$.stage_id===(P||((M=ne[0])==null?void 0:M.id)):!0}).map(($,S)=>{var Y,ee;const M=Ne.filter(pe=>pe.stage===$.stage_id);return console.log(`[Projects] Stage ${$.stage_name} (${$.stage_id}): ${M.length} projects`),console.log("[Projects] Stage projects:",M),a.jsxs("div",{className:X("flex-shrink-0 animate-fade-in h-[calc(100vh-300px)]",n?"w-full":"w-[280px] sm:w-[300px]"),style:{animationDelay:`${S*.1}s`},onDragOver:Oe,onDrop:()=>He($.stage_id),children:[!n&&a.jsx("div",{className:X("rounded-xl bg-muted/30 backdrop-blur p-4 mb-5 shadow-soft",$.color||"border-l-4 border-primary/50"),children:a.jsx("div",{className:"flex items-center justify-between mb-2",children:v===$.stage_id?a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(Se,{value:y,onChange:pe=>w(pe.target.value),onKeyDown:pe=>{pe.key==="Enter"&&z($.stage_id),pe.key==="Escape"&&(g(null),w(""))},className:"h-8 text-sm font-bold",autoFocus:!0}),a.jsx(G,{size:"sm",variant:"ghost",onClick:()=>z($.stage_id),className:"h-8 w-8 p-0",children:""})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(dh,{className:"h-4 w-4 text-muted-foreground cursor-move"}),a.jsx("h2",{className:"font-bold text-base",children:K($,"stage_name")})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-bold px-3 py-1 rounded-full bg-background shadow-sm",children:M.length}),a.jsxs(a.Fragment,{children:[a.jsx(G,{size:"sm",variant:"ghost",onClick:()=>{g($.stage_id),w(K($,"stage_name"))},className:"h-6 w-6 p-0",title:r("buttons.edit"),children:a.jsx(fv,{className:"h-3 w-3"})}),a.jsx(G,{size:"sm",variant:"ghost",onClick:()=>re($.stage_id),className:"h-6 w-6 p-0 text-destructive",title:r("buttons.delete"),children:a.jsx(zr,{className:"h-3 w-3"})})]})]})]})})}),a.jsxs("div",{className:"space-y-4 max-h-[calc(100vh-300px)] overflow-y-auto scrollbar-hide",children:[((Y=d.sort((pe,oe)=>(pe.stager_order_index||0)-(oe.stager_order_index||0))[0])==null?void 0:Y.stage_id)===$.stage_id&&a.jsx("div",{className:"mb-4",children:a.jsx(ve,{className:X("group relative hover:shadow-lg transition-all duration-200 cursor-pointer","border-l-4 border-l-gray-300 rtl:border-l-0 rtl:border-r-4 rtl:border-r-gray-300","flex items-center justify-center bg-muted/20",n?"w-full h-[100px]":"w-[280px] sm:w-[300px] h-[120px]"),onClick:()=>Mt($.stage_id),children:a.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[a.jsx(At,{className:"h-8 w-8"}),a.jsx("span",{className:"text-sm font-medium",children:r("projects.addNewProjectCard")})]})})}),M.map(pe=>{const oe=c.find(Fe=>Fe.auth_user_id===pe.created_by);return a.jsx("div",{children:a.jsx(VB,{project:pe,client:null,manager:oe||null,stages:V,onDelete:()=>ct(pe.project_id),onClick:()=>F(pe.project_id),onDragStart:de,onStageChange:et,isDragging:b===pe.project_id})},pe.project_id)}),((ee=d.sort((pe,oe)=>(pe.stager_order_index||0)-(oe.stager_order_index||0))[0])==null?void 0:ee.stage_id)!==$.stage_id&&a.jsx("div",{className:"mt-2",children:a.jsxs(G,{variant:"outline",size:"sm",className:"w-full h-12 border-dashed text-muted-foreground hover:text-foreground",onClick:()=>Mt($.stage_id),children:[a.jsx(At,{className:"h-4 w-4 mr-2"}),r("projects.addProject")]})})]})]},$.stage_id)})}),a.jsx(ba,{open:!!x,onOpenChange:()=>_(null),children:a.jsxs(ds,{children:[a.jsxs(hs,{children:[a.jsx(ms,{children:r("leads.deleteStage")}),a.jsx(ps,{children:r("leads.deleteStageConfirmation",{count:s.filter($=>$.stage===x).length})})]}),a.jsxs(fs,{children:[a.jsx(vs,{children:r("buttons.cancel")}),a.jsx(gs,{onClick:H,className:"bg-destructive text-destructive-foreground",children:r("buttons.delete")})]})]})})]})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-lg font-semibold",children:[r("projects.title")," (",s.length,")"]}),a.jsx(Dt,{open:E,onOpenChange:k,children:a.jsxs(kt,{className:"w-[95vw] sm:w-full sm:max-w-[500px] max-h-[85vh] overflow-y-auto",children:[a.jsxs(Ct,{children:[a.jsx(Et,{children:r("projects.createProject")}),a.jsx(Wt,{children:r("projects.createProjectDesc")})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-sm font-medium",children:[r("projects.projectName")," *"]}),a.jsx(Se,{value:C.project_name,onChange:$=>L(S=>({...S,project_name:$.target.value})),placeholder:r("projects.projectNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:r("projects.description")}),a.jsx(Hr,{value:C.project_description,onChange:$=>L(S=>({...S,project_description:$.target.value})),placeholder:r("projects.descriptionPlaceholder"),rows:3})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:r("projects.client")}),a.jsxs(qe,{value:C.client_id,onValueChange:$=>L(S=>({...S,client_id:$})),children:[a.jsx(We,{children:a.jsx(Ke,{placeholder:r("projects.selectClient")})}),a.jsx(Ve,{children:i.map($=>a.jsx(ae,{value:$.user_id.toString(),children:K($,"user_name")},$.user_id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:r("projects.initialProgress")}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"range",min:"0",max:"100",value:C.progress,onChange:$=>L(S=>({...S,progress:parseInt($.target.value)})),className:"w-full h-1.5"}),a.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[a.jsx("span",{children:"0%"}),a.jsxs("span",{children:[C.progress,"%"]}),a.jsx("span",{children:"100%"})]})]})]})]}),a.jsxs(Yt,{children:[a.jsx(G,{variant:"outline",onClick:()=>k(!1),children:r("buttons.cancel")}),a.jsxs(G,{onClick:B,disabled:!((Le=C.project_name)!=null&&Le.trim()),children:[a.jsx(ta,{className:"h-4 w-4 mr-2"}),r("projects.createProject")]})]})]})})]}),a.jsxs(ve,{className:"max-h-[calc(100vh-300px)] flex flex-col",children:[a.jsx(Me,{className:"flex-shrink-0",children:a.jsx(Qe,{children:r("projects.title")})}),a.jsx(_e,{className:"flex-1 overflow-y-auto",children:a.jsxs(Rh,{children:[a.jsx(Oh,{children:a.jsxs(Mn,{children:[a.jsx(St,{children:r("projects.projectName")}),a.jsx(St,{children:r("projects.client")}),a.jsx(St,{children:r("projects.progress")}),a.jsx(St,{children:r("common.created")}),a.jsx(St,{children:r("tasks.stage")}),a.jsx(St,{className:"w-[100px]",children:r("common.actions")})]})}),a.jsx(Dh,{children:s.length===0?a.jsx(Mn,{children:a.jsx(ht,{colSpan:6,className:"text-center py-12",children:a.jsx("div",{className:"text-muted-foreground",children:r("projects.noProjectsYet")})})}):s.map($=>{const S=i.find(Y=>Y.auth_user_id===$.created_by),M=d.find(Y=>Y.stage_id===$.stage);return a.jsxs(Mn,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>F($.project_id),children:[a.jsx(ht,{children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:K($,"project_name")}),K($,"project_description")&&a.jsx("div",{className:"text-sm text-muted-foreground truncate max-w-xs",children:K($,"project_description")})]})}),a.jsx(ht,{children:S?K(S,"user_name"):r("common.all","Unassigned")}),a.jsx(ht,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(da,{value:$.progress,className:"w-16"}),a.jsxs("span",{className:"text-sm",children:[$.progress,"%"]})]})}),a.jsx(ht,{children:$.created_date?new Date($.created_date).toLocaleDateString():r("leads.notSet")}),a.jsx(ht,{children:M?K(M,"stage_name"):r("leads.unknown")}),a.jsx(ht,{children:a.jsx(G,{variant:"ghost",size:"sm",onClick:Y=>{Y.stopPropagation(),F($.project_id)},children:r("common.view")})})]},$.project_id)})})]})})]})]}),a.jsx(Dt,{open:O,onOpenChange:J,children:a.jsxs(kt,{className:"w-[95vw] sm:w-full sm:max-w-[500px] max-h-[85vh] overflow-y-auto",children:[a.jsxs(Ct,{children:[a.jsx(Et,{children:r("projects.createProject")}),a.jsx(Wt,{children:r("projects.createProjectDesc")})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-sm font-medium",children:[r("projects.projectName")," *"]}),a.jsx(Se,{value:W.project_name,onChange:$=>U(S=>({...S,project_name:$.target.value})),placeholder:r("projects.projectNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:r("projects.description")}),a.jsx(Hr,{value:W.project_description,onChange:$=>U(S=>({...S,project_description:$.target.value})),placeholder:r("projects.descriptionPlaceholder"),rows:3})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:r("projects.client")}),a.jsxs(qe,{value:W.client_id,onValueChange:$=>U(S=>({...S,client_id:$})),children:[a.jsx(We,{children:a.jsx(Ke,{placeholder:r("projects.selectClient")})}),a.jsx(Ve,{children:i.map($=>a.jsx(ae,{value:$.user_id.toString(),children:K($,"user_name")},$.user_id))})]})]})]}),a.jsxs(Yt,{children:[a.jsx(G,{variant:"outline",onClick:()=>J(!1),children:r("buttons.cancel")}),a.jsxs(G,{onClick:he,disabled:!((It=W.project_name)!=null&&It.trim()),children:[a.jsx(ta,{className:"h-4 w-4 mr-2"}),r("projects.createProject")]})]})]})}),a.jsx(Ph,{open:!!N,onOpenChange:$=>!$&&F(null),children:a.jsxs(Dc,{side:"right",className:"w-full sm:max-w-2xl p-0 overflow-hidden sm:w-[800px]",children:[a.jsxs(Uk,{className:"sr-only",children:[a.jsx(Vv,{children:"Project Details"}),a.jsx(Hv,{children:"View and manage project information"})]}),N&&a.jsx(sE,{projectId:N,onClose:()=>F(null)})]})})]})}function qB(t,e){return f.useReducer((r,n)=>e[r][n]??r,t)}var dx="ScrollArea",[aE,Qz]=br(dx),[KB,Gr]=aE(dx),oE=f.forwardRef((t,e)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:o=600,...i}=t,[l,c]=f.useState(null),[u,d]=f.useState(null),[h,m]=f.useState(null),[p,v]=f.useState(null),[g,y]=f.useState(null),[w,x]=f.useState(0),[_,b]=f.useState(0),[j,E]=f.useState(!1),[k,P]=f.useState(!1),T=Ae(e,L=>c(L)),C=wc(s);return a.jsx(KB,{scope:r,type:n,dir:C,scrollHideDelay:o,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:m,scrollbarX:p,onScrollbarXChange:v,scrollbarXEnabled:j,onScrollbarXEnabledChange:E,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:k,onScrollbarYEnabledChange:P,onCornerWidthChange:x,onCornerHeightChange:b,children:a.jsx(je.div,{dir:C,...i,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":_+"px",...t.style}})})});oE.displayName=dx;var iE="ScrollAreaViewport",lE=f.forwardRef((t,e)=>{const{__scopeScrollArea:r,children:n,nonce:s,...o}=t,i=Gr(iE,r),l=f.useRef(null),c=Ae(e,l,i.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),a.jsx(je.div,{"data-radix-scroll-area-viewport":"",...o,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t.style},children:a.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});lE.displayName=iE;var Wn="ScrollAreaScrollbar",hx=f.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=Gr(Wn,t.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:i}=s,l=t.orientation==="horizontal";return f.useEffect(()=>(l?o(!0):i(!0),()=>{l?o(!1):i(!1)}),[l,o,i]),s.type==="hover"?a.jsx(GB,{...n,ref:e,forceMount:r}):s.type==="scroll"?a.jsx(YB,{...n,ref:e,forceMount:r}):s.type==="auto"?a.jsx(cE,{...n,ref:e,forceMount:r}):s.type==="always"?a.jsx(fx,{...n,ref:e}):null});hx.displayName=Wn;var GB=f.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=Gr(Wn,t.__scopeScrollArea),[o,i]=f.useState(!1);return f.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),i(!0)},d=()=>{c=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),a.jsx(cr,{present:r||o,children:a.jsx(cE,{"data-state":o?"visible":"hidden",...n,ref:e})})}),YB=f.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=Gr(Wn,t.__scopeScrollArea),o=t.orientation==="horizontal",i=$h(()=>c("SCROLL_END"),100),[l,c]=qB("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),f.useEffect(()=>{const u=s.viewport,d=o?"scrollLeft":"scrollTop";if(u){let h=u[d];const m=()=>{const p=u[d];h!==p&&(c("SCROLL"),i()),h=p};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[s.viewport,o,c,i]),a.jsx(cr,{present:r||l!=="hidden",children:a.jsx(fx,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:ie(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ie(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),cE=f.forwardRef((t,e)=>{const r=Gr(Wn,t.__scopeScrollArea),{forceMount:n,...s}=t,[o,i]=f.useState(!1),l=t.orientation==="horizontal",c=$h(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;i(l?u:d)}},10);return Di(r.viewport,c),Di(r.content,c),a.jsx(cr,{present:n||o,children:a.jsx(fx,{"data-state":o?"visible":"hidden",...s,ref:e})})}),fx=f.forwardRef((t,e)=>{const{orientation:r="vertical",...n}=t,s=Gr(Wn,t.__scopeScrollArea),o=f.useRef(null),i=f.useRef(0),[l,c]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=mE(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>o.current=m,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:m=>i.current=m};function h(m,p){return tz(m,i.current,l,p)}return r==="horizontal"?a.jsx(QB,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const m=s.viewport.scrollLeft,p=k0(m,l,s.dir);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=h(m,s.dir))}}):r==="vertical"?a.jsx(JB,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const m=s.viewport.scrollTop,p=k0(m,l);o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=h(m))}}):null}),QB=f.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...s}=t,o=Gr(Wn,t.__scopeScrollArea),[i,l]=f.useState(),c=f.useRef(null),u=Ae(e,c,o.onScrollbarXChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(dE,{"data-orientation":"horizontal",...s,ref:u,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Fh(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(o.viewport){const m=o.viewport.scrollLeft+d.deltaX;t.onWheelScroll(m),gE(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Bd(i.paddingLeft),paddingEnd:Bd(i.paddingRight)}})}})}),JB=f.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...s}=t,o=Gr(Wn,t.__scopeScrollArea),[i,l]=f.useState(),c=f.useRef(null),u=Ae(e,c,o.onScrollbarYChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(dE,{"data-orientation":"vertical",...s,ref:u,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Fh(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(o.viewport){const m=o.viewport.scrollTop+d.deltaY;t.onWheelScroll(m),gE(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Bd(i.paddingTop),paddingEnd:Bd(i.paddingBottom)}})}})}),[XB,uE]=aE(Wn),dE=f.forwardRef((t,e)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:o,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...m}=t,p=Gr(Wn,r),[v,g]=f.useState(null),y=Ae(e,T=>g(T)),w=f.useRef(null),x=f.useRef(""),_=p.viewport,b=n.content-n.viewport,j=Ft(d),E=Ft(c),k=$h(h,10);function P(T){if(w.current){const C=T.clientX-w.current.left,L=T.clientY-w.current.top;u({x:C,y:L})}}return f.useEffect(()=>{const T=C=>{const L=C.target;(v==null?void 0:v.contains(L))&&j(C,b)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[_,v,b,j]),f.useEffect(E,[n,E]),Di(v,k),Di(p.content,k),a.jsx(XB,{scope:r,scrollbar:v,hasThumb:s,onThumbChange:Ft(o),onThumbPointerUp:Ft(i),onThumbPositionChange:E,onThumbPointerDown:Ft(l),children:a.jsx(je.div,{...m,ref:y,style:{position:"absolute",...m.style},onPointerDown:ie(t.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),w.current=v.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),P(T))}),onPointerMove:ie(t.onPointerMove,P),onPointerUp:ie(t.onPointerUp,T=>{const C=T.target;C.hasPointerCapture(T.pointerId)&&C.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=x.current,p.viewport&&(p.viewport.style.scrollBehavior=""),w.current=null})})})}),Ud="ScrollAreaThumb",hE=f.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=uE(Ud,t.__scopeScrollArea);return a.jsx(cr,{present:r||s.hasThumb,children:a.jsx(ZB,{ref:e,...n})})}),ZB=f.forwardRef((t,e)=>{const{__scopeScrollArea:r,style:n,...s}=t,o=Gr(Ud,r),i=uE(Ud,r),{onThumbPositionChange:l}=i,c=Ae(e,h=>i.onThumbChange(h)),u=f.useRef(void 0),d=$h(()=>{u.current&&(u.current(),u.current=void 0)},100);return f.useEffect(()=>{const h=o.viewport;if(h){const m=()=>{if(d(),!u.current){const p=rz(h,l);u.current=p,l()}};return l(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[o.viewport,d,l]),a.jsx(je.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:ie(t.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),v=h.clientX-p.left,g=h.clientY-p.top;i.onThumbPointerDown({x:v,y:g})}),onPointerUp:ie(t.onPointerUp,i.onThumbPointerUp)})});hE.displayName=Ud;var mx="ScrollAreaCorner",fE=f.forwardRef((t,e)=>{const r=Gr(mx,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?a.jsx(ez,{...t,ref:e}):null});fE.displayName=mx;var ez=f.forwardRef((t,e)=>{const{__scopeScrollArea:r,...n}=t,s=Gr(mx,r),[o,i]=f.useState(0),[l,c]=f.useState(0),u=!!(o&&l);return Di(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),Di(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),i(d)}),u?a.jsx(je.div,{...n,ref:e,style:{width:o,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Bd(t){return t?parseInt(t,10):0}function mE(t,e){const r=t/e;return isNaN(r)?0:r}function Fh(t){const e=mE(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*e;return Math.max(n,18)}function tz(t,e,r,n="ltr"){const s=Fh(r),o=s/2,i=e||o,l=s-i,c=r.scrollbar.paddingStart+i,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,h=n==="ltr"?[0,d]:[d*-1,0];return pE([c,u],h)(t)}function k0(t,e,r="ltr"){const n=Fh(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=e.scrollbar.size-s,i=e.content-e.viewport,l=o-n,c=r==="ltr"?[0,i]:[i*-1,0],u=Ep(t,c);return pE([0,i],[0,l])(u)}function pE(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function gE(t,e){return t>0&&t<e}var rz=(t,e=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function s(){const o={left:t.scrollLeft,top:t.scrollTop},i=r.left!==o.left,l=r.top!==o.top;(i||l)&&e(),r=o,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function $h(t,e){const r=Ft(t),n=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(n.current),[]),f.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,e)},[r,e])}function Di(t,e){const r=Ft(e);Pt(()=>{let n=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(t),()=>{window.cancelAnimationFrame(n),s.unobserve(t)}}},[t,r])}var vE=oE,nz=lE,sz=fE;const Tr=f.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(vE,{ref:n,className:X("relative overflow-hidden",t),...r,children:[a.jsx(nz,{className:"h-full w-full rounded-[inherit]",children:e}),a.jsx(xE,{}),a.jsx(sz,{})]}));Tr.displayName=vE.displayName;const xE=f.forwardRef(({className:t,orientation:e="vertical",...r},n)=>a.jsx(hx,{ref:n,orientation:e,className:X("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:a.jsx(hE,{className:"relative flex-1 rounded-full bg-border"})}));xE.displayName=hx.displayName;function az(){return _j.useSyncExternalStore(oz,()=>!0,()=>!1)}function oz(){return()=>{}}var px="Avatar",[iz,Jz]=br(px),[lz,yE]=iz(px),wE=f.forwardRef((t,e)=>{const{__scopeAvatar:r,...n}=t,[s,o]=f.useState("idle");return a.jsx(lz,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:a.jsx(je.span,{...n,ref:e})})});wE.displayName=px;var _E="AvatarImage",bE=f.forwardRef((t,e)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...o}=t,i=yE(_E,r),l=cz(n,o),c=Ft(u=>{s(u),i.onImageLoadingStatusChange(u)});return Pt(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?a.jsx(je.img,{...o,ref:e,src:n}):null});bE.displayName=_E;var jE="AvatarFallback",SE=f.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:n,...s}=t,o=yE(jE,r),[i,l]=f.useState(n===void 0);return f.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),i&&o.imageLoadingStatus!=="loaded"?a.jsx(je.span,{...s,ref:e}):null});SE.displayName=jE;function C0(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function cz(t,{referrerPolicy:e,crossOrigin:r}){const n=az(),s=f.useRef(null),o=n?(s.current||(s.current=new window.Image),s.current):null,[i,l]=f.useState(()=>C0(o,t));return Pt(()=>{l(C0(o,t))},[o,t]),Pt(()=>{const c=h=>()=>{l(h)};if(!o)return;const u=c("loaded"),d=c("error");return o.addEventListener("load",u),o.addEventListener("error",d),e&&(o.referrerPolicy=e),typeof r=="string"&&(o.crossOrigin=r),()=>{o.removeEventListener("load",u),o.removeEventListener("error",d)}},[o,r,e]),i}var NE=wE,kE=bE,CE=SE;const ra=f.forwardRef(({className:t,...e},r)=>a.jsx(NE,{ref:r,className:X("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));ra.displayName=NE.displayName;const Qa=f.forwardRef(({className:t,...e},r)=>a.jsx(kE,{ref:r,className:X("aspect-square h-full w-full",t),...e}));Qa.displayName=kE.displayName;const na=f.forwardRef(({className:t,...e},r)=>a.jsx(CE,{ref:r,className:X("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));na.displayName=CE.displayName;function uz(){const{user:t,createStaffUser:e,deleteUser:r,updateUserRole:n,updateUser:s}=bt();xa();const{t:o}=lt(),[i,l]=f.useState([]),[c,u]=f.useState(!0),[d,h]=f.useState(""),[m,p]=f.useState(!1),[v,g]=f.useState(""),[y,w]=f.useState(""),[x,_]=f.useState(""),[b,j]=f.useState("employee"),[E,k]=f.useState(""),[P,T]=f.useState(!1),[C,L]=f.useState("employees"),[O,J]=f.useState(!1),[W,U]=f.useState(null),[R,I]=f.useState(!1),[N,F]=f.useState({user_name:"",user_email:"",user_phone:"",user_role:""}),[q,A]=f.useState(!1),[Q,ye]=f.useState("");f.useEffect(()=>{xe()},[]);const xe=async()=>{try{u(!0);const H=await Vr.getAll();l(H)}catch(H){console.error("Failed to load users:",H)}finally{u(!1)}},Ie=i.filter(H=>{var B,he,V;const de=C==="employees",Oe=C==="clients";if(de&&H.user_role==="client"||Oe&&H.user_role!=="client")return!1;const He=((B=K(H,"user_name"))==null?void 0:B.toLowerCase())||"",et=((he=H.user_email)==null?void 0:he.toLowerCase())||"",ct=((V=H.user_role)==null?void 0:V.toLowerCase())||"",Mt=d.toLowerCase();return He.includes(Mt)||et.includes(Mt)||ct.includes(Mt)}),be=H=>{switch(H){case"admin":return"destructive";case"manager":return"default";case"employee":return"secondary";case"client":return"outline";default:return"secondary"}},le=async H=>{if(H.preventDefault(),!P){k(""),T(!0);try{const de=hn({user_name:v,user_email:y,user_role:b},{user_name:"user_name"});await e(y,x,{name:v,role:b,localizedData:de}),p(!1),g(""),w(""),_(""),j("employee"),xe()}catch(de){k(de.message||o("users.addUserError"))}finally{T(!1)}}},Ne=async(H,de)=>{if(confirm(o("users.deleteConfirmation",{name:de})))try{await r(H),xe()}catch(Oe){alert(`${o("users.deleteError")}: ${Oe.message}`)}},Re=async(H,de)=>{try{await n(H,de),xe()}catch(Oe){alert(`${o("users.updateRoleError")}: ${Oe.message}`)}},z=async H=>{var de;if(H.preventDefault(),!(q||!W)){ye(""),A(!0);try{const Oe={};N.user_name!==K(W,"user_name")&&(Oe.user_name=N.user_name),N.user_email!==W.user_email&&(Oe.user_email=N.user_email),N.user_phone!==((de=W.user_phone)==null?void 0:de.toString())&&(Oe.user_phone=N.user_phone?parseInt(N.user_phone):null),N.user_role!==W.user_role&&(Oe.user_role=N.user_role),Object.keys(Oe).length>0?(await s(W.auth_user_id||"",Oe),I(!1),xe()):I(!1)}catch(Oe){ye(Oe.message||o("users.updateUserError"))}finally{A(!1)}}},re=H=>{var de;U(H),F({user_name:K(H,"user_name")||"",user_email:H.user_email||"",user_phone:((de=H.user_phone)==null?void 0:de.toString())||"",user_role:H.user_role||""}),I(!1),ye(""),J(!0)};return c?a.jsx("div",{className:"flex items-center justify-center h-full py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between md:justify-start gap-4",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:o("users.title")}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($n,{className:"h-5 w-5"}),a.jsxs("span",{className:"text-sm font-medium",children:[i.length," ",o("users.totalUsers")]})]}),a.jsx("p",{className:"hidden md:block text-muted-foreground",children:o("users.subtitle")})]}),a.jsxs("div",{className:"flex flex-row items-center border rounded-lg p-1 bg-muted/50 w-fit",children:[a.jsxs(G,{variant:C==="employees"?"default":"ghost",size:"sm",onClick:()=>L("employees"),className:"h-8 px-3",children:[a.jsx(kL,{className:"h-4 w-4 mr-2"}),o("users.employees")]}),a.jsxs(G,{variant:C==="clients"?"default":"ghost",size:"sm",onClick:()=>L("clients"),className:"h-8 px-3",children:[a.jsx(ia,{className:"h-4 w-4 mr-2"}),o("users.clients")]})]}),C==="employees"&&a.jsxs("div",{className:"space-y-6",children:[(t==null?void 0:t.role)!=="manager"&&a.jsxs(Dt,{open:m,onOpenChange:p,children:[a.jsx(Ya,{asChild:!0,children:a.jsxs(G,{className:"w-full",children:[a.jsx(At,{className:"h-4 w-4 mr-2"}),o("users.addUser")]})}),a.jsxs(kt,{children:[a.jsxs(Ct,{children:[a.jsx(Et,{children:o("users.addNewUser")}),a.jsx(Wt,{children:o("users.addUserDescription")})]}),a.jsxs("form",{onSubmit:le,className:"space-y-4",children:[E&&a.jsx(Ei,{variant:"destructive",children:a.jsx(Pi,{children:E})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ce,{htmlFor:"formName",children:o("users.fullName")}),a.jsx(Se,{id:"formName",value:v,onChange:H=>g(H.target.value),placeholder:o("users.fullName"),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ce,{htmlFor:"formEmail",children:o("users.email")}),a.jsx(Se,{id:"formEmail",type:"email",value:y,onChange:H=>w(H.target.value),placeholder:o("users.email"),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ce,{htmlFor:"formPassword",children:o("users.password")}),a.jsx(Se,{id:"formPassword",type:"password",value:x,onChange:H=>_(H.target.value),placeholder:o("users.password"),required:!0,minLength:6})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ce,{htmlFor:"formRole",children:o("users.role")}),a.jsxs(qe,{value:b,onValueChange:H=>j(H),children:[a.jsx(We,{children:a.jsx(Ke,{})}),a.jsxs(Ve,{children:[a.jsx(ae,{value:"employee",children:o("users.employee")}),a.jsx(ae,{value:"manager",children:o("users.manager")}),a.jsx(ae,{value:"admin",children:o("users.admin")})]})]})]}),a.jsx(G,{type:"submit",className:"w-full",disabled:P,children:o(P?"users.addingUser":"users.addUser")})]})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(so,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(Se,{placeholder:o("users.searchPlaceholder"),value:d,onChange:H=>h(H.target.value),className:"pl-10"})]}),a.jsxs(Tr,{className:"flex-1",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Ie.map(H=>a.jsxs(ve,{className:"hover:shadow-md transition-shadow",children:[a.jsx(Me,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(ra,{className:"h-12 w-12",children:[a.jsx(Qa,{src:H.avatar||""}),a.jsx(na,{children:K(H,"user_name").charAt(0).toUpperCase()})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx(Qe,{className:"text-lg truncate",children:K(H,"user_name")}),a.jsx(ze,{variant:be(H.user_role),className:"mt-1",children:o(`users.${H.user_role}`)})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(G,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>re(H),children:a.jsx(kd,{className:"h-4 w-4"})}),(t==null?void 0:t.role)==="admin"&&a.jsx(G,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>Ne(H.auth_user_id||"",K(H,"user_name")),children:a.jsx(zr,{className:"h-4 w-4"})})]})]})}),a.jsxs(_e,{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(zw,{className:"h-4 w-4"}),a.jsx("span",{className:"truncate",children:H.user_email})]}),H.client_contact&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(kp,{className:"h-4 w-4"}),a.jsx("span",{children:H.client_contact})]}),H.company_name&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Uw,{className:"h-4 w-4"}),a.jsx("span",{className:"truncate",children:H.company_name})]}),(H.user_role==="employee"||H.user_role==="manager")&&(t==null?void 0:t.role)==="admin"&&a.jsxs("div",{className:"pt-2 border-t",children:[a.jsx("div",{className:"text-xs font-medium mb-1",children:o("users.changeRole")}),a.jsxs(qe,{value:H.user_role,onValueChange:de=>Re(H.auth_user_id||"",de),children:[a.jsx(We,{className:"w-full h-8",children:a.jsx(Ke,{})}),a.jsxs(Ve,{children:[a.jsx(ae,{value:"employee",children:o("users.employee")}),a.jsx(ae,{value:"manager",children:o("users.manager")})]})]})]}),a.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[o("users.joined")," ",new Date(H.created_at).toLocaleDateString()]})]})]},H.user_id))}),Ie.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx($n,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:o("users.noUsersFound")}),a.jsx("p",{className:"text-muted-foreground",children:o(d?"users.noUsersFoundDesc":"users.noUsersAvailable")})]})]})]}),C==="clients"&&a.jsx("div",{className:"space-y-6",children:a.jsxs(Tr,{className:"flex-1",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Ie.map(H=>a.jsxs(ve,{className:"hover:shadow-md transition-shadow",children:[a.jsx(Me,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(ra,{className:"h-12 w-12",children:[a.jsx(Qa,{src:H.avatar||""}),a.jsx(na,{children:K(H,"user_name").charAt(0).toUpperCase()})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx(Qe,{className:"text-lg truncate",children:K(H,"user_name")}),a.jsx(ze,{variant:"outline",className:"mt-1",children:o("users.client")})]})]})}),a.jsxs(_e,{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(zw,{className:"h-4 w-4"}),a.jsx("span",{className:"truncate",children:H.user_email})]}),H.client_contact&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(kp,{className:"h-4 w-4"}),a.jsx("span",{children:H.client_contact})]}),H.company_name&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Uw,{className:"h-4 w-4"}),a.jsx("span",{className:"truncate",children:H.company_name})]}),a.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[o("users.joined")," ",new Date(H.created_at).toLocaleDateString()]})]})]},H.user_id))}),Ie.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ia,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:o("clients.noClientsFound")}),a.jsx("p",{className:"text-muted-foreground",children:o("clients.noClientsYet")})]})]})}),a.jsx(Dt,{open:O,onOpenChange:J,children:a.jsxs(kt,{className:"max-w-2xl max-h-[80vh]",children:[a.jsxs(Ct,{children:[a.jsx(Et,{children:o("users.userDetails")}),a.jsx(Wt,{children:o("users.userDetailsDescription")})]}),W&&a.jsx(Tr,{className:"max-h-[60vh] pr-4",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(ra,{className:"h-16 w-16",children:[a.jsx(Qa,{src:W.avatar||""}),a.jsx(na,{className:"text-lg",children:K(W,"user_name").charAt(0).toUpperCase()})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold",children:K(W,"user_name")}),a.jsx(ze,{variant:be(W.user_role),className:"mt-1",children:o(`users.${W.user_role}`)}),W.avatar&&a.jsx("p",{className:"text-xs text-muted-foreground mt-1 break-all",children:W.avatar})]})]}),R?a.jsxs("form",{onSubmit:z,className:"space-y-4",children:[Q&&a.jsx(Ei,{variant:"destructive",children:a.jsx(Pi,{children:Q})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ce,{htmlFor:"editName",children:o("users.fullName")}),a.jsx(Se,{id:"editName",value:N.user_name,onChange:H=>F(de=>({...de,user_name:H.target.value})),placeholder:o("users.fullName")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ce,{htmlFor:"editEmail",children:o("users.email")}),a.jsx(Se,{id:"editEmail",type:"email",value:N.user_email,onChange:H=>F(de=>({...de,user_email:H.target.value})),placeholder:o("users.email")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ce,{htmlFor:"editRole",children:o("users.role")}),a.jsxs(qe,{value:N.user_role,onValueChange:H=>F(de=>({...de,user_role:H})),children:[a.jsx(We,{children:a.jsx(Ke,{})}),a.jsxs(Ve,{children:[a.jsx(ae,{value:"employee",children:o("users.employee")}),a.jsx(ae,{value:"manager",children:o("users.manager")}),a.jsx(ae,{value:"admin",children:o("users.admin")}),a.jsx(ae,{value:"client",children:o("users.client")})]})]})]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsx(ce,{className:"text-sm font-medium",children:o("users.joined")}),a.jsx("p",{className:"text-sm",children:new Date(W.created_at).toLocaleDateString()})]}),W.updated_at&&a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsx(ce,{className:"text-sm font-medium",children:o("users.updated")}),a.jsx("p",{className:"text-sm",children:new Date(W.updated_at).toLocaleDateString()})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ce,{htmlFor:"editPhone",children:o("users.phone")}),a.jsx(Se,{id:"editPhone",type:"tel",value:N.user_phone,onChange:H=>F(de=>({...de,user_phone:H.target.value})),placeholder:o("users.phone")})]}),W.client_contact&&a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsx(ce,{className:"text-sm font-medium",children:o("users.contact")}),a.jsx("p",{className:"text-sm",children:W.client_contact})]}),W.company_name&&a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsx(ce,{className:"text-sm font-medium",children:o("users.company")}),a.jsx("p",{className:"text-sm",children:K(W,"company_name")})]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsx(ce,{className:"text-sm font-medium",children:o("users.userId")}),a.jsx("p",{className:"text-sm font-mono text-xs",children:W.user_id})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(G,{type:"button",variant:"outline",onClick:()=>I(!1),children:o("buttons.cancel")}),a.jsx(G,{type:"submit",disabled:q,children:o(q?"buttons.saving":"buttons.save")})]})]}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium text-muted-foreground",children:o("users.fullName")}),a.jsx("p",{className:"text-sm",children:K(W,"user_name")})]}),a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium text-muted-foreground",children:o("users.email")}),a.jsx("p",{className:"text-sm",children:W.user_email||o("common.na")})]}),a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium text-muted-foreground",children:o("users.role")}),a.jsx("p",{className:"text-sm",children:o(`users.${W.user_role}`)})]}),a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium text-muted-foreground",children:o("users.joined")}),a.jsx("p",{className:"text-sm",children:new Date(W.created_at).toLocaleDateString()})]}),W.updated_at&&a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium text-muted-foreground",children:o("users.updated")}),a.jsx("p",{className:"text-sm",children:new Date(W.updated_at).toLocaleDateString()})]})]}),a.jsxs("div",{className:"space-y-3",children:[W.user_phone&&a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium text-muted-foreground",children:o("users.phone")}),a.jsx("p",{className:"text-sm",children:W.user_phone})]}),W.client_contact&&a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium text-muted-foreground",children:o("users.contact")}),a.jsx("p",{className:"text-sm",children:W.client_contact})]}),W.company_name&&a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium text-muted-foreground",children:o("users.company")}),a.jsx("p",{className:"text-sm",children:K(W,"company_name")})]}),a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium text-muted-foreground",children:o("users.userId")}),a.jsx("p",{className:"text-sm font-mono text-xs",children:W.user_id})]})]})]}),W.auth_user_id&&a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium text-muted-foreground",children:o("users.authUserId")}),a.jsx("p",{className:"text-sm font-mono text-xs break-all",children:W.auth_user_id})]})]})}),a.jsxs(Yt,{children:[!R&&(t==null?void 0:t.role)==="admin"&&a.jsx(G,{variant:"outline",onClick:()=>I(!0),children:o("buttons.edit")}),a.jsx(G,{onClick:()=>J(!1),children:o("buttons.close")})]})]})})]})}function dz(){const{user:t}=bt(),{t:e}=lt(),{isRTL:r}=xa();console.log("Teams Page - isRTL:",r);const[n,s]=f.useState([]),[o,i]=f.useState([]),[l,c]=f.useState({}),[u,d]=f.useState(!0),[h,m]=f.useState(""),[p,v]=f.useState(!1),[g,y]=f.useState(""),[w,x]=f.useState(""),[_,b]=f.useState(null),j=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="manager";(t==null?void 0:t.role)==="employee"||(t==null||t.role),f.useEffect(()=>{E(),k()},[]);const E=async()=>{try{d(!0);const U=await Po.getAll(),R=await Po.getAllTeamMembers();s(U),c(R)}catch(U){console.error("Failed to load teams:",U)}finally{d(!1)}},k=async()=>{try{const U=await Vr.getAll();i(U)}catch(U){console.error("Failed to load users:",U)}},P=async()=>{if(g.trim())try{const U=hn({team_name:g.trim(),team_leader_id:w||null,partner_id:null,auth_user_id:null},{team_name:"team_name"});await Po.create(U),y(""),x(""),v(!1),await E()}catch(U){console.error("Failed to create team:",U)}},T=async(U,R)=>{try{await Po.addMember(U,R);const I=o.find(N=>N.auth_user_id===R);I&&c(N=>({...N,[U]:[...N[U]||[],I]}))}catch(I){console.error("Failed to add team member:",I)}},C=async(U,R)=>{try{await Po.removeMember(U,R),c(I=>({...I,[U]:(I[U]||[]).filter(N=>N.auth_user_id!==R)}))}catch(I){console.error("Failed to remove team member:",I)}},L=async U=>{try{await Po.delete(U),s(R=>R.filter(I=>I.team_id!==U)),c(R=>{const I={...R};return delete I[U],I}),b(null)}catch(R){console.error("Failed to delete team:",R)}},O=n.filter(U=>(K(U,"team_name")||"").toLowerCase().includes(h.toLowerCase())),J=U=>o.find(R=>R.auth_user_id===U),W=o.filter(U=>U.user_role==="employee");return u?a.jsx("div",{className:"flex items-center justify-center h-full py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):a.jsxs("div",{className:"space-y-6",dir:r?"rtl":"ltr",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:e("teams.title")}),a.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:e("teams.subtitle")})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($n,{className:"h-5 w-5"}),a.jsx("span",{className:"text-sm font-medium",children:e("teams.memberCount_plural",{count:n.length})})]}),j&&a.jsxs(Dt,{open:p,onOpenChange:v,children:[a.jsx(Ya,{asChild:!0,children:a.jsxs(G,{children:[a.jsx(At,{className:"h-4 w-4 mr-2"}),e("teams.createTeam")]})}),a.jsxs(kt,{className:"sm:max-w-[425px]",children:[a.jsxs(Ct,{children:[a.jsx(Et,{children:e("teams.createTeamTitle")}),a.jsx(Wt,{children:e("teams.createTeamDesc")})]}),a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[a.jsx(ce,{htmlFor:"team-name",className:"text-right rtl:text-left",children:e("teams.teamName")}),a.jsx(Se,{id:"team-name",value:g,onChange:U=>y(U.target.value),className:"col-span-3",placeholder:e("teams.teamNamePlaceholder")})]}),a.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[a.jsx(ce,{htmlFor:"team-leader",className:"text-right rtl:text-left",children:e("teams.teamLeader")}),a.jsxs(qe,{value:w,onValueChange:x,children:[a.jsx(We,{className:"col-span-3",children:a.jsx(Ke,{placeholder:e("teams.selectTeamLeader")})}),a.jsx(Ve,{children:W.map(U=>a.jsx(ae,{value:U.auth_user_id,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:U.avatar||""}),a.jsx("span",{children:K(U,"user_name")}),a.jsx(ze,{variant:"outline",className:"text-xs",children:U.user_role})]})},U.auth_user_id))})]})]})]}),a.jsx(Yt,{children:a.jsx(G,{type:"submit",onClick:P,disabled:!g.trim(),children:e("teams.createTeam")})})]})]})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(so,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(Se,{placeholder:e("teams.searchPlaceholder"),value:h,onChange:U=>m(U.target.value),className:"pl-10"})]}),a.jsxs(Tr,{className:"flex-1",dir:r?"rtl":"ltr",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",dir:r?"rtl":"ltr",children:O.map(U=>{const R=J(U.team_leader_id||""),I=l[U.team_id]||[];return a.jsxs(ve,{className:"hover:shadow-md transition-shadow",children:[a.jsxs(Me,{className:"pb-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Qe,{className:"text-lg",children:K(U,"team_name")}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ze,{variant:"outline",children:e("teams.memberCount_plural",{count:I.length})}),j&&a.jsxs(ba,{children:[a.jsx($c,{asChild:!0,children:a.jsx(G,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-red-500 hover:text-red-700",onClick:N=>{N.stopPropagation(),b(U.team_id)},children:a.jsx(zr,{className:"h-3 w-3"})})}),a.jsxs(ds,{onClick:N=>N.stopPropagation(),children:[a.jsxs(hs,{children:[a.jsx(ms,{children:e("teams.deleteTeam")}),a.jsx(ps,{children:e("teams.deleteConfirmation",{name:K(U,"team_name")})})]}),a.jsxs(fs,{children:[a.jsx(vs,{children:e("buttons.cancel")}),a.jsx(gs,{onClick:N=>{N.stopPropagation(),L(U.team_id)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:e("buttons.delete")})]})]})]})]})]}),R&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsxs("span",{children:[e("teams.teamLeader"),":"]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{children:R.avatar||""}),a.jsx("span",{children:K(R,"user_name")})]})]})]}),a.jsxs(_e,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:e("teams.members")}),a.jsxs("div",{className:"space-y-2",children:[I.slice(0,4).map(N=>a.jsxs("div",{className:`flex items-center ${j?"justify-between":"gap-2"} bg-muted/50 p-2 rounded`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(ra,{className:"h-6 w-6",children:[a.jsx(Qa,{src:N.avatar||""}),a.jsx(na,{className:"text-xs",children:K(N,"user_name").charAt(0).toUpperCase()})]}),a.jsx("span",{className:"text-sm",children:K(N,"user_name")})]}),j&&a.jsx(G,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-red-500 hover:text-red-700",onClick:()=>C(U.team_id,N.auth_user_id),children:a.jsx(EL,{className:"h-3 w-3"})})]},N.auth_user_id)),I.length>4&&a.jsx("div",{className:"text-xs text-muted-foreground text-center",children:e("teams.moreMembers",{count:I.length-4})}),I.length===0&&a.jsx("div",{className:"text-xs text-muted-foreground text-center py-2",children:e("teams.noMembersYet")})]})]}),j&&a.jsx("div",{children:a.jsxs(qe,{onValueChange:N=>{N&&T(U.team_id,N)},children:[a.jsx(We,{className:"w-full",children:a.jsx(Ke,{placeholder:e("teams.addMember")})}),a.jsx(Ve,{children:o.filter(N=>N.auth_user_id&&N.user_role==="employee"&&!I.some(F=>F.auth_user_id===N.auth_user_id)).map(N=>a.jsx(ae,{value:N.auth_user_id,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:N.avatar||""}),a.jsx("span",{children:K(N,"user_name")}),a.jsx(ze,{variant:"outline",className:"text-xs",children:N.user_role})]})},N.auth_user_id))})]})}),a.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[e("teams.created")," ",U.created_at?new Date(U.created_at).toLocaleDateString():"N/A"]})]})]},U.team_id)})}),O.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx($n,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:e(h?"teams.noTeamsFound":"teams.noTeamsYet")}),a.jsx("p",{className:"text-muted-foreground mb-4",children:e(h?"tickets.noTicketsFoundDesc":"teams.createFirstTeam")}),!h&&j&&a.jsxs(G,{onClick:()=>v(!0),children:[a.jsx(At,{className:"h-4 w-4 mr-2"}),e("teams.createFirstTeam")]})]})]})]})}var Uh="Switch",[hz,Xz]=br(Uh),[fz,mz]=hz(Uh),EE=f.forwardRef((t,e)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[m,p]=f.useState(null),v=Ae(e,_=>p(_)),g=f.useRef(!1),y=m?d||!!m.closest("form"):!0,[w,x]=ua({prop:s,defaultProp:o??!1,onChange:u,caller:Uh});return a.jsxs(fz,{scope:r,checked:w,disabled:l,children:[a.jsx(je.button,{type:"button",role:"switch","aria-checked":w,"aria-required":i,"data-state":OE(w),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:v,onClick:ie(t.onClick,_=>{x(b=>!b),y&&(g.current=_.isPropagationStopped(),g.current||_.stopPropagation())})}),y&&a.jsx(RE,{control:m,bubbles:!g.current,name:n,value:c,checked:w,required:i,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});EE.displayName=Uh;var PE="SwitchThumb",TE=f.forwardRef((t,e)=>{const{__scopeSwitch:r,...n}=t,s=mz(PE,r);return a.jsx(je.span,{"data-state":OE(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:e})});TE.displayName=PE;var pz="SwitchBubbleInput",RE=f.forwardRef(({__scopeSwitch:t,control:e,checked:r,bubbles:n=!0,...s},o)=>{const i=f.useRef(null),l=Ae(i,o),c=N1(r),u=p1(e);return f.useEffect(()=>{const d=i.current;if(!d)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&p){const v=new Event("click",{bubbles:n});p.call(d,r),d.dispatchEvent(v)}},[c,r,n]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});RE.displayName=pz;function OE(t){return t?"checked":"unchecked"}var DE=EE,gz=TE;const AE=f.forwardRef(({className:t,...e},r)=>a.jsx(DE,{className:X("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:r,children:a.jsx(gz,{className:X("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));AE.displayName=DE.displayName;function vz(){var he;const{user:t,hasRole:e}=bt(),{t:r}=lt(),[n,s]=f.useState([]),[o,i]=f.useState(null),[l,c]=f.useState([]),[u,d]=f.useState([]),[h,m]=f.useState(""),[p,v]=f.useState(!0),[g,y]=f.useState(!1),[w,x]=f.useState(""),[_,b]=f.useState(!1),[j,E]=f.useState([]),[k,P]=f.useState({name:"",is_private:!0,project_id:""}),[T,C]=f.useState(!1),[L,O]=f.useState(null),[J,W]=f.useState(null),[U,R]=f.useState(!1),[I,N]=f.useState(!0),[F,q]=f.useState(!1),[A,Q]=f.useState(!1),ye=f.useRef(!1),xe=f.useRef(null),Ie=f.useRef(null),be=f.useRef(null),le=f.useRef(null),Ne=f.useRef(null);f.useEffect(()=>{t&&!ye.current&&z()},[t]),f.useEffect(()=>{o&&(Ie.current!==o.room_id&&H(),xe.current!==o.room_id&&re())},[o]),f.useEffect(()=>{if(be.current){const V=be.current.querySelector("[data-radix-scroll-area-viewport]");V&&(V.scrollTop=V.scrollHeight)}},[l]),f.useEffect(()=>{if(L&&be.current){const V=be.current.querySelector("[data-radix-scroll-area-viewport]");V&&setTimeout(()=>{V.scrollTop=V.scrollHeight},100)}},[L]),f.useEffect(()=>{if(!be.current||!F||A)return;const V=be.current.querySelector("[data-radix-scroll-area-viewport]");if(!V)return;const ne=()=>{V.scrollTop<=50&&F&&!A&&re(!0)};return V.addEventListener("scroll",ne),()=>V.removeEventListener("scroll",ne)},[F,A,o]),f.useEffect(()=>{o&&(async()=>{try{await Z.realtime.setAuth(await hr.getFreshJwt());const ne=`room:${o.room_id}:messages`,ke=Z.channel(ne,{config:{broadcast:{self:!0,ack:!0},private:!0}});return ke.on("broadcast",{event:"*"},se=>{var It;const Le=(It=se.payload)==null?void 0:It.record;Le&&Le.message_id&&(c($=>$.some(M=>M.message_id===Le.message_id)?$:[...$.filter(M=>!(M.message_id.startsWith("temp-")&&M.auth_user_id===Le.auth_user_id&&M.content===Le.content)),Le]),s($=>$.map(S=>S.room_id===o.room_id?{...S,lastMessage:Le}:S)))}),await ke.subscribe(),()=>{ke.unsubscribe()}}catch(ne){console.error("Failed to setup realtime:",ne)}})()},[o]),f.useEffect(()=>(h&&o?(_||(b(!0),Re(!0)),le.current&&clearTimeout(le.current),le.current=setTimeout(()=>{b(!1),Re(!1)},2e3)):_&&(b(!1),Re(!1)),()=>{le.current&&clearTimeout(le.current)}),[h]),f.useEffect(()=>{C(!1),O(null),W(null),q(!1),Q(!1),ye.current=!1,xe.current=null,Ie.current=null,Ne.current=null},[t]),f.useEffect(()=>{q(!1),Q(!1),Ne.current=null},[o]);const Re=async V=>{var ne;if(!(!o||!t))try{await Z.channel(`room:${o.room_id}:typing`).send({type:"broadcast",event:"typing",payload:{userId:t.id,userName:((ne=t.profile)==null?void 0:ne.user_name)||t.email,typing:V}})}catch(ke){console.error("Failed to broadcast typing:",ke)}},z=async()=>{if(!ye.current)try{v(!0);const V=await qo.getUserRooms((t==null?void 0:t.id)||""),ne=await Promise.all(V.map(async ke=>{try{const se=await El.getByRoom(ke.room_id),Le=se[se.length-1];return{...ke,lastMessage:Le,unreadCount:0}}catch{return{...ke,unreadCount:0}}}));s(ne),ne.length>0&&i(ne[0]),C(!0),ye.current=!0}catch(V){console.error("Failed to load rooms:",V)}finally{v(!1)}},re=async(V=!1)=>{var ne,ke,se,Le;if(!(!o||!V&&xe.current===o.room_id))try{V&&Q(!0);const It=V&&Ne.current?{limit:10,before:Ne.current}:{limit:10},$=await El.getByRoom(o.room_id,It);if(V){const S=((ke=(ne=be.current)==null?void 0:ne.querySelector("[data-radix-scroll-area-viewport]"))==null?void 0:ke.scrollHeight)||0,M=((Le=(se=be.current)==null?void 0:se.querySelector("[data-radix-scroll-area-viewport]"))==null?void 0:Le.scrollTop)||0;c(Y=>[...$,...Y]),Q(!1),$.length>0&&(Ne.current=$[0].created_at),setTimeout(()=>{var ee;const Y=(ee=be.current)==null?void 0:ee.querySelector("[data-radix-scroll-area-viewport]");if(Y){const oe=Y.scrollHeight-S;Y.scrollTop=oe}},50)}else c($),O(o.room_id),xe.current=o.room_id,Ne.current=$.length>0?$[0].created_at:null;q($.length===10)}catch(It){console.error("Failed to load messages:",It),V&&Q(!1)}},H=async()=>{if(!(!o||Ie.current===o.room_id))try{const V=await qo.getRoomMembers(o.room_id);d(V),W(o.room_id),Ie.current=o.room_id}catch(V){console.error("Failed to load room members:",V)}},de=async()=>{if(!h.trim()||!o||!t)return;const V=h.trim(),ne={message_id:`temp-${Date.now()}`,room_id:o.room_id,auth_user_id:t.id,content:V,created_at:new Date().toISOString(),metadata:null};c(ke=>[...ke,ne]),m("");try{await El.create({room_id:o.room_id,auth_user_id:t.id,content:V,metadata:null})}catch(ke){console.error("Failed to send message:",ke),c(se=>se.filter(Le=>Le.message_id!==ne.message_id)),m(V)}},Oe=async()=>{var V;if(!(!k.name.trim()||!t))try{const ne=await qo.createRoom({name:k.name.trim(),is_private:k.is_private,project_id:k.project_id?parseInt(k.project_id):null,created_by:((V=t.profile)==null?void 0:V.user_id)||0,auth_user_id:t.id});await qo.addMember(ne.room_id,t.id),s(ke=>[...ke,{...ne,unreadCount:0}]),i({...ne,unreadCount:0}),P({name:"",is_private:!0,project_id:""}),y(!1)}catch(ne){console.error("Failed to create room:",ne)}},He=V=>{const ne=new Date(V),se=Math.floor((new Date().getTime()-ne.getTime())/6e4);return se<1?r("chats.justNow"):se<60?r("chats.minutesAgo",{count:se}):se<1440?r("chats.hoursAgo",{count:Math.floor(se/60)}):ne.toLocaleDateString("en-US",{month:"short",day:"numeric"})},et=V=>new Date(V).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),ct=(V,ne)=>!ne||V.auth_user_id!==ne.auth_user_id?!1:new Date(V.created_at).getTime()-new Date(ne.created_at).getTime()<5*60*1e3,Mt=(V,ne)=>{if(!ne)return!0;const ke=new Date(V.created_at).toDateString(),se=new Date(ne.created_at).toDateString();return ke!==se},B=n.filter(V=>{var ne;return(ne=V.room_name)==null?void 0:ne.toLowerCase().includes(w.toLowerCase())});return p?a.jsx("div",{className:"flex items-center justify-center h-full py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):a.jsxs("div",{className:"flex flex-col md:flex-row h-[calc(100vh-100px)] gap-4 sm:gap-6 p-3 sm:p-6 bg-gradient-to-br from-background via-background to-muted/20 rounded-xl border shadow-sm",children:[a.jsxs("div",{className:X("flex-col gap-4",I?"flex w-64 md:w-64 lg:w-72":"hidden","hidden sm:flex sm:w-64 md:w-64 lg:w-72"),children:[a.jsxs("div",{className:"flex items-center justify-between px-2",children:[a.jsx("h2",{className:"text-2xl font-bold tracking-tight bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:r("chats.chatRooms")}),e(["admin","manager"])&&a.jsxs(Dt,{open:g,onOpenChange:y,children:[a.jsx(Ya,{asChild:!0,children:a.jsx(G,{size:"icon",variant:"ghost",className:"h-9 w-9 rounded-full hover:bg-primary/10 hover:text-primary transition-all hover:scale-105",children:a.jsx(At,{className:"h-5 w-5"})})}),a.jsxs(kt,{className:"sm:max-w-[425px]",children:[a.jsxs(Ct,{children:[a.jsx(Et,{children:r("chats.createRoomTitle")}),a.jsx(Wt,{children:r("chats.createRoomDesc")})]}),a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[a.jsx(ce,{htmlFor:"room-name",className:"text-right",children:r("chats.roomName")}),a.jsx(Se,{id:"room-name",value:k.name,onChange:V=>P(ne=>({...ne,name:V.target.value})),className:"col-span-3",placeholder:r("chats.roomNamePlaceholder")})]}),a.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[a.jsx(ce,{htmlFor:"private",className:"text-right",children:r("chats.private")}),a.jsxs("div",{className:"col-span-3 flex items-center space-x-2",children:[a.jsx(AE,{id:"private",checked:k.is_private,onCheckedChange:V=>P(ne=>({...ne,is_private:V}))}),a.jsx(ce,{htmlFor:"private",className:"text-sm text-muted-foreground",children:k.is_private?r("chats.privateRoom"):r("chats.publicRoom")})]})]}),a.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[a.jsx(ce,{htmlFor:"project",className:"text-right",children:r("chats.project")}),a.jsx(Se,{id:"project",value:k.project_id,onChange:V=>P(ne=>({...ne,project_id:V.target.value})),className:"col-span-3",placeholder:r("chats.projectIdPlaceholder")})]})]}),a.jsx(Yt,{children:a.jsx(G,{onClick:Oe,disabled:!k.name.trim(),children:r("chats.createRoom")})})]})]})]}),a.jsxs("div",{className:"relative px-3 md:px-2",children:[a.jsx(so,{className:"absolute left-5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Se,{placeholder:r("chats.searchConversations"),className:"pl-9 bg-muted/50 border-none focus-visible:ring-2 focus-visible:ring-primary/20 transition-all",value:w,onChange:V=>x(V.target.value)})]}),a.jsx(Tr,{className:"flex-1 -mx-3 px-3 md:-mx-2 md:px-2",children:a.jsx("div",{className:"space-y-2",children:B.map(V=>{var ne;return a.jsxs("button",{onClick:()=>i(V),className:X("w-full flex items-start gap-3 p-3 md:p-2 md:pr-3 rounded-xl transition-all duration-200 text-left group relative overflow-hidden",(o==null?void 0:o.room_id)===V.room_id?"bg-gradient-to-r from-primary to-primary/90 text-primary-foreground shadow-lg shadow-primary/30 scale-[1.02]":"hover:bg-muted/70 text-foreground hover:shadow-md"),children:[a.jsxs("div",{className:X("h-12 w-12 rounded-full flex items-center justify-center flex-shrink-0 transition-all relative",(o==null?void 0:o.room_id)===V.room_id?"bg-primary-foreground/20 text-primary-foreground ring-2 ring-primary-foreground/30":"bg-gradient-to-br from-primary/20 to-primary/10 text-primary group-hover:from-primary/30 group-hover:to-primary/20"),children:[a.jsx(Ws,{className:"h-5 w-5"}),V.unreadCount&&V.unreadCount>0&&a.jsx(ze,{className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-[10px] bg-destructive border-2 border-background",children:V.unreadCount})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"font-semibold truncate text-sm",children:V.room_name||`Room ${V.room_id.slice(0,8)}`}),V.lastMessage&&a.jsx("span",{className:X("text-[10px] flex-shrink-0 ml-2",(o==null?void 0:o.room_id)===V.room_id?"text-primary-foreground/70":"text-muted-foreground"),children:He(V.lastMessage.created_at)})]}),a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("p",{className:X("text-xs truncate flex-1",(o==null?void 0:o.room_id)===V.room_id?"text-primary-foreground/80":"text-muted-foreground"),children:((ne=V.lastMessage)==null?void 0:ne.content)||r("chats.selectRoom")}),V.is_private&&a.jsx("span",{className:X("text-[9px] px-1.5 py-0.5 rounded-full flex-shrink-0 md:text-[8px] md:px-1 md:py-0.5",(o==null?void 0:o.room_id)===V.room_id?"bg-primary-foreground/20 text-primary-foreground":"bg-muted text-muted-foreground"),children:r("chats.private")})]})]})]},V.room_id)})})})]}),o&&a.jsx("div",{className:"md:hidden mb-4",children:a.jsxs(Ph,{open:U,onOpenChange:R,children:[a.jsx(Fk,{asChild:!0,children:a.jsxs(G,{variant:"outline",className:"w-full justify-between shadow-sm hover:shadow-md transition-shadow",children:[a.jsx("span",{className:"truncate",children:o.room_name||`Room ${o.room_id.slice(0,8)}`}),a.jsx(Ws,{className:"h-4 w-4 ml-2"})]})}),a.jsx(Dc,{side:"left",className:"w-80 p-4",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-bold",children:r("chats.chatRooms")}),e(["admin","manager"])&&a.jsx(G,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>y(!0),children:a.jsx(At,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"relative",children:[a.jsx(so,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Se,{placeholder:r("chats.searchRooms"),className:"pl-9",value:w,onChange:V=>x(V.target.value)})]}),a.jsx(Tr,{className:"h-[60vh]",children:a.jsx("div",{className:"space-y-2",children:B.map(V=>a.jsxs("button",{onClick:()=>{i(V),R(!1)},className:X("w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 text-left",(o==null?void 0:o.room_id)===V.room_id?"bg-primary text-primary-foreground shadow-md":"hover:bg-muted/50"),children:[a.jsx(Ws,{className:"h-5 w-5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-semibold truncate text-sm",children:V.room_name||`Room ${V.room_id.slice(0,8)}`}),V.lastMessage&&a.jsx("div",{className:"text-xs truncate opacity-80",children:V.lastMessage.content})]})]},V.room_id))})})]})})]})}),a.jsx(ve,{className:"flex-1 flex flex-col overflow-hidden border-none shadow-xl bg-card/80 backdrop-blur-sm",children:o?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b bg-gradient-to-r from-background/95 via-background to-background/95 backdrop-blur-md supports-[backdrop-filter]:bg-background/80",children:[a.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[a.jsx(ra,{className:"h-10 w-10 sm:h-11 sm:w-11 border-2 border-primary/20 shadow-md flex-shrink-0 ring-2 ring-background",children:a.jsx(na,{className:"bg-gradient-to-br from-primary/20 to-primary/10 text-primary font-semibold",children:((he=o.room_name)==null?void 0:he.charAt(0).toUpperCase())||"#"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"font-semibold text-sm sm:text-base truncate",children:o.room_name||`Room ${o.room_id.slice(0,8)}`}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx($n,{className:"h-3 w-3"}),a.jsxs("span",{className:"truncate",children:[u.length," ",r("chats.members")]}),a.jsx("span",{className:"hidden sm:inline w-1 h-1 rounded-full bg-muted-foreground/30"}),a.jsxs("span",{className:"hidden sm:flex text-green-500 items-center gap-1.5",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse shadow-lg shadow-green-500/50"}),r("chats.online")]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(G,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9 text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-all",onClick:()=>N(!I),children:a.jsx(JS,{className:"h-4 w-4"})}),a.jsx(G,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9 text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-all hidden sm:flex",children:a.jsx(kp,{className:"h-4 w-4"})}),a.jsx(G,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9 text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-all hidden sm:flex",children:a.jsx(TL,{className:"h-4 w-4"})}),a.jsxs(xk,{children:[a.jsx(yk,{asChild:!0,children:a.jsx(G,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9 text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-all",children:a.jsx(uL,{className:"h-4 w-4"})})}),a.jsxs(Lv,{align:"end",children:[a.jsx(Jn,{children:r("chats.viewDetails")}),a.jsx(Jn,{children:r("chats.muteNotifications")}),a.jsx(Jn,{className:"text-destructive",children:r("chats.leaveRoom")})]})]})]})]}),a.jsx(Tr,{ref:be,className:"flex-1 p-3 sm:p-6 bg-gradient-to-b from-slate-50/80 via-slate-50/50 to-slate-50/80 dark:from-slate-900/80 dark:via-slate-900/50 dark:to-slate-900/80",children:a.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[A&&a.jsx("div",{className:"flex items-center justify-center py-4",children:a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-primary"})}),J===o.room_id&&l.map((V,ne)=>{var S,M,Y,ee,pe,oe,Fe;const ke=V.auth_user_id===(t==null?void 0:t.id)||V.auth_user_id===((S=t==null?void 0:t.profile)==null?void 0:S.auth_user_id)||V.auth_user_id===((Y=(M=t==null?void 0:t.profile)==null?void 0:M.user_id)==null?void 0:Y.toString()),se=ne>0?l[ne-1]:void 0,Le=!ct(V,se),It=Mt(V,se);let $;return ke?$={auth_user_id:t.id,user_name:((ee=t.profile)==null?void 0:ee.user_name)||t.email||r("chats.you"),avatar:(pe=t.profile)==null?void 0:pe.avatar,user_id:((oe=t.profile)==null?void 0:oe.user_id)||0,user_email:t.email}:$=u.find(gt=>gt.auth_user_id===V.auth_user_id),$||($={auth_user_id:V.auth_user_id,user_name:r("chats.unknownUser"),avatar:"",user_id:0}),a.jsxs("div",{children:[It&&a.jsx("div",{className:"flex items-center justify-center my-6",children:a.jsx("div",{className:"bg-muted/80 backdrop-blur-sm px-4 py-1.5 rounded-full text-xs text-muted-foreground font-medium shadow-sm",children:new Date(V.created_at).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})}),a.jsxs("div",{className:X("flex gap-3 animate-in slide-in-from-bottom-2 duration-300",ke?"flex-row-reverse":"flex-row",!Le&&"mt-1"),children:[a.jsx("div",{className:X("flex-shrink-0 w-8",!Le&&"invisible"),children:a.jsxs(ra,{className:"h-8 w-8 border-2 border-background shadow-md",children:[a.jsx(Qa,{src:$.avatar||""}),a.jsx(na,{className:"text-xs font-semibold bg-gradient-to-br from-primary/20 to-primary/10 text-primary",children:((Fe=$.user_name)==null?void 0:Fe.charAt(0).toUpperCase())||"?"})]})}),a.jsxs("div",{className:X("flex flex-col max-w-[75%] sm:max-w-[65%]",ke?"items-end":"items-start"),children:[Le&&!ke&&a.jsx("span",{className:"text-xs font-medium text-muted-foreground ml-1 mb-1",children:$.user_name}),a.jsxs("div",{className:"group relative",children:[a.jsx("div",{className:X("px-4 py-2.5 shadow-md text-sm break-words transition-all hover:shadow-lg",ke?"bg-gradient-to-br from-primary to-primary/90 text-primary-foreground rounded-2xl rounded-tr-md":"bg-card border border-border/50 text-card-foreground rounded-2xl rounded-tl-md"),children:V.content}),a.jsxs("div",{className:X("flex items-center gap-1.5 mt-1",ke?"justify-end":"justify-start"),children:[a.jsx("span",{className:"text-[10px] text-muted-foreground",children:et(V.created_at)}),ke&&a.jsx("div",{className:"text-primary-foreground/70",children:V.message_id.startsWith("temp-")?a.jsx(lv,{className:"h-3 w-3"}):a.jsx(sL,{className:"h-3 w-3"})})]})]})]})]})]},V.message_id)}),j.length>0&&a.jsxs("div",{className:"flex gap-3 animate-in fade-in duration-200",children:[a.jsx("div",{className:"flex-shrink-0 w-8",children:a.jsx("div",{className:"h-8 w-8 rounded-full bg-muted flex items-center justify-center",children:a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0ms"}}),a.jsx("div",{className:"w-1.5 h-1.5 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"150ms"}}),a.jsx("div",{className:"w-1.5 h-1.5 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),a.jsx("div",{className:"flex items-center",children:a.jsx("span",{className:"text-xs text-muted-foreground italic",children:r("chats.someoneTyping")})})]})]})}),a.jsx("div",{className:"p-3 sm:p-4 bg-gradient-to-r from-background/95 via-background to-background/95 backdrop-blur-md border-t",children:a.jsxs("div",{className:"flex items-end gap-2 max-w-4xl mx-auto bg-card/80 backdrop-blur-sm border border-border/50 rounded-2xl p-2 shadow-lg focus-within:ring-2 focus-within:ring-primary/30 focus-within:border-primary/50 transition-all",children:[a.jsx(G,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-full text-muted-foreground hover:text-primary hover:bg-primary/10 transition-all flex-shrink-0",children:a.jsx(xL,{className:"h-5 w-5"})}),a.jsx(Se,{value:h,onChange:V=>m(V.target.value),placeholder:r("chats.typeMessage"),onKeyPress:V=>V.key==="Enter"&&!V.shiftKey&&de(),className:"flex-1 border-none bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 min-h-[40px] py-2.5 text-sm placeholder:text-muted-foreground/60"}),a.jsx(G,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-full text-muted-foreground hover:text-primary hover:bg-primary/10 transition-all flex-shrink-0",children:a.jsx(wL,{className:"h-5 w-5"})}),a.jsx(G,{onClick:de,disabled:!h.trim(),size:"icon",className:X("h-9 w-9 rounded-full transition-all duration-200 flex-shrink-0",h.trim()?"bg-gradient-to-r from-primary to-primary/90 text-primary-foreground hover:from-primary/90 hover:to-primary shadow-lg shadow-primary/30 hover:shadow-xl hover:scale-105":"bg-muted text-muted-foreground hover:bg-muted/80"),children:a.jsx(mv,{className:"h-4 w-4"})})]})})]}):a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center p-8 bg-gradient-to-b from-slate-50/50 via-background to-slate-50/50 dark:from-slate-900/50 dark:via-background dark:to-slate-900/50",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-primary/20 to-primary/10 rounded-full flex items-center justify-center mb-6 animate-pulse shadow-lg shadow-primary/20",children:a.jsx(Ws,{className:"h-10 w-10 text-primary"})}),a.jsx("h3",{className:"text-2xl font-bold text-foreground mb-2",children:r("chats.selectRoom")}),a.jsx("p",{className:"text-base text-muted-foreground max-w-sm",children:r("chats.selectRoom")})]})})]})}function xz(){const{user:t}=bt(),{t:e}=lt(),[r,n]=f.useState([]),[s,o]=f.useState(null),[i,l]=f.useState([]),[c,u]=f.useState([]),[d,h]=f.useState(""),[m,p]=f.useState(!0),[v,g]=f.useState(!1),[y,w]=f.useState(null),[x,_]=f.useState(null),[b,j]=f.useState(!1),[E,k]=f.useState(!0),P=f.useRef(!1),T=f.useRef(null),C=f.useRef(null);f.useEffect(()=>{t&&!P.current&&L()},[t]),f.useEffect(()=>{s&&(C.current!==s.room_id&&J(),T.current!==s.room_id&&O())},[s]),f.useEffect(()=>{s&&(async()=>{try{await Z.realtime.setAuth(await hr.getFreshJwt());const I=`room:${s.room_id}:messages`,N=Z.channel(I,{config:{broadcast:{self:!0,ack:!0},private:!0}});return N.on("broadcast",{event:"*"},F=>{var A;const q=(A=F.payload)==null?void 0:A.record;q&&q.message_id&&l(Q=>Q.some(xe=>xe.message_id===q.message_id)?Q:[...Q.filter(xe=>!(xe.message_id.startsWith("temp-")&&xe.auth_user_id===q.auth_user_id&&xe.content===q.content)),q])}),await N.subscribe(),()=>{N.unsubscribe()}}catch(I){console.error("Failed to setup realtime:",I)}})()},[s]),f.useEffect(()=>{g(!1),w(null),_(null),P.current=!1,T.current=null,C.current=null},[t]);const L=async()=>{if(!P.current)try{p(!0);const R=await qo.getUserRooms((t==null?void 0:t.id)||"");n(R),R.length>0&&o(R[0]),g(!0),P.current=!0}catch(R){console.error("Failed to load rooms:",R)}finally{p(!1)}},O=async()=>{if(!(!s||T.current===s.room_id))try{const R=await El.getByRoom(s.room_id);l(R),w(s.room_id),T.current=s.room_id}catch(R){console.error("Failed to load messages:",R)}},J=async()=>{if(!(!s||C.current===s.room_id))try{const R=await qo.getRoomMembers(s.room_id);u(R),_(s.room_id),C.current=s.room_id}catch(R){console.error("Failed to load room members:",R)}},W=async()=>{if(!d.trim()||!s||!t)return;const R=d.trim(),I={message_id:`temp-${Date.now()}`,room_id:s.room_id,auth_user_id:t.id,content:R,created_at:new Date().toISOString(),metadata:null};l(N=>[...N,I]),h("");try{await El.create({room_id:s.room_id,auth_user_id:t.id,content:R,metadata:null})}catch(N){console.error("Failed to send message:",N),l(F=>F.filter(q=>q.message_id!==I.message_id)),h(R)}},U=R=>new Date(R).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return m?a.jsx("div",{className:"flex items-center justify-center h-full py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):a.jsxs("div",{className:"flex flex-col md:flex-row h-[calc(100vh-120px)] gap-4 sm:gap-6 pb-6",children:[a.jsxs("div",{className:`flex-col border rounded-lg ${E?"flex w-80":"hidden"} lg:flex lg:w-80`,children:[a.jsx("div",{className:"p-4 border-b",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h2",{className:"text-xl font-semibold",children:e("chats.myChatRooms")})})}),a.jsx(Tr,{className:"flex-1 p-4",children:a.jsx("div",{className:"space-y-2",children:r.map(R=>a.jsx(ve,{className:`cursor-pointer transition-colors ${(s==null?void 0:s.room_id)===R.room_id?"bg-primary/10 border-primary":""}`,onClick:()=>o(R),children:a.jsx(_e,{className:"p-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ws,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium truncate",children:R.room_name||`Room ${R.room_id.slice(0,8)}`}),a.jsx("p",{className:"text-xs text-muted-foreground",children:R.is_private?e("chats.private"):e("chats.publicRoom")})]})]})})},R.room_id))})})]}),s&&a.jsx("div",{className:"md:hidden mb-4",children:a.jsxs(Ph,{open:b,onOpenChange:j,children:[a.jsx(Fk,{asChild:!0,children:a.jsxs(G,{variant:"outline",className:"w-full justify-between",children:[a.jsx("span",{className:"truncate",children:s.room_name||`Room ${s.room_id.slice(0,8)}`}),a.jsx(Ws,{className:"h-4 w-4 ml-2"})]})}),a.jsx(Dc,{side:"left",className:"w-80 p-4",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:e("chats.myChatRooms")}),a.jsx(Tr,{className:"h-[60vh]",children:a.jsx("div",{className:"space-y-2",children:r.map(R=>a.jsx(ve,{className:`cursor-pointer transition-colors ${(s==null?void 0:s.room_id)===R.room_id?"bg-primary/10 border-primary":""}`,onClick:()=>{o(R),j(!1)},children:a.jsx(_e,{className:"p-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ws,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium truncate",children:R.room_name||`Room ${R.room_id.slice(0,8)}`}),a.jsx("p",{className:"text-xs text-muted-foreground",children:R.is_private?e("chats.private"):e("chats.publicRoom")})]})]})})},R.room_id))})})]})})]})}),a.jsx("div",{className:"flex-1 flex flex-col",children:s?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 pb-4 border-b",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold",children:s.room_name||`Room ${s.room_id.slice(0,8)}`}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx($n,{className:"h-4 w-4"}),a.jsxs("span",{children:[c.length," ",e("chats.members")]}),s.is_private&&a.jsx("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:e("chats.private")})]})]}),a.jsx(G,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-all",onClick:()=>k(!E),children:a.jsx(JS,{className:"h-4 w-4"})})]}),a.jsx(Tr,{className:"flex-1 mb-4",children:a.jsx("div",{className:"space-y-4 p-4",children:x===s.room_id&&i.map(R=>{var N,F,q,A;let I;return R.auth_user_id===(t==null?void 0:t.id)?I={auth_user_id:t.id,user_name:((N=t.profile)==null?void 0:N.user_name)||t.email||e("chats.you"),avatar:(F=t.profile)==null?void 0:F.avatar,user_id:((q=t.profile)==null?void 0:q.user_id)||0,user_email:t.email}:I=c.find(Q=>Q.auth_user_id===R.auth_user_id),I||(I={auth_user_id:R.auth_user_id,user_name:e("chats.unknownUser"),avatar:"",user_id:0}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs(ra,{className:"h-8 w-8",children:[a.jsx(Qa,{src:I.avatar||""}),a.jsx(na,{children:((A=I.user_name)==null?void 0:A.charAt(0))||"?"})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"font-medium text-sm",children:I.user_name}),a.jsx("span",{className:"text-xs text-muted-foreground",children:U(R.created_at)})]}),a.jsx("p",{className:"text-sm",children:R.content})]})]},R.message_id)})})}),a.jsxs("div",{className:"flex gap-2 p-4 border-t",children:[a.jsx(Se,{value:d,onChange:R=>h(R.target.value),placeholder:e("chats.typeMessage"),onKeyPress:R=>R.key==="Enter"&&W(),className:"flex-1"}),a.jsx(G,{onClick:W,disabled:!d.trim(),children:a.jsx(mv,{className:"h-4 w-4"})})]})]}):a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-muted-foreground",children:[a.jsx(Ws,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:e("chats.selectRoom")})]})})})]})}function yz(){const[t,e]=f.useState(null),[r,n]=f.useState([]),[s,o]=f.useState([]),[i,l]=f.useState([]),[c,u]=f.useState(!0),{user:d,signOut:h}=bt();f.useEffect(()=>{(async()=>{if(d!=null&&d.id)try{u(!0);const v=await Nn.getByUserAuthId(d.id);n(v)}catch(v){console.error("Failed to fetch user projects:",v)}finally{u(!1)}})()},[d==null?void 0:d.id]),f.useEffect(()=>{(async()=>{if(t)try{const[v,g]=await Promise.all([Vs.getAll(),Bp.getByTask(0)]),y=v.filter(w=>!0);o(y),l(g)}catch(v){console.error("Failed to fetch project data:",v)}})()},[t]);const m=t?r.find(p=>p.project_id===t):null;return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx("header",{className:"border-b bg-card",children:a.jsxs("div",{className:"container mx-auto px-6 py-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsx("h1",{className:"text-xl font-bold",children:"Client Portal"})]}),a.jsxs(G,{variant:"ghost",size:"sm",children:[a.jsx(pL,{className:"h-4 w-4 mr-2"}),"Logout"]})]})}),a.jsxs("div",{className:"container mx-auto px-6 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold",children:["Hello, ",K((d==null?void 0:d.profile)||{},"user_name"),"! "]}),a.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:"Here's your project progress"})]}),m?a.jsxs("div",{children:[a.jsx(G,{variant:"ghost",className:"mb-4",onClick:()=>e(null),children:" Back to Projects"}),a.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs(ve,{children:[a.jsx(Me,{children:a.jsx(Qe,{children:m.project_name})}),a.jsxs(_e,{children:[a.jsx("p",{className:"text-muted-foreground",children:m.project_description||"No description available"}),a.jsxs("div",{className:"mt-4",children:[a.jsx(da,{value:m.progress||0,className:"h-3"}),a.jsxs("div",{className:"text-right mt-2 text-sm font-semibold",children:[m.progress||0,"% Complete"]})]})]})]}),a.jsxs(Lh,{defaultValue:"tasks",children:[a.jsxs(Uc,{children:[a.jsx(Ln,{value:"tasks",children:"Tasks"}),a.jsx(Ln,{value:"images",children:"Gallery"}),a.jsx(Ln,{value:"comments",children:"Comments"})]}),a.jsx(Fn,{value:"tasks",className:"space-y-3",children:s.filter(p=>p.stage_id!==null).map(p=>{var v;return a.jsx(ve,{children:a.jsx(_e,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:p.task_name}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:p.description||"No description"})]}),a.jsxs(ze,{variant:p.task_status==="completed"?"default":"secondary",children:[p.task_status==="completed"?"":""," ",((v=p.task_status)==null?void 0:v.replace("_"," "))||"pending"]})]})})},p.task_id)})}),a.jsx(Fn,{value:"images",children:a.jsx(ve,{children:a.jsx(_e,{className:"pt-6",children:a.jsx("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(p=>a.jsx("div",{className:"aspect-square bg-muted rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-4xl",children:""})},p))})})})}),a.jsx(Fn,{value:"comments",children:a.jsx(ve,{children:a.jsxs(_e,{className:"pt-6 space-y-4",children:[i.map(p=>a.jsxs("div",{className:"flex gap-3 pb-4 border-b last:border-0",children:[a.jsx("div",{className:"text-2xl",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-semibold text-sm",children:"Team Member"}),a.jsx("p",{className:"text-sm mt-1",children:p.message||"No message"}),a.jsx("span",{className:"text-xs text-muted-foreground mt-2 block",children:p.created_date?new Date(p.created_date).toLocaleString():"Unknown date"})]})]},p.comment_id)),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsx(Se,{placeholder:"Add a comment..."}),a.jsx(G,{children:a.jsx(hv,{className:"h-4 w-4"})})]})]})})})]})]}),a.jsx("div",{children:a.jsxs(ve,{children:[a.jsx(Me,{children:a.jsx(Qe,{className:"text-lg",children:"Timeline"})}),a.jsxs(_e,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Created Date"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:m.created_date?new Date(m.created_date).toLocaleDateString():"N/A"})]}),m.end_date&&a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"End Date"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(m.end_date).toLocaleDateString()})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:"Milestones"}),a.jsxs("div",{className:"space-y-2 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-green-500",children:""}),a.jsx("span",{children:"Project Kickoff"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-green-500",children:""}),a.jsx("span",{children:"Design Phase"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-blue-500",children:""}),a.jsx("span",{children:"Development Phase"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-muted-foreground",children:""}),a.jsx("span",{children:"Testing & Launch"})]})]})]})]})]})})]})]}):c?a.jsxs("div",{className:"flex justify-center items-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"}),a.jsx("span",{className:"sr-only",children:"Loading projects..."})]}):r.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Projects Found"}),a.jsx("p",{className:"text-muted-foreground",children:"You don't have any projects assigned yet."})]}):a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(p=>a.jsxs(ve,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e(p.project_id),children:[a.jsxs(Me,{children:[a.jsx(Qe,{className:"text-lg",children:p.project_name}),a.jsxs(ze,{className:"w-fit mt-2",variant:"secondary",children:["Stage ",p.stage||"N/A"]})]}),a.jsx(_e,{children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[a.jsx("span",{className:"text-muted-foreground",children:"Progress"}),a.jsxs("span",{className:"font-semibold",children:[p.progress||0,"%"]})]}),a.jsx(da,{value:p.progress||0,className:"h-2"})]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Created: ",p.created_date?new Date(p.created_date).toLocaleDateString():"N/A"]}),a.jsx(G,{className:"w-full",variant:"outline",children:"View Details "})]})})]},p.project_id))})]})]})}const wz=()=>{const t=vn(),{t:e}=lt(),r=[{icon:a.jsx(iv,{className:"h-6 w-6"}),title:e("landing.features.projectManagement.title"),description:e("landing.features.projectManagement.description")},{icon:a.jsx($n,{className:"h-6 w-6"}),title:e("landing.features.leadManagement.title"),description:e("landing.features.leadManagement.description")},{icon:a.jsx(rL,{className:"h-6 w-6"}),title:e("landing.features.analytics.title"),description:e("landing.features.analytics.description")},{icon:a.jsx(hv,{className:"h-6 w-6"}),title:e("landing.features.communication.title"),description:e("landing.features.communication.description")},{icon:a.jsx(ZS,{className:"h-6 w-6"}),title:e("landing.features.taskManagement.title"),description:e("landing.features.taskManagement.description")},{icon:a.jsx(XS,{className:"h-6 w-6"}),title:e("landing.features.security.title"),description:e("landing.features.security.description")}];return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:[a.jsx("header",{className:"relative z-10 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between py-4 sm:py-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-8 w-8 rounded-lg bg-primary flex items-center justify-center",children:a.jsx("span",{className:"text-primary-foreground font-bold text-lg",children:"M"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:e("landing.brandName")})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(vN,{}),a.jsx(G,{onClick:()=>t("/login"),className:"shadow-lg hover:shadow-xl transition-all duration-200",children:e("buttons.login")})]})]})}),a.jsxs("section",{className:"relative px-4 sm:px-6 lg:px-8 pb-12 sm:pb-16 lg:pb-20",children:[a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center",children:[a.jsxs(ze,{variant:"secondary",className:"mb-4 px-3 py-1 text-sm font-medium",children:[a.jsx(_L,{className:"h-3 w-3 mr-1"}),e("landing.badge")]}),a.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 mb-6 leading-tight",children:[e("landing.hero.title.line1"),a.jsx("span",{className:"text-primary block",children:e("landing.hero.title.line2")})]}),a.jsx("p",{className:"text-lg sm:text-xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed",children:e("landing.hero.description")}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center mb-12",children:[a.jsxs(G,{size:"lg",onClick:()=>t("/login"),className:"px-8 py-3 text-lg shadow-lg hover:shadow-xl transition-all duration-200 group",children:[e("landing.hero.cta.primary"),a.jsx(ZI,{className:"ml-2 h-5 w-5 group-hover:translate-x-1 transition-transform"})]}),a.jsx(G,{variant:"outline",size:"lg",className:"px-8 py-3 text-lg",children:e("landing.hero.cta.secondary")})]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-6 max-w-2xl mx-auto",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-primary",children:e("landing.stats.users")}),a.jsx("div",{className:"text-sm text-gray-600",children:e("landing.stats.usersLabel")})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-primary",children:e("landing.stats.projects")}),a.jsx("div",{className:"text-sm text-gray-600",children:e("landing.stats.projectsLabel")})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-primary",children:e("landing.stats.uptime")}),a.jsx("div",{className:"text-sm text-gray-600",children:e("landing.stats.uptimeLabel")})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-primary",children:e("landing.stats.support")}),a.jsx("div",{className:"text-sm text-gray-600",children:e("landing.stats.supportLabel")})]})]})]})}),a.jsxs("div",{className:"absolute inset-0 -z-10 overflow-hidden",children:[a.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-primary/10 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-400/10 rounded-full blur-3xl"})]})]}),a.jsx("section",{className:"px-4 sm:px-6 lg:px-8 py-12 sm:py-16 lg:py-20 bg-white/50 backdrop-blur-sm",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:e("landing.features.title")}),a.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:e("landing.features.subtitle")})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8",children:r.map((n,s)=>a.jsx(ve,{className:"group hover:shadow-lg transition-all duration-200 border-0 shadow-md bg-white/80 backdrop-blur-sm",children:a.jsxs(_e,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"p-2 rounded-lg bg-primary/10 text-primary group-hover:bg-primary group-hover:text-primary-foreground transition-colors",children:n.icon}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n.title})]}),a.jsx("p",{className:"text-gray-600 leading-relaxed",children:n.description})]})},s))})]})}),a.jsx("section",{className:"px-4 sm:px-6 lg:px-8 py-12 sm:py-16 lg:py-20",children:a.jsx("div",{className:"max-w-4xl mx-auto text-center",children:a.jsx(ve,{className:"bg-gradient-to-r from-primary to-blue-600 text-white border-0 shadow-2xl",children:a.jsxs(_e,{className:"p-8 sm:p-12",children:[a.jsx(RL,{className:"h-12 w-12 mx-auto mb-6 text-primary-foreground/80"}),a.jsx("h3",{className:"text-2xl sm:text-3xl font-bold mb-4",children:e("landing.cta.title")}),a.jsx("p",{className:"text-lg mb-8 text-primary-foreground/90 max-w-2xl mx-auto",children:e("landing.cta.description")}),a.jsxs(G,{size:"lg",variant:"secondary",onClick:()=>t("/login"),className:"px-8 py-3 text-lg shadow-lg hover:shadow-xl transition-all duration-200 group",children:[e("landing.cta.button"),a.jsx(Cd,{className:"ml-2 h-5 w-5 group-hover:scale-110 transition-transform"})]})]})})})}),a.jsx("footer",{className:"px-4 sm:px-6 lg:px-8 py-8 border-t border-gray-200 bg-white/50 backdrop-blur-sm",children:a.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[a.jsx("div",{className:"h-6 w-6 rounded bg-primary flex items-center justify-center",children:a.jsx("span",{className:"text-primary-foreground font-bold text-sm",children:"M"})}),a.jsxs("span",{className:"font-semibold text-gray-900",children:[e("landing.brandName")," CRM"]})]}),a.jsx("p",{className:"text-sm text-gray-600",children:e("landing.footer.copyright",{brand:e("landing.brandName")})})]})})]})},_z=()=>{const[t,e]=f.useState("loading"),[r,n]=f.useState("Processing authentication..."),s=vn(),{user:o}=bt();return f.useEffect(()=>{let i;return(async()=>{try{if(console.log("[AuthCallback] Handling OAuth callback"),o){console.log("[AuthCallback] User already authenticated by auth context:",o.role),e("success"),n("Authentication successful! Redirecting..."),setTimeout(()=>{o.role==="client"?s("/client-portal"):o.role==="employee"||o.role==="team_leader"?window.location.href="/#/employee_dashboard":window.location.href="/#/dashboard"},1500);return}console.log("[AuthCallback] Waiting for OAuth session to establish...");let c=0;const u=20,d=async()=>{c++,console.log(`[AuthCallback] Checking session and profile (attempt ${c}/${u})`);try{const{data:{user:h},error:m}=await Z.auth.getUser();if(m&&console.error("[AuthCallback] User error:",m),h){console.log("[AuthCallback] Found authenticated user:",h.id);const{data:g}=await Z.from("users").select("user_id").eq("auth_user_id",h.id).maybeSingle();if(g){console.log("[AuthCallback] User profile exists, fetching user data...");const y=await hr.getCurrentUser(h.id);if(y){localStorage.removeItem("oauth_intended_role"),e("success"),n("Authentication successful! Redirecting..."),setTimeout(()=>{y.role==="client"?s("/client-portal"):y.role==="employee"||y.role==="team_leader"?window.location.href="/#/employee_dashboard":window.location.href="/#/dashboard"},1500);return}}else console.log("[AuthCallback] Profile not yet created by trigger, waiting...")}const{data:{session:p},error:v}=await Z.auth.getSession();if(v&&console.error("[AuthCallback] Session error:",v),p!=null&&p.user){console.log("[AuthCallback] Found session user:",p.user.id);const{data:g}=await Z.from("users").select("user_id").eq("auth_user_id",p.user.id).maybeSingle();if(g){console.log("[AuthCallback] User profile exists, fetching user data...");const y=await hr.getCurrentUser(p.user.id);if(y){localStorage.removeItem("oauth_intended_role"),e("success"),n("Authentication successful! Redirecting..."),setTimeout(()=>{y.role==="client"?s("/client-portal"):y.role==="employee"||y.role==="team_leader"?window.location.href="/#/employee_dashboard":window.location.href="/#/dashboard"},1500);return}}else console.log("[AuthCallback] Profile not yet created by trigger, waiting...")}c<u?(console.log("[AuthCallback] No session or profile found, waiting and retrying..."),i=setTimeout(d,1e3)):(console.error("[AuthCallback] No session or profile found after maximum attempts"),e("error"),n("Authentication session not established. Please try signing in again."),setTimeout(()=>s("/login"),3e3))}catch(h){console.error("[AuthCallback] Error checking session and profile:",h),c<u?i=setTimeout(d,1e3):(e("error"),n("Authentication failed. Please try again."),setTimeout(()=>s("/login"),3e3))}};d()}catch(c){console.error("[AuthCallback] Error handling callback:",c),e("error"),n("Authentication failed. Please try again."),setTimeout(()=>s("/login"),3e3)}})(),()=>{i&&clearTimeout(i)}},[o,s]),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:a.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md text-center max-w-md",children:[t==="loading"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Completing Sign In"}),a.jsx("p",{className:"text-gray-600",children:r})]}),t==="success"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("h2",{className:"text-xl font-semibold mb-2 text-green-600",children:"Success!"}),a.jsx("p",{className:"text-gray-600",children:r})]}),t==="error"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsx("h2",{className:"text-xl font-semibold mb-2 text-red-600",children:"Authentication Failed"}),a.jsx("p",{className:"text-gray-600",children:r})]})]})})};function bz(){return a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold tracking-tight",children:"Partner Dashboard"}),a.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:"Welcome to your partner portal"})]})}),a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"w-24 h-24 bg-primary/10 rounded-full flex items-center justify-center mx-auto",children:a.jsx("svg",{className:"w-12 h-12 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),a.jsx("h2",{className:"text-2xl font-semibold",children:"Coming Soon"}),a.jsx("p",{className:"text-muted-foreground max-w-md",children:"We're working hard to bring you an amazing partner experience. Check back soon for updates and new features."})]})})]})}function jz(){return a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Partner Employee Dashboard"}),a.jsx("p",{className:"text-muted-foreground mt-2 text-base",children:"Welcome to your partner employee portal"})]})}),a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"w-24 h-24 bg-primary/10 rounded-full flex items-center justify-center mx-auto",children:a.jsx("svg",{className:"w-12 h-12 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),a.jsx("h2",{className:"text-2xl font-semibold",children:"Coming Soon"}),a.jsx("p",{className:"text-muted-foreground max-w-md",children:"We're working hard to bring you an amazing partner employee experience. Check back soon for updates and new features."})]})})]})}const Sz=1,Nz=1e6;let Qf=0;function kz(){return Qf=(Qf+1)%Number.MAX_SAFE_INTEGER,Qf.toString()}const Jf=new Map,E0=t=>{if(Jf.has(t))return;const e=setTimeout(()=>{Jf.delete(t),Pl({type:"REMOVE_TOAST",toastId:t})},Nz);Jf.set(t,e)},Cz=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,Sz)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?E0(r):t.toasts.forEach(n=>{E0(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},zu=[];let Wu={toasts:[]};function Pl(t){Wu=Cz(Wu,t),zu.forEach(e=>{e(Wu)})}function Ez({...t}){const e=kz(),r=s=>Pl({type:"UPDATE_TOAST",toast:{...s,id:e}}),n=()=>Pl({type:"DISMISS_TOAST",toastId:e});return Pl({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||n()}}}),{id:e,dismiss:n,update:r}}function Pz(){const[t,e]=f.useState(Wu);return f.useEffect(()=>(zu.push(e),()=>{const r=zu.indexOf(e);r>-1&&zu.splice(r,1)}),[t]),{...t,toast:Ez,dismiss:r=>Pl({type:"DISMISS_TOAST",toastId:r})}}function Tz(){var $;const{t}=lt(),{user:e}=bt(),{isRTL:r}=xa(),{toast:n}=Pz(),[s,o]=f.useState([]),[i,l]=f.useState([]),[c,u]=f.useState({}),[d,h]=f.useState(!0),[m,p]=f.useState(""),[v,g]=f.useState(null),[y,w]=f.useState(null),[x,_]=f.useState([]);f.useState(!1);const[b,j]=f.useState(!1),[E,k]=f.useState(null),[P,T]=f.useState({}),[C,L]=f.useState({}),[O,J]=f.useState([]),[W,U]=f.useState(!1),[R,I]=f.useState(null),[N,F]=f.useState(null),[q,A]=f.useState({template_name:"",template_name_ar:"",template_description:"",template_description_ar:"",category:"",is_active:!0,is_default:!1}),[Q,ye]=f.useState([]);f.useState({template_name:"",template_name_ar:"",template_description:"",template_description_ar:"",category:"",is_active:!0,is_default:!1});const[xe,Ie]=f.useState({}),[be,le]=f.useState(!1);f.useEffect(()=>{Ne()},[]);const Ne=async()=>{try{h(!0);const[S,M,Y]=await Promise.all([Id.getAll().catch(Fe=>(console.error("[Surveys] Error fetching surveys:",Fe),[])),wn.getAll().catch(Fe=>(console.error("[Surveys] Error fetching templates:",Fe),[])),Vr.getAll().catch(Fe=>(console.error("[Surveys] Error fetching users:",Fe),[]))]),ee=M.map(async Fe=>{try{const gt=await wn.getFields(Fe.template_id);return{templateId:Fe.template_id,fields:gt}}catch(gt){return console.error(`[Surveys] Error fetching fields for template ${Fe.template_id}:`,gt),{templateId:Fe.template_id,fields:[]}}}),pe=await Promise.all(ee),oe={};pe.forEach(Fe=>{oe[Fe.templateId]=Fe.fields}),o(S),l(M),J(Y),u(oe)}catch(S){console.error("Failed to load surveys data:",S)}finally{h(!1)}},Re=s.filter(S=>{var M,Y;return S.client_name.toLowerCase().includes(m.toLowerCase())||((M=S.client_company)==null?void 0:M.toLowerCase().includes(m.toLowerCase()))||((Y=S.survey_name)==null?void 0:Y.toLowerCase().includes(m.toLowerCase()))}),z=i.filter(S=>{var M;return K(S,"template_name").toLowerCase().includes(m.toLowerCase())||((M=S.category)==null?void 0:M.toLowerCase().includes(m.toLowerCase()))}),re=S=>{if(!S)return t("surveys.unknownCreator");const M=O.find(Y=>Y.auth_user_id===S);return M?K(M,"user_name"):t("surveys.unknownCreator")},H=S=>{switch(S.toLowerCase()){case"completed":return a.jsxs(ze,{variant:"default",className:"bg-green-500",children:[a.jsx(Nd,{className:"h-3 w-3 mr-1"}),t("surveys.completed")]});case"in_progress":return a.jsxs(ze,{variant:"secondary",children:[a.jsx(Ho,{className:"h-3 w-3 mr-1"}),t("surveys.inProgress")]});case"pending":return a.jsxs(ze,{variant:"outline",children:[a.jsx(Ho,{className:"h-3 w-3 mr-1"}),t("surveys.pending")]});default:return a.jsx(ze,{variant:"outline",children:S})}},de=async S=>{if(w(S),c[S.template_id])_(c[S.template_id]);else try{const M=await wn.getFields(S.template_id);u(Y=>({...Y,[S.template_id]:M})),_(M)}catch(M){console.error("Failed to load template fields:",M),_([])}},Oe=()=>{const S={field_type:"text",field_label:"",is_required:!1,field_options:null,validation_rules:null,conditional_logic:null};ye(M=>[...M,S])},He=S=>{ye(M=>M.filter((Y,ee)=>ee!==S))},et=(S,M)=>{ye(Y=>Y.map((ee,pe)=>pe===S?{...ee,...M}:ee))},ct=(S,M)=>{ye(Y=>{const ee=[...Y],[pe]=ee.splice(S,1);return ee.splice(M,0,pe),ee})},Mt=()=>{A({template_name:"",template_name_ar:"",template_description:"",template_description_ar:"",category:"",is_active:!0,is_default:!1}),ye([]),I(null)},B=async S=>{A({template_name:S.template_name||"",template_name_ar:S.template_name_ar||"",template_description:S.template_description||"",template_description_ar:S.template_description_ar||"",category:S.category||"",is_active:S.is_active,is_default:S.is_default||!1});const Y=(c[S.template_id]||[]).map(ee=>({field_type:ee.field_type,field_label:ee.field_label||"",field_label_ar:ee.field_label_ar||"",help_text:ee.help_text||"",help_text_ar:ee.help_text_ar||"",is_required:ee.is_required||!1,field_options:ee.field_options,validation_rules:ee.validation_rules,default_value:ee.default_value,conditional_logic:ee.conditional_logic,image_path:ee.image_path}));ye(Y),I(S.template_id),U(!0)},he=()=>{const S={};return q.template_name.trim()||(S.template_name=t("surveys.templateNameRequired")),Q.length===0?S.fields=t("surveys.atLeastOneFieldRequired"):Q.forEach((M,Y)=>{M.field_label.trim()||(S[`field_${Y}`]=t("surveys.fieldLabelRequired",{number:Y+1}))}),Ie(S),Object.keys(S).length===0},V=async()=>{if(!he()){n({title:t("common.error"),description:t("surveys.templateValidationFailed"),variant:"destructive"});return}le(!0);try{if(R){await wn.update(R,q);const S=c[R]||[];for(const M of S)M.field_id&&await wn.deleteField(M.field_id);for(let M=0;M<Q.length;M++){const Y=Q[M];await wn.createField({template_id:R,field_order:M+1,field_type:Y.field_type,field_label:Y.field_label,field_label_ar:Y.field_label_ar||"",help_text:Y.help_text||null,help_text_ar:Y.help_text_ar||null,is_required:Y.is_required,field_options:Y.field_options,validation_rules:Y.validation_rules,default_value:Y.default_value||null,conditional_logic:Y.conditional_logic,image_path:Y.image_path||null})}n({title:t("common.success"),description:t("surveys.templateUpdated")})}else{const S={...q,created_by:e==null?void 0:e.id},M=await wn.create(S);for(let Y=0;Y<Q.length;Y++){const ee=Q[Y];await wn.createField({template_id:M.template_id,field_order:Y+1,field_type:ee.field_type,field_label:ee.field_label,field_label_ar:ee.field_label_ar||"",help_text:ee.help_text||null,help_text_ar:ee.help_text_ar||null,is_required:ee.is_required,field_options:ee.field_options,validation_rules:ee.validation_rules,default_value:ee.default_value||null,conditional_logic:ee.conditional_logic,image_path:ee.image_path||null})}n({title:t("common.success"),description:t("surveys.templateCreated")})}Mt(),U(!1),Ne()}catch(S){console.error("Failed to save template:",S),n({title:t("common.error"),description:t("surveys.templateSaveError",{action:t(R?"surveys.updateTemplate":"surveys.createTemplate")}),variant:"destructive"})}},ne=async S=>{if(k(S),!c[S.template_id])try{const ee=await wn.getFields(S.template_id);u(pe=>({...pe,[S.template_id]:ee}))}catch(ee){console.error("Failed to load template fields:",ee)}const M={};(c[S.template_id]||[]).forEach(ee=>{ee.default_value!==null&&ee.default_value!==void 0&&(M[ee.field_id.toString()]=ee.default_value)}),T(M)},ke=async S=>{try{await wn.delete(S),l(M=>M.filter(Y=>Y.template_id!==S)),F(null),u(M=>{const Y={...M};return delete Y[S],Y})}catch(M){console.error("Failed to delete template:",M),alert("Failed to delete template. Please try again.")}},se=()=>new Promise((S,M)=>{if(!navigator.geolocation){M(new Error("Geolocation is not supported by this browser"));return}navigator.geolocation.getCurrentPosition(Y=>{S({latitude:Y.coords.latitude,longitude:Y.coords.longitude,accuracy:Y.coords.accuracy})},Y=>{M(Y)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}),Le=async()=>{if(!(!E||!e))try{let S={latitude:0,longitude:0,accuracy:0};try{S=await se()}catch(Jt){console.warn("Could not get location:",Jt)}const M=c[E.template_id]||[],Y=new Map(M.map(Jt=>[Jt.field_id.toString(),Jt.field_label])),ee={};for(const[Jt,Bc]of Object.entries(P)){const Sa=Y.get(Jt)||Jt;ee[Sa]=Bc}const pe=ee["Customer Name"]||ee["Client Name"]||ee.client_name||ee.customer_name||"Anonymous",oe=ee["Customer Company"]||ee["Client Company"]||ee.Company||ee.company||ee.client_company||null,Fe=ee["Contact Number"]||ee["Contact Email"]||ee.Contact||ee.contact||ee.phone||null,gt=ee["Contact Email"]||ee.Email||ee.email||ee.client_email||null,ja=ee.Address||ee.address||ee.client_address||null,Ki=ee["Additional Notes"]||ee.Notes||ee.notes||null,Gi={},ME=Object.keys(C);for(const[Jt,Bc]of Object.entries(P))if(!ME.includes(Jt)){const Sa=Y.get(Jt)||Jt;Gi[Sa]=Bc}const IE={template_id:E.template_id,survey_name:`${K(E,"template_name")} - ${new Date().toLocaleDateString()}`,survey_description:K(E,"template_description")||null,client_name:pe,client_name_ar:null,client_contact:Fe,client_email:gt,client_address:ja,client_company:oe,client_company_ar:null,survey_responses:Gi,location_latitude:S.latitude,location_longitude:S.longitude,location_accuracy:S.accuracy,location_address:ja,status:"collected",created_by:e.id,lead_id:null,converted_to_lead_at:null,device_info:navigator.userAgent,completion_time_seconds:null,notes:Ki,notes_ar:null,updated_by:null,reviewed_by:null,reviewed_at:null};console.log("[Survey] Creating survey...");const xo=await Id.create(IE);if(console.log("[Survey] Survey created with ID:",xo.survey_id),Object.keys(C).length>0){console.log("[Survey] Uploading images...",Object.keys(C));const Jt={...Gi};for(const[xs,Bh]of Object.entries(C))try{const zc=Bh.name.split(".").pop(),LE=`${xs.replace(/[^a-zA-Z0-9]/g,"_")}_${Date.now()}.${zc}`,Wc=`surveys/survey_${xo.survey_id}/${LE}`;console.log(`[Survey] Uploading image for field "${xs}" to path: ${Wc}`);const{data:FE,error:zh}=await Z.storage.from("survey-uploads").upload(Wc,Bh,{cacheControl:"3600",upsert:!0,contentType:Bh.type});if(zh)throw console.error(`[Survey] Failed to upload image for field ${xs}:`,zh),zh;console.log(`[Survey] Upload successful for field "${xs}":`,FE);const{data:{publicUrl:gx}}=Z.storage.from("survey-uploads").getPublicUrl(Wc);console.log(`[Survey] Public URL for field "${xs}":`,gx);const $E=Y.get(xs)||xs;Jt[$E]={bucket:"survey-uploads",path:Wc,url:gx}}catch(zc){throw console.error(`[Survey] Error processing image for field ${xs}:`,zc),zc}console.log("[Survey] Updating survey with image references...");const{data:Bc,error:Sa}=await Z.from("surveys").update({survey_responses:Jt}).eq("survey_id",xo.survey_id).select().single();if(Sa)throw console.error("[Survey] Failed to update survey with images:",Sa),Sa;console.log("[Survey] Survey updated successfully with images"),xo.survey_responses=Jt}o([xo,...s]),k(null),T({}),L({}),j(!1),console.log("[Survey] Survey creation complete:",xo)}catch(S){console.error("[Survey] Failed to create survey:",S),alert(`Failed to create survey: ${S.message}`)}},It=S=>{const M=S.field_id.toString(),Y=P[M]||"";switch(S.field_type.toLowerCase()){case"text":return a.jsx(Se,{id:M,value:Y,onChange:pe=>T(oe=>({...oe,[M]:pe.target.value})),placeholder:K(S,"help_text")||S.field_label,required:S.is_required});case"textarea":return a.jsx(Hr,{id:M,value:Y,onChange:pe=>T(oe=>({...oe,[M]:pe.target.value})),placeholder:K(S,"help_text")||S.field_label,required:S.is_required,rows:3});case"number":return a.jsx(Se,{id:M,type:"number",value:Y,onChange:pe=>T(oe=>({...oe,[M]:pe.target.value})),placeholder:K(S,"help_text")||S.field_label,required:S.is_required});case"email":return a.jsx(Se,{id:M,type:"email",value:Y,onChange:pe=>T(oe=>({...oe,[M]:pe.target.value})),placeholder:K(S,"help_text")||S.field_label,required:S.is_required});case"select":if(S.field_options&&typeof S.field_options=="object"&&!Array.isArray(S.field_options)&&"options"in S.field_options&&Array.isArray(S.field_options.options)){const pe=S.field_options.options.filter(oe=>typeof oe=="string");return a.jsxs(qe,{value:Y,onValueChange:oe=>T(Fe=>({...Fe,[M]:oe})),children:[a.jsx(We,{children:a.jsx(Ke,{placeholder:K(S,"help_text")||`${t("common.select")} ${K(S,"field_label")}`})}),a.jsx(Ve,{children:pe.map((oe,Fe)=>a.jsx(ae,{value:oe,children:oe},Fe))})]})}return a.jsx(Se,{id:M,value:Y,onChange:pe=>T(oe=>({...oe,[M]:pe.target.value})),placeholder:K(S,"help_text")||S.field_label,required:S.is_required});case"radio":if(S.field_options&&typeof S.field_options=="object"&&!Array.isArray(S.field_options)&&"options"in S.field_options&&Array.isArray(S.field_options.options)){const pe=S.field_options.options.filter(oe=>typeof oe=="string");return a.jsx("div",{className:"space-y-2",children:pe.map((oe,Fe)=>a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"radio",name:M,value:oe,checked:Y===oe,onChange:gt=>T(ja=>({...ja,[M]:gt.target.value}))}),a.jsx("span",{className:"text-sm",children:oe})]},Fe))})}return a.jsx(Se,{id:M,value:Y,onChange:pe=>T(oe=>({...oe,[M]:pe.target.value})),placeholder:K(S,"help_text")||S.field_label,required:S.is_required});case"multiselect":case"checkbox":if(S.field_options&&typeof S.field_options=="object"&&!Array.isArray(S.field_options)&&"options"in S.field_options&&Array.isArray(S.field_options.options)){const pe=S.field_options.options.filter(oe=>typeof oe=="string");return a.jsx("div",{className:"space-y-2",children:pe.map((oe,Fe)=>a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:Array.isArray(Y)?Y.includes(oe):!1,onChange:gt=>{const ja=Array.isArray(Y)?Y:[];gt.target.checked?T(Ki=>({...Ki,[M]:[...ja,oe]})):T(Ki=>({...Ki,[M]:ja.filter(Gi=>Gi!==oe)}))}}),a.jsx("span",{className:"text-sm",children:oe})]},Fe))})}return a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:!!Y,onChange:pe=>T(oe=>({...oe,[M]:pe.target.checked}))}),a.jsx("span",{className:"text-sm",children:K(S,"field_label")})]});case"image":const ee=P[M];return a.jsxs("div",{className:"space-y-2",children:[a.jsx(Se,{id:M,type:"file",accept:"image/*",onChange:pe=>{var Fe;const oe=(Fe=pe.target.files)==null?void 0:Fe[0];oe&&(L(gt=>({...gt,[M]:oe})),T(gt=>({...gt,[M]:{preview:URL.createObjectURL(oe),filename:oe.name}})))},required:S.is_required}),(ee==null?void 0:ee.preview)&&a.jsxs("div",{className:"relative w-full",children:[a.jsx("img",{src:ee.preview,alt:"Preview",className:"w-full h-48 object-cover rounded-lg border"}),a.jsx(G,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:()=>{L(pe=>{const oe={...pe};return delete oe[M],oe}),T(pe=>{const oe={...pe};return delete oe[M],oe})},children:a.jsx(zr,{className:"h-4 w-4"})})]})]});default:return a.jsx(Se,{id:M,value:Y,onChange:pe=>T(oe=>({...oe,[M]:pe.target.value})),placeholder:K(S,"help_text")||S.field_label,required:S.is_required})}};return d?a.jsx("div",{className:"flex items-center justify-center h-full py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):a.jsxs("div",{className:`h-full flex flex-col space-y-6 ${r?"rtl":"ltr"}`,children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold tracking-tight",children:t("surveys.title")}),a.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:t("surveys.subtitle")})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ti,{className:"h-5 w-5"}),a.jsxs("span",{className:"text-sm font-medium",children:[s.length," ",t("surveys.totalSurveys")]})]})})]}),a.jsxs("div",{className:"relative",children:[a.jsx(so,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(Se,{placeholder:t("surveys.searchPlaceholder"),value:m,onChange:S=>p(S.target.value),className:"pl-10"})]}),a.jsxs(Lh,{defaultValue:"surveys",className:"w-full flex-1 flex flex-col",children:[a.jsxs(Uc,{className:"grid w-full grid-cols-2",children:[a.jsxs(Ln,{value:"surveys",children:[t("surveys.surveys")," (",Re.length,")"]}),a.jsxs(Ln,{value:"templates",children:[t("surveys.templates")," (",z.length,")"]})]}),a.jsxs(Fn,{value:"surveys",className:"space-y-4 flex-1 flex flex-col",children:[a.jsx("div",{className:"flex justify-end",children:a.jsxs(Dt,{open:b,onOpenChange:j,children:[a.jsx(Ya,{asChild:!0,children:a.jsxs(G,{size:"lg",className:"w-full shadow-lg hover:shadow-xl transition-all",children:[a.jsx(At,{className:"h-5 w-5 mr-2"}),t("surveys.newSurvey")]})}),a.jsxs(kt,{className:"w-[95vw] sm:w-full sm:max-w-2xl lg:max-w-4xl max-h-[85vh] overflow-y-auto",children:[a.jsx(Ct,{children:a.jsx(Et,{children:t("surveys.createNewSurvey")})}),a.jsx("div",{className:"space-y-6 py-4",children:E?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium",children:K(E,"template_name")}),a.jsx("p",{className:"text-sm text-muted-foreground",children:t("surveys.fillSurveyDetails")})]}),a.jsx(G,{variant:"outline",size:"sm",onClick:()=>{k(null),T({})},children:t("surveys.changeTemplate")})]}),a.jsx("div",{className:"space-y-4",children:($=c[E.template_id])==null?void 0:$.map(S=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs(ce,{htmlFor:S.field_label,className:"text-sm font-medium",children:[K(S,"field_label"),S.is_required&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),It(S),K(S,"help_text")&&a.jsx("p",{className:"text-xs text-muted-foreground",children:K(S,"help_text")})]},S.field_id))}),a.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-700 dark:text-blue-300",children:[a.jsx(Ww,{className:"h-4 w-4"}),a.jsx("span",{children:t("surveys.locationWillBeCaptured")})]})})]}):a.jsxs("div",{children:[a.jsx(ce,{className:"text-base font-medium mb-4 block",children:t("surveys.selectTemplate")}),a.jsx("div",{className:"w-full max-w-full grid gap-4 grid-cols-1 md:grid-cols-2",children:i.filter(S=>S.is_active).map(S=>a.jsx(ve,{className:`w-full overflow-hidden cursor-pointer transition-all hover:shadow-md ${(E==null?void 0:E.template_id)===S.template_id?"ring-2 ring-primary":""}`,onClick:()=>ne(S),children:a.jsx(_e,{className:"p-4",children:a.jsx("div",{className:"flex items-start gap-3",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-medium text-sm truncate",children:K(S,"template_name")}),S.category&&a.jsx(ze,{variant:"outline",className:"mt-1 text-xs",children:S.category}),K(S,"template_description")&&a.jsx("p",{className:"text-xs text-muted-foreground mt-2 line-clamp-2",children:K(S,"template_description")})]})})})},S.template_id))})]})}),a.jsxs("div",{className:"flex flex-col-reverse sm:flex-row gap-2",children:[a.jsx(G,{variant:"outline",onClick:()=>{j(!1),k(null),T({})},className:"w-full sm:w-auto",children:t("buttons.cancel")}),E&&a.jsx(G,{onClick:Le,disabled:!E,className:"w-full sm:w-auto",children:t("surveys.submitSurvey")})]})]})]})}),a.jsx(Tr,{className:"flex-1",children:Re.length===0?a.jsx(ve,{children:a.jsxs(_e,{className:"text-center py-12",children:[a.jsx(ti,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:t("surveys.noSurveysFound")}),a.jsx("p",{className:"text-muted-foreground",children:t(m?"surveys.noSurveysFoundDesc":"surveys.noSurveysYet")})]})}):a.jsx("div",{className:`w-full max-w-full grid gap-4 md:grid-cols-2 lg:grid-cols-3 ${r?"rtl":""}`,children:Re.map(S=>a.jsxs(ve,{className:"w-full overflow-hidden hover:shadow-lg transition-all duration-200 cursor-pointer",children:[a.jsx(Me,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-base truncate",children:S.survey_name||`${t("surveys.survey")} #${S.survey_id}`}),a.jsx("p",{className:"text-sm text-muted-foreground truncate",children:K(S,"client_name")})]}),H(S.status)]})}),a.jsxs(_e,{className:"pt-0 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(uh,{className:"h-4 w-4"}),a.jsx("span",{className:"truncate",children:S.client_company||t("surveys.noCompany")})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Ww,{className:"h-4 w-4"}),a.jsx("span",{className:"truncate",children:S.location_address||`${S.location_latitude.toFixed(4)}, ${S.location_longitude.toFixed(4)}`})]}),a.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(ia,{className:"h-4 w-4"}),a.jsxs("span",{children:[t("surveys.createdBy"),": ",re(S.created_by)]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Ho,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:new Date(S.created_at).toLocaleDateString()})]}),a.jsxs(Dt,{children:[a.jsx(Ya,{asChild:!0,children:a.jsxs(G,{variant:"outline",size:"sm",onClick:()=>g(S),children:[a.jsx(kd,{className:"h-4 w-4 mr-1"}),t("common.view")]})}),a.jsxs(kt,{className:"w-[95vw] sm:w-full sm:max-w-2xl lg:max-w-4xl max-h-[85vh] overflow-y-auto",children:[a.jsx(Ct,{children:a.jsx(Et,{children:S.survey_name||`${t("surveys.survey")} #${S.survey_id}`})}),v&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium",children:t("surveys.clientName")}),a.jsx("p",{className:"text-sm",children:K(v,"client_name")})]}),a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium",children:t("surveys.clientCompany")}),a.jsx("p",{className:"text-sm",children:v.client_company||t("surveys.noCompany")})]}),a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium",children:t("surveys.contact")}),a.jsx("p",{className:"text-sm",children:v.client_contact||t("surveys.noContact")})]}),a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium",children:t("surveys.email")}),a.jsx("p",{className:"text-sm",children:v.client_email||t("surveys.noEmail")})]})]}),a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium",children:t("surveys.location")}),a.jsx("p",{className:"text-sm",children:a.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${v.location_latitude},${v.location_longitude}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:["https://www.google.com/maps/place/",v.location_address||`${v.location_latitude.toFixed(6)}, ${v.location_longitude.toFixed(6)}`]})})]}),a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium",children:t("surveys.responses")}),a.jsx("div",{className:"mt-2 space-y-2",children:v.survey_responses&&Object.keys(v.survey_responses).length>0?Object.entries(v.survey_responses).map(([M,Y])=>{const ee=typeof Y=="object"&&Y!==null&&"bucket"in Y&&"path"in Y&&"url"in Y;return a.jsxs("div",{className:"flex flex-col gap-2 p-3 bg-muted/30 rounded-lg",children:[a.jsxs("div",{className:"font-medium text-sm text-primary",children:[M,":"]}),ee?a.jsx("div",{className:"mt-2",children:a.jsx("img",{src:Y.url,alt:M,className:"w-full max-w-md h-auto rounded-lg border object-cover"})}):a.jsx("div",{className:"text-sm text-muted-foreground break-words",children:Array.isArray(Y)?Y.join(", "):typeof Y=="object"?JSON.stringify(Y):String(Y||"N/A")})]},M)}):a.jsx("div",{className:"text-sm text-muted-foreground italic p-3 bg-muted/30 rounded-lg",children:"No responses recorded"})})]})]})]})]})]})]})]})]},S.survey_id))})})]}),a.jsxs(Fn,{value:"templates",className:"space-y-4 flex-1 flex flex-col",children:[((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="manager")&&a.jsx("div",{className:"flex justify-end p-4 pb-0",children:a.jsxs(G,{onClick:()=>U(!0),size:"lg",className:"w-full shadow-lg hover:shadow-xl transition-all",children:[a.jsx(At,{className:"h-5 w-5 mr-2"}),t("surveys.createTemplate")]})}),a.jsx(Tr,{className:"flex-1",children:z.length===0?a.jsx(ve,{children:a.jsxs(_e,{className:"text-center py-12",children:[a.jsx(ti,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:t("surveys.noTemplatesFound")}),a.jsx("p",{className:"text-muted-foreground",children:t(m?"surveys.noTemplatesFoundDesc":"surveys.noTemplatesYet")})]})}):a.jsx("div",{className:`w-full max-w-full grid gap-4 md:grid-cols-2 lg:grid-cols-3 ${r?"rtl":""}`,children:z.map(S=>a.jsxs(ve,{className:"w-full overflow-hidden hover:shadow-lg transition-all duration-200",children:[a.jsx(Me,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-base truncate",children:K(S,"template_name")}),S.category&&a.jsx(ze,{variant:"outline",className:"mt-1 text-xs",children:S.category})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[S.is_default&&a.jsx(ze,{variant:"default",className:"text-xs",children:t("surveys.default")}),S.is_active?a.jsx(Nd,{className:"h-4 w-4 text-green-500"}):a.jsx(lL,{className:"h-4 w-4 text-red-500"})]})]})}),a.jsxs(_e,{className:"pt-0 space-y-3",children:[K(S,"template_description")&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:K(S,"template_description")}),a.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Ho,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:new Date(S.created_at).toLocaleDateString()})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(Dt,{children:[a.jsx(Ya,{asChild:!0,children:a.jsxs(G,{variant:"outline",size:"sm",onClick:()=>de(S),children:[a.jsx(kd,{className:"h-4 w-4 mr-1"}),t("common.view")]})}),a.jsxs(kt,{className:"w-[95vw] sm:w-full sm:max-w-2xl lg:max-w-4xl max-h-[85vh] overflow-y-auto",children:[a.jsx(Ct,{children:a.jsx(Et,{children:K(y||S,"template_name")})}),y&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium",children:t("surveys.category")}),a.jsx("p",{className:"text-sm",children:y.category||t("surveys.noCategory")})]}),a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium",children:t("surveys.status")}),a.jsxs("div",{className:"flex items-center gap-2",children:[y.is_active?a.jsx(ze,{variant:"default",className:"bg-green-500",children:t("surveys.active")}):a.jsx(ze,{variant:"secondary",children:t("surveys.inactive")}),y.is_default&&a.jsx(ze,{variant:"default",children:t("surveys.default")})]})]})]}),a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium",children:t("surveys.description")}),a.jsx("p",{className:"text-sm mt-1",children:K(y,"template_description")||t("surveys.noDescription")})]}),a.jsxs("div",{children:[a.jsxs(ce,{className:"text-sm font-medium",children:[t("surveys.fields")," (",x.length,")"]}),a.jsx("div",{className:"mt-2 space-y-2",children:x.length===0?a.jsx("p",{className:"text-sm text-muted-foreground",children:t("surveys.noFields")}):x.sort((M,Y)=>M.field_order-Y.field_order).map(M=>a.jsx("div",{className:"border rounded-lg p-3 bg-muted/30",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(ze,{variant:"outline",className:"text-xs",children:M.field_type}),a.jsx("span",{className:"text-sm font-medium",children:K(M,"field_label")}),M.is_required&&a.jsx("span",{className:"text-red-500 text-sm",children:"*"})]}),K(M,"help_text")&&a.jsx("p",{className:"text-xs text-muted-foreground",children:K(M,"help_text")})]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["#",M.field_order]})]})},M.field_id))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium",children:t("surveys.created")}),a.jsx("p",{children:new Date(y.created_at).toLocaleString()})]}),a.jsxs("div",{children:[a.jsx(ce,{className:"text-sm font-medium",children:t("surveys.updated")}),a.jsx("p",{children:new Date(y.updated_at).toLocaleString()})]})]})]})]})]}),((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="manager")&&a.jsxs(a.Fragment,{children:[a.jsx(G,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-blue-50",onClick:M=>{M.stopPropagation(),B(S)},children:a.jsx(yL,{className:"h-4 w-4"})}),a.jsxs(ba,{children:[a.jsx($c,{asChild:!0,children:a.jsx(G,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:M=>{M.stopPropagation(),F(S.template_id)},children:a.jsx(zr,{className:"h-4 w-4"})})}),a.jsxs(ds,{onClick:M=>M.stopPropagation(),children:[a.jsxs(hs,{children:[a.jsx(ms,{children:t("surveys.deleteTemplate")}),a.jsx(ps,{children:t("surveys.deleteTemplateConfirmation",{name:K(S,"template_name")})})]}),a.jsxs(fs,{children:[a.jsx(vs,{children:t("buttons.cancel")}),a.jsx(gs,{onClick:M=>{M.stopPropagation(),ke(S.template_id)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:t("buttons.delete")})]})]})]})]})]})]})]})]},S.template_id))})})]})]}),a.jsx(Dt,{open:W,onOpenChange:U,children:a.jsxs(kt,{className:"w-[95vw] sm:w-full sm:max-w-2xl lg:max-w-4xl max-h-[85vh] overflow-y-auto",children:[a.jsxs(Ct,{children:[a.jsx(Et,{children:t(R?"surveys.editTemplateTitle":"surveys.createTemplateTitle")}),a.jsx(Wt,{children:t("surveys.createTemplateDesc")})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(ce,{htmlFor:"template_name",children:[t("surveys.templateName")," *"]}),a.jsx(Se,{id:"template_name",value:q.template_name,onChange:S=>A(M=>({...M,template_name:S.target.value})),placeholder:t("surveys.templateName"),className:xe.template_name?"border-red-500":""}),xe.template_name&&a.jsx("p",{className:"text-sm text-red-500",children:xe.template_name})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ce,{htmlFor:"category",children:t("surveys.category")}),a.jsxs(qe,{value:q.category,onValueChange:S=>A(M=>({...M,category:S})),children:[a.jsx(We,{children:a.jsx(Ke,{placeholder:t("surveys.selectCategory")})}),a.jsxs(Ve,{children:[a.jsx(ae,{value:"customer_satisfaction",children:t("surveys.customerSatisfaction")}),a.jsx(ae,{value:"product_feedback",children:t("surveys.productFeedback")}),a.jsx(ae,{value:"service_quality",children:t("surveys.serviceQuality")}),a.jsx(ae,{value:"general",children:t("surveys.general")})]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ce,{htmlFor:"template_description",children:t("surveys.description")}),a.jsx(Hr,{id:"template_description",value:q.template_description,onChange:S=>A(M=>({...M,template_description:S.target.value})),placeholder:t("surveys.description"),rows:3})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"is_active",checked:q.is_active,onChange:S=>A(M=>({...M,is_active:S.target.checked})),className:"rounded"}),a.jsx(ce,{htmlFor:"is_active",children:t("surveys.isActive")})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h3",{className:"text-lg font-semibold",children:t("surveys.fields")})}),xe.fields&&a.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-sm text-red-600",children:xe.fields})}),a.jsx("div",{className:"space-y-3",children:Q.map((S,M)=>{var Y,ee,pe;return a.jsx(ve,{className:"p-4",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[a.jsx(G,{variant:"ghost",size:"sm",onClick:()=>ct(M,Math.max(0,M-1)),disabled:M===0,children:a.jsx(eL,{className:"h-4 w-4"})}),a.jsx(G,{variant:"ghost",size:"sm",onClick:()=>ct(M,Math.min(Q.length-1,M+1)),disabled:M===Q.length-1,children:a.jsx(JI,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex-1 space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(ce,{children:[t("surveys.fieldLabel")," *"]}),a.jsx(Se,{value:S.field_label,onChange:oe=>et(M,{field_label:oe.target.value}),placeholder:t("surveys.fieldLabel"),className:xe[`field_${M}`]?"border-red-500":""}),xe[`field_${M}`]&&a.jsx("p",{className:"text-sm text-red-500",children:xe[`field_${M}`]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(ce,{children:[t("surveys.fieldType")," *"]}),a.jsxs(qe,{value:S.field_type,onValueChange:oe=>et(M,{field_type:oe}),children:[a.jsx(We,{children:a.jsx(Ke,{})}),a.jsxs(Ve,{children:[a.jsx(ae,{value:"text",children:t("surveys.text")}),a.jsx(ae,{value:"textarea",children:t("surveys.textarea")}),a.jsx(ae,{value:"email",children:t("surveys.email")}),a.jsx(ae,{value:"select",children:t("surveys.select")}),a.jsx(ae,{value:"multiselect",children:t("surveys.multiselect")}),a.jsx(ae,{value:"radio",children:t("surveys.radio")}),a.jsx(ae,{value:"checkbox",children:t("surveys.checkbox")}),a.jsx(ae,{value:"image",children:t("surveys.image")})]})]})]})]}),(S.field_type==="select"||S.field_type==="multiselect"||S.field_type==="radio")&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(ce,{children:t("surveys.options")}),a.jsx(Hr,{defaultValue:((ee=(Y=S.field_options)==null?void 0:Y.options)==null?void 0:ee.join(`
`))||"",onBlur:oe=>{const Fe=oe.target.value.split(/[\n\s]+/).filter(gt=>gt.trim()).map(gt=>gt.trim());et(M,{field_options:{options:Fe,allow_multiple:S.field_type==="multiselect"}})},placeholder:"Enter options separated by spaces or new lines (e.g., POS CRM ERP)",rows:3}),((pe=S.field_options)==null?void 0:pe.options)&&S.field_options.options.length>0&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:[S.field_options.options.length," option(s): ",S.field_options.options.join(", ")]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:`required-${M}`,checked:S.is_required,onChange:oe=>et(M,{is_required:oe.target.checked}),className:"rounded"}),a.jsx(ce,{htmlFor:`required-${M}`,children:t("surveys.isRequired")})]})]}),a.jsx(G,{variant:"ghost",size:"sm",onClick:()=>He(M),className:"text-red-500 hover:text-red-700",children:a.jsx(zr,{className:"h-4 w-4"})})]})},M)})}),a.jsx("div",{className:"flex justify-center pt-4",children:a.jsxs(G,{onClick:Oe,size:"sm",variant:"outline",children:[a.jsx(At,{className:"h-4 w-4 mr-2"}),t("surveys.addField")]})})]})]}),a.jsxs(Yt,{children:[a.jsx(G,{variant:"outline",onClick:()=>U(!1),disabled:be,children:t("buttons.cancel")}),a.jsx(G,{onClick:V,disabled:!q.template_name.trim()||be,children:t(be?"buttons.saving":R?"surveys.updateTemplate":"surveys.createTemplate")})]})]})})]})}function Rz(){const{t}=lt(),{user:e}=bt(),[r,n]=f.useState([]),[s,o]=f.useState(!0),[i,l]=f.useState(null),[c,u]=f.useState(""),[d,h]=f.useState(null),[m,p]=f.useState(!1),[v,g]=f.useState("leads"),[y,w]=f.useState(""),[x,_]=f.useState("");if((e==null?void 0:e.role)!=="admin")return a.jsx(lp,{to:"/",replace:!0});f.useEffect(()=>{b()},[]);const b=async()=>{try{o(!0);const C=await gr.getAll();n(C.filter(L=>L.project_id===null))}catch(C){console.error("Failed to load stages:",C)}finally{o(!1)}},j=C=>r.filter(L=>L.stage_type===C).sort((L,O)=>(L.stager_order_index??0)-(O.stager_order_index??0)),E=async()=>{if(y.trim())try{const C=j(v),L=C.length>0?Math.max(...C.map(J=>J.stager_order_index||0)):-1,O={stage_name:y.trim(),stage_name_ar:x.trim()||null,stage_type:v,stager_order_index:L+1,project_id:null,color:"border-l-4 border-gray-400",color_var:"--gray-400"};await gr.create(O),await b(),w(""),_(""),p(!1)}catch(C){console.error("Failed to create stage:",C)}},k=async(C,L)=>{try{await gr.update(C.stage_id,L),await b(),l(null),u("")}catch(O){console.error("Failed to update stage:",O)}},P=async C=>{try{await gr.delete(C),await b(),h(null)}catch(L){console.error("Failed to delete stage:",L)}},T=C=>{const L=j(C);return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:t(`settings.${C}`)}),a.jsxs(G,{size:"sm",onClick:()=>{g(C),p(!0)},children:[a.jsx(At,{className:"h-4 w-4 mr-2"}),t("settings.addStage")]})]}),L.length===0?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:t("settings.noStages")}):a.jsx("div",{className:"space-y-2",children:L.map((O,J)=>a.jsx(ve,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(dh,{className:"h-5 w-5 text-muted-foreground cursor-move"}),(i==null?void 0:i.stage_id)===O.stage_id?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx(Se,{value:i.stage_name,onChange:W=>l({...i,stage_name:W.target.value}),placeholder:t("settings.englishName"),autoFocus:!0}),a.jsx(Se,{value:c,onChange:W=>u(W.target.value),placeholder:t("settings.arabicName"),dir:"rtl"})]}),a.jsx(G,{size:"sm",variant:"ghost",onClick:()=>k(O,{stage_name:i.stage_name,stage_name_ar:c||null}),children:a.jsx(ta,{className:"h-4 w-4"})}),a.jsx(G,{size:"sm",variant:"ghost",onClick:()=>{l(null),u("")},children:a.jsx(hh,{className:"h-4 w-4"})})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium",children:K(O,"stage_name")}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[t("settings.order"),": ",O.stager_order_index]})]}),a.jsx(G,{size:"sm",variant:"ghost",onClick:()=>{l(O),u(O.stage_name_ar||"")},children:a.jsx(fv,{className:"h-4 w-4"})}),a.jsx(G,{size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive",onClick:()=>h(O.stage_id),children:a.jsx(zr,{className:"h-4 w-4"})})]})]})},O.stage_id))})]})};return s?a.jsx("div",{className:"flex items-center justify-center h-full py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:t("settings.title")}),a.jsx("p",{className:"text-muted-foreground",children:t("settings.description")})]}),a.jsxs(Lh,{defaultValue:"stages",className:"space-y-4",children:[a.jsx(Uc,{children:a.jsx(Ln,{value:"stages",children:t("settings.stageManagement")})}),a.jsx(Fn,{value:"stages",className:"space-y-6",children:a.jsxs("div",{className:"grid gap-6",children:[a.jsxs(ve,{children:[a.jsx(Me,{children:a.jsx(Qe,{children:t("settings.leads")})}),a.jsx(_e,{children:T("leads")})]}),a.jsxs(ve,{children:[a.jsx(Me,{children:a.jsx(Qe,{children:t("settings.projects")})}),a.jsx(_e,{children:T("projects")})]}),a.jsxs(ve,{children:[a.jsx(Me,{children:a.jsx(Qe,{children:t("settings.tasks")})}),a.jsx(_e,{children:T("tasks")})]}),a.jsxs(ve,{children:[a.jsx(Me,{children:a.jsx(Qe,{children:t("settings.tickets")})}),a.jsx(_e,{children:T("tickets")})]})]})})]}),a.jsx(Dt,{open:m,onOpenChange:p,children:a.jsxs(kt,{children:[a.jsxs(Ct,{children:[a.jsx(Et,{children:t("settings.addStage")}),a.jsx(Wt,{children:t("settings.addStageDesc",{type:t(`settings.${v}`)})})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ce,{htmlFor:"stage-name",children:t("settings.englishName")}),a.jsx(Se,{id:"stage-name",value:y,onChange:C=>w(C.target.value),placeholder:t("settings.stageNamePlaceholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ce,{htmlFor:"stage-name-ar",children:t("settings.arabicName")}),a.jsx(Se,{id:"stage-name-ar",value:x,onChange:C=>_(C.target.value),placeholder:t("settings.stageNamePlaceholder"),dir:"rtl"})]})]}),a.jsxs(Yt,{children:[a.jsx(G,{variant:"outline",onClick:()=>p(!1),children:t("buttons.cancel")}),a.jsx(G,{onClick:E,disabled:!y.trim(),children:t("buttons.create")})]})]})}),a.jsx(ba,{open:!!d,onOpenChange:C=>!C&&h(null),children:a.jsxs(ds,{children:[a.jsxs(hs,{children:[a.jsx(ms,{children:t("settings.deleteStage")}),a.jsx(ps,{children:t("settings.deleteStageConfirmation")})]}),a.jsxs(fs,{children:[a.jsx(vs,{children:t("buttons.cancel")}),a.jsx(gs,{onClick:()=>d&&P(d),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:t("buttons.delete")})]})]})})]})}const Oz=()=>a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Unauthorized Access"}),a.jsx("p",{className:"mb-4",children:"You don't have permission to view this page."}),a.jsx("button",{onClick:()=>window.history.back(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Go Back"})]})});console.log(" SUPABASE URL (runtime):","https://studio.middar.com/");const Dz=()=>{const{user:t}=bt();return(t==null?void 0:t.role)==="client"?a.jsx(xz,{}):a.jsx(vz,{})},P0=({children:t})=>a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-900 dark:to-slate-800",children:t});function Az(){return a.jsx(yD,{children:a.jsx(LS,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:a.jsx(QM,{children:a.jsx(GM,{children:a.jsx(Mz,{})})})})})}function Mz(){const{isRTL:t}=xa(),e=cs(),{t:r}=lt();return f.useEffect(()=>{document.documentElement.dir=t?"rtl":"ltr"},[t]),f.useEffect(()=>{const n=e.pathname.split("/").filter(c=>c),s="Middar CRM";if(n.length===0){document.title=s;return}const o=n[n.length-1],i={dashboard:"navigation.dashboard",projects:"navigation.projects",users:"navigation.users",settings:"navigation.settings",leads:"navigation.leads",tickets:"navigation.tickets",tasks:"navigation.tasks",teams:"navigation.teams",clients:"navigation.clients",chats:"navigation.chats",surveys:"navigation.surveys","client-portal":"navigation.clientPortal","partner-dashboard":"navigation.partnerDashboard",employee_dashboard:"navigation.empDashboard","partner-employee-dashboard":"auth.partnerEmployee"};let l="";if(i[o])l=r(i[o]);else if(/^\d+$/.test(o)||o.length>20)if(n.length>1){const c=n[n.length-2];i[c]?l=`${r(i[c])} - ${o}`:l=o}else l=o;else l=o.split("-").map(c=>c.charAt(0).toUpperCase()+c.slice(1)).join(" ");document.title=`${l} | ${s}`},[e,r]),a.jsxs(hD,{children:[a.jsx(vt,{path:"/login",element:a.jsx(P0,{children:a.jsx(OL,{})})}),a.jsx(vt,{path:"/signup",element:a.jsx(P0,{children:a.jsx(DL,{})})}),a.jsx(vt,{path:"/unauthorized",element:a.jsx(Oz,{})}),a.jsx(vt,{path:"/auth/callback",element:a.jsx(_z,{})}),a.jsx(vt,{path:"/",element:a.jsx(wz,{})}),a.jsx(vt,{path:"/dashboard",element:a.jsx(Xt,{allowedRoles:["admin","manager"],children:a.jsx(Zt,{children:a.jsx(LU,{})})})}),a.jsx(vt,{path:"/employee_dashboard",element:a.jsx(Xt,{allowedRoles:["employee","team_leader"],children:a.jsx(Zt,{children:a.jsx(WU,{})})})}),a.jsx(vt,{path:"/leads",element:a.jsx(Xt,{allowedRoles:["admin","manager","employee","team_leader"],children:a.jsx(Zt,{children:a.jsx(LB,{})})})}),a.jsx(vt,{path:"/projects",element:a.jsx(Xt,{allowedRoles:["admin","manager","employee","team_leader"],children:a.jsx(Zt,{children:a.jsx(HB,{})})})}),a.jsx(vt,{path:"/tasks",element:a.jsx(Xt,{allowedRoles:["admin","manager","employee","team_leader"],children:a.jsx(Zt,{children:a.jsx($B,{})})})}),a.jsx(vt,{path:"/tickets",element:a.jsx(Xt,{allowedRoles:["admin","manager","employee","team_leader","client"],children:a.jsx(Zt,{children:a.jsx(UB,{})})})}),a.jsx(vt,{path:"/users",element:a.jsx(Xt,{allowedRoles:["admin"],children:a.jsx(Zt,{children:a.jsx(uz,{})})})}),a.jsx(vt,{path:"/settings",element:a.jsx(Xt,{allowedRoles:["admin"],children:a.jsx(Zt,{children:a.jsx(Rz,{})})})}),a.jsx(vt,{path:"/teams",element:a.jsx(Xt,{allowedRoles:["admin","manager","employee","team_leader"],children:a.jsx(Zt,{children:a.jsx(dz,{})})})}),a.jsx(vt,{path:"/chats",element:a.jsx(Xt,{allowedRoles:["admin","manager","employee","team_leader","client"],children:a.jsx(Zt,{children:a.jsx(Dz,{})})})}),a.jsx(vt,{path:"/client-portal",element:a.jsx(Xt,{allowedRoles:["client"],children:a.jsx(Zt,{children:a.jsx(yz,{})})})}),a.jsx(vt,{path:"/partner-dashboard",element:a.jsx(Xt,{allowedRoles:["partner"],children:a.jsx(Zt,{children:a.jsx(bz,{})})})}),a.jsx(vt,{path:"/partner-employee-dashboard",element:a.jsx(Xt,{allowedRoles:["partner_employee"],children:a.jsx(Zt,{children:a.jsx(jz,{})})})}),a.jsx(vt,{path:"/project/:id",element:a.jsx(Xt,{allowedRoles:["admin","manager"],children:a.jsx(sE,{})})}),a.jsx(vt,{path:"/surveys",element:a.jsx(Xt,{allowedRoles:["admin","manager","employee","team_leader"],children:a.jsx(Zt,{children:a.jsx(Tz,{})})})}),a.jsx(vt,{path:"*",element:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("h1",{children:"404 - Page Not Found"})})})]})}const Iz=new P2({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:10*60*1e3}}});ej(document.getElementById("root")).render(a.jsx(LR,{i18n:ft,children:a.jsx(A2,{client:Iz,children:a.jsx(LS,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:a.jsx(Az,{})})})}));
